"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[8325],{8325:(qe,j,a)=>{a.r(j),a.d(j,{BooksModule:()=>g});var l=a(6895),S=a(9116),n=a(9653);const ee=(0,n.PH)("[Book Exists Guard] Load Book",(0,n.Ky)()),D=(0,n.PH)("[Collection Page] Enter"),H=(0,n.PH)("[Collection/API] Load Books Success",(0,n.Ky)()),I=((0,n.PH)("[Collection/API] Load Books Failure",(0,n.Ky)()),(0,n.PH)("[Find Book Page] Search Books",(0,n.Ky)())),E=(0,n.PH)("[Books/API] Search Success",(0,n.Ky)()),z=(0,n.PH)("[Books/API] Search Failure",(0,n.Ky)()),L=(0,n.PH)("[View Book Page] Select Book",(0,n.Ky)()),te=((0,n.PH)("[Collection/API] Add Book Success",(0,n.Ky)()),(0,n.PH)("[Collection/API] Add Book Failure",(0,n.Ky)())),re=((0,n.PH)("[Collection/API] Remove Book Success",(0,n.Ky)()),(0,n.PH)("[Collection/API] Remove Book Failure",(0,n.Ky)())),W=(0,n.PH)("[Selected Book Page] Add Book",(0,n.Ky)()),K=(0,n.PH)("[Selected Book Page] Remove Book",(0,n.Ky)()),w=(0,a(4629).H)({selectId:r=>r.id,sortComparer:!1}),ie=w.getInitialState({selectedBookId:null}),ce=(0,n.Lq)(ie,(0,n.on)(E,H,(r,{books:t})=>w.addMany(t,r)),(0,n.on)(ee,(r,{book:t})=>w.addOne(t,r)),(0,n.on)(L,(r,{id:t})=>({...r,selectedBookId:t}))),le=(0,n.Lq)({loaded:!1,loading:!1,ids:[]},(0,n.on)(D,r=>({...r,loading:!0})),(0,n.on)(H,(r,{books:t})=>({loaded:!0,loading:!1,ids:t.map(o=>o.id)})),(0,n.on)(W,re,(r,{book:t})=>r.ids.indexOf(t.id)>-1?r:{...r,ids:[...r.ids,t.id]}),(0,n.on)(K,te,(r,{book:t})=>({...r,ids:r.ids.filter(o=>o!==t.id)}))),N="books-store",ue={search:(0,n.Lq)({ids:[],loading:!1,error:"",query:""},(0,n.on)(I,(r,{query:t})=>""===t?{ids:[],loading:!1,error:"",query:t}:{...r,loading:!0,error:"",query:t}),(0,n.on)(E,(r,{books:t})=>({ids:t.map(o=>o.id),loading:!1,error:"",query:r.query})),(0,n.on)(z,(r,{errorMsg:t})=>({...r,loading:!1,error:t}))),books:ce,collection:le},O=(0,n.ZF)(N),V=(0,n.P1)(O,r=>r.books),U=(0,n.P1)(V,r=>r.selectedBookId),{selectEntities:F}=w.getSelectors(V),ge=(0,n.P1)(F,U,(r,t)=>t&&r[t]),M=(0,n.P1)(O,r=>r.search),fe=(0,n.P1)(M,r=>r.ids),he=(0,n.P1)(M,r=>r.query),ke=(0,n.P1)(M,r=>r.loading),_e=(0,n.P1)(M,r=>r.error),ve=(0,n.P1)(F,fe,(r,t)=>t.map(o=>r[o]).filter(o=>null!=o)),A=(0,n.P1)(O,r=>r.collection),Q=((0,n.P1)(A,r=>r.loaded),(0,n.P1)(A,r=>r.loading),(0,n.P1)(A,r=>r.ids)),ye=(0,n.P1)(F,Q,(r,t)=>t.map(o=>r[o]).filter(o=>null!=o)),be=(0,n.P1)(Q,U,(r,t)=>!!t&&r.indexOf(t)>-1);var e=a(4650),s=a(3546);class f{transform(t){if(!t)return"Author Unknown";switch(t.length){case 0:return"Author Unknown";case 1:return t[0];case 2:return t.join(" and ");default:const o=t[t.length-1];return`${t.slice(0,-1).join(", ")}, and ${o}`}}}f.\u0275fac=function(t){return new(t||f)},f.\u0275pipe=e.\u0275\u0275definePipe({name:"addCommas",type:f,pure:!0});class h{get authors(){return this.book.volumeInfo.authors}}h.\u0275fac=function(t){return new(t||h)},h.\u0275cmp=e.\u0275\u0275defineComponent({type:h,selectors:[["lib-book-authors"]],inputs:{book:"book"},decls:5,vars:3,consts:[["mat-subheader","",1,"mt-5"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"h5",0),e.\u0275\u0275text(1,"Written By:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"addCommas"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,1,o.authors),"\n"))},dependencies:[f],changeDetection:0});class k{transform(t,o=250){const i=t.replace(/(<([^>]+)>)/gi,"");return t.length>=o?`${i.slice(0,o)}...`:i}}function Ce(r,t){if(1&r&&e.\u0275\u0275element(0,"img",5),2&r){const o=e.\u0275\u0275nextContext();e.\u0275\u0275property("src",o.thumbnail,e.\u0275\u0275sanitizeUrl)}}function Be(r,t){if(1&r&&(e.\u0275\u0275elementStart(0,"mat-card-subtitle"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"ellipsis"),e.\u0275\u0275elementEnd()),2&r){const o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(2,1,o.subtitle,40))}}function Pe(r,t){if(1&r&&(e.\u0275\u0275elementStart(0,"p"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"ellipsis"),e.\u0275\u0275elementEnd()),2&r){const o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,o.description))}}k.\u0275fac=function(t){return new(t||k)},k.\u0275pipe=e.\u0275\u0275definePipe({name:"ellipsis",type:k,pure:!0});const xe=function(r){return["/ebook/books",r]};class _{get id(){return this.book.id}get title(){return this.book.volumeInfo.title}get subtitle(){return this.book.volumeInfo.subtitle}get description(){return this.book.volumeInfo.description}get thumbnail(){return!!this.book.volumeInfo.imageLinks&&this.book.volumeInfo.imageLinks.smallThumbnail.replace("http:","")}}function Se(r,t){1&r&&e.\u0275\u0275element(0,"lib-book-preview",1),2&r&&e.\u0275\u0275property("book",t.$implicit)}_.\u0275fac=function(t){return new(t||_)},_.\u0275cmp=e.\u0275\u0275defineComponent({type:_,selectors:[["lib-book-preview"]],inputs:{book:"book"},decls:12,vars:11,consts:[[3,"routerLink"],["appearance","outlined"],["mat-card-sm-image","",3,"src",4,"ngIf"],[4,"ngIf"],[3,"book"],["mat-card-sm-image","",3,"src"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"a",0)(1,"mat-card",1)(2,"mat-card-title-group"),e.\u0275\u0275template(3,Ce,1,1,"img",2),e.\u0275\u0275elementStart(4,"mat-card-title"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"ellipsis"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,Be,3,4,"mat-card-subtitle",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-card-content"),e.\u0275\u0275template(9,Pe,3,3,"p",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"mat-card-footer"),e.\u0275\u0275element(11,"lib-book-authors",4),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction1(9,xe,o.id)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.thumbnail),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(6,6,o.title,35)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.subtitle),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.description),e.\u0275\u0275advance(2),e.\u0275\u0275property("book",o.book))},dependencies:[l.O5,S.rH,s.a8,s.dn,s.rt,s.vP,s.$j,s.n5,s.C1,h,k],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   a[_ngcontent-%COMP%]{display:flex}mat-card[_ngcontent-%COMP%]{width:400px;margin:15px;display:flex;flex-flow:column;justify-content:space-between}@media only screen and (max-width: 768px){mat-card[_ngcontent-%COMP%]{margin:15px 0!important}}mat-card[_ngcontent-%COMP%]:hover{box-shadow:3px 3px 16px -2px #00000080}mat-card-title[_ngcontent-%COMP%]{margin-right:10px}mat-card-title-group[_ngcontent-%COMP%]{margin:0}a[_ngcontent-%COMP%]{color:inherit;text-decoration:none}img[_ngcontent-%COMP%]{width:60px;min-width:60px;margin-left:5px}mat-card-content[_ngcontent-%COMP%]{margin:15px 0 0}span[_ngcontent-%COMP%]{display:inline-block;font-size:13px}mat-card-footer[_ngcontent-%COMP%]{padding:0 25px 25px}"],changeDetection:0});class d{constructor(){}ngOnInit(){}}d.\u0275fac=function(t){return new(t||d)},d.\u0275cmp=e.\u0275\u0275defineComponent({type:d,selectors:[["lib-book-preview-list"]],inputs:{books:"books"},decls:1,vars:1,consts:[[3,"book",4,"ngFor","ngForOf"],[3,"book"]],template:function(t,o){1&t&&e.\u0275\u0275template(0,Se,1,1,"lib-book-preview",0),2&t&&e.\u0275\u0275property("ngForOf",o.books)},dependencies:[l.sg,_],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}"],changeDetection:0});class v{constructor(t){this.store=t,this.books$=t.select(ye)}ngOnInit(){this.store.dispatch(D())}}v.\u0275fac=function(t){return new(t||v)(e.\u0275\u0275directiveInject(n.yh))},v.\u0275cmp=e.\u0275\u0275defineComponent({type:v,selectors:[["lib-books"]],decls:5,vars:3,consts:[["appearance","outlined"],[3,"books"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"mat-card",0)(1,"mat-card-title"),e.\u0275\u0275text(2,"My Collection"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(3,"lib-book-preview-list",1),e.\u0275\u0275pipe(4,"async")),2&t&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("books",e.\u0275\u0275pipeBind1(4,1,o.books$)))},dependencies:[s.a8,s.n5,d,l.Ov],styles:["mat-card-title[_ngcontent-%COMP%]{display:flex;justify-content:center}"]});var Ie=a(5698),G=a(3238),R=a(1281);const we=["determinateSpinner"];function Me(r,t){if(1&r&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(0,"svg",11),e.\u0275\u0275element(1,"circle",12),e.\u0275\u0275elementEnd()),2&r){const o=e.\u0275\u0275nextContext();e.\u0275\u0275attribute("viewBox",o._viewBox()),e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("stroke-dasharray",o._strokeCircumference(),"px")("stroke-dashoffset",o._strokeCircumference()/2,"px")("stroke-width",o._circleStrokeWidth(),"%"),e.\u0275\u0275attribute("r",o._circleRadius())}}const Te=(0,G.pj)(class{constructor(r){this._elementRef=r}},"primary"),Ee=new e.InjectionToken("mat-progress-spinner-default-options",{providedIn:"root",factory:function Oe(){return{diameter:Y}}}),Y=100;let Ae=(()=>{class r extends Te{constructor(o,i,c){super(o),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=Y,this._noopAnimations="NoopAnimations"===i&&!!c&&!c._forceAnimations,c&&(c.color&&(this.color=this.defaultColor=c.color),c.diameter&&(this.diameter=c.diameter),c.strokeWidth&&(this.strokeWidth=c.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(o){this._value=Math.max(0,Math.min(100,(0,R.su)(o)))}get diameter(){return this._diameter}set diameter(o){this._diameter=(0,R.su)(o)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(o){this._strokeWidth=(0,R.su)(o)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const o=2*this._circleRadius()+this.strokeWidth;return`0 0 ${o} ${o}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}}return r.\u0275fac=function(o){return new(o||r)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.ANIMATION_MODULE_TYPE,8),e.\u0275\u0275directiveInject(Ee))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(o,i){if(1&o&&e.\u0275\u0275viewQuery(we,5),2&o){let c;e.\u0275\u0275queryRefresh(c=e.\u0275\u0275loadQuery())&&(i._determinateCircle=c.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:12,hostBindings:function(o,i){2&o&&(e.\u0275\u0275attribute("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===i.mode?i.value:null)("mode",i.mode),e.\u0275\u0275styleProp("width",i.diameter,"px")("height",i.diameter,"px"),e.\u0275\u0275classProp("_mat-animation-noopable",i._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===i.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[e.\u0275\u0275InheritDefinitionFeature],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(o,i){if(1&o&&(e.\u0275\u0275template(0,Me,2,8,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(2,"div",1,2),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(4,"svg",3),e.\u0275\u0275element(5,"circle",4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(6,"div",5)(7,"div",6)(8,"div",7),e.\u0275\u0275elementContainer(9,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9),e.\u0275\u0275elementContainer(11,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",10),e.\u0275\u0275elementContainer(13,8),e.\u0275\u0275elementEnd()()()),2&o){const c=e.\u0275\u0275reference(1);e.\u0275\u0275advance(4),e.\u0275\u0275attribute("viewBox",i._viewBox()),e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeDashOffset(),"px")("stroke-width",i._circleStrokeWidth(),"%"),e.\u0275\u0275attribute("r",i._circleRadius()),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngTemplateOutlet",c),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",c),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",c)}},dependencies:[l.tP],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, transparent)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0}),r})(),Re=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=e.\u0275\u0275defineInjector({imports:[l.ez,G.BQ]}),r})();var Z=a(9549),X=a(4144);function $e(r,t){if(1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(o.error)}}class y{constructor(){this.query="",this.searching=!1,this.error="",this.search=new e.EventEmitter}}y.\u0275fac=function(t){return new(t||y)},y.\u0275cmp=e.\u0275\u0275defineComponent({type:y,selectors:[["lib-book-search"]],inputs:{query:"query",searching:"searching",error:"error"},outputs:{search:"search"},decls:9,vars:6,consts:[["appearance","outlined"],["matInput","","placeholder","Search for a book",3,"value","keyup"],[3,"diameter","strokeWidth"],[4,"ngIf"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"mat-card",0)(1,"mat-card-title"),e.\u0275\u0275text(2,"Find a Book"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-card-content")(4,"mat-form-field")(5,"input",1),e.\u0275\u0275listener("keyup",function(c){return o.search.emit(c.target.value)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(6,"mat-spinner",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"mat-card-footer"),e.\u0275\u0275template(8,$e,2,1,"span",3),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275advance(5),e.\u0275\u0275property("value",o.query),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("show",o.searching),e.\u0275\u0275property("diameter",30)("strokeWidth",3),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.error))},dependencies:[l.O5,s.a8,s.dn,s.rt,s.n5,Ae,Z.KE,X.Nt],styles:["mat-card-title[_ngcontent-%COMP%], mat-card-content[_ngcontent-%COMP%], mat-card-footer[_ngcontent-%COMP%]{display:flex;justify-content:center}mat-card-footer[_ngcontent-%COMP%]{color:red;padding:5px 0}.mat-mdc-form-field[_ngcontent-%COMP%]{min-width:300px;margin-right:10px}.mat-mdc-progress-spinner[_ngcontent-%COMP%]{position:relative;top:10px;left:10px;visibility:hidden}.mat-mdc-progress-spinner.show[_ngcontent-%COMP%]{visibility:visible}"],changeDetection:0});class b{constructor(t){this.store=t,this.searchQuery$=t.select(he).pipe((0,Ie.q)(1)),this.books$=t.select(ve),this.loading$=t.select(ke),this.error$=t.select(_e)}search(t){this.store.dispatch(I({query:t}))}}b.\u0275fac=function(t){return new(t||b)(e.\u0275\u0275directiveInject(n.yh))},b.\u0275cmp=e.\u0275\u0275defineComponent({type:b,selectors:[["lib-find-book"]],decls:6,vars:12,consts:[[3,"query","searching","error","search"],[3,"books"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"lib-book-search",0),e.\u0275\u0275listener("search",function(c){return o.search(c)}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"lib-book-preview-list",1),e.\u0275\u0275pipe(5,"async")),2&t&&(e.\u0275\u0275property("query",e.\u0275\u0275pipeBind1(1,4,o.searchQuery$))("searching",e.\u0275\u0275pipeBind1(2,6,o.loading$))("error",e.\u0275\u0275pipeBind1(3,8,o.error$)),e.\u0275\u0275advance(4),e.\u0275\u0275property("books",e.\u0275\u0275pipeBind1(5,10,o.books$)))},dependencies:[d,y,l.Ov]});var $=a(4004),J=a(4859);function je(r,t){if(1&r&&(e.\u0275\u0275elementStart(0,"mat-card-subtitle"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(o.subtitle)}}function De(r,t){if(1&r&&e.\u0275\u0275element(0,"img",10),2&r){const o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("src",o.thumbnail,e.\u0275\u0275sanitizeUrl)}}function He(r,t){if(1&r){const o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",11),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(o);const c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.remove.emit(c.book))}),e.\u0275\u0275text(1," Remove Book from Collection "),e.\u0275\u0275elementEnd()}}function ze(r,t){if(1&r){const o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",12),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(o);const c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.add.emit(c.book))}),e.\u0275\u0275text(1," Add Book to Collection "),e.\u0275\u0275elementEnd()}}function Le(r,t){if(1&r&&(e.\u0275\u0275elementStart(0,"mat-card",1)(1,"mat-card-title-group")(2,"mat-card-title"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,je,2,1,"mat-card-subtitle",2),e.\u0275\u0275template(5,De,1,1,"img",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"mat-card-content"),e.\u0275\u0275element(7,"p",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-card-footer",5),e.\u0275\u0275element(9,"bc-book-authors",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"mat-card-actions",7),e.\u0275\u0275template(11,He,2,0,"button",8),e.\u0275\u0275template(12,ze,2,0,"button",9),e.\u0275\u0275elementEnd()()),2&r){const o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(o.title),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.subtitle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.thumbnail),e.\u0275\u0275advance(2),e.\u0275\u0275property("innerHtml",o.description,e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(2),e.\u0275\u0275property("book",o.book),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.inCollection),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!o.inCollection)}}class C{constructor(){this.add=new e.EventEmitter,this.remove=new e.EventEmitter}get id(){return this.book.id}get title(){return this.book.volumeInfo.title}get subtitle(){return this.book.volumeInfo.subtitle}get description(){return this.book.volumeInfo.description}get thumbnail(){return this.book.volumeInfo.imageLinks&&this.book.volumeInfo.imageLinks.smallThumbnail&&this.book.volumeInfo.imageLinks.smallThumbnail.replace("http:","")}}C.\u0275fac=function(t){return new(t||C)},C.\u0275cmp=e.\u0275\u0275defineComponent({type:C,selectors:[["lib-book-detail"]],inputs:{book:"book",inCollection:"inCollection"},outputs:{add:"add",remove:"remove"},decls:1,vars:1,consts:[["appearance","outlined",4,"ngIf"],["appearance","outlined"],[4,"ngIf"],["mat-card-sm-image","",3,"src",4,"ngIf"],[3,"innerHtml"],[1,"footer"],[3,"book"],["align","start"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-card-sm-image","",3,"src"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,o){1&t&&e.\u0275\u0275template(0,Le,13,7,"mat-card",0),2&t&&e.\u0275\u0275property("ngIf",o.book)},dependencies:[l.O5,s.a8,s.hq,s.dn,s.rt,s.vP,s.$j,s.n5,s.C1,J.lW],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;margin:75px 0}mat-card[_ngcontent-%COMP%]{max-width:600px}mat-card-title-group[_ngcontent-%COMP%]{margin-left:0}img[_ngcontent-%COMP%]{width:60px;min-width:60px;margin-left:5px}mat-card-content[_ngcontent-%COMP%]{margin:15px 0 50px}mat-card-actions[_ngcontent-%COMP%]{margin:25px 0 0!important}mat-card-footer[_ngcontent-%COMP%]{padding:0 25px 25px;position:relative}"],changeDetection:0});class B{constructor(t){this.store=t,this.book$=t.select(ge),this.isSelectedBookInCollection$=t.select(be)}addToCollection(t){this.store.dispatch(W({book:t}))}removeFromCollection(t){this.store.dispatch(K({book:t}))}}B.\u0275fac=function(t){return new(t||B)(e.\u0275\u0275directiveInject(n.yh))},B.\u0275cmp=e.\u0275\u0275defineComponent({type:B,selectors:[["lib-selected-book"]],decls:3,vars:6,consts:[[3,"book","inCollection","add","remove"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"lib-book-detail",0),e.\u0275\u0275listener("add",function(c){return o.addToCollection(c)})("remove",function(c){return o.removeFromCollection(c)}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&t&&e.\u0275\u0275property("book",e.\u0275\u0275pipeBind1(1,2,o.book$))("inCollection",e.\u0275\u0275pipeBind1(2,4,o.isSelectedBookInCollection$))},dependencies:[C,l.Ov]});class P{constructor(t,o){this.actionsSubscription=o.params.pipe((0,$.U)(i=>L({id:i.id}))).subscribe(i=>t.dispatch(i))}ngOnDestroy(){this.actionsSubscription.unsubscribe()}}P.\u0275fac=function(t){return new(t||P)(e.\u0275\u0275directiveInject(n.yh),e.\u0275\u0275directiveInject(S.gz))},P.\u0275cmp=e.\u0275\u0275defineComponent({type:P,selectors:[["lib-view-book"]],decls:1,vars:0,template:function(t,o){1&t&&e.\u0275\u0275element(0,"lib-selected-book")},dependencies:[B],changeDetection:0});const We=[{path:"find",component:b,data:{title:"Find book"}},{path:":id",component:P,data:{title:"Book details"}},{path:"",component:v,data:{title:"Book Collection"}}];class m{}m.\u0275fac=function(t){return new(t||m)},m.\u0275mod=e.\u0275\u0275defineNgModule({type:m}),m.\u0275inj=e.\u0275\u0275defineInjector({imports:[S.Bz.forChild(We),S.Bz]});var x=a(5350),Ke=a(4986),Ne=a(515),Ve=a(9646),Ue=a(8372),Qe=a(3900),Ge=a(5684),Ye=a(2722),Ze=a(262),Xe=a(529);class p{constructor(t){this.http=t,this.API_PATH="https://www.googleapis.com/books/v1/volumes"}searchBooks(t){return this.http.get(`${this.API_PATH}?orderBy=newest&q=${t}`).pipe((0,$.U)(o=>o.items||[]))}retrieveBook(t){return this.http.get(`${this.API_PATH}/${t}`)}}p.\u0275fac=function(t){return new(t||p)(e.\u0275\u0275inject(Xe.eN))},p.\u0275prov=e.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac,providedIn:"root"});class u{constructor(t,o){this.actions$=t,this.googleBooks=o,this.search$=(0,x.GW)(()=>({debounce:i=300,scheduler:c=Ke.z}={})=>this.actions$.pipe((0,x.l4)(I),(0,Ue.b)(i,c),(0,Qe.w)(({query:q})=>{if(""===q)return Ne.c;const Je=this.actions$.pipe((0,x.l4)(I),(0,Ge.T)(1));return this.googleBooks.searchBooks(q).pipe((0,Ye.R)(Je),(0,$.U)(T=>(console.log("PP",T),E({books:T}))),(0,Ze.K)(T=>(0,Ve.of)(z({errorMsg:T.message}))))})))}}u.\u0275fac=function(t){return new(t||u)(e.\u0275\u0275inject(x.eX),e.\u0275\u0275inject(p))},u.\u0275prov=e.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac});class g{}g.\u0275fac=function(t){return new(t||g)},g.\u0275mod=e.\u0275\u0275defineNgModule({type:g}),g.\u0275inj=e.\u0275\u0275defineInjector({imports:[l.ez,m,s.QW,Re,Z.lN,X.c,J.ot,n.Aw.forFeature(N,ue),x.sQ.forFeature([u])]})}}]);