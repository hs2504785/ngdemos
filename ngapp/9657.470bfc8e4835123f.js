"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[9657],{9657:(Tt,K,a)=>{a.r(K),a.d(K,{EbookComponent:()=>v,EbookModule:()=>x,EbookService:()=>f});var t=a(4650);class f{constructor(){}}f.\u0275fac=function(e){return new(e||f)},f.\u0275prov=t.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:"root"});var i=a(9653);const T=(0,i.PH)("[Auth] Logout"),O=(0,i.PH)("[Auth] Logout Confirmation"),nt=(0,i.PH)("[Auth] Logout Confirmation Dismiss"),H=(0,i.PH)("[Login Component] Login",(0,i.Ky)()),$=(0,i.PH)("[Auth/API] Login Success",(0,i.Ky)()),R=(0,i.PH)("[Auth/API] Login Failure",(0,i.Ky)()),N=(0,i.PH)("[Auth/API] Login Redirect"),at=(0,i.Lq)({error:null,pending:!1},(0,i.on)(H,n=>({...n,error:null,pending:!0})),(0,i.on)($,n=>({...n,error:null,pending:!1})),(0,i.on)(R,(n,{error:e})=>({...n,error:e,pending:!1}))),U={user:null},G="auth",ct={status:(0,i.Lq)(U,(0,i.on)($,(n,{user:e})=>({...n,user:e})),(0,i.on)(T,()=>U)),login:at},W=(0,i.ZF)(G),lt=(0,i.P1)(W,n=>n.status),mt=(0,i.P1)(lt,n=>n.user),D=(0,i.P1)(mt,n=>!!n),z=(0,i.P1)(W,n=>n.login),J=((0,i.P1)(z,n=>n.error),(0,i.P1)(z,n=>n.pending),(0,i.PH)("[Layout] Open Sidenav")),X=(0,i.PH)("[Layout] Close Sidenav"),Q="layout",dt=(0,i.Lq)({showSidenav:!1},(0,i.on)(X,n=>({showSidenav:!1})),(0,i.on)(J,n=>({showSidenav:!0})),(0,i.on)(O,n=>({showSidenav:!1}))),pt=(0,i.ZF)(Q),ft=(0,i.P1)(pt,n=>n.showSidenav);var g=a(6895),l=a(9116),V=a(3267),B=a(6338);class k{constructor(){this.open=!1,this.closeMenu=new t.EventEmitter}ngOnInit(){}}k.\u0275fac=function(e){return new(e||k)},k.\u0275cmp=t.\u0275\u0275defineComponent({type:k,selectors:[["lib-sidenav"]],inputs:{open:"open"},outputs:{closeMenu:"closeMenu"},ngContentSelectors:["*"],decls:4,vars:1,consts:[["disableClose","",3,"opened","keydown.escape","closedStart"],["sidenav",""]],template:function(e,o){if(1&e){const c=t.\u0275\u0275getCurrentView();t.\u0275\u0275projectionDef(),t.\u0275\u0275elementStart(0,"mat-sidenav",0,1),t.\u0275\u0275listener("keydown.escape",function(){t.\u0275\u0275restoreView(c);const u=t.\u0275\u0275reference(1);return t.\u0275\u0275resetView(u.close())})("closedStart",function(){return o.closeMenu.emit()}),t.\u0275\u0275elementStart(2,"mat-nav-list"),t.\u0275\u0275projection(3),t.\u0275\u0275elementEnd()()}2&e&&t.\u0275\u0275property("opened",o.open)},dependencies:[V.JX,B.Hk],styles:["mat-sidenav[_ngcontent-%COMP%]{width:300px}"]});var M=a(4859),Y=a(3683);class w{constructor(){this.openMenu=new t.EventEmitter}ngOnInit(){}}w.\u0275fac=function(e){return new(e||w)},w.\u0275cmp=t.\u0275\u0275defineComponent({type:w,selectors:[["lib-toolbar"]],outputs:{openMenu:"openMenu"},ngContentSelectors:["*"],decls:4,vars:0,consts:[["color","primary"],["mat-icon-button","","aria-label","menu",3,"click"],[1,"ti-menu"]],template:function(e,o){1&e&&(t.\u0275\u0275projectionDef(),t.\u0275\u0275elementStart(0,"mat-toolbar",0)(1,"button",1),t.\u0275\u0275listener("click",function(){return o.openMenu.emit()}),t.\u0275\u0275element(2,"i",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275projection(3),t.\u0275\u0275elementEnd())},dependencies:[M.RK,Y.Ye]});class F{constructor(){this.icon="",this.hint="",this.routerLink="/ebook",this.navigate=new t.EventEmitter}}function bt(n,e){if(1&n){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-nav-item",6),t.\u0275\u0275listener("navigate",function(){t.\u0275\u0275restoreView(o);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.closeSidenav())}),t.\u0275\u0275text(1," My Collection "),t.\u0275\u0275elementEnd()}}function yt(n,e){if(1&n){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-nav-item",7),t.\u0275\u0275listener("navigate",function(){t.\u0275\u0275restoreView(o);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.closeSidenav())}),t.\u0275\u0275text(1," Browse Books "),t.\u0275\u0275elementEnd()}}function Ct(n,e){if(1&n){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-nav-item",8),t.\u0275\u0275listener("navigate",function(){t.\u0275\u0275restoreView(o);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.closeSidenav())}),t.\u0275\u0275text(1," Sign In "),t.\u0275\u0275elementEnd()}}function St(n,e){if(1&n){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-nav-item",8),t.\u0275\u0275listener("navigate",function(){t.\u0275\u0275restoreView(o);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.logout())}),t.\u0275\u0275text(1," Sign Out "),t.\u0275\u0275elementEnd()}}F.\u0275fac=function(e){return new(e||F)},F.\u0275cmp=t.\u0275\u0275defineComponent({type:F,selectors:[["lib-nav-item"]],inputs:{icon:"icon",hint:"hint",routerLink:"routerLink"},outputs:{navigate:"navigate"},ngContentSelectors:["*"],decls:6,vars:5,consts:[["mat-list-item","",3,"routerLink","click"],["mat-list-icon",""],["mat-line",""],["mat-line","",1,"secondary"]],template:function(e,o){1&e&&(t.\u0275\u0275projectionDef(),t.\u0275\u0275elementStart(0,"a",0),t.\u0275\u0275listener("click",function(){return o.navigate.emit()}),t.\u0275\u0275element(1,"i",1),t.\u0275\u0275elementStart(2,"span",2),t.\u0275\u0275projection(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"span",3),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275property("routerLink",o.routerLink),t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("ti-",o.icon,""),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(o.hint))},dependencies:[l.rH,B.Tg],styles:[".secondary[_ngcontent-%COMP%]{color:#0000008a}"]});class v{constructor(e){this.store=e,this.showSidenav$=this.store.select(ft),this.loggedIn$=this.store.select(D)}closeSidenav(){this.store.dispatch(X())}openSidenav(){this.store.dispatch(J())}logout(){this.store.dispatch(O())}}v.\u0275fac=function(e){return new(e||v)(t.\u0275\u0275directiveInject(i.yh))},v.\u0275cmp=t.\u0275\u0275defineComponent({type:v,selectors:[["lib-ebook"]],decls:14,vars:15,consts:[["fullscreen",""],[3,"open"],["routerLink","books","icon","book","hint","View your book collection",3,"navigate",4,"ngIf"],["routerLink","books/find","icon","search","hint","Find your next book!",3,"navigate",4,"ngIf"],[3,"navigate",4,"ngIf"],[3,"openMenu"],["routerLink","books","icon","book","hint","View your book collection",3,"navigate"],["routerLink","books/find","icon","search","hint","Find your next book!",3,"navigate"],[3,"navigate"]],template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"mat-sidenav-container",0)(1,"lib-sidenav",1),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275template(3,bt,2,0,"lib-nav-item",2),t.\u0275\u0275pipe(4,"async"),t.\u0275\u0275template(5,yt,2,0,"lib-nav-item",3),t.\u0275\u0275pipe(6,"async"),t.\u0275\u0275template(7,Ct,2,0,"lib-nav-item",4),t.\u0275\u0275pipe(8,"async"),t.\u0275\u0275template(9,St,2,0,"lib-nav-item",4),t.\u0275\u0275pipe(10,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"lib-toolbar",5),t.\u0275\u0275listener("openMenu",function(){return o.openSidenav()}),t.\u0275\u0275text(12," Book Collection "),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(13,"router-outlet"),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("open",t.\u0275\u0275pipeBind1(2,5,o.showSidenav$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(4,7,o.loggedIn$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(6,9,o.loggedIn$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!1===t.\u0275\u0275pipeBind1(8,11,o.loggedIn$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(10,13,o.loggedIn$)))},dependencies:[g.O5,l.lC,l.rH,V.TM,k,w,F,g.Ov],styles:["mat-sidenav-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.03)}"]});var Z=a(4144),A=a(3546),d=a(6325),h=a(9646),m=a(4006);function Et(n,e){if(1&n&&(t.\u0275\u0275elementStart(0,"p",11),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",o.errorMessage," ")}}class P{constructor(e){this.fb=e,this.submitted=new t.EventEmitter}ngOnInit(){this.form=this.fb.group({username:"ngrx",password:""})}submit(){this.form.valid&&this.submitted.emit(this.form.value)}}P.\u0275fac=function(e){return new(e||P)(t.\u0275\u0275directiveInject(m.qu))},P.\u0275cmp=t.\u0275\u0275defineComponent({type:P,selectors:[["lib-login-form"]],inputs:{errorMessage:"errorMessage"},outputs:{submitted:"submitted"},decls:17,vars:2,consts:[["appearance","outlined"],[1,"mx-5"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","email","id","name","formControlName","username",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control"],["class","loginError",4,"ngIf"],[1,"loginButtons"],["type","submit","mat-button",""],[1,"loginError"]],template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"mat-card",0)(1,"mat-card-title"),t.\u0275\u0275text(2,"Login"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"mat-card-content",1)(4,"form",2),t.\u0275\u0275listener("ngSubmit",function(){return o.submit()}),t.\u0275\u0275elementStart(5,"div",3)(6,"label",4),t.\u0275\u0275text(7,"Name"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(8,"input",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"div",3)(10,"label",6),t.\u0275\u0275text(11,"Password"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(12,"input",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(13,Et,2,1,"p",8),t.\u0275\u0275elementStart(14,"p",9)(15,"button",10),t.\u0275\u0275text(16,"Login"),t.\u0275\u0275elementEnd()()()()()),2&e&&(t.\u0275\u0275advance(4),t.\u0275\u0275property("formGroup",o.form),t.\u0275\u0275advance(9),t.\u0275\u0275property("ngIf",o.errorMessage))},dependencies:[g.O5,M.lW,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,A.a8,A.dn,A.n5],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;margin:72px 0}.mat-mdc-form-field[_ngcontent-%COMP%]{width:100%;min-width:300px}mat-card-title[_ngcontent-%COMP%], mat-card-content[_ngcontent-%COMP%]{display:flex;justify-content:center}.loginError[_ngcontent-%COMP%]{padding:16px;width:300px;color:#fff;background-color:red}.loginButtons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}"]});class j{constructor(e,o){this.store=e,this.router=o,this.pending$=(0,h.of)(!1),this.error$=(0,h.of)(!1)}onSubmit(e){this.store.dispatch(H({credentials:e}))}}j.\u0275fac=function(e){return new(e||j)(t.\u0275\u0275directiveInject(i.yh),t.\u0275\u0275directiveInject(l.F0))},j.\u0275cmp=t.\u0275\u0275defineComponent({type:j,selectors:[["lib-login"]],decls:2,vars:3,consts:[[3,"errorMessage","submitted"]],template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"lib-login-form",0),t.\u0275\u0275listener("submitted",function(r){return o.onSubmit(r)}),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275elementEnd()),2&e&&t.\u0275\u0275property("errorMessage",t.\u0275\u0275pipeBind1(1,1,o.error$))},dependencies:[P,g.Ov]});const Lt=[{path:"login",component:j,data:{title:"Login"}}];class b{}b.\u0275fac=function(e){return new(e||b)},b.\u0275mod=t.\u0275\u0275defineNgModule({type:b}),b.\u0275inj=t.\u0275\u0275defineInjector({imports:[l.Bz.forChild(Lt),l.Bz]});var It=a(9549),s=a(8776),xt=a(4351),y=a(4004),q=a(262),kt=a(515);const Mt=(0,i.PH)("[Auth] Load Auths"),wt=(0,i.PH)("[Auth] Load Auths Success",(0,i.Ky)()),Ft=(0,i.PH)("[Auth] Load Auths Failure",(0,i.Ky)());class C{constructor(e){this.actions$=e,this.loadAuths$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(Mt),(0,xt.b)(()=>kt.E.pipe((0,y.U)(o=>wt({data:o})),(0,q.K)(o=>(0,h.of)(Ft({error:o})))))))}}C.\u0275fac=function(e){return new(e||C)(t.\u0275\u0275inject(s.eX))},C.\u0275prov=t.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac});var tt=a(6129),et=a(8505),At=a(2843);class p{constructor(){}login({username:e}){return"test"!==e&&"ngrx"!==e?(0,At._)("Invalid username or password"):(0,h.of)({name:"User"})}logout(){return(0,h.of)(!0)}}p.\u0275fac=function(e){return new(e||p)},p.\u0275prov=t.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac,providedIn:"root"});class S{constructor(e,o,c){this.actions$=e,this.authService=o,this.router=c,this.login$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(H),(0,y.U)(r=>r.credentials),(0,tt.z)(r=>this.authService.login(r).pipe((0,y.U)(u=>$({user:u})),(0,q.K)(u=>(0,h.of)(R({error:u}))))))),this.loginSuccess$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)($),(0,et.b)(()=>{this.router.navigate(["/ebook"])})),{dispatch:!1}),this.loginRedirect$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(N,T),(0,et.b)(r=>{this.router.navigate(["/ebook/login"])})),{dispatch:!1})}}S.\u0275fac=function(e){return new(e||S)(t.\u0275\u0275inject(s.eX),t.\u0275\u0275inject(p),t.\u0275\u0275inject(l.F0))},S.\u0275prov=t.\u0275\u0275defineInjectable({token:S,factory:S.\u0275fac});class _{constructor(){}ngOnInit(){}}_.\u0275fac=function(e){return new(e||_)},_.\u0275cmp=t.\u0275\u0275defineComponent({type:_,selectors:[["lib-logout-confirmation-dialog"]],decls:9,vars:2,consts:[["mat-dialog-title",""],["mat-button","",3,"mat-dialog-close"]],template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"h2",0),t.\u0275\u0275text(1,"Logout"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"mat-dialog-content"),t.\u0275\u0275text(3,"Are you sure you want to logout?"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"mat-dialog-actions")(5,"button",1),t.\u0275\u0275text(6,"Cancel"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"button",1),t.\u0275\u0275text(8,"OK"),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275advance(5),t.\u0275\u0275property("mat-dialog-close",!1),t.\u0275\u0275advance(2),t.\u0275\u0275property("mat-dialog-close",!0))},dependencies:[M.lW,d.ZT,d.uh,d.xY,d.H8],styles:["[_nghost-%COMP%]{display:block;width:100%;max-width:300px}mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}[mat-button][_ngcontent-%COMP%]{padding:0}"]});const Pt=(0,i.PH)("[User] Idle Timeout");class E{constructor(e,o,c,r){this.actions$=e,this.authService=o,this.router=c,this.dialog=r,this.logoutConfirmation$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(O),(0,tt.z)(()=>this.dialog.open(_).afterClosed()),(0,y.U)(u=>u?T():nt()))),this.logoutIdleUser$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(Pt),(0,y.U)(()=>T())))}}E.\u0275fac=function(e){return new(e||E)(t.\u0275\u0275inject(s.eX),t.\u0275\u0275inject(p),t.\u0275\u0275inject(l.F0),t.\u0275\u0275inject(d.uw))},E.\u0275prov=t.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac});class L{}L.\u0275fac=function(e){return new(e||L)},L.\u0275mod=t.\u0275\u0275defineNgModule({type:L}),L.\u0275inj=t.\u0275\u0275defineInjector({imports:[g.ez,b,M.ot,m.UX,A.QW,It.lN,Z.c,d.Is,i.Aw.forFeature(G,ct),s.sQ.forFeature([C,S,E])]});var jt=a(5698);class I{constructor(e,o){this.store=e,this.router=o}canActivate(){return this.store.select(D).pipe((0,y.U)(e=>!!e||(this.store.dispatch(N()),!1)),(0,jt.q)(1))}}I.\u0275fac=function(e){return new(e||I)(t.\u0275\u0275inject(i.yh),t.\u0275\u0275inject(l.F0))},I.\u0275prov=t.\u0275\u0275defineInjectable({token:I,factory:I.\u0275fac,providedIn:"root"});const _t=[{path:"",component:v,children:[{path:"books",loadChildren:()=>a.e(2161).then(a.bind(a,2161)).then(n=>n.BooksModule),canActivate:[I]},{path:"",redirectTo:"books",pathMatch:"full"}]}];class x{}x.\u0275fac=function(e){return new(e||x)},x.\u0275mod=t.\u0275\u0275defineNgModule({type:x}),x.\u0275inj=t.\u0275\u0275defineInjector({imports:[g.ez,L,l.Bz.forChild(_t),Z.c,A.QW,M.ot,V.SJ,B.ie,Y.g0,d.Is,i.Aw.forFeature(Q,dt)]})}}]);