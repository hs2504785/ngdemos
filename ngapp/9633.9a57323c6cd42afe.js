(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[9633],{3825:mt=>{window,mt.exports=function(H){var S={};function C(g){if(S[g])return S[g].exports;var f=S[g]={i:g,l:!1,exports:{}};return H[g].call(f.exports,f,f.exports,C),f.l=!0,f.exports}return C.m=H,C.c=S,C.d=function(g,f,R){C.o(g,f)||Object.defineProperty(g,f,{enumerable:!0,get:R})},C.r=function(g){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},C.t=function(g,f){if(1&f&&(g=C(g)),8&f||4&f&&"object"==typeof g&&g&&g.__esModule)return g;var R=Object.create(null);if(C.r(R),Object.defineProperty(R,"default",{enumerable:!0,value:g}),2&f&&"string"!=typeof g)for(var m in g)C.d(R,m,function(h){return g[h]}.bind(null,m));return R},C.n=function(g){var f=g&&g.__esModule?function(){return g.default}:function(){return g};return C.d(f,"a",f),f},C.o=function(g,f){return Object.prototype.hasOwnProperty.call(g,f)},C.p="",C(C.s=2)}([function(H,S,C){"use strict";var p,g=this&&this.__extends||(p=function(c,a){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var P in v)v.hasOwnProperty(P)&&(l[P]=v[P])})(c,a)},function(c,a){function l(){this.constructor=c}p(c,a),c.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(S,"__esModule",{value:!0});var f=256,R=function(){function p(c){void 0===c&&(c="="),this._paddingCharacter=c}return p.prototype.encodedLength=function(c){return this._paddingCharacter?(c+2)/3*4|0:(8*c+5)/6|0},p.prototype.encode=function(c){for(var a="",l=0;l<c.length-2;l+=3)a+=this._encodeByte((v=c[l]<<16|c[l+1]<<8|c[l+2])>>>18&63),a+=this._encodeByte(v>>>12&63),a+=this._encodeByte(v>>>6&63),a+=this._encodeByte(v>>>0&63);var v,P=c.length-l;return P>0&&(a+=this._encodeByte((v=c[l]<<16|(2===P?c[l+1]<<8:0))>>>18&63),a+=this._encodeByte(v>>>12&63),a+=2===P?this._encodeByte(v>>>6&63):this._paddingCharacter||"",a+=this._paddingCharacter||""),a},p.prototype.maxDecodedLength=function(c){return this._paddingCharacter?c/4*3|0:(6*c+7)/8|0},p.prototype.decodedLength=function(c){return this.maxDecodedLength(c.length-this._getPaddingLength(c))},p.prototype.decode=function(c){if(0===c.length)return new Uint8Array(0);for(var a=this._getPaddingLength(c),l=c.length-a,v=new Uint8Array(this.maxDecodedLength(l)),P=0,O=0,N=0,q=0,M=0,D=0,F=0;O<l-4;O+=4)q=this._decodeChar(c.charCodeAt(O+0)),M=this._decodeChar(c.charCodeAt(O+1)),D=this._decodeChar(c.charCodeAt(O+2)),F=this._decodeChar(c.charCodeAt(O+3)),v[P++]=q<<2|M>>>4,v[P++]=M<<4|D>>>2,v[P++]=D<<6|F,N|=q&f,N|=M&f,N|=D&f,N|=F&f;if(O<l-1&&(q=this._decodeChar(c.charCodeAt(O)),M=this._decodeChar(c.charCodeAt(O+1)),v[P++]=q<<2|M>>>4,N|=q&f,N|=M&f),O<l-2&&(D=this._decodeChar(c.charCodeAt(O+2)),v[P++]=M<<4|D>>>2,N|=D&f),O<l-3&&(F=this._decodeChar(c.charCodeAt(O+3)),v[P++]=D<<6|F,N|=F&f),0!==N)throw new Error("Base64Coder: incorrect characters for decoding");return v},p.prototype._encodeByte=function(c){var a=c;return a+=65,a+=25-c>>>8&6,a+=51-c>>>8&-75,a+=61-c>>>8&-15,a+=62-c>>>8&3,String.fromCharCode(a)},p.prototype._decodeChar=function(c){var a=f;return a+=(42-c&c-44)>>>8&-f+c-43+62,a+=(46-c&c-48)>>>8&-f+c-47+63,a+=(47-c&c-58)>>>8&-f+c-48+52,(a+=(64-c&c-91)>>>8&-f+c-65+0)+((96-c&c-123)>>>8&-f+c-97+26)},p.prototype._getPaddingLength=function(c){var a=0;if(this._paddingCharacter){for(var l=c.length-1;l>=0&&c[l]===this._paddingCharacter;l--)a++;if(c.length<4||a>2)throw new Error("Base64Coder: incorrect padding")}return a},p}();S.Coder=R;var m=new R;S.encode=function(p){return m.encode(p)},S.decode=function(p){return m.decode(p)};var T=function(p){function c(){return null!==p&&p.apply(this,arguments)||this}return g(c,p),c.prototype._encodeByte=function(a){var l=a;return l+=65,l+=25-a>>>8&6,l+=51-a>>>8&-75,l+=61-a>>>8&-13,l+=62-a>>>8&49,String.fromCharCode(l)},c.prototype._decodeChar=function(a){var l=f;return l+=(44-a&a-46)>>>8&-f+a-45+62,l+=(94-a&a-96)>>>8&-f+a-95+63,l+=(47-a&a-58)>>>8&-f+a-48+52,(l+=(64-a&a-91)>>>8&-f+a-65+0)+((96-a&a-123)>>>8&-f+a-97+26)},c}(R);S.URLSafeCoder=T;var y=new T;S.encodeURLSafe=function(p){return y.encode(p)},S.decodeURLSafe=function(p){return y.decode(p)},S.encodedLength=function(p){return m.encodedLength(p)},S.maxDecodedLength=function(p){return m.maxDecodedLength(p)},S.decodedLength=function(p){return m.decodedLength(p)}},function(H,S,C){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var g="utf8: invalid string",f="utf8: invalid source encoding";function m(k){for(var T=0,y=0;y<k.length;y++){var _=k.charCodeAt(y);if(_<128)T+=1;else if(_<2048)T+=2;else if(_<55296)T+=3;else{if(!(_<=57343))throw new Error(g);if(y>=k.length-1)throw new Error(g);y++,T+=4}}return T}S.encode=function(k){for(var T=new Uint8Array(m(k)),y=0,_=0;_<k.length;_++){var x=k.charCodeAt(_);x<128?T[y++]=x:x<2048?(T[y++]=192|x>>6,T[y++]=128|63&x):x<55296?(T[y++]=224|x>>12,T[y++]=128|x>>6&63,T[y++]=128|63&x):(_++,x=(1023&x)<<10,x|=1023&k.charCodeAt(_),T[y++]=240|(x+=65536)>>18,T[y++]=128|x>>12&63,T[y++]=128|x>>6&63,T[y++]=128|63&x)}return T},S.encodedLength=m,S.decode=function(k){for(var T=[],y=0;y<k.length;y++){var _=k[y];if(128&_){var x=void 0;if(_<224){if(y>=k.length)throw new Error(f);if(128!=(192&(p=k[++y])))throw new Error(f);_=(31&_)<<6|63&p,x=128}else if(_<240){if(y>=k.length-1)throw new Error(f);var p=k[++y],c=k[++y];if(128!=(192&p)||128!=(192&c))throw new Error(f);_=(15&_)<<12|(63&p)<<6|63&c,x=2048}else{if(!(_<248))throw new Error(f);if(y>=k.length-2)throw new Error(f);p=k[++y],c=k[++y];var a=k[++y];if(128!=(192&p)||128!=(192&c)||128!=(192&a))throw new Error(f);_=(15&_)<<18|(63&p)<<12|(63&c)<<6|63&a,x=65536}if(_<x||_>=55296&&_<=57343)throw new Error(f);if(_>=65536){if(_>1114111)throw new Error(f);_-=65536,T.push(String.fromCharCode(55296|_>>10)),_=56320|1023&_}}T.push(String.fromCharCode(_))}return T.join("")}},function(H,S,C){H.exports=C(3).default},function(H,S,C){"use strict";C.r(S);var e,g=function(){function e(t,n){this.lastId=0,this.prefix=t,this.name=n}return e.prototype.create=function(t){this.lastId++;var n=this.lastId,r=this.prefix+n,i=this.name+"["+n+"]",o=!1,s=function(){o||(t.apply(null,arguments),o=!0)};return this[n]=s,{number:n,id:r,name:i,callback:s}},e.prototype.remove=function(t){delete this[t.number]},e}(),f=new g("_pusher_script_","Pusher.ScriptReceivers"),m_VERSION="7.0.3",m_PROTOCOL=7,m_wsPort=80,m_wssPort=443,m_wsPath="",m_httpHost="sockjs.pusher.com",m_httpPort=80,m_httpsPort=443,m_httpPath="/pusher",m_stats_host="stats.pusher.com",m_authEndpoint="/pusher/auth",m_authTransport="ajax",m_activityTimeout=12e4,m_pongTimeout=3e4,m_unavailableTimeout=1e4,m_cluster="mt1",m_cdn_http="http://js.pusher.com",m_cdn_https="https://js.pusher.com",m_dependency_suffix="",h=function(){function e(t){this.options=t,this.receivers=t.receivers||f,this.loading={}}return e.prototype.load=function(t,n,r){var i=this;if(i.loading[t]&&i.loading[t].length>0)i.loading[t].push(r);else{i.loading[t]=[r];var o=b.createScriptRequest(i.getPath(t,n)),s=i.receivers.create(function(u){if(i.receivers.remove(s),i.loading[t]){var d=i.loading[t];delete i.loading[t];for(var w=function(j){j||o.cleanup()},E=0;E<d.length;E++)d[E](u,w)}});o.send(s)}},e.prototype.getRoot=function(t){var r=b.getDocument().location.protocol;return(t&&t.useTLS||"https:"===r?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version},e.prototype.getPath=function(t,n){return this.getRoot(n)+"/"+t+this.options.suffix+".js"},e}(),k=h,T=new g("_pusher_dependencies","Pusher.DependenciesReceivers"),y=new k({cdn_http:m_cdn_http,cdn_https:m_cdn_https,version:m_VERSION,suffix:m_dependency_suffix,receivers:T}),_={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/authenticating_users"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}},p_buildLogSuffix=function(e){var r,n=_.urls[e];return n?(n.fullUrl?r=n.fullUrl:n.path&&(r=_.baseUrl+n.path),r?"See: "+r:""):""},c=(e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,n)},function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),a=function(e){function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return c(t,e),t}(Error),l=function(e){function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return c(t,e),t}(Error),v=function(e){function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return c(t,e),t}(Error),P=function(e){function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return c(t,e),t}(Error),O=function(e){function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return c(t,e),t}(Error),N=function(e){function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return c(t,e),t}(Error),q=function(e){function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return c(t,e),t}(Error),M=function(e){function t(n,r){var i=this.constructor,o=e.call(this,r)||this;return o.status=n,Object.setPrototypeOf(o,i.prototype),o}return c(t,e),t}(Error),F=function(e,t,n){var i,r=this;for(var o in(i=b.createXHR()).open("POST",r.options.authEndpoint,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.authOptions.headers)i.setRequestHeader(o,this.authOptions.headers[o]);return i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status){var s=void 0,u=!1;try{s=JSON.parse(i.responseText),u=!0}catch(w){n(new M(200,"JSON returned from auth endpoint was invalid, yet status code was 200. Data was: "+i.responseText),{auth:""})}u&&n(null,s)}else{var d=p_buildLogSuffix("authenticationEndpoint");n(new M(i.status,"Unable to retrieve auth string from auth endpoint - received status: "+i.status+" from "+r.options.authEndpoint+". Clients must be authenticated to join private or presence channels. "+d),{auth:""})}},i.send(this.composeQuery(t)),i};for(var $=String.fromCharCode,V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$t={},et=0,Kt=V.length;et<Kt;et++)$t[V.charAt(et)]=et;var Zt=function(e){var t=e.charCodeAt(0);return t<128?e:t<2048?$(192|t>>>6)+$(128|63&t):$(224|t>>>12&15)+$(128|t>>>6&63)+$(128|63&t)},te=function(e){return e.replace(/[^\x00-\x7F]/g,Zt)},ee=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[V.charAt(n>>>18),V.charAt(n>>>12&63),t>=2?"=":V.charAt(n>>>6&63),t>=1?"=":V.charAt(63&n)].join("")},ne=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,ee)},re=function(){function e(t,n,r,i){var o=this;this.clear=n,this.timer=t(function(){o.timer&&(o.timer=i(o.timer))},r)}return e.prototype.isRunning=function(){return null!==this.timer},e.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},e}(),_t=re,bt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function ie(e){window.clearTimeout(e)}function oe(e){window.clearInterval(e)}var X=function(e){function t(n,r){return e.call(this,setTimeout,ie,n,function(i){return r(),null})||this}return bt(t,e),t}(_t),se=function(e){function t(n,r){return e.call(this,setInterval,oe,n,function(i){return r(),i})||this}return bt(t,e),t}(_t),ae={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(e){return new X(0,e)},method:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(i){return i[e].apply(i,r.concat(arguments))}}},A=ae;function I(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var i=t[r];for(var o in i)e[o]=i[o]&&i[o].constructor&&i[o].constructor===Object?I(e[o]||{},i[o]):i[o]}return e}function ce(){for(var e=["Pusher"],t=0;t<arguments.length;t++)e.push("string"==typeof arguments[t]?arguments[t]:nt(arguments[t]));return e.join(" : ")}function St(e,t){var n=Array.prototype.indexOf;if(null===e)return-1;if(n&&e.indexOf===n)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}function z(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)}function wt(e){var t=[];return z(e,function(n,r){t.push(r)}),t}function K(e,t,n){for(var r=0;r<e.length;r++)t.call(n||window,e[r],r,e)}function Ct(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r,e,n));return n}function Tt(e,t){t=t||function(i){return!!i};for(var n=[],r=0;r<e.length;r++)t(e[r],r,e,n)&&n.push(e[r]);return n}function xt(e,t){var n={};return z(e,function(r,i){(t&&t(r,i,e,n)||Boolean(r))&&(n[i]=r)}),n}function kt(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1}function pe(e){return function(e,t){var n={};return z(e,function(r,i){n[i]=t(r)}),n}(e,function(t){return"object"==typeof t&&(t=nt(t)),encodeURIComponent(function(e){return ne(te(e))}(t.toString()))})}function de(e){return Ct(function(e){var t=[];return z(e,function(n,r){t.push([r,n])}),t}(pe(xt(e,function(r){return void 0!==r}))),A.method("join","=")).join("&")}function nt(e){try{return JSON.stringify(e)}catch(t){return JSON.stringify(function(e){var t=[],n=[];return function r(i,o){var s,u,d;switch(typeof i){case"object":if(!i)return null;for(s=0;s<t.length;s+=1)if(t[s]===i)return{$ref:n[s]};if(t.push(i),n.push(o),"[object Array]"===Object.prototype.toString.apply(i))for(d=[],s=0;s<i.length;s+=1)d[s]=r(i[s],o+"["+s+"]");else for(u in d={},i)Object.prototype.hasOwnProperty.call(i,u)&&(d[u]=r(i[u],o+"["+JSON.stringify(u)+"]"));return d;case"number":case"string":case"boolean":return i}}(e,"$")}(e))}}var ge=function(){function e(){this.globalLog=function(t){window.console&&window.console.log&&window.console.log(t)}}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.log(this.globalLog,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.log(this.globalLogWarn,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.log(this.globalLogError,t)},e.prototype.globalLogWarn=function(t){window.console&&window.console.warn?window.console.warn(t):this.globalLog(t)},e.prototype.globalLogError=function(t){window.console&&window.console.error?window.console.error(t):this.globalLogWarn(t)},e.prototype.log=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=ce.apply(this,arguments);vt.log?vt.log(i):vt.logToConsole&&t.bind(this)(i)},e}(),L=new ge,me=function(e,t,n){void 0!==this.authOptions.headers&&L.warn("To send headers with the auth request, you must use AJAX, rather than JSONP.");var r=e.nextAuthCallbackID.toString();e.nextAuthCallbackID++;var i=e.getDocument(),o=i.createElement("script");e.auth_callbacks[r]=function(d){n(null,d)},o.src=this.options.authEndpoint+"?callback="+encodeURIComponent("Pusher.auth_callbacks['"+r+"']")+"&"+this.composeQuery(t);var u=i.getElementsByTagName("head")[0]||i.documentElement;u.insertBefore(o,u.firstChild)},_e=function(){function e(t){this.src=t}return e.prototype.send=function(t){var n=this,r="Error loading "+n.src;n.script=document.createElement("script"),n.script.id=t.id,n.script.src=n.src,n.script.type="text/javascript",n.script.charset="UTF-8",n.script.addEventListener?(n.script.onerror=function(){t.callback(r)},n.script.onload=function(){t.callback(null)}):n.script.onreadystatechange=function(){("loaded"===n.script.readyState||"complete"===n.script.readyState)&&t.callback(null)},void 0===n.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(n.errorScript=document.createElement("script"),n.errorScript.id=t.id+"_error",n.errorScript.text=t.name+"('"+r+"');",n.script.async=n.errorScript.async=!1):n.script.async=!0;var i=document.getElementsByTagName("head")[0];i.insertBefore(n.script,i.firstChild),n.errorScript&&i.insertBefore(n.errorScript,n.script.nextSibling)},e.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},e}(),be=_e,Se=function(){function e(t,n){this.url=t,this.data=n}return e.prototype.send=function(t){if(!this.request){var n=de(this.data);this.request=b.createScriptRequest(this.url+"/"+t.number+"?"+n),this.request.send(t)}},e.prototype.cleanup=function(){this.request&&this.request.cleanup()},e}(),we=Se,xe={name:"jsonp",getAgent:function(e,t){return function(n,r){var s=b.createJSONPRequest("http"+(t?"s":"")+"://"+(e.host||e.options.host)+e.options.path,n),u=b.ScriptReceivers.create(function(d,w){f.remove(u),s.cleanup(),w&&w.host&&(e.host=w.host),r&&r(d,w)});s.send(u)}}};function ct(e,t,n){return e+(t.useTLS?"s":"")+"://"+(t.useTLS?t.hostTLS:t.hostNonTLS)+n}function ut(e,t){return"/app/"+e+"?protocol="+m_PROTOCOL+"&client=js&version="+m_VERSION+(t?"&"+t:"")}var ke={getInitial:function(e,t){return ct("ws",t,(t.httpPath||"")+ut(e,"flash=false"))}},Pe={getInitial:function(e,t){return ct("http",t,(t.httpPath||"/pusher")+ut(e))}},Oe={getInitial:function(e,t){return ct("http",t,t.httpPath||"/pusher")},getPath:function(e,t){return ut(e)}},Le=function(){function e(){this._callbacks={}}return e.prototype.get=function(t){return this._callbacks[ht(t)]},e.prototype.add=function(t,n,r){var i=ht(t);this._callbacks[i]=this._callbacks[i]||[],this._callbacks[i].push({fn:n,context:r})},e.prototype.remove=function(t,n,r){if(t||n||r){var i=t?[ht(t)]:wt(this._callbacks);n||r?this.removeCallback(i,n,r):this.removeAllCallbacks(i)}else this._callbacks={}},e.prototype.removeCallback=function(t,n,r){K(t,function(i){this._callbacks[i]=Tt(this._callbacks[i]||[],function(o){return n&&n!==o.fn||r&&r!==o.context}),0===this._callbacks[i].length&&delete this._callbacks[i]},this)},e.prototype.removeAllCallbacks=function(t){K(t,function(n){delete this._callbacks[n]},this)},e}(),Ee=Le;function ht(e){return"_"+e}var Re=function(){function e(t){this.callbacks=new Ee,this.global_callbacks=[],this.failThrough=t}return e.prototype.bind=function(t,n,r){return this.callbacks.add(t,n,r),this},e.prototype.bind_global=function(t){return this.global_callbacks.push(t),this},e.prototype.unbind=function(t,n,r){return this.callbacks.remove(t,n,r),this},e.prototype.unbind_global=function(t){return t?(this.global_callbacks=Tt(this.global_callbacks||[],function(n){return n!==t}),this):(this.global_callbacks=[],this)},e.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},e.prototype.emit=function(t,n,r){for(var i=0;i<this.global_callbacks.length;i++)this.global_callbacks[i](t,n);var o=this.callbacks.get(t),s=[];if(r?s.push(n,r):n&&s.push(n),o&&o.length>0)for(i=0;i<o.length;i++)o[i].fn.apply(o[i].context||window,s);else this.failThrough&&this.failThrough(t,n);return this},e}(),J=Re,Ae=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),je=function(e){function t(n,r,i,o,s){var u=e.call(this)||this;return u.initialize=b.transportConnectionInitializer,u.hooks=n,u.name=r,u.priority=i,u.key=o,u.options=s,u.state="new",u.timeline=s.timeline,u.activityTimeout=s.activityTimeout,u.id=u.timeline.generateUniqueID(),u}return Ae(t,e),t.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},t.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},t.prototype.connect=function(){var n=this;if(this.socket||"initialized"!==this.state)return!1;var r=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(r,this.options)}catch(i){return A.defer(function(){n.onError(i),n.changeState("closed")}),!1}return this.bindListeners(),L.debug("Connecting",{transport:this.name,url:r}),this.changeState("connecting"),!0},t.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},t.prototype.send=function(n){var r=this;return"open"===this.state&&(A.defer(function(){r.socket&&r.socket.send(n)}),!0)},t.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},t.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},t.prototype.onError=function(n){this.emit("error",{type:"WebSocketError",error:n}),this.timeline.error(this.buildTimelineMessage({error:n.toString()}))},t.prototype.onClose=function(n){n?this.changeState("closed",{code:n.code,reason:n.reason,wasClean:n.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},t.prototype.onMessage=function(n){this.emit("message",n)},t.prototype.onActivity=function(){this.emit("activity")},t.prototype.bindListeners=function(){var n=this;this.socket.onopen=function(){n.onOpen()},this.socket.onerror=function(r){n.onError(r)},this.socket.onclose=function(r){n.onClose(r)},this.socket.onmessage=function(r){n.onMessage(r)},this.supportsPing()&&(this.socket.onactivity=function(){n.onActivity()})},t.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},t.prototype.changeState=function(n,r){this.state=n,this.timeline.info(this.buildTimelineMessage({state:n,params:r})),this.emit(n,r)},t.prototype.buildTimelineMessage=function(n){return I({cid:this.id},n)},t}(J),Ie=je,Ne=function(){function e(t){this.hooks=t}return e.prototype.isSupported=function(t){return this.hooks.isSupported(t)},e.prototype.createConnection=function(t,n,r,i){return new Ie(this.hooks,t,n,r,i)},e}(),Y=Ne,Me=new Y({urls:ke,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(b.getWebSocketAPI())},isSupported:function(){return Boolean(b.getWebSocketAPI())},getSocket:function(e){return b.createWebSocket(e)}}),Pt={urls:Pe,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},Ot=I({getSocket:function(e){return b.HTTPFactory.createStreamingSocket(e)}},Pt),Lt=I({getSocket:function(e){return b.HTTPFactory.createPollingSocket(e)}},Pt),Et={isSupported:function(){return b.isXHRSupported()}},rt={ws:Me,xhr_streaming:new Y(I({},Ot,Et)),xhr_polling:new Y(I({},Lt,Et))},Ue=new Y({file:"sockjs",urls:Oe,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(e,t){return new window.SockJS(e,null,{js_path:y.getPath("sockjs",{useTLS:t.useTLS}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(e,t){e.send(JSON.stringify({path:t}))}}),Rt={isSupported:function(e){return b.isXDRSupported(e.useTLS)}},qe=new Y(I({},Ot,Rt)),ze=new Y(I({},Lt,Rt));rt.xdr_streaming=qe,rt.xdr_polling=ze,rt.sockjs=Ue;var Fe=rt,Xe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Je=function(e){function t(){var n=e.call(this)||this,r=n;return void 0!==window.addEventListener&&(window.addEventListener("online",function(){r.emit("online")},!1),window.addEventListener("offline",function(){r.emit("offline")},!1)),n}return Xe(t,e),t.prototype.isOnline=function(){return void 0===window.navigator.onLine||window.navigator.onLine},t}(J),We=new Je,Ge=function(){function e(t,n,r){this.manager=t,this.transport=n,this.minPingDelay=r.minPingDelay,this.maxPingDelay=r.maxPingDelay,this.pingDelay=void 0}return e.prototype.createConnection=function(t,n,r,i){var o=this;i=I({},i,{activityTimeout:this.pingDelay});var s=this.transport.createConnection(t,n,r,i),u=null,d=function(){s.unbind("open",d),s.bind("closed",w),u=A.now()},w=function(E){if(s.unbind("closed",w),1002===E.code||1003===E.code)o.manager.reportDeath();else if(!E.wasClean&&u){var j=A.now()-u;j<2*o.maxPingDelay&&(o.manager.reportDeath(),o.pingDelay=Math.max(j/2,o.minPingDelay))}};return s.bind("open",d),s},e.prototype.isSupported=function(t){return this.manager.isAlive()&&this.transport.isSupported(t)},e}(),Qe=Ge,At={decodeMessage:function(e){try{var t=JSON.parse(e.data),n=t.data;if("string"==typeof n)try{n=JSON.parse(t.data)}catch(i){}var r={event:t.event,channel:t.channel,data:n};return t.user_id&&(r.user_id=t.user_id),r}catch(i){throw{type:"MessageParseError",error:i,data:e.data}}},encodeMessage:function(e){return JSON.stringify(e)},processHandshake:function(e){var t=At.decodeMessage(e);if("pusher:connection_established"===t.event){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:1e3*t.data.activity_timeout}}if("pusher:error"===t.event)return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"},getCloseAction:function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?"backoff":null:4e3===e.code?"tls_only":e.code<4100?"refused":e.code<4200?"backoff":e.code<4300?"retry":"refused"},getCloseError:function(e){return 1e3!==e.code&&1001!==e.code?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null}},W=At,Ve=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ye=function(e){function t(n,r){var i=e.call(this)||this;return i.id=n,i.transport=r,i.activityTimeout=r.activityTimeout,i.bindListeners(),i}return Ve(t,e),t.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},t.prototype.send=function(n){return this.transport.send(n)},t.prototype.send_event=function(n,r,i){var o={event:n,data:r};return i&&(o.channel=i),L.debug("Event sent",o),this.send(W.encodeMessage(o))},t.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},t.prototype.close=function(){this.transport.close()},t.prototype.bindListeners=function(){var n=this,r={message:function(o){var s;try{s=W.decodeMessage(o)}catch(u){n.emit("error",{type:"MessageParseError",error:u,data:o.data})}if(void 0!==s){switch(L.debug("Event recd",s),s.event){case"pusher:error":n.emit("error",{type:"PusherError",data:s.data});break;case"pusher:ping":n.emit("ping");break;case"pusher:pong":n.emit("pong")}n.emit("message",s)}},activity:function(){n.emit("activity")},error:function(o){n.emit("error",o)},closed:function(o){i(),o&&o.code&&n.handleCloseEvent(o),n.transport=null,n.emit("closed")}},i=function(){z(r,function(o,s){n.transport.unbind(s,o)})};z(r,function(o,s){n.transport.bind(s,o)})},t.prototype.handleCloseEvent=function(n){var r=W.getCloseAction(n),i=W.getCloseError(n);i&&this.emit("error",i),r&&this.emit(r,{action:r,error:i})},t}(J),$e=Ye,Ke=function(){function e(t,n){this.transport=t,this.callback=n,this.bindListeners()}return e.prototype.close=function(){this.unbindListeners(),this.transport.close()},e.prototype.bindListeners=function(){var t=this;this.onMessage=function(n){var r;t.unbindListeners();try{r=W.processHandshake(n)}catch(i){return t.finish("error",{error:i}),void t.transport.close()}"connected"===r.action?t.finish("connected",{connection:new $e(r.id,t.transport),activityTimeout:r.activityTimeout}):(t.finish(r.action,{error:r.error}),t.transport.close())},this.onClosed=function(n){t.unbindListeners();var r=W.getCloseAction(n)||"backoff",i=W.getCloseError(n);t.finish(r,{error:i})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},e.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},e.prototype.finish=function(t,n){this.callback(I({transport:this.transport,action:t},n))},e}(),Ze=Ke,tn=function(){function e(t,n){this.channel=t;var r=n.authTransport;if(void 0===b.getAuthorizers()[r])throw"'"+r+"' is not a recognized auth transport";this.type=r,this.options=n,this.authOptions=n.auth||{}}return e.prototype.composeQuery=function(t){var n="socket_id="+encodeURIComponent(t)+"&channel_name="+encodeURIComponent(this.channel.name);for(var r in this.authOptions.params)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(this.authOptions.params[r]);return n},e.prototype.authorize=function(t,n){(e.authorizers=e.authorizers||b.getAuthorizers())[this.type].call(this,b,t,n)},e}(),en=tn,nn=function(){function e(t,n){this.timeline=t,this.options=n||{}}return e.prototype.send=function(t,n){this.timeline.isEmpty()||this.timeline.send(b.TimelineTransport.getAgent(this,t),n)},e}(),rn=nn,on=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sn=function(e){function t(n,r){var i=e.call(this,function(o,s){L.debug("No callbacks on "+n+" for "+o)})||this;return i.name=n,i.pusher=r,i.subscribed=!1,i.subscriptionPending=!1,i.subscriptionCancelled=!1,i}return on(t,e),t.prototype.authorize=function(n,r){return r(null,{auth:""})},t.prototype.trigger=function(n,r){if(0!==n.indexOf("client-"))throw new a("Event '"+n+"' does not start with 'client-'");if(!this.subscribed){var i=p_buildLogSuffix("triggeringClientEvents");L.warn("Client event triggered before channel 'subscription_succeeded' event . "+i)}return this.pusher.send_event(n,r,this.name)},t.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},t.prototype.handleEvent=function(n){var r=n.event,i=n.data;"pusher_internal:subscription_succeeded"===r?this.handleSubscriptionSucceededEvent(n):0!==r.indexOf("pusher_internal:")&&this.emit(r,i,{})},t.prototype.handleSubscriptionSucceededEvent=function(n){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",n.data)},t.prototype.subscribe=function(){var n=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(r,i){r?(n.subscriptionPending=!1,L.error(r.toString()),n.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:r.message},r instanceof M?{status:r.status}:{}))):n.pusher.send_event("pusher:subscribe",{auth:i.auth,channel_data:i.channel_data,channel:n.name})}))},t.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},t.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},t.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},t}(J),jt=sn,an=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return an(t,e),t.prototype.authorize=function(n,r){return B.createAuthorizer(this,this.pusher.config).authorize(n,r)},t}(jt),ft=cn,un=function(){function e(){this.reset()}return e.prototype.get=function(t){return Object.prototype.hasOwnProperty.call(this.members,t)?{id:t,info:this.members[t]}:null},e.prototype.each=function(t){var n=this;z(this.members,function(r,i){t(n.get(i))})},e.prototype.setMyID=function(t){this.myID=t},e.prototype.onSubscription=function(t){this.members=t.presence.hash,this.count=t.presence.count,this.me=this.get(this.myID)},e.prototype.addMember=function(t){return null===this.get(t.user_id)&&this.count++,this.members[t.user_id]=t.user_info,this.get(t.user_id)},e.prototype.removeMember=function(t){var n=this.get(t.user_id);return n&&(delete this.members[t.user_id],this.count--),n},e.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},e}(),hn=un,fn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ln=function(e){function t(n,r){var i=e.call(this,n,r)||this;return i.members=new hn,i}return fn(t,e),t.prototype.authorize=function(n,r){var i=this;e.prototype.authorize.call(this,n,function(o,s){if(!o){if(void 0===(s=s).channel_data){var u=p_buildLogSuffix("authenticationEndpoint");return L.error("Invalid auth response for channel '"+i.name+"',expected 'channel_data' field. "+u),void r("Invalid auth response")}var d=JSON.parse(s.channel_data);i.members.setMyID(d.user_id)}r(o,s)})},t.prototype.handleEvent=function(n){var r=n.event;if(0===r.indexOf("pusher_internal:"))this.handleInternalEvent(n);else{var i=n.data,o={};n.user_id&&(o.user_id=n.user_id),this.emit(r,i,o)}},t.prototype.handleInternalEvent=function(n){var i=n.data;switch(n.event){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(n);break;case"pusher_internal:member_added":var o=this.members.addMember(i);this.emit("pusher:member_added",o);break;case"pusher_internal:member_removed":var s=this.members.removeMember(i);s&&this.emit("pusher:member_removed",s)}},t.prototype.handleSubscriptionSucceededEvent=function(n){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(n.data),this.emit("pusher:subscription_succeeded",this.members))},t.prototype.disconnect=function(){this.members.reset(),e.prototype.disconnect.call(this)},t}(ft),pn=ln,dn=C(1),lt=C(0),vn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gn=function(e){function t(n,r,i){var o=e.call(this,n,r)||this;return o.key=null,o.nacl=i,o}return vn(t,e),t.prototype.authorize=function(n,r){var i=this;e.prototype.authorize.call(this,n,function(o,s){if(o)r(o,s);else{var u=s.shared_secret;u?(i.key=Object(lt.decode)(u),delete s.shared_secret,r(null,s)):r(new Error("No shared_secret key in auth payload for encrypted channel: "+i.name),null)}})},t.prototype.trigger=function(n,r){throw new O("Client events are not currently supported for encrypted channels")},t.prototype.handleEvent=function(n){var r=n.event,i=n.data;0!==r.indexOf("pusher_internal:")&&0!==r.indexOf("pusher:")?this.handleEncryptedEvent(r,i):e.prototype.handleEvent.call(this,n)},t.prototype.handleEncryptedEvent=function(n,r){var i=this;if(this.key)if(r.ciphertext&&r.nonce){var o=Object(lt.decode)(r.ciphertext);if(o.length<this.nacl.secretbox.overheadLength)L.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+o.length);else{var s=Object(lt.decode)(r.nonce);if(s.length<this.nacl.secretbox.nonceLength)L.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+s.length);else{var u=this.nacl.secretbox.open(o,s,this.key);if(null===u)return L.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),void this.authorize(this.pusher.connection.socket_id,function(d,w){d?L.error("Failed to make a request to the authEndpoint: "+w+". Unable to fetch new key, so dropping encrypted event"):null!==(u=i.nacl.secretbox.open(o,s,i.key))?i.emit(n,i.getDataToEmit(u)):L.error("Failed to decrypt event with new key. Dropping encrypted event")});this.emit(n,this.getDataToEmit(u))}}}else L.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+r);else L.debug("Received encrypted event before key has been retrieved from the authEndpoint")},t.prototype.getDataToEmit=function(n){var r=Object(dn.decode)(n);try{return JSON.parse(r)}catch(i){return r}},t}(ft),yn=gn,mn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_n=function(e){function t(n,r){var i=e.call(this)||this;i.state="initialized",i.connection=null,i.key=n,i.options=r,i.timeline=i.options.timeline,i.usingTLS=i.options.useTLS,i.errorCallbacks=i.buildErrorCallbacks(),i.connectionCallbacks=i.buildConnectionCallbacks(i.errorCallbacks),i.handshakeCallbacks=i.buildHandshakeCallbacks(i.errorCallbacks);var o=b.getNetwork();return o.bind("online",function(){i.timeline.info({netinfo:"online"}),("connecting"===i.state||"unavailable"===i.state)&&i.retryIn(0)}),o.bind("offline",function(){i.timeline.info({netinfo:"offline"}),i.connection&&i.sendActivityCheck()}),i.updateStrategy(),i}return mn(t,e),t.prototype.connect=function(){if(!this.connection&&!this.runner){if(!this.strategy.isSupported())return void this.updateState("failed");this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},t.prototype.send=function(n){return!!this.connection&&this.connection.send(n)},t.prototype.send_event=function(n,r,i){return!!this.connection&&this.connection.send_event(n,r,i)},t.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},t.prototype.isUsingTLS=function(){return this.usingTLS},t.prototype.startConnecting=function(){var n=this,r=function(i,o){i?n.runner=n.strategy.connect(0,r):"error"===o.action?(n.emit("error",{type:"HandshakeError",error:o.error}),n.timeline.error({handshakeError:o.error})):(n.abortConnecting(),n.handshakeCallbacks[o.action](o))};this.runner=this.strategy.connect(0,r)},t.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},t.prototype.disconnectInternally=function(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()},t.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},t.prototype.retryIn=function(n){var r=this;this.timeline.info({action:"retry",delay:n}),n>0&&this.emit("connecting_in",Math.round(n/1e3)),this.retryTimer=new X(n||0,function(){r.disconnectInternally(),r.connect()})},t.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},t.prototype.setUnavailableTimer=function(){var n=this;this.unavailableTimer=new X(this.options.unavailableTimeout,function(){n.updateState("unavailable")})},t.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},t.prototype.sendActivityCheck=function(){var n=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new X(this.options.pongTimeout,function(){n.timeline.error({pong_timed_out:n.options.pongTimeout}),n.retryIn(0)})},t.prototype.resetActivityCheck=function(){var n=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new X(this.activityTimeout,function(){n.sendActivityCheck()}))},t.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},t.prototype.buildConnectionCallbacks=function(n){var r=this;return I({},n,{message:function(i){r.resetActivityCheck(),r.emit("message",i)},ping:function(){r.send_event("pusher:pong",{})},activity:function(){r.resetActivityCheck()},error:function(i){r.emit("error",i)},closed:function(){r.abandonConnection(),r.shouldRetry()&&r.retryIn(1e3)}})},t.prototype.buildHandshakeCallbacks=function(n){var r=this;return I({},n,{connected:function(i){r.activityTimeout=Math.min(r.options.activityTimeout,i.activityTimeout,i.connection.activityTimeout||1/0),r.clearUnavailableTimer(),r.setConnection(i.connection),r.socket_id=r.connection.id,r.updateState("connected",{socket_id:r.socket_id})}})},t.prototype.buildErrorCallbacks=function(){var n=this,r=function(i){return function(o){o.error&&n.emit("error",{type:"WebSocketError",error:o.error}),i(o)}};return{tls_only:r(function(){n.usingTLS=!0,n.updateStrategy(),n.retryIn(0)}),refused:r(function(){n.disconnect()}),backoff:r(function(){n.retryIn(1e3)}),retry:r(function(){n.retryIn(0)})}},t.prototype.setConnection=function(n){for(var r in this.connection=n,this.connectionCallbacks)this.connection.bind(r,this.connectionCallbacks[r]);this.resetActivityCheck()},t.prototype.abandonConnection=function(){if(this.connection){for(var n in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(n,this.connectionCallbacks[n]);var r=this.connection;return this.connection=null,r}},t.prototype.updateState=function(n,r){var i=this.state;if(this.state=n,i!==n){var o=n;"connected"===o&&(o+=" with new socket ID "+r.socket_id),L.debug("State changed",i+" -> "+o),this.timeline.info({state:n,params:r}),this.emit("state_change",{previous:i,current:n}),this.emit(n,r)}},t.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},t}(J),bn=_n,Sn=function(){function e(){this.channels={}}return e.prototype.add=function(t,n){return this.channels[t]||(this.channels[t]=function(e,t){if(0===e.indexOf("private-encrypted-")){if(t.config.nacl)return B.createEncryptedChannel(e,t,t.config.nacl);var n="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",r=p_buildLogSuffix("encryptedChannelSupport");throw new O(n+". "+r)}return 0===e.indexOf("private-")?B.createPrivateChannel(e,t):0===e.indexOf("presence-")?B.createPresenceChannel(e,t):B.createChannel(e,t)}(t,n)),this.channels[t]},e.prototype.all=function(){return function(e){var t=[];return z(e,function(n){t.push(n)}),t}(this.channels)},e.prototype.find=function(t){return this.channels[t]},e.prototype.remove=function(t){var n=this.channels[t];return delete this.channels[t],n},e.prototype.disconnect=function(){z(this.channels,function(t){t.disconnect()})},e}(),wn=Sn;var Tn={createChannels:function(){return new wn},createConnectionManager:function(e,t){return new bn(e,t)},createChannel:function(e,t){return new jt(e,t)},createPrivateChannel:function(e,t){return new ft(e,t)},createPresenceChannel:function(e,t){return new pn(e,t)},createEncryptedChannel:function(e,t,n){return new yn(e,t,n)},createTimelineSender:function(e,t){return new rn(e,t)},createAuthorizer:function(e,t){return t.authorizer?t.authorizer(e,t):new en(e,t)},createHandshake:function(e,t){return new Ze(e,t)},createAssistantToTheTransportManager:function(e,t,n){return new Qe(e,t,n)}},B=Tn,xn=function(){function e(t){this.options=t||{},this.livesLeft=this.options.lives||1/0}return e.prototype.getAssistant=function(t){return B.createAssistantToTheTransportManager(this,t,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},e.prototype.isAlive=function(){return this.livesLeft>0},e.prototype.reportDeath=function(){this.livesLeft-=1},e}(),It=xn,kn=function(){function e(t,n){this.strategies=t,this.loop=Boolean(n.loop),this.failFast=Boolean(n.failFast),this.timeout=n.timeout,this.timeoutLimit=n.timeoutLimit}return e.prototype.isSupported=function(){return kt(this.strategies,A.method("isSupported"))},e.prototype.connect=function(t,n){var r=this,i=this.strategies,o=0,s=this.timeout,u=null,d=function(w,E){E?n(null,E):(o+=1,r.loop&&(o%=i.length),o<i.length?(s&&(s*=2,r.timeoutLimit&&(s=Math.min(s,r.timeoutLimit))),u=r.tryStrategy(i[o],t,{timeout:s,failFast:r.failFast},d)):n(!0))};return u=this.tryStrategy(i[o],t,{timeout:s,failFast:this.failFast},d),{abort:function(){u.abort()},forceMinPriority:function(w){t=w,u&&u.forceMinPriority(w)}}},e.prototype.tryStrategy=function(t,n,r,i){var o=null,s=null;return r.timeout>0&&(o=new X(r.timeout,function(){s.abort(),i(!0)})),s=t.connect(n,function(u,d){u&&o&&o.isRunning()&&!r.failFast||(o&&o.ensureAborted(),i(u,d))}),{abort:function(){o&&o.ensureAborted(),s.abort()},forceMinPriority:function(u){s.forceMinPriority(u)}}},e}(),G=kn,Pn=function(){function e(t){this.strategies=t}return e.prototype.isSupported=function(){return kt(this.strategies,A.method("isSupported"))},e.prototype.connect=function(t,n){return function(e,t,n){var r=Ct(e,function(i,o,s,u){return i.connect(t,n(o,u))});return{abort:function(){K(r,En)},forceMinPriority:function(i){K(r,function(o){o.forceMinPriority(i)})}}}(this.strategies,t,function(r,i){return function(o,s){i[r].error=o,o?function(e){return function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0}(e,function(t){return Boolean(t.error)})}(i)&&n(!0):(K(i,function(u){u.forceMinPriority(s.transport.priority)}),n(null,s))}})},e}(),pt=Pn;function En(e){!e.error&&!e.aborted&&(e.abort(),e.aborted=!0)}var Rn=function(){function e(t,n,r){this.strategy=t,this.transports=n,this.ttl=r.ttl||18e5,this.usingTLS=r.useTLS,this.timeline=r.timeline}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(t,n){var r=this.usingTLS,i=function(e){var t=b.getLocalStorage();if(t)try{var n=t[dt(e)];if(n)return JSON.parse(n)}catch(r){Nt(e)}return null}(r),o=[this.strategy];if(i&&i.timestamp+this.ttl>=A.now()){var s=this.transports[i.transport];s&&(this.timeline.info({cached:!0,transport:i.transport,latency:i.latency}),o.push(new G([s],{timeout:2*i.latency+1e3,failFast:!0})))}var u=A.now(),d=o.pop().connect(t,function w(E,j){E?(Nt(r),o.length>0?(u=A.now(),d=o.pop().connect(t,w)):n(E)):(function(e,t,n){var r=b.getLocalStorage();if(r)try{r[dt(e)]=nt({timestamp:A.now(),transport:t,latency:n})}catch(i){}}(r,j.transport.name,A.now()-u),n(null,j))});return{abort:function(){d.abort()},forceMinPriority:function(w){t=w,d&&d.forceMinPriority(w)}}},e}(),An=Rn;function dt(e){return"pusherTransport"+(e?"TLS":"NonTLS")}function Nt(e){var t=b.getLocalStorage();if(t)try{delete t[dt(e)]}catch(n){}}var Nn=function(){function e(t,n){var r=n.delay;this.strategy=t,this.options={delay:r}}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(t,n){var i,r=this.strategy,o=new X(this.options.delay,function(){i=r.connect(t,n)});return{abort:function(){o.ensureAborted(),i&&i.abort()},forceMinPriority:function(s){t=s,i&&i.forceMinPriority(s)}}},e}(),it=Nn,Mn=function(){function e(t,n,r){this.test=t,this.trueBranch=n,this.falseBranch=r}return e.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},e.prototype.connect=function(t,n){return(this.test()?this.trueBranch:this.falseBranch).connect(t,n)},e}(),Z=Mn,Hn=function(){function e(t){this.strategy=t}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(t,n){var r=this.strategy.connect(t,function(i,o){o&&r.abort(),n(i,o)});return r},e}(),Dn=Hn;function tt(e){return function(){return e.isSupported()}}var Un=function(e,t,n){var r={};function i(Qt,Or,Lr,Er,Rr){var Vt=n(e,Qt,Or,Lr,Er,Rr);return r[Qt]=Vt,Vt}var yt,o=Object.assign({},t,{hostNonTLS:e.wsHost+":"+e.wsPort,hostTLS:e.wsHost+":"+e.wssPort,httpPath:e.wsPath}),s=Object.assign({},o,{useTLS:!0}),u=Object.assign({},t,{hostNonTLS:e.httpHost+":"+e.httpPort,hostTLS:e.httpHost+":"+e.httpsPort,httpPath:e.httpPath}),d={loop:!0,timeout:15e3,timeoutLimit:6e4},w=new It({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),E=new It({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),j=i("ws","ws",3,o,w),U=i("wss","ws",3,s,w),Cr=i("sockjs","sockjs",1,u),zt=i("xhr_streaming","xhr_streaming",1,u,E),Tr=i("xdr_streaming","xdr_streaming",1,u,E),Ft=i("xhr_polling","xhr_polling",1,u),xr=i("xdr_polling","xdr_polling",1,u),Xt=new G([j],d),kr=new G([U],d),Pr=new G([Cr],d),Jt=new G([new Z(tt(zt),zt,Tr)],d),Wt=new G([new Z(tt(Ft),Ft,xr)],d),Gt=new G([new Z(tt(Jt),new pt([Jt,new it(Wt,{delay:4e3})]),Wt)],d),gt=new Z(tt(Gt),Gt,Pr);return yt=new pt(t.useTLS?[Xt,new it(gt,{delay:2e3})]:[Xt,new it(kr,{delay:2e3}),new it(gt,{delay:5e3})]),new An(new Dn(new Z(tt(j),yt,gt)),r,{ttl:18e5,timeline:t.timeline,useTLS:t.useTLS})},zn={getRequest:function(e){var t=new window.XDomainRequest;return t.ontimeout=function(){e.emit("error",new l),e.close()},t.onerror=function(n){e.emit("error",n),e.close()},t.onprogress=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText)},t.onload=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText),e.emit("finished",200),e.close()},t},abortRequest:function(e){e.ontimeout=e.onerror=e.onprogress=e.onload=null,e.abort()}},Fn=zn,Xn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wn=function(e){function t(n,r,i){var o=e.call(this)||this;return o.hooks=n,o.method=r,o.url=i,o}return Xn(t,e),t.prototype.start=function(n){var r=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){r.close()},b.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(n)},t.prototype.close=function(){this.unloader&&(b.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},t.prototype.onChunk=function(n,r){for(;;){var i=this.advanceBuffer(r);if(!i)break;this.emit("chunk",{status:n,data:i})}this.isBufferTooLong(r)&&this.emit("buffer_too_long")},t.prototype.advanceBuffer=function(n){var r=n.slice(this.position),i=r.indexOf("\n");return-1!==i?(this.position+=i+1,r.slice(0,i)):null},t.prototype.isBufferTooLong=function(n){return this.position===n.length&&n.length>262144},t}(J),Gn=Wn,ot=(()=>(function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSED=3]="CLOSED"}(ot||(ot={})),ot))(),Q=ot,Qn=1,Vn=function(){function e(t,n){this.hooks=t,this.session=Ht(1e3)+"/"+function(e){for(var t=[],n=0;n<e;n++)t.push(Ht(32).toString(32));return t.join("")}(8),this.location=function(e){var t=/([^\?]*)\/*(\??.*)/.exec(e);return{base:t[1],queryString:t[2]}}(n),this.readyState=Q.CONNECTING,this.openStream()}return e.prototype.send=function(t){return this.sendRaw(JSON.stringify([t]))},e.prototype.ping=function(){this.hooks.sendHeartbeat(this)},e.prototype.close=function(t,n){this.onClose(t,n,!0)},e.prototype.sendRaw=function(t){if(this.readyState!==Q.OPEN)return!1;try{return b.createSocketRequest("POST",Mt(function(e,t){return e.base+"/"+t+"/xhr_send"}(this.location,this.session))).start(t),!0}catch(n){return!1}},e.prototype.reconnect=function(){this.closeStream(),this.openStream()},e.prototype.onClose=function(t,n,r){this.closeStream(),this.readyState=Q.CLOSED,this.onclose&&this.onclose({code:t,reason:n,wasClean:r})},e.prototype.onChunk=function(t){var n;if(200===t.status)switch(this.readyState===Q.OPEN&&this.onActivity(),t.data.slice(0,1)){case"o":n=JSON.parse(t.data.slice(1)||"{}"),this.onOpen(n);break;case"a":n=JSON.parse(t.data.slice(1)||"[]");for(var i=0;i<n.length;i++)this.onEvent(n[i]);break;case"m":n=JSON.parse(t.data.slice(1)||"null"),this.onEvent(n);break;case"h":this.hooks.onHeartbeat(this);break;case"c":n=JSON.parse(t.data.slice(1)||"[]"),this.onClose(n[0],n[1],!0)}},e.prototype.onOpen=function(t){this.readyState===Q.CONNECTING?(t&&t.hostname&&(this.location.base=function(e,t){var n=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(e);return n[1]+t+n[3]}(this.location.base,t.hostname)),this.readyState=Q.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},e.prototype.onEvent=function(t){this.readyState===Q.OPEN&&this.onmessage&&this.onmessage({data:t})},e.prototype.onActivity=function(){this.onactivity&&this.onactivity()},e.prototype.onError=function(t){this.onerror&&this.onerror(t)},e.prototype.openStream=function(){var t=this;this.stream=b.createSocketRequest("POST",Mt(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(n){t.onChunk(n)}),this.stream.bind("finished",function(n){t.hooks.onFinished(t,n)}),this.stream.bind("buffer_too_long",function(){t.reconnect()});try{this.stream.start()}catch(n){A.defer(function(){t.onError(n),t.onClose(1006,"Could not start streaming",!1)})}},e.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},e}();function Mt(e){var t=-1===e.indexOf("?")?"?":"&";return e+t+"t="+ +new Date+"&n="+Qn++}function Ht(e){return Math.floor(Math.random()*e)}var tr=Vn,nr={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr_streaming"+e.queryString},onHeartbeat:function(e){e.sendRaw("[]")},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){e.onClose(1006,"Connection interrupted ("+t+")",!1)}},ir={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr"+e.queryString},onHeartbeat:function(){},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){200===t?e.reconnect():e.onClose(1006,"Connection interrupted ("+t+")",!1)}},or={getRequest:function(e){var n=new(b.getXHRAPI());return n.onreadystatechange=n.onprogress=function(){switch(n.readyState){case 3:n.responseText&&n.responseText.length>0&&e.onChunk(n.status,n.responseText);break;case 4:n.responseText&&n.responseText.length>0&&e.onChunk(n.status,n.responseText),e.emit("finished",n.status),e.close()}},n},abortRequest:function(e){e.onreadystatechange=null,e.abort()}},sr=or,ar={createStreamingSocket:function(e){return this.createSocket(nr,e)},createPollingSocket:function(e){return this.createSocket(ir,e)},createSocket:function(e,t){return new tr(e,t)},createXHR:function(e,t){return this.createRequest(sr,e,t)},createRequest:function(e,t,n){return new Gn(e,t,n)}},Dt=ar;Dt.createXDR=function(e,t){return this.createRequest(Fn,e,t)};var ur={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:f,DependenciesReceivers:T,getDefaultStrategy:Un,Transports:Fe,transportConnectionInitializer:function(){var e=this;e.timeline.info(e.buildTimelineMessage({transport:e.name+(e.options.useTLS?"s":"")})),e.hooks.isInitialized()?e.changeState("initialized"):e.hooks.file?(e.changeState("initializing"),y.load(e.hooks.file,{useTLS:e.options.useTLS},function(t,n){e.hooks.isInitialized()?(e.changeState("initialized"),n(!0)):(t&&e.onError(t),e.onClose(),n(!1))})):e.onClose()},HTTPFactory:Dt,TimelineTransport:xe,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(e){var t=this;window.Pusher=e;var n=function(){t.onDocumentBody(e.ready)};window.JSON?n():y.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:F,jsonp:me}},onDocumentBody:function(e){var t=this;document.body?e():setTimeout(function(){t.onDocumentBody(e)},0)},createJSONPRequest:function(e,t){return new we(e,t)},createScriptRequest:function(e){return new be(e)},getLocalStorage:function(){try{return window.localStorage}catch(e){return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){return new(this.getXHRAPI())},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return We},createWebSocket:function(e){return new(this.getWebSocketAPI())(e)},createSocketRequest:function(e,t){if(this.isXHRSupported())return this.HTTPFactory.createXHR(e,t);if(this.isXDRSupported(0===t.indexOf("https:")))return this.HTTPFactory.createXDR(e,t);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var e=this.getXHRAPI();return Boolean(e)&&void 0!==(new e).withCredentials},isXDRSupported:function(e){var t=e?"https:":"http:",n=this.getProtocol();return Boolean(window.XDomainRequest)&&n===t},addUnloadListener:function(e){void 0!==window.addEventListener?window.addEventListener("unload",e,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",e)},removeUnloadListener:function(e){void 0!==window.addEventListener?window.removeEventListener("unload",e,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",e)}},b=ur,st=(()=>(function(e){e[e.ERROR=3]="ERROR",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"}(st||(st={})),st))(),at=st,hr=function(){function e(t,n,r){this.key=t,this.session=n,this.events=[],this.options=r||{},this.sent=0,this.uniqueID=0}return e.prototype.log=function(t,n){t<=this.options.level&&(this.events.push(I({},n,{timestamp:A.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},e.prototype.error=function(t){this.log(at.ERROR,t)},e.prototype.info=function(t){this.log(at.INFO,t)},e.prototype.debug=function(t){this.log(at.DEBUG,t)},e.prototype.isEmpty=function(){return 0===this.events.length},e.prototype.send=function(t,n){var r=this,i=I({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],t(i,function(o,s){o||r.sent++,n&&n(o,s)}),!0},e.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},e}(),fr=hr,lr=function(){function e(t,n,r,i){this.name=t,this.priority=n,this.transport=r,this.options=i||{}}return e.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},e.prototype.connect=function(t,n){var r=this;if(!this.isSupported())return Bt(new q,n);if(this.priority<t)return Bt(new v,n);var i=!1,o=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),s=null,u=function(){o.unbind("initialized",u),o.connect()},d=function(){s=B.createHandshake(o,function(U){i=!0,j(),n(null,U)})},w=function(U){j(),n(U)},E=function(){var U;j(),U=nt(o),n(new P(U))},j=function(){o.unbind("initialized",u),o.unbind("open",d),o.unbind("error",w),o.unbind("closed",E)};return o.bind("initialized",u),o.bind("open",d),o.bind("error",w),o.bind("closed",E),o.initialize(),{abort:function(){i||(j(),s?s.close():o.close())},forceMinPriority:function(U){i||r.priority<U&&(s?s.close():o.close())}}},e}(),pr=lr;function Bt(e,t){return A.defer(function(){t(e)}),{abort:function(){},forceMinPriority:function(){}}}var dr=b.Transports,vr=function(e,t,n,r,i,o){var d,s=dr[n];if(!s)throw new N(n);return e.enabledTransports&&-1===St(e.enabledTransports,t)||e.disabledTransports&&-1!==St(e.disabledTransports,t)?d=gr:(i=Object.assign({ignoreNullOrigin:e.ignoreNullOrigin},i),d=new pr(t,r,o?o.getAssistant(s):s,i)),d},gr={isSupported:function(){return!1},connect:function(e,t){var n=A.defer(function(){t(new q)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}};function mr(e){return e.httpHost?e.httpHost:e.cluster?"sockjs-"+e.cluster+".pusher.com":m_httpHost}function _r(e){return e.wsHost?e.wsHost:function(e){return"ws-"+e+".pusher.com"}(e.cluster?e.cluster:m_cluster)}function br(e){return"https:"===b.getProtocol()||!1!==e.forceTLS}function Sr(e){return"enableStats"in e?e.enableStats:"disableStats"in e&&!e.disableStats}var qt=function(){function e(t,n){var r=this;if(function(e){if(null==e)throw"You must pass your app key when you instantiate Pusher."}(t),!(n=n||{}).cluster&&!n.wsHost&&!n.httpHost){var i=p_buildLogSuffix("javascriptQuickStart");L.warn("You should always specify a cluster when connecting. "+i)}"disableStats"in n&&L.warn("The disableStats option is deprecated in favor of enableStats"),this.key=t,this.config=function(e){var t={activityTimeout:e.activityTimeout||m_activityTimeout,authEndpoint:e.authEndpoint||m_authEndpoint,authTransport:e.authTransport||m_authTransport,cluster:e.cluster||m_cluster,httpPath:e.httpPath||m_httpPath,httpPort:e.httpPort||m_httpPort,httpsPort:e.httpsPort||m_httpsPort,pongTimeout:e.pongTimeout||m_pongTimeout,statsHost:e.statsHost||m_stats_host,unavailableTimeout:e.unavailableTimeout||m_unavailableTimeout,wsPath:e.wsPath||m_wsPath,wsPort:e.wsPort||m_wsPort,wssPort:e.wssPort||m_wssPort,enableStats:Sr(e),httpHost:mr(e),useTLS:br(e),wsHost:_r(e)};return"auth"in e&&(t.auth=e.auth),"authorizer"in e&&(t.authorizer=e.authorizer),"disabledTransports"in e&&(t.disabledTransports=e.disabledTransports),"enabledTransports"in e&&(t.enabledTransports=e.enabledTransports),"ignoreNullOrigin"in e&&(t.ignoreNullOrigin=e.ignoreNullOrigin),"timelineParams"in e&&(t.timelineParams=e.timelineParams),"nacl"in e&&(t.nacl=e.nacl),t}(n),this.channels=B.createChannels(),this.global_emitter=new J,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new fr(this.key,this.sessionID,{cluster:this.config.cluster,features:e.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:at.INFO,version:m_VERSION}),this.config.enableStats&&(this.timelineSender=B.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+b.TimelineTransport.name})),this.connection=B.createConnectionManager(this.key,{getStrategy:function(s){return b.getDefaultStrategy(r.config,s,vr)},timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:Boolean(this.config.useTLS)}),this.connection.bind("connected",function(){r.subscribeAll(),r.timelineSender&&r.timelineSender.send(r.connection.isUsingTLS())}),this.connection.bind("message",function(s){var d=0===s.event.indexOf("pusher_internal:");if(s.channel){var w=r.channel(s.channel);w&&w.handleEvent(s)}d||r.global_emitter.emit(s.event,s.data)}),this.connection.bind("connecting",function(){r.channels.disconnect()}),this.connection.bind("disconnected",function(){r.channels.disconnect()}),this.connection.bind("error",function(s){L.warn(s)}),e.instances.push(this),this.timeline.info({instances:e.instances.length}),e.isReady&&this.connect()}return e.ready=function(){e.isReady=!0;for(var t=0,n=e.instances.length;t<n;t++)e.instances[t].connect()},e.getClientFeatures=function(){return wt(xt({ws:b.Transports.ws},function(t){return t.isSupported({})}))},e.prototype.channel=function(t){return this.channels.find(t)},e.prototype.allChannels=function(){return this.channels.all()},e.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var t=this.connection.isUsingTLS(),n=this.timelineSender;this.timelineSenderTimer=new se(6e4,function(){n.send(t)})}},e.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},e.prototype.bind=function(t,n,r){return this.global_emitter.bind(t,n,r),this},e.prototype.unbind=function(t,n,r){return this.global_emitter.unbind(t,n,r),this},e.prototype.bind_global=function(t){return this.global_emitter.bind_global(t),this},e.prototype.unbind_global=function(t){return this.global_emitter.unbind_global(t),this},e.prototype.unbind_all=function(t){return this.global_emitter.unbind_all(),this},e.prototype.subscribeAll=function(){var t;for(t in this.channels.channels)this.channels.channels.hasOwnProperty(t)&&this.subscribe(t)},e.prototype.subscribe=function(t){var n=this.channels.add(t,this);return n.subscriptionPending&&n.subscriptionCancelled?n.reinstateSubscription():!n.subscriptionPending&&"connected"===this.connection.state&&n.subscribe(),n},e.prototype.unsubscribe=function(t){var n=this.channels.find(t);n&&n.subscriptionPending?n.cancelSubscription():(n=this.channels.remove(t))&&n.subscribed&&n.unsubscribe()},e.prototype.send_event=function(t,n,r){return this.connection.send_event(t,n,r)},e.prototype.shouldUseTLS=function(){return this.config.useTLS},e.instances=[],e.isReady=!1,e.logToConsole=!1,e.Runtime=b,e.ScriptReceivers=b.ScriptReceivers,e.DependenciesReceivers=b.DependenciesReceivers,e.auth_callbacks=b.auth_callbacks,e}(),vt=S.default=qt;b.setup(qt)}])},9633:(mt,H,S)=>{"use strict";S.r(H),S.d(H,{BasicChatModule:()=>c});var C=S(6019),g=S(9843),f=S(9133),R=S(3825),m=S.n(R),h=S(3668),k=S(3274);const T=["scrollMe"];function y(a,l){if(1&a&&(h.\u0275\u0275elementStart(0,"div",12),h.\u0275\u0275elementStart(1,"div",13),h.\u0275\u0275elementStart(2,"strong",14),h.\u0275\u0275text(3),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(4,"div",15),h.\u0275\u0275text(5),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd()),2&a){const v=l.$implicit;h.\u0275\u0275advance(3),h.\u0275\u0275textInterpolate(v.username),h.\u0275\u0275advance(2),h.\u0275\u0275textInterpolate(v.message)}}const x=[{path:"",component:(()=>{class a{constructor(v){this.chatService=v,this.username="Hemant",this.message="",this.messages=[{username:"Hemant",message:"Hey "},{username:"Vivek",message:"Yes sir"},{username:"Vivek",message:"How are you?"}]}ngOnInit(){this.form=new f.cw({message:new f.NI("")}),m().logToConsole=!0,new(m())("6da8b4c72ac7d3771308",{cluster:"mt1"}).subscribe("chat").bind("message",O=>{console.log("PPP",O),this.messages.push(O)}),this.scrollToBottom()}sendMessage(){this.chatService.sendMessage(Object.assign({username:this.username},this.form.value)).subscribe(()=>this.form.reset())}ngAfterViewChecked(){this.scrollToBottom()}scrollToBottom(){try{this.myScrollContainer.nativeElement.scrollTop=this.myScrollContainer.nativeElement.scrollHeight}catch(v){}}}return a.\u0275fac=function(v){return new(v||a)(h.\u0275\u0275directiveInject(k.a))},a.\u0275cmp=h.\u0275\u0275defineComponent({type:a,selectors:[["lib-basic-chat"]],viewQuery:function(v,P){if(1&v&&h.\u0275\u0275viewQuery(T,5),2&v){let O;h.\u0275\u0275queryRefresh(O=h.\u0275\u0275loadQuery())&&(P.myScrollContainer=O.first)}},decls:18,vars:3,consts:[[1,"container"],[1,"d-flex","justify-content-between"],["type","text",1,"form-control",3,"value","input"],[1,"form-inline",3,"formGroup","ngSubmit"],[1,"form-group"],["type","text","name","message","id","message","placeholder","Message","aria-describedby","helpId","formControlName","message",1,"form-control"],["type","submit",1,"btn","btn-primary","ml-2"],[1,"card","mt-4"],[1,"card-header"],[1,"list-group","list-group-flush","border-bottom","scrollarea"],["scrollMe",""],["class","list-group-item list-group-item-action py-3 lh-tight",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action","py-3","lh-tight"],[1,"d-flex","w-100","align-items-center","justify-content-between"],[1,"mb-1"],[1,"col-10","mb-1","small"]],template:function(v,P){1&v&&(h.\u0275\u0275elementStart(0,"div",0),h.\u0275\u0275elementStart(1,"div",1),h.\u0275\u0275elementStart(2,"h1"),h.\u0275\u0275text(3,"Chat"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(4,"div"),h.\u0275\u0275text(5," Username: "),h.\u0275\u0275elementStart(6,"input",2),h.\u0275\u0275listener("input",function(N){return P.username=N.target.value}),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(7,"form",3),h.\u0275\u0275listener("ngSubmit",function(){return P.sendMessage()}),h.\u0275\u0275elementStart(8,"div",4),h.\u0275\u0275element(9,"input",5),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(10,"button",6),h.\u0275\u0275text(11,"Send"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(12,"div",7),h.\u0275\u0275elementStart(13,"div",8),h.\u0275\u0275text(14,"Messages"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(15,"div",9,10),h.\u0275\u0275template(17,y,6,2,"div",11),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementEnd()),2&v&&(h.\u0275\u0275advance(6),h.\u0275\u0275property("value",P.username),h.\u0275\u0275advance(1),h.\u0275\u0275property("formGroup",P.form),h.\u0275\u0275advance(10),h.\u0275\u0275property("ngForOf",P.messages))},directives:[f._Y,f.JL,f.sg,f.Fj,f.JJ,f.u,C.sg],styles:[".scrollarea[_ngcontent-%COMP%]{max-height:400px;overflow-y:scroll}"]}),a})()}];let p=(()=>{class a{}return a.\u0275fac=function(v){return new(v||a)},a.\u0275mod=h.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=h.\u0275\u0275defineInjector({imports:[[g.Bz.forChild(x)],g.Bz]}),a})(),c=(()=>{class a{}return a.\u0275fac=function(v){return new(v||a)},a.\u0275mod=h.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=h.\u0275\u0275defineInjector({imports:[[C.ez,p,f.UX]]}),a})()}}]);