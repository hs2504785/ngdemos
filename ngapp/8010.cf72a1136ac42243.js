"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[8010],{8010:(Tt,I,a)=>{a.r(I),a.d(I,{EbookComponent:()=>H,EbookModule:()=>_t,EbookService:()=>V});var t=a(3668);let V=(()=>{class e{constructor(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var i=a(9839);const y=(0,i.PH)("[Auth] Logout"),E=(0,i.PH)("[Auth] Logout Confirmation"),U=(0,i.PH)("[Auth] Logout Confirmation Dismiss"),L=(0,i.PH)("[Login Component] Login",(0,i.Ky)()),C=(0,i.PH)("[Auth/API] Login Success",(0,i.Ky)()),k=(0,i.PH)("[Auth/API] Login Failure",(0,i.Ky)()),M=(0,i.PH)("[Auth/API] Login Redirect"),z=(0,i.Lq)({error:null,pending:!1},(0,i.on)(L,e=>Object.assign(Object.assign({},e),{error:null,pending:!0})),(0,i.on)(C,e=>Object.assign(Object.assign({},e),{error:null,pending:!1})),(0,i.on)(k,(e,{error:o})=>Object.assign(Object.assign({},e),{error:o,pending:!1}))),A={user:null},J=(0,i.Lq)(A,(0,i.on)(C,(e,{user:o})=>Object.assign(Object.assign({},e),{user:o})),(0,i.on)(y,()=>A)),j="auth",Q={status:J,login:z},F=(0,i.ZF)(j),Y=(0,i.P1)(F,e=>e.status),Z=(0,i.P1)(Y,e=>e.user),w=(0,i.P1)(Z,e=>!!e),P=(0,i.P1)(F,e=>e.login),_=((0,i.P1)(P,e=>e.error),(0,i.P1)(P,e=>e.pending),(0,i.PH)("[Layout] Open Sidenav")),T=(0,i.PH)("[Layout] Close Sidenav"),O="layout",tt=(0,i.Lq)({showSidenav:!1},(0,i.on)(T,e=>({showSidenav:!1})),(0,i.on)(_,e=>({showSidenav:!0})),(0,i.on)(E,e=>({showSidenav:!1}))),et=(0,i.ZF)(O),nt=(0,i.P1)(et,e=>e.showSidenav);var x=a(6701),S=a(2663);const ot=["*"];let it=(()=>{class e{constructor(){this.open=!1,this.closeMenu=new t.EventEmitter}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.\u0275\u0275defineComponent({type:e,selectors:[["lib-sidenav"]],inputs:{open:"open"},outputs:{closeMenu:"closeMenu"},ngContentSelectors:ot,decls:4,vars:1,consts:[["disableClose","",3,"opened","keydown.escape","closedStart"],["sidenav",""]],template:function(n,r){if(1&n){const l=t.\u0275\u0275getCurrentView();t.\u0275\u0275projectionDef(),t.\u0275\u0275elementStart(0,"mat-sidenav",0,1),t.\u0275\u0275listener("keydown.escape",function(){return t.\u0275\u0275restoreView(l),t.\u0275\u0275reference(1).close()})("closedStart",function(){return r.closeMenu.emit()}),t.\u0275\u0275elementStart(2,"mat-nav-list"),t.\u0275\u0275projection(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}2&n&&t.\u0275\u0275property("opened",r.open)},directives:[x.JX,S.Hk],styles:["mat-sidenav[_ngcontent-%COMP%]{width:300px}"]}),e})();var f=a(6019),$=a(8643),h=a(86);const rt=["*"];let at=(()=>{class e{constructor(){this.openMenu=new t.EventEmitter}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.\u0275\u0275defineComponent({type:e,selectors:[["lib-toolbar"]],outputs:{openMenu:"openMenu"},ngContentSelectors:rt,decls:4,vars:0,consts:[["color","primary"],["mat-icon-button","","aria-label","menu",3,"click"],[1,"ti-menu"]],template:function(n,r){1&n&&(t.\u0275\u0275projectionDef(),t.\u0275\u0275elementStart(0,"mat-toolbar",0),t.\u0275\u0275elementStart(1,"button",1),t.\u0275\u0275listener("click",function(){return r.openMenu.emit()}),t.\u0275\u0275element(2,"i",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275projection(3),t.\u0275\u0275elementEnd())},directives:[$.Ye,h.lW],styles:[""]}),e})();var c=a(9843),st=a(6731);const lt=["*"];let ct=(()=>{class e{constructor(){this.icon="",this.hint="",this.routerLink="/ebook",this.navigate=new t.EventEmitter}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.\u0275\u0275defineComponent({type:e,selectors:[["lib-nav-item"]],inputs:{icon:"icon",hint:"hint",routerLink:"routerLink"},outputs:{navigate:"navigate"},ngContentSelectors:lt,decls:6,vars:5,consts:[["mat-list-item","",3,"routerLink","click"],["mat-list-icon",""],["mat-line",""],["mat-line","",1,"secondary"]],template:function(n,r){1&n&&(t.\u0275\u0275projectionDef(),t.\u0275\u0275elementStart(0,"a",0),t.\u0275\u0275listener("click",function(){return r.navigate.emit()}),t.\u0275\u0275element(1,"i",1),t.\u0275\u0275elementStart(2,"span",2),t.\u0275\u0275projection(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"span",3),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275property("routerLink",r.routerLink),t.\u0275\u0275advance(1),t.\u0275\u0275classMapInterpolate1("ti-",r.icon,""),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(r.hint))},directives:[S.Tg,c.yS,S.Nh,st.X2],styles:[".secondary[_ngcontent-%COMP%]{color:#0000008a}"]}),e})();function mt(e,o){if(1&e){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-nav-item",6),t.\u0275\u0275listener("navigate",function(){return t.\u0275\u0275restoreView(n),t.\u0275\u0275nextContext().closeSidenav()}),t.\u0275\u0275text(1," My Collection "),t.\u0275\u0275elementEnd()}}function ut(e,o){if(1&e){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-nav-item",7),t.\u0275\u0275listener("navigate",function(){return t.\u0275\u0275restoreView(n),t.\u0275\u0275nextContext().closeSidenav()}),t.\u0275\u0275text(1," Browse Books "),t.\u0275\u0275elementEnd()}}function dt(e,o){if(1&e){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-nav-item",8),t.\u0275\u0275listener("navigate",function(){return t.\u0275\u0275restoreView(n),t.\u0275\u0275nextContext().closeSidenav()}),t.\u0275\u0275text(1," Sign In "),t.\u0275\u0275elementEnd()}}function pt(e,o){if(1&e){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"lib-nav-item",8),t.\u0275\u0275listener("navigate",function(){return t.\u0275\u0275restoreView(n),t.\u0275\u0275nextContext().logout()}),t.\u0275\u0275text(1," Sign Out "),t.\u0275\u0275elementEnd()}}let H=(()=>{class e{constructor(n){this.store=n,this.showSidenav$=this.store.select(nt),this.loggedIn$=this.store.select(w)}closeSidenav(){this.store.dispatch(T())}openSidenav(){this.store.dispatch(_())}logout(){this.store.dispatch(E())}}return e.\u0275fac=function(n){return new(n||e)(t.\u0275\u0275directiveInject(i.yh))},e.\u0275cmp=t.\u0275\u0275defineComponent({type:e,selectors:[["lib-ebook"]],decls:14,vars:15,consts:[["fullscreen",""],[3,"open"],["routerLink","books","icon","book","hint","View your book collection",3,"navigate",4,"ngIf"],["routerLink","books/find","icon","search","hint","Find your next book!",3,"navigate",4,"ngIf"],[3,"navigate",4,"ngIf"],[3,"openMenu"],["routerLink","books","icon","book","hint","View your book collection",3,"navigate"],["routerLink","books/find","icon","search","hint","Find your next book!",3,"navigate"],[3,"navigate"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"mat-sidenav-container",0),t.\u0275\u0275elementStart(1,"lib-sidenav",1),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275template(3,mt,2,0,"lib-nav-item",2),t.\u0275\u0275pipe(4,"async"),t.\u0275\u0275template(5,ut,2,0,"lib-nav-item",3),t.\u0275\u0275pipe(6,"async"),t.\u0275\u0275template(7,dt,2,0,"lib-nav-item",4),t.\u0275\u0275pipe(8,"async"),t.\u0275\u0275template(9,pt,2,0,"lib-nav-item",4),t.\u0275\u0275pipe(10,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"lib-toolbar",5),t.\u0275\u0275listener("openMenu",function(){return r.openSidenav()}),t.\u0275\u0275text(12," Book Collection "),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(13,"router-outlet"),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("open",t.\u0275\u0275pipeBind1(2,5,r.showSidenav$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(4,7,r.loggedIn$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(6,9,r.loggedIn$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!1===t.\u0275\u0275pipeBind1(8,11,r.loggedIn$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(10,13,r.loggedIn$)))},directives:[x.TM,it,f.O5,at,c.lC,ct,c.rH],pipes:[f.Ov],styles:["mat-sidenav-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.03)}"]}),e})();var B=a(138),b=a(888),d=a(5304),g=a(2411),u=a(9133);function ft(e,o){if(1&e&&(t.\u0275\u0275elementStart(0,"p",10),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.errorMessage," ")}}let gt=(()=>{class e{constructor(n){this.fb=n,this.submitted=new t.EventEmitter}ngOnInit(){this.form=this.fb.group({username:"ngrx",password:""})}submit(){this.form.valid&&this.submitted.emit(this.form.value)}}return e.\u0275fac=function(n){return new(n||e)(t.\u0275\u0275directiveInject(u.qu))},e.\u0275cmp=t.\u0275\u0275defineComponent({type:e,selectors:[["lib-login-form"]],inputs:{errorMessage:"errorMessage"},outputs:{submitted:"submitted"},decls:17,vars:2,consts:[[1,"mx-5"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","email","id","name","formControlName","username",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control"],["class","loginError",4,"ngIf"],[1,"loginButtons"],["type","submit","mat-button",""],[1,"loginError"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"mat-card"),t.\u0275\u0275elementStart(1,"mat-card-title"),t.\u0275\u0275text(2,"Login"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"mat-card-content",0),t.\u0275\u0275elementStart(4,"form",1),t.\u0275\u0275listener("ngSubmit",function(){return r.submit()}),t.\u0275\u0275elementStart(5,"div",2),t.\u0275\u0275elementStart(6,"label",3),t.\u0275\u0275text(7,"Name"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(8,"input",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"div",2),t.\u0275\u0275elementStart(10,"label",5),t.\u0275\u0275text(11,"Password"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(12,"input",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(13,ft,2,1,"p",7),t.\u0275\u0275elementStart(14,"p",8),t.\u0275\u0275elementStart(15,"button",9),t.\u0275\u0275text(16,"Login"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(4),t.\u0275\u0275property("formGroup",r.form),t.\u0275\u0275advance(9),t.\u0275\u0275property("ngIf",r.errorMessage))},directives:[b.a8,b.n5,b.dn,u._Y,u.JL,u.sg,u.Fj,u.JJ,u.u,f.O5,h.lW],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;margin:72px 0}.mat-form-field[_ngcontent-%COMP%]{width:100%;min-width:300px}mat-card-title[_ngcontent-%COMP%], mat-card-content[_ngcontent-%COMP%]{display:flex;justify-content:center}.loginError[_ngcontent-%COMP%]{padding:16px;width:300px;color:#fff;background-color:red}.loginButtons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}"]}),e})();const vt=[{path:"login",component:(()=>{class e{constructor(n,r){this.store=n,this.router=r,this.pending$=(0,g.of)(!1),this.error$=(0,g.of)(!1)}onSubmit(n){this.store.dispatch(L({credentials:n}))}}return e.\u0275fac=function(n){return new(n||e)(t.\u0275\u0275directiveInject(i.yh),t.\u0275\u0275directiveInject(c.F0))},e.\u0275cmp=t.\u0275\u0275defineComponent({type:e,selectors:[["lib-login"]],decls:2,vars:3,consts:[[3,"errorMessage","submitted"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"lib-login-form",0),t.\u0275\u0275listener("submitted",function(m){return r.onSubmit(m)}),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275elementEnd()),2&n&&t.\u0275\u0275property("errorMessage",t.\u0275\u0275pipeBind1(1,1,r.error$))},directives:[gt],pipes:[f.Ov],styles:[""]}),e})(),data:{title:"Login"}}];let ht=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=t.\u0275\u0275defineInjector({imports:[[c.Bz.forChild(vt)],c.Bz]}),e})();var bt=a(8167),s=a(2407),yt=a(6700),v=a(8053),N=a(2047),Ct=a(172);const St=(0,i.PH)("[Auth] Load Auths"),Et=(0,i.PH)("[Auth] Load Auths Success",(0,i.Ky)()),Lt=(0,i.PH)("[Auth] Load Auths Failure",(0,i.Ky)());let xt=(()=>{class e{constructor(n){this.actions$=n,this.loadAuths$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(St),(0,yt.b)(()=>Ct.E.pipe((0,v.U)(r=>Et({data:r})),(0,N.K)(r=>(0,g.of)(Lt({error:r})))))))}}return e.\u0275fac=function(n){return new(n||e)(t.\u0275\u0275inject(s.eX))},e.\u0275prov=t.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var G=a(2438),K=a(1366),It=a(540);let R=(()=>{class e{constructor(){}login({username:n}){return"test"!==n&&"ngrx"!==n?(0,It._)("Invalid username or password"):(0,g.of)({name:"User"})}logout(){return(0,g.of)(!0)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),kt=(()=>{class e{constructor(n,r,l){this.actions$=n,this.authService=r,this.router=l,this.login$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(L),(0,v.U)(m=>m.credentials),(0,G.z)(m=>this.authService.login(m).pipe((0,v.U)(p=>C({user:p})),(0,N.K)(p=>(0,g.of)(k({error:p}))))))),this.loginSuccess$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(C),(0,K.b)(()=>{this.router.navigate(["/ebook"])})),{dispatch:!1}),this.loginRedirect$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(M,y),(0,K.b)(m=>{this.router.navigate(["/ebook/login"])})),{dispatch:!1})}}return e.\u0275fac=function(n){return new(n||e)(t.\u0275\u0275inject(s.eX),t.\u0275\u0275inject(R),t.\u0275\u0275inject(c.F0))},e.\u0275prov=t.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Mt=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.\u0275\u0275defineComponent({type:e,selectors:[["lib-logout-confirmation-dialog"]],decls:9,vars:2,consts:[["mat-dialog-title",""],["mat-button","",3,"mat-dialog-close"]],template:function(n,r){1&n&&(t.\u0275\u0275elementStart(0,"h2",0),t.\u0275\u0275text(1,"Logout"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"mat-dialog-content"),t.\u0275\u0275text(3,"Are you sure you want to logout?"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"mat-dialog-actions"),t.\u0275\u0275elementStart(5,"button",1),t.\u0275\u0275text(6,"Cancel"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"button",1),t.\u0275\u0275text(8,"OK"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(5),t.\u0275\u0275property("mat-dialog-close",!1),t.\u0275\u0275advance(2),t.\u0275\u0275property("mat-dialog-close",!0))},directives:[d.uh,d.xY,d.H8,h.lW,d.ZT],styles:["[_nghost-%COMP%]{display:block;width:100%;max-width:300px}mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}[mat-button][_ngcontent-%COMP%]{padding:0}"]}),e})();const At=(0,i.PH)("[User] Idle Timeout");let jt=(()=>{class e{constructor(n,r,l,m){this.actions$=n,this.authService=r,this.router=l,this.dialog=m,this.logoutConfirmation$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(E),(0,G.z)(()=>this.dialog.open(Mt).afterClosed()),(0,v.U)(p=>p?y():U()))),this.logoutIdleUser$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(At),(0,v.U)(()=>y())))}}return e.\u0275fac=function(n){return new(n||e)(t.\u0275\u0275inject(s.eX),t.\u0275\u0275inject(R),t.\u0275\u0275inject(c.F0),t.\u0275\u0275inject(d.uw))},e.\u0275prov=t.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Ft=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=t.\u0275\u0275defineInjector({imports:[[f.ez,ht,h.ot,u.UX,b.QW,bt.lN,B.c,d.Is,i.Aw.forFeature(j,Q),s.sQ.forFeature([xt,kt,jt])]]}),e})();var wt=a(6636);const Pt=[{path:"",component:H,children:[{path:"books",loadChildren:()=>a.e(1923).then(a.bind(a,1923)).then(e=>e.BooksModule),canActivate:[(()=>{class e{constructor(n,r){this.store=n,this.router=r}canActivate(){return this.store.select(w).pipe((0,v.U)(n=>!!n||(this.store.dispatch(M()),!1)),(0,wt.q)(1))}}return e.\u0275fac=function(n){return new(n||e)(t.\u0275\u0275inject(i.yh),t.\u0275\u0275inject(c.F0))},e.\u0275prov=t.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()]},{path:"",redirectTo:"books"}]}];let _t=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=t.\u0275\u0275defineInjector({imports:[[f.ez,Ft,c.Bz.forChild(Pt),B.c,b.QW,h.ot,x.SJ,S.ie,$.g0,d.Is,i.Aw.forFeature(O,tt)]]}),e})()}}]);