"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[7053],{7053:(O,k,o)=>{o.r(k),o.d(k,{LongRunningModule:()=>m});var W=o(6895),v=o(9116),F=o(2629),t=o(4650);const I=["output"],C=1e6;class p{constructor(){}ngOnInit(){console.log("here"),function A(i={}){const{frames:n=50,speed:s=.0017,size:a=300,inset:z=3,parent:N=document.getElementById("longTask")}=i,P="http://www.w3.org/2000/svg",S=document.createTextNode("\n    .lagRadar-sweep > * {\n      shape-rendering: crispEdges;\n    }\n    .lagRadar-face {\n      fill: transparent;\n    }\n    .lagRadar-hand {\n      stroke-width: 4px;\n      stroke-linecap: round;\n    }\n  ");function g(l,u={},f=[]){const c=document.createElementNS(P,l);return Object.keys(u).forEach(r=>c.setAttribute(r,u[r])),f.forEach(r=>c.appendChild(r)),c}const L=2*Math.PI,e=a/2,h=e-z,$=g("path",{class:"lagRadar-hand"}),R=new Array(n).fill("path").map(l=>g(l)),T=g("svg",{class:"lagRadar",height:a,width:a},[g("style",{type:"text/css"},[S]),g("g",{class:"lagRadar-sweep"},R),$,g("circle",{class:"lagRadar-face",cx:e,cy:e,r:h})]);N.appendChild(T);let x,w=0,y={rotation:0,now:Date.now(),tx:e+h,ty:e};const D=(()=>{const c=120/Math.log(100);return function(r){return 120-Math.max(0,Math.min(c*Math.log(r/10),120))}})();(function b(){const l=Date.now(),u=Math.min(L-s,s*(l-y.now)),f=(y.rotation+u)%L,c=e+h*Math.cos(f),r=e+h*Math.sin(f),Q=u<Math.PI?"0":"1",B=`M${c} ${r}A${h} ${h} 0 ${Q} 0 ${y.tx} ${y.ty}L${e} ${e}`,E=D(u/s);R[w%n].setAttribute("d",B),R[w%n].setAttribute("fill",`hsl(${E}, 80%, 40%)`),$.setAttribute("d",`M${e} ${e}L${c} ${r}`),$.setAttribute("stroke",`hsl(${E}, 80%, 60%)`);for(let M=0;M<n;M++)R[(n+w-M)%n].style.fillOpacity=""+(1-M/n);w++,y={now:l,rotation:f,tx:c,ty:r},x=window.requestAnimationFrame(b)})()}(),this.initWorker()}initWorker(){typeof Worker<"u"&&(this.worker=new Worker(o.tu(new URL(o.p+o.u(5200),o.b))),this.worker.onmessage=({data:n})=>{this.setResult("Worker",n,performance.now()-this.start)})}setResult(n,s,a){this.output.nativeElement.textContent=`\n    From ${n}.\n    Result: ${s}.\n    Time: ${a}`.trim()}runMainThread(){this.output.nativeElement.textContent="Wait...",this.start=performance.now();const n=(0,F.P)(C);this.setResult("Main thread",n,performance.now()-this.start)}runWorkerThread(){this.output.nativeElement.textContent="Wait...",this.start=performance.now(),this.worker.postMessage(C)}}p.\u0275fac=function(n){return new(n||p)},p.\u0275cmp=t.\u0275\u0275defineComponent({type:p,selectors:[["app-long-running"]],viewQuery:function(n,s){if(1&n&&t.\u0275\u0275viewQuery(I,5),2&n){let a;t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(s.output=a.first)}},decls:14,vars:0,consts:[[1,"container"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-warning","mr-2",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[1,"main","text-center"],[1,"text-muted"],["output",""],["id","longTask"]],template:function(n,s){1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h1"),t.\u0275\u0275text(3,"Long Running Task Demo"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div")(5,"button",2),t.\u0275\u0275listener("click",function(){return s.runMainThread()}),t.\u0275\u0275text(6," Main Thread Task "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"button",3),t.\u0275\u0275listener("click",function(){return s.runWorkerThread()}),t.\u0275\u0275text(8," Web Worker Task "),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(9,"div",4)(10,"div",5,6),t.\u0275\u0275text(12,"Nothing to display... yet"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(13,"div",7),t.\u0275\u0275elementEnd()())},changeDetection:0});const j=[{path:"",component:p}];class d{}d.\u0275fac=function(n){return new(n||d)},d.\u0275mod=t.\u0275\u0275defineNgModule({type:d}),d.\u0275inj=t.\u0275\u0275defineInjector({imports:[v.Bz.forChild(j),v.Bz]});class m{}m.\u0275fac=function(n){return new(n||m)},m.\u0275mod=t.\u0275\u0275defineNgModule({type:m}),m.\u0275inj=t.\u0275\u0275defineInjector({imports:[W.ez,d]})}}]);