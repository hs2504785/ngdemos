(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[4753],{4753:(e,t,n)=>{"use strict";n.r(t),n.d(t,{UserSearchCachedModule:()=>f});var r=n(1116),s=n(766),c=n(5366),i=n(5959),a=n(9996),o=n(5855),l=n(2693),u=n(4866);let p=(()=>{class e{constructor(e,t){this.http=e,this.cacheService=t,this.API_URL="https://jsonplaceholder.typicode.com/users",this.userQuerySubject=new i.xQ,this.users$=this.userQuerySubject.pipe((0,o.y)(e=>this.loadUsers(e)))}searchUser(e){this.userQuerySubject.next(e)}loadUsers(e){return this.cacheService.getData(`${this.API_URL}?q=${e}`).pipe((0,a.U)(t=>t.filter(t=>null==t?void 0:t.name.toLowerCase().startsWith(e.toLowerCase()))))}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275inject"](l.eN),c["\u0275\u0275inject"](u.Q))},e.\u0275prov=c["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function d(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"li",6),c["\u0275\u0275text"](1),c["\u0275\u0275elementStart"](2,"small"),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.name," - "),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.email)}}const h=[{path:"",component:(()=>{class e{constructor(e){this.userService=e}ngOnInit(){this.users$=this.userService.users$}searchUser(e){this.userService.searchUser(e)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](p))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-user-search-cached"]],decls:10,vars:3,consts:[[1,"p-2"],[1,"text-muted"],[1,"container-fluid"],["placeholder","Type car name",1,"form-control",3,"input"],[1,"list-group","mt-2","w-50"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"h1"),c["\u0275\u0275text"](2," Search User "),c["\u0275\u0275elementStart"](3,"small",1),c["\u0275\u0275text"](4,"(cached initial response)"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",2),c["\u0275\u0275elementStart"](6,"input",3),c["\u0275\u0275listener"]("input",function(e){return t.searchUser(e.target.value)}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"ul",4),c["\u0275\u0275template"](8,d,4,2,"li",5),c["\u0275\u0275pipe"](9,"async"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](8),c["\u0275\u0275property"]("ngForOf",c["\u0275\u0275pipeBind1"](9,1,t.users$)))},directives:[r.sg],pipes:[r.Ov],styles:[""],changeDetection:0}),e})()}];let m=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({imports:[[s.Bz.forChild(h)],s.Bz]}),e})(),f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({imports:[[r.ez,m]]}),e})()},4866:(e,t,n)=>{"use strict";n.d(t,{Q:()=>u});var r=n(878),s=n(6019),c=n(6598),i=n(1564),a=n(4019),o=n(5366),l=n(2693);let u=(()=>{class e{constructor(e){this.http=e,this.responseCache=new Map}getData(e){const t=this.responseCache.get(e);return t?(0,r.of)(t):this.http.get(e).pipe(function(e,t,n,r){const i=new s.t(1,void 0,void 0);return e=>(0,c.O)(()=>i,void 0)(e)}(),(0,i.x)(),(0,a.b)(t=>{this.responseCache.set(e,t)}))}clearCache(){this.responseCache.clear()}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](l.eN))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);