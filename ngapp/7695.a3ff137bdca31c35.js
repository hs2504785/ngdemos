(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[7695],{5151:(en,Ne,ye)=>{"use strict";ye.r(Ne),ye.d(Ne,{WorkerappModule:()=>W});var f=ye(9808),a=ye(5357),u=ye(5e3),w=ye(7818);const x=[{path:"",component:(()=>{class J{constructor(G){this.cd=G,this.title="nvd3-graph"}ngOnInit(){this.initChart(),setInterval(()=>{this.updateChart()},500),this.worker=new Worker(ye.tu(new URL(ye.p+ye.u(6812),ye.b))),this.worker.onmessage=({data:G})=>{console.log(G)}}initChart(){this.options={chart:{type:"discreteBarChart",height:450,x:function(G){return G.label},y:function(G){return G.value},showValues:!0,valueFormat:function(G){return d3.format(",.4f")(G)},duration:500,xAxis:{axisLabel:"X Axis"},yAxis:{axisLabel:"Y Axis",axisLabelDistance:-10}}}}updateChart(){this.data=[{values:[{label:"A",value:Math.floor(100*Math.random())},{label:"B",value:Math.floor(100*Math.random())},{label:"C",value:Math.floor(100*Math.random())},{label:"D",value:Math.floor(100*Math.random())},{label:"E",value:Math.floor(100*Math.random())},{label:"F",value:Math.floor(100*Math.random())},{label:"G",value:Math.floor(100*Math.random())},{label:"H",value:Math.floor(100*Math.random())}]}]}handleButtonClick(){this.clearCanvas();let G=this.createCanvas();document.getElementById("canContainer").append(G);let rt=G.getContext("2d");rt.beginPath();for(let j=0;j<691;j++)for(let $=0;$<491;$++)rt.fillRect(j,$,10,10)}handleWebWorkerProcess(){this.clearCanvas();let G=this.createCanvas();document.getElementById("canContainer").append(G);let rt=G.transferControlToOffscreen();this.worker.postMessage({canvas:rt},[rt])}clearCanvas(){document.getElementById("canContainer").innerHTML=""}createCanvas(){let G=document.createElement("canvas");return G.setAttribute("width","700"),G.setAttribute("height","500"),G}}return J.\u0275fac=function(G){return new(G||J)(u.\u0275\u0275directiveInject(u.ChangeDetectorRef))},J.\u0275cmp=u.\u0275\u0275defineComponent({type:J,selectors:[["ng-component"]],decls:14,vars:2,consts:[[1,"container"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-primary","mr-2",3,"click"],["type","button",1,"btn","btn-info",3,"click"],[1,"main"],[1,"graph"],[3,"options","data"],["id","canContainer",1,"canvasContainer"]],template:function(G,rt){1&G&&(u.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h1"),u.\u0275\u0275text(3,"Chart Demo"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(4,"div")(5,"button",2),u.\u0275\u0275listener("click",function(){return rt.handleButtonClick()}),u.\u0275\u0275text(6," Main Thread Task "),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(7,"button",3),u.\u0275\u0275listener("click",function(){return rt.handleWebWorkerProcess()}),u.\u0275\u0275text(8," Web Worker Task "),u.\u0275\u0275elementEnd()()(),u.\u0275\u0275elementStart(9,"div",4)(10,"div",5),u.\u0275\u0275element(11,"nvd3",6),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(12,"div",0),u.\u0275\u0275element(13,"div",7),u.\u0275\u0275elementEnd()()()),2&G&&(u.\u0275\u0275advance(11),u.\u0275\u0275property("options",rt.options)("data",rt.data))},dependencies:[w.ZV],styles:[".nvd3[_ngcontent-%COMP%]   .nv-axis[_ngcontent-%COMP%]{pointer-events:none;opacity:1}.nvd3[_ngcontent-%COMP%]   .nv-axis[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:none;stroke:#000;stroke-opacity:.75;shape-rendering:crispEdges}.nvd3[_ngcontent-%COMP%]   .nv-axis[_ngcontent-%COMP%]   path.domain[_ngcontent-%COMP%]{stroke-opacity:.75}.nvd3[_ngcontent-%COMP%]   .nv-axis.nv-x[_ngcontent-%COMP%]   path.domain[_ngcontent-%COMP%]{stroke-opacity:0}.nvd3[_ngcontent-%COMP%]   .nv-axis[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{fill:none;stroke:#e5e5e5;shape-rendering:crispEdges}.nvd3[_ngcontent-%COMP%]   .nv-axis[_ngcontent-%COMP%]   .zero[_ngcontent-%COMP%]   line[_ngcontent-%COMP%], .nvd3[_ngcontent-%COMP%]   .nv-axis[_ngcontent-%COMP%]   line.zero[_ngcontent-%COMP%]{stroke-opacity:.75}.nvd3[_ngcontent-%COMP%]   .nv-axis[_ngcontent-%COMP%]   .nv-axisMaxMin[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{font-weight:700}.nvd3[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]   .nv-axis[_ngcontent-%COMP%]   .nv-axisMaxMin[_ngcontent-%COMP%]   text[_ngcontent-%COMP%], .nvd3[_ngcontent-%COMP%]   .x2[_ngcontent-%COMP%]   .nv-axis[_ngcontent-%COMP%]   .nv-axisMaxMin[_ngcontent-%COMP%]   text[_ngcontent-%COMP%], .nvd3[_ngcontent-%COMP%]   .x3[_ngcontent-%COMP%]   .nv-axis[_ngcontent-%COMP%]   .nv-axisMaxMin[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{text-anchor:middle}.nvd3[_ngcontent-%COMP%]   .nv-axis.nv-disabled[_ngcontent-%COMP%]{opacity:0}.nvd3[_ngcontent-%COMP%]   .nv-bars[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]{fill-opacity:.75;transition:fill-opacity .25s linear}.nvd3[_ngcontent-%COMP%]   .nv-bars[_ngcontent-%COMP%]   rect.hover[_ngcontent-%COMP%]{fill-opacity:1}.nvd3[_ngcontent-%COMP%]   .nv-bars[_ngcontent-%COMP%]   .hover[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]{fill:#add8e6}.nvd3[_ngcontent-%COMP%]   .nv-bars[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{fill:#0000}.nvd3[_ngcontent-%COMP%]   .nv-bars[_ngcontent-%COMP%]   .hover[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{fill:#000}.nvd3[_ngcontent-%COMP%]   .nv-multibar[_ngcontent-%COMP%]   .nv-groups[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%], .nvd3[_ngcontent-%COMP%]   .nv-multibarHorizontal[_ngcontent-%COMP%]   .nv-groups[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%], .nvd3[_ngcontent-%COMP%]   .nv-discretebar[_ngcontent-%COMP%]   .nv-groups[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]{stroke-opacity:0;transition:fill-opacity .25s linear}.nvd3[_ngcontent-%COMP%]   .nv-multibar[_ngcontent-%COMP%]   .nv-groups[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]:hover, .nvd3[_ngcontent-%COMP%]   .nv-multibarHorizontal[_ngcontent-%COMP%]   .nv-groups[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]:hover, .nvd3[_ngcontent-%COMP%]   .nv-candlestickBar[_ngcontent-%COMP%]   .nv-ticks[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]:hover, .nvd3[_ngcontent-%COMP%]   .nv-discretebar[_ngcontent-%COMP%]   .nv-groups[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]:hover{fill-opacity:1}.nvd3[_ngcontent-%COMP%]   .nv-discretebar[_ngcontent-%COMP%]   .nv-groups[_ngcontent-%COMP%]   text[_ngcontent-%COMP%], .nvd3[_ngcontent-%COMP%]   .nv-multibarHorizontal[_ngcontent-%COMP%]   .nv-groups[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{font-weight:700;fill:#000;stroke:#0000}.nvd3[_ngcontent-%COMP%]   .nv-boxplot[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill-opacity:.5}.nvd3[_ngcontent-%COMP%]   .nv-boxplot[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]:hover{fill-opacity:1}.nvd3[_ngcontent-%COMP%]   .nv-boxplot[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]:hover{fill-opacity:1}.nvd3[_ngcontent-%COMP%]   line.nv-boxplot-median[_ngcontent-%COMP%]{stroke:#000}.nv-boxplot-tick[_ngcontent-%COMP%]:hover{stroke-width:2.5px}.nvd3.nv-bullet[_ngcontent-%COMP%]{font:10px sans-serif}.nvd3.nv-bullet[_ngcontent-%COMP%]   .nv-measure[_ngcontent-%COMP%]{fill-opacity:.8}.nvd3.nv-bullet[_ngcontent-%COMP%]   .nv-measure[_ngcontent-%COMP%]:hover{fill-opacity:1}.nvd3.nv-bullet[_ngcontent-%COMP%]   .nv-marker[_ngcontent-%COMP%]{stroke:#000;stroke-width:2px}.nvd3.nv-bullet[_ngcontent-%COMP%]   .nv-markerTriangle[_ngcontent-%COMP%]{stroke:#000;fill:#fff;stroke-width:1.5px}.nvd3.nv-bullet[_ngcontent-%COMP%]   .nv-markerLine[_ngcontent-%COMP%]{stroke:#000;stroke-width:1.5px}.nvd3.nv-bullet[_ngcontent-%COMP%]   .nv-tick[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#666;stroke-width:.5px}.nvd3.nv-bullet[_ngcontent-%COMP%]   .nv-range.nv-s0[_ngcontent-%COMP%]{fill:#eee}.nvd3.nv-bullet[_ngcontent-%COMP%]   .nv-range.nv-s1[_ngcontent-%COMP%]{fill:#ddd}.nvd3.nv-bullet[_ngcontent-%COMP%]   .nv-range.nv-s2[_ngcontent-%COMP%]{fill:#ccc}.nvd3.nv-bullet[_ngcontent-%COMP%]   .nv-title[_ngcontent-%COMP%]{font-size:14px;font-weight:700}.nvd3.nv-bullet[_ngcontent-%COMP%]   .nv-subtitle[_ngcontent-%COMP%]{fill:#999}.nvd3.nv-bullet[_ngcontent-%COMP%]   .nv-range[_ngcontent-%COMP%]{fill:#bababa;fill-opacity:.4}.nvd3.nv-bullet[_ngcontent-%COMP%]   .nv-range[_ngcontent-%COMP%]:hover{fill-opacity:.7}.nvd3.nv-candlestickBar[_ngcontent-%COMP%]   .nv-ticks[_ngcontent-%COMP%]   .nv-tick[_ngcontent-%COMP%]{stroke-width:1px}.nvd3.nv-candlestickBar[_ngcontent-%COMP%]   .nv-ticks[_ngcontent-%COMP%]   .nv-tick.hover[_ngcontent-%COMP%]{stroke-width:2px}.nvd3.nv-candlestickBar[_ngcontent-%COMP%]   .nv-ticks[_ngcontent-%COMP%]   .nv-tick.positive[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]{stroke:#2ca02c;fill:#2ca02c}.nvd3.nv-candlestickBar[_ngcontent-%COMP%]   .nv-ticks[_ngcontent-%COMP%]   .nv-tick.negative[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]{stroke:#d62728;fill:#d62728}.with-transitions[_ngcontent-%COMP%]   .nv-candlestickBar[_ngcontent-%COMP%]   .nv-ticks[_ngcontent-%COMP%]   .nv-tick[_ngcontent-%COMP%]{transition:stroke-width .25s linear,stroke-opacity .25s linear}.nvd3.nv-candlestickBar[_ngcontent-%COMP%]   .nv-ticks[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#333}.nv-force-node[_ngcontent-%COMP%]{stroke:#fff;stroke-width:1.5px}.nv-force-link[_ngcontent-%COMP%]{stroke:#999;stroke-opacity:.6}.nv-force-node[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{stroke-width:0px}.nvd3[_ngcontent-%COMP%]   .nv-check-box[_ngcontent-%COMP%]   .nv-box[_ngcontent-%COMP%]{fill-opacity:0;stroke-width:2}.nvd3[_ngcontent-%COMP%]   .nv-check-box[_ngcontent-%COMP%]   .nv-check[_ngcontent-%COMP%]{fill-opacity:0;stroke-width:4}.nvd3[_ngcontent-%COMP%]   .nv-series.nv-disabled[_ngcontent-%COMP%]   .nv-check-box[_ngcontent-%COMP%]   .nv-check[_ngcontent-%COMP%]{fill-opacity:0;stroke-opacity:0}.nvd3[_ngcontent-%COMP%]   .nv-controlsWrap[_ngcontent-%COMP%]   .nv-legend[_ngcontent-%COMP%]   .nv-check-box[_ngcontent-%COMP%]   .nv-check[_ngcontent-%COMP%]{opacity:0}.nvd3.nv-linePlusBar[_ngcontent-%COMP%]   .nv-bar[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]{fill-opacity:.75}.nvd3.nv-linePlusBar[_ngcontent-%COMP%]   .nv-bar[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]:hover{fill-opacity:1}.nvd3[_ngcontent-%COMP%]   .nv-groups[_ngcontent-%COMP%]   path.nv-line[_ngcontent-%COMP%]{fill:none}.nvd3[_ngcontent-%COMP%]   .nv-groups[_ngcontent-%COMP%]   path.nv-area[_ngcontent-%COMP%]{stroke:none}.nvd3.nv-line[_ngcontent-%COMP%]   .nvd3.nv-scatter[_ngcontent-%COMP%]   .nv-groups[_ngcontent-%COMP%]   .nv-point[_ngcontent-%COMP%]{fill-opacity:0;stroke-opacity:0}.nvd3.nv-scatter.nv-single-point[_ngcontent-%COMP%]   .nv-groups[_ngcontent-%COMP%]   .nv-point[_ngcontent-%COMP%]{fill-opacity:.5!important;stroke-opacity:.5!important}.with-transitions[_ngcontent-%COMP%]   .nvd3[_ngcontent-%COMP%]   .nv-groups[_ngcontent-%COMP%]   .nv-point[_ngcontent-%COMP%]{transition:stroke-width .25s linear,stroke-opacity .25s linear}.nvd3.nv-scatter[_ngcontent-%COMP%]   .nv-groups[_ngcontent-%COMP%]   .nv-point.hover[_ngcontent-%COMP%], .nvd3[_ngcontent-%COMP%]   .nv-groups[_ngcontent-%COMP%]   .nv-point.hover[_ngcontent-%COMP%]{stroke-width:7px;fill-opacity:.95!important;stroke-opacity:.95!important}.nvd3[_ngcontent-%COMP%]   .nv-point-paths[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:#aaa;stroke-opacity:0;fill:#eee;fill-opacity:0}.nvd3[_ngcontent-%COMP%]   .nv-indexLine[_ngcontent-%COMP%]{cursor:ew-resize}svg.nvd3-svg[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;display:block;width:100%;height:100%}.nvtooltip.with-3d-shadow[_ngcontent-%COMP%], .with-3d-shadow[_ngcontent-%COMP%]   .nvtooltip[_ngcontent-%COMP%]{box-shadow:0 5px 10px #0003;border-radius:5px}.nvd3[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{font: 12px Arial,sans-serif}.nvd3[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font:700 14px Arial,sans-serif}.nvd3[_ngcontent-%COMP%]   .nv-background[_ngcontent-%COMP%]{fill:#fff;fill-opacity:0}.nvd3.nv-noData[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.nv-brush[_ngcontent-%COMP%]   .extent[_ngcontent-%COMP%]{fill-opacity:.125;shape-rendering:crispEdges}.nv-brush[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#eee;stroke:#666}.nvd3[_ngcontent-%COMP%]   .nv-legend[_ngcontent-%COMP%]   .nv-series[_ngcontent-%COMP%]{cursor:pointer}.nvd3[_ngcontent-%COMP%]   .nv-legend[_ngcontent-%COMP%]   .nv-disabled[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill-opacity:0}.nvd3[_ngcontent-%COMP%]   .nv-brush[_ngcontent-%COMP%]   .extent[_ngcontent-%COMP%]{fill-opacity:0!important}.nvd3[_ngcontent-%COMP%]   .nv-brushBackground[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]{stroke:#000;stroke-width:.4;fill:#fff;fill-opacity:.7}@media print{.nvd3[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{stroke-width:0;fill-opacity:1}}.nvd3.nv-ohlcBar[_ngcontent-%COMP%]   .nv-ticks[_ngcontent-%COMP%]   .nv-tick[_ngcontent-%COMP%]{stroke-width:1px}.nvd3.nv-ohlcBar[_ngcontent-%COMP%]   .nv-ticks[_ngcontent-%COMP%]   .nv-tick.hover[_ngcontent-%COMP%]{stroke-width:2px}.nvd3.nv-ohlcBar[_ngcontent-%COMP%]   .nv-ticks[_ngcontent-%COMP%]   .nv-tick.positive[_ngcontent-%COMP%]{stroke:#2ca02c}.nvd3.nv-ohlcBar[_ngcontent-%COMP%]   .nv-ticks[_ngcontent-%COMP%]   .nv-tick.negative[_ngcontent-%COMP%]{stroke:#d62728}.nvd3[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:none;stroke:#eee;stroke-opacity:.4;shape-rendering:crispEdges}.nvd3[_ngcontent-%COMP%]   .foreground[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:none;stroke-opacity:.7}.nvd3[_ngcontent-%COMP%]   .nv-parallelCoordinates-brush[_ngcontent-%COMP%]   .extent[_ngcontent-%COMP%]{fill:#fff;fill-opacity:.6;stroke:gray;shape-rendering:crispEdges}.nvd3[_ngcontent-%COMP%]   .nv-parallelCoordinates[_ngcontent-%COMP%]   .hover[_ngcontent-%COMP%]{fill-opacity:1;stroke-width:3px}.nvd3[_ngcontent-%COMP%]   .missingValuesline[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{fill:none;stroke:#000;stroke-width:1;stroke-opacity:1;stroke-dasharray:5,5}.nvd3.nv-pie[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke-opacity:0;transition:fill-opacity .25s linear,stroke-width .25s linear,stroke-opacity .25s linear}.nvd3.nv-pie[_ngcontent-%COMP%]   .nv-pie-title[_ngcontent-%COMP%]{font-size:24px;fill:#13c4f996}.nvd3.nv-pie[_ngcontent-%COMP%]   .nv-slice[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{stroke:#000;stroke-width:0}.nvd3.nv-pie[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:#fff;stroke-width:1px;stroke-opacity:1}.nvd3.nv-pie[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill-opacity:.7}.nvd3.nv-pie[_ngcontent-%COMP%]   .hover[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill-opacity:1}.nvd3.nv-pie[_ngcontent-%COMP%]   .nv-label[_ngcontent-%COMP%]{pointer-events:none}.nvd3.nv-pie[_ngcontent-%COMP%]   .nv-label[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]{fill-opacity:0;stroke-opacity:0}.nvd3[_ngcontent-%COMP%]   .nv-groups[_ngcontent-%COMP%]   .nv-point.hover[_ngcontent-%COMP%]{stroke-width:20px;stroke-opacity:.5}.nvd3[_ngcontent-%COMP%]   .nv-scatter[_ngcontent-%COMP%]   .nv-point.hover[_ngcontent-%COMP%]{fill-opacity:1}.nv-noninteractive[_ngcontent-%COMP%], .nv-distx[_ngcontent-%COMP%], .nv-disty[_ngcontent-%COMP%]{pointer-events:none}.nvd3.nv-sparkline[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:none}.nvd3.nv-sparklineplus[_ngcontent-%COMP%]   g.nv-hoverValue[_ngcontent-%COMP%]{pointer-events:none}.nvd3.nv-sparklineplus[_ngcontent-%COMP%]   .nv-hoverValue[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#333;stroke-width:1.5px}.nvd3.nv-sparklineplus[_ngcontent-%COMP%], .nvd3.nv-sparklineplus[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]{pointer-events:all}.nvd3[_ngcontent-%COMP%]   .nv-hoverArea[_ngcontent-%COMP%]{fill-opacity:0;stroke-opacity:0}.nvd3.nv-sparklineplus[_ngcontent-%COMP%]   .nv-xValue[_ngcontent-%COMP%], .nvd3.nv-sparklineplus[_ngcontent-%COMP%]   .nv-yValue[_ngcontent-%COMP%]{stroke-width:0;font-size:.9em;font-weight:400}.nvd3.nv-sparklineplus[_ngcontent-%COMP%]   .nv-yValue[_ngcontent-%COMP%]{stroke:#f66}.nvd3.nv-sparklineplus[_ngcontent-%COMP%]   .nv-maxValue[_ngcontent-%COMP%]{stroke:#2ca02c;fill:#2ca02c}.nvd3.nv-sparklineplus[_ngcontent-%COMP%]   .nv-minValue[_ngcontent-%COMP%]{stroke:#d62728;fill:#d62728}.nvd3.nv-sparklineplus[_ngcontent-%COMP%]   .nv-currentValue[_ngcontent-%COMP%]{font-weight:700;font-size:1.1em}.nvd3.nv-stackedarea[_ngcontent-%COMP%]   path.nv-area[_ngcontent-%COMP%]{fill-opacity:.7;stroke-opacity:0;transition:fill-opacity .25s linear,stroke-opacity .25s linear}.nvd3.nv-stackedarea[_ngcontent-%COMP%]   path.nv-area.hover[_ngcontent-%COMP%]{fill-opacity:.9}.nvd3.nv-stackedarea[_ngcontent-%COMP%]   .nv-groups[_ngcontent-%COMP%]   .nv-point[_ngcontent-%COMP%]{stroke-opacity:0;fill-opacity:0}.nvtooltip[_ngcontent-%COMP%]{position:absolute;background-color:#fff;color:#000;padding:1px;border:1px solid rgba(0,0,0,.2);z-index:10000;display:block;font-family:Arial,sans-serif;font-size:13px;text-align:left;pointer-events:none;white-space:nowrap;-webkit-user-select:none;user-select:none}.nvtooltip[_ngcontent-%COMP%]{background:rgba(255,255,255,.8);border:1px solid rgba(0,0,0,.5);border-radius:4px}.nvtooltip.with-transitions[_ngcontent-%COMP%], .with-transitions[_ngcontent-%COMP%]   .nvtooltip[_ngcontent-%COMP%]{transition:opacity 50ms linear;transition-delay:.2s}.nvtooltip.x-nvtooltip[_ngcontent-%COMP%], .nvtooltip.y-nvtooltip[_ngcontent-%COMP%]{padding:8px}.nvtooltip[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;padding:4px 14px;line-height:18px;font-weight:400;background-color:#f7f7f7bf;color:#000;text-align:center;border-bottom:1px solid #ebebeb;border-radius:5px 5px 0 0}.nvtooltip[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:5px 14px;text-align:center}.nvtooltip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin:2px 0}.nvtooltip[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin:6px;border-spacing:0}.nvtooltip[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:2px 9px 2px 0;vertical-align:middle}.nvtooltip[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.key[_ngcontent-%COMP%]{font-weight:400}.nvtooltip[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.key.total[_ngcontent-%COMP%]{font-weight:700}.nvtooltip[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.value[_ngcontent-%COMP%]{text-align:right;font-weight:700}.nvtooltip[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.percent[_ngcontent-%COMP%]{color:#a9a9a9}.nvtooltip[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1px 9px 1px 0;border-bottom-style:solid;border-bottom-width:1px;border-top-style:solid;border-top-width:1px}.nvtooltip[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.legend-color-guide[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:8px;height:8px;vertical-align:middle}.nvtooltip[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.legend-color-guide[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:12px;height:12px;border:1px solid #999}.nvtooltip[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{padding:3px;text-align:center}.nvtooltip-pending-removal[_ngcontent-%COMP%]{pointer-events:none;display:none}.nvd3[_ngcontent-%COMP%]   .nv-interactiveGuideLine[_ngcontent-%COMP%]{pointer-events:none}.nvd3[_ngcontent-%COMP%]   line.nv-guideline[_ngcontent-%COMP%]{stroke:#ccc}",".canvasContainer[_ngcontent-%COMP%]{visibility:hidden}"]}),J})()}];let P=(()=>{class J{}return J.\u0275fac=function(G){return new(G||J)},J.\u0275mod=u.\u0275\u0275defineNgModule({type:J}),J.\u0275inj=u.\u0275\u0275defineInjector({imports:[a.Bz.forChild(x),a.Bz]}),J})();ye(5112),ye(2747);let W=(()=>{class J{}return J.\u0275fac=function(G){return new(G||J)},J.\u0275mod=u.\u0275\u0275defineNgModule({type:J}),J.\u0275inj=u.\u0275\u0275defineInjector({imports:[f.ez,P,w.PW]}),J})()},5112:(en,Ne,ye)=>{var f,a;!function(){var u={version:"3.5.17"},w=[].slice,m=function(t){return w.call(t)},x=this.document;function P(t){return t&&(t.ownerDocument||t.document||t).documentElement}function v(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(x)try{m(x.documentElement.childNodes)}catch(t){m=function(e){for(var n=e.length,r=new Array(n);n--;)r[n]=e[n];return r}}if(Date.now||(Date.now=function(){return+new Date}),x)try{x.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var C=this.Element.prototype,W=C.setAttribute,J=C.setAttributeNS,tt=this.CSSStyleDeclaration.prototype,G=tt.setProperty;C.setAttribute=function(e,n){W.call(this,e,n+"")},C.setAttributeNS=function(e,n,r){J.call(this,e,n,r+"")},tt.setProperty=function(e,n,r){G.call(this,e,n+"",r)}}function rt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function j(t){return null===t?NaN:+t}function $(t){return!isNaN(t)}function st(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}u.ascending=rt,u.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},u.min=function(t,e){var i,o,n=-1,r=t.length;if(1===arguments.length){for(;++n<r;)if(null!=(o=t[n])&&o>=o){i=o;break}for(;++n<r;)null!=(o=t[n])&&i>o&&(i=o)}else{for(;++n<r;)if(null!=(o=e.call(t,t[n],n))&&o>=o){i=o;break}for(;++n<r;)null!=(o=e.call(t,t[n],n))&&i>o&&(i=o)}return i},u.max=function(t,e){var i,o,n=-1,r=t.length;if(1===arguments.length){for(;++n<r;)if(null!=(o=t[n])&&o>=o){i=o;break}for(;++n<r;)null!=(o=t[n])&&o>i&&(i=o)}else{for(;++n<r;)if(null!=(o=e.call(t,t[n],n))&&o>=o){i=o;break}for(;++n<r;)null!=(o=e.call(t,t[n],n))&&o>i&&(i=o)}return i},u.extent=function(t,e){var i,o,s,n=-1,r=t.length;if(1===arguments.length){for(;++n<r;)if(null!=(o=t[n])&&o>=o){i=s=o;break}for(;++n<r;)null!=(o=t[n])&&(i>o&&(i=o),s<o&&(s=o))}else{for(;++n<r;)if(null!=(o=e.call(t,t[n],n))&&o>=o){i=s=o;break}for(;++n<r;)null!=(o=e.call(t,t[n],n))&&(i>o&&(i=o),s<o&&(s=o))}return[i,s]},u.sum=function(t,e){var i,n=0,r=t.length,o=-1;if(1===arguments.length)for(;++o<r;)$(i=+t[o])&&(n+=i);else for(;++o<r;)$(i=+e.call(t,t[o],o))&&(n+=i);return n},u.mean=function(t,e){var i,n=0,r=t.length,o=-1,s=r;if(1===arguments.length)for(;++o<r;)$(i=j(t[o]))?n+=i:--s;else for(;++o<r;)$(i=j(e.call(t,t[o],o)))?n+=i:--s;if(s)return n/s},u.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i},u.median=function(t,e){var i,n=[],r=t.length,o=-1;if(1===arguments.length)for(;++o<r;)$(i=j(t[o]))&&n.push(i);else for(;++o<r;)$(i=j(e.call(t,t[o],o)))&&n.push(i);if(n.length)return u.quantile(n.sort(rt),.5)},u.variance=function(t,e){var i,o,n=t.length,r=0,s=0,l=-1,c=0;if(1===arguments.length)for(;++l<n;)$(i=j(t[l]))&&(s+=(o=i-r)*(i-(r+=o/++c)));else for(;++l<n;)$(i=j(e.call(t,t[l],l)))&&(s+=(o=i-r)*(i-(r+=o/++c)));if(c>1)return s/(c-1)},u.deviation=function(){var t=u.variance.apply(this,arguments);return t&&Math.sqrt(t)};var q=st(rt);function z(t){return t.length}u.bisectLeft=q.left,u.bisect=u.bisectRight=q.right,u.bisector=function(t){return st(1===t.length?function(e,n){return rt(t(e),n)}:t)},u.shuffle=function(t,e,n){(r=arguments.length)<3&&(n=t.length,r<2&&(e=0));for(var i,o,r=n-e;r;)o=Math.random()*r--|0,i=t[r+e],t[r+e]=t[o+e],t[o+e]=i;return t},u.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},u.pairs=function(t){for(var e=0,n=t.length-1,i=t[0],o=new Array(n<0?0:n);e<n;)o[e]=[i,i=t[++e]];return o},u.transpose=function(t){if(!(o=t.length))return[];for(var e=-1,n=u.min(t,z),r=new Array(n);++e<n;)for(var o,i=-1,s=r[e]=new Array(o);++i<o;)s[i]=t[i][e];return r},u.zip=function(){return u.transpose(arguments)},u.keys=function(t){var e=[];for(var n in t)e.push(n);return e},u.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},u.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},u.merge=function(t){for(var n,o,s,e=t.length,r=-1,i=0;++r<e;)i+=t[r].length;for(o=new Array(i);--e>=0;)for(n=(s=t[e]).length;--n>=0;)o[--i]=s[n];return o};var R=Math.abs;function V(t){for(var e=1;t*e%1;)e*=10;return e}function E(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function A(){this._=Object.create(null)}function M(t){return"__proto__"==(t+="")||"\0"===t[0]?"\0"+t:t}function b(t){return"\0"===(t+="")[0]?t.slice(1):t}function I(t){return M(t)in this._}function it(t){return(t=M(t))in this._&&delete this._[t]}function ct(){var t=[];for(var e in this._)t.push(b(e));return t}function U(){var t=0;for(var e in this._)++t;return t}function p(){for(var t in this._)return!1;return!0}function _(){this._=Object.create(null)}function D(t){return t}function Z(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function dt(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=ht.length;n<r;++n){var i=ht[n]+e;if(i in t)return i}}u.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var s,r=[],i=V(R(n)),o=-1;if(t*=i,e*=i,(n*=i)<0)for(;(s=t+n*++o)>e;)r.push(s/i);else for(;(s=t+n*++o)<e;)r.push(s/i);return r},u.map=function(t,e){var n=new A;if(t instanceof A)t.forEach(function(l,c){n.set(l,c)});else if(Array.isArray(t)){var o,r=-1,i=t.length;if(1===arguments.length)for(;++r<i;)n.set(r,t[r]);else for(;++r<i;)n.set(e.call(t,o=t[r],r),o)}else for(var s in t)n.set(s,t[s]);return n},E(A,{has:I,get:function(t){return this._[M(t)]},set:function(t,e){return this._[M(t)]=e},remove:it,keys:ct,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:b(e),value:this._[e]});return t},size:U,empty:p,forEach:function(t){for(var e in this._)t.call(this,b(e),this._[e])}}),u.nest=function(){var r,i,t={},e=[],n=[];function o(l,c,d){if(d>=e.length)return i?i.call(t,c):r?c.sort(r):c;for(var Y,nt,L,H,g=-1,y=c.length,k=e[d++],T=new A;++g<y;)(H=T.get(Y=k(nt=c[g])))?H.push(nt):T.set(Y,[nt]);return l?(nt=l(),L=function(et,X){nt.set(et,o(l,X,d))}):(nt={},L=function(et,X){nt[et]=o(l,X,d)}),T.forEach(L),nt}function s(l,c){if(c>=e.length)return l;var d=[],g=n[c++];return l.forEach(function(y,k){d.push({key:y,values:s(k,c)})}),g?d.sort(function(y,k){return g(y.key,k.key)}):d}return t.map=function(l,c){return o(c,l,0)},t.entries=function(l){return s(o(u.map,l,0),0)},t.key=function(l){return e.push(l),t},t.sortKeys=function(l){return n[e.length-1]=l,t},t.sortValues=function(l){return r=l,t},t.rollup=function(l){return i=l,t},t},u.set=function(t){var e=new _;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},E(_,{has:I,add:function(t){return this._[M(t+="")]=!0,t},remove:it,values:ct,size:U,empty:p,forEach:function(t){for(var e in this._)t.call(this,b(e))}}),u.behavior={},u.rebind=function(t,e){for(var i,n=1,r=arguments.length;++n<r;)t[i=arguments[n]]=Z(t,e,e[i]);return t};var ht=["webkit","ms","moz","Moz","o","O"];function h(){}function S(){}function at(t){var e=[],n=new A;function r(){for(var l,i=e,o=-1,s=i.length;++o<s;)(l=i[o].on)&&l.apply(this,arguments);return t}return r.on=function(i,o){var l,s=n.get(i);return arguments.length<2?s&&s.on:(s&&(s.on=null,e=e.slice(0,l=e.indexOf(s)).concat(e.slice(l+1)),n.remove(i)),o&&e.push(n.set(i,{on:o})),t)},r}function ut(){u.event.preventDefault()}function Q(){for(var e,t=u.event;e=t.sourceEvent;)t=e;return t}function ot(t){for(var e=new S,n=0,r=arguments.length;++n<r;)e[arguments[n]]=at(e);return e.of=function(i,o){return function(s){try{var l=s.sourceEvent=u.event;s.target=t,u.event=s,e[s.type].apply(i,o)}finally{u.event=l}}},e}u.dispatch=function(){for(var t=new S,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=at(t);return t},S.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},u.event=null,u.requote=function(t){return t.replace(yt,"\\$&")};var yt=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,wt={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function Et(t){return wt(t,F),t}var gt=function(t,e){return e.querySelector(t)},N=function(t,e){return e.querySelectorAll(t)},lt=function(t,e){var n=t.matches||t[dt(t,"matchesSelector")];return(lt=function(r,i){return n.call(r,i)})(t,e)};"function"==typeof Sizzle&&(gt=function(t,e){return Sizzle(t,e)[0]||null},N=Sizzle,lt=Sizzle.matchesSelector),u.selection=function(){return u.select(x.documentElement)};var F=u.selection.prototype=[];function ft(t){return"function"==typeof t?t:function(){return gt(t,this)}}function xt(t){return"function"==typeof t?t:function(){return N(t,this)}}F.select=function(t){var n,r,i,o,e=[];t=ft(t);for(var s=-1,l=this.length;++s<l;){e.push(n=[]),n.parentNode=(i=this[s]).parentNode;for(var c=-1,d=i.length;++c<d;)(o=i[c])?(n.push(r=t.call(o,o.__data__,c,s)),r&&"__data__"in o&&(r.__data__=o.__data__)):n.push(null)}return Et(e)},F.selectAll=function(t){var n,r,e=[];t=xt(t);for(var i=-1,o=this.length;++i<o;)for(var s=this[i],l=-1,c=s.length;++l<c;)(r=s[l])&&(e.push(n=m(t.call(r,r.__data__,l,i))),n.parentNode=r);return Et(e)};var Rt="http://www.w3.org/1999/xhtml",Qt={svg:"http://www.w3.org/2000/svg",xhtml:Rt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ct(t,e){return t=u.ns.qualify(t),null==e?t.local?function r(){this.removeAttributeNS(t.space,t.local)}:function n(){this.removeAttribute(t)}:"function"==typeof e?t.local?function l(){var c=e.apply(this,arguments);null==c?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,c)}:function s(){var c=e.apply(this,arguments);null==c?this.removeAttribute(t):this.setAttribute(t,c)}:t.local?function o(){this.setAttributeNS(t.space,t.local,e)}:function i(){this.setAttribute(t,e)}}function St(t){return t.trim().replace(/\s+/g," ")}function Dt(t){return new RegExp("(?:^|\\s+)"+u.requote(t)+"(?:\\s+|$)","g")}function ne(t){return(t+"").trim().split(/^|\s+/)}function _t(t,e){var n=(t=ne(t).map(Yt)).length;return"function"==typeof e?function i(){for(var o=-1,s=e.apply(this,arguments);++o<n;)t[o](this,s)}:function r(){for(var o=-1;++o<n;)t[o](this,e)}}function Yt(t){var e=Dt(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",St(i+" "+t))):n.setAttribute("class",St(i.replace(e," ")))}}function te(t,e,n){return null==e?function r(){this.style.removeProperty(t)}:"function"==typeof e?function o(){var s=e.apply(this,arguments);null==s?this.style.removeProperty(t):this.style.setProperty(t,s,n)}:function i(){this.style.setProperty(t,e,n)}}function oe(t,e){return null==e?function n(){delete this[t]}:"function"==typeof e?function i(){var o=e.apply(this,arguments);null==o?delete this[t]:this[t]=o}:function r(){this[t]=e}}function Wt(t){return"function"==typeof t?t:(t=u.ns.qualify(t)).local?function n(){return this.ownerDocument.createElementNS(t.space,t.local)}:function e(){var r=this.ownerDocument,i=this.namespaceURI;return i===Rt&&r.documentElement.namespaceURI===Rt?r.createElement(t):r.createElementNS(i,t)}}function Xt(){var t=this.parentNode;t&&t.removeChild(this)}function re(t){return{__data__:t}}function Pt(t){return function(){return lt(this,t)}}function $t(t){return arguments.length||(t=rt),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function ie(t,e){for(var n=0,r=t.length;n<r;n++)for(var l,i=t[n],o=0,s=i.length;o<s;o++)(l=i[o])&&e(l,o,n);return t}function xe(t){return wt(t,de),t}u.ns={prefix:Qt,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Qt.hasOwnProperty(n)?{space:Qt[n],local:t}:t}},F.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=u.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(Ct(e,t[e]));return this}return this.each(Ct(t,e))},F.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=ne(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!Dt(t[i]).test(e))return!1;return!0}for(e in t)this.each(_t(e,t[e]));return this}return this.each(_t(t,e))},F.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.each(te(n,t[n],e));return this}if(r<2){var i=this.node();return v(i).getComputedStyle(i,null).getPropertyValue(t)}n=""}return this.each(te(t,e,n))},F.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(oe(e,t[e]));return this}return this.each(oe(t,e))},F.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},F.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},F.append=function(t){return t=Wt(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},F.insert=function(t,e){return t=Wt(t),e=ft(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},F.remove=function(){return this.each(Xt)},F.data=function(t,e){var i,o,n=-1,r=this.length;if(!arguments.length){for(t=new Array(r=(i=this[0]).length);++n<r;)(o=i[n])&&(t[n]=o.__data__);return t}function s(g,y){var k,X,K,Y=g.length,nt=y.length,L=Math.min(Y,nt),T=new Array(nt),H=new Array(nt),et=new Array(Y);if(e){var mt,bt=new A,vt=new Array(Y);for(k=-1;++k<Y;)(X=g[k])&&(bt.has(mt=e.call(X,X.__data__,k))?et[k]=X:bt.set(mt,X),vt[k]=mt);for(k=-1;++k<nt;)(X=bt.get(mt=e.call(y,K=y[k],k)))?!0!==X&&(T[k]=X,X.__data__=K):H[k]=re(K),bt.set(mt,!0);for(k=-1;++k<Y;)k in vt&&!0!==bt.get(vt[k])&&(et[k]=g[k])}else{for(k=-1;++k<L;)K=y[k],(X=g[k])?(X.__data__=K,T[k]=X):H[k]=re(K);for(;k<nt;++k)H[k]=re(y[k]);for(;k<Y;++k)et[k]=g[k]}H.update=T,H.parentNode=T.parentNode=et.parentNode=g.parentNode,l.push(H),c.push(T),d.push(et)}var l=xe([]),c=Et([]),d=Et([]);if("function"==typeof t)for(;++n<r;)s(i=this[n],t.call(i,i.parentNode.__data__,n));else for(;++n<r;)s(i=this[n],t);return c.enter=function(){return l},c.exit=function(){return d},c},F.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},F.filter=function(t){var n,r,i,e=[];"function"!=typeof t&&(t=Pt(t));for(var o=0,s=this.length;o<s;o++){e.push(n=[]),n.parentNode=(r=this[o]).parentNode;for(var l=0,c=r.length;l<c;l++)(i=r[l])&&t.call(i,i.__data__,l,o)&&n.push(i)}return Et(e)},F.order=function(){for(var t=-1,e=this.length;++t<e;)for(var o,n=this[t],r=n.length-1,i=n[r];--r>=0;)(o=n[r])&&(i&&i!==o.nextSibling&&i.parentNode.insertBefore(o,i),i=o);return this},F.sort=function(t){t=$t.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},F.each=function(t){return ie(this,function(e,n,r){t.call(e,e.__data__,n,r)})},F.call=function(t){var e=m(arguments);return t.apply(e[0]=this,e),this},F.empty=function(){return!this.node()},F.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var o=n[r];if(o)return o}return null},F.size=function(){var t=0;return ie(this,function(){++t}),t};var de=[];function be(t){var e,n;return function(r,i,o){var c,s=t[o].update,l=s.length;for(o!=n&&(n=o,e=0),i>=e&&(e=i+1);!(c=s[e])&&++e<l;);return c}}function Ce(t,e,n){var r="__on"+t,i=t.indexOf("."),o=zt;i>0&&(t=t.slice(0,i));var s=we.get(t);function l(){var g=this[r];g&&(this.removeEventListener(t,g,g.$),delete this[r])}return s&&(t=s,o=ce),i?e?function c(){var g=o(e,m(arguments));l.call(this),this.addEventListener(t,this[r]=g,g.$=n),g._=e}:l:e?h:function d(){var y,g=new RegExp("^__on([^.]+)"+u.requote(t)+"$");for(var k in this)if(y=k.match(g)){var Y=this[k];this.removeEventListener(y[1],Y,Y.$),delete this[k]}}}u.selection.enter=xe,u.selection.enter.prototype=de,de.append=F.append,de.empty=F.empty,de.node=F.node,de.call=F.call,de.size=F.size,de.select=function(t){for(var n,r,i,o,s,e=[],l=-1,c=this.length;++l<c;){i=(o=this[l]).update,e.push(n=[]),n.parentNode=o.parentNode;for(var d=-1,g=o.length;++d<g;)(s=o[d])?(n.push(i[d]=r=t.call(o.parentNode,s.__data__,d,l)),r.__data__=s.__data__):n.push(null)}return Et(e)},de.insert=function(t,e){return arguments.length<2&&(e=be(this)),F.insert.call(this,t,e)},u.select=function(t){var e;return"string"==typeof t?(e=[gt(t,x)]).parentNode=x.documentElement:(e=[t]).parentNode=P(t),Et([e])},u.selectAll=function(t){var e;return"string"==typeof t?(e=m(N(t,x))).parentNode=x.documentElement:(e=m(t)).parentNode=null,Et([e])},F.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=!1),t)this.each(Ce(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(Ce(t,e,n))};var we=u.map({mouseenter:"mouseover",mouseleave:"mouseout"});function zt(t,e){return function(n){var r=u.event;u.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{u.event=r}}}function ce(t,e){var n=zt(t,e);return function(r){var i=this,o=r.relatedTarget;(!o||o!==i&&!(8&o.compareDocumentPosition(i)))&&n.call(i,r)}}x&&we.forEach(function(t){"on"+t in x&&we.remove(t)});var Mt,Ot=0;function jt(t){var e=".dragsuppress-"+ ++Ot,n="click"+e,r=u.select(v(t)).on("touchmove"+e,ut).on("dragstart"+e,ut).on("selectstart"+e,ut);if(null==Mt&&(Mt=!("onselectstart"in t)&&dt(t.style,"userSelect")),Mt){var i=P(t).style,o=i[Mt];i[Mt]="none"}return function(s){if(r.on(e,null),Mt&&(i[Mt]=o),s){var l=function(){r.on(n,null)};r.on(n,function(){ut(),l()},!0),setTimeout(l,0)}}}u.mouse=function(t){return fe(t,Q())};var ee=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function fe(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(ee<0){var i=v(t);if(i.scrollX||i.scrollY){var o=(n=u.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();ee=!(o.f||o.e),n.remove()}}return ee?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function ke(){return u.event.changedTouches[0].identifier}u.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=Q().changedTouches),e)for(var o,r=0,i=e.length;r<i;++r)if((o=e[r]).identifier===n)return fe(t,o)},u.behavior.drag=function(){var t=ot(i,"drag","dragstart","dragend"),e=null,n=o(h,u.mouse,v,"mousemove","mouseup"),r=o(ke,u.touch,D,"touchmove","touchend");function i(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function o(s,l,c,d,g){return function(){var et,y=this,k=u.event.target.correspondingElement||u.event.target,Y=y.parentNode,nt=t.of(y,arguments),L=0,T=s(),H=".drag"+(null==T?"":"-"+T),X=u.select(c(k)).on(d+H,vt).on(g+H,mt),K=jt(k),bt=l(Y,T);function vt(){var Nt,Ft,pt=l(Y,T);!pt||(L|=(Nt=pt[0]-bt[0])|(Ft=pt[1]-bt[1]),bt=pt,nt({type:"drag",x:pt[0]+et[0],y:pt[1]+et[1],dx:Nt,dy:Ft}))}function mt(){!l(Y,T)||(X.on(d+H,null).on(g+H,null),K(L),nt({type:"dragend"}))}et=e?[(et=e.apply(y,arguments)).x-bt[0],et.y-bt[1]]:[0,0],nt({type:"dragstart"})}}return i.origin=function(s){return arguments.length?(e=s,i):e},u.rebind(i,t,"on")},u.touches=function(t,e){return arguments.length<2&&(e=Q().touches),e?m(e).map(function(n){var r=fe(t,n);return r.identifier=n.identifier,r}):[]};var Ht=1e-6,se=1e-12,Bt=Math.PI,Zt=2*Bt,pe=Zt-Ht,ae=Bt/2,Jt=Bt/180,he=180/Bt;function tr(t){return t>0?1:t<0?-1:0}function Bn(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function er(t){return t>1?0:t<-1?Bt:Math.acos(t)}function nn(t){return t>1?ae:t<-1?-ae:Math.asin(t)}function io(t){return((t=Math.exp(t))+1/t)/2}function oo(t){return(t=Math.sin(t/2))*t}var In=Math.SQRT2;u.interpolateZoom=function(t,e){var y,k,n=t[0],r=t[1],i=t[2],l=e[2],c=e[0]-n,d=e[1]-r,g=c*c+d*d;if(g<se)k=Math.log(l/i)/In,y=function(et){return[n+et*c,r+et*d,i*Math.exp(In*et*k)]};else{var Y=Math.sqrt(g),nt=(l*l-i*i+4*g)/(2*i*2*Y),L=(l*l-i*i-4*g)/(2*l*2*Y),T=Math.log(Math.sqrt(nt*nt+1)-nt),H=Math.log(Math.sqrt(L*L+1)-L);k=(H-T)/In,y=function(et){var X=et*k,K=io(T),bt=i/(2*Y)*(K*function _u(t){return((t=Math.exp(2*t))-1)/(t+1)}(In*X+T)-function Mu(t){return((t=Math.exp(t))-1/t)/2}(T));return[n+bt*c,r+bt*d,i*K/io(In*X+T)]}}return y.duration=1e3*k,y},u.behavior.zoom=function(){var e,n,r,y,Y,L,T,H,et,t={x:0,y:0,k:1},i=[960,500],o=uo,s=250,l=0,c="mousedown.zoom",d="mousemove.zoom",g="mouseup.zoom",k="touchstart.zoom",nt=ot(X,"zoomstart","zoom","zoomend");function X(At){At.on(c,Gt).on(Jr+".zoom",Lt).on("dblclick.zoom",It).on(k,kt)}function K(At){return[(At[0]-t.x)/t.k,(At[1]-t.y)/t.k]}function vt(At){t.k=Math.max(o[0],Math.min(o[1],At))}function mt(At,Tt){Tt=function bt(At){return[At[0]*t.k+t.x,At[1]*t.k+t.y]}(Tt),t.x+=At[0]-Tt[0],t.y+=At[1]-Tt[1]}function pt(At,Tt,Ut,ue){At.__chart__={x:t.x,y:t.y,k:t.k},vt(Math.pow(2,ue)),mt(n=Tt,Ut),At=u.select(At),s>0&&(At=At.transition().duration(s)),At.call(X.event)}function Nt(){T&&T.domain(L.range().map(function(At){return(At-t.x)/t.k}).map(L.invert)),et&&et.domain(H.range().map(function(At){return(At-t.y)/t.k}).map(H.invert))}function Ft(At){l++||At({type:"zoomstart"})}function qt(At){Nt(),At({type:"zoom",scale:t.k,translate:[t.x,t.y]})}function Vt(At){--l||(At({type:"zoomend"}),n=null)}function Gt(){var At=this,Tt=nt.of(At,arguments),Ut=0,ue=u.select(v(At)).on(d,me).on(g,Se),le=K(u.mouse(At)),ge=jt(At);function me(){Ut=1,mt(u.mouse(At),le),qt(Tt)}function Se(){ue.on(d,null).on(g,null),ge(Ut),Vt(Tt)}jr.call(At),Ft(Tt)}function kt(){var le,At=this,Tt=nt.of(At,arguments),Ut={},ue=0,ge=".zoom-"+u.event.changedTouches[0].identifier,me="touchmove"+ge,Se="touchend"+ge,De=[],Ee=u.select(At),ze=jt(At);function Oe(){var qe=u.touches(At);return le=t.k,qe.forEach(function(Ae){Ae.identifier in Ut&&(Ut[Ae.identifier]=K(Ae))}),qe}function Fe(){var qe=u.event.target;u.select(qe).on(me,_n).on(Se,cc),De.push(qe);for(var Ae=u.event.changedTouches,Ie=0,Ke=Ae.length;Ie<Ke;++Ie)Ut[Ae[Ie].identifier]=null;var Re=Oe(),Tn=Date.now();if(1===Re.length)Tn-Y<500&&(pt(At,kn=Re[0],Ut[kn.identifier],Math.floor(Math.log(t.k)/Math.LN2)+1),ut()),Y=Tn;else if(Re.length>1){var kn,cn=Re[1],$r=(kn=Re[0])[0]-cn[0],bu=kn[1]-cn[1];ue=$r*$r+bu*bu}}function _n(){var Ae,Ie,Ke,Re,qe=u.touches(At);jr.call(At);for(var Tn=0,kn=qe.length;Tn<kn;++Tn,Re=null)if(Re=Ut[(Ke=qe[Tn]).identifier]){if(Ie)break;Ae=Ke,Ie=Re}if(Re){var cn=(cn=Ke[0]-Ae[0])*cn+(cn=Ke[1]-Ae[1])*cn,$r=ue&&Math.sqrt(cn/ue);Ae=[(Ae[0]+Ke[0])/2,(Ae[1]+Ke[1])/2],Ie=[(Ie[0]+Re[0])/2,(Ie[1]+Re[1])/2],vt($r*le)}Y=null,mt(Ae,Ie),qt(Tt)}function cc(){if(u.event.touches.length){for(var qe=u.event.changedTouches,Ae=0,Ie=qe.length;Ae<Ie;++Ae)delete Ut[qe[Ae].identifier];for(var Ke in Ut)return void Oe()}u.selectAll(De).on(ge,null),Ee.on(c,Gt).on(k,kt),ze(),Vt(Tt)}Fe(),Ft(Tt),Ee.on(c,null).on(k,Fe)}function Lt(){var At=nt.of(this,arguments);y?clearTimeout(y):(jr.call(this),e=K(n=r||u.mouse(this)),Ft(At)),y=setTimeout(function(){y=null,Vt(At)},50),ut(),vt(Math.pow(2,.002*nr())*t.k),mt(n,e),qt(At)}function It(){var At=u.mouse(this),Tt=Math.log(t.k)/Math.LN2;pt(this,At,K(At),u.event.shiftKey?Math.ceil(Tt)-1:Math.floor(Tt)+1)}return Jr||(Jr="onwheel"in x?(nr=function(){return-u.event.deltaY*(u.event.deltaMode?120:1)},"wheel"):"onmousewheel"in x?(nr=function(){return u.event.wheelDelta},"mousewheel"):(nr=function(){return-u.event.detail},"MozMousePixelScroll")),X.event=function(At){At.each(function(){var Tt=nt.of(this,arguments),Ut=t;bn?u.select(this).transition().each("start.zoom",function(){t=this.__chart__||{x:0,y:0,k:1},Ft(Tt)}).tween("zoom:zoom",function(){var ue=i[0],ge=n?n[0]:ue/2,me=n?n[1]:i[1]/2,Se=u.interpolateZoom([(ge-t.x)/t.k,(me-t.y)/t.k,ue/t.k],[(ge-Ut.x)/Ut.k,(me-Ut.y)/Ut.k,ue/Ut.k]);return function(De){var Ee=Se(De),ze=ue/Ee[2];this.__chart__=t={x:ge-Ee[0]*ze,y:me-Ee[1]*ze,k:ze},qt(Tt)}}).each("interrupt.zoom",function(){Vt(Tt)}).each("end.zoom",function(){Vt(Tt)}):(this.__chart__=t,Ft(Tt),qt(Tt),Vt(Tt))})},X.translate=function(At){return arguments.length?(t={x:+At[0],y:+At[1],k:t.k},Nt(),X):[t.x,t.y]},X.scale=function(At){return arguments.length?(t={x:t.x,y:t.y,k:null},vt(+At),Nt(),X):t.k},X.scaleExtent=function(At){return arguments.length?(o=null==At?uo:[+At[0],+At[1]],X):o},X.center=function(At){return arguments.length?(r=At&&[+At[0],+At[1]],X):r},X.size=function(At){return arguments.length?(i=At&&[+At[0],+At[1]],X):i},X.duration=function(At){return arguments.length?(s=+At,X):s},X.x=function(At){return arguments.length?(T=At,L=At.copy(),t={x:0,y:0,k:1},X):T},X.y=function(At){return arguments.length?(et=At,H=At.copy(),t={x:0,y:0,k:1},X):et},u.rebind(X,nt,"on")};var nr,Jr,uo=[0,1/0];function fn(){}function je(t,e,n){return this instanceof je?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof je?new je(t.h,t.s,t.l):po(""+t,vo,je):new je(t,e,n)}u.color=fn,fn.prototype.toString=function(){return this.rgb()+""},u.hsl=je;var ti=je.prototype=new fn;function ei(t,e,n){var r,i;function s(l){return Math.round(255*function o(l){return l>360?l-=360:l<0&&(l+=360),l<60?r+(i-r)*l/60:l<180?i:l<240?r+(i-r)*(240-l)/60:r}(l))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)||e<0?0:e>1?1:e,r=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+e):n+e-n*e),new We(s(t+120),s(t),s(t-120))}function Ye(t,e,n){return this instanceof Ye?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof Ye?new Ye(t.h,t.c,t.l):ho(t instanceof He?t.l:(t=mo((t=u.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Ye(t,e,n)}ti.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new je(this.h,this.s,this.l/t)},ti.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new je(this.h,this.s,t*this.l)},ti.rgb=function(){return ei(this.h,this.s,this.l)},u.hcl=Ye;var ni=Ye.prototype=new fn;function ri(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new He(n,Math.cos(t*=Jt)*e,Math.sin(t)*e)}function He(t,e,n){return this instanceof He?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof He?new He(t.l,t.a,t.b):t instanceof Ye?ri(t.h,t.c,t.l):mo((t=We(t)).r,t.g,t.b):new He(t,e,n)}ni.brighter=function(t){return new Ye(this.h,this.c,Math.min(100,this.l+rr*(arguments.length?t:1)))},ni.darker=function(t){return new Ye(this.h,this.c,Math.max(0,this.l-rr*(arguments.length?t:1)))},ni.rgb=function(){return ri(this.h,this.c,this.l).rgb()},u.lab=He;var rr=18,ii=He.prototype=new fn;function fo(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return new We(ui(3.2404542*(i=.95047*oi(i))-1.5371385*(r=1*oi(r))-.4985314*(o=1.08883*oi(o))),ui(-.969266*i+1.8760108*r+.041556*o),ui(.0556434*i-.2040259*r+1.0572252*o))}function ho(t,e,n){return t>0?new Ye(Math.atan2(n,e)*he,Math.sqrt(e*e+n*n),t):new Ye(NaN,NaN,t)}function oi(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ai(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ui(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function We(t,e,n){return this instanceof We?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof We?new We(t.r,t.g,t.b):po(""+t,We,ei):new We(t,e,n)}function go(t){return new We(t>>16,t>>8&255,255&t)}function ir(t){return go(t)+""}ii.brighter=function(t){return new He(Math.min(100,this.l+rr*(arguments.length?t:1)),this.a,this.b)},ii.darker=function(t){return new He(Math.max(0,this.l-rr*(arguments.length?t:1)),this.a,this.b)},ii.rgb=function(){return fo(this.l,this.a,this.b)},u.rgb=We;var or=We.prototype=new fn;function wn(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function po(t,e,n){var s,l,c,r=0,i=0,o=0;if(s=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(l=s[2].split(","),s[1]){case"hsl":return n(parseFloat(l[0]),parseFloat(l[1])/100,parseFloat(l[2])/100);case"rgb":return e(si(l[0]),si(l[1]),si(l[2]))}return(c=ar.get(t))?e(c.r,c.g,c.b):(null!=t&&"#"===t.charAt(0)&&!isNaN(c=parseInt(t.slice(1),16))&&(4===t.length?(r=(3840&c)>>4,r|=r>>4,i=240&c,i|=i>>4,o=15&c,o|=o<<4):7===t.length&&(r=(16711680&c)>>16,i=(65280&c)>>8,o=255&c)),e(r,i,o))}function vo(t,e,n){var s,l,r=Math.min(t/=255,e/=255,n/=255),i=Math.max(t,e,n),o=i-r,c=(i+r)/2;return o?(l=c<.5?o/(i+r):o/(2-i-r),s=t==i?(e-n)/o+(e<n?6:0):e==i?(n-t)/o+2:(t-e)/o+4,s*=60):(s=NaN,l=c>0&&c<1?0:s),new je(s,l,c)}function mo(t,e,n){var r=ai((.4124564*(t=li(t))+.3575761*(e=li(e))+.1804375*(n=li(n)))/.95047),i=ai((.2126729*t+.7151522*e+.072175*n)/1);return He(116*i-16,500*(r-i),200*(i-ai((.0193339*t+.119192*e+.9503041*n)/1.08883)))}function li(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function si(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}or.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&e<i&&(e=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new We(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new We(i,i,i)},or.darker=function(t){return new We((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},or.hsl=function(){return vo(this.r,this.g,this.b)},or.toString=function(){return"#"+wn(this.r)+wn(this.g)+wn(this.b)};var ar=u.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ve(t){return"function"==typeof t?t:function(){return t}}function ci(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),ur(e,n,t,r)}}function ur(t,e,n,r){var i={},o=u.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,c=null;function d(){var y,g=l.status;if(!g&&function wu(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(l)||g>=200&&g<300||304===g){try{y=n.call(i,l)}catch(k){return void o.error.call(i,k)}o.load.call(i,y)}else o.error.call(i,l)}return this.XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(t)&&(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=d:l.onreadystatechange=function(){l.readyState>3&&d()},l.onprogress=function(g){var y=u.event;u.event=g;try{o.progress.call(i,l)}finally{u.event=y}},i.header=function(g,y){return g=(g+"").toLowerCase(),arguments.length<2?s[g]:(null==y?delete s[g]:s[g]=y+"",i)},i.mimeType=function(g){return arguments.length?(e=null==g?null:g+"",i):e},i.responseType=function(g){return arguments.length?(c=g,i):c},i.response=function(g){return n=g,i},["get","post"].forEach(function(g){i[g]=function(){return i.send.apply(i,[g].concat(m(arguments)))}}),i.send=function(g,y,k){if(2===arguments.length&&"function"==typeof y&&(k=y,y=null),l.open(g,t,!0),null!=e&&!("accept"in s)&&(s.accept=e+",*/*"),l.setRequestHeader)for(var Y in s)l.setRequestHeader(Y,s[Y]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=c&&(l.responseType=c),null!=k&&i.on("error",k).on("load",function(nt){k(null,nt)}),o.beforesend.call(i,l),l.send(null==y?null:y),i},i.abort=function(){return l.abort(),i},u.rebind(i,o,"on"),null==r?i:i.get(function ku(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}(r))}ar.forEach(function(t,e){ar.set(t,go(e))}),u.functor=ve,u.xhr=ci(D),u.dsv=function(t,e){var n=new RegExp('["'+t+"\n]"),r=t.charCodeAt(0);function i(d,g,y){arguments.length<3&&(y=g,g=null);var k=ur(d,e,null==g?o:s(g),y);return k.row=function(Y){return arguments.length?k.response(null==(g=Y)?o:s(Y)):g},k}function o(d){return i.parse(d.responseText)}function s(d){return function(g){return i.parse(g.responseText,d)}}function l(d){return d.map(c).join(t)}function c(d){return n.test(d)?'"'+d.replace(/\"/g,'""')+'"':d}return i.parse=function(d,g){var y;return i.parseRows(d,function(k,Y){if(y)return y(k,Y-1);var nt=new Function("d","return {"+k.map(function(L,T){return JSON.stringify(L)+": d["+T+"]"}).join(",")+"}");y=g?function(L,T){return g(nt(L),T)}:nt})},i.parseRows=function(d,g){var H,et,y={},k={},Y=[],nt=d.length,L=0,T=0;function X(){if(L>=nt)return k;if(et)return et=!1,y;var bt=L;if(34===d.charCodeAt(bt)){for(var vt=bt;vt++<nt;)if(34===d.charCodeAt(vt)){if(34!==d.charCodeAt(vt+1))break;++vt}return L=vt+2,13===(mt=d.charCodeAt(vt+1))?(et=!0,10===d.charCodeAt(vt+2)&&++L):10===mt&&(et=!0),d.slice(bt+1,vt).replace(/""/g,'"')}for(;L<nt;){var mt,pt=1;if(10===(mt=d.charCodeAt(L++)))et=!0;else if(13===mt)et=!0,10===d.charCodeAt(L)&&(++L,++pt);else if(mt!==r)continue;return d.slice(bt,L-pt)}return d.slice(bt)}for(;(H=X())!==k;){for(var K=[];H!==y&&H!==k;)K.push(H),H=X();g&&null==(K=g(K,T++))||Y.push(K)}return Y},i.format=function(d){if(Array.isArray(d[0]))return i.formatRows(d);var g=new _,y=[];return d.forEach(function(k){for(var Y in k)g.has(Y)||y.push(g.add(Y))}),[y.map(c).join(t)].concat(d.map(function(k){return y.map(function(Y){return c(k[Y])}).join(t)})).join("\n")},i.formatRows=function(d){return d.map(l).join("\n")},i},u.csv=u.dsv(",","text/csv"),u.tsv=u.dsv("\t","text/tab-separated-values");var lr,sr,cr,fr,yo=this[dt(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function dr(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var i=n+e,o={c:t,t:i,n:null};return sr?sr.n=o:lr=o,sr=o,cr||(fr=clearTimeout(fr),cr=1,yo(fi)),o}function fi(){var t=xo(),e=bo()-t;e>24?(isFinite(e)&&(clearTimeout(fr),fr=setTimeout(fi,e)),cr=0):(cr=1,yo(fi))}function xo(){for(var t=Date.now(),e=lr;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function bo(){for(var t,e=lr,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:lr=e.n;return sr=t,n}function di(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}u.timer=function(){dr.apply(this,arguments)},u.timer.flush=function(){xo(),bo()},u.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Cu=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(function Au(t,e){var n=Math.pow(10,3*R(8-e));return{scale:e>8?function(r){return r/n}:function(r){return r*n},symbol:t}});function Pu(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,o=r&&n?function(s,l){for(var c=s.length,d=[],g=0,y=r[0],k=0;c>0&&y>0&&(k+y+1>l&&(y=Math.max(1,l-k)),d.push(s.substring(c-=y,c+y)),!((k+=y+1)>l));)y=r[g=(g+1)%r.length];return d.reverse().join(n)}:D;return function(s){var l=Mo.exec(s),c=l[1]||" ",d=l[2]||">",g=l[3]||"-",y=l[4]||"",k=l[5],Y=+l[6],nt=l[7],L=l[8],T=l[9],H=1,et="",X="",K=!1,bt=!0;switch(L&&(L=+L.substring(1)),(k||"0"===c&&"="===d)&&(k=c="0",d="="),T){case"n":nt=!0,T="g";break;case"%":H=100,X="%",T="f";break;case"p":H=100,X="%",T="r";break;case"b":case"o":case"x":case"X":"#"===y&&(et="0"+T.toLowerCase());case"c":bt=!1;case"d":K=!0,L=0;break;case"s":H=-1,T="r"}"$"===y&&(et=i[0],X=i[1]),"r"==T&&!L&&(T="g"),null!=L&&("g"==T?L=Math.max(1,Math.min(21,L)):("e"==T||"f"==T)&&(L=Math.max(0,Math.min(20,L)))),T=Ou.get(T)||Su;var vt=k&&nt;return function(mt){var pt=X;if(K&&mt%1)return"";var Nt=mt<0||0===mt&&1/mt<0?(mt=-mt,"-"):"-"===g?"":g;if(H<0){var Ft=u.formatPrefix(mt,L);mt=Ft.scale(mt),pt=Ft.symbol+X}else mt*=H;var Vt,Gt,qt=(mt=T(mt,L)).lastIndexOf(".");if(qt<0){var kt=bt?mt.lastIndexOf("e"):-1;kt<0?(Vt=mt,Gt=""):(Vt=mt.substring(0,kt),Gt=mt.substring(kt))}else Vt=mt.substring(0,qt),Gt=e+mt.substring(qt+1);!k&&nt&&(Vt=o(Vt,1/0));var Lt=et.length+Vt.length+Gt.length+(vt?0:Nt.length),It=Lt<Y?new Array(Lt=Y-Lt+1).join(c):"";return vt&&(Vt=o(It+Vt,It.length?Y-Gt.length:1/0)),Nt+=et,mt=Vt+Gt,("<"===d?Nt+mt+It:">"===d?It+Nt+mt:"^"===d?It.substring(0,Lt>>=1)+Nt+mt+It.substring(Lt):Nt+(vt?mt:It+mt))+pt}}}u.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=u.round(t,di(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Cu[8+n/3]};var Mo=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ou=u.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=u.round(t,di(t,e))).toFixed(Math.max(0,Math.min(20,di(t*(1+1e-15),e))))}});function Su(t){return t+""}var Kt=u.time={},Pe=Date;function $e(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}$e.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Qe.setUTCDate.apply(this._,arguments)},setDay:function(){Qe.setUTCDay.apply(this._,arguments)},setFullYear:function(){Qe.setUTCFullYear.apply(this._,arguments)},setHours:function(){Qe.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Qe.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Qe.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Qe.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Qe.setUTCSeconds.apply(this._,arguments)},setTime:function(){Qe.setTime.apply(this._,arguments)}};var Qe=Date.prototype;function dn(t,e,n){function r(d){var g=t(d),y=o(g,1);return d-g<y-d?g:y}function i(d){return e(d=t(new Pe(d-1)),1),d}function o(d,g){return e(d=new Pe(+d),g),d}function s(d,g,y){var k=i(d),Y=[];if(y>1)for(;k<g;)n(k)%y||Y.push(new Date(+k)),e(k,1);else for(;k<g;)Y.push(new Date(+k)),e(k,1);return Y}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=s;var c=t.utc=hr(t);return c.floor=c,c.round=hr(r),c.ceil=hr(i),c.offset=hr(o),c.range=function l(d,g,y){try{Pe=$e;var k=new $e;return k._=d,s(k,g,y)}finally{Pe=Date}},t}function hr(t){return function(e,n){try{Pe=$e;var r=new $e;return r._=e,t(r,n)._}finally{Pe=Date}}}function Eu(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,l=t.months,c=t.shortMonths;function d(kt){var Lt=kt.length;function It(At){for(var le,ge,me,Tt=[],Ut=-1,ue=0;++Ut<Lt;)37===kt.charCodeAt(Ut)&&(Tt.push(kt.slice(ue,Ut)),null!=(ge=_o[le=kt.charAt(++Ut)])&&(le=kt.charAt(++Ut)),(me=K[le])&&(le=me(At,null==ge?"e"===le?" ":"0":ge)),Tt.push(le),ue=Ut+1);return Tt.push(kt.slice(ue,Ut)),Tt.join("")}return It.parse=function(At){var Tt={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(g(Tt,kt,At,0)!=At.length)return null;"p"in Tt&&(Tt.H=Tt.H%12+12*Tt.p);var ue=null!=Tt.Z&&Pe!==$e,le=new(ue?$e:Pe);return"j"in Tt?le.setFullYear(Tt.y,0,Tt.j):"W"in Tt||"U"in Tt?("w"in Tt||(Tt.w="W"in Tt?1:0),le.setFullYear(Tt.y,0,1),le.setFullYear(Tt.y,0,"W"in Tt?(Tt.w+6)%7+7*Tt.W-(le.getDay()+5)%7:Tt.w+7*Tt.U-(le.getDay()+6)%7)):le.setFullYear(Tt.y,Tt.m,Tt.d),le.setHours(Tt.H+(Tt.Z/100|0),Tt.M+Tt.Z%100,Tt.S,Tt.L),ue?le._:le},It.toString=function(){return kt},It}function g(kt,Lt,It,At){for(var Tt,Ut,ue,le=0,ge=Lt.length,me=It.length;le<ge;){if(At>=me)return-1;if(37===(Tt=Lt.charCodeAt(le++))){if(ue=Lt.charAt(le++),!(Ut=bt[ue in _o?Lt.charAt(le++):ue])||(At=Ut(kt,It,At))<0)return-1}else if(Tt!=It.charCodeAt(At++))return-1}return At}d.utc=function(kt){var Lt=d(kt);function It(At){try{var Tt=new(Pe=$e);return Tt._=At,Lt(Tt)}finally{Pe=Date}}return It.parse=function(At){try{Pe=$e;var Tt=Lt.parse(At);return Tt&&Tt._}finally{Pe=Date}},It.toString=Lt.toString,It},d.multi=d.utc.multi=Gu;var y=u.map(),k=gr(o),Y=pr(o),nt=gr(s),L=pr(s),T=gr(l),H=pr(l),et=gr(c),X=pr(c);i.forEach(function(kt,Lt){y.set(kt.toLowerCase(),Lt)});var K={a:function(kt){return s[kt.getDay()]},A:function(kt){return o[kt.getDay()]},b:function(kt){return c[kt.getMonth()]},B:function(kt){return l[kt.getMonth()]},c:d(e),d:function(kt,Lt){return Le(kt.getDate(),Lt,2)},e:function(kt,Lt){return Le(kt.getDate(),Lt,2)},H:function(kt,Lt){return Le(kt.getHours(),Lt,2)},I:function(kt,Lt){return Le(kt.getHours()%12||12,Lt,2)},j:function(kt,Lt){return Le(1+Kt.dayOfYear(kt),Lt,3)},L:function(kt,Lt){return Le(kt.getMilliseconds(),Lt,3)},m:function(kt,Lt){return Le(kt.getMonth()+1,Lt,2)},M:function(kt,Lt){return Le(kt.getMinutes(),Lt,2)},p:function(kt){return i[+(kt.getHours()>=12)]},S:function(kt,Lt){return Le(kt.getSeconds(),Lt,2)},U:function(kt,Lt){return Le(Kt.sundayOfYear(kt),Lt,2)},w:function(kt){return kt.getDay()},W:function(kt,Lt){return Le(Kt.mondayOfYear(kt),Lt,2)},x:d(n),X:d(r),y:function(kt,Lt){return Le(kt.getFullYear()%100,Lt,2)},Y:function(kt,Lt){return Le(kt.getFullYear()%1e4,Lt,4)},Z:Vu,"%":function(){return"%"}},bt={a:function vt(kt,Lt,It){nt.lastIndex=0;var At=nt.exec(Lt.slice(It));return At?(kt.w=L.get(At[0].toLowerCase()),It+At[0].length):-1},A:function mt(kt,Lt,It){k.lastIndex=0;var At=k.exec(Lt.slice(It));return At?(kt.w=Y.get(At[0].toLowerCase()),It+At[0].length):-1},b:function pt(kt,Lt,It){et.lastIndex=0;var At=et.exec(Lt.slice(It));return At?(kt.m=X.get(At[0].toLowerCase()),It+At[0].length):-1},B:function Nt(kt,Lt,It){T.lastIndex=0;var At=T.exec(Lt.slice(It));return At?(kt.m=H.get(At[0].toLowerCase()),It+At[0].length):-1},c:function Ft(kt,Lt,It){return g(kt,K.c.toString(),Lt,It)},d:wo,e:wo,H:Co,I:Co,j:Iu,L:Hu,m:Bu,M:Ru,p:function Gt(kt,Lt,It){var At=y.get(Lt.slice(It,It+=2).toLowerCase());return null==At?-1:(kt.p=At,It)},S:Yu,U:Lu,w:Nu,W:Du,x:function qt(kt,Lt,It){return g(kt,K.x.toString(),Lt,It)},X:function Vt(kt,Lt,It){return g(kt,K.X.toString(),Lt,It)},y:zu,Y:Wu,Z:Fu,"%":Xu};return d}Kt.year=dn(function(t){return(t=Kt.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Kt.years=Kt.year.range,Kt.years.utc=Kt.year.utc.range,Kt.day=dn(function(t){var e=new Pe(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Kt.days=Kt.day.range,Kt.days.utc=Kt.day.utc.range,Kt.dayOfYear=function(t){var e=Kt.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=Kt[t]=dn(function(r){return(r=Kt.day(r)).setDate(r.getDate()-(r.getDay()+e)%7),r},function(r,i){r.setDate(r.getDate()+7*Math.floor(i))},function(r){var i=Kt.year(r).getDay();return Math.floor((Kt.dayOfYear(r)+(i+e)%7)/7)-(i!==e)});Kt[t+"s"]=n.range,Kt[t+"s"].utc=n.utc.range,Kt[t+"OfYear"]=function(r){var i=Kt.year(r).getDay();return Math.floor((Kt.dayOfYear(r)+(i+e)%7)/7)}}),Kt.week=Kt.sunday,Kt.weeks=Kt.sunday.range,Kt.weeks.utc=Kt.sunday.utc.range,Kt.weekOfYear=Kt.sundayOfYear;var _o={"-":"",_:" ",0:"0"},Me=/^\s*\d+/,ko=/^%/;function Le(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function gr(t){return new RegExp("^(?:"+t.map(u.requote).join("|")+")","i")}function pr(t){for(var e=new A,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Nu(t,e,n){Me.lastIndex=0;var r=Me.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Lu(t,e,n){Me.lastIndex=0;var r=Me.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Du(t,e,n){Me.lastIndex=0;var r=Me.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Wu(t,e,n){Me.lastIndex=0;var r=Me.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function zu(t,e,n){Me.lastIndex=0;var r=Me.exec(e.slice(n,n+2));return r?(t.y=function Tu(t){return t+(t>68?1900:2e3)}(+r[0]),n+r[0].length):-1}function Fu(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Bu(t,e,n){Me.lastIndex=0;var r=Me.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function wo(t,e,n){Me.lastIndex=0;var r=Me.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Iu(t,e,n){Me.lastIndex=0;var r=Me.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function Co(t,e,n){Me.lastIndex=0;var r=Me.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Ru(t,e,n){Me.lastIndex=0;var r=Me.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Yu(t,e,n){Me.lastIndex=0;var r=Me.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Hu(t,e,n){Me.lastIndex=0;var r=Me.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Vu(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=R(e)/60|0,i=R(e)%60;return n+Le(r,"0",2)+Le(i,"0",2)}function Xu(t,e,n){ko.lastIndex=0;var r=ko.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Gu(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(r){for(var i=0,o=t[i];!o[1](r);)o=t[++i];return o[0](r)}}u.locale=function(t){return{numberFormat:Pu(t),timeFormat:Eu(t)}};var Ao=u.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function hi(){}u.format=Ao.numberFormat,u.geo={},hi.prototype={s:0,t:0,add:function(t){Po(t,this.t,vr),Po(vr.s,this.s,this),this.s?this.t+=vr.t:this.s=vr.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var vr=new hi;function Po(t,e,n){var r=n.s=t+e,i=r-t;n.t=t-(r-i)+(e-i)}function mr(t,e){t&&So.hasOwnProperty(t.type)&&So[t.type](t,e)}u.geo.stream=function(t,e){t&&Oo.hasOwnProperty(t.type)?Oo[t.type](t,e):mr(t,e)};var Oo={Feature:function(t,e){mr(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)mr(n[r].geometry,e)}},So={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)e.point((t=n[r])[0],t[1],t[2])},LineString:function(t,e){gi(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)gi(n[r],e,0)},Polygon:function(t,e){Eo(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Eo(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)mr(n[r],e)}};function gi(t,e,n){var o,r=-1,i=t.length-n;for(e.lineStart();++r<i;)e.point((o=t[r])[0],o[1],o[2]);e.lineEnd()}function Eo(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)gi(t[n],e,1);e.polygonEnd()}u.geo.area=function(t){return yr=0,u.geo.stream(t,Te),yr};var yr,hn=new hi,Te={sphere:function(){yr+=4*Bt},point:h,lineStart:h,lineEnd:h,polygonStart:function(){hn.reset(),Te.lineStart=qu},polygonEnd:function(){var t=2*hn;yr+=t<0?4*Bt+t:t,Te.lineStart=Te.lineEnd=Te.point=h}};function qu(){var t,e,n,r,i;function o(s,l){l=l*Jt/2+Bt/4;var c=(s*=Jt)-n,d=c>=0?1:-1,g=d*c,y=Math.cos(l),k=Math.sin(l),Y=i*k,nt=r*y+Y*Math.cos(g),L=Y*d*Math.sin(g);hn.add(Math.atan2(L,nt)),n=s,r=y,i=k}Te.point=function(s,l){Te.point=o,n=(t=s)*Jt,r=Math.cos(l=(e=l)*Jt/2+Bt/4),i=Math.sin(l)},Te.lineEnd=function(){o(t,e)}}function gn(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function xr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Cn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function pi(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function br(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Mr(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function _r(t){return[Math.atan2(t[1],t[0]),nn(t[2])]}function kr(t,e){return R(t[0]-e[0])<Ht&&R(t[1]-e[1])<Ht}u.geo.bounds=function(){var t,e,n,r,i,o,s,l,c,d,g,y={point:k,lineStart:nt,lineEnd:L,polygonStart:function(){y.point=T,y.lineStart=H,y.lineEnd=et,c=0,Te.polygonStart()},polygonEnd:function(){Te.polygonEnd(),y.point=k,y.lineStart=nt,y.lineEnd=L,hn<0?(t=-(n=180),e=-(r=90)):c>Ht?r=90:c<-Ht&&(e=-90),g[0]=t,g[1]=n}};function k(vt,mt){d.push(g=[t=vt,n=vt]),mt<e&&(e=mt),mt>r&&(r=mt)}function Y(vt,mt){var pt=gn([vt*Jt,mt*Jt]);if(l){var Nt=Cn(l,pt),qt=Cn([Nt[1],-Nt[0],0],Nt);Mr(qt),qt=_r(qt);var Vt=vt-i,Gt=Vt>0?1:-1,kt=qt[0]*he*Gt,Lt=R(Vt)>180;if(Lt^(Gt*i<kt&&kt<Gt*vt))(It=qt[1]*he)>r&&(r=It);else if(Lt^(Gt*i<(kt=(kt+360)%360-180)&&kt<Gt*vt)){var It;(It=-qt[1]*he)<e&&(e=It)}else mt<e&&(e=mt),mt>r&&(r=mt);Lt?vt<i?X(t,vt)>X(t,n)&&(n=vt):X(vt,n)>X(t,n)&&(t=vt):n>=t?(vt<t&&(t=vt),vt>n&&(n=vt)):vt>i?X(t,vt)>X(t,n)&&(n=vt):X(vt,n)>X(t,n)&&(t=vt)}else k(vt,mt);l=pt,i=vt}function nt(){y.point=Y}function L(){g[0]=t,g[1]=n,y.point=k,l=null}function T(vt,mt){if(l){var pt=vt-i;c+=R(pt)>180?pt+(pt>0?360:-360):pt}else o=vt,s=mt;Te.point(vt,mt),Y(vt,mt)}function H(){Te.lineStart()}function et(){T(o,s),Te.lineEnd(),R(c)>Ht&&(t=-(n=180)),g[0]=t,g[1]=n,l=null}function X(vt,mt){return(mt-=vt)<0?mt+360:mt}function K(vt,mt){return vt[0]-mt[0]}function bt(vt,mt){return mt[0]<=mt[1]?mt[0]<=vt&&vt<=mt[1]:vt<mt[0]||mt[1]<vt}return function(vt){if(r=n=-(t=e=1/0),d=[],u.geo.stream(vt,y),mt=d.length){d.sort(K);for(var pt=1,qt=[Nt=d[0]];pt<mt;++pt)bt((Ft=d[pt])[0],Nt)||bt(Ft[1],Nt)?(X(Nt[0],Ft[1])>X(Nt[0],Nt[1])&&(Nt[1]=Ft[1]),X(Ft[0],Nt[1])>X(Nt[0],Nt[1])&&(Nt[0]=Ft[0])):qt.push(Nt=Ft);for(var Gt,mt,Ft,Vt=-1/0,Nt=(pt=0,qt[mt=qt.length-1]);pt<=mt;Nt=Ft,++pt)(Gt=X(Nt[1],(Ft=qt[pt])[0]))>Vt&&(Vt=Gt,t=Ft[0],n=Nt[1])}return d=g=null,t===1/0||e===1/0?[[NaN,NaN],[NaN,NaN]]:[[t,e],[n,r]]}}(),u.geo.centroid=function(t){Rn=wr=pn=vn=Je=rn=on=Ue=An=Pn=an=0,u.geo.stream(t,Ve);var e=An,n=Pn,r=an,i=e*e+n*n+r*r;return i<se&&(e=rn,n=on,r=Ue,wr<Ht&&(e=pn,n=vn,r=Je),(i=e*e+n*n+r*r)<se)?[NaN,NaN]:[Math.atan2(n,e)*he,nn(r/Math.sqrt(i))*he]};var Rn,wr,pn,vn,Je,rn,on,Ue,An,Pn,an,Ve={sphere:h,point:vi,lineStart:No,lineEnd:Lo,polygonStart:function(){Ve.lineStart=ju},polygonEnd:function(){Ve.lineStart=No}};function vi(t,e){t*=Jt;var n=Math.cos(e*=Jt);Yn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Yn(t,e,n){++Rn,pn+=(t-pn)/Rn,vn+=(e-vn)/Rn,Je+=(n-Je)/Rn}function No(){var t,e,n;function r(i,o){i*=Jt;var s=Math.cos(o*=Jt),l=s*Math.cos(i),c=s*Math.sin(i),d=Math.sin(o),g=Math.atan2(Math.sqrt((g=e*d-n*c)*g+(g=n*l-t*d)*g+(g=t*c-e*l)*g),t*l+e*c+n*d);wr+=g,rn+=g*(t+(t=l)),on+=g*(e+(e=c)),Ue+=g*(n+(n=d)),Yn(t,e,n)}Ve.point=function(i,o){i*=Jt;var s=Math.cos(o*=Jt);t=s*Math.cos(i),e=s*Math.sin(i),n=Math.sin(o),Ve.point=r,Yn(t,e,n)}}function Lo(){Ve.point=vi}function ju(){var t,e,n,r,i;function o(s,l){s*=Jt;var c=Math.cos(l*=Jt),d=c*Math.cos(s),g=c*Math.sin(s),y=Math.sin(l),k=r*y-i*g,Y=i*d-n*y,nt=n*g-r*d,L=Math.sqrt(k*k+Y*Y+nt*nt),T=n*d+r*g+i*y,H=L&&-er(T)/L,et=Math.atan2(L,T);An+=H*k,Pn+=H*Y,an+=H*nt,wr+=et,rn+=et*(n+(n=d)),on+=et*(r+(r=g)),Ue+=et*(i+(i=y)),Yn(n,r,i)}Ve.point=function(s,l){t=s,e=l,Ve.point=o,s*=Jt;var c=Math.cos(l*=Jt);n=c*Math.cos(s),r=c*Math.sin(s),i=Math.sin(l),Yn(n,r,i)},Ve.lineEnd=function(){o(t,e),Ve.lineEnd=Lo,Ve.point=vi}}function Do(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return(r=e.invert(r,i))&&t.invert(r[0],r[1])}),n}function Hn(){return!0}function Wo(t,e,n,r,i){var o=[],s=[];if(t.forEach(function(L){if(!((T=L.length-1)<=0)){var T,H=L[0],et=L[T];if(kr(H,et)){i.lineStart();for(var X=0;X<T;++X)i.point((H=L[X])[0],H[1]);return void i.lineEnd()}var K=new Cr(H,L,null,!0),bt=new Cr(H,null,K,!1);K.o=bt,o.push(K),s.push(bt),K=new Cr(et,L,null,!1),bt=new Cr(et,null,K,!0),K.o=bt,o.push(K),s.push(bt)}}),s.sort(e),zo(o),zo(s),o.length){for(var l=0,c=n,d=s.length;l<d;++l)s[l].e=c=!c;for(var y,k,g=o[0];;){for(var Y=g,nt=!0;Y.v;)if((Y=Y.n)===g)return;y=Y.z,i.lineStart();do{if(Y.v=Y.o.v=!0,Y.e){if(nt)for(l=0,d=y.length;l<d;++l)i.point((k=y[l])[0],k[1]);else r(Y.x,Y.n.x,1,i);Y=Y.n}else{if(nt)for(l=(y=Y.p.z).length-1;l>=0;--l)i.point((k=y[l])[0],k[1]);else r(Y.x,Y.p.x,-1,i);Y=Y.p}y=(Y=Y.o).z,nt=!nt}while(!Y.v);i.lineEnd()}}}function zo(t){if(e=t.length){for(var e,i,n=0,r=t[0];++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function Cr(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Fo(t,e,n,r){return function(i,o){var s=e(o),l=i.invert(r[0],r[1]),c={point:d,lineStart:y,lineEnd:k,polygonStart:function(){c.point=X,c.lineStart=K,c.lineEnd=bt,Y=[],H=[]},polygonEnd:function(){c.point=d,c.lineStart=y,c.lineEnd=k,Y=u.merge(Y);var vt=function Ju(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],o=0,s=0;hn.reset();for(var l=0,c=e.length;l<c;++l){var d=e[l],g=d.length;if(g)for(var y=d[0],k=y[0],Y=y[1]/2+Bt/4,nt=Math.sin(Y),L=Math.cos(Y),T=1;;){T===g&&(T=0);var H=(t=d[T])[0],et=t[1]/2+Bt/4,X=Math.sin(et),K=Math.cos(et),bt=H-k,vt=bt>=0?1:-1,mt=vt*bt,pt=mt>Bt,Nt=nt*X;if(hn.add(Math.atan2(Nt*vt*Math.sin(mt),L*K+Nt*Math.cos(mt))),o+=pt?bt+vt*Zt:bt,pt^k>=n^H>=n){var Ft=Cn(gn(y),gn(t));Mr(Ft);var qt=Cn(i,Ft);Mr(qt);var Vt=(pt^bt>=0?-1:1)*nn(qt[2]);(r>Vt||r===Vt&&(Ft[0]||Ft[1]))&&(s+=pt^bt>=0?1:-1)}if(!T++)break;k=H,nt=X,L=K,y=t}}return(o<-Ht||o<Ht&&hn<-Ht)^1&s}(l,H);Y.length?(T||(o.polygonStart(),T=!0),Wo(Y,Zu,vt,n,o)):vt&&(T||(o.polygonStart(),T=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),T&&(o.polygonEnd(),T=!1),Y=H=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function d(vt,mt){var pt=i(vt,mt);t(vt=pt[0],mt=pt[1])&&o.point(vt,mt)}function g(vt,mt){var pt=i(vt,mt);s.point(pt[0],pt[1])}function y(){c.point=g,s.lineStart()}function k(){c.point=d,s.lineEnd()}var Y,H,et,nt=To(),L=e(nt),T=!1;function X(vt,mt){et.push([vt,mt]);var pt=i(vt,mt);L.point(pt[0],pt[1])}function K(){L.lineStart(),et=[]}function bt(){X(et[0][0],et[0][1]),L.lineEnd();var pt,vt=L.clean(),mt=nt.buffer(),Nt=mt.length;if(et.pop(),H.push(et),et=null,Nt){if(1&vt){var qt,Ft=-1;if((Nt=(pt=mt[0]).length-1)>0){for(T||(o.polygonStart(),T=!0),o.lineStart();++Ft<Nt;)o.point((qt=pt[Ft])[0],qt[1]);o.lineEnd()}return}Nt>1&&2&vt&&mt.push(mt.pop().concat(mt.shift())),Y.push(mt.filter(Uu))}}return c}}function Uu(t){return t.length>1}function To(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(n,r){e.push([n,r])},lineEnd:h,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Zu(t,e){return((t=t.x)[0]<0?t[1]-ae-Ht:ae-t[1])-((e=e.x)[0]<0?e[1]-ae-Ht:ae-e[1])}var Bo=Fo(Hn,function Ku(t){var i,e=NaN,n=NaN,r=NaN;return{lineStart:function(){t.lineStart(),i=1},point:function(o,s){var l=o>0?Bt:-Bt,c=R(o-e);R(c-Bt)<Ht?(t.point(e,n=(n+s)/2>0?ae:-ae),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(l,n),t.point(o,n),i=0):r!==l&&c>=Bt&&(R(e-r)<Ht&&(e-=r*Ht),R(o-l)<Ht&&(o-=l*Ht),n=function $u(t,e,n,r){var i,o,s=Math.sin(t-n);return R(s)>Ht?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*o*s)):(e+r)/2}(e,n,o,s),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(l,n),i=0),t.point(e=o,n=s),r=l},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}},function Qu(t,e,n,r){var i;if(null==t)r.point(-Bt,i=n*ae),r.point(0,i),r.point(Bt,i),r.point(Bt,0),r.point(Bt,-i),r.point(0,-i),r.point(-Bt,-i),r.point(-Bt,0),r.point(-Bt,i);else if(R(t[0]-e[0])>Ht){var o=t[0]<e[0]?Bt:-Bt;r.point(-o,i=n*o/2),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-Bt,-Bt/2]);function tl(t){var e=Math.cos(t),n=e>0,r=R(e)>Ht;return Fo(o,function s(d){var g,y,k,Y,nt;return{lineStart:function(){Y=k=!1,nt=1},point:function(L,T){var et,H=[L,T],X=o(L,T),K=n?X?0:c(L,T):X?c(L+(L<0?Bt:-Bt),T):0;if(!g&&(Y=k=X)&&d.lineStart(),X!==k&&(et=l(g,H),(kr(g,et)||kr(H,et))&&(H[0]+=Ht,H[1]+=Ht,X=o(H[0],H[1]))),X!==k)nt=0,X?(d.lineStart(),et=l(H,g),d.point(et[0],et[1])):(et=l(g,H),d.point(et[0],et[1]),d.lineEnd()),g=et;else if(r&&g&&n^X){var bt;!(K&y)&&(bt=l(H,g,!0))&&(nt=0,n?(d.lineStart(),d.point(bt[0][0],bt[0][1]),d.point(bt[1][0],bt[1][1]),d.lineEnd()):(d.point(bt[1][0],bt[1][1]),d.lineEnd(),d.lineStart(),d.point(bt[0][0],bt[0][1])))}X&&(!g||!kr(g,H))&&d.point(H[0],H[1]),g=H,k=X,y=K},lineEnd:function(){k&&d.lineEnd(),g=null},clean:function(){return nt|(Y&&k)<<1}}},_i(t,6*Jt),n?[0,-t]:[-Bt,t-Bt]);function o(d,g){return Math.cos(d)*Math.cos(g)>e}function l(d,g,y){var nt=[1,0,0],L=Cn(gn(d),gn(g)),T=xr(L,L),H=L[0],et=T-H*H;if(!et)return!y&&d;var X=e*T/et,K=-e*H/et,bt=Cn(nt,L),vt=br(nt,X);pi(vt,br(L,K));var pt=bt,Nt=xr(vt,pt),Ft=xr(pt,pt),qt=Nt*Nt-Ft*(xr(vt,vt)-1);if(!(qt<0)){var Vt=Math.sqrt(qt),Gt=br(pt,(-Nt-Vt)/Ft);if(pi(Gt,vt),Gt=_r(Gt),!y)return Gt;var Tt,kt=d[0],Lt=g[0],It=d[1],At=g[1];Lt<kt&&(Tt=kt,kt=Lt,Lt=Tt);var Ut=Lt-kt,ue=R(Ut-Bt)<Ht;if(!ue&&At<It&&(Tt=It,It=At,At=Tt),ue||Ut<Ht?ue?It+At>0^Gt[1]<(R(Gt[0]-kt)<Ht?It:At):It<=Gt[1]&&Gt[1]<=At:Ut>Bt^(kt<=Gt[0]&&Gt[0]<=Lt)){var ge=br(pt,(-Nt+Vt)/Ft);return pi(ge,vt),[Gt,_r(ge)]}}}function c(d,g){var y=n?t:Bt-t,k=0;return d<-y?k|=1:d>y&&(k|=2),g<-y?k|=4:g>y&&(k|=8),k}}function Io(t,e,n,r){return function(i){var L,o=i.a,s=i.b,l=o.x,c=o.y,y=0,k=1,Y=s.x-l,nt=s.y-c;if(L=t-l,Y||!(L>0)){if(L/=Y,Y<0){if(L<y)return;L<k&&(k=L)}else if(Y>0){if(L>k)return;L>y&&(y=L)}if(L=n-l,Y||!(L<0)){if(L/=Y,Y<0){if(L>k)return;L>y&&(y=L)}else if(Y>0){if(L<y)return;L<k&&(k=L)}if(L=e-c,nt||!(L>0)){if(L/=nt,nt<0){if(L<y)return;L<k&&(k=L)}else if(nt>0){if(L>k)return;L>y&&(y=L)}if(L=r-c,nt||!(L<0)){if(L/=nt,nt<0){if(L>k)return;L>y&&(y=L)}else if(nt>0){if(L<y)return;L<k&&(k=L)}return y>0&&(i.a={x:l+y*Y,y:c+y*nt}),k<1&&(i.b={x:l+k*Y,y:c+k*nt}),i}}}}}}var Ar=1e9;function Ro(t,e,n,r){return function(l){var y,k,Y,X,K,bt,vt,mt,pt,Nt,Ft,c=l,d=To(),g=Io(t,e,n,r),nt={point:et,lineStart:function qt(){nt.point=Gt,k&&k.push(Y=[]),Nt=!0,pt=!1,vt=mt=NaN},lineEnd:function Vt(){y&&(Gt(X,K),bt&&pt&&d.rejoin(),y.push(d.buffer())),nt.point=et,pt&&l.lineEnd()},polygonStart:function(){l=d,y=[],k=[],Ft=!0},polygonEnd:function(){l=c,y=u.merge(y);var kt=function L(kt){for(var Lt=0,It=k.length,At=kt[1],Tt=0;Tt<It;++Tt)for(var me,Ut=1,ue=k[Tt],le=ue.length,ge=ue[0];Ut<le;++Ut)me=ue[Ut],ge[1]<=At?me[1]>At&&Bn(ge,me,kt)>0&&++Lt:me[1]<=At&&Bn(ge,me,kt)<0&&--Lt,ge=me;return 0!==Lt}([t,r]),Lt=Ft&&kt,It=y.length;(Lt||It)&&(l.polygonStart(),Lt&&(l.lineStart(),T(null,null,1,l),l.lineEnd()),It&&Wo(y,o,kt,T,l),l.polygonEnd()),y=k=Y=null}};function T(kt,Lt,It,At){var Tt=0,Ut=0;if(null==kt||(Tt=i(kt,It))!==(Ut=i(Lt,It))||s(kt,Lt)<0^It>0)do{At.point(0===Tt||3===Tt?t:n,Tt>1?r:e)}while((Tt=(Tt+It+4)%4)!==Ut);else At.point(Lt[0],Lt[1])}function H(kt,Lt){return t<=kt&&kt<=n&&e<=Lt&&Lt<=r}function et(kt,Lt){H(kt,Lt)&&l.point(kt,Lt)}function Gt(kt,Lt){var It=H(kt=Math.max(-Ar,Math.min(Ar,kt)),Lt=Math.max(-Ar,Math.min(Ar,Lt)));if(k&&Y.push([kt,Lt]),Nt)X=kt,K=Lt,bt=It,Nt=!1,It&&(l.lineStart(),l.point(kt,Lt));else if(It&&pt)l.point(kt,Lt);else{var At={a:{x:vt,y:mt},b:{x:kt,y:Lt}};g(At)?(pt||(l.lineStart(),l.point(At.a.x,At.a.y)),l.point(At.b.x,At.b.y),It||l.lineEnd(),Ft=!1):It&&(l.lineStart(),l.point(kt,Lt),Ft=!1)}vt=kt,mt=Lt,pt=It}return nt};function i(l,c){return R(l[0]-t)<Ht?c>0?0:3:R(l[0]-n)<Ht?c>0?2:1:R(l[1]-e)<Ht?c>0?1:0:c>0?3:2}function o(l,c){return s(l.x,c.x)}function s(l,c){var d=i(l,1),g=i(c,1);return d!==g?d-g:0===d?c[1]-l[1]:1===d?l[0]-c[0]:2===d?l[1]-c[1]:c[0]-l[0]}}function mi(t){var e=0,n=Bt/3,r=bi(t),i=r(e,n);return i.parallels=function(o){return arguments.length?r(e=o[0]*Bt/180,n=o[1]*Bt/180):[e/Bt*180,n/Bt*180]},i}function Yo(t,e){var n=Math.sin(t),r=(n+Math.sin(e))/2,i=1+n*(2*r-n),o=Math.sqrt(i)/r;function s(l,c){var d=Math.sqrt(i-2*r*Math.sin(c))/r;return[d*Math.sin(l*=r),o-d*Math.cos(l)]}return s.invert=function(l,c){var d=o-c;return[Math.atan2(l,d)/r,nn((i-(l*l+d*d)*r*r)/(2*r))]},s}u.geo.clipExtent=function(){var t,e,n,r,i,o,s={stream:function(l){return i&&(i.valid=!1),(i=o(l)).valid=!0,i},extent:function(l){return arguments.length?(o=Ro(t=+l[0][0],e=+l[0][1],n=+l[1][0],r=+l[1][1]),i&&(i.valid=!1,i=null),s):[[t,e],[n,r]]}};return s.extent([[0,0],[960,500]])},(u.geo.conicEqualArea=function(){return mi(Yo)}).raw=Yo,u.geo.albers=function(){return u.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},u.geo.albersUsa=function(){var r,o,s,l,t=u.geo.albers(),e=u.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),n=u.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i={point:function(d,g){r=[d,g]}};function c(d){var g=d[0],y=d[1];return r=null,o(g,y),r||(s(g,y),r)||l(g,y),r}return c.invert=function(d){var g=t.scale(),y=t.translate(),k=(d[0]-y[0])/g,Y=(d[1]-y[1])/g;return(Y>=.12&&Y<.234&&k>=-.425&&k<-.214?e:Y>=.166&&Y<.234&&k>=-.214&&k<-.115?n:t).invert(d)},c.stream=function(d){var g=t.stream(d),y=e.stream(d),k=n.stream(d);return{point:function(Y,nt){g.point(Y,nt),y.point(Y,nt),k.point(Y,nt)},sphere:function(){g.sphere(),y.sphere(),k.sphere()},lineStart:function(){g.lineStart(),y.lineStart(),k.lineStart()},lineEnd:function(){g.lineEnd(),y.lineEnd(),k.lineEnd()},polygonStart:function(){g.polygonStart(),y.polygonStart(),k.polygonStart()},polygonEnd:function(){g.polygonEnd(),y.polygonEnd(),k.polygonEnd()}}},c.precision=function(d){return arguments.length?(t.precision(d),e.precision(d),n.precision(d),c):t.precision()},c.scale=function(d){return arguments.length?(t.scale(d),e.scale(.35*d),n.scale(d),c.translate(t.translate())):t.scale()},c.translate=function(d){if(!arguments.length)return t.translate();var g=t.scale(),y=+d[0],k=+d[1];return o=t.translate(d).clipExtent([[y-.455*g,k-.238*g],[y+.455*g,k+.238*g]]).stream(i).point,s=e.translate([y-.307*g,k+.201*g]).clipExtent([[y-.425*g+Ht,k+.12*g+Ht],[y-.214*g-Ht,k+.234*g-Ht]]).stream(i).point,l=n.translate([y-.205*g,k+.212*g]).clipExtent([[y-.214*g+Ht,k+.166*g+Ht],[y-.115*g-Ht,k+.234*g-Ht]]).stream(i).point,c},c.scale(1070)};var yi,xi,un={point:h,lineStart:h,lineEnd:h,polygonStart:function(){xi=0,un.lineStart=el},polygonEnd:function(){un.lineStart=un.lineEnd=un.point=h,yi+=R(xi/2)}};function el(){var t,e,n,r;function i(o,s){xi+=r*o-n*s,n=o,r=s}un.point=function(o,s){un.point=i,t=n=o,e=r=s},un.lineEnd=function(){i(t,e)}}var Pr,Or,Sr,Er,nl={point:function rl(t,e){t<Pr&&(Pr=t),t>Sr&&(Sr=t),e<Or&&(Or=e),e>Er&&(Er=e)},lineStart:h,lineEnd:h,polygonStart:h,polygonEnd:h};function il(){var t=Ho(4.5),e=[],n={point:r,lineStart:function(){n.point=i},lineEnd:s,polygonStart:function(){n.lineEnd=l},polygonEnd:function(){n.lineEnd=s,n.point=r},pointRadius:function(c){return t=Ho(c),n},result:function(){if(e.length){var c=e.join("");return e=[],c}}};function r(c,d){e.push("M",c,",",d,t)}function i(c,d){e.push("M",c,",",d),n.point=o}function o(c,d){e.push("L",c,",",d)}function s(){n.point=r}function l(){e.push("Z")}return n}function Ho(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var Xe={point:mn,lineStart:Vo,lineEnd:Xo,polygonStart:function(){Xe.lineStart=ol},polygonEnd:function(){Xe.point=mn,Xe.lineStart=Vo,Xe.lineEnd=Xo}};function mn(t,e){pn+=t,vn+=e,++Je}function Vo(){var t,e;function n(r,i){var o=r-t,s=i-e,l=Math.sqrt(o*o+s*s);rn+=l*(t+r)/2,on+=l*(e+i)/2,Ue+=l,mn(t=r,e=i)}Xe.point=function(r,i){Xe.point=n,mn(t=r,e=i)}}function Xo(){Xe.point=mn}function ol(){var t,e,n,r;function i(o,s){var l=o-n,c=s-r,d=Math.sqrt(l*l+c*c);rn+=d*(n+o)/2,on+=d*(r+s)/2,Ue+=d,An+=(d=r*o-n*s)*(n+o),Pn+=d*(r+s),an+=3*d,mn(n=o,r=s)}Xe.point=function(o,s){Xe.point=i,mn(t=n=o,e=r=s)},Xe.lineEnd=function(){i(t,e)}}function al(t){var e=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:s,polygonStart:function(){n.lineEnd=l},polygonEnd:function(){n.lineEnd=s,n.point=r},pointRadius:function(c){return e=c,n},result:h};function r(c,d){t.moveTo(c+e,d),t.arc(c,d,e,0,Zt)}function i(c,d){t.moveTo(c,d),n.point=o}function o(c,d){t.lineTo(c,d)}function s(){n.point=r}function l(){t.closePath()}return n}function Go(t){var e=.5,n=Math.cos(30*Jt),r=16;function i(c){return(r?s:o)(c)}function o(c){return jo(c,function(d,g){d=t(d,g),c.point(d[0],d[1])})}function s(c){var d,y,k,Y,nt,L,T,H,et,X,K,bt,vt={point:mt,lineStart:pt,lineEnd:Ft,polygonStart:function(){c.polygonStart(),vt.lineStart=qt},polygonEnd:function(){c.polygonEnd(),vt.lineStart=pt}};function mt(kt,Lt){kt=t(kt,Lt),c.point(kt[0],kt[1])}function pt(){H=NaN,vt.point=Nt,c.lineStart()}function Nt(kt,Lt){var It=gn([kt,Lt]),At=t(kt,Lt);l(H,et,T,X,K,bt,H=At[0],et=At[1],T=kt,X=It[0],K=It[1],bt=It[2],r,c),c.point(H,et)}function Ft(){vt.point=mt,c.lineEnd()}function qt(){pt(),vt.point=Vt,vt.lineEnd=Gt}function Vt(kt,Lt){Nt(d=kt,Lt),y=H,k=et,Y=X,nt=K,L=bt,vt.point=Nt}function Gt(){l(H,et,T,X,K,bt,y,k,d,Y,nt,L,r,c),vt.lineEnd=Ft,Ft()}return vt}function l(c,d,g,y,k,Y,nt,L,T,H,et,X,K,bt){var vt=nt-c,mt=L-d,pt=vt*vt+mt*mt;if(pt>4*e&&K--){var Nt=y+H,Ft=k+et,qt=Y+X,Vt=Math.sqrt(Nt*Nt+Ft*Ft+qt*qt),Gt=Math.asin(qt/=Vt),kt=R(R(qt)-1)<Ht||R(g-T)<Ht?(g+T)/2:Math.atan2(Ft,Nt),Lt=t(kt,Gt),It=Lt[0],At=Lt[1],Tt=It-c,Ut=At-d,ue=mt*Tt-vt*Ut;(ue*ue/pt>e||R((vt*Tt+mt*Ut)/pt-.5)>.3||y*H+k*et+Y*X<n)&&(l(c,d,g,y,k,Y,It,At,kt,Nt/=Vt,Ft/=Vt,qt,K,bt),bt.point(It,At),l(It,At,kt,Nt,Ft,qt,nt,L,T,H,et,X,K,bt))}}return i.precision=function(c){return arguments.length?(r=(e=c*c)>0&&16,i):Math.sqrt(e)},i}function ul(t){var e=Go(function(n,r){return t([n*he,r*he])});return function(n){return Uo(e(n))}}function qo(t){this.stream=t}function jo(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function ln(t){return bi(function(){return t})()}function bi(t){var e,n,r,Y,nt,X,i=Go(function(pt,Nt){return[(pt=e(pt,Nt))[0]*o+Y,nt-pt[1]*o]}),o=150,s=480,l=250,c=0,d=0,g=0,y=0,k=0,L=Bo,T=D,H=null,et=null;function K(pt){return[(pt=r(pt[0]*Jt,pt[1]*Jt))[0]*o+Y,nt-pt[1]*o]}function bt(pt){return(pt=r.invert((pt[0]-Y)/o,(nt-pt[1])/o))&&[pt[0]*he,pt[1]*he]}function vt(){r=Do(n=Mi(g,y,k),e);var pt=e(c,d);return Y=s-pt[0]*o,nt=l+pt[1]*o,mt()}function mt(){return X&&(X.valid=!1,X=null),K}return K.stream=function(pt){return X&&(X.valid=!1),(X=Uo(L(n,i(T(pt))))).valid=!0,X},K.clipAngle=function(pt){return arguments.length?(L=null==pt?(H=pt,Bo):tl((H=+pt)*Jt),mt()):H},K.clipExtent=function(pt){return arguments.length?(et=pt,T=pt?Ro(pt[0][0],pt[0][1],pt[1][0],pt[1][1]):D,mt()):et},K.scale=function(pt){return arguments.length?(o=+pt,vt()):o},K.translate=function(pt){return arguments.length?(s=+pt[0],l=+pt[1],vt()):[s,l]},K.center=function(pt){return arguments.length?(c=pt[0]%360*Jt,d=pt[1]%360*Jt,vt()):[c*he,d*he]},K.rotate=function(pt){return arguments.length?(g=pt[0]%360*Jt,y=pt[1]%360*Jt,k=pt.length>2?pt[2]%360*Jt:0,vt()):[g*he,y*he,k*he]},u.rebind(K,i,"precision"),function(){return e=t.apply(this,arguments),K.invert=e.invert&&bt,vt()}}function Uo(t){return jo(t,function(e,n){t.point(e*Jt,n*Jt)})}function Vn(t,e){return[t,e]}function Zo(t,e){return[t>Bt?t-Zt:t<-Bt?t+Zt:t,e]}function Mi(t,e,n){return t?e||n?Do($o(t),Qo(e,n)):$o(t):e||n?Qo(e,n):Zo}function Ko(t){return function(e,n){return[(e+=t)>Bt?e-Zt:e<-Bt?e+Zt:e,n]}}function $o(t){var e=Ko(t);return e.invert=Ko(-t),e}function Qo(t,e){var n=Math.cos(t),r=Math.sin(t),i=Math.cos(e),o=Math.sin(e);function s(l,c){var d=Math.cos(c),g=Math.cos(l)*d,y=Math.sin(l)*d,k=Math.sin(c),Y=k*n+g*r;return[Math.atan2(y*i-Y*o,g*n-k*r),nn(Y*i+y*o)]}return s.invert=function(l,c){var d=Math.cos(c),g=Math.cos(l)*d,y=Math.sin(l)*d,k=Math.sin(c),Y=k*i-y*o;return[Math.atan2(y*i+k*o,g*n+Y*r),nn(Y*n-g*r)]},s}function _i(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,o,s,l){var c=s*e;null!=i?(i=Jo(n,i),o=Jo(n,o),(s>0?i<o:i>o)&&(i+=s*Zt)):(i=t+s*Zt,o=t-.5*c);for(var d,g=i;s>0?g>o:g<o;g-=c)l.point((d=_r([n,-r*Math.cos(g),-r*Math.sin(g)]))[0],d[1])}}function Jo(t,e){var n=gn(e);n[0]-=t,Mr(n);var r=er(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Ht)%(2*Math.PI)}function ta(t,e,n){var r=u.range(t,e-Ht,n).concat(e);return function(i){return r.map(function(o){return[i,o]})}}function ea(t,e,n){var r=u.range(t,e-Ht,n).concat(e);return function(i){return r.map(function(o){return[o,i]})}}function ki(t){return t.source}function wi(t){return t.target}u.geo.path=function(){var e,n,r,i,o,t=4.5;function s(c){return c&&("function"==typeof t&&i.pointRadius(+t.apply(this,arguments)),(!o||!o.valid)&&(o=r(i)),u.geo.stream(c,o)),i.result()}function l(){return o=null,s}return s.area=function(c){return yi=0,u.geo.stream(c,r(un)),yi},s.centroid=function(c){return pn=vn=Je=rn=on=Ue=An=Pn=an=0,u.geo.stream(c,r(Xe)),an?[An/an,Pn/an]:Ue?[rn/Ue,on/Ue]:Je?[pn/Je,vn/Je]:[NaN,NaN]},s.bounds=function(c){return Sr=Er=-(Pr=Or=1/0),u.geo.stream(c,r(nl)),[[Pr,Or],[Sr,Er]]},s.projection=function(c){return arguments.length?(r=(e=c)?c.stream||ul(c):D,l()):e},s.context=function(c){return arguments.length?(i=null==(n=c)?new il:new al(c),"function"!=typeof t&&i.pointRadius(t),l()):n},s.pointRadius=function(c){return arguments.length?(t="function"==typeof c?c:(i.pointRadius(+c),+c),s):t},s.projection(u.geo.albersUsa()).context(null)},u.geo.transform=function(t){return{stream:function(e){var n=new qo(e);for(var r in t)n[r]=t[r];return n}}},qo.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},u.geo.projection=ln,u.geo.projectionMutator=bi,(u.geo.equirectangular=function(){return ln(Vn)}).raw=Vn.invert=Vn,u.geo.rotation=function(t){function e(n){return(n=t(n[0]*Jt,n[1]*Jt))[0]*=he,n[1]*=he,n}return t=Mi(t[0]%360*Jt,t[1]*Jt,t.length>2?t[2]*Jt:0),e.invert=function(n){return(n=t.invert(n[0]*Jt,n[1]*Jt))[0]*=he,n[1]*=he,n},e},Zo.invert=Vn,u.geo.circle=function(){var e,r,t=[0,0],n=6;function i(){var o="function"==typeof t?t.apply(this,arguments):t,s=Mi(-o[0]*Jt,-o[1]*Jt,0).invert,l=[];return r(null,null,1,{point:function(c,d){l.push(c=s(c,d)),c[0]*=he,c[1]*=he}}),{type:"Polygon",coordinates:[l]}}return i.origin=function(o){return arguments.length?(t=o,i):t},i.angle=function(o){return arguments.length?(r=_i((e=+o)*Jt,n*Jt),i):e},i.precision=function(o){return arguments.length?(r=_i(e*Jt,(n=+o)*Jt),i):n},i.angle(90)},u.geo.distance=function(t,e){var y,n=(e[0]-t[0])*Jt,r=t[1]*Jt,i=e[1]*Jt,o=Math.sin(n),s=Math.cos(n),l=Math.sin(r),c=Math.cos(r),d=Math.sin(i),g=Math.cos(i);return Math.atan2(Math.sqrt((y=g*o)*y+(y=c*d-l*g*s)*y),l*d+c*g*s)},u.geo.graticule=function(){var t,e,n,r,i,o,s,l,k,Y,nt,L,c=10,d=c,g=90,y=360,T=2.5;function H(){return{type:"MultiLineString",coordinates:et()}}function et(){return u.range(Math.ceil(r/g)*g,n,g).map(nt).concat(u.range(Math.ceil(l/y)*y,s,y).map(L)).concat(u.range(Math.ceil(e/c)*c,t,c).filter(function(X){return R(X%g)>Ht}).map(k)).concat(u.range(Math.ceil(o/d)*d,i,d).filter(function(X){return R(X%y)>Ht}).map(Y))}return H.lines=function(){return et().map(function(X){return{type:"LineString",coordinates:X}})},H.outline=function(){return{type:"Polygon",coordinates:[nt(r).concat(L(s).slice(1),nt(n).reverse().slice(1),L(l).reverse().slice(1))]}},H.extent=function(X){return arguments.length?H.majorExtent(X).minorExtent(X):H.minorExtent()},H.majorExtent=function(X){return arguments.length?(l=+X[0][1],s=+X[1][1],(r=+X[0][0])>(n=+X[1][0])&&(X=r,r=n,n=X),l>s&&(X=l,l=s,s=X),H.precision(T)):[[r,l],[n,s]]},H.minorExtent=function(X){return arguments.length?(o=+X[0][1],i=+X[1][1],(e=+X[0][0])>(t=+X[1][0])&&(X=e,e=t,t=X),o>i&&(X=o,o=i,i=X),H.precision(T)):[[e,o],[t,i]]},H.step=function(X){return arguments.length?H.majorStep(X).minorStep(X):H.minorStep()},H.majorStep=function(X){return arguments.length?(g=+X[0],y=+X[1],H):[g,y]},H.minorStep=function(X){return arguments.length?(c=+X[0],d=+X[1],H):[c,d]},H.precision=function(X){return arguments.length?(T=+X,k=ta(o,i,90),Y=ea(e,t,T),nt=ta(l,s,90),L=ea(r,n,T),H):T},H.majorExtent([[-180,-90+Ht],[180,90-Ht]]).minorExtent([[-180,-80-Ht],[180,80+Ht]])},u.geo.greatArc=function(){var e,r,t=ki,n=wi;function i(){return{type:"LineString",coordinates:[e||t.apply(this,arguments),r||n.apply(this,arguments)]}}return i.distance=function(){return u.geo.distance(e||t.apply(this,arguments),r||n.apply(this,arguments))},i.source=function(o){return arguments.length?(t=o,e="function"==typeof o?null:o,i):t},i.target=function(o){return arguments.length?(n=o,r="function"==typeof o?null:o,i):n},i.precision=function(){return arguments.length?i:0},i},u.geo.interpolate=function(t,e){return function ll(t,e,n,r){var i=Math.cos(e),o=Math.sin(e),s=Math.cos(r),l=Math.sin(r),c=i*Math.cos(t),d=i*Math.sin(t),g=s*Math.cos(n),y=s*Math.sin(n),k=2*Math.asin(Math.sqrt(oo(r-e)+i*s*oo(n-t))),Y=1/Math.sin(k),nt=k?function(L){var T=Math.sin(L*=k)*Y,H=Math.sin(k-L)*Y,et=H*c+T*g,X=H*d+T*y,K=H*o+T*l;return[Math.atan2(X,et)*he,Math.atan2(K,Math.sqrt(et*et+X*X))*he]}:function(){return[t*he,e*he]};return nt.distance=k,nt}(t[0]*Jt,t[1]*Jt,e[0]*Jt,e[1]*Jt)},u.geo.length=function(t){return Ci=0,u.geo.stream(t,On),Ci};var Ci,On={sphere:h,point:h,lineStart:function sl(){var t,e,n;function r(i,o){var s=Math.sin(o*=Jt),l=Math.cos(o),c=R((i*=Jt)-t),d=Math.cos(c);Ci+=Math.atan2(Math.sqrt((c=l*Math.sin(c))*c+(c=n*s-e*l*d)*c),e*s+n*l*d),t=i,e=s,n=l}On.point=function(i,o){t=i*Jt,e=Math.sin(o*=Jt),n=Math.cos(o),On.point=r},On.lineEnd=function(){On.point=On.lineEnd=h}},lineEnd:h,polygonStart:h,polygonEnd:h};function Xn(t,e){function n(r,i){var o=Math.cos(r),s=Math.cos(i),l=t(o*s);return[l*s*Math.sin(r),l*Math.sin(i)]}return n.invert=function(r,i){var o=Math.sqrt(r*r+i*i),s=e(o),l=Math.sin(s),c=Math.cos(s);return[Math.atan2(r*l,o*c),Math.asin(o&&i*l/o)]},n}var na=Xn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(u.geo.azimuthalEqualArea=function(){return ln(na)}).raw=na;var ra=Xn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},D);function ia(t,e){var n=Math.cos(t),r=function(l){return Math.tan(Bt/4+l/2)},i=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(r(e)/r(t)),o=n*Math.pow(r(t),i)/i;if(!i)return Nr;function s(l,c){o>0?c<-ae+Ht&&(c=-ae+Ht):c>ae-Ht&&(c=ae-Ht);var d=o/Math.pow(r(c),i);return[d*Math.sin(i*l),o-d*Math.cos(i*l)]}return s.invert=function(l,c){var d=o-c,g=tr(i)*Math.sqrt(l*l+d*d);return[Math.atan2(l,d)/i,2*Math.atan(Math.pow(o/g,1/i))-ae]},s}function oa(t,e){var n=Math.cos(t),r=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),i=n/r+t;if(R(r)<Ht)return Vn;function o(s,l){var c=i-l;return[c*Math.sin(r*s),i-c*Math.cos(r*s)]}return o.invert=function(s,l){var c=i-l;return[Math.atan2(s,c)/r,i-tr(r)*Math.sqrt(s*s+c*c)]},o}(u.geo.azimuthalEquidistant=function(){return ln(ra)}).raw=ra,(u.geo.conicConformal=function(){return mi(ia)}).raw=ia,(u.geo.conicEquidistant=function(){return mi(oa)}).raw=oa;var aa=Xn(function(t){return 1/t},Math.atan);function Nr(t,e){return[t,Math.log(Math.tan(Bt/4+e/2))]}function ua(t){var o,e=ln(t),n=e.scale,r=e.translate,i=e.clipExtent;return e.scale=function(){var s=n.apply(e,arguments);return s===e?o?e.clipExtent(null):e:s},e.translate=function(){var s=r.apply(e,arguments);return s===e?o?e.clipExtent(null):e:s},e.clipExtent=function(s){var l=i.apply(e,arguments);if(l===e){if(o=null==s){var c=Bt*n(),d=r();i([[d[0]-c,d[1]-c],[d[0]+c,d[1]+c]])}}else o&&(l=null);return l},e.clipExtent(null)}(u.geo.gnomonic=function(){return ln(aa)}).raw=aa,Nr.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-ae]},(u.geo.mercator=function(){return ua(Nr)}).raw=Nr;var la=Xn(function(){return 1},Math.asin);(u.geo.orthographic=function(){return ln(la)}).raw=la;var sa=Xn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function Ai(t,e){return[Math.log(Math.tan(Bt/4+e/2)),-t]}function Sn(t){return t[0]}function Gn(t){return t[1]}function ca(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;i++){for(;r>1&&Bn(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function cl(t,e){return t[0]-e[0]||t[1]-e[1]}(u.geo.stereographic=function(){return ln(sa)}).raw=sa,Ai.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-ae]},(u.geo.transverseMercator=function(){var t=ua(Ai),e=t.center,n=t.rotate;return t.center=function(r){return r?e([-r[1],r[0]]):[(r=e())[1],-r[0]]},t.rotate=function(r){return r?n([r[0],r[1],r.length>2?r[2]+90:90]):[(r=n())[0],r[1],r[2]-90]},n([0,0,90])}).raw=Ai,u.geom={},u.geom.hull=function(t){var e=Sn,n=Gn;if(arguments.length)return r(t);function r(i){if(i.length<3)return[];var l,o=ve(e),s=ve(n),c=i.length,d=[],g=[];for(l=0;l<c;l++)d.push([+o.call(this,i[l],l),+s.call(this,i[l],l),l]);for(d.sort(cl),l=0;l<c;l++)g.push([d[l][0],-d[l][1]]);var y=ca(d),k=ca(g),Y=k[0]===y[0],nt=k[k.length-1]===y[y.length-1],L=[];for(l=y.length-1;l>=0;--l)L.push(i[d[y[l]][2]]);for(l=+Y;l<k.length-nt;++l)L.push(i[d[k[l]][2]]);return L}return r.x=function(i){return arguments.length?(e=i,r):e},r.y=function(i){return arguments.length?(n=i,r):n},r},u.geom.polygon=function(t){return wt(t,Lr),t};var Lr=u.geom.polygon.prototype=[];function Pi(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Oi(t,e,n,r){var i=t[0],o=n[0],s=e[0]-i,l=r[0]-o,c=t[1],d=n[1],g=e[1]-c,y=r[1]-d,k=(l*(c-d)-y*(i-o))/(y*s-l*g);return[i+k*s,c+k*g]}function fa(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}Lr.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],i=0;++t<e;)i+=(n=r)[1]*(r=this[t])[0]-n[0]*r[1];return.5*i},Lr.centroid=function(t){var o,l,e=-1,n=this.length,r=0,i=0,s=this[n-1];for(arguments.length||(t=-1/(6*this.area()));++e<n;)r+=((o=s)[0]+(s=this[e])[0])*(l=o[0]*s[1]-s[0]*o[1]),i+=(o[1]+s[1])*l;return[r*t,i*t]},Lr.clip=function(t){for(var e,o,s,c,d,g,n=fa(t),r=-1,i=this.length-fa(this),l=this[i-1];++r<i;){for(e=t.slice(),t.length=0,c=this[r],d=e[(s=e.length-n)-1],o=-1;++o<s;)Pi(g=e[o],l,c)?(Pi(d,l,c)||t.push(Oi(d,g,l,c)),t.push(g)):Pi(d,l,c)&&t.push(Oi(d,g,l,c)),d=g;n&&t.push(t[0]),l=c}return t};var En,yn,Nn,Si,qn,da=[],ha=[];function fl(){zr(this),this.edge=this.site=this.circle=null}function ga(t){var e=da.pop()||new fl;return e.site=t,e}function Ei(t){Dn(t),Nn.remove(t),da.push(t),zr(t)}function dl(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},o=t.P,s=t.N,l=[t];Ei(t);for(var c=o;c.circle&&R(n-c.circle.x)<Ht&&R(r-c.circle.cy)<Ht;)o=c.P,l.unshift(c),Ei(c),c=o;l.unshift(c),Dn(c);for(var d=s;d.circle&&R(n-d.circle.x)<Ht&&R(r-d.circle.cy)<Ht;)s=d.N,l.push(d),Ei(d),d=s;l.push(d),Dn(d);var y,g=l.length;for(y=1;y<g;++y)Dr((d=l[y]).edge,(c=l[y-1]).site,d.site,i);(d=l[g-1]).edge=jn((c=l[0]).site,d.site,null,i),Ln(c),Ln(d)}function hl(t){for(var r,i,o,s,e=t.x,n=t.y,l=Nn._;l;)if((o=pa(l,n)-e)>Ht)l=l.L;else{if(!((s=e-gl(l,n))>Ht)){o>-Ht?(r=l.P,i=l):s>-Ht?(r=l,i=l.N):r=i=l;break}if(!l.R){r=l;break}l=l.R}var c=ga(t);if(Nn.insert(r,c),r||i){if(r===i)return Dn(r),i=ga(r.site),Nn.insert(c,i),c.edge=i.edge=jn(r.site,c.site),Ln(r),void Ln(i);if(!i)return void(c.edge=jn(r.site,c.site));Dn(r),Dn(i);var d=r.site,g=d.x,y=d.y,k=t.x-g,Y=t.y-y,nt=i.site,L=nt.x-g,T=nt.y-y,H=2*(k*T-Y*L),et=k*k+Y*Y,X=L*L+T*T,K={x:(T*et-Y*X)/H+g,y:(k*X-L*et)/H+y};Dr(i.edge,d,nt,K),c.edge=jn(d,t,null,K),i.edge=jn(t,nt,null,K),Ln(r),Ln(i)}}function pa(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var l=(n=s.site).x,c=n.y,d=c-e;if(!d)return l;var g=l-r,y=1/o-1/d,k=g/d;return y?(-k+Math.sqrt(k*k-2*y*(g*g/(-2*d)-c+d/2+i-o/2)))/y+r:(r+l)/2}function gl(t,e){var n=t.N;if(n)return pa(n,e);var r=t.site;return r.y===e?r.x:1/0}function va(t){this.site=t,this.edges=[]}function ma(t,e){return e.angle-t.angle}function vl(){zr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ln(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i.x,l=i.y,c=r.x-s,d=r.y-l,g=o.x-s,y=2*(c*(T=o.y-l)-d*g);if(!(y>=-se)){var k=c*c+d*d,Y=g*g+T*T,nt=(T*k-d*Y)/y,L=(c*Y-g*k)/y,T=L+l,H=ha.pop()||new vl;H.arc=t,H.site=i,H.x=nt+s,H.y=T+Math.sqrt(nt*nt+L*L),H.cy=T,t.circle=H;for(var et=null,X=qn._;X;)if(H.y<X.y||H.y===X.y&&H.x<=X.x){if(!X.L){et=X.P;break}X=X.L}else{if(!X.R){et=X;break}X=X.R}qn.insert(et,H),et||(Si=H)}}}}function Dn(t){var e=t.circle;e&&(e.P||(Si=e.N),qn.remove(e),ha.push(e),zr(e),t.circle=null)}function yl(t,e){var n=t.b;if(n)return!0;var T,H,r=t.a,i=e[0][0],o=e[1][0],s=e[0][1],l=e[1][1],c=t.l,d=t.r,g=c.x,y=c.y,k=d.x,Y=d.y,nt=(g+k)/2;if(Y===y){if(nt<i||nt>=o)return;if(g>k){if(r){if(r.y>=l)return}else r={x:nt,y:s};n={x:nt,y:l}}else{if(r){if(r.y<s)return}else r={x:nt,y:l};n={x:nt,y:s}}}else if(H=(y+Y)/2-(T=(g-k)/(Y-y))*nt,T<-1||T>1)if(g>k){if(r){if(r.y>=l)return}else r={x:(s-H)/T,y:s};n={x:(l-H)/T,y:l}}else{if(r){if(r.y<s)return}else r={x:(l-H)/T,y:l};n={x:(s-H)/T,y:s}}else if(y<Y){if(r){if(r.x>=o)return}else r={x:i,y:T*i+H};n={x:o,y:T*o+H}}else{if(r){if(r.x<i)return}else r={x:o,y:T*o+H};n={x:i,y:T*i+H}}return t.a=r,t.b=n,!0}function ya(t,e){this.l=t,this.r=e,this.a=this.b=null}function jn(t,e,n,r){var i=new ya(t,e);return En.push(i),n&&Dr(i,t,e,n),r&&Dr(i,e,t,r),yn[t.i].edges.push(new Wr(i,t,e)),yn[e.i].edges.push(new Wr(i,e,t)),i}function xl(t,e,n){var r=new ya(t,null);return r.a=e,r.b=n,En.push(r),r}function Dr(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function Wr(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Ni(){this._=null}function zr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Un(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Zn(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function xa(t){for(;t.L;)t=t.L;return t}function Li(t,e){var r,i,o,n=t.sort(bl).pop();for(En=[],yn=new Array(t.length),Nn=new Ni,qn=new Ni;;)if(o=Si,n&&(!o||n.y<o.y||n.y===o.y&&n.x<o.x))(n.x!==r||n.y!==i)&&(yn[n.i]=new va(n),hl(n),r=n.x,i=n.y),n=t.pop();else{if(!o)break;dl(o.arc)}e&&(function ml(t){for(var i,e=En,n=Io(t[0][0],t[0][1],t[1][0],t[1][1]),r=e.length;r--;)(!yl(i=e[r],t)||!n(i)||R(i.a.x-i.b.x)<Ht&&R(i.a.y-i.b.y)<Ht)&&(i.a=i.b=null,e.splice(r,1))}(e),function pl(t){for(var o,s,l,c,y,k,Y,nt,L,T,e=t[0][0],n=t[1][0],r=t[0][1],i=t[1][1],d=yn,g=d.length;g--;)if((y=d[g])&&y.prepare())for(nt=(Y=y.edges).length,k=0;k<nt;)l=(T=Y[k].end()).x,c=T.y,s=(L=Y[++k%nt].start()).y,(R(l-(o=L.x))>Ht||R(c-s)>Ht)&&(Y.splice(k,0,new Wr(xl(y.site,T,R(l-e)<Ht&&i-c>Ht?{x:e,y:R(o-e)<Ht?s:i}:R(c-i)<Ht&&n-l>Ht?{x:R(s-i)<Ht?o:n,y:i}:R(l-n)<Ht&&c-r>Ht?{x:n,y:R(o-n)<Ht?s:r}:R(c-r)<Ht&&l-e>Ht?{x:R(s-r)<Ht?o:e,y:r}:null),y.site,null)),++nt)}(e));var s={cells:yn,edges:En};return Nn=qn=En=yn=null,s}function bl(t,e){return e.y-t.y||e.x-t.x}va.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)(!(n=t[e].edge).b||!n.a)&&t.splice(e,1);return t.sort(ma),t.length},Wr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Ni.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=xa(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Un(this,n),n=(t=n).U),n.C=!1,r.C=!0,Zn(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Zn(this,n),n=(t=n).U),n.C=!1,r.C=!0,Un(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,o,s,e=t.U,r=t.L,i=t.R;if(o=r?i?xa(i):r:i,e?e.L===t?e.L=o:e.R=o:this._=o,r&&i?(s=o.C,o.C=t.C,o.L=r,r.U=o,o!==i?(e=o.U,o.U=t.U,e.L=t=o.R,o.R=i,i.U=o):(o.U=e,e=o,t=o.R)):(s=t.C,t=o),t&&(t.U=e),!s){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===e.L){if((n=e.R).C&&(n.C=!1,e.C=!0,Un(this,e),n=e.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,Zn(this,n),n=e.R),n.C=e.C,e.C=n.R.C=!1,Un(this,e),t=this._;break}}else if((n=e.L).C&&(n.C=!1,e.C=!0,Zn(this,e),n=e.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,Un(this,n),n=e.L),n.C=e.C,e.C=n.L.C=!1,Zn(this,e),t=this._;break}n.C=!0,t=e,e=e.U}while(!t.C);t&&(t.C=!1)}}},u.geom.voronoi=function(t){var e=Sn,n=Gn,r=e,i=n,o=Fr;if(t)return s(t);function s(c){var d=new Array(c.length),g=o[0][0],y=o[0][1],k=o[1][0],Y=o[1][1];return Li(l(c),o).cells.forEach(function(nt,L){var T=nt.edges,H=nt.site;(d[L]=T.length?T.map(function(X){var K=X.start();return[K.x,K.y]}):H.x>=g&&H.x<=k&&H.y>=y&&H.y<=Y?[[g,Y],[k,Y],[k,y],[g,y]]:[]).point=c[L]}),d}function l(c){return c.map(function(d,g){return{x:Math.round(r(d,g)/Ht)*Ht,y:Math.round(i(d,g)/Ht)*Ht,i:g}})}return s.links=function(c){return Li(l(c)).edges.filter(function(d){return d.l&&d.r}).map(function(d){return{source:c[d.l.i],target:c[d.r.i]}})},s.triangles=function(c){var d=[];return Li(l(c)).cells.forEach(function(g,y){for(var H,k=g.site,Y=g.edges.sort(ma),nt=-1,L=Y.length,et=Y[L-1].edge,X=et.l===k?et.r:et.l;++nt<L;)H=X,X=(et=Y[nt].edge).l===k?et.r:et.l,y<H.i&&y<X.i&&Ml(k,H,X)<0&&d.push([c[y],c[H.i],c[X.i]])}),d},s.x=function(c){return arguments.length?(r=ve(e=c),s):e},s.y=function(c){return arguments.length?(i=ve(n=c),s):n},s.clipExtent=function(c){return arguments.length?(o=null==c?Fr:c,s):o===Fr?null:o},s.size=function(c){return arguments.length?s.clipExtent(c&&[[0,0],c]):o===Fr?null:o&&o[1]},s};var Fr=[[-1e6,-1e6],[1e6,1e6]];function Ml(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function _l(t){return t.x}function kl(t){return t.y}function Kn(t,e,n,r,i,o){if(!t(e,n,r,i,o)){var s=.5*(n+i),l=.5*(r+o),c=e.nodes;c[0]&&Kn(t,c[0],n,r,s,l),c[1]&&Kn(t,c[1],s,r,i,l),c[2]&&Kn(t,c[2],n,l,s,o),c[3]&&Kn(t,c[3],s,l,i,o)}}function wl(t,e,n,r,i,o,s){var c,l=1/0;return function d(g,y,k,Y,nt){if(!(y>o||k>s||Y<r||nt<i)){if(L=g.point){var L,T=e-g.x,H=n-g.y,et=T*T+H*H;if(et<l){var X=Math.sqrt(l=et);r=e-X,i=n-X,o=e+X,s=n+X,c=L}}for(var K=g.nodes,bt=.5*(y+Y),vt=.5*(k+nt),Nt=(n>=vt)<<1|e>=bt,Ft=Nt+4;Nt<Ft;++Nt)if(g=K[3&Nt])switch(3&Nt){case 0:d(g,y,k,bt,vt);break;case 1:d(g,bt,k,Y,vt);break;case 2:d(g,y,vt,bt,nt);break;case 3:d(g,bt,vt,Y,nt)}}}(t,r,i,o,s),c}function Di(t,e){t=u.rgb(t),e=u.rgb(e);var n=t.r,r=t.g,i=t.b,o=e.r-n,s=e.g-r,l=e.b-i;return function(c){return"#"+wn(Math.round(n+o*c))+wn(Math.round(r+s*c))+wn(Math.round(i+l*c))}}function Ma(t,e){var i,n={},r={};for(i in t)i in e?n[i]=xn(t[i],e[i]):r[i]=t[i];for(i in e)i in t||(r[i]=e[i]);return function(o){for(i in n)r[i]=n[i](o);return r}}function tn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function _a(t,e){var r,i,o,n=Wi.lastIndex=zi.lastIndex=0,s=-1,l=[],c=[];for(t+="",e+="";(r=Wi.exec(t))&&(i=zi.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),l[s]?l[s]+=o:l[++s]=o),(r=r[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,c.push({i:s,x:tn(r,i)})),n=zi.lastIndex;return n<e.length&&(o=e.slice(n),l[s]?l[s]+=o:l[++s]=o),l.length<2?c[0]?(e=c[0].x,function(d){return e(d)+""}):function(){return e}:(e=c.length,function(d){for(var y,g=0;g<e;++g)l[(y=c[g]).i]=y.x(d);return l.join("")})}u.geom.delaunay=function(t){return u.geom.voronoi().triangles(t)},u.geom.quadtree=function(t,e,n,r,i){var l,o=Sn,s=Gn;if(l=arguments.length)return o=_l,s=kl,3===l&&(i=n,r=e,n=e=0),c(t);function c(d){var g,Y,nt,L,T,H,et,X,K,y=ve(o),k=ve(s);if(null!=e)H=e,et=n,X=r,K=i;else if(X=K=-(H=et=1/0),Y=[],nt=[],T=d.length,l)for(L=0;L<T;++L)(g=d[L]).x<H&&(H=g.x),g.y<et&&(et=g.y),g.x>X&&(X=g.x),g.y>K&&(K=g.y),Y.push(g.x),nt.push(g.y);else for(L=0;L<T;++L){var bt=+y(g=d[L],L),vt=+k(g,L);bt<H&&(H=bt),vt<et&&(et=vt),bt>X&&(X=bt),vt>K&&(K=vt),Y.push(bt),nt.push(vt)}var mt=X-H,pt=K-et;function Nt(Vt,Gt,kt,Lt,It,At,Tt,Ut){if(!isNaN(kt)&&!isNaN(Lt))if(Vt.leaf){var ue=Vt.x,le=Vt.y;if(null!=ue)if(R(ue-kt)+R(le-Lt)<.01)Ft(Vt,Gt,kt,Lt,It,At,Tt,Ut);else{var ge=Vt.point;Vt.x=Vt.y=Vt.point=null,Ft(Vt,ge,ue,le,It,At,Tt,Ut),Ft(Vt,Gt,kt,Lt,It,At,Tt,Ut)}else Vt.x=kt,Vt.y=Lt,Vt.point=Gt}else Ft(Vt,Gt,kt,Lt,It,At,Tt,Ut)}function Ft(Vt,Gt,kt,Lt,It,At,Tt,Ut){var ue=.5*(It+Tt),le=.5*(At+Ut),ge=kt>=ue,me=Lt>=le,Se=me<<1|ge;Vt.leaf=!1,ge?It=ue:Tt=ue,me?At=le:Ut=le,Nt(Vt=Vt.nodes[Se]||(Vt.nodes[Se]={leaf:!0,nodes:[],point:null,x:null,y:null}),Gt,kt,Lt,It,At,Tt,Ut)}mt>pt?K=et+mt:X=H+pt;var qt={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(Vt){Nt(qt,Vt,+y(Vt,++L),+k(Vt,L),H,et,X,K)},visit:function(Vt){Kn(Vt,qt,H,et,X,K)},find:function(Vt){return wl(qt,Vt[0],Vt[1],H,et,X,K)}};if(L=-1,null==e){for(;++L<T;)Nt(qt,d[L],Y[L],nt[L],H,et,X,K);--L}else d.forEach(qt.add);return Y=nt=d=g=null,qt}return c.x=function(d){return arguments.length?(o=d,c):o},c.y=function(d){return arguments.length?(s=d,c):s},c.extent=function(d){return arguments.length?(null==d?e=n=r=i=null:(e=+d[0][0],n=+d[0][1],r=+d[1][0],i=+d[1][1]),c):null==e?null:[[e,n],[r,i]]},c.size=function(d){return arguments.length?(null==d?e=n=r=i=null:(e=n=0,r=+d[0],i=+d[1]),c):null==e?null:[r-e,i-n]},c},u.interpolateRgb=Di,u.interpolateObject=Ma,u.interpolateNumber=tn,u.interpolateString=_a;var Wi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zi=new RegExp(Wi.source,"g");function xn(t,e){for(var r,n=u.interpolators.length;--n>=0&&!(r=u.interpolators[n](t,e)););return r}function Tr(t,e){var l,n=[],r=[],i=t.length,o=e.length,s=Math.min(t.length,e.length);for(l=0;l<s;++l)n.push(xn(t[l],e[l]));for(;l<i;++l)r[l]=t[l];for(;l<o;++l)r[l]=e[l];return function(c){for(l=0;l<s;++l)r[l]=n[l](c);return r}}u.interpolate=xn,u.interpolators=[function(t,e){var n=typeof e;return("string"===n?ar.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Di:_a:e instanceof fn?Di:Array.isArray(e)?Tr:"object"===n&&isNaN(e)?Ma:tn)(t,e)}],u.interpolateArray=Tr;var ka=function(){return D},Cl=u.map({linear:ka,poly:function Nl(t){return function(e){return Math.pow(e,t)}},quad:function(){return Ol},cubic:function(){return Sl},sin:function(){return Ll},exp:function(){return Dl},circle:function(){return Wl},elastic:function zl(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Zt*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Zt/e)}},back:function Fl(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},bounce:function(){return Tl}}),Al=u.map({in:D,out:wa,"in-out":Ca,"out-in":function(t){return Ca(wa(t))}});function Pl(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function wa(t){return function(e){return 1-t(1-e)}}function Ca(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function Ol(t){return t*t}function Sl(t){return t*t*t}function El(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function Ll(t){return 1-Math.cos(t*ae)}function Dl(t){return Math.pow(2,10*(t-1))}function Wl(t){return 1-Math.sqrt(1-t*t)}function Tl(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Aa(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Pa(t){var e=[t.a,t.b],n=[t.c,t.d],r=Sa(e),i=Oa(e,n),o=Sa(function Yl(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*he,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*he:0}function Oa(t,e){return t[0]*e[0]+t[1]*e[1]}function Sa(t){var e=Math.sqrt(Oa(t,t));return e&&(t[0]/=e,t[1]/=e),e}u.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=Cl.get(n)||ka,Pl((r=Al.get(r)||D)(n.apply(null,w.call(arguments,1))))},u.interpolateHcl=function Bl(t,e){t=u.hcl(t),e=u.hcl(e);var n=t.h,r=t.c,i=t.l,o=e.h-n,s=e.c-r,l=e.l-i;return isNaN(s)&&(s=0,r=isNaN(r)?e.c:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:o<-180&&(o+=360),function(c){return ri(n+o*c,r+s*c,i+l*c)+""}},u.interpolateHsl=function Il(t,e){t=u.hsl(t),e=u.hsl(e);var n=t.h,r=t.s,i=t.l,o=e.h-n,s=e.s-r,l=e.l-i;return isNaN(s)&&(s=0,r=isNaN(r)?e.s:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:o<-180&&(o+=360),function(c){return ei(n+o*c,r+s*c,i+l*c)+""}},u.interpolateLab=function Rl(t,e){t=u.lab(t),e=u.lab(e);var n=t.l,r=t.a,i=t.b,o=e.l-n,s=e.a-r,l=e.b-i;return function(c){return fo(n+o*c,r+s*c,i+l*c)+""}},u.interpolateRound=Aa,u.transform=function(t){var e=x.createElementNS(u.ns.prefix.svg,"g");return(u.transform=function(n){if(null!=n){e.setAttribute("transform",n);var r=e.transform.baseVal.consolidate()}return new Pa(r?r.matrix:Hl)})(t)},Pa.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Hl={a:1,b:0,c:0,d:1,e:0,f:0};function Wn(t){return t.length?t.pop()+",":""}function Ea(t,e){var n=[],r=[];return t=u.transform(t),e=u.transform(e),function Vl(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:tn(t[0],e[0])},{i:i-2,x:tn(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(t.translate,e.translate,n,r),function Xl(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(Wn(n)+"rotate(",null,")")-2,x:tn(t,e)})):e&&n.push(Wn(n)+"rotate("+e+")")}(t.rotate,e.rotate,n,r),function Gl(t,e,n,r){t!==e?r.push({i:n.push(Wn(n)+"skewX(",null,")")-2,x:tn(t,e)}):e&&n.push(Wn(n)+"skewX("+e+")")}(t.skew,e.skew,n,r),function ql(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(Wn(n)+"scale(",null,",",null,")");r.push({i:i-4,x:tn(t[0],e[0])},{i:i-2,x:tn(t[1],e[1])})}else(1!==e[0]||1!==e[1])&&n.push(Wn(n)+"scale("+e+")")}(t.scale,e.scale,n,r),t=e=null,function(i){for(var l,o=-1,s=r.length;++o<s;)n[(l=r[o]).i]=l.x(i);return n.join("")}}function jl(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function Ul(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function Zl(t){for(var e=t.source,n=t.target,r=function Kl(t,e){if(t===e)return t;for(var n=Na(t),r=Na(e),i=n.pop(),o=r.pop(),s=null;i===o;)s=i,i=n.pop(),o=r.pop();return s}(e,n),i=[e];e!==r;)i.push(e=e.parent);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function Na(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function $l(t){t.fixed|=2}function Ql(t){t.fixed&=-7}function Jl(t){t.fixed|=4,t.px=t.x,t.py=t.y}function ts(t){t.fixed&=-5}function La(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var c,o=t.nodes,s=o.length,l=-1;++l<s;)null!=(c=o[l])&&(La(c,e,n),t.charge+=c.charge,r+=c.charge*c.cx,i+=c.charge*c.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var d=e*n[t.point.index];t.charge+=t.pointCharge=d,r+=d*t.point.x,i+=d*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}u.interpolateTransform=Ea,u.layout={},u.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(Zl(t[n]));return e}},u.layout.chord=function(){var e,n,r,i,s,l,c,t={},o=0;function d(){var L,T,H,et,X,y={},k=[],Y=u.range(i),nt=[];for(e=[],n=[],L=0,et=-1;++et<i;){for(T=0,X=-1;++X<i;)T+=r[et][X];k.push(T),nt.push(u.range(i)),L+=T}for(s&&Y.sort(function(qt,Vt){return s(k[qt],k[Vt])}),l&&nt.forEach(function(qt,Vt){qt.sort(function(Gt,kt){return l(r[Vt][Gt],r[Vt][kt])})}),L=(Zt-o*i)/L,T=0,et=-1;++et<i;){for(H=T,X=-1;++X<i;){var K=Y[et],bt=nt[K][X],vt=r[K][bt],mt=T,pt=T+=vt*L;y[K+"-"+bt]={index:K,subindex:bt,startAngle:mt,endAngle:pt,value:vt}}n[K]={index:K,startAngle:H,endAngle:T,value:k[K]},T+=o}for(et=-1;++et<i;)for(X=et-1;++X<i;){var Nt=y[et+"-"+X],Ft=y[X+"-"+et];(Nt.value||Ft.value)&&e.push(Nt.value<Ft.value?{source:Ft,target:Nt}:{source:Nt,target:Ft})}c&&g()}function g(){e.sort(function(y,k){return c((y.source.value+y.target.value)/2,(k.source.value+k.target.value)/2)})}return t.matrix=function(y){return arguments.length?(i=(r=y)&&r.length,e=n=null,t):r},t.padding=function(y){return arguments.length?(o=y,e=n=null,t):o},t.sortGroups=function(y){return arguments.length?(s=y,e=n=null,t):s},t.sortSubgroups=function(y){return arguments.length?(l=y,e=null,t):l},t.sortChords=function(y){return arguments.length?(c=y,e&&g(),t):c},t.chords=function(){return e||d(),e},t.groups=function(){return n||d(),n},t},u.layout.force=function(){var n,i,o,L,T,H,t={},e=u.dispatch("start","tick","end"),r=[1,1],s=.9,l=es,c=ns,d=-30,g=rs,y=.1,k=.64,Y=[],nt=[];function et(K){return function(bt,vt,mt,pt){if(bt.point!==K){var Gt,Nt=bt.cx-K.x,Ft=bt.cy-K.y,qt=pt-vt,Vt=Nt*Nt+Ft*Ft;if(qt*qt/k<Vt)return Vt<g&&(K.px-=Nt*(Gt=bt.charge/Vt),K.py-=Ft*Gt),!0;bt.point&&Vt&&Vt<g&&(K.px-=Nt*(Gt=bt.pointCharge/Vt),K.py-=Ft*Gt)}return!bt.charge}}function X(K){K.px=u.event.x,K.py=u.event.y,t.resume()}return t.tick=function(){if((o*=.99)<.005)return n=null,e.end({type:"end",alpha:o=0}),!0;var vt,mt,pt,Nt,Ft,qt,Vt,Gt,kt,K=Y.length,bt=nt.length;for(mt=0;mt<bt;++mt)(qt=(Gt=(Ft=(pt=nt[mt]).target).x-(Nt=pt.source).x)*Gt+(kt=Ft.y-Nt.y)*kt)&&(kt*=qt=o*T[mt]*((qt=Math.sqrt(qt))-L[mt])/qt,Ft.x-=(Gt*=qt)*(Vt=Nt.weight+Ft.weight?Nt.weight/(Nt.weight+Ft.weight):.5),Ft.y-=kt*Vt,Nt.x+=Gt*(Vt=1-Vt),Nt.y+=kt*Vt);if((Vt=o*y)&&(Gt=r[0]/2,kt=r[1]/2,mt=-1,Vt))for(;++mt<K;)(pt=Y[mt]).x+=(Gt-pt.x)*Vt,pt.y+=(kt-pt.y)*Vt;if(d)for(La(vt=u.geom.quadtree(Y),o,H),mt=-1;++mt<K;)(pt=Y[mt]).fixed||vt.visit(et(pt));for(mt=-1;++mt<K;)(pt=Y[mt]).fixed?(pt.x=pt.px,pt.y=pt.py):(pt.x-=(pt.px-(pt.px=pt.x))*s,pt.y-=(pt.py-(pt.py=pt.y))*s);e.tick({type:"tick",alpha:o})},t.nodes=function(K){return arguments.length?(Y=K,t):Y},t.links=function(K){return arguments.length?(nt=K,t):nt},t.size=function(K){return arguments.length?(r=K,t):r},t.linkDistance=function(K){return arguments.length?(l="function"==typeof K?K:+K,t):l},t.distance=t.linkDistance,t.linkStrength=function(K){return arguments.length?(c="function"==typeof K?K:+K,t):c},t.friction=function(K){return arguments.length?(s=+K,t):s},t.charge=function(K){return arguments.length?(d="function"==typeof K?K:+K,t):d},t.chargeDistance=function(K){return arguments.length?(g=K*K,t):Math.sqrt(g)},t.gravity=function(K){return arguments.length?(y=+K,t):y},t.theta=function(K){return arguments.length?(k=K*K,t):Math.sqrt(k)},t.alpha=function(K){return arguments.length?(K=+K,o?K>0?o=K:(n.c=null,n.t=NaN,n=null,e.end({type:"end",alpha:o=0})):K>0&&(e.start({type:"start",alpha:o=K}),n=dr(t.tick)),t):o},t.start=function(){var K,Nt,Ft,bt=Y.length,vt=nt.length,mt=r[0],pt=r[1];for(K=0;K<bt;++K)(Ft=Y[K]).index=K,Ft.weight=0;for(K=0;K<vt;++K)"number"==typeof(Ft=nt[K]).source&&(Ft.source=Y[Ft.source]),"number"==typeof Ft.target&&(Ft.target=Y[Ft.target]),++Ft.source.weight,++Ft.target.weight;for(K=0;K<bt;++K)Ft=Y[K],isNaN(Ft.x)&&(Ft.x=qt("x",mt)),isNaN(Ft.y)&&(Ft.y=qt("y",pt)),isNaN(Ft.px)&&(Ft.px=Ft.x),isNaN(Ft.py)&&(Ft.py=Ft.y);if(L=[],"function"==typeof l)for(K=0;K<vt;++K)L[K]=+l.call(this,nt[K],K);else for(K=0;K<vt;++K)L[K]=l;if(T=[],"function"==typeof c)for(K=0;K<vt;++K)T[K]=+c.call(this,nt[K],K);else for(K=0;K<vt;++K)T[K]=c;if(H=[],"function"==typeof d)for(K=0;K<bt;++K)H[K]=+d.call(this,Y[K],K);else for(K=0;K<bt;++K)H[K]=d;function qt(Vt,Gt){if(!Nt){for(Nt=new Array(bt),It=0;It<bt;++It)Nt[It]=[];for(It=0;It<vt;++It){var kt=nt[It];Nt[kt.source.index].push(kt.target),Nt[kt.target.index].push(kt.source)}}for(var Tt,Lt=Nt[K],It=-1,At=Lt.length;++It<At;)if(!isNaN(Tt=Lt[It][Vt]))return Tt;return Math.random()*Gt}return t.resume()},t.resume=function(){return t.alpha(.1)},t.stop=function(){return t.alpha(0)},t.drag=function(){if(i||(i=u.behavior.drag().origin(D).on("dragstart.force",$l).on("drag.force",X).on("dragend.force",Ql)),!arguments.length)return i;this.on("mouseover.force",Jl).on("mouseout.force",ts).call(i)},u.rebind(t,e,"on")};var es=20,ns=1,rs=1/0;function $n(t,e){return u.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=us,t}function Qn(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function Ze(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(s=t.children)&&(o=s.length))for(var o,s,i=-1;++i<o;)n.push(s[i]);for(;null!=(t=r.pop());)e(t)}function is(t){return t.children}function os(t){return t.value}function as(t,e){return e.value-t.value}function us(t){return u.merge(t.map(function(e){return(e.children||[]).map(function(n){return{source:e,target:n}})}))}u.layout.hierarchy=function(){var t=as,e=is,n=os;function r(i){var l,o=[i],s=[];for(i.depth=0;null!=(l=o.pop());)if(s.push(l),(d=e.call(r,l,l.depth))&&(c=d.length)){for(var c,d,g;--c>=0;)o.push(g=d[c]),g.parent=l,g.depth=l.depth+1;n&&(l.value=0),l.children=d}else n&&(l.value=+n.call(r,l,l.depth)||0),delete l.children;return Ze(i,function(y){var k,Y;t&&(k=y.children)&&k.sort(t),n&&(Y=y.parent)&&(Y.value+=y.value)}),s}return r.sort=function(i){return arguments.length?(t=i,r):t},r.children=function(i){return arguments.length?(e=i,r):e},r.value=function(i){return arguments.length?(n=i,r):n},r.revalue=function(i){return n&&(Qn(i,function(o){o.children&&(o.value=0)}),Ze(i,function(o){var s;o.children||(o.value=+n.call(r,o,o.depth)||0),(s=o.parent)&&(s.value+=o.value)})),i},r},u.layout.partition=function(){var t=u.layout.hierarchy(),e=[1,1];function n(o,s,l,c){var d=o.children;if(o.x=s,o.y=o.depth*c,o.dx=l,o.dy=c,d&&(y=d.length)){var y,k,Y,g=-1;for(l=o.value?l/o.value:0;++g<y;)n(k=d[g],s,Y=k.value*l,c),s+=Y}}function r(o){var s=o.children,l=0;if(s&&(d=s.length))for(var d,c=-1;++c<d;)l=Math.max(l,r(s[c]));return 1+l}function i(o,s){var l=t.call(this,o,s);return n(l[0],0,e[0],e[1]/r(l[0])),l}return i.size=function(o){return arguments.length?(e=o,i):e},$n(i,t)},u.layout.pie=function(){var t=Number,e=Da,n=0,r=Zt,i=0;function o(s){var H,l=s.length,c=s.map(function(et,X){return+t.call(o,et,X)}),d=+("function"==typeof n?n.apply(this,arguments):n),g=("function"==typeof r?r.apply(this,arguments):r)-d,y=Math.min(Math.abs(g)/l,+("function"==typeof i?i.apply(this,arguments):i)),k=y*(g<0?-1:1),Y=u.sum(c),nt=Y?(g-l*k)/Y:0,L=u.range(l),T=[];return null!=e&&L.sort(e===Da?function(et,X){return c[X]-c[et]}:function(et,X){return e(s[et],s[X])}),L.forEach(function(et){T[et]={data:s[et],value:H=c[et],startAngle:d,endAngle:d+=H*nt+k,padAngle:y}}),T}return o.value=function(s){return arguments.length?(t=s,o):t},o.sort=function(s){return arguments.length?(e=s,o):e},o.startAngle=function(s){return arguments.length?(n=s,o):n},o.endAngle=function(s){return arguments.length?(r=s,o):r},o.padAngle=function(s){return arguments.length?(i=s,o):i},o};var Da={};function ls(t){return t.x}function ss(t){return t.y}function cs(t,e,n){t.y0=e,t.y=n}u.layout.stack=function(){var t=D,e=Fi,n=Ti,r=cs,i=ls,o=ss;function s(l,c){if(!(nt=l.length))return l;var d=l.map(function(et,X){return t.call(s,et,X)}),g=d.map(function(et){return et.map(function(X,K){return[i.call(s,X,K),o.call(s,X,K)]})}),y=e.call(s,g,c);d=u.permute(d,y),g=u.permute(g,y);var nt,L,T,H,k=n.call(s,g,c),Y=d[0].length;for(T=0;T<Y;++T)for(r.call(s,d[0][T],H=k[T],g[0][T][1]),L=1;L<nt;++L)r.call(s,d[L][T],H+=g[L-1][T][1],g[L][T][1]);return l}return s.values=function(l){return arguments.length?(t=l,s):t},s.order=function(l){return arguments.length?(e="function"==typeof l?l:fs.get(l)||Fi,s):e},s.offset=function(l){return arguments.length?(n="function"==typeof l?l:ds.get(l)||Ti,s):n},s.x=function(l){return arguments.length?(i=l,s):i},s.y=function(l){return arguments.length?(o=l,s):o},s.out=function(l){return arguments.length?(r=l,s):r},s};var fs=u.map({"inside-out":function(t){var n,r,e=t.length,i=t.map(hs),o=t.map(gs),s=u.range(e).sort(function(y,k){return i[y]-i[k]}),l=0,c=0,d=[],g=[];for(n=0;n<e;++n)r=s[n],l<c?(l+=o[r],d.push(r)):(c+=o[r],g.push(r));return g.reverse().concat(d)},reverse:function(t){return u.range(t.length).reverse()},default:Fi}),ds=u.map({silhouette:function(t){var o,s,l,e=t.length,n=t[0].length,r=[],i=0,c=[];for(s=0;s<n;++s){for(o=0,l=0;o<e;o++)l+=t[o][s][1];l>i&&(i=l),r.push(l)}for(s=0;s<n;++s)c[s]=(i-r[s])/2;return c},wiggle:function(t){var i,o,s,l,c,d,g,y,k,e=t.length,n=t[0],r=n.length,Y=[];for(Y[0]=y=k=0,o=1;o<r;++o){for(i=0,l=0;i<e;++i)l+=t[i][o][1];for(i=0,c=0,g=n[o][0]-n[o-1][0];i<e;++i){for(s=0,d=(t[i][o][1]-t[i][o-1][1])/(2*g);s<i;++s)d+=(t[s][o][1]-t[s][o-1][1])/g;c+=d*t[i][o][1]}Y[o]=y-=l?c/l*g:0,y<k&&(k=y)}for(o=0;o<r;++o)Y[o]-=k;return Y},expand:function(t){var i,o,s,e=t.length,n=t[0].length,r=1/e,l=[];for(o=0;o<n;++o){for(i=0,s=0;i<e;i++)s+=t[i][o][1];if(s)for(i=0;i<e;i++)t[i][o][1]/=s;else for(i=0;i<e;i++)t[i][o][1]=r}for(o=0;o<n;++o)l[o]=0;return l},zero:Ti});function Fi(t){return u.range(t.length)}function Ti(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function hs(t){for(var i,e=1,n=0,r=t[0][1],o=t.length;e<o;++e)(i=t[e][1])>r&&(n=e,r=i);return n}function gs(t){return t.reduce(ps,0)}function ps(t,e){return t+e[1]}function vs(t,e){return Wa(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Wa(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];++n<=e;)o[n]=i*n+r;return o}function ms(t){return[u.min(t),u.max(t)]}function ys(t,e){return t.value-e.value}function Bi(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function za(t,e){t._pack_next=e,e._pack_prev=t}function Fa(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function Ta(t){if((e=t.children)&&(k=e.length)){var e,s,l,c,d,g,y,k,n=1/0,r=-1/0,i=1/0,o=-1/0;if(e.forEach(xs),(s=e[0]).x=-s.r,s.y=0,Y(s),k>1&&((l=e[1]).x=l.r,l.y=0,Y(l),k>2))for(Ia(s,l,c=e[2]),Y(c),Bi(s,c),s._pack_prev=c,Bi(c,l),l=s._pack_next,d=3;d<k;d++){Ia(s,l,c=e[d]);var nt=0,L=1,T=1;for(g=l._pack_next;g!==l;g=g._pack_next,L++)if(Fa(g,c)){nt=1;break}if(1==nt)for(y=s._pack_prev;y!==g._pack_prev&&!Fa(y,c);y=y._pack_prev,T++);nt?(L<T||L==T&&l.r<s.r?za(s,l=g):za(s=y,l),d--):(Bi(s,c),l=c,Y(c))}var H=(n+r)/2,et=(i+o)/2,X=0;for(d=0;d<k;d++)(c=e[d]).x-=H,c.y-=et,X=Math.max(X,c.r+Math.sqrt(c.x*c.x+c.y*c.y));t.r=X,e.forEach(bs)}function Y(K){n=Math.min(K.x-K.r,n),r=Math.max(K.x+K.r,r),i=Math.min(K.y-K.r,i),o=Math.max(K.y+K.r,o)}}function xs(t){t._pack_next=t._pack_prev=t}function bs(t){delete t._pack_next,delete t._pack_prev}function Ba(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var o=-1,s=i.length;++o<s;)Ba(i[o],e,n,r)}function Ia(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var s=e.r+n.r,l=i*i+o*o,c=.5+((r*=r)-(s*=s))/(2*l),d=Math.sqrt(Math.max(0,2*s*(r+l)-(r-=l)*r-s*s))/(2*l);n.x=t.x+c*i+d*o,n.y=t.y+c*o-d*i}else n.x=t.x+r,n.y=t.y}function Ra(t,e){return t.parent==e.parent?1:2}function Ii(t){var e=t.children;return e.length?e[0]:t.t}function Ri(t){var n,e=t.children;return(n=e.length)?e[n-1]:t.t}function Ms(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function ks(t,e,n){return t.a.parent===e.parent?t.a:n}function Ya(t){var e=t.children;return e&&e.length?Ya(e[0]):t}function Ha(t){var n,e=t.children;return e&&(n=e.length)?Ha(e[n-1]):t}function Yi(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Va(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return i<0&&(n+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function zn(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function Br(t){return t.rangeExtent?t.rangeExtent():zn(t.range())}function As(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(s){return o(i(s))}}function Ir(t,e){var s,n=0,r=t.length-1,i=t[n],o=t[r];return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),t[n]=e.floor(i),t[r]=e.ceil(o),t}function Xa(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Ps}u.layout.histogram=function(){var t=!0,e=Number,n=ms,r=vs;function i(o,k){for(var y,T,l=[],c=o.map(e,this),d=n.call(this,c,k),g=r.call(this,d,c,k),Y=(k=-1,c.length),nt=g.length-1,L=t?1:1/Y;++k<nt;)(y=l[k]=[]).dx=g[k+1]-(y.x=g[k]),y.y=0;if(nt>0)for(k=-1;++k<Y;)(T=c[k])>=d[0]&&T<=d[1]&&((y=l[u.bisect(g,T,1,nt)-1]).y+=L,y.push(o[k]));return l}return i.value=function(o){return arguments.length?(e=o,i):e},i.range=function(o){return arguments.length?(n=ve(o),i):n},i.bins=function(o){return arguments.length?(r="number"==typeof o?function(s){return Wa(s,o)}:ve(o),i):r},i.frequency=function(o){return arguments.length?(t=!!o,i):t},i},u.layout.pack=function(){var r,t=u.layout.hierarchy().sort(ys),e=0,n=[1,1];function i(o,s){var l=t.call(this,o,s),c=l[0],d=n[0],g=n[1],y=null==r?Math.sqrt:"function"==typeof r?r:function(){return r};if(c.x=c.y=0,Ze(c,function(Y){Y.r=+y(Y.value)}),Ze(c,Ta),e){var k=e*(r?1:Math.max(2*c.r/d,2*c.r/g))/2;Ze(c,function(Y){Y.r+=k}),Ze(c,Ta),Ze(c,function(Y){Y.r-=k})}return Ba(c,d/2,g/2,r?1:1/Math.max(2*c.r/d,2*c.r/g)),l}return i.size=function(o){return arguments.length?(n=o,i):n},i.radius=function(o){return arguments.length?(r=null==o||"function"==typeof o?o:+o,i):r},i.padding=function(o){return arguments.length?(e=+o,i):e},$n(i,t)},u.layout.tree=function(){var t=u.layout.hierarchy().sort(null).value(null),e=Ra,n=[1,1],r=null;function i(g,y){var k=t.call(this,g,y),Y=k[0],nt=function o(g){for(var Y,y={A:null,children:[g]},k=[y];null!=(Y=k.pop());)for(var L,nt=Y.children,T=0,H=nt.length;T<H;++T)k.push((nt[T]=L={_:nt[T],parent:Y,children:(L=nt[T].children)&&L.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:T}).a=L);return y.children[0]}(Y);if(Ze(nt,s),nt.parent.m=-nt.z,Qn(nt,l),r)Qn(Y,d);else{var L=Y,T=Y,H=Y;Qn(Y,function(bt){bt.x<L.x&&(L=bt),bt.x>T.x&&(T=bt),bt.depth>H.depth&&(H=bt)});var et=e(L,T)/2-L.x,X=n[0]/(T.x+e(T,L)/2+et),K=n[1]/(H.depth||1);Qn(Y,function(bt){bt.x=(bt.x+et)*X,bt.y=bt.depth*K})}return k}function s(g){var y=g.children,k=g.parent.children,Y=g.i?k[g.i-1]:null;if(y.length){!function _s(t){for(var o,e=0,n=0,r=t.children,i=r.length;--i>=0;)(o=r[i]).z+=e,o.m+=e,e+=o.s+(n+=o.c)}(g);var nt=(y[0].z+y[y.length-1].z)/2;Y?(g.z=Y.z+e(g._,Y._),g.m=g.z-nt):g.z=nt}else Y&&(g.z=Y.z+e(g._,Y._));g.parent.A=function c(g,y,k){if(y){for(var bt,Y=g,nt=g,L=y,T=Y.parent.children[0],H=Y.m,et=nt.m,X=L.m,K=T.m;L=Ri(L),Y=Ii(Y),L&&Y;)T=Ii(T),(nt=Ri(nt)).a=g,(bt=L.z+X-Y.z-H+e(L._,Y._))>0&&(Ms(ks(L,g,k),g,bt),H+=bt,et+=bt),X+=L.m,H+=Y.m,K+=T.m,et+=nt.m;L&&!Ri(nt)&&(nt.t=L,nt.m+=X-et),Y&&!Ii(T)&&(T.t=Y,T.m+=H-K,k=g)}return k}(g,Y,g.parent.A||k[0])}function l(g){g._.x=g.z+g.parent.m,g.m+=g.parent.m}function d(g){g.x*=n[0],g.y=g.depth*n[1]}return i.separation=function(g){return arguments.length?(e=g,i):e},i.size=function(g){return arguments.length?(r=null==(n=g)?d:null,i):r?null:n},i.nodeSize=function(g){return arguments.length?(r=null==(n=g)?null:d,i):r?n:null},$n(i,t)},u.layout.cluster=function(){var t=u.layout.hierarchy().sort(null).value(null),e=Ra,n=[1,1],r=!1;function i(o,s){var d,l=t.call(this,o,s),c=l[0],g=0;Ze(c,function(L){var T=L.children;T&&T.length?(L.x=function Cs(t){return t.reduce(function(e,n){return e+n.x},0)/t.length}(T),L.y=function ws(t){return 1+u.max(t,function(e){return e.y})}(T)):(L.x=d?g+=e(L,d):0,L.y=0,d=L)});var y=Ya(c),k=Ha(c),Y=y.x-e(y,k)/2,nt=k.x+e(k,y)/2;return Ze(c,r?function(L){L.x=(L.x-c.x)*n[0],L.y=(c.y-L.y)*n[1]}:function(L){L.x=(L.x-Y)/(nt-Y)*n[0],L.y=(1-(c.y?L.y/c.y:1))*n[1]}),l}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=null==(n=o),i):r?null:n},i.nodeSize=function(o){return arguments.length?(r=null!=(n=o),i):r?n:null},$n(i,t)},u.layout.treemap=function(){var s,t=u.layout.hierarchy(),e=Math.round,n=[1,1],r=null,i=Yi,o=!1,l="squarify",c=.5*(1+Math.sqrt(5));function d(L,T){for(var X,K,H=-1,et=L.length;++H<et;)K=(X=L[H]).value*(T<0?0:T),X.area=isNaN(K)||K<=0?0:K}function g(L){var T=L.children;if(T&&T.length){var K,vt,pt,H=i(L),et=[],X=T.slice(),bt=1/0,mt="slice"===l?H.dx:"dice"===l?H.dy:"slice-dice"===l?1&L.depth?H.dy:H.dx:Math.min(H.dx,H.dy);for(d(X,H.dx*H.dy/L.value),et.area=0;(pt=X.length)>0;)et.push(K=X[pt-1]),et.area+=K.area,"squarify"!==l||(vt=k(et,mt))<=bt?(X.pop(),bt=vt):(et.area-=et.pop().area,Y(et,mt,H,!1),mt=Math.min(H.dx,H.dy),et.length=et.area=0,bt=1/0);et.length&&(Y(et,mt,H,!0),et.length=et.area=0),T.forEach(g)}}function y(L){var T=L.children;if(T&&T.length){var X,H=i(L),et=T.slice(),K=[];for(d(et,H.dx*H.dy/L.value),K.area=0;X=et.pop();)K.push(X),K.area+=X.area,null!=X.z&&(Y(K,X.z?H.dx:H.dy,H,!et.length),K.length=K.area=0);T.forEach(y)}}function k(L,T){for(var et,H=L.area,X=0,K=1/0,bt=-1,vt=L.length;++bt<vt;)!(et=L[bt].area)||(et<K&&(K=et),et>X&&(X=et));return T*=T,(H*=H)?Math.max(T*X*c/H,H/(T*K*c)):1/0}function Y(L,T,H,et){var pt,X=-1,K=L.length,bt=H.x,vt=H.y,mt=T?e(L.area/T):0;if(T==H.dx){for((et||mt>H.dy)&&(mt=H.dy);++X<K;)(pt=L[X]).x=bt,pt.y=vt,pt.dy=mt,bt+=pt.dx=Math.min(H.x+H.dx-bt,mt?e(pt.area/mt):0);pt.z=!0,pt.dx+=H.x+H.dx-bt,H.y+=mt,H.dy-=mt}else{for((et||mt>H.dx)&&(mt=H.dx);++X<K;)(pt=L[X]).x=bt,pt.y=vt,pt.dx=mt,vt+=pt.dy=Math.min(H.y+H.dy-vt,mt?e(pt.area/mt):0);pt.z=!1,pt.dy+=H.y+H.dy-vt,H.x+=mt,H.dx-=mt}}function nt(L){var T=s||t(L),H=T[0];return H.x=H.y=0,H.value?(H.dx=n[0],H.dy=n[1]):H.dx=H.dy=0,s&&t.revalue(H),d([H],H.dx*H.dy/H.value),(s?y:g)(H),o&&(s=T),T}return nt.size=function(L){return arguments.length?(n=L,nt):n},nt.padding=function(L){if(!arguments.length)return r;function T(X){var K=L.call(nt,X,X.depth);return null==K?Yi(X):Va(X,"number"==typeof K?[K,K,K,K]:K)}function H(X){return Va(X,L)}var et;return i=null==(r=L)?Yi:"function"==(et=typeof L)?T:("number"===et&&(L=[L,L,L,L]),H),nt},nt.round=function(L){return arguments.length?(e=L?Math.round:Number,nt):e!=Number},nt.sticky=function(L){return arguments.length?(o=L,s=null,nt):o},nt.ratio=function(L){return arguments.length?(c=L,nt):c},nt.mode=function(L){return arguments.length?(l=L+"",nt):l},$n(nt,t)},u.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var r,i,o;do{o=(r=2*Math.random()-1)*r+(i=2*Math.random()-1)*i}while(!o||o>1);return t+e*r*Math.sqrt(-2*Math.log(o)/o)}},logNormal:function(){var t=u.random.normal.apply(u,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=u.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},u.scale={};var Ps={floor:D,ceil:D};function Os(t,e,n,r){var i=[],o=[],s=0,l=Math.min(t.length,e.length)-1;for(t[l]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<=l;)i.push(n(t[s-1],t[s])),o.push(r(e[s-1],e[s]));return function(c){var d=u.bisect(t,c,1,l)-1;return o[d](i[d](c))}}function Ga(t,e,n,r){var i,o;function s(){var c=Math.min(t.length,e.length)>2?Os:As,d=r?Ul:jl;return i=c(t,e,d,n),o=c(e,t,d,xn),l}function l(c){return i(c)}return l.invert=function(c){return o(c)},l.domain=function(c){return arguments.length?(t=c.map(Number),s()):t},l.range=function(c){return arguments.length?(e=c,s()):e},l.rangeRound=function(c){return l.range(c).interpolate(Aa)},l.clamp=function(c){return arguments.length?(r=c,s()):r},l.interpolate=function(c){return arguments.length?(n=c,s()):n},l.ticks=function(c){return Vi(t,c)},l.tickFormat=function(c,d){return Xi(t,c,d)},l.nice=function(c){return qa(t,c),s()},l.copy=function(){return Ga(t,e,n,r)},s()}function Hi(t,e){return u.rebind(t,e,"range","rangeRound","interpolate","clamp")}function qa(t,e){return Ir(t,Xa(Fn(t,e)[2])),Ir(t,Xa(Fn(t,e)[2])),t}function Fn(t,e){null==e&&(e=10);var n=zn(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Vi(t,e){return u.range.apply(u,Fn(t,e))}function Xi(t,e,n){var r=Fn(t,e);if(n){var i=Mo.exec(n);if(i.shift(),"s"===i[8]){var o=u.formatPrefix(Math.max(R(r[0]),R(r[1])));return i[7]||(i[7]="."+Rr(o.scale(r[2]))),i[8]="f",n=u.format(i.join("")),function(s){return n(o.scale(s))+o.symbol}}i[7]||(i[7]="."+function Es(t,e){var n=Rr(e[2]);return t in Ss?Math.abs(n-Rr(Math.max(R(e[0]),R(e[1]))))+ +("e"!==t):n-2*("%"===t)}(i[8],r)),n=i.join("")}else n=",."+Rr(r[2])+"f";return u.format(n)}u.scale.linear=function(){return Ga([0,1],[0,1],xn,!1)};var Ss={s:1,g:1,p:1,r:1,e:1};function Rr(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function ja(t,e,n,r){function i(l){return(n?Math.log(l<0?0:l):-Math.log(l>0?0:-l))/Math.log(e)}function o(l){return n?Math.pow(e,l):-Math.pow(e,-l)}function s(l){return t(i(l))}return s.invert=function(l){return o(t.invert(l))},s.domain=function(l){return arguments.length?(n=l[0]>=0,t.domain((r=l.map(Number)).map(i)),s):r},s.base=function(l){return arguments.length?(e=+l,t.domain(r.map(i)),s):e},s.nice=function(){var l=Ir(r.map(i),n?Math:Ns);return t.domain(l),r=l.map(o),s},s.ticks=function(){var l=zn(r),c=[],d=l[0],g=l[1],y=Math.floor(i(d)),k=Math.ceil(i(g)),Y=e%1?2:e;if(isFinite(k-y)){if(n){for(;y<k;y++)for(var nt=1;nt<Y;nt++)c.push(o(y)*nt);c.push(o(y))}else for(c.push(o(y));y++<k;)for(nt=Y-1;nt>0;nt--)c.push(o(y)*nt);for(y=0;c[y]<d;y++);for(k=c.length;c[k-1]>g;k--);c=c.slice(y,k)}return c},s.tickFormat=function(l,c){if(!arguments.length)return Ua;arguments.length<2?c=Ua:"function"!=typeof c&&(c=u.format(c));var d=Math.max(1,e*l/s.ticks().length);return function(g){var y=g/o(Math.round(i(g)));return y*e<e-.5&&(y*=e),y<=d?c(g):""}},s.copy=function(){return ja(t.copy(),e,n,r)},Hi(s,t)}u.scale.log=function(){return ja(u.scale.linear().domain([0,1]),10,!0,[1,10])};var Ua=u.format(".0e"),Ns={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function Za(t,e,n){var r=Yr(e),i=Yr(1/e);function o(s){return t(r(s))}return o.invert=function(s){return i(t.invert(s))},o.domain=function(s){return arguments.length?(t.domain((n=s.map(Number)).map(r)),o):n},o.ticks=function(s){return Vi(n,s)},o.tickFormat=function(s,l){return Xi(n,s,l)},o.nice=function(s){return o.domain(qa(n,s))},o.exponent=function(s){return arguments.length?(r=Yr(e=s),i=Yr(1/e),t.domain(n.map(r)),o):e},o.copy=function(){return Za(t.copy(),e,n)},Hi(o,t)}function Yr(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Ka(t,e){var n,r,i;function o(l){return r[((n.get(l)||("range"===e.t?n.set(l,t.push(l)):NaN))-1)%r.length]}function s(l,c){return u.range(t.length).map(function(d){return l+c*d})}return o.domain=function(l){if(!arguments.length)return t;t=[],n=new A;for(var g,c=-1,d=l.length;++c<d;)n.has(g=l[c])||n.set(g,t.push(g));return o[e.t].apply(o,e.a)},o.range=function(l){return arguments.length?(r=l,i=0,e={t:"range",a:arguments},o):r},o.rangePoints=function(l,c){arguments.length<2&&(c=0);var d=l[0],g=l[1],y=t.length<2?(d=(d+g)/2,0):(g-d)/(t.length-1+c);return r=s(d+y*c/2,y),i=0,e={t:"rangePoints",a:arguments},o},o.rangeRoundPoints=function(l,c){arguments.length<2&&(c=0);var d=l[0],g=l[1],y=t.length<2?(d=g=Math.round((d+g)/2),0):(g-d)/(t.length-1+c)|0;return r=s(d+Math.round(y*c/2+(g-d-(t.length-1+c)*y)/2),y),i=0,e={t:"rangeRoundPoints",a:arguments},o},o.rangeBands=function(l,c,d){arguments.length<2&&(c=0),arguments.length<3&&(d=c);var g=l[1]<l[0],y=l[g-0],k=l[1-g],Y=(k-y)/(t.length-c+2*d);return r=s(y+Y*d,Y),g&&r.reverse(),i=Y*(1-c),e={t:"rangeBands",a:arguments},o},o.rangeRoundBands=function(l,c,d){arguments.length<2&&(c=0),arguments.length<3&&(d=c);var g=l[1]<l[0],y=l[g-0],k=l[1-g],Y=Math.floor((k-y)/(t.length-c+2*d));return r=s(y+Math.round((k-y-(t.length-c)*Y)/2),Y),g&&r.reverse(),i=Math.round(Y*(1-c)),e={t:"rangeRoundBands",a:arguments},o},o.rangeBand=function(){return i},o.rangeExtent=function(){return zn(e.a[0])},o.copy=function(){return Ka(t,e)},o.domain(t)}u.scale.pow=function(){return Za(u.scale.linear(),1,[0,1])},u.scale.sqrt=function(){return u.scale.pow().exponent(.5)},u.scale.ordinal=function(){return Ka([],{t:"range",a:[[]]})},u.scale.category10=function(){return u.scale.ordinal().range(Ls)},u.scale.category20=function(){return u.scale.ordinal().range(Ds)},u.scale.category20b=function(){return u.scale.ordinal().range(Ws)},u.scale.category20c=function(){return u.scale.ordinal().range(zs)};var Ls=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ir),Ds=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ir),Ws=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ir),zs=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ir);function $a(t,e){var n;function r(){var o=0,s=e.length;for(n=[];++o<s;)n[o-1]=u.quantile(t,o/s);return i}function i(o){if(!isNaN(o=+o))return e[u.bisect(n,o)]}return i.domain=function(o){return arguments.length?(t=o.map(j).filter($).sort(rt),r()):t},i.range=function(o){return arguments.length?(e=o,r()):e},i.quantiles=function(){return n},i.invertExtent=function(o){return(o=e.indexOf(o))<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},i.copy=function(){return $a(t,e)},r()}function Qa(t,e,n){var r,i;function o(l){return n[Math.max(0,Math.min(i,Math.floor(r*(l-t))))]}function s(){return r=n.length/(e-t),i=n.length-1,o}return o.domain=function(l){return arguments.length?(t=+l[0],e=+l[l.length-1],s()):[t,e]},o.range=function(l){return arguments.length?(n=l,s()):n},o.invertExtent=function(l){return[l=(l=n.indexOf(l))<0?NaN:l/r+t,l+1/r]},o.copy=function(){return Qa(t,e,n)},s()}function Ja(t,e){function n(r){if(r<=r)return e[u.bisect(t,r)]}return n.domain=function(r){return arguments.length?(t=r,n):t},n.range=function(r){return arguments.length?(e=r,n):e},n.invertExtent=function(r){return r=e.indexOf(r),[t[r-1],t[r]]},n.copy=function(){return Ja(t,e)},n}function tu(t){function e(n){return+n}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(n){return Vi(t,n)},e.tickFormat=function(n,r){return Xi(t,n,r)},e.copy=function(){return tu(t)},e}function Fs(){return 0}u.scale.quantile=function(){return $a([],[])},u.scale.quantize=function(){return Qa(0,1,[0,1])},u.scale.threshold=function(){return Ja([.5],[0,1])},u.scale.identity=function(){return tu([0,1])},u.svg={},u.svg.arc=function(){var t=Ts,e=Bs,n=Fs,r=Hr,i=eu,o=nu,s=Is;function l(){var d=Math.max(0,+t.apply(this,arguments)),g=Math.max(0,+e.apply(this,arguments)),y=i.apply(this,arguments)-ae,k=o.apply(this,arguments)-ae,Y=Math.abs(k-y),nt=y>k?0:1;if(g<d&&(L=g,g=d,d=L),Y>=pe)return c(g,nt)+(d?c(d,1-nt):"")+"Z";var L,T,H,et,bt,vt,mt,pt,Nt,Ft,qt,Vt,X=0,K=0,Gt=[];if((et=(+s.apply(this,arguments)||0)/2)&&(H=r===Hr?Math.sqrt(d*d+g*g):+r.apply(this,arguments),nt||(K*=-1),g&&(K=nn(H/g*Math.sin(et))),d&&(X=nn(H/d*Math.sin(et)))),g){bt=g*Math.cos(y+K),vt=g*Math.sin(y+K),mt=g*Math.cos(k-K),pt=g*Math.sin(k-K);var kt=Math.abs(k-y-2*K)<=Bt?0:1;if(K&&Vr(bt,vt,mt,pt)===nt^kt){var Lt=(y+k)/2;bt=g*Math.cos(Lt),vt=g*Math.sin(Lt),mt=pt=null}}else bt=vt=0;if(d){Nt=d*Math.cos(k-X),Ft=d*Math.sin(k-X),qt=d*Math.cos(y+X),Vt=d*Math.sin(y+X);var It=Math.abs(y-k+2*X)<=Bt?0:1;if(X&&Vr(Nt,Ft,qt,Vt)===1-nt^It){var At=(y+k)/2;Nt=d*Math.cos(At),Ft=d*Math.sin(At),qt=Vt=null}}else Nt=Ft=0;if(Y>Ht&&(L=Math.min(Math.abs(g-d)/2,+n.apply(this,arguments)))>.001){T=d<g^nt?0:1;var Tt=L,Ut=L;if(Y<Bt){var ue=null==qt?[Nt,Ft]:null==mt?[bt,vt]:Oi([bt,vt],[qt,Vt],[mt,pt],[Nt,Ft]),le=bt-ue[0],ge=vt-ue[1],me=mt-ue[0],Se=pt-ue[1],De=1/Math.sin(Math.acos((le*me+ge*Se)/(Math.sqrt(le*le+ge*ge)*Math.sqrt(me*me+Se*Se)))/2),Ee=Math.sqrt(ue[0]*ue[0]+ue[1]*ue[1]);Ut=Math.min(L,(d-Ee)/(De-1)),Tt=Math.min(L,(g-Ee)/(De+1))}if(null!=mt){var ze=Xr(null==qt?[Nt,Ft]:[qt,Vt],[bt,vt],g,Tt,nt),Oe=Xr([mt,pt],[Nt,Ft],g,Tt,nt);L===Tt?Gt.push("M",ze[0],"A",Tt,",",Tt," 0 0,",T," ",ze[1],"A",g,",",g," 0 ",1-nt^Vr(ze[1][0],ze[1][1],Oe[1][0],Oe[1][1]),",",nt," ",Oe[1],"A",Tt,",",Tt," 0 0,",T," ",Oe[0]):Gt.push("M",ze[0],"A",Tt,",",Tt," 0 1,",T," ",Oe[0])}else Gt.push("M",bt,",",vt);if(null!=qt){var Fe=Xr([bt,vt],[qt,Vt],d,-Ut,nt),_n=Xr([Nt,Ft],null==mt?[bt,vt]:[mt,pt],d,-Ut,nt);L===Ut?Gt.push("L",_n[0],"A",Ut,",",Ut," 0 0,",T," ",_n[1],"A",d,",",d," 0 ",nt^Vr(_n[1][0],_n[1][1],Fe[1][0],Fe[1][1]),",",1-nt," ",Fe[1],"A",Ut,",",Ut," 0 0,",T," ",Fe[0]):Gt.push("L",_n[0],"A",Ut,",",Ut," 0 0,",T," ",Fe[0])}else Gt.push("L",Nt,",",Ft)}else Gt.push("M",bt,",",vt),null!=mt&&Gt.push("A",g,",",g," 0 ",kt,",",nt," ",mt,",",pt),Gt.push("L",Nt,",",Ft),null!=qt&&Gt.push("A",d,",",d," 0 ",It,",",1-nt," ",qt,",",Vt);return Gt.push("Z"),Gt.join("")}function c(d,g){return"M0,"+d+"A"+d+","+d+" 0 1,"+g+" 0,"+-d+"A"+d+","+d+" 0 1,"+g+" 0,"+d}return l.innerRadius=function(d){return arguments.length?(t=ve(d),l):t},l.outerRadius=function(d){return arguments.length?(e=ve(d),l):e},l.cornerRadius=function(d){return arguments.length?(n=ve(d),l):n},l.padRadius=function(d){return arguments.length?(r=d==Hr?Hr:ve(d),l):r},l.startAngle=function(d){return arguments.length?(i=ve(d),l):i},l.endAngle=function(d){return arguments.length?(o=ve(d),l):o},l.padAngle=function(d){return arguments.length?(s=ve(d),l):s},l.centroid=function(){var d=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,g=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-ae;return[Math.cos(g)*d,Math.sin(g)*d]},l};var Hr="auto";function Ts(t){return t.innerRadius}function Bs(t){return t.outerRadius}function eu(t){return t.startAngle}function nu(t){return t.endAngle}function Is(t){return t&&t.padAngle}function Vr(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function Xr(t,e,n,r,i){var o=t[0]-e[0],s=t[1]-e[1],l=(i?r:-r)/Math.sqrt(o*o+s*s),c=l*s,d=-l*o,g=t[0]+c,y=t[1]+d,k=e[0]+c,Y=e[1]+d,nt=(g+k)/2,L=(y+Y)/2,T=k-g,H=Y-y,et=T*T+H*H,X=n-r,K=g*Y-k*y,bt=(H<0?-1:1)*Math.sqrt(Math.max(0,X*X*et-K*K)),vt=(K*H-T*bt)/et,mt=(-K*T-H*bt)/et,pt=(K*H+T*bt)/et,Nt=(-K*T+H*bt)/et,Ft=vt-nt,qt=mt-L,Vt=pt-nt,Gt=Nt-L;return Ft*Ft+qt*qt>Vt*Vt+Gt*Gt&&(vt=pt,mt=Nt),[[vt-c,mt-d],[vt*n/X,mt*n/X]]}function ru(t){var e=Sn,n=Gn,r=Hn,i=Ge,o=i.key,s=.7;function l(c){var Y,d=[],g=[],y=-1,k=c.length,nt=ve(e),L=ve(n);function T(){d.push("M",i(t(g),s))}for(;++y<k;)r.call(this,Y=c[y],y)?g.push([+nt.call(this,Y,y),+L.call(this,Y,y)]):g.length&&(T(),g=[]);return g.length&&T(),d.length?d.join(""):null}return l.x=function(c){return arguments.length?(e=c,l):e},l.y=function(c){return arguments.length?(n=c,l):n},l.defined=function(c){return arguments.length?(r=c,l):r},l.interpolate=function(c){return arguments.length?(o="function"==typeof c?i=c:(i=Gi.get(c)||Ge).key,l):o},l.tension=function(c){return arguments.length?(s=c,l):s},l}u.svg.line=function(){return ru(D)};var Gi=u.map({linear:Ge,"linear-closed":iu,step:function Rs(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")},"step-before":qi,"step-after":ji,basis:ou,"basis-open":function Xs(t){if(t.length<4)return Ge(t);for(var i,e=[],n=-1,r=t.length,o=[0],s=[0];++n<3;)o.push((i=t[n])[0]),s.push(i[1]);for(e.push(Be(sn,o)+","+Be(sn,s)),--n;++n<r;)i=t[n],o.shift(),o.push(i[0]),s.shift(),s.push(i[1]),Zi(e,o,s);return e.join("")},"basis-closed":function Gs(t){for(var e,o,n=-1,r=t.length,i=r+4,s=[],l=[];++n<4;)s.push((o=t[n%r])[0]),l.push(o[1]);for(e=[Be(sn,s),",",Be(sn,l)],--n;++n<i;)o=t[n%r],s.shift(),s.push(o[0]),l.shift(),l.push(o[1]),Zi(e,s,l);return e.join("")},bundle:function qs(t,e){var n=t.length-1;if(n)for(var c,d,r=t[0][0],i=t[0][1],o=t[n][0]-r,s=t[n][1]-i,l=-1;++l<=n;)(c=t[l])[0]=e*c[0]+(1-e)*(r+(d=l/n)*o),c[1]=e*c[1]+(1-e)*(i+d*s);return ou(t)},cardinal:function Vs(t,e){return t.length<3?Ge(t):t[0]+Gr(t,Ui(t,e))},"cardinal-open":function Ys(t,e){return t.length<4?Ge(t):t[1]+Gr(t.slice(1,-1),Ui(t,e))},"cardinal-closed":function Hs(t,e){return t.length<3?iu(t):t[0]+Gr((t.push(t[0]),t),Ui([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function Zs(t){return t.length<3?Ge(t):t[0]+Gr(t,function Us(t){for(var n,r,i,o,e=[],s=function js(t){for(var e=0,n=t.length-1,r=[],i=t[0],o=t[1],s=r[0]=Ki(i,o);++e<n;)r[e]=(s+(s=Ki(i=o,o=t[e+1])))/2;return r[e]=s,r}(t),l=-1,c=t.length-1;++l<c;)n=Ki(t[l],t[l+1]),R(n)<Ht?s[l]=s[l+1]=0:(o=(r=s[l]/n)*r+(i=s[l+1]/n)*i)>9&&(o=3*n/Math.sqrt(o),s[l]=o*r,s[l+1]=o*i);for(l=-1;++l<=c;)o=(t[Math.min(c,l+1)][0]-t[Math.max(0,l-1)][0])/(6*(1+s[l]*s[l])),e.push([o||0,s[l]*o||0]);return e}(t))}});function Ge(t){return t.length>1?t.join("L"):t+"Z"}function iu(t){return t.join("L")+"Z"}function qi(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function ji(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function Gr(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Ge(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],s=e[0],l=s,c=1;if(n&&(r+="Q"+(o[0]-2*s[0]/3)+","+(o[1]-2*s[1]/3)+","+o[0]+","+o[1],i=t[1],c=2),e.length>1){o=t[c],c++,r+="C"+(i[0]+s[0])+","+(i[1]+s[1])+","+(o[0]-(l=e[1])[0])+","+(o[1]-l[1])+","+o[0]+","+o[1];for(var d=2;d<e.length;d++,c++)r+="S"+((o=t[c])[0]-(l=e[d])[0])+","+(o[1]-l[1])+","+o[0]+","+o[1]}if(n){var g=t[c];r+="Q"+(o[0]+2*l[0]/3)+","+(o[1]+2*l[1]/3)+","+g[0]+","+g[1]}return r}function Ui(t,e){for(var i,n=[],r=(1-e)/2,o=t[0],s=t[1],l=1,c=t.length;++l<c;)i=o,o=s,n.push([r*((s=t[l])[0]-i[0]),r*(s[1]-i[1])]);return n}function ou(t){if(t.length<3)return Ge(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],s=[i,i,i,(r=t[1])[0]],l=[o,o,o,r[1]],c=[i,",",o,"L",Be(sn,s),",",Be(sn,l)];for(t.push(t[n-1]);++e<=n;)r=t[e],s.shift(),s.push(r[0]),l.shift(),l.push(r[1]),Zi(c,s,l);return t.pop(),c.push("L",r),c.join("")}function Be(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}Gi.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var au=[0,2/3,1/3,0],uu=[0,1/3,2/3,0],sn=[0,1/6,2/3,1/6];function Zi(t,e,n){t.push("C",Be(au,e),",",Be(au,n),",",Be(uu,e),",",Be(uu,n),",",Be(sn,e),",",Be(sn,n))}function Ki(t,e){return(e[1]-t[1])/(e[0]-t[0])}function lu(t){for(var e,i,o,n=-1,r=t.length;++n<r;)o=(e=t[n])[1]-ae,e[0]=(i=e[0])*Math.cos(o),e[1]=i*Math.sin(o);return t}function su(t){var e=Sn,n=Sn,r=0,i=Gn,o=Hn,s=Ge,l=s.key,c=s,d="L",g=.7;function y(k){var et,mt,pt,Y=[],nt=[],L=[],T=-1,H=k.length,X=ve(e),K=ve(r),bt=e===n?function(){return mt}:ve(n),vt=r===i?function(){return pt}:ve(i);function Nt(){Y.push("M",s(t(L),g),d,c(t(nt.reverse()),g),"Z")}for(;++T<H;)o.call(this,et=k[T],T)?(nt.push([mt=+X.call(this,et,T),pt=+K.call(this,et,T)]),L.push([+bt.call(this,et,T),+vt.call(this,et,T)])):nt.length&&(Nt(),nt=[],L=[]);return nt.length&&Nt(),Y.length?Y.join(""):null}return y.x=function(k){return arguments.length?(e=n=k,y):n},y.x0=function(k){return arguments.length?(e=k,y):e},y.x1=function(k){return arguments.length?(n=k,y):n},y.y=function(k){return arguments.length?(r=i=k,y):i},y.y0=function(k){return arguments.length?(r=k,y):r},y.y1=function(k){return arguments.length?(i=k,y):i},y.defined=function(k){return arguments.length?(o=k,y):o},y.interpolate=function(k){return arguments.length?(l="function"==typeof k?s=k:(s=Gi.get(k)||Ge).key,c=s.reverse||s,d=s.closed?"M":"L",y):l},y.tension=function(k){return arguments.length?(g=k,y):g},y}function Ks(t){return t.radius}function cu(t){return[t.x,t.y]}function $s(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-ae;return[n*Math.cos(r),n*Math.sin(r)]}}function Qs(){return 64}function Js(){return"circle"}function fu(t){var e=Math.sqrt(t/Bt);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}u.svg.line.radial=function(){var t=ru(lu);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},qi.reverse=ji,ji.reverse=qi,u.svg.area=function(){return su(D)},u.svg.area.radial=function(){var t=su(lu);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},u.svg.chord=function(){var t=ki,e=wi,n=Ks,r=eu,i=nu;function o(g,y){var k=s(this,t,g,y),Y=s(this,e,g,y);return"M"+k.p0+c(k.r,k.p1,k.a1-k.a0)+(function l(g,y){return g.a0==y.a0&&g.a1==y.a1}(k,Y)?d(0,0,0,k.p0):d(0,0,0,Y.p0)+c(Y.r,Y.p1,Y.a1-Y.a0)+d(0,0,0,k.p0))+"Z"}function s(g,y,k,Y){var nt=y.call(g,k,Y),L=n.call(g,nt,Y),T=r.call(g,nt,Y)-ae,H=i.call(g,nt,Y)-ae;return{r:L,a0:T,a1:H,p0:[L*Math.cos(T),L*Math.sin(T)],p1:[L*Math.cos(H),L*Math.sin(H)]}}function c(g,y,k){return"A"+g+","+g+" 0 "+ +(k>Bt)+",1 "+y}function d(g,y,k,Y){return"Q 0,0 "+Y}return o.radius=function(g){return arguments.length?(n=ve(g),o):n},o.source=function(g){return arguments.length?(t=ve(g),o):t},o.target=function(g){return arguments.length?(e=ve(g),o):e},o.startAngle=function(g){return arguments.length?(r=ve(g),o):r},o.endAngle=function(g){return arguments.length?(i=ve(g),o):i},o},u.svg.diagonal=function(){var t=ki,e=wi,n=cu;function r(i,o){var s=t.call(this,i,o),l=e.call(this,i,o),c=(s.y+l.y)/2,d=[s,{x:s.x,y:c},{x:l.x,y:c},l];return"M"+(d=d.map(n))[0]+"C"+d[1]+" "+d[2]+" "+d[3]}return r.source=function(i){return arguments.length?(t=ve(i),r):t},r.target=function(i){return arguments.length?(e=ve(i),r):e},r.projection=function(i){return arguments.length?(n=i,r):n},r},u.svg.diagonal.radial=function(){var t=u.svg.diagonal(),e=cu,n=t.projection;return t.projection=function(r){return arguments.length?n($s(e=r)):e},t},u.svg.symbol=function(){var t=Js,e=Qs;function n(r,i){return(du.get(t.call(this,r,i))||fu)(e.call(this,r,i))}return n.type=function(r){return arguments.length?(t=ve(r),n):t},n.size=function(r){return arguments.length?(e=ve(r),n):e},n};var du=u.map({circle:fu,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*hu)),n=e*hu;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/qr),n=e*qr/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/qr),n=e*qr/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});u.svg.symbolTypes=du.keys();var qr=Math.sqrt(3),hu=Math.tan(30*Jt);F.transition=function(t){for(var i,o,e=bn||++pu,n=Qi(t),r=[],s=Ur||{time:Date.now(),ease:El,delay:0,duration:250},l=-1,c=this.length;++l<c;){r.push(i=[]);for(var d=this[l],g=-1,y=d.length;++g<y;)(o=d[g])&&Zr(o,g,n,e,s),i.push(o)}return Jn(r,n,e)},F.interrupt=function(t){return this.each(null==t?jr:gu(Qi(t)))};var jr=gu(Qi());function gu(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Jn(t,e,n){return wt(t,_e),t.namespace=e,t.id=n,t}var bn,Ur,_e=[],pu=0;function $i(t,e,n,r){var i=t.id,o=t.namespace;return ie(t,"function"==typeof n?function(s,l,c){s[o][i].tween.set(e,r(n.call(s,s.__data__,l,c)))}:(n=r(n),function(s){s[o][i].tween.set(e,n)}))}function tc(t){return null==t&&(t=""),function(){this.textContent=t}}function Qi(t){return null==t?"__transition__":"__transition_"+t+"__"}function Zr(t,e,n,r,i){var l,c,d,g,y,o=t[n]||(t[n]={active:0,count:0}),s=o[r];function Y(L){var T=o.active,H=o[T];for(var et in H&&(H.timer.c=null,H.timer.t=NaN,--o.count,delete o[T],H.event&&H.event.interrupt.call(t,t.__data__,H.index)),o)if(+et<r){var X=o[et];X.timer.c=null,X.timer.t=NaN,--o.count,delete o[et]}c.c=nt,dr(function(){return c.c&&nt(L||1)&&(c.c=null,c.t=NaN),1},0,l),o.active=r,s.event&&s.event.start.call(t,t.__data__,e),y=[],s.tween.forEach(function(K,bt){(bt=bt.call(t,t.__data__,e))&&y.push(bt)}),g=s.ease,d=s.duration}function nt(L){for(var T=L/d,H=g(T),et=y.length;et>0;)y[--et].call(t,H);if(T>=1)return s.event&&s.event.end.call(t,t.__data__,e),--o.count?delete o[r]:delete t[n],1}s||(c=dr(function k(L){var T=s.delay;if(c.t=T+l,T<=L)return Y(L-T);c.c=Y},0,l=i.time),s=o[r]={tween:new A,time:l,timer:c,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++o.count)}_e.call=F.call,_e.empty=F.empty,_e.node=F.node,_e.size=F.size,u.transition=function(t,e){return t&&t.transition?bn?t.transition(e):t:u.selection().transition(t)},u.transition.prototype=_e,_e.select=function(t){var i,o,s,e=this.id,n=this.namespace,r=[];t=ft(t);for(var l=-1,c=this.length;++l<c;){r.push(i=[]);for(var d=this[l],g=-1,y=d.length;++g<y;)(s=d[g])&&(o=t.call(s,s.__data__,g,l))?("__data__"in s&&(o.__data__=s.__data__),Zr(o,g,n,e,s[n][e]),i.push(o)):i.push(null)}return Jn(r,n,e)},_e.selectAll=function(t){var i,o,s,l,c,e=this.id,n=this.namespace,r=[];t=xt(t);for(var d=-1,g=this.length;++d<g;)for(var y=this[d],k=-1,Y=y.length;++k<Y;)if(s=y[k]){c=s[n][e],o=t.call(s,s.__data__,k,d),r.push(i=[]);for(var nt=-1,L=o.length;++nt<L;)(l=o[nt])&&Zr(l,nt,n,e,c),i.push(l)}return Jn(r,n,e)},_e.filter=function(t){var n,i,e=[];"function"!=typeof t&&(t=Pt(t));for(var o=0,s=this.length;o<s;o++){e.push(n=[]);for(var r,l=0,c=(r=this[o]).length;l<c;l++)(i=r[l])&&t.call(i,i.__data__,l,o)&&n.push(i)}return Jn(e,this.namespace,this.id)},_e.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):ie(this,null==e?function(i){i[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},_e.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var n="transform"==t?Ea:xn,r=u.ns.qualify(t);function i(){this.removeAttribute(r)}function o(){this.removeAttributeNS(r.space,r.local)}function s(c){return null==c?i:(c+="",function(){var g,d=this.getAttribute(r);return d!==c&&(g=n(d,c),function(y){this.setAttribute(r,g(y))})})}function l(c){return null==c?o:(c+="",function(){var g,d=this.getAttributeNS(r.space,r.local);return d!==c&&(g=n(d,c),function(y){this.setAttributeNS(r.space,r.local,g(y))})})}return $i(this,"attr."+t,e,r.local?l:s)},_e.attrTween=function(t,e){var n=u.ns.qualify(t);return this.tween("attr."+t,n.local?function i(o,s){var l=e.call(this,o,s,this.getAttributeNS(n.space,n.local));return l&&function(c){this.setAttributeNS(n.space,n.local,l(c))}}:function r(o,s){var l=e.call(this,o,s,this.getAttribute(n));return l&&function(c){this.setAttribute(n,l(c))}})},_e.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.style(n,t[n],e);return this}n=""}function i(){this.style.removeProperty(t)}function o(s){return null==s?i:(s+="",function(){var c,l=v(this).getComputedStyle(this,null).getPropertyValue(t);return l!==s&&(c=xn(l,s),function(d){this.style.setProperty(t,c(d),n)})})}return $i(this,"style."+t,e,o)},_e.styleTween=function(t,e,n){function r(i,o){var s=e.call(this,i,o,v(this).getComputedStyle(this,null).getPropertyValue(t));return s&&function(l){this.style.setProperty(t,s(l),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,r)},_e.text=function(t){return $i(this,"text",t,tc)},_e.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},_e.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=u.ease.apply(u,arguments)),ie(this,function(r){r[n][e].ease=t}))},_e.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:ie(this,"function"==typeof t?function(r,i,o){r[n][e].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[n][e].delay=t}))},_e.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:ie(this,"function"==typeof t?function(r,i,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},_e.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Ur,o=bn;try{bn=n,ie(this,function(s,l,c){Ur=s[r][n],t.call(s,s.__data__,l,c)})}finally{Ur=i,bn=o}}else ie(this,function(s){var l=s[r][n];(l.event||(l.event=u.dispatch("start","end","interrupt"))).on(t,e)});return this},_e.transition=function(){for(var i,s,l,t=this.id,e=++pu,n=this.namespace,r=[],c=0,d=this.length;c<d;c++){r.push(i=[]);for(var o,g=0,y=(o=this[c]).length;g<y;g++)(s=o[g])&&Zr(s,g,n,e,{time:(l=s[n][t]).time,ease:l.ease,delay:l.delay+l.duration,duration:l.duration}),i.push(s)}return Jn(r,n,e)},u.svg.axis=function(){var l,t=u.scale.linear(),e=vu,n=6,r=6,i=3,o=[10],s=null;function c(d){d.each(function(){var K,g=u.select(this),y=this.__chart__||t,k=this.__chart__=t.copy(),Y=null==s?k.ticks?k.ticks.apply(k,o):k.domain():s,nt=null==l?k.tickFormat?k.tickFormat.apply(k,o):D:l,L=g.selectAll(".tick").data(Y,k),T=L.enter().insert("g",".domain").attr("class","tick").style("opacity",Ht),H=u.transition(L.exit()).style("opacity",Ht).remove(),et=u.transition(L.order()).style("opacity",1),X=Math.max(n,0)+i,bt=Br(k),vt=g.selectAll(".domain").data([0]),mt=(vt.enter().append("path").attr("class","domain"),u.transition(vt));T.append("line"),T.append("text");var kt,Lt,It,At,pt=T.select("line"),Nt=et.select("line"),Ft=L.select("text").text(nt),qt=T.select("text"),Vt=et.select("text"),Gt="top"===e||"left"===e?-1:1;if("bottom"===e||"top"===e?(K=nc,kt="x",It="y",Lt="x2",At="y2",Ft.attr("dy",Gt<0?"0em":".71em").style("text-anchor","middle"),mt.attr("d","M"+bt[0]+","+Gt*r+"V0H"+bt[1]+"V"+Gt*r)):(K=rc,kt="y",It="x",Lt="y2",At="x2",Ft.attr("dy",".32em").style("text-anchor",Gt<0?"end":"start"),mt.attr("d","M"+Gt*r+","+bt[0]+"H0V"+bt[1]+"H"+Gt*r)),pt.attr(At,Gt*n),qt.attr(It,Gt*X),Nt.attr(Lt,0).attr(At,Gt*n),Vt.attr(kt,0).attr(It,Gt*X),k.rangeBand){var Tt=k,Ut=Tt.rangeBand()/2;y=k=function(ue){return Tt(ue)+Ut}}else y.rangeBand?y=k:H.call(K,k,y);T.call(K,y,k),et.call(K,k,k)})}return c.scale=function(d){return arguments.length?(t=d,c):t},c.orient=function(d){return arguments.length?(e=d in ec?d+"":vu,c):e},c.ticks=function(){return arguments.length?(o=m(arguments),c):o},c.tickValues=function(d){return arguments.length?(s=d,c):s},c.tickFormat=function(d){return arguments.length?(l=d,c):l},c.tickSize=function(d){var g=arguments.length;return g?(n=+d,r=+arguments[g-1],c):n},c.innerTickSize=function(d){return arguments.length?(n=+d,c):n},c.outerTickSize=function(d){return arguments.length?(r=+d,c):r},c.tickPadding=function(d){return arguments.length?(i=+d,c):i},c.tickSubdivide=function(){return arguments.length&&c},c};var vu="bottom",ec={top:1,right:1,bottom:1,left:1};function nc(t,e,n){t.attr("transform",function(r){var i=e(r);return"translate("+(isFinite(i)?i:n(r))+",0)"})}function rc(t,e,n){t.attr("transform",function(r){var i=e(r);return"translate(0,"+(isFinite(i)?i:n(r))+")"})}u.svg.brush=function(){var o,s,t=ot(g,"brushstart","brush","brushend"),e=null,n=null,r=[0,0],i=[0,0],l=!0,c=!0,d=Ji[0];function g(L){L.each(function(){var T=u.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",nt).on("touchstart.brush",nt),H=T.selectAll(".background").data([0]);H.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),T.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var et=T.selectAll(".resize").data(d,D);et.exit().remove(),et.enter().append("g").attr("class",function(vt){return"resize "+vt}).style("cursor",function(vt){return ic[vt]}).append("rect").attr("x",function(vt){return/[ew]$/.test(vt)?-3:null}).attr("y",function(vt){return/^[ns]/.test(vt)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),et.style("display",g.empty()?"none":null);var bt,X=u.transition(T),K=u.transition(H);e&&(bt=Br(e),K.attr("x",bt[0]).attr("width",bt[1]-bt[0]),k(X)),n&&(bt=Br(n),K.attr("y",bt[0]).attr("height",bt[1]-bt[0]),Y(X)),y(X)})}function y(L){L.selectAll(".resize").attr("transform",function(T){return"translate("+r[+/e$/.test(T)]+","+i[+/^s/.test(T)]+")"})}function k(L){L.select(".extent").attr("x",r[0]),L.selectAll(".extent,.n>rect,.s>rect").attr("width",r[1]-r[0])}function Y(L){L.select(".extent").attr("y",i[0]),L.selectAll(".extent,.e>rect,.w>rect").attr("height",i[1]-i[0])}function nt(){var pt,Ft,L=this,T=u.select(u.event.target),H=t.of(L,arguments),et=u.select(L),X=T.datum(),K=!/^(n|s)$/.test(X)&&e,bt=!/^(e|w)$/.test(X)&&n,vt=T.classed("extent"),mt=jt(L),Nt=u.mouse(L),qt=u.select(v(L)).on("keydown.brush",kt).on("keyup.brush",Lt);if(u.event.changedTouches?qt.on("touchmove.brush",It).on("touchend.brush",Tt):qt.on("mousemove.brush",It).on("mouseup.brush",Tt),et.interrupt().selectAll("*").interrupt(),vt)Nt[0]=r[0]-Nt[0],Nt[1]=i[0]-Nt[1];else if(X){var Vt=+/w$/.test(X),Gt=+/^n/.test(X);Ft=[r[1-Vt]-Nt[0],i[1-Gt]-Nt[1]],Nt[0]=r[Vt],Nt[1]=i[Gt]}else u.event.altKey&&(pt=Nt.slice());function kt(){32==u.event.keyCode&&(vt||(pt=null,Nt[0]-=r[1],Nt[1]-=i[1],vt=2),ut())}function Lt(){32==u.event.keyCode&&2==vt&&(Nt[0]+=r[1],Nt[1]+=i[1],vt=0,ut())}function It(){var Ut=u.mouse(L),ue=!1;Ft&&(Ut[0]+=Ft[0],Ut[1]+=Ft[1]),vt||(u.event.altKey?(pt||(pt=[(r[0]+r[1])/2,(i[0]+i[1])/2]),Nt[0]=r[+(Ut[0]<pt[0])],Nt[1]=i[+(Ut[1]<pt[1])]):pt=null),K&&At(Ut,e,0)&&(k(et),ue=!0),bt&&At(Ut,n,1)&&(Y(et),ue=!0),ue&&(y(et),H({type:"brush",mode:vt?"move":"resize"}))}function At(Ut,ue,le){var Oe,Fe,ge=Br(ue),me=ge[0],Se=ge[1],De=Nt[le],Ee=le?i:r,ze=Ee[1]-Ee[0];if(vt&&(me-=De,Se-=ze+De),Oe=(le?c:l)?Math.max(me,Math.min(Se,Ut[le])):Ut[le],vt?Fe=(Oe+=De)+ze:(pt&&(De=Math.max(me,Math.min(Se,2*pt[le]-Oe))),De<Oe?(Fe=Oe,Oe=De):Fe=De),Ee[0]!=Oe||Ee[1]!=Fe)return le?s=null:o=null,Ee[0]=Oe,Ee[1]=Fe,!0}function Tt(){It(),et.style("pointer-events","all").selectAll(".resize").style("display",g.empty()?"none":null),u.select("body").style("cursor",null),qt.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),mt(),H({type:"brushend"})}et.style("pointer-events","none").selectAll(".resize").style("display",null),u.select("body").style("cursor",T.style("cursor")),H({type:"brushstart"}),It()}return g.event=function(L){L.each(function(){var T=t.of(this,arguments),H={x:r,y:i,i:o,j:s},et=this.__chart__||H;this.__chart__=H,bn?u.select(this).transition().each("start.brush",function(){o=et.i,s=et.j,r=et.x,i=et.y,T({type:"brushstart"})}).tween("brush:brush",function(){var X=Tr(r,H.x),K=Tr(i,H.y);return o=s=null,function(bt){r=H.x=X(bt),i=H.y=K(bt),T({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=H.i,s=H.j,T({type:"brush",mode:"resize"}),T({type:"brushend"})}):(T({type:"brushstart"}),T({type:"brush",mode:"resize"}),T({type:"brushend"}))})},g.x=function(L){return arguments.length?(d=Ji[!(e=L)<<1|!n],g):e},g.y=function(L){return arguments.length?(d=Ji[!e<<1|!(n=L)],g):n},g.clamp=function(L){return arguments.length?(e&&n?(l=!!L[0],c=!!L[1]):e?l=!!L:n&&(c=!!L),g):e&&n?[l,c]:e?l:n?c:null},g.extent=function(L){var T,H,et,X,K;return arguments.length?(e&&(T=L[0],H=L[1],n&&(T=T[0],H=H[0]),o=[T,H],e.invert&&(T=e(T),H=e(H)),H<T&&(K=T,T=H,H=K),(T!=r[0]||H!=r[1])&&(r=[T,H])),n&&(et=L[0],X=L[1],e&&(et=et[1],X=X[1]),s=[et,X],n.invert&&(et=n(et),X=n(X)),X<et&&(K=et,et=X,X=K),(et!=i[0]||X!=i[1])&&(i=[et,X])),g):(e&&(o?(T=o[0],H=o[1]):(T=r[0],H=r[1],e.invert&&(T=e.invert(T),H=e.invert(H)),H<T&&(K=T,T=H,H=K))),n&&(s?(et=s[0],X=s[1]):(et=i[0],X=i[1],n.invert&&(et=n.invert(et),X=n.invert(X)),X<et&&(K=et,et=X,X=K))),e&&n?[[T,et],[H,X]]:e?[T,H]:n&&[et,X])},g.clear=function(){return g.empty()||(r=[0,0],i=[0,0],o=s=null),g},g.empty=function(){return!!e&&r[0]==r[1]||!!n&&i[0]==i[1]},u.rebind(g,t,"on")};var ic={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ji=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],to=Kt.format=Ao.timeFormat,mu=to.utc,yu=mu("%Y-%m-%dT%H:%M:%S.%LZ");function eo(t){return t.toISOString()}function no(t,e,n){function r(o){return t(o)}function i(o,s){var c=(o[1]-o[0])/s,d=u.bisect(Kr,c);return d==Kr.length?[e.year,Fn(o.map(function(g){return g/31536e6}),s)[2]]:d?e[c/Kr[d-1]<Kr[d]/c?d-1:d]:[ac,Fn(o,s)[2]]}return r.invert=function(o){return Mn(t.invert(o))},r.domain=function(o){return arguments.length?(t.domain(o),r):t.domain().map(Mn)},r.nice=function(o,s){var l=r.domain(),c=zn(l),d=null==o?i(c,10):"number"==typeof o&&i(c,o);function g(y){return!isNaN(y)&&!o.range(y,Mn(+y+1),s).length}return d&&(o=d[0],s=d[1]),r.domain(Ir(l,s>1?{floor:function(y){for(;g(y=o.floor(y));)y=Mn(y-1);return y},ceil:function(y){for(;g(y=o.ceil(y));)y=Mn(+y+1);return y}}:o))},r.ticks=function(o,s){var l=zn(r.domain()),c=null==o?i(l,10):"number"==typeof o?i(l,o):!o.range&&[{range:o},s];return c&&(o=c[0],s=c[1]),o.range(l[0],Mn(+l[1]+1),s<1?1:s)},r.tickFormat=function(){return n},r.copy=function(){return no(t.copy(),e,n)},Hi(r,t)}function Mn(t){return new Date(t)}to.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?eo:yu,eo.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},eo.toString=yu.toString,Kt.second=dn(function(t){return new Pe(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Kt.seconds=Kt.second.range,Kt.seconds.utc=Kt.second.utc.range,Kt.minute=dn(function(t){return new Pe(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Kt.minutes=Kt.minute.range,Kt.minutes.utc=Kt.minute.utc.range,Kt.hour=dn(function(t){var e=t.getTimezoneOffset()/60;return new Pe(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Kt.hours=Kt.hour.range,Kt.hours.utc=Kt.hour.utc.range,Kt.month=dn(function(t){return(t=Kt.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Kt.months=Kt.month.range,Kt.months.utc=Kt.month.utc.range;var Kr=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],ro=[[Kt.second,1],[Kt.second,5],[Kt.second,15],[Kt.second,30],[Kt.minute,1],[Kt.minute,5],[Kt.minute,15],[Kt.minute,30],[Kt.hour,1],[Kt.hour,3],[Kt.hour,6],[Kt.hour,12],[Kt.day,1],[Kt.day,2],[Kt.week,1],[Kt.month,1],[Kt.month,3],[Kt.year,1]],oc=to.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Hn]]),ac={range:function(t,e,n){return u.range(Math.ceil(t/n)*n,+e,n).map(Mn)},floor:D,ceil:D};ro.year=Kt.year,Kt.scale=function(){return no(u.scale.linear(),ro,oc)};var xu=ro.map(function(t){return[t[0].utc,t[1]]}),uc=mu.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Hn]]);function lc(t){return JSON.parse(t.responseText)}function sc(t){var e=x.createRange();return e.selectNode(x.body),e.createContextualFragment(t.responseText)}xu.year=Kt.year.utc,Kt.scale.utc=function(){return no(u.scale.linear(),xu,uc)},u.text=ci(function(t){return t.responseText}),u.json=function(t,e){return ur(t,"application/json",lc,e)},u.html=function(t,e){return ur(t,"text/html",sc,e)},u.xml=ci(function(t){return t.responseXML}),this.d3=u,void 0!==(a="function"==typeof(f=u)?f.call(Ne,ye,Ne,en):f)&&(en.exports=a)}()},7818:(en,Ne,ye)=>{"use strict";var a=ye(7100);Ne.ZV=a.NvD3Component;var u=ye(5988);Ne.PW=u.NvD3Module},7100:(en,Ne,ye)=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});var f=ye(5e3),a=ye(5e3),u=function(){function w(m){this.el=m.nativeElement}return w.prototype.ngOnChanges=function(m){this.options&&(this.chart&&this.chartType===this.options.chart.type?this.updateWithOptions(this.options):this.initChart(this.options))},w.prototype.ngOnDestroy=function(){this.clearElement()},w.prototype.initChart=function(m){var x=this;this.clearElement(),m&&(this.chart=nv.models[m.chart.type](),this.chartType=this.options.chart.type,this.chart.id=Math.random().toString(36).substr(2,15),this.updateWithOptions(m),nv.addGraph(function(){if(x.chart)return x.chart.resizeHandler&&x.chart.resizeHandler.clear(),x.chart.resizeHandler=nv.utils.windowResize(function(){x.chart&&x.chart.update&&x.chart.update()}),x.chart},m.chart.callback))},w.prototype.updateWithOptions=function(m){if(m){for(var x in this.chart)this.chart.hasOwnProperty(x)&&("_"===x[0]||["clearHighlights","highlightPoint","id","options","resizeHandler","state","open","close","tooltipContent"].indexOf(x)>=0||("dispatch"===x?this.configureEvents(this.chart[x],m.chart[x]):["bars","bars1","bars2","boxplot","bullet","controls","discretebar","distX","distY","interactiveLayer","legend","lines","lines1","lines2","multibar","pie","scatter","scatters1","scatters2","sparkline","stack1","stack2","sunburst","tooltip","x2Axis","xAxis","y1Axis","y2Axis","y3Axis","y4Axis","yAxis","yAxis1","yAxis2","sankeyChart"].indexOf(x)>=0||"stacked"===x&&"stackedAreaChart"===m.chart.type?this.configure(this.chart[x],m.chart[x],m.chart.type):("xTickFormat"===x||"yTickFormat"===x)&&"lineWithFocusChart"===m.chart.type||"tooltips"===x&&"boxPlotChart"===m.chart.type||("tooltipXContent"===x||"tooltipYContent"===x)&&"scatterChart"===m.chart.type||null==m.chart[x]||this.chart[x](m.chart[x])));this.updateWithData(this.data)}},w.prototype.updateWithData=function(m){if(m){var x=this.el.querySelector("svg");this.svg=x?d3.select(x):d3.select(this.el).append("svg"),this.updateSize(),this.svg.datum(m).call(this.chart)}},w.prototype.updateSize=function(){if(this.svg){var m=void 0,x=void 0;(m=this.options.chart.height)&&(isNaN(+m)||(m+="px"),this.svg.attr("height",m).style({height:m})),(x=this.options.chart.width)?(isNaN(+x)||(x+="px"),this.svg.attr("width",x).style({width:x})):this.svg.attr("width","100%").style({width:"100%"})}},w.prototype.configure=function(m,x,P){if(m&&x)for(var v in m)m.hasOwnProperty(v)&&("_"===v[0]||("dispatch"===v?this.configureEvents(m[v],x[v]):"tooltip"===v?this.configure(m[v],x[v],P):"contentGenerator"===v?x[v]&&m[v](x[v]):-1===["axis","clearHighlights","defined","highlightPoint","nvPointerEventsClass","options","rangeBand","rangeBands","scatter","open","close"].indexOf(v)&&(null==x[v]||m[v](x[v]))))},w.prototype.configureEvents=function(m,x){if(m&&x)for(var P in m)m.hasOwnProperty(P)&&(null==x[P]||m.on(P+"._",x[P]))},w.prototype.clearElement=function(){if(this.el.innerHTML="",this.chart&&this.chart.tooltip&&this.chart.tooltip.id&&d3.select("#"+this.chart.tooltip.id()).remove(),nv.graphs&&this.chart)for(var m=nv.graphs.length-1;m>=0;m--)nv.graphs[m]&&nv.graphs[m].id===this.chart.id&&nv.graphs.splice(m,1);nv.tooltip&&nv.tooltip.cleanup&&nv.tooltip.cleanup(),this.chart&&this.chart.resizeHandler&&this.chart.resizeHandler.clear(),this.chart=null},w.\u0275fac=function(x){return new(x||w)(a.\u0275\u0275directiveInject(a.ElementRef))},w.\u0275cmp=a.\u0275\u0275defineComponent({type:w,selectors:[["nvd3"]],inputs:{options:"options",data:"data"},features:[a.\u0275\u0275NgOnChangesFeature],decls:0,vars:0,template:function(x,P){},encapsulation:2}),w}();u.ctorParameters=function(){return[{type:f.ElementRef}]},u.propDecorators={options:[{type:f.Input}],data:[{type:f.Input}]},Ne.NvD3Component=u},5988:(en,Ne,ye)=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0}),ye(5e3),ye(7100);var u=ye(5e3),m=(ye(7100),function(){function x(){}return x.\u0275fac=function(v){return new(v||x)},x.\u0275mod=u.\u0275\u0275defineNgModule({type:x}),x.\u0275inj=u.\u0275\u0275defineInjector({}),x}());m.ctorParameters=function(){return[]},Ne.NvD3Module=m},2747:(en,Ne,ye)=>{var f;(f={dev:!1}).tooltip=f.tooltip||{},f.utils=f.utils||{},f.models=f.models||{},f.charts={},f.logs={},f.dom={},"undefined"==typeof d3&&(d3=ye(5112)),f.dispatch=d3.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var u=Array.prototype.slice.call(arguments,1),w=this,m=function(){},x=function(){return w.apply(this instanceof m&&a?this:a,u.concat(Array.prototype.slice.call(arguments)))};return m.prototype=this.prototype,x.prototype=new m,x}),f.dev&&(f.dispatch.on("render_start",function(a){f.logs.startTime=+new Date}),f.dispatch.on("render_end",function(a){f.logs.endTime=+new Date,f.logs.totalTime=f.logs.endTime-f.logs.startTime,f.log("total",f.logs.totalTime)})),f.log=function(){if(f.dev&&window.console&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(f.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind){var a=Function.prototype.bind.call(console.log,console);a.apply(console,arguments)}return arguments[arguments.length-1]},f.deprecated=function(a,u){console&&console.warn&&console.warn("nvd3 warning: `"+a+"` has been deprecated. ",u||"")},f.render=function(u){u=u||1,f.render.active=!0,f.dispatch.render_start();var w=function(){for(var m,x,P=0;P<u&&(x=f.render.queue[P]);P++)m=x.generate(),typeof x.callback==typeof Function&&x.callback(m);f.render.queue.splice(0,P),f.render.queue.length?setTimeout(w):(f.dispatch.render_end(),f.render.active=!1)};setTimeout(w)},f.render.active=!1,f.render.queue=[],f.addGraph=function(a){typeof arguments[0]==typeof Function&&(a={generate:arguments[0],callback:arguments[1]}),f.render.queue.push(a),f.render.active||f.render()},en.exports=f,"undefined"!=typeof window&&(window.nv=f),f.dom.write=function(a){return void 0!==window.fastdom?fastdom.mutate(a):a()},f.dom.read=function(a){return void 0!==window.fastdom?fastdom.measure(a):a()},f.interactiveGuideline=function(){"use strict";var a={left:0,top:0},u=null,w=null,m=d3.scale.linear(),x=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick","elementMouseDown","elementMouseUp"),P=!0,v=null,C=f.models.tooltip(),W=window.ActiveXObject;function J(tt){tt.each(function(G){var rt=d3.select(this),j=u||960,$=w||400,st=rt.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([G]);function z(){var R=d3.event.clientX-this.getBoundingClientRect().left,V=d3.event.clientY-this.getBoundingClientRect().top,E=!0,A=!1;if(W&&(R=d3.event.offsetX,V=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(E=!1),d3.event.target.className.baseVal.match("nv-legend")&&(A=!0)),E&&(R-=a.left,V-=a.top),"mouseout"===d3.event.type||R<0||V<0||R>j||V>$||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||A){if(W&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(C.nvPointerEventsClass)))return;return x.elementMouseout({mouseX:R,mouseY:V}),J.renderGuideLine(null),void C.hidden(!0)}C.hidden(!1);var B=void 0;if("function"==typeof m.rangeBands){var M=d3.bisect(m.range(),R)-1;if(!(m.range()[M]+m.rangeBand()>=R))return x.elementMouseout({mouseX:R,mouseY:V}),J.renderGuideLine(null),void C.hidden(!0);B=m.domain()[d3.bisect(m.range(),R)-1]}else B=m.invert(R);x.elementMousemove({mouseX:R,mouseY:V,pointXValue:B}),"dblclick"===d3.event.type&&x.elementDblclick({mouseX:R,mouseY:V,pointXValue:B}),"click"===d3.event.type&&x.elementClick({mouseX:R,mouseY:V,pointXValue:B}),"mousedown"===d3.event.type&&x.elementMouseDown({mouseX:R,mouseY:V,pointXValue:B}),"mouseup"===d3.event.type&&x.elementMouseUp({mouseX:R,mouseY:V,pointXValue:B})}st.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine"),v&&(v.on("touchmove",z).on("mousemove",z,!0).on("mouseout",z,!0).on("mousedown",z,!0).on("mouseup",z,!0).on("dblclick",z).on("click",z),J.guideLine=null,J.renderGuideLine=function(R){!P||J.guideLine&&J.guideLine.attr("x1")===R||f.dom.write(function(){var V=st.select(".nv-interactiveGuideLine").selectAll("line").data(null!=R?[f.utils.NaNtoZero(R)]:[],String);V.enter().append("line").attr("class","nv-guideline").attr("x1",function(E){return E}).attr("x2",function(E){return E}).attr("y1",$).attr("y2",0),V.exit().remove()})})})}return C.duration(0).hideDelay(0).hidden(!1),J.dispatch=x,J.tooltip=C,J.margin=function(tt){return arguments.length?(a.top=void 0!==tt.top?tt.top:a.top,a.left=void 0!==tt.left?tt.left:a.left,J):a},J.width=function(tt){return arguments.length?(u=tt,J):u},J.height=function(tt){return arguments.length?(w=tt,J):w},J.xScale=function(tt){return arguments.length?(m=tt,J):m},J.showGuideLine=function(tt){return arguments.length?(P=tt,J):P},J.svgContainer=function(tt){return arguments.length?(v=tt,J):v},J},f.interactiveBisect=function(a,u,w){"use strict";if(!(a instanceof Array))return null;var m;m="function"!=typeof w?function(tt){return tt.x}:w;var P=d3.bisector(function(tt,G){return m(tt)-G}).left,v=d3.max([0,P(a,u)-1]),C=m(a[v]);if(void 0===C&&(C=v),C===u)return v;var W=d3.min([v+1,a.length-1]),J=m(a[W]);return void 0===J&&(J=W),Math.abs(J-u)>=Math.abs(C-u)?v:W},f.nearestValueIndex=function(a,u,w){"use strict";var m=1/0,x=null;return a.forEach(function(P,v){var C=Math.abs(u-P);null!=P&&C<=m&&C<w&&(m=C,x=v)}),x},f.models.tooltip=function(){"use strict";var a="nvtooltip-"+Math.floor(1e5*Math.random()),u=null,w="w",m=25,x=0,P=null,v=!0,C=200,W=null,J={left:null,top:null},tt=!0,G=100,rt=!0,j="nv-pointer-events-none",$=function(M,b,I){return M},st=function(M){return M},q=function(M,b){return M},z=function(M,b){if(null===M)return"";var I=d3.select(document.createElement("table"));rt&&I.selectAll("thead").data([M]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(st(M.value));var U=I.selectAll("tbody").data([M]).enter().append("tbody").selectAll("tr").data(function(_){return _.series}).enter().append("tr").classed("highlight",function(_){return _.highlight});U.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(_){return _.color}),U.append("td").classed("key",!0).classed("total",function(_){return!!_.total}).html(function(_,D){return q(_.key,D)}),U.append("td").classed("value",!0).html(function(_,D){return $(_.value,D,_)}),U.filter(function(_,D){return void 0!==_.percent}).append("td").classed("percent",!0).html(function(_,D){return"("+d3.format("%")(_.percent)+")"}),U.selectAll("td").each(function(_){if(_.highlight){var D=d3.scale.linear().domain([0,1]).range(["#fff",_.color]);d3.select(this).style("border-bottom-color",D(.6)).style("border-top-color",D(.6))}});var p=I.node().outerHTML;return void 0!==M.footer&&(p+="<div class='footer'>"+M.footer+"</div>"),p},R=function(){var M={left:null!==d3.event?d3.event.clientX:0,top:null!==d3.event?d3.event.clientY:0};if("none"!=getComputedStyle(document.body).transform){var b=document.body.getBoundingClientRect();M.left-=b.left,M.top-=b.top}return M};function B(){if(tt&&function(M){if(M&&M.series){if(f.utils.isArray(M.series))return!0;if(f.utils.isObject(M.series))return M.series=[M.series],!0}return!1}(u))return f.dom.write(function(){!function O(){W&&W.node()||((W=d3.select(document.body).select("#"+a).data([1])).enter().append("div").attr("class","nvtooltip "+(P||"xy-tooltip")).attr("id",a).style("top",0).style("left",0).style("opacity",0).style("position","fixed").selectAll("div, table, td, tr").classed(j,!0).classed(j,!0),W.exit().remove())}();var M=z(u,W.node());M&&(W.node().innerHTML=M),f.dom.read(function(){var M=R(),b=function(M){var U,p,_,b=W.node().offsetHeight,I=W.node().offsetWidth,it=document.documentElement.clientWidth,ct=document.documentElement.clientHeight;switch(w){case"e":M.left+(U=-I-m)<0&&(U=m),(_=M.top+(p=-b/2))<0&&(p-=_),(_=M.top+p+b)>ct&&(p-=_-ct);break;case"w":M.left+(U=m)+I>it&&(U=-I-m),(_=M.top+(p=-b/2))<0&&(p-=_),(_=M.top+p+b)>ct&&(p-=_-ct);break;case"n":M.top+(p=m)+b>ct&&(p=-b-m),(_=M.left+(U=-I/2-5))<0&&(U-=_),(_=M.left+U+I)>it&&(U-=_-it);break;case"s":M.top+(p=-b-m)<0&&(p=m),(_=M.left+(U=-I/2))<0&&(U-=_),(_=M.left+U+I)>it&&(U-=_-it);break;case"center":U=-I/2,p=-b/2;break;default:U=0,p=0}return{left:U,top:p}}(M),I=M.left+b.left,it=M.top+b.top;if(v)W.interrupt().transition().delay(C).duration(0).style("opacity",0);else{var ct="translate("+J.left+"px, "+J.top+"px)",U="translate("+Math.round(I)+"px, "+Math.round(it)+"px)",p=d3.interpolateString(ct,U),_=W.style("opacity")<.1;W.interrupt().transition().duration(_?0:G).styleTween("transform",function(D){return p},"important").styleTween("-webkit-transform",function(D){return p}).style("-ms-transform",U).style("opacity",1)}J.left=I,J.top=it})}),B}return B.nvPointerEventsClass=j,B.options=f.utils.optionsFunc.bind(B),B._options=Object.create({},{duration:{get:function(){return G},set:function(M){G=M}},gravity:{get:function(){return w},set:function(M){w=M}},distance:{get:function(){return m},set:function(M){m=M}},snapDistance:{get:function(){return x},set:function(M){x=M}},classes:{get:function(){return P},set:function(M){P=M}},enabled:{get:function(){return tt},set:function(M){tt=M}},hideDelay:{get:function(){return C},set:function(M){C=M}},contentGenerator:{get:function(){return z},set:function(M){z=M}},valueFormatter:{get:function(){return $},set:function(M){$=M}},headerFormatter:{get:function(){return st},set:function(M){st=M}},keyFormatter:{get:function(){return q},set:function(M){q=M}},headerEnabled:{get:function(){return rt},set:function(M){rt=M}},position:{get:function(){return R},set:function(M){R=M}},chartContainer:{get:function(){return document.body},set:function(M){f.deprecated("chartContainer","feature removed after 1.8.3")}},fixedTop:{get:function(){return null},set:function(M){f.deprecated("fixedTop","feature removed after 1.8.1")}},offset:{get:function(){return{left:0,top:0}},set:function(M){f.deprecated("offset","use chart.tooltip.distance() instead")}},hidden:{get:function(){return v},set:function(M){v!=M&&(v=!!M,B())}},data:{get:function(){return u},set:function(M){M.point&&(M.value=M.point.x,M.series=M.series||{},M.series.value=M.point.y,M.series.color=M.point.color||M.series.color),u=M}},node:{get:function(){return W.node()},set:function(M){}},id:{get:function(){return a},set:function(M){}}}),f.utils.initOptions(B),B},f.utils.windowSize=function(){var a={width:640,height:480};return window.innerWidth&&window.innerHeight?(a.width=window.innerWidth,a.height=window.innerHeight,a):"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth?(a.width=document.documentElement.offsetWidth,a.height=document.documentElement.offsetHeight,a):(document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight),a)},f.utils.isArray=Array.isArray,f.utils.isObject=function(a){return null!==a&&"object"==typeof a},f.utils.isFunction=function(a){return"function"==typeof a},f.utils.isDate=function(a){return"[object Date]"===toString.call(a)},f.utils.isNumber=function(a){return!isNaN(a)&&"number"==typeof a},f.utils.windowResize=function(a){return window.addEventListener?window.addEventListener("resize",a):f.log("ERROR: Failed to bind to window.resize with: ",a),{callback:a,clear:function(){window.removeEventListener("resize",a)}}},f.utils.getColor=function(a){if(void 0===a)return f.utils.defaultColor();if(f.utils.isArray(a)){var u=d3.scale.ordinal().range(a);return function(w,m){return w.color||u(void 0===m?w:m)}}return a},f.utils.defaultColor=function(){return f.utils.getColor(d3.scale.category20().range())},f.utils.customTheme=function(a,u,w){u=u||function(x){return x.key};var m=(w=w||d3.scale.category20().range()).length;return function(x,P){var v=u(x);return f.utils.isFunction(a[v])?a[v]():void 0!==a[v]?a[v]:(m||(m=w.length),w[m-=1])}},f.utils.pjax=function(a,u){var w=function(m){d3.html(m,function(x){var P=d3.select(u).node();P.parentNode.replaceChild(d3.select(x).select(u).node(),P),f.utils.pjax(a,u)})};d3.selectAll(a).on("click",function(){history.pushState(this.href,this.textContent,this.href),w(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&w(d3.event.state)})},f.utils.calcApproxTextWidth=function(a){if(f.utils.isFunction(a.style)&&f.utils.isFunction(a.text)){var u=parseInt(a.style("font-size").replace("px",""),10),w=a.text().length;return f.utils.NaNtoZero(w*u*.5)}return 0},f.utils.NaNtoZero=function(a){return!f.utils.isNumber(a)||isNaN(a)||null===a||a===1/0||a===-1/0?0:a},d3.selection.prototype.watchTransition=function(a){var u=[this].concat([].slice.call(arguments,1));return a.transition.apply(a,u)},f.utils.renderWatch=function(a,u){if(!(this instanceof f.utils.renderWatch))return new f.utils.renderWatch(a,u);var w=void 0!==u?u:250,m=[],x=this;this.models=function(P){return(P=[].slice.call(arguments,0)).forEach(function(v){var C;v.__rendered=!1,(C=v).dispatch.on("renderEnd",function(W){C.__rendered=!0,x.renderEnd("model")}),m.indexOf(v)<0&&m.push(v)}),this},this.reset=function(P){void 0!==P&&(w=P),m=[]},this.transition=function(P,v,C){if(C=(v=arguments.length>1?[].slice.call(arguments,1):[]).length>1?v.pop():void 0!==w?w:250,P.__rendered=!1,m.indexOf(P)<0&&m.push(P),0===C)return P.__rendered=!0,P.delay=function(){return this},P.duration=function(){return this},P;P.__rendered=!(0!==P.length&&!P.every(function(J){return!J.length}));var W=0;return P.transition().duration(C).each(function(){++W}).each("end",function(J,tt){0==--W&&(P.__rendered=!0,x.renderEnd.apply(this,v))})},this.renderEnd=function(){m.every(function(P){return P.__rendered})&&(m.forEach(function(P){P.__rendered=!1}),a.renderEnd.apply(this,arguments))}},f.utils.deepExtend=function(a){var u=arguments.length>1?[].slice.call(arguments,1):[];u.forEach(function(w){for(var m in w){var x=f.utils.isArray(a[m]),P=f.utils.isObject(a[m]),v=f.utils.isObject(w[m]);P&&!x&&v?f.utils.deepExtend(a[m],w[m]):a[m]=w[m]}})},f.utils.state=function(){if(!(this instanceof f.utils.state))return new f.utils.state;var a={},w=function(){},m=function(){return{}},x=null;this.dispatch=d3.dispatch("change","set"),this.dispatch.on("set",function(C){w(C,!0)}),this.getter=function(C){return m=C,this},this.setter=function(C,W){return W||(W=function(){}),w=function(J,tt){C(J),tt&&W()},this},this.init=function(C){f.utils.deepExtend(x=x||{},C)};var v=function(){var C=m();if(JSON.stringify(C)===JSON.stringify(a))return!1;for(var W in C)void 0===a[W]&&(a[W]={}),a[W]=C[W];return!0};this.update=function(){x&&(w(x,!1),x=null),v.call(this)&&this.dispatch.change(a)}},f.utils.optionsFunc=function(a){return a&&d3.map(a).forEach(function(u,w){f.utils.isFunction(this[u])&&this[u](w)}.bind(this)),this},f.utils.calcTicksX=function(a,u){for(var w=1,m=0;m<u.length;m+=1){var x=u[m]&&u[m].values?u[m].values.length:0;w=x>w?x:w}return f.log("Requested number of ticks: ",a),f.log("Calculated max values to be: ",w),a=(a=a>w?a=w-1:a)<1?1:a,a=Math.floor(a),f.log("Calculating tick count as: ",a),a},f.utils.calcTicksY=function(a,u){return f.utils.calcTicksX(a,u)},f.utils.initOption=function(a,u){a._calls&&a._calls[u]?a[u]=a._calls[u]:(a[u]=function(w){return arguments.length?(a._overrides[u]=!0,a._options[u]=w,a):a._options[u]},a["_"+u]=function(w){return arguments.length?(a._overrides[u]||(a._options[u]=w),a):a._options[u]})},f.utils.initOptions=function(a){a._overrides=a._overrides||{};var u=Object.getOwnPropertyNames(a._options||{}),w=Object.getOwnPropertyNames(a._calls||{});for(var m in u=u.concat(w))f.utils.initOption(a,u[m])},f.utils.inheritOptionsD3=function(a,u,w){a._d3options=w.concat(a._d3options||[]),a._d3options=(a._d3options||[]).filter(function(m,x,P){return P.indexOf(m)===x}),w.unshift(u),w.unshift(a),d3.rebind.apply(this,w)},f.utils.arrayUnique=function(a){return a.sort().filter(function(u,w){return!w||u!=a[w-1]})},f.utils.symbolMap=d3.map(),f.utils.symbol=function(){var a,u=64;function w(m,x){var P=a.call(this,m,x),v=u.call(this,m,x);return-1!==d3.svg.symbolTypes.indexOf(P)?d3.svg.symbol().type(P).size(v)():f.utils.symbolMap.get(P)(v)}return w.type=function(m){return arguments.length?(a=d3.functor(m),w):a},w.size=function(m){return arguments.length?(u=d3.functor(m),w):u},w},f.utils.inheritOptions=function(a,u){var w=Object.getOwnPropertyNames(u._options||{}),m=Object.getOwnPropertyNames(u._calls||{}),x=u._inherited||[],P=u._d3options||[],v=w.concat(m).concat(x).concat(P);v.unshift(u),v.unshift(a),d3.rebind.apply(this,v),a._inherited=f.utils.arrayUnique(w.concat(m).concat(x).concat(w).concat(a._inherited||[])),a._d3options=f.utils.arrayUnique(P.concat(a._d3options||[]))},f.utils.initSVG=function(a){a.classed({"nvd3-svg":!0})},f.utils.sanitizeHeight=function(a,u){return a||parseInt(u.style("height"),10)||400},f.utils.sanitizeWidth=function(a,u){return a||parseInt(u.style("width"),10)||960},f.utils.availableHeight=function(a,u,w){return Math.max(0,f.utils.sanitizeHeight(a,u)-w.top-w.bottom)},f.utils.availableWidth=function(a,u,w){return Math.max(0,f.utils.sanitizeWidth(a,u)-w.left-w.right)},f.utils.noData=function(a,u){var w=a.options(),m=w.margin(),x=w.noData(),P=null==x?["No Data Available."]:[x],v=f.utils.availableHeight(null,u,m),C=f.utils.availableWidth(null,u,m),W=m.left+C/2,J=m.top+v/2;u.selectAll("g").remove();var tt=u.selectAll(".nv-noData").data(P);tt.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),tt.attr("x",W).attr("y",J).text(function(G){return G})},f.utils.wrapTicks=function(a,u){a.each(function(){for(var x,w=d3.select(this),m=w.text().split(/\s+/).reverse(),P=[],v=0,W=w.attr("y"),J=parseFloat(w.attr("dy")),tt=w.text(null).append("tspan").attr("x",0).attr("y",W).attr("dy",J+"em");x=m.pop();)P.push(x),tt.text(P.join(" ")),tt.node().getComputedTextLength()>u&&(P.pop(),tt.text(P.join(" ")),P=[x],tt=w.append("tspan").attr("x",0).attr("y",W).attr("dy",1.1*++v+J+"em").text(x))})},f.utils.arrayEquals=function(a,u){if(a===u)return!0;if(!a||!u||a.length!=u.length)return!1;for(var w=0,m=a.length;w<m;w++)if(a[w]instanceof Array&&u[w]instanceof Array){if(!f.arrayEquals(a[w],u[w]))return!1}else if(a[w]!=u[w])return!1;return!0},f.utils.pointIsInArc=function(a,u,w){var m=w.innerRadius()(u),x=w.outerRadius()(u),P=w.startAngle()(u),v=w.endAngle()(u),C=a.x*a.x+a.y*a.y,W=Math.atan2(a.x,-a.y);return W=W<0?W+2*Math.PI:W,m*m<=C&&C<=x*x&&P<=W&&W<=v},f.models.axis=function(){"use strict";var q,a=d3.svg.axis(),u=d3.scale.linear(),w={top:0,right:0,bottom:0,left:0},m=75,x=60,P=null,v=!0,C=0,W=!0,J=!1,tt=!1,G=null,rt=0,j=void 0,$=250,st=d3.dispatch("renderEnd");a.scale(u).orient("bottom").tickFormat(function(E){return E});var z,R=f.utils.renderWatch(st,$);function V(E){return R.reset(),E.each(function(A){var O=d3.select(this);f.utils.initSVG(O);var B=O.selectAll("g.nv-wrap.nv-axis").data([A]),I=(B.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g"),B.select("g"));null!==G?a.ticks(G):("top"==a.orient()||"bottom"==a.orient())&&a.ticks(Math.abs(u.range()[1]-u.range()[0])/100),I.watchTransition(R,"axis").call(a),z=z||a.scale();var it=a.tickFormat();null==it&&(it=z.tickFormat());var U,p,_,ct=I.selectAll("text.nv-axislabel").data([P||null]);switch(ct.exit().remove(),void 0!==j&&I.selectAll("g").select("text").style("font-size",j),a.orient()){case"top":ct.enter().append("text").attr("class","nv-axislabel"),_=0,1===u.range().length?_=tt?2*u.range()[0]+u.rangeBand():0:2===u.range().length?_=tt?u.range()[0]+u.range()[1]+u.rangeBand():u.range()[1]:u.range().length>2&&(_=u.range()[u.range().length-1]+(u.range()[1]-u.range()[0])),ct.attr("text-anchor","middle").attr("y",0).attr("x",_/2),v&&((p=B.selectAll("g.nv-axisMaxMin").data(u.domain())).enter().append("g").attr("class",function(at,ut){return["nv-axisMaxMin","nv-axisMaxMin-x",0==ut?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),p.exit().remove(),p.attr("transform",function(at,ut){return"translate("+f.utils.NaNtoZero(u(at))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-a.tickPadding()).attr("text-anchor","middle").text(function(at,ut){var ot=(q||it)(at);return(""+ot).match("NaN")?"":ot}),p.watchTransition(R,"min-max top").attr("transform",function(at,ut){return"translate("+f.utils.NaNtoZero(u.range()[ut])+",0)"}));break;case"bottom":U=rt+36;var D=30,Z=0,dt=I.selectAll("g").select("text"),ht="";if(C%360){dt.attr("transform",""),dt.each(function(at,ut){var Q=this.getBoundingClientRect(),ot=Q.width;Z=Q.height,ot>D&&(D=ot)}),ht="rotate("+C+" 0,"+(Z/2+a.tickPadding())+")";var h=Math.abs(Math.sin(C*Math.PI/180));U=(h?h*D:D)+30,dt.attr("transform",ht).style("text-anchor",C%360>0?"start":"end")}else dt.attr("transform",J?function(at,ut){return"translate(0,"+(ut%2==0?"0":"12")+")"}:"translate(0,0)");ct.enter().append("text").attr("class","nv-axislabel"),_=0,1===u.range().length?_=tt?2*u.range()[0]+u.rangeBand():0:2===u.range().length?_=tt?u.range()[0]+u.range()[1]+u.rangeBand():u.range()[1]:u.range().length>2&&(_=u.range()[u.range().length-1]+(u.range()[1]-u.range()[0])),ct.attr("text-anchor","middle").attr("y",U).attr("x",_/2),v&&((p=B.selectAll("g.nv-axisMaxMin").data([u.domain()[0],u.domain()[u.domain().length-1]])).enter().append("g").attr("class",function(at,ut){return["nv-axisMaxMin","nv-axisMaxMin-x",0==ut?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),p.exit().remove(),p.attr("transform",function(at,ut){return"translate("+f.utils.NaNtoZero(u(at)+(tt?u.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",a.tickPadding()).attr("transform",ht).style("text-anchor",C?C%360>0?"start":"end":"middle").text(function(at,ut){var ot=(q||it)(at);return(""+ot).match("NaN")?"":ot}),p.watchTransition(R,"min-max bottom").attr("transform",function(at,ut){return"translate("+f.utils.NaNtoZero(u(at)+(tt?u.rangeBand()/2:0))+",0)"}));break;case"right":ct.enter().append("text").attr("class","nv-axislabel"),ct.style("text-anchor",W?"middle":"begin").attr("transform",W?"rotate(90)":"").attr("y",W?12-Math.max(w.right,m)-(rt||0):-10).attr("x",W?d3.max(u.range())/2:a.tickPadding()),v&&((p=B.selectAll("g.nv-axisMaxMin").data(u.domain())).enter().append("g").attr("class",function(at,ut){return["nv-axisMaxMin","nv-axisMaxMin-y",0==ut?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),p.exit().remove(),p.attr("transform",function(at,ut){return"translate(0,"+f.utils.NaNtoZero(u(at))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",a.tickPadding()).style("text-anchor","start").text(function(at,ut){var ot=(q||it)(at);return(""+ot).match("NaN")?"":ot}),p.watchTransition(R,"min-max right").attr("transform",function(at,ut){return"translate(0,"+f.utils.NaNtoZero(u.range()[ut])+")"}).select("text").style("opacity",1));break;case"left":ct.enter().append("text").attr("class","nv-axislabel"),ct.style("text-anchor",W?"middle":"end").attr("transform",W?"rotate(-90)":"").attr("y",W?25-Math.max(w.left,m)-(rt||0):-10).attr("x",W?-d3.max(u.range())/2:-a.tickPadding()),v&&((p=B.selectAll("g.nv-axisMaxMin").data(u.domain())).enter().append("g").attr("class",function(at,ut){return["nv-axisMaxMin","nv-axisMaxMin-y",0==ut?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),p.exit().remove(),p.attr("transform",function(at,ut){return"translate(0,"+f.utils.NaNtoZero(z(at))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-a.tickPadding()).attr("text-anchor","end").text(function(at,ut){var ot=(q||it)(at);return(""+ot).match("NaN")?"":ot}),p.watchTransition(R,"min-max right").attr("transform",function(at,ut){return"translate(0,"+f.utils.NaNtoZero(u.range()[ut])+")"}).select("text").style("opacity",1))}if(ct.text(function(at){return at}),v&&("left"===a.orient()||"right"===a.orient())&&(I.selectAll("g").each(function(at,ut){d3.select(this).select("text").attr("opacity",1),(u(at)<u.range()[1]+10||u(at)>u.range()[0]-10)&&((at>1e-10||at<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),u.domain()[0]==u.domain()[1]&&0==u.domain()[0]&&B.selectAll("g.nv-axisMaxMin").style("opacity",function(at,ut){return ut?0:1})),v&&("top"===a.orient()||"bottom"===a.orient())){var S=[];B.selectAll("g.nv-axisMaxMin").each(function(at,ut){try{S.push(ut?u(at)-this.getBoundingClientRect().width-4:u(at)+this.getBoundingClientRect().width+4)}catch(Q){S.push(ut?u(at)-4:u(at)+4)}}),I.selectAll("g").each(function(at,ut){(u(at)<S[0]||u(at)>S[1])&&(at>1e-10||at<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove())})}I.selectAll(".tick").filter(function(at){return!parseFloat(Math.round(1e5*at)/1e6)&&void 0!==at}).classed("zero",!0),z=u.copy()}),R.renderEnd("axis immediate"),V}return V.axis=a,V.dispatch=st,V.options=f.utils.optionsFunc.bind(V),V._options=Object.create({},{axisLabelDistance:{get:function(){return rt},set:function(E){rt=E}},staggerLabels:{get:function(){return J},set:function(E){J=E}},rotateLabels:{get:function(){return C},set:function(E){C=E}},rotateYLabel:{get:function(){return W},set:function(E){W=E}},showMaxMin:{get:function(){return v},set:function(E){v=E}},axisLabel:{get:function(){return P},set:function(E){P=E}},height:{get:function(){return x},set:function(E){x=E}},ticks:{get:function(){return G},set:function(E){G=E}},width:{get:function(){return m},set:function(E){m=E}},fontSize:{get:function(){return j},set:function(E){j=E}},tickFormatMaxMin:{get:function(){return q},set:function(E){q=E}},margin:{get:function(){return w},set:function(E){w.top=void 0!==E.top?E.top:w.top,w.right=void 0!==E.right?E.right:w.right,w.bottom=void 0!==E.bottom?E.bottom:w.bottom,w.left=void 0!==E.left?E.left:w.left}},duration:{get:function(){return $},set:function(E){R.reset($=E)}},scale:{get:function(){return u},set:function(E){a.scale(u=E),tt="function"==typeof u.rangeBands,f.utils.inheritOptionsD3(V,u,["domain","range","rangeBand","rangeBands"])}}}),f.utils.initOptions(V),f.utils.inheritOptionsD3(V,a,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]),f.utils.inheritOptionsD3(V,u,["domain","range","rangeBand","rangeBands"]),V},f.models.boxPlot=function(){"use strict";var V,E,A,O,I,it,a={top:0,right:0,bottom:0,left:0},u=960,w=500,m=Math.floor(1e4*Math.random()),x=d3.scale.ordinal(),P=d3.scale.linear(),v=function(p){return p.label},C=function(p){return p.values.Q1},W=function(p){return p.values.Q2},J=function(p){return p.values.Q3},tt=function(p){return p.values.whisker_low},G=function(p){return p.values.whisker_high},rt=function(p){return p.color},j=function(p){return p.values.outliers},$=function(p,_,D){return p},st=function(p,_,D){return p},q=function(p,_,D){},z=f.utils.defaultColor(),R=null,B=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),M=250,b=null,ct=f.utils.renderWatch(B,M);function U(p){return ct.reset(),p.each(function(_){var D=u-a.left-a.right,Z=w-a.top-a.bottom;R=d3.select(this),f.utils.initSVG(R),x.domain(V||_.map(function(N,lt){return v(N,lt)})).rangeBands(E||[0,D],.1);var dt=[];if(!A){var ht=[];_.forEach(function(N,lt){var F=C(N),ft=J(N),xt=tt(N),Rt=G(N),Qt=j(N);Qt&&Qt.forEach(function(Ct,St){ht.push($(Ct,St,void 0))}),xt&&ht.push(xt),F&&ht.push(F),ft&&ht.push(ft),Rt&&ht.push(Rt)}),dt=[d3.min(ht),d3.max(ht)]}P.domain(A||dt),P.range(O||[Z,0]),I=I||x,it=it||P.copy().range([P(0),P(0)]);var at=R.selectAll("g.nv-wrap").data([_]);at.enter().append("g").attr("class","nvd3 nv-wrap"),at.attr("transform","translate("+a.left+","+a.top+")");var Q=at.selectAll(".nv-boxplot").data(function(N){return N}),ot=Q.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);Q.attr("class","nv-boxplot").attr("transform",function(N,lt,F){return"translate("+(x(v(N,lt))+.05*x.rangeBand())+", 0)"}).classed("hover",function(N){return N.hover}),Q.watchTransition(ct,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay(function(N,lt){return lt*M/_.length}).attr("transform",function(N,lt){return"translate("+(x(v(N,lt))+.05*x.rangeBand())+", 0)"}),Q.exit().remove(),ot.each(function(N,lt){var F=d3.select(this);[tt,G].forEach(function(ft){if(void 0!==ft(N)&&null!==ft(N)){var xt=ft===tt?"low":"high";F.append("line").style("stroke",rt(N)||z(N,lt)).attr("class","nv-boxplot-whisker nv-boxplot-"+xt),F.append("line").style("stroke",rt(N)||z(N,lt)).attr("class","nv-boxplot-tick nv-boxplot-"+xt)}})});var yt=function(){return null===b?.9*x.rangeBand():Math.min(75,.9*x.rangeBand())},wt=function(){return.45*x.rangeBand()-yt()/2},Et=function(){return.45*x.rangeBand()+yt()/2};[tt,G].forEach(function(N){var lt=N===tt?"low":"high",F=N===tt?C:J;Q.select("line.nv-boxplot-whisker.nv-boxplot-"+lt).watchTransition(ct,"nv-boxplot: boxplots").attr("x1",.45*x.rangeBand()).attr("y1",function(ft,xt){return P(N(ft))}).attr("x2",.45*x.rangeBand()).attr("y2",function(ft,xt){return P(F(ft))}),Q.select("line.nv-boxplot-tick.nv-boxplot-"+lt).watchTransition(ct,"nv-boxplot: boxplots").attr("x1",wt).attr("y1",function(ft,xt){return P(N(ft))}).attr("x2",Et).attr("y2",function(ft,xt){return P(N(ft))})}),[tt,G].forEach(function(N){ot.selectAll(".nv-boxplot-"+(N===tt?"low":"high")).on("mouseover",function(F,ft,xt){d3.select(this).classed("hover",!0),B.elementMouseover({series:{key:N(F),color:rt(F)||z(F,xt)},e:d3.event})}).on("mouseout",function(F,ft,xt){d3.select(this).classed("hover",!1),B.elementMouseout({series:{key:N(F),color:rt(F)||z(F,xt)},e:d3.event})}).on("mousemove",function(F,ft){B.elementMousemove({e:d3.event})})}),ot.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(N,lt){d3.select(this).classed("hover",!0),B.elementMouseover({key:v(N),value:v(N),series:[{key:"Q3",value:J(N),color:rt(N)||z(N,lt)},{key:"Q2",value:W(N),color:rt(N)||z(N,lt)},{key:"Q1",value:C(N),color:rt(N)||z(N,lt)}],data:N,index:lt,e:d3.event})}).on("mouseout",function(N,lt){d3.select(this).classed("hover",!1),B.elementMouseout({key:v(N),value:v(N),series:[{key:"Q3",value:J(N),color:rt(N)||z(N,lt)},{key:"Q2",value:W(N),color:rt(N)||z(N,lt)},{key:"Q1",value:C(N),color:rt(N)||z(N,lt)}],data:N,index:lt,e:d3.event})}).on("mousemove",function(N,lt){B.elementMousemove({e:d3.event})}),Q.select("rect.nv-boxplot-box").watchTransition(ct,"nv-boxplot: boxes").attr("y",function(N,lt){return P(J(N))}).attr("width",yt).attr("x",wt).attr("height",function(N,lt){return Math.abs(P(J(N))-P(C(N)))||1}).style("fill",function(N,lt){return rt(N)||z(N,lt)}).style("stroke",function(N,lt){return rt(N)||z(N,lt)}),ot.append("line").attr("class","nv-boxplot-median"),Q.select("line.nv-boxplot-median").watchTransition(ct,"nv-boxplot: boxplots line").attr("x1",wt).attr("y1",function(N,lt){return P(W(N))}).attr("x2",Et).attr("y2",function(N,lt){return P(W(N))});var gt=Q.selectAll(".nv-boxplot-outlier").data(function(N){return j(N)||[]});gt.enter().append("circle").style("fill",function(N,lt,F){return q(N,lt,F)||z(N,F)}).style("stroke",function(N,lt,F){return q(N,lt,F)||z(N,F)}).style("z-index",9e3).on("mouseover",function(N,lt,F){d3.select(this).classed("hover",!0),B.elementMouseover({series:{key:st(N,lt,F),color:q(N,lt,F)||z(N,F)},e:d3.event})}).on("mouseout",function(N,lt,F){d3.select(this).classed("hover",!1),B.elementMouseout({series:{key:st(N,lt,F),color:q(N,lt,F)||z(N,F)},e:d3.event})}).on("mousemove",function(N,lt){B.elementMousemove({e:d3.event})}),gt.attr("class","nv-boxplot-outlier"),gt.watchTransition(ct,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*x.rangeBand()).attr("cy",function(N,lt,F){return P($(N,lt,F))}).attr("r","3"),gt.exit().remove(),I=x.copy(),it=P.copy()}),ct.renderEnd("nv-boxplot immediate"),U}return U.dispatch=B,U.options=f.utils.optionsFunc.bind(U),U._options=Object.create({},{width:{get:function(){return u},set:function(p){u=p}},height:{get:function(){return w},set:function(p){w=p}},maxBoxWidth:{get:function(){return b},set:function(p){b=p}},x:{get:function(){return v},set:function(p){v=p}},q1:{get:function(){return C},set:function(p){C=p}},q2:{get:function(){return W},set:function(p){W=p}},q3:{get:function(){return J},set:function(p){J=p}},wl:{get:function(){return tt},set:function(p){tt=p}},wh:{get:function(){return G},set:function(p){G=p}},itemColor:{get:function(){return rt},set:function(p){rt=p}},outliers:{get:function(){return j},set:function(p){j=p}},outlierValue:{get:function(){return $},set:function(p){$=p}},outlierLabel:{get:function(){return st},set:function(p){st=p}},outlierColor:{get:function(){return q},set:function(p){q=p}},xScale:{get:function(){return x},set:function(p){x=p}},yScale:{get:function(){return P},set:function(p){P=p}},xDomain:{get:function(){return V},set:function(p){V=p}},yDomain:{get:function(){return A},set:function(p){A=p}},xRange:{get:function(){return E},set:function(p){E=p}},yRange:{get:function(){return O},set:function(p){O=p}},id:{get:function(){return m},set:function(p){m=p}},y:{get:function(){return console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead."),{}},set:function(p){console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead.")}},margin:{get:function(){return a},set:function(p){a.top=void 0!==p.top?p.top:a.top,a.right=void 0!==p.right?p.right:a.right,a.bottom=void 0!==p.bottom?p.bottom:a.bottom,a.left=void 0!==p.left?p.left:a.left}},color:{get:function(){return z},set:function(p){z=f.utils.getColor(p)}},duration:{get:function(){return M},set:function(p){ct.reset(M=p)}}}),f.utils.initOptions(U),U},f.models.boxPlotChart=function(){"use strict";var rt,j,a=f.models.boxPlot(),u=f.models.axis(),w=f.models.axis(),m={top:15,right:10,bottom:50,left:60},x=null,P=null,v=f.utils.getColor(),C=!0,W=!0,J=!1,tt=!1,G=f.models.tooltip(),$="No Data Available.",st=d3.dispatch("beforeUpdate","renderEnd"),q=250;u.orient("bottom").showMaxMin(!1).tickFormat(function(V){return V}),w.orient(J?"right":"left").tickFormat(d3.format(",.1f")),G.duration(0);var z=f.utils.renderWatch(st,q);function R(V){return z.reset(),z.models(a),C&&z.models(u),W&&z.models(w),V.each(function(E){var A=d3.select(this);f.utils.initSVG(A);var B=(x||parseInt(A.style("width"))||960)-m.left-m.right,M=(P||parseInt(A.style("height"))||400)-m.top-m.bottom;if(R.update=function(){st.beforeUpdate(),A.transition().duration(q).call(R)},R.container=this,!E||!E.length){var b=A.selectAll(".nv-noData").data([$]);return b.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),b.attr("x",m.left+B/2).attr("y",m.top+M/2).text(function(D){return D}),R}A.selectAll(".nv-noData").remove(),rt=a.xScale(),j=a.yScale().clamp(!0);var I=A.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([E]),it=I.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),ct=it.append("defs"),U=I.select("g");if(it.append("g").attr("class","nv-x nv-axis"),it.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),it.append("g").attr("class","nv-barsWrap"),U.attr("transform","translate("+m.left+","+m.top+")"),J&&U.select(".nv-y.nv-axis").attr("transform","translate("+B+",0)"),a.width(B).height(M),U.select(".nv-barsWrap").datum(E.filter(function(D){return!D.disabled})).transition().call(a),ct.append("clipPath").attr("id","nv-x-label-clip-"+a.id()).append("rect"),U.select("#nv-x-label-clip-"+a.id()+" rect").attr("width",rt.rangeBand()*(tt?2:1)).attr("height",16).attr("x",-rt.rangeBand()/(tt?1:2)),C){u.scale(rt).ticks(f.utils.calcTicksX(B/100,E)).tickSize(-M,0),U.select(".nv-x.nv-axis").attr("transform","translate(0,"+j.range()[0]+")"),U.select(".nv-x.nv-axis").call(u);var _=U.select(".nv-x.nv-axis").selectAll("g");tt&&_.selectAll("text").attr("transform",function(D,Z,dt){return"translate(0,"+(dt%2==0?"5":"17")+")"})}W&&(w.scale(j).ticks(Math.floor(M/36)).tickSize(-B,0),U.select(".nv-y.nv-axis").call(w)),U.select(".nv-zeroLine line").attr("x1",0).attr("x2",B).attr("y1",j(0)).attr("y2",j(0))}),z.renderEnd("nv-boxplot chart immediate"),R}return a.dispatch.on("elementMouseover.tooltip",function(V){G.data(V).hidden(!1)}),a.dispatch.on("elementMouseout.tooltip",function(V){G.data(V).hidden(!0)}),a.dispatch.on("elementMousemove.tooltip",function(V){G()}),R.dispatch=st,R.boxplot=a,R.xAxis=u,R.yAxis=w,R.tooltip=G,R.options=f.utils.optionsFunc.bind(R),R._options=Object.create({},{width:{get:function(){return x},set:function(V){x=V}},height:{get:function(){return P},set:function(V){P=V}},staggerLabels:{get:function(){return tt},set:function(V){tt=V}},showXAxis:{get:function(){return C},set:function(V){C=V}},showYAxis:{get:function(){return W},set:function(V){W=V}},tooltipContent:{get:function(){return G},set:function(V){G=V}},noData:{get:function(){return $},set:function(V){$=V}},margin:{get:function(){return m},set:function(V){m.top=void 0!==V.top?V.top:m.top,m.right=void 0!==V.right?V.right:m.right,m.bottom=void 0!==V.bottom?V.bottom:m.bottom,m.left=void 0!==V.left?V.left:m.left}},duration:{get:function(){return q},set:function(V){z.reset(q=V),a.duration(q),u.duration(q),w.duration(q)}},color:{get:function(){return v},set:function(V){v=f.utils.getColor(V),a.color(v)}},rightAlignYAxis:{get:function(){return J},set:function(V){J=V,w.orient(V?"right":"left")}}}),f.utils.inheritOptions(R,a),f.utils.initOptions(R),R},f.models.bullet=function(){"use strict";var a={top:0,right:0,bottom:0,left:0},u="left",w=!1,m=function(B){return B.ranges},x=function(B){return B.markers?B.markers:[]},P=function(B){return B.markerLines?B.markerLines:[0]},v=function(B){return B.measures},C=function(B){return B.rangeLabels?B.rangeLabels:[]},W=function(B){return B.markerLabels?B.markerLabels:[]},J=function(B){return B.markerLineLabels?B.markerLineLabels:[]},tt=function(B){return B.measureLabels?B.measureLabels:[]},G=[0],rt=380,j=30,$=null,st=null,q=f.utils.getColor(["#1f77b4"]),z=d3.dispatch("elementMouseover","elementMouseout","elementMousemove"),R=["Maximum","Mean","Minimum"],V=["Max","Avg","Min"],E=1e3;function A(B,M){var b=B.slice();B.sort(function(I,it){var ct=b.indexOf(I),U=b.indexOf(it);return d3.descending(M[ct],M[U])})}function O(B){return B.each(function(M,b){var I=rt-a.left-a.right,it=j-a.top-a.bottom;$=d3.select(this),f.utils.initSVG($);var ct=m.call(this,M,b).slice(),U=x.call(this,M,b).slice(),p=P.call(this,M,b).slice(),_=v.call(this,M,b).slice(),D=C.call(this,M,b).slice(),Z=W.call(this,M,b).slice(),dt=J.call(this,M,b).slice(),ht=tt.call(this,M,b).slice();A(D,ct),A(Z,U),A(dt,p),A(ht,_),ct.sort(d3.descending),U.sort(d3.descending),p.sort(d3.descending),_.sort(d3.descending);var Dt,h=d3.scale.linear().domain(d3.extent(d3.merge([G,ct]))).range(w?[I,0]:[0,I]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(h.range()),this.__chart__=h,d3.min(ct),d3.max(ct);for(var ot=$.selectAll("g.nv-wrap.nv-bullet").data([M]),wt=ot.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),Et=ot.select("g"),gt=(b=0,ct.length);b<gt;b++){var N="nv-range nv-range"+b;b<=2&&(N=N+" nv-range"+V[b]),wt.append("rect").attr("class",N)}wt.append("rect").attr("class","nv-measure"),ot.attr("transform","translate("+a.left+","+a.top+")");var xt=function(Dt){return h(Dt<0?Dt:0)};for(b=0,gt=ct.length;b<gt;b++){var Rt=ct[b];Et.select("rect.nv-range"+b).datum(Rt).attr("height",it).transition().duration(E).attr("width",(Dt=Rt,Math.abs(h(Dt)-h(0)))).attr("x",xt(Rt))}Et.select("rect.nv-measure").style("fill",q).attr("height",it/3).attr("y",it/3).on("mouseover",function(){z.elementMouseover({value:_[0],label:ht[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){z.elementMousemove({value:_[0],label:ht[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){z.elementMouseout({value:_[0],label:ht[0]||"Current",color:d3.select(this).style("fill")})}).transition().duration(E).attr("width",_<0?h(0)-h(_[0]):h(_[0])-h(0)).attr("x",xt(_));var Qt=it/6,Ct=U.map(function(Dt,ne){return{value:Dt,label:Z[ne]}});wt.selectAll("path.nv-markerTriangle").data(Ct).enter().append("path").attr("class","nv-markerTriangle").attr("d","M0,"+Qt+"L"+Qt+","+-Qt+" "+-Qt+","+-Qt+"Z").on("mouseover",function(Dt){z.elementMouseover({value:Dt.value,label:Dt.label||"Previous",color:d3.select(this).style("fill"),pos:[h(Dt.value),it/2]})}).on("mousemove",function(Dt){z.elementMousemove({value:Dt.value,label:Dt.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(Dt,ne){z.elementMouseout({value:Dt.value,label:Dt.label||"Previous",color:d3.select(this).style("fill")})}),Et.selectAll("path.nv-markerTriangle").data(Ct).transition().duration(E).attr("transform",function(Dt){return"translate("+h(Dt.value)+","+it/2+")"});var St=p.map(function(Dt,ne){return{value:Dt,label:dt[ne]}});wt.selectAll("line.nv-markerLine").data(St).enter().append("line").attr("cursor","").attr("class","nv-markerLine").attr("x1",function(Dt){return h(Dt.value)}).attr("y1","2").attr("x2",function(Dt){return h(Dt.value)}).attr("y2",it-2).on("mouseover",function(Dt){z.elementMouseover({value:Dt.value,label:Dt.label||"Previous",color:d3.select(this).style("fill"),pos:[h(Dt.value),it/2]})}).on("mousemove",function(Dt){z.elementMousemove({value:Dt.value,label:Dt.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(Dt,ne){z.elementMouseout({value:Dt.value,label:Dt.label||"Previous",color:d3.select(this).style("fill")})}),Et.selectAll("line.nv-markerLine").data(St).transition().duration(E).attr("x1",function(Dt){return h(Dt.value)}).attr("x2",function(Dt){return h(Dt.value)}),ot.selectAll(".nv-range").on("mouseover",function(Dt,ne){z.elementMouseover({value:Dt,label:D[ne]||R[ne],color:d3.select(this).style("fill")})}).on("mousemove",function(){z.elementMousemove({value:_[0],label:ht[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(Dt,ne){z.elementMouseout({value:Dt,label:D[ne]||R[ne],color:d3.select(this).style("fill")})})}),O}return O.dispatch=z,O.options=f.utils.optionsFunc.bind(O),O._options=Object.create({},{ranges:{get:function(){return m},set:function(B){m=B}},markers:{get:function(){return x},set:function(B){x=B}},measures:{get:function(){return v},set:function(B){v=B}},forceX:{get:function(){return G},set:function(B){G=B}},width:{get:function(){return rt},set:function(B){rt=B}},height:{get:function(){return j},set:function(B){j=B}},tickFormat:{get:function(){return st},set:function(B){st=B}},duration:{get:function(){return E},set:function(B){E=B}},margin:{get:function(){return a},set:function(B){a.top=void 0!==B.top?B.top:a.top,a.right=void 0!==B.right?B.right:a.right,a.bottom=void 0!==B.bottom?B.bottom:a.bottom,a.left=void 0!==B.left?B.left:a.left}},orient:{get:function(){return u},set:function(B){w="right"==(u=B)||"bottom"==u}},color:{get:function(){return q},set:function(B){q=f.utils.getColor(B)}}}),f.utils.initOptions(O),O},f.models.bulletChart=function(){"use strict";var a=f.models.bullet(),u=f.models.tooltip(),w="left",m=!1,x={top:5,right:40,bottom:20,left:120},P=function(st){return st.ranges},v=function(st){return st.markers?st.markers:[]},C=function(st){return st.measures},W=null,J=55,tt=null,G=null,rt=null,j=d3.dispatch();function $(st){return st.each(function(q,z){var R=d3.select(this);f.utils.initSVG(R);var V=f.utils.availableWidth(W,R,x),E=J-x.top-x.bottom;if($.update=function(){$(st)},$.container=this,!q||!P.call(this,q,z))return f.utils.noData($,R),$;R.selectAll(".nv-noData").remove();var O=P.call(this,q,z).slice().sort(d3.descending),B=v.call(this,q,z).slice().sort(d3.descending),M=C.call(this,q,z).slice().sort(d3.descending),b=R.selectAll("g.nv-wrap.nv-bulletChart").data([q]),it=b.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),ct=b.select("g");it.append("g").attr("class","nv-bulletWrap"),it.append("g").attr("class","nv-titles"),b.attr("transform","translate("+x.left+","+x.top+")");var U=d3.scale.linear().domain([0,Math.max(O[0],B[0]||0,M[0])]).range(m?[V,0]:[0,V]),p=this.__chart__||d3.scale.linear().domain([0,1/0]).range(U.range());this.__chart__=U;var Z=it.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(J-x.top-x.bottom)/2+")");Z.append("text").attr("class","nv-title").text(function(ut){return ut.title}),Z.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(ut){return ut.subtitle}),a.width(V).height(E);var dt=ct.select(".nv-bulletWrap");d3.transition(dt).call(a);var ht=tt||U.tickFormat(V/100),h=ct.selectAll("g.nv-tick").data(U.ticks(G||V/50),function(ut){return this.textContent||ht(ut)}),S=h.enter().append("g").attr("class","nv-tick").attr("transform",function(ut){return"translate("+p(ut)+",0)"}).style("opacity",1e-6);S.append("line").attr("y1",E).attr("y2",7*E/6),S.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*E/6).text(ht);var at=d3.transition(h).transition().duration(a.duration()).attr("transform",function(ut){return"translate("+U(ut)+",0)"}).style("opacity",1);at.select("line").attr("y1",E).attr("y2",7*E/6),at.select("text").attr("y",7*E/6),d3.transition(h.exit()).transition().duration(a.duration()).attr("transform",function(ut){return"translate("+U(ut)+",0)"}).style("opacity",1e-6).remove()}),d3.timer.flush(),$}return u.duration(0).headerEnabled(!1),a.dispatch.on("elementMouseover.tooltip",function(st){st.series={key:st.label,value:st.value,color:st.color},u.data(st).hidden(!1)}),a.dispatch.on("elementMouseout.tooltip",function(st){u.hidden(!0)}),a.dispatch.on("elementMousemove.tooltip",function(st){u()}),$.bullet=a,$.dispatch=j,$.tooltip=u,$.options=f.utils.optionsFunc.bind($),$._options=Object.create({},{ranges:{get:function(){return P},set:function(st){P=st}},markers:{get:function(){return v},set:function(st){v=st}},measures:{get:function(){return C},set:function(st){C=st}},width:{get:function(){return W},set:function(st){W=st}},height:{get:function(){return J},set:function(st){J=st}},tickFormat:{get:function(){return tt},set:function(st){tt=st}},ticks:{get:function(){return G},set:function(st){G=st}},noData:{get:function(){return rt},set:function(st){rt=st}},margin:{get:function(){return x},set:function(st){x.top=void 0!==st.top?st.top:x.top,x.right=void 0!==st.right?st.right:x.right,x.bottom=void 0!==st.bottom?st.bottom:x.bottom,x.left=void 0!==st.left?st.left:x.left}},orient:{get:function(){return w},set:function(st){m="right"==(w=st)||"bottom"==w}}}),f.utils.inheritOptions($,a),f.utils.initOptions($),$},f.models.candlestickBar=function(){"use strict";var x,V,E,A,O,a={top:0,right:0,bottom:0,left:0},u=null,w=null,m=Math.floor(1e4*Math.random()),P=d3.scale.linear(),v=d3.scale.linear(),C=function(b){return b.x},W=function(b){return b.y},J=function(b){return b.open},tt=function(b){return b.close},G=function(b){return b.high},rt=function(b){return b.low},j=[],$=[],st=!1,q=!0,z=f.utils.defaultColor(),R=!1,B=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function M(b){return b.each(function(I){x=d3.select(this);var it=f.utils.availableWidth(u,x,a),ct=f.utils.availableHeight(w,x,a);f.utils.initSVG(x);var U=it/I[0].values.length*.45;P.domain(V||d3.extent(I[0].values.map(C).concat(j))),P.range(st?A||[.5*it/I[0].values.length,it*(I[0].values.length-.5)/I[0].values.length]:A||[5+U/2,it-U/2-5]),v.domain(E||[d3.min(I[0].values.map(rt).concat($)),d3.max(I[0].values.map(G).concat($))]).range(O||[ct,0]),P.domain()[0]===P.domain()[1]&&(P.domain()[0]?P.domain([P.domain()[0]-.01*P.domain()[0],P.domain()[1]+.01*P.domain()[1]]):P.domain([-1,1])),v.domain()[0]===v.domain()[1]&&(v.domain()[0]?v.domain([v.domain()[0]+.01*v.domain()[0],v.domain()[1]-.01*v.domain()[1]]):v.domain([-1,1]));var p=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([I[0].values]),_=p.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),D=_.append("defs"),Z=_.append("g"),dt=p.select("g");Z.append("g").attr("class","nv-ticks"),p.attr("transform","translate("+a.left+","+a.top+")"),x.on("click",function(ut,Q){B.chartClick({data:ut,index:Q,pos:d3.event,id:m})}),D.append("clipPath").attr("id","nv-chart-clip-path-"+m).append("rect"),p.select("#nv-chart-clip-path-"+m+" rect").attr("width",it).attr("height",ct),dt.attr("clip-path",q?"url(#nv-chart-clip-path-"+m+")":"");var ht=p.select(".nv-ticks").selectAll(".nv-tick").data(function(ut){return ut});ht.exit().remove();var h=ht.enter().append("g");ht.attr("class",function(ut,Q,ot){return(J(ut,Q)>tt(ut,Q)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+ot+"-"+Q}),h.append("line").attr("class","nv-candlestick-lines").attr("transform",function(ut,Q){return"translate("+P(C(ut,Q))+",0)"}).attr("x1",0).attr("y1",function(ut,Q){return v(G(ut,Q))}).attr("x2",0).attr("y2",function(ut,Q){return v(rt(ut,Q))}),h.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(ut,Q){return"translate("+(P(C(ut,Q))-U/2)+","+(v(W(ut,Q))-(J(ut,Q)>tt(ut,Q)?v(tt(ut,Q))-v(J(ut,Q)):0))+")"}).attr("x",0).attr("y",0).attr("width",U).attr("height",function(ut,Q){var ot=J(ut,Q),yt=tt(ut,Q);return ot>yt?v(yt)-v(ot):v(ot)-v(yt)}),ht.select(".nv-candlestick-lines").transition().attr("transform",function(ut,Q){return"translate("+P(C(ut,Q))+",0)"}).attr("x1",0).attr("y1",function(ut,Q){return v(G(ut,Q))}).attr("x2",0).attr("y2",function(ut,Q){return v(rt(ut,Q))}),ht.select(".nv-candlestick-rects").transition().attr("transform",function(ut,Q){return"translate("+(P(C(ut,Q))-U/2)+","+(v(W(ut,Q))-(J(ut,Q)>tt(ut,Q)?v(tt(ut,Q))-v(J(ut,Q)):0))+")"}).attr("x",0).attr("y",0).attr("width",U).attr("height",function(ut,Q){var ot=J(ut,Q),yt=tt(ut,Q);return ot>yt?v(yt)-v(ot):v(ot)-v(yt)})}),M}return M.highlightPoint=function(b,I){M.clearHighlights(),x.select(".nv-candlestickBar .nv-tick-0-"+b).classed("hover",I)},M.clearHighlights=function(){x.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)},M.dispatch=B,M.options=f.utils.optionsFunc.bind(M),M._options=Object.create({},{width:{get:function(){return u},set:function(b){u=b}},height:{get:function(){return w},set:function(b){w=b}},xScale:{get:function(){return P},set:function(b){P=b}},yScale:{get:function(){return v},set:function(b){v=b}},xDomain:{get:function(){return V},set:function(b){V=b}},yDomain:{get:function(){return E},set:function(b){E=b}},xRange:{get:function(){return A},set:function(b){A=b}},yRange:{get:function(){return O},set:function(b){O=b}},forceX:{get:function(){return j},set:function(b){j=b}},forceY:{get:function(){return $},set:function(b){$=b}},padData:{get:function(){return st},set:function(b){st=b}},clipEdge:{get:function(){return q},set:function(b){q=b}},id:{get:function(){return m},set:function(b){m=b}},interactive:{get:function(){return R},set:function(b){R=b}},x:{get:function(){return C},set:function(b){C=b}},y:{get:function(){return W},set:function(b){W=b}},open:{get:function(){return J()},set:function(b){J=b}},close:{get:function(){return tt()},set:function(b){tt=b}},high:{get:function(){return G},set:function(b){G=b}},low:{get:function(){return rt},set:function(b){rt=b}},margin:{get:function(){return a},set:function(b){a.top=null!=b.top?b.top:a.top,a.right=null!=b.right?b.right:a.right,a.bottom=null!=b.bottom?b.bottom:a.bottom,a.left=null!=b.left?b.left:a.left}},color:{get:function(){return z},set:function(b){z=f.utils.getColor(b)}}}),f.utils.initOptions(M),M},f.models.cumulativeLineChart=function(){"use strict";var V,E,a=f.models.line(),u=f.models.axis(),w=f.models.axis(),m=f.models.legend(),x=f.models.legend(),P=f.interactiveGuideline(),v=f.models.tooltip(),C={top:30,right:30,bottom:50,left:60},W=null,J=f.utils.defaultColor(),tt=null,G=null,rt=!0,j=!0,$=!0,st=!1,q=!0,z=!1,R=!0,A=a.id(),O=f.utils.state(),B=null,M=null,b=function(Q){return Q.average},I=d3.dispatch("stateChange","changeState","renderEnd"),ct=250,U=!1;O.index=0,O.rescaleY=R,u.orient("bottom").tickPadding(7),w.orient(st?"right":"left"),v.valueFormatter(function(Q,ot){return w.tickFormat()(Q,ot)}).headerFormatter(function(Q,ot){return u.tickFormat()(Q,ot)}),x.updateState(!1);var Z,p=d3.scale.linear(),_={i:0,x:0},D=f.utils.renderWatch(I,ct);function h(Q){return D.reset(),D.models(a),j&&D.models(u),$&&D.models(w),Q.each(function(Rt){var yt=d3.select(this);f.utils.initSVG(yt),yt.classed("nv-chart-"+A,!0);var N,Et=f.utils.availableWidth(tt,yt,C),gt=f.utils.availableHeight(G,yt,C);if(h.update=function(){0===ct?yt.call(h):yt.transition().duration(ct).call(h)},h.container=this,O.setter(function(Q){return function(ot){void 0!==ot.index&&(_.i=ot.index),void 0!==ot.rescaleY&&(R=ot.rescaleY),void 0!==ot.active&&Q.forEach(function(yt,wt){yt.disabled=!ot.active[wt]})}}(Rt),h.update).getter(function(Q){return function(){return{active:Q.map(function(ot){return!ot.disabled}),index:_.i,rescaleY:R}}}(Rt)).update(),O.disabled=Rt.map(function(Pt){return!!Pt.disabled}),!B)for(N in B={},O)B[N]=O[N]instanceof Array?O[N].slice(0):O[N];var lt=d3.behavior.drag().on("dragstart",function F(Pt,$t){d3.select(h.container).style("cursor","ew-resize")}).on("drag",function ft(Pt,$t){_.x=d3.event.x,_.i=Math.round(p.invert(_.x)),re()}).on("dragend",function xt(Pt,$t){d3.select(h.container).style("cursor","auto"),O.index=_.i,I.stateChange(O)});if(!Rt||!Rt.length||!Rt.filter(function(Pt){return Pt.values.length}).length)return f.utils.noData(h,yt),h;yt.selectAll(".nv-noData").remove(),V=a.xScale(),E=a.yScale(),p.domain([0,Rt[0].values.length-1]).range([0,Et]).clamp(!0),Rt=function at(Q,ot){return S||(S=a.y()),ot.map(function(yt,wt){if(!yt.values)return yt;var Et=yt.values[Q];if(null==Et)return yt;var gt=S(Et,Q);return Math.abs(gt)<1e-5&&!U?(yt.tempDisabled=!0,yt):(yt.tempDisabled=!1,yt.values=yt.values.map(function(N,lt){return N.display={y:(S(N,lt)-gt)/gt},N}),yt)})}(_.i,Rt),void 0===Z&&(Z=ut(Rt)),R?a.yDomain(null):(a.yDomain(Z),a.clipEdge(!0));var Qt=z?"none":"all",Ct=yt.selectAll("g.nv-wrap.nv-cumulativeLine").data([Rt]),St=Ct.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),Dt=Ct.select("g");if(St.append("g").attr("class","nv-interactive"),St.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),St.append("g").attr("class","nv-y nv-axis"),St.append("g").attr("class","nv-background"),St.append("g").attr("class","nv-linesWrap").style("pointer-events",Qt),St.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),St.append("g").attr("class","nv-legendWrap"),St.append("g").attr("class","nv-controlsWrap"),rt?(m.width(Et),Dt.select(".nv-legendWrap").datum(Rt).call(m),!W&&m.height()!==C.top&&(C.top=m.height(),gt=f.utils.availableHeight(G,yt,C)),Dt.select(".nv-legendWrap").attr("transform","translate(0,"+-C.top+")")):Dt.select(".nv-legendWrap").selectAll("*").remove(),q){var ne=[{key:"Re-scale y-axis",disabled:!R}];x.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),Dt.select(".nv-controlsWrap").datum(ne).attr("transform","translate(0,"+-C.top+")").call(x)}else Dt.select(".nv-controlsWrap").selectAll("*").remove();Ct.attr("transform","translate("+C.left+","+C.top+")"),st&&Dt.select(".nv-y.nv-axis").attr("transform","translate("+Et+",0)");var _t=Rt.filter(function(Pt){return Pt.tempDisabled});Ct.select(".tempDisabled").remove(),_t.length&&Ct.append("text").attr("class","tempDisabled").attr("x",Et/2).attr("y","-.71em").style("text-anchor","end").text(_t.map(function(Pt){return Pt.key}).join(", ")+" values cannot be calculated for this time period."),z&&(P.width(Et).height(gt).margin({left:C.left,top:C.top}).svgContainer(yt).xScale(V),Ct.select(".nv-interactive").call(P)),St.select(".nv-background").append("rect"),Dt.select(".nv-background rect").attr("width",Et).attr("height",gt),a.y(function(Pt){return Pt.display.y}).width(Et).height(gt).color(Rt.map(function(Pt,$t){return Pt.color||J(Pt,$t)}).filter(function(Pt,$t){return!Rt[$t].disabled&&!Rt[$t].tempDisabled}));var Yt=Dt.select(".nv-linesWrap").datum(Rt.filter(function(Pt){return!Pt.disabled&&!Pt.tempDisabled}));Yt.call(a),Rt.forEach(function(Pt,$t){Pt.seriesIndex=$t});var te=Rt.filter(function(Pt){return!Pt.disabled&&!!b(Pt)}),oe=Dt.select(".nv-avgLinesWrap").selectAll("line").data(te,function(Pt){return Pt.key}),Wt=function(Pt){var $t=E(b(Pt));return $t<0?0:$t>gt?gt:$t};oe.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(Pt,$t){return a.color()(Pt,Pt.seriesIndex)}).attr("x1",0).attr("x2",Et).attr("y1",Wt).attr("y2",Wt),oe.style("stroke-opacity",function(Pt){var $t=E(b(Pt));return $t<0||$t>gt?0:1}).attr("x1",0).attr("x2",Et).attr("y1",Wt).attr("y2",Wt),oe.exit().remove();var Xt=Yt.selectAll(".nv-indexLine").data([_]);function re(){Xt.data([_]);var Pt=h.duration();h.duration(0),h.update(),h.duration(Pt)}Xt.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(lt),Xt.attr("transform",function(Pt){return"translate("+p(Pt.i)+",0)"}).attr("height",gt),j&&(u.scale(V)._ticks(f.utils.calcTicksX(Et/70,Rt)).tickSize(-gt,0),Dt.select(".nv-x.nv-axis").attr("transform","translate(0,"+E.range()[0]+")"),Dt.select(".nv-x.nv-axis").call(u)),$&&(w.scale(E)._ticks(f.utils.calcTicksY(gt/36,Rt)).tickSize(-Et,0),Dt.select(".nv-y.nv-axis").call(w)),Dt.select(".nv-background rect").on("click",function(){_.x=d3.mouse(this)[0],_.i=Math.round(p.invert(_.x)),O.index=_.i,I.stateChange(O),re()}),a.dispatch.on("elementClick",function(Pt){_.i=Pt.pointIndex,_.x=p(_.i),O.index=_.i,I.stateChange(O),re()}),x.dispatch.on("legendClick",function(Pt,$t){Pt.disabled=!Pt.disabled,O.rescaleY=R=!Pt.disabled,R||(Z=ut(Rt)),I.stateChange(O),h.update()}),m.dispatch.on("stateChange",function(Pt){for(var $t in Pt)O[$t]=Pt[$t];I.stateChange(O),h.update()}),P.dispatch.on("elementMousemove",function(Pt){a.clearHighlights();var $t,ie,xe,de=[];if(Rt.filter(function(Mt,Ot){return Mt.seriesIndex=Ot,!(Mt.disabled||Mt.tempDisabled)}).forEach(function(Mt,Ot){ie=f.interactiveBisect(Mt.values,Pt.pointXValue,h.x()),a.highlightPoint(Ot,ie,!0);var jt=Mt.values[ie];void 0!==jt&&(void 0===$t&&($t=jt),void 0===xe&&(xe=h.xScale()(h.x()(jt,ie))),de.push({key:Mt.key,value:h.y()(jt,ie),color:J(Mt,Mt.seriesIndex)}))}),de.length>2){var be=h.yScale().invert(Pt.mouseY),we=.03*Math.abs(h.yScale().domain()[0]-h.yScale().domain()[1]),zt=f.nearestValueIndex(de.map(function(Mt){return Mt.value}),be,we);null!==zt&&(de[zt].highlight=!0)}var ce=u.tickFormat()(h.x()($t,ie),ie);P.tooltip.valueFormatter(function(Mt,Ot){return w.tickFormat()(Mt)}).data({value:ce,series:de})(),P.renderGuideLine(xe)}),P.dispatch.on("elementMouseout",function(Pt){a.clearHighlights()}),I.on("changeState",function(Pt){void 0!==Pt.disabled&&(Rt.forEach(function($t,ie){$t.disabled=Pt.disabled[ie]}),O.disabled=Pt.disabled),void 0!==Pt.index&&(_.i=Pt.index,_.x=p(_.i),O.index=Pt.index,Xt.data([_])),void 0!==Pt.rescaleY&&(R=Pt.rescaleY),h.update()})}),D.renderEnd("cumulativeLineChart immediate"),h}a.dispatch.on("elementMouseover.tooltip",function(Q){var ot={x:h.x()(Q.point),y:h.y()(Q.point),color:Q.point.color};Q.point=ot,v.data(Q).hidden(!1)}),a.dispatch.on("elementMouseout.tooltip",function(Q){v.hidden(!0)});var S=null;function ut(Q){var ot=Q.filter(function(yt){return!(yt.disabled||yt.tempDisabled)}).map(function(yt,wt){return d3.extent(yt.values,function(Et){return Et.display.y})});return[d3.min(ot,function(yt){return yt[0]}),d3.max(ot,function(yt){return yt[1]})]}return h.dispatch=I,h.lines=a,h.legend=m,h.controls=x,h.xAxis=u,h.yAxis=w,h.interactiveLayer=P,h.state=O,h.tooltip=v,h.options=f.utils.optionsFunc.bind(h),h._options=Object.create({},{width:{get:function(){return tt},set:function(Q){tt=Q}},height:{get:function(){return G},set:function(Q){G=Q}},showControls:{get:function(){return q},set:function(Q){q=Q}},showLegend:{get:function(){return rt},set:function(Q){rt=Q}},average:{get:function(){return b},set:function(Q){b=Q}},defaultState:{get:function(){return B},set:function(Q){B=Q}},noData:{get:function(){return M},set:function(Q){M=Q}},showXAxis:{get:function(){return j},set:function(Q){j=Q}},showYAxis:{get:function(){return $},set:function(Q){$=Q}},noErrorCheck:{get:function(){return U},set:function(Q){U=Q}},rescaleY:{get:function(){return R},set:function(Q){R=Q,h.state.rescaleY=Q}},margin:{get:function(){return C},set:function(Q){void 0!==Q.top&&(C.top=Q.top,W=Q.top),C.right=void 0!==Q.right?Q.right:C.right,C.bottom=void 0!==Q.bottom?Q.bottom:C.bottom,C.left=void 0!==Q.left?Q.left:C.left}},color:{get:function(){return J},set:function(Q){J=f.utils.getColor(Q),m.color(J)}},useInteractiveGuideline:{get:function(){return z},set:function(Q){z=Q,!0===Q&&(h.interactive(!1),h.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return st},set:function(Q){st=Q,w.orient(Q?"right":"left")}},duration:{get:function(){return ct},set:function(Q){a.duration(ct=Q),u.duration(ct),w.duration(ct),D.reset(ct)}}}),f.utils.inheritOptions(h,a),f.utils.initOptions(h),h},f.models.discreteBar=function(){"use strict";var x,j,$,st,q,E,A,a={top:0,right:0,bottom:0,left:0},u=960,w=500,m=Math.floor(1e4*Math.random()),P=d3.scale.ordinal(),v=d3.scale.linear(),C=function(M){return M.x},W=function(M){return M.y},J=[0],tt=f.utils.defaultColor(),G=!1,rt=d3.format(",.2f"),z=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),R="discreteBar",V=250,O=f.utils.renderWatch(z,V);function B(M){return O.reset(),M.each(function(b){var I=u-a.left-a.right,it=w-a.top-a.bottom;x=d3.select(this),f.utils.initSVG(x),b.forEach(function(h,S){h.values.forEach(function(at){at.series=S})});var ct=j&&$?[]:b.map(function(h){return h.values.map(function(S,at){return{x:C(S,at),y:W(S,at),y0:S.y0}})});P.domain(j||d3.merge(ct).map(function(h){return h.x})).rangeBands(st||[0,I],.1),v.domain($||d3.extent(d3.merge(ct).map(function(h){return h.y}).concat(J))),v.range(G?q||[it-(v.domain()[0]<0?12:0),v.domain()[1]>0?12:0]:q||[it,0]),E=E||P,A=A||v.copy().range([v(0),v(0)]);var U=x.selectAll("g.nv-wrap.nv-discretebar").data([b]),_=U.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar").append("g");U.select("g"),_.append("g").attr("class","nv-groups"),U.attr("transform","translate("+a.left+","+a.top+")");var Z=U.select(".nv-groups").selectAll(".nv-group").data(function(h){return h},function(h){return h.key});Z.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),Z.exit().watchTransition(O,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),Z.attr("class",function(h,S){return"nv-group nv-series-"+S}).classed("hover",function(h){return h.hover}),Z.watchTransition(O,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);var dt=Z.selectAll("g.nv-bar").data(function(h){return h.values});dt.exit().remove();var ht=dt.enter().append("g").attr("transform",function(h,S,at){return"translate("+(P(C(h,S))+.05*P.rangeBand())+", "+v(0)+")"}).on("mouseover",function(h,S){d3.select(this).classed("hover",!0),z.elementMouseover({data:h,index:S,color:d3.select(this).style("fill")})}).on("mouseout",function(h,S){d3.select(this).classed("hover",!1),z.elementMouseout({data:h,index:S,color:d3.select(this).style("fill")})}).on("mousemove",function(h,S){z.elementMousemove({data:h,index:S,color:d3.select(this).style("fill")})}).on("click",function(h,S){z.elementClick({data:h,index:S,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()}).on("dblclick",function(h,S){z.elementDblClick({data:h,index:S,color:d3.select(this).style("fill")}),d3.event.stopPropagation()});ht.append("rect").attr("height",0).attr("width",.9*P.rangeBand()/b.length),G?(ht.append("text").attr("text-anchor","middle"),dt.select("text").text(function(h,S){return rt(W(h,S))}).watchTransition(O,"discreteBar: bars text").attr("x",.9*P.rangeBand()/2).attr("y",function(h,S){return W(h,S)<0?v(W(h,S))-v(0)+12:-4})):dt.selectAll("text").remove(),dt.attr("class",function(h,S){return W(h,S)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(h,S){return h.color||tt(h,S)}).style("stroke",function(h,S){return h.color||tt(h,S)}).select("rect").attr("class",R).watchTransition(O,"discreteBar: bars rect").attr("width",.9*P.rangeBand()/b.length),dt.watchTransition(O,"discreteBar: bars").attr("transform",function(h,S){return"translate("+(P(C(h,S))+.05*P.rangeBand())+", "+(W(h,S)<0?v(0):v(0)-v(W(h,S))<1?v(0)-1:v(W(h,S)))+")"}).select("rect").attr("height",function(h,S){return Math.max(Math.abs(v(W(h,S))-v(0)),1)}),E=P.copy(),A=v.copy()}),O.renderEnd("discreteBar immediate"),B}return B.dispatch=z,B.options=f.utils.optionsFunc.bind(B),B._options=Object.create({},{width:{get:function(){return u},set:function(M){u=M}},height:{get:function(){return w},set:function(M){w=M}},forceY:{get:function(){return J},set:function(M){J=M}},showValues:{get:function(){return G},set:function(M){G=M}},x:{get:function(){return C},set:function(M){C=M}},y:{get:function(){return W},set:function(M){W=M}},xScale:{get:function(){return P},set:function(M){P=M}},yScale:{get:function(){return v},set:function(M){v=M}},xDomain:{get:function(){return j},set:function(M){j=M}},yDomain:{get:function(){return $},set:function(M){$=M}},xRange:{get:function(){return st},set:function(M){st=M}},yRange:{get:function(){return q},set:function(M){q=M}},valueFormat:{get:function(){return rt},set:function(M){rt=M}},id:{get:function(){return m},set:function(M){m=M}},rectClass:{get:function(){return R},set:function(M){R=M}},margin:{get:function(){return a},set:function(M){a.top=void 0!==M.top?M.top:a.top,a.right=void 0!==M.right?M.right:a.right,a.bottom=void 0!==M.bottom?M.bottom:a.bottom,a.left=void 0!==M.left?M.left:a.left}},color:{get:function(){return tt},set:function(M){tt=f.utils.getColor(M)}},duration:{get:function(){return V},set:function(M){O.reset(V=M)}}}),f.utils.initOptions(B),B},f.models.discreteBarChart=function(){"use strict";var z,R,a=f.models.discreteBar(),u=f.models.axis(),w=f.models.axis(),m=f.models.legend(),x=f.models.tooltip(),P={top:15,right:10,bottom:50,left:60},v=null,C=null,W=null,J=f.utils.getColor(),tt=!1,G=!0,rt=!0,j=!1,$=!1,st=!1,q=0,V=null,E=d3.dispatch("beforeUpdate","renderEnd"),A=250;u.orient("bottom").showMaxMin(!1).tickFormat(function(M){return M}),w.orient(j?"right":"left").tickFormat(d3.format(",.1f")),x.duration(0).headerEnabled(!1).valueFormatter(function(M,b){return w.tickFormat()(M,b)}).keyFormatter(function(M,b){return u.tickFormat()(M,b)});var O=f.utils.renderWatch(E,A);function B(M){return O.reset(),O.models(a),G&&O.models(u),rt&&O.models(w),M.each(function(b){var I=d3.select(this);f.utils.initSVG(I);var ct=f.utils.availableWidth(C,I,P),U=f.utils.availableHeight(W,I,P);if(B.update=function(){E.beforeUpdate(),I.transition().duration(A).call(B)},B.container=this,!b||!b.length||!b.filter(function(h){return h.values.length}).length)return f.utils.noData(B,I),B;I.selectAll(".nv-noData").remove(),z=a.xScale(),R=a.yScale().clamp(!0);var p=I.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([b]),_=p.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),D=_.append("defs"),Z=p.select("g");if(_.append("g").attr("class","nv-x nv-axis"),_.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),_.append("g").attr("class","nv-barsWrap"),_.append("g").attr("class","nv-legendWrap"),Z.attr("transform","translate("+P.left+","+P.top+")"),tt?(m.width(ct),Z.select(".nv-legendWrap").datum(b).call(m),!v&&m.height()!==P.top&&(P.top=m.height(),U=f.utils.availableHeight(W,I,P)),p.select(".nv-legendWrap").attr("transform","translate(0,"+-P.top+")")):Z.select(".nv-legendWrap").selectAll("*").remove(),j&&Z.select(".nv-y.nv-axis").attr("transform","translate("+ct+",0)"),a.width(ct).height(U),Z.select(".nv-barsWrap").datum(b.filter(function(h){return!h.disabled})).transition().call(a),D.append("clipPath").attr("id","nv-x-label-clip-"+a.id()).append("rect"),Z.select("#nv-x-label-clip-"+a.id()+" rect").attr("width",z.rangeBand()*($?2:1)).attr("height",16).attr("x",-z.rangeBand()/($?1:2)),G){u.scale(z)._ticks(f.utils.calcTicksX(ct/100,b)).tickSize(-U,0),Z.select(".nv-x.nv-axis").attr("transform","translate(0,"+(R.range()[0]+(a.showValues()&&R.domain()[0]<0?16:0))+")"),Z.select(".nv-x.nv-axis").call(u);var ht=Z.select(".nv-x.nv-axis").selectAll("g");$&&ht.selectAll("text").attr("transform",function(h,S,at){return"translate(0,"+(at%2==0?"5":"17")+")"}),q&&ht.selectAll(".tick text").attr("transform","rotate("+q+" 0,0)").style("text-anchor",q>0?"start":"end"),st&&Z.selectAll(".tick text").call(f.utils.wrapTicks,B.xAxis.rangeBand())}rt&&(w.scale(R)._ticks(f.utils.calcTicksY(U/36,b)).tickSize(-ct,0),Z.select(".nv-y.nv-axis").call(w)),Z.select(".nv-zeroLine line").attr("x1",0).attr("x2",j?-ct:ct).attr("y1",R(0)).attr("y2",R(0))}),O.renderEnd("discreteBar chart immediate"),B}return a.dispatch.on("elementMouseover.tooltip",function(M){M.series={key:B.x()(M.data),value:B.y()(M.data),color:M.color},x.data(M).hidden(!1)}),a.dispatch.on("elementMouseout.tooltip",function(M){x.hidden(!0)}),a.dispatch.on("elementMousemove.tooltip",function(M){x()}),B.dispatch=E,B.discretebar=a,B.legend=m,B.xAxis=u,B.yAxis=w,B.tooltip=x,B.options=f.utils.optionsFunc.bind(B),B._options=Object.create({},{width:{get:function(){return C},set:function(M){C=M}},height:{get:function(){return W},set:function(M){W=M}},showLegend:{get:function(){return tt},set:function(M){tt=M}},staggerLabels:{get:function(){return $},set:function(M){$=M}},rotateLabels:{get:function(){return q},set:function(M){q=M}},wrapLabels:{get:function(){return st},set:function(M){st=!!M}},showXAxis:{get:function(){return G},set:function(M){G=M}},showYAxis:{get:function(){return rt},set:function(M){rt=M}},noData:{get:function(){return V},set:function(M){V=M}},margin:{get:function(){return P},set:function(M){void 0!==M.top&&(P.top=M.top,v=M.top),P.right=void 0!==M.right?M.right:P.right,P.bottom=void 0!==M.bottom?M.bottom:P.bottom,P.left=void 0!==M.left?M.left:P.left}},duration:{get:function(){return A},set:function(M){O.reset(A=M),a.duration(A),u.duration(A),w.duration(A)}},color:{get:function(){return J},set:function(M){J=f.utils.getColor(M),a.color(J),m.color(J)}},rightAlignYAxis:{get:function(){return j},set:function(M){j=M,w.orient(M?"right":"left")}}}),f.utils.inheritOptions(B,a),f.utils.initOptions(B),B},f.models.distribution=function(){"use strict";var tt,a={top:0,right:0,bottom:0,left:0},u=400,w=8,m="x",x=function(j){return j[m]},P=f.utils.defaultColor(),v=d3.scale.linear(),W=250,J=d3.dispatch("renderEnd"),G=f.utils.renderWatch(J,W);function rt(j){return G.reset(),j.each(function($){var q="x"==m?"y":"x",z=d3.select(this);f.utils.initSVG(z),tt=tt||v;var R=z.selectAll("g.nv-distribution").data([$]),A=(R.enter().append("g").attr("class","nvd3 nv-distribution").append("g"),R.select("g"));R.attr("transform","translate("+a.left+","+a.top+")");var O=A.selectAll("g.nv-dist").data(function(M){return M},function(M){return M.key});O.enter().append("g"),O.attr("class",function(M,b){return"nv-dist nv-series-"+b}).style("stroke",function(M,b){return P(M,b)});var B=O.selectAll("line.nv-dist"+m).data(function(M){return M.values});B.enter().append("line").attr(m+"1",function(M,b){return tt(x(M,b))}).attr(m+"2",function(M,b){return tt(x(M,b))}),G.transition(O.exit().selectAll("line.nv-dist"+m),"dist exit").attr(m+"1",function(M,b){return v(x(M,b))}).attr(m+"2",function(M,b){return v(x(M,b))}).style("stroke-opacity",0).remove(),B.attr("class",function(M,b){return"nv-dist"+m+" nv-dist"+m+"-"+b}).attr(q+"1",0).attr(q+"2",w),G.transition(B,"dist").attr(m+"1",function(M,b){return v(x(M,b))}).attr(m+"2",function(M,b){return v(x(M,b))}),tt=v.copy()}),G.renderEnd("distribution immediate"),rt}return rt.options=f.utils.optionsFunc.bind(rt),rt.dispatch=J,rt.margin=function(j){return arguments.length?(a.top=void 0!==j.top?j.top:a.top,a.right=void 0!==j.right?j.right:a.right,a.bottom=void 0!==j.bottom?j.bottom:a.bottom,a.left=void 0!==j.left?j.left:a.left,rt):a},rt.width=function(j){return arguments.length?(u=j,rt):u},rt.axis=function(j){return arguments.length?(m=j,rt):m},rt.size=function(j){return arguments.length?(w=j,rt):w},rt.getData=function(j){return arguments.length?(x=d3.functor(j),rt):x},rt.scale=function(j){return arguments.length?(v=j,rt):v},rt.color=function(j){return arguments.length?(P=f.utils.getColor(j),rt):P},rt.duration=function(j){return arguments.length?(G.reset(W=j),rt):W},rt},f.models.focus=function(u){"use strict";u=u||f.models.line();var j,$,w=f.models.axis(),m=f.models.axis(),x=d3.svg.brush(),P={top:10,right:0,bottom:30,left:0},v=f.utils.defaultColor(),C=null,W=70,J=!0,tt=!1,G=!1,st=null,q=250,z=d3.dispatch("brush","onBrush","renderEnd"),R=!0;u.interactive(!1),u.pointActive(function(A){return!1});var V=f.utils.renderWatch(z,q);function E(A){return V.reset(),V.models(u),J&&V.models(w),tt&&V.models(m),A.each(function(O){var B=d3.select(this);f.utils.initSVG(B);var M=f.utils.availableWidth(C,B,P),b=W-P.top-P.bottom;E.update=function(){0===q?B.call(E):B.transition().duration(q).call(E)},E.container=this,j=u.xScale(),$=u.yScale();var I=B.selectAll("g.nv-focus").data([O]),it=I.enter().append("g").attr("class","nvd3 nv-focus").append("g"),ct=I.select("g");I.attr("transform","translate("+P.left+","+P.top+")"),it.append("g").attr("class","nv-background").append("rect"),it.append("g").attr("class","nv-x nv-axis"),it.append("g").attr("class","nv-y nv-axis"),it.append("g").attr("class","nv-contentWrap"),it.append("g").attr("class","nv-brushBackground"),it.append("g").attr("class","nv-x nv-brush"),G&&ct.select(".nv-y.nv-axis").attr("transform","translate("+M+",0)"),ct.select(".nv-background rect").attr("width",M).attr("height",b),u.width(M).height(b).color(O.map(function(h,S){return h.color||v(h,S)}).filter(function(h,S){return!O[S].disabled}));var U=ct.select(".nv-contentWrap").datum(O.filter(function(h){return!h.disabled}));d3.transition(U).call(u),x.x(j).on("brush",function(){ht(R)}),x.on("brushend",function(){R||z.onBrush(x.empty()?j.domain():x.extent())}),st&&x.extent(st);var p=ct.select(".nv-brushBackground").selectAll("g").data([st||x.extent()]),_=p.enter().append("g");_.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",b),_.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",b);var D=ct.select(".nv-x.nv-brush").call(x);function ht(h){st=x.empty()?null:x.extent();var S=x.empty()?j.domain():x.extent();z.brush({extent:S,brush:x}),function dt(){x.empty()||x.extent(st),p.data([x.empty()?j.domain():st]).each(function(h,S){var at=j(h[0])-j.range()[0],ut=M-j(h[1]);d3.select(this).select(".left").attr("width",at<0?0:at),d3.select(this).select(".right").attr("x",j(h[1])).attr("width",ut<0?0:ut)})}(),h&&z.onBrush(S)}D.selectAll("rect").attr("height",b),D.selectAll(".resize").append("path").attr("d",function Z(h){var S=+("e"==h),at=S?1:-1,ut=b/3;return"M"+.5*at+","+ut+"A6,6 0 0 "+S+" "+6.5*at+","+(ut+6)+"V"+(2*ut-6)+"A6,6 0 0 "+S+" "+.5*at+","+2*ut+"ZM"+2.5*at+","+(ut+8)+"V"+(2*ut-8)+"M"+4.5*at+","+(ut+8)+"V"+(2*ut-8)}),ht(!0),ct.select(".nv-background rect").attr("width",M).attr("height",b),J&&(w.scale(j)._ticks(f.utils.calcTicksX(M/100,O)).tickSize(-b,0),ct.select(".nv-x.nv-axis").attr("transform","translate(0,"+$.range()[0]+")"),d3.transition(ct.select(".nv-x.nv-axis")).call(w)),tt&&(m.scale($)._ticks(f.utils.calcTicksY(b/36,O)).tickSize(-M,0),d3.transition(ct.select(".nv-y.nv-axis")).call(m)),ct.select(".nv-x.nv-axis").attr("transform","translate(0,"+$.range()[0]+")")}),V.renderEnd("focus immediate"),E}return E.dispatch=z,E.content=u,E.brush=x,E.xAxis=w,E.yAxis=m,E.options=f.utils.optionsFunc.bind(E),E._options=Object.create({},{width:{get:function(){return C},set:function(A){C=A}},height:{get:function(){return W},set:function(A){W=A}},showXAxis:{get:function(){return J},set:function(A){J=A}},showYAxis:{get:function(){return tt},set:function(A){tt=A}},brushExtent:{get:function(){return st},set:function(A){st=A}},syncBrushing:{get:function(){return R},set:function(A){R=A}},margin:{get:function(){return P},set:function(A){P.top=void 0!==A.top?A.top:P.top,P.right=void 0!==A.right?A.right:P.right,P.bottom=void 0!==A.bottom?A.bottom:P.bottom,P.left=void 0!==A.left?A.left:P.left}},duration:{get:function(){return q},set:function(A){V.reset(q=A),u.duration(q),w.duration(q),m.duration(q)}},color:{get:function(){return v},set:function(A){v=f.utils.getColor(A),u.color(v)}},interpolate:{get:function(){return u.interpolate()},set:function(A){u.interpolate(A)}},xTickFormat:{get:function(){return w.tickFormat()},set:function(A){w.tickFormat(A)}},yTickFormat:{get:function(){return m.tickFormat()},set:function(A){m.tickFormat(A)}},x:{get:function(){return u.x()},set:function(A){u.x(A)}},y:{get:function(){return u.y()},set:function(A){u.y(A)}},rightAlignYAxis:{get:function(){return G},set:function(A){m.orient((G=A)?"right":"left")}}}),f.utils.inheritOptions(E,u),f.utils.initOptions(E),E},f.models.forceDirectedGraph=function(){"use strict";var a={top:2,right:0,bottom:2,left:0},u=400,w=32,m=null,x=d3.dispatch("renderEnd"),P=f.utils.getColor(["#000"]),v=f.models.tooltip(),C=null,W=.1,J=.9,tt=30,G=-120,rt=.1,j=.8,$=.1,st=5,q=function(O){},z=function(O){},R=d3.functor(0),V=d3.functor(0),E=f.utils.renderWatch(x);function A(O){return E.reset(),O.each(function(B){m=d3.select(this),f.utils.initSVG(m);var M=f.utils.availableWidth(u,m,a),b=f.utils.availableHeight(w,m,a);if(m.attr("width",M).attr("height",b),!B||!B.links||!B.nodes)return f.utils.noData(A,m),A;m.selectAll(".nv-noData").remove(),m.selectAll("*").remove();var I=new Set;B.nodes.forEach(function(p){Object.keys(p).forEach(function(D){I.add(D)})});var it=d3.layout.force().nodes(B.nodes).links(B.links).size([M,b]).linkStrength(W).friction(J).linkDistance(tt).charge(G).gravity(rt).theta(j).alpha($).start(),ct=m.selectAll(".link").data(B.links).enter().append("line").attr("class","nv-force-link").style("stroke-width",function(p){return Math.sqrt(p.value)}),U=m.selectAll(".node").data(B.nodes).enter().append("g").attr("class","nv-force-node").call(it.drag);U.append("circle").attr("r",st).style("fill",function(p){return P(p)}).on("mouseover",function(p){m.select(".nv-series-"+p.seriesIndex+" .nv-distx-"+p.pointIndex).attr("y1",p.py),m.select(".nv-series-"+p.seriesIndex+" .nv-disty-"+p.pointIndex).attr("x2",p.px);var _=P(p);p.series=[],I.forEach(function(D){p.series.push({color:_,key:D,value:p[D]})}),v.data(p).hidden(!1)}).on("mouseout",function(p){v.hidden(!0)}),v.headerFormatter(function(p){return"Node"}),z(ct),q(U),it.on("tick",function(){ct.attr("x1",function(p){return p.source.x}).attr("y1",function(p){return p.source.y}).attr("x2",function(p){return p.target.x}).attr("y2",function(p){return p.target.y}),U.attr("transform",function(p){return"translate("+p.x+", "+p.y+")"})})}),A}return A.options=f.utils.optionsFunc.bind(A),A._options=Object.create({},{width:{get:function(){return u},set:function(O){u=O}},height:{get:function(){return w},set:function(O){w=O}},linkStrength:{get:function(){return W},set:function(O){W=O}},friction:{get:function(){return J},set:function(O){J=O}},linkDist:{get:function(){return tt},set:function(O){tt=O}},charge:{get:function(){return G},set:function(O){G=O}},gravity:{get:function(){return rt},set:function(O){rt=O}},theta:{get:function(){return j},set:function(O){j=O}},alpha:{get:function(){return $},set:function(O){$=O}},radius:{get:function(){return st},set:function(O){st=O}},x:{get:function(){return R},set:function(O){R=d3.functor(O)}},y:{get:function(){return V},set:function(O){V=d3.functor(O)}},margin:{get:function(){return a},set:function(O){a.top=void 0!==O.top?O.top:a.top,a.right=void 0!==O.right?O.right:a.right,a.bottom=void 0!==O.bottom?O.bottom:a.bottom,a.left=void 0!==O.left?O.left:a.left}},color:{get:function(){return P},set:function(O){P=f.utils.getColor(O)}},noData:{get:function(){return C},set:function(O){C=O}},nodeExtras:{get:function(){return q},set:function(O){q=O}},linkExtras:{get:function(){return z},set:function(O){z=O}}}),A.dispatch=x,A.tooltip=v,f.utils.initOptions(A),A},f.models.furiousLegend=function(){"use strict";var a={top:5,right:0,bottom:5,left:0},u=400,w=20,m=function(q){return q.key},x=function(q){return q},P=f.utils.getColor(),v=20,C=!0,W=28,J=!0,tt=!0,G=!1,rt=!1,j=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),$="classic";function st(q){function z(V,E){return"furious"!=$?"#000":rt?V.disengaged?P(V,E):"#fff":rt?void 0:V.disabled?P(V,E):"#fff"}function R(V,E){return rt&&"furious"==$?V.disengaged?"#fff":P(V,E):V.disabled?"#fff":P(V,E)}return q.each(function(V){var E=u-a.left-a.right,A=d3.select(this);f.utils.initSVG(A);var O=A.selectAll("g.nv-legend").data([V]),M=(O.enter().append("g").attr("class","nvd3 nv-legend").append("g"),O.select("g"));O.attr("transform","translate("+a.left+","+a.top+")");var it,b=M.selectAll(".nv-series").data(function(wt){return"furious"!=$?wt:wt.filter(function(Et){return!!rt||!Et.disengaged})}),I=b.enter().append("g").attr("class","nv-series");"classic"==$?(I.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),it=b.select("circle")):"furious"==$&&(I.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),it=b.select("rect"),I.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),b.select(".nv-check-box").each(function(wt,Et){d3.select(this).selectAll("path").attr("stroke",z(wt,Et))})),I.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var p,U=b.select("text.nv-legend-text");switch(b.on("mouseover",function(wt,Et){j.legendMouseover(wt,Et)}).on("mouseout",function(wt,Et){j.legendMouseout(wt,Et)}).on("click",function(wt,Et){j.legendClick(wt,Et);var gt=b.data();tt&&("classic"==$?G?(gt.forEach(function(lt){lt.disabled=!0}),wt.disabled=!1):(wt.disabled=!wt.disabled,gt.every(function(lt){return lt.disabled})&&gt.forEach(function(lt){lt.disabled=!1})):"furious"==$&&(rt?(wt.disengaged=!wt.disengaged,wt.userDisabled=null==wt.userDisabled?!!wt.disabled:wt.userDisabled,wt.disabled=wt.disengaged||wt.userDisabled):rt||(wt.disabled=!wt.disabled,wt.userDisabled=wt.disabled,gt.filter(function(lt){return!lt.disengaged}).every(function(lt){return lt.userDisabled})&&gt.forEach(function(lt){lt.disabled=lt.userDisabled=!1}))),j.stateChange({disabled:gt.map(function(lt){return!!lt.disabled}),disengaged:gt.map(function(lt){return!!lt.disengaged})}))}).on("dblclick",function(wt,Et){if(("furious"!=$||!rt)&&(j.legendDblclick(wt,Et),tt)){var gt=b.data();gt.forEach(function(N){N.disabled=!0,"furious"==$&&(N.userDisabled=N.disabled)}),wt.disabled=!1,"furious"==$&&(wt.userDisabled=wt.disabled),j.stateChange({disabled:gt.map(function(N){return!!N.disabled})})}}),b.classed("nv-disabled",function(wt){return wt.userDisabled}),b.exit().remove(),U.attr("fill",z).text(function(wt){return x(m(wt))}),$){case"furious":p=23;break;case"classic":p=20}if(C){var _=[];b.each(function(wt,Et){var gt,lt;if(x(m(wt))&&x(m(wt)).length>v){var N=x(m(wt)).substring(0,v);gt=d3.select(this).select("text").text(N+"..."),d3.select(this).append("svg:title").text(x(m(wt)))}else gt=d3.select(this).select("text");try{if((lt=gt.node().getComputedTextLength())<=0)throw Error()}catch(F){lt=f.utils.calcApproxTextWidth(gt)}_.push(lt+W)});for(var D=0,Z=0,dt=[];Z<E&&D<_.length;)dt[D]=_[D],Z+=_[D++];for(0===D&&(D=1);Z>E&&D>1;){dt=[],D--;for(var ht=0;ht<_.length;ht++)_[ht]>(dt[ht%D]||0)&&(dt[ht%D]=_[ht]);Z=dt.reduce(function(wt,Et,gt,N){return wt+Et})}for(var h=[],S=0,at=0;S<D;S++)h[S]=at,at+=dt[S];b.attr("transform",function(wt,Et){return"translate("+h[Et%D]+","+(5+Math.floor(Et/D)*p)+")"}),M.attr("transform",J?"translate("+(u-a.right-Z)+","+a.top+")":"translate(0,"+a.top+")"),w=a.top+a.bottom+Math.ceil(_.length/D)*p}else{var yt,ut=5,Q=5,ot=0;b.attr("transform",function(wt,Et){var gt=d3.select(this).select("text").node().getComputedTextLength()+W;return u<a.left+a.right+(yt=Q)+gt&&(Q=yt=5,ut+=p),(Q+=gt)>ot&&(ot=Q),"translate("+yt+","+ut+")"}),M.attr("transform","translate("+(u-a.right-ot)+","+a.top+")"),w=a.top+a.bottom+ut+15}"furious"==$&&it.attr("width",function(wt,Et){return U[0][Et].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),it.style("fill",R).style("stroke",function(wt,Et){return wt.color||P(wt,Et)})}),st}return st.dispatch=j,st.options=f.utils.optionsFunc.bind(st),st._options=Object.create({},{width:{get:function(){return u},set:function(q){u=q}},height:{get:function(){return w},set:function(q){w=q}},key:{get:function(){return m},set:function(q){m=q}},keyFormatter:{get:function(){return x},set:function(q){x=q}},align:{get:function(){return C},set:function(q){C=q}},rightAlign:{get:function(){return J},set:function(q){J=q}},maxKeyLength:{get:function(){return v},set:function(q){v=q}},padding:{get:function(){return W},set:function(q){W=q}},updateState:{get:function(){return tt},set:function(q){tt=q}},radioButtonMode:{get:function(){return G},set:function(q){G=q}},expanded:{get:function(){return rt},set:function(q){rt=q}},vers:{get:function(){return $},set:function(q){$=q}},margin:{get:function(){return a},set:function(q){a.top=void 0!==q.top?q.top:a.top,a.right=void 0!==q.right?q.right:a.right,a.bottom=void 0!==q.bottom?q.bottom:a.bottom,a.left=void 0!==q.left?q.left:a.left}},color:{get:function(){return P},set:function(q){P=f.utils.getColor(q)}}}),f.utils.initOptions(st),st},f.models.historicalBar=function(){"use strict";var $,st,q,z,a={top:0,right:0,bottom:0,left:0},u=null,w=null,m=Math.floor(1e4*Math.random()),x=null,P=d3.scale.linear(),v=d3.scale.linear(),C=function(O){return O.x},W=function(O){return O.y},J=[],tt=[0],G=!1,rt=!0,j=f.utils.defaultColor(),R=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),V=!0,E=f.utils.renderWatch(R,0);function A(O){return O.each(function(B){E.reset(),x=d3.select(this);var M=f.utils.availableWidth(u,x,a),b=f.utils.availableHeight(w,x,a);f.utils.initSVG(x),P.domain($||d3.extent(B[0].values.map(C).concat(J))),P.range(G?q||[.5*M/B[0].values.length,M*(B[0].values.length-.5)/B[0].values.length]:q||[0,M]),v.domain(st||d3.extent(B[0].values.map(W).concat(tt))).range(z||[b,0]),P.domain()[0]===P.domain()[1]&&(P.domain()[0]?P.domain([P.domain()[0]-.01*P.domain()[0],P.domain()[1]+.01*P.domain()[1]]):P.domain([-1,1])),v.domain()[0]===v.domain()[1]&&(v.domain()[0]?v.domain([v.domain()[0]+.01*v.domain()[0],v.domain()[1]-.01*v.domain()[1]]):v.domain([-1,1]));var I=x.selectAll("g.nv-wrap.nv-historicalBar-"+m).data([B[0].values]),it=I.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+m),ct=it.append("defs"),U=it.append("g"),p=I.select("g");U.append("g").attr("class","nv-bars"),I.attr("transform","translate("+a.left+","+a.top+")"),x.on("click",function(D,Z){R.chartClick({data:D,index:Z,pos:d3.event,id:m})}),ct.append("clipPath").attr("id","nv-chart-clip-path-"+m).append("rect"),I.select("#nv-chart-clip-path-"+m+" rect").attr("width",M).attr("height",b),p.attr("clip-path",rt?"url(#nv-chart-clip-path-"+m+")":"");var _=I.select(".nv-bars").selectAll(".nv-bar").data(function(D){return D},function(D,Z){return C(D,Z)});_.exit().remove(),_.enter().append("rect").attr("x",0).attr("y",function(D,Z){return f.utils.NaNtoZero(v(Math.max(0,W(D,Z))))}).attr("height",function(D,Z){return f.utils.NaNtoZero(Math.abs(v(W(D,Z))-v(0)))}).attr("transform",function(D,Z){return"translate("+(P(C(D,Z))-M/B[0].values.length*.45)+",0)"}).on("mouseover",function(D,Z){!V||(d3.select(this).classed("hover",!0),R.elementMouseover({data:D,index:Z,color:d3.select(this).style("fill")}))}).on("mouseout",function(D,Z){!V||(d3.select(this).classed("hover",!1),R.elementMouseout({data:D,index:Z,color:d3.select(this).style("fill")}))}).on("mousemove",function(D,Z){!V||R.elementMousemove({data:D,index:Z,color:d3.select(this).style("fill")})}).on("click",function(D,Z){V&&(R.elementClick({data:D,index:Z,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation())}).on("dblclick",function(D,Z){!V||(R.elementDblClick({data:D,index:Z,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}),_.attr("fill",function(D,Z){return j(D,Z)}).attr("class",function(D,Z,dt){return(W(D,Z)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+dt+"-"+Z}).watchTransition(E,"bars").attr("transform",function(D,Z){return"translate("+(P(C(D,Z))-M/B[0].values.length*.45)+",0)"}).attr("width",M/B[0].values.length*.9),_.watchTransition(E,"bars").attr("y",function(D,Z){var dt=W(D,Z)<0?v(0):v(0)-v(W(D,Z))<1?v(0)-1:v(W(D,Z));return f.utils.NaNtoZero(dt)}).attr("height",function(D,Z){return f.utils.NaNtoZero(Math.max(Math.abs(v(W(D,Z))-v(0)),1))})}),E.renderEnd("historicalBar immediate"),A}return A.highlightPoint=function(O,B){x.select(".nv-bars .nv-bar-0-"+O).classed("hover",B)},A.clearHighlights=function(){x.select(".nv-bars .nv-bar.hover").classed("hover",!1)},A.dispatch=R,A.options=f.utils.optionsFunc.bind(A),A._options=Object.create({},{width:{get:function(){return u},set:function(O){u=O}},height:{get:function(){return w},set:function(O){w=O}},forceX:{get:function(){return J},set:function(O){J=O}},forceY:{get:function(){return tt},set:function(O){tt=O}},padData:{get:function(){return G},set:function(O){G=O}},x:{get:function(){return C},set:function(O){C=O}},y:{get:function(){return W},set:function(O){W=O}},xScale:{get:function(){return P},set:function(O){P=O}},yScale:{get:function(){return v},set:function(O){v=O}},xDomain:{get:function(){return $},set:function(O){$=O}},yDomain:{get:function(){return st},set:function(O){st=O}},xRange:{get:function(){return q},set:function(O){q=O}},yRange:{get:function(){return z},set:function(O){z=O}},clipEdge:{get:function(){return rt},set:function(O){rt=O}},id:{get:function(){return m},set:function(O){m=O}},interactive:{get:function(){return V},set:function(O){V=O}},margin:{get:function(){return a},set:function(O){a.top=void 0!==O.top?O.top:a.top,a.right=void 0!==O.right?O.right:a.right,a.bottom=void 0!==O.bottom?O.bottom:a.bottom,a.left=void 0!==O.left?O.left:a.left}},color:{get:function(){return j},set:function(O){j=f.utils.getColor(O)}}}),f.utils.initOptions(A),A},f.models.historicalBarChart=function(a){"use strict";var z,R,u=a||f.models.historicalBar(),w=f.models.axis(),m=f.models.axis(),x=f.models.legend(),P=f.interactiveGuideline(),v=f.models.tooltip(),C={top:30,right:90,bottom:50,left:90},W=null,J=f.utils.defaultColor(),tt=null,G=null,rt=!1,j=!0,$=!0,st=!1,q=!1,V={},E=null,A=null,O=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),B=250;w.orient("bottom").tickPadding(7),m.orient(st?"right":"left"),v.duration(0).headerEnabled(!1).valueFormatter(function(I,it){return m.tickFormat()(I,it)}).headerFormatter(function(I,it){return w.tickFormat()(I,it)});var M=f.utils.renderWatch(O,0);function b(I){return I.each(function(it){M.reset(),M.models(u),j&&M.models(w),$&&M.models(m);var ct=d3.select(this);f.utils.initSVG(ct);var D,p=f.utils.availableWidth(tt,ct,C),_=f.utils.availableHeight(G,ct,C);if(b.update=function(){ct.transition().duration(B).call(b)},b.container=this,V.disabled=it.map(function(S){return!!S.disabled}),!E)for(D in E={},V)E[D]=V[D]instanceof Array?V[D].slice(0):V[D];if(!it||!it.length||!it.filter(function(S){return S.values.length}).length)return f.utils.noData(b,ct),b;ct.selectAll(".nv-noData").remove(),z=u.xScale(),R=u.yScale();var Z=ct.selectAll("g.nv-wrap.nv-historicalBarChart").data([it]),dt=Z.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),ht=Z.select("g");dt.append("g").attr("class","nv-x nv-axis"),dt.append("g").attr("class","nv-y nv-axis"),dt.append("g").attr("class","nv-barsWrap"),dt.append("g").attr("class","nv-legendWrap"),dt.append("g").attr("class","nv-interactive"),rt?(x.width(p),ht.select(".nv-legendWrap").datum(it).call(x),!W&&x.height()!==C.top&&(C.top=x.height(),_=f.utils.availableHeight(G,ct,C)),Z.select(".nv-legendWrap").attr("transform","translate(0,"+-C.top+")")):ht.select(".nv-legendWrap").selectAll("*").remove(),Z.attr("transform","translate("+C.left+","+C.top+")"),st&&ht.select(".nv-y.nv-axis").attr("transform","translate("+p+",0)"),q&&(P.width(p).height(_).margin({left:C.left,top:C.top}).svgContainer(ct).xScale(z),Z.select(".nv-interactive").call(P)),u.width(p).height(_).color(it.map(function(S,at){return S.color||J(S,at)}).filter(function(S,at){return!it[at].disabled})),ht.select(".nv-barsWrap").datum(it.filter(function(S){return!S.disabled})).transition().call(u),j&&(w.scale(z)._ticks(f.utils.calcTicksX(p/100,it)).tickSize(-_,0),ht.select(".nv-x.nv-axis").attr("transform","translate(0,"+R.range()[0]+")"),ht.select(".nv-x.nv-axis").transition().call(w)),$&&(m.scale(R)._ticks(f.utils.calcTicksY(_/36,it)).tickSize(-p,0),ht.select(".nv-y.nv-axis").transition().call(m)),P.dispatch.on("elementMousemove",function(S){u.clearHighlights();var at,ut,Q,ot=[];it.filter(function(wt,Et){return wt.seriesIndex=Et,!wt.disabled}).forEach(function(wt,Et){ut=f.interactiveBisect(wt.values,S.pointXValue,b.x()),u.highlightPoint(ut,!0);var gt=wt.values[ut];void 0!==gt&&(void 0===at&&(at=gt),void 0===Q&&(Q=b.xScale()(b.x()(gt,ut))),ot.push({key:wt.key,value:b.y()(gt,ut),color:J(wt,wt.seriesIndex),data:wt.values[ut]}))});var yt=w.tickFormat()(b.x()(at,ut));P.tooltip.valueFormatter(function(wt,Et){return m.tickFormat()(wt)}).data({value:yt,index:ut,series:ot})(),P.renderGuideLine(Q)}),P.dispatch.on("elementMouseout",function(S){O.tooltipHide(),u.clearHighlights()}),x.dispatch.on("legendClick",function(S,at){S.disabled=!S.disabled,it.filter(function(ut){return!ut.disabled}).length||it.map(function(ut){return ut.disabled=!1,Z.selectAll(".nv-series").classed("disabled",!1),ut}),V.disabled=it.map(function(ut){return!!ut.disabled}),O.stateChange(V),I.transition().call(b)}),x.dispatch.on("legendDblclick",function(S){it.forEach(function(at){at.disabled=!0}),S.disabled=!1,V.disabled=it.map(function(at){return!!at.disabled}),O.stateChange(V),b.update()}),O.on("changeState",function(S){void 0!==S.disabled&&(it.forEach(function(at,ut){at.disabled=S.disabled[ut]}),V.disabled=S.disabled),b.update()})}),M.renderEnd("historicalBarChart immediate"),b}return u.dispatch.on("elementMouseover.tooltip",function(I){I.series={key:b.x()(I.data),value:b.y()(I.data),color:I.color},v.data(I).hidden(!1)}),u.dispatch.on("elementMouseout.tooltip",function(I){v.hidden(!0)}),u.dispatch.on("elementMousemove.tooltip",function(I){v()}),b.dispatch=O,b.bars=u,b.legend=x,b.xAxis=w,b.yAxis=m,b.interactiveLayer=P,b.tooltip=v,b.options=f.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return tt},set:function(I){tt=I}},height:{get:function(){return G},set:function(I){G=I}},showLegend:{get:function(){return rt},set:function(I){rt=I}},showXAxis:{get:function(){return j},set:function(I){j=I}},showYAxis:{get:function(){return $},set:function(I){$=I}},defaultState:{get:function(){return E},set:function(I){E=I}},noData:{get:function(){return A},set:function(I){A=I}},margin:{get:function(){return C},set:function(I){void 0!==I.top&&(C.top=I.top,W=I.top),C.right=void 0!==I.right?I.right:C.right,C.bottom=void 0!==I.bottom?I.bottom:C.bottom,C.left=void 0!==I.left?I.left:C.left}},color:{get:function(){return J},set:function(I){J=f.utils.getColor(I),x.color(J),u.color(J)}},duration:{get:function(){return B},set:function(I){M.reset(B=I),m.duration(B),w.duration(B)}},rightAlignYAxis:{get:function(){return st},set:function(I){st=I,m.orient(I?"right":"left")}},useInteractiveGuideline:{get:function(){return q},set:function(I){q=I,!0===I&&b.interactive(!1)}}}),f.utils.inheritOptions(b,u),f.utils.initOptions(b),b},f.models.ohlcBarChart=function(){var a=f.models.historicalBarChart(f.models.ohlcBar());return a.useInteractiveGuideline(!0),a.interactiveLayer.tooltip.contentGenerator(function(u){var w=u.series[0].data;return'<h3 style="color: #'+(w.open<w.close?"2ca02c":"d62728")+'">'+u.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(w.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(w.close)+"</td></tr><tr><td>high</td><td>"+a.yAxis.tickFormat()(w.high)+"</td></tr><tr><td>low:</td><td>"+a.yAxis.tickFormat()(w.low)+"</td></tr></table>"}),a},f.models.candlestickBarChart=function(){var a=f.models.historicalBarChart(f.models.candlestickBar());return a.useInteractiveGuideline(!0),a.interactiveLayer.tooltip.contentGenerator(function(u){var w=u.series[0].data;return'<h3 style="color: #'+(w.open<w.close?"2ca02c":"d62728")+'">'+u.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(w.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(w.close)+"</td></tr><tr><td>high</td><td>"+a.yAxis.tickFormat()(w.high)+"</td></tr><tr><td>low:</td><td>"+a.yAxis.tickFormat()(w.low)+"</td></tr></table>"}),a},f.models.legend=function(){"use strict";var a={top:5,right:0,bottom:5,left:0},u=400,w=20,m=function(z){return z.key},x=function(z){return z},P=f.utils.getColor(),v=20,C=!0,W=32,J=!0,tt=!0,G=!0,rt=!1,j=!1,$=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),st="classic";function q(z){function R(A,O){return"furious"!=st?"#000":j?A.disengaged?"#000":"#fff":j?void 0:(A.color||(A.color=P(A,O)),A.disabled?A.color:"#fff")}function V(A,O){return j&&"furious"==st&&A.disengaged?"#eee":A.color||P(A,O)}function E(A,O){return j&&"furious"==st?1:A.disabled?0:1}return z.each(function(A){var O=u-a.left-a.right,B=d3.select(this);f.utils.initSVG(B);var M=B.selectAll("g.nv-legend").data([A]),b=M.enter().append("g").attr("class","nvd3 nv-legend").append("g"),I=M.select("g");M.attr("transform",J?"translate("+-a.right+","+a.top+")":"translate("+a.left+","+a.top+")");var U,p,it=I.selectAll(".nv-series").data(function(N){return"furious"!=st?N:N.filter(function(lt){return!!j||!lt.disengaged})}),ct=it.enter().append("g").attr("class","nv-series");switch(st){case"furious":p=23;break;case"classic":p=20}"classic"==st?(ct.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),U=it.select(".nv-legend-symbol")):"furious"==st&&(ct.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),U=it.select(".nv-legend-symbol"),ct.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),it.select(".nv-check-box").each(function(N,lt){d3.select(this).selectAll("path").attr("stroke",R(N,lt))})),ct.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var D=it.select("text.nv-legend-text");it.on("mouseover",function(N,lt){$.legendMouseover(N,lt)}).on("mouseout",function(N,lt){$.legendMouseout(N,lt)}).on("click",function(N,lt){$.legendClick(N,lt);var F=it.data();tt&&("classic"==st?rt?(F.forEach(function(xt){xt.disabled=!0}),N.disabled=!1):(N.disabled=!N.disabled,F.every(function(xt){return xt.disabled})&&F.forEach(function(xt){xt.disabled=!1})):"furious"==st&&(j?(N.disengaged=!N.disengaged,N.userDisabled=null==N.userDisabled?!!N.disabled:N.userDisabled,N.disabled=N.disengaged||N.userDisabled):j||(N.disabled=!N.disabled,N.userDisabled=N.disabled,F.filter(function(xt){return!xt.disengaged}).every(function(xt){return xt.userDisabled})&&F.forEach(function(xt){xt.disabled=xt.userDisabled=!1}))),$.stateChange({disabled:F.map(function(xt){return!!xt.disabled}),disengaged:F.map(function(xt){return!!xt.disengaged})}))}).on("dblclick",function(N,lt){if(G){if("furious"==st&&j)return;if($.legendDblclick(N,lt),tt){var F=it.data();F.forEach(function(ft){ft.disabled=!0,"furious"==st&&(ft.userDisabled=ft.disabled)}),N.disabled=!1,"furious"==st&&(N.userDisabled=N.disabled),$.stateChange({disabled:F.map(function(ft){return!!ft.disabled})})}}}),it.classed("nv-disabled",function(N){return N.userDisabled}),it.exit().remove(),D.attr("fill",R).text(function(N){return x(m(N))});var Z=0;if(C){var dt=[];it.each(function(N,lt){var F,xt;if(x(m(N))&&x(m(N)).length>v){var ft=x(m(N)).substring(0,v);F=d3.select(this).select("text").text(ft+"..."),d3.select(this).append("svg:title").text(x(m(N)))}else F=d3.select(this).select("text");try{if((xt=F.node().getComputedTextLength())<=0)throw Error()}catch(Rt){xt=f.utils.calcApproxTextWidth(F)}dt.push(xt+W)});var ht=0,h=[];for(Z=0;Z<O&&ht<dt.length;)h[ht]=dt[ht],Z+=dt[ht++];for(0===ht&&(ht=1);Z>O&&ht>1;){h=[],ht--;for(var S=0;S<dt.length;S++)dt[S]>(h[S%ht]||0)&&(h[S%ht]=dt[S]);Z=h.reduce(function(N,lt,F,ft){return N+lt})}for(var at=[],ut=0,Q=0;ut<ht;ut++)at[ut]=Q,Q+=h[ut];it.attr("transform",function(N,lt){return"translate("+at[lt%ht]+","+(5+Math.floor(lt/ht)*p)+")"}),I.attr("transform",J?"translate("+(u-a.right-Z)+","+a.top+")":"translate(0,"+a.top+")"),w=a.top+a.bottom+Math.ceil(dt.length/ht)*p}else{var Et,ot=5,yt=5,wt=0;it.attr("transform",function(N,lt){var F=d3.select(this).select("text").node().getComputedTextLength()+W;return u<a.left+a.right+(Et=yt)+F&&(yt=Et=5,ot+=p),(yt+=F)>wt&&(wt=yt),Z<Et+wt&&(Z=Et+wt),"translate("+Et+","+ot+")"}),I.attr("transform","translate("+(u-a.right-wt)+","+a.top+")"),w=a.top+a.bottom+ot+15}"furious"==st&&(U.attr("width",function(N,lt){return D[0][lt].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),b.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0),I.select(".nv-legend-bg").transition().duration(300).attr("x",-p).attr("width",Z+p-12).attr("height",w+10).attr("y",-a.top-10).attr("opacity",j?1:0)),U.style("fill",V).style("fill-opacity",E).style("stroke",V)}),q}return q.dispatch=$,q.options=f.utils.optionsFunc.bind(q),q._options=Object.create({},{width:{get:function(){return u},set:function(z){u=z}},height:{get:function(){return w},set:function(z){w=z}},key:{get:function(){return m},set:function(z){m=z}},keyFormatter:{get:function(){return x},set:function(z){x=z}},align:{get:function(){return C},set:function(z){C=z}},maxKeyLength:{get:function(){return v},set:function(z){v=z}},rightAlign:{get:function(){return J},set:function(z){J=z}},padding:{get:function(){return W},set:function(z){W=z}},updateState:{get:function(){return tt},set:function(z){tt=z}},enableDoubleClick:{get:function(){return G},set:function(z){G=z}},radioButtonMode:{get:function(){return rt},set:function(z){rt=z}},expanded:{get:function(){return j},set:function(z){j=z}},vers:{get:function(){return st},set:function(z){st=z}},margin:{get:function(){return a},set:function(z){a.top=void 0!==z.top?z.top:a.top,a.right=void 0!==z.right?z.right:a.right,a.bottom=void 0!==z.bottom?z.bottom:a.bottom,a.left=void 0!==z.left?z.left:a.left}},color:{get:function(){return P},set:function(z){P=f.utils.getColor(z)}}}),f.utils.initOptions(q),q},f.models.line=function(){"use strict";var rt,j,a=f.models.scatter(),u={top:0,right:0,bottom:0,left:0},w=960,m=500,x=null,v=f.utils.defaultColor(),C=function(A){return A.x},W=function(A){return A.y},J=function(A,O){return!isNaN(W(A,O))&&null!==W(A,O)},tt=function(A){return A.area},G=!1,$="linear",st=250,q=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");a.pointSize(16).pointDomain([16,256]);var z,R,V=f.utils.renderWatch(q,st);function E(A){return V.reset(),V.models(a),A.each(function(O){x=d3.select(this);var B=f.utils.availableWidth(w,x,u),M=f.utils.availableHeight(m,x,u);f.utils.initSVG(x),rt=a.xScale(),j=a.yScale(),z=z||rt,R=R||j;var b=x.selectAll("g.nv-wrap.nv-line").data([O]),I=b.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),it=I.append("defs"),ct=I.append("g"),U=b.select("g");ct.append("g").attr("class","nv-groups"),ct.append("g").attr("class","nv-scatterWrap"),b.attr("transform","translate("+u.left+","+u.top+")"),a.width(B).height(M);var p=b.select(".nv-scatterWrap");p.call(a),it.append("clipPath").attr("id","nv-edge-clip-"+a.id()).append("rect"),b.select("#nv-edge-clip-"+a.id()+" rect").attr("width",B).attr("height",M>0?M:0),U.attr("clip-path",G?"url(#nv-edge-clip-"+a.id()+")":""),p.attr("clip-path",G?"url(#nv-edge-clip-"+a.id()+")":"");var _=b.select(".nv-groups").selectAll(".nv-group").data(function(dt){return dt},function(dt){return dt.key});_.enter().append("g").style("stroke-opacity",1e-6).style("stroke-width",function(dt){return dt.strokeWidth||1.5}).style("fill-opacity",1e-6),_.exit().remove(),_.attr("class",function(dt,ht){return(dt.classed||"")+" nv-group nv-series-"+ht}).classed("hover",function(dt){return dt.hover}).style("fill",function(dt,ht){return v(dt,ht)}).style("stroke",function(dt,ht){return v(dt,ht)}),_.watchTransition(V,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(dt){return dt.fillOpacity||.5});var D=_.selectAll("path.nv-area").data(function(dt){return tt(dt)?[dt]:[]});D.enter().append("path").attr("class","nv-area").attr("d",function(dt){return d3.svg.area().interpolate($).defined(J).x(function(ht,h){return f.utils.NaNtoZero(z(C(ht,h)))}).y0(function(ht,h){return f.utils.NaNtoZero(R(W(ht,h)))}).y1(function(ht,h){return R(j.domain()[0]<=0?j.domain()[1]>=0?0:j.domain()[1]:j.domain()[0])}).apply(this,[dt.values])}),_.exit().selectAll("path.nv-area").remove(),D.watchTransition(V,"line: areaPaths").attr("d",function(dt){return d3.svg.area().interpolate($).defined(J).x(function(ht,h){return f.utils.NaNtoZero(rt(C(ht,h)))}).y0(function(ht,h){return f.utils.NaNtoZero(j(W(ht,h)))}).y1(function(ht,h){return j(j.domain()[0]<=0?j.domain()[1]>=0?0:j.domain()[1]:j.domain()[0])}).apply(this,[dt.values])});var Z=_.selectAll("path.nv-line").data(function(dt){return[dt.values]});Z.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate($).defined(J).x(function(dt,ht){return f.utils.NaNtoZero(z(C(dt,ht)))}).y(function(dt,ht){return f.utils.NaNtoZero(R(W(dt,ht)))})),Z.watchTransition(V,"line: linePaths").attr("d",d3.svg.line().interpolate($).defined(J).x(function(dt,ht){return f.utils.NaNtoZero(rt(C(dt,ht)))}).y(function(dt,ht){return f.utils.NaNtoZero(j(W(dt,ht)))})),z=rt.copy(),R=j.copy()}),V.renderEnd("line immediate"),E}return E.dispatch=q,E.scatter=a,a.dispatch.on("elementClick",function(){q.elementClick.apply(this,arguments)}),a.dispatch.on("elementMouseover",function(){q.elementMouseover.apply(this,arguments)}),a.dispatch.on("elementMouseout",function(){q.elementMouseout.apply(this,arguments)}),E.options=f.utils.optionsFunc.bind(E),E._options=Object.create({},{width:{get:function(){return w},set:function(A){w=A}},height:{get:function(){return m},set:function(A){m=A}},defined:{get:function(){return J},set:function(A){J=A}},interpolate:{get:function(){return $},set:function(A){$=A}},clipEdge:{get:function(){return G},set:function(A){G=A}},margin:{get:function(){return u},set:function(A){u.top=void 0!==A.top?A.top:u.top,u.right=void 0!==A.right?A.right:u.right,u.bottom=void 0!==A.bottom?A.bottom:u.bottom,u.left=void 0!==A.left?A.left:u.left}},duration:{get:function(){return st},set:function(A){V.reset(st=A),a.duration(st)}},isArea:{get:function(){return tt},set:function(A){tt=d3.functor(A)}},x:{get:function(){return C},set:function(A){C=A,a.x(A)}},y:{get:function(){return W},set:function(A){W=A,a.y(A)}},color:{get:function(){return v},set:function(A){v=f.utils.getColor(A),a.color(v)}}}),f.utils.inheritOptions(E,a),f.utils.initOptions(E),E},f.models.lineChart=function(){"use strict";var R,V,a=f.models.line(),u=f.models.axis(),w=f.models.axis(),m=f.models.legend(),x=f.interactiveGuideline(),P=f.models.tooltip(),v=f.models.focus(f.models.line()),C={top:30,right:20,bottom:50,left:60},W=null,J=f.utils.defaultColor(),tt=null,G=null,rt=!0,j="top",$=!0,st=!0,q=!1,z=!1,E=!1,A=f.utils.state(),O=null,B=null,M=d3.dispatch("stateChange","changeState","renderEnd"),b=250;u.orient("bottom").tickPadding(7),w.orient(q?"right":"left"),a.clipEdge(!0).duration(0),P.valueFormatter(function(p,_){return w.tickFormat()(p,_)}).headerFormatter(function(p,_){return u.tickFormat()(p,_)}),x.tooltip.valueFormatter(function(p,_){return w.tickFormat()(p,_)}).headerFormatter(function(p,_){return u.tickFormat()(p,_)});var I=f.utils.renderWatch(M,b);function U(p){return I.reset(),I.models(a),$&&I.models(u),st&&I.models(w),p.each(function(_){var D=d3.select(this);f.utils.initSVG(D);var ht,Z=f.utils.availableWidth(tt,D,C),dt=f.utils.availableHeight(G,D,C)-(E?v.height():0);if(U.update=function(){0===b?D.call(U):D.transition().duration(b).call(U)},U.container=this,A.setter(function(p){return function(_){void 0!==_.active&&p.forEach(function(D,Z){D.disabled=!_.active[Z]})}}(_),U.update).getter(function(p){return function(){return{active:p.map(function(_){return!_.disabled})}}}(_)).update(),A.disabled=_.map(function(lt){return!!lt.disabled}),!O)for(ht in O={},A)O[ht]=A[ht]instanceof Array?A[ht].slice(0):A[ht];if(!_||!_.length||!_.filter(function(lt){return lt.values.length}).length)return f.utils.noData(U,D),U;D.selectAll(".nv-noData").remove(),v.dispatch.on("onBrush",function(lt){N(lt)}),R=a.xScale(),V=a.yScale();var h=D.selectAll("g.nv-wrap.nv-lineChart").data([_]),S=h.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),at=h.select("g");S.append("g").attr("class","nv-legendWrap");var ut=S.append("g").attr("class","nv-focus");ut.append("g").attr("class","nv-background").append("rect"),ut.append("g").attr("class","nv-x nv-axis"),ut.append("g").attr("class","nv-y nv-axis"),ut.append("g").attr("class","nv-linesWrap"),ut.append("g").attr("class","nv-interactive"),S.append("g").attr("class","nv-focusWrap"),rt?(m.width(Z),at.select(".nv-legendWrap").datum(_).call(m),"bottom"===j?(C.bottom=u.height()+m.height(),dt=f.utils.availableHeight(G,D,C),at.select(".nv-legendWrap").attr("transform","translate(0,"+(dt+u.height())+")")):"top"===j&&(!W&&m.height()!==C.top&&(C.top=m.height(),dt=f.utils.availableHeight(G,D,C)-(E?v.height():0)),h.select(".nv-legendWrap").attr("transform","translate(0,"+-C.top+")"))):at.select(".nv-legendWrap").selectAll("*").remove(),h.attr("transform","translate("+C.left+","+C.top+")"),q&&at.select(".nv-y.nv-axis").attr("transform","translate("+Z+",0)"),z&&(x.width(Z).height(dt).margin({left:C.left,top:C.top}).svgContainer(D).xScale(R),h.select(".nv-interactive").call(x)),at.select(".nv-focus .nv-background rect").attr("width",Z).attr("height",dt),a.width(Z).height(dt).color(_.map(function(lt,F){return lt.color||J(lt,F)}).filter(function(lt,F){return!_[F].disabled}));var ot=at.select(".nv-linesWrap").datum(_.filter(function(lt){return!lt.disabled}));function yt(){$&&at.select(".nv-focus .nv-x.nv-axis").transition().duration(b).call(u)}function wt(){st&&at.select(".nv-focus .nv-y.nv-axis").transition().duration(b).call(w)}if($&&u.scale(R)._ticks(f.utils.calcTicksX(Z/100,_)).tickSize(-dt,0),st&&w.scale(V)._ticks(f.utils.calcTicksY(dt/36,_)).tickSize(-Z,0),at.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+dt+")"),E||null!==v.brush.extent()){v.width(Z),at.select(".nv-focusWrap").style("display",E?"initial":"none").attr("transform","translate(0,"+(dt+C.bottom+v.margin().top)+")").call(v);var Et=v.brush.empty()?v.xDomain():v.brush.extent();null!==Et&&N(Et)}else ot.call(a),yt(),wt();function N(lt){at.select(".nv-focus .nv-linesWrap").datum(_.filter(function(ft){return!ft.disabled}).map(function(ft,xt){return{key:ft.key,area:ft.area,classed:ft.classed,values:ft.values.filter(function(Rt,Qt){return a.x()(Rt,Qt)>=lt[0]&&a.x()(Rt,Qt)<=lt[1]}),disableTooltip:ft.disableTooltip}})).transition().duration(b).call(a),yt(),wt()}m.dispatch.on("stateChange",function(lt){for(var F in lt)A[F]=lt[F];M.stateChange(A),U.update()}),x.dispatch.on("elementMousemove",function(lt){a.clearHighlights();var F,ft,xt,Rt=[];if(_.filter(function(_t,Yt){return _t.seriesIndex=Yt,!_t.disabled&&!_t.disableTooltip}).forEach(function(_t,Yt){var te=null!==v.brush.extent()?v.brush.empty()?v.xScale().domain():v.brush.extent():R.domain(),oe=_t.values.filter(function(re,Pt){return te[0]<=te[1]?a.x()(re,Pt)>=te[0]&&a.x()(re,Pt)<=te[1]:a.x()(re,Pt)>=te[1]&&a.x()(re,Pt)<=te[0]}),Wt=oe[ft=f.interactiveBisect(oe,lt.pointXValue,a.x())],Xt=U.y()(Wt,ft);null!==Xt&&a.highlightPoint(Yt,ft,!0),void 0!==Wt&&(void 0===F&&(F=Wt),void 0===xt&&(xt=U.xScale()(U.x()(Wt,ft))),Rt.push({key:_t.key,value:Xt,color:J(_t,_t.seriesIndex),data:Wt}))}),Rt.length>2){var Qt=U.yScale().invert(lt.mouseY),St=.03*Math.abs(U.yScale().domain()[0]-U.yScale().domain()[1]),Dt=f.nearestValueIndex(Rt.map(function(_t){return _t.value}),Qt,St);null!==Dt&&(Rt[Dt].highlight=!0)}x.tooltip.valueFormatter(x.tooltip.valueFormatter()||function(_t,Yt){return null==_t?"N/A":w.tickFormat()(_t)}).data({value:U.x()(F,ft),index:ft,series:Rt})(),x.renderGuideLine(xt)}),x.dispatch.on("elementClick",function(lt){var F,ft=[];_.filter(function(xt,Rt){return xt.seriesIndex=Rt,!xt.disabled}).forEach(function(xt){var Rt=f.interactiveBisect(xt.values,lt.pointXValue,U.x()),Qt=xt.values[Rt];if(void 0!==Qt){void 0===F&&(F=U.xScale()(U.x()(Qt,Rt)));var Ct=U.yScale()(U.y()(Qt,Rt));ft.push({point:Qt,pointIndex:Rt,pos:[F,Ct],seriesIndex:xt.seriesIndex,series:xt})}}),a.dispatch.elementClick(ft)}),x.dispatch.on("elementMouseout",function(lt){a.clearHighlights()}),M.on("changeState",function(lt){void 0!==lt.disabled&&_.length===lt.disabled.length&&(_.forEach(function(F,ft){F.disabled=lt.disabled[ft]}),A.disabled=lt.disabled),U.update()})}),I.renderEnd("lineChart immediate"),U}return a.dispatch.on("elementMouseover.tooltip",function(p){p.series.disableTooltip||P.data(p).hidden(!1)}),a.dispatch.on("elementMouseout.tooltip",function(p){P.hidden(!0)}),U.dispatch=M,U.lines=a,U.legend=m,U.focus=v,U.xAxis=u,U.x2Axis=v.xAxis,U.yAxis=w,U.y2Axis=v.yAxis,U.interactiveLayer=x,U.tooltip=P,U.state=A,U.dispatch=M,U.options=f.utils.optionsFunc.bind(U),U._options=Object.create({},{width:{get:function(){return tt},set:function(p){tt=p}},height:{get:function(){return G},set:function(p){G=p}},showLegend:{get:function(){return rt},set:function(p){rt=p}},legendPosition:{get:function(){return j},set:function(p){j=p}},showXAxis:{get:function(){return $},set:function(p){$=p}},showYAxis:{get:function(){return st},set:function(p){st=p}},defaultState:{get:function(){return O},set:function(p){O=p}},noData:{get:function(){return B},set:function(p){B=p}},focusEnable:{get:function(){return E},set:function(p){E=p}},focusHeight:{get:function(){return v.height()},set:function(p){v.height(p)}},focusShowAxisX:{get:function(){return v.showXAxis()},set:function(p){v.showXAxis(p)}},focusShowAxisY:{get:function(){return v.showYAxis()},set:function(p){v.showYAxis(p)}},brushExtent:{get:function(){return v.brushExtent()},set:function(p){v.brushExtent(p)}},focusMargin:{get:function(){return v.margin},set:function(p){void 0!==p.top&&(C.top=p.top,W=p.top),v.margin.right=void 0!==p.right?p.right:v.margin.right,v.margin.bottom=void 0!==p.bottom?p.bottom:v.margin.bottom,v.margin.left=void 0!==p.left?p.left:v.margin.left}},margin:{get:function(){return C},set:function(p){C.top=void 0!==p.top?p.top:C.top,C.right=void 0!==p.right?p.right:C.right,C.bottom=void 0!==p.bottom?p.bottom:C.bottom,C.left=void 0!==p.left?p.left:C.left}},duration:{get:function(){return b},set:function(p){I.reset(b=p),a.duration(b),v.duration(b),u.duration(b),w.duration(b)}},color:{get:function(){return J},set:function(p){J=f.utils.getColor(p),m.color(J),a.color(J),v.color(J)}},interpolate:{get:function(){return a.interpolate()},set:function(p){a.interpolate(p),v.interpolate(p)}},xTickFormat:{get:function(){return u.tickFormat()},set:function(p){u.tickFormat(p),v.xTickFormat(p)}},yTickFormat:{get:function(){return w.tickFormat()},set:function(p){w.tickFormat(p),v.yTickFormat(p)}},x:{get:function(){return a.x()},set:function(p){a.x(p),v.x(p)}},y:{get:function(){return a.y()},set:function(p){a.y(p),v.y(p)}},rightAlignYAxis:{get:function(){return q},set:function(p){w.orient((q=p)?"right":"left")}},useInteractiveGuideline:{get:function(){return z},set:function(p){(z=p)&&(a.interactive(!1),a.useVoronoi(!1))}}}),f.utils.inheritOptions(U,a),f.utils.initOptions(U),U},f.models.lineWithFocusChart=function(){return f.models.lineChart().margin({bottom:30}).focusEnable(!0)},f.models.linePlusBarChart=function(){"use strict";var I,ct,U,p,_,D,Z,a=f.models.line(),u=f.models.line(),w=f.models.historicalBar(),m=f.models.historicalBar(),x=f.models.axis(),P=f.models.axis(),v=f.models.axis(),C=f.models.axis(),W=f.models.axis(),J=f.models.axis(),tt=f.models.legend(),G=d3.svg.brush(),rt=f.models.tooltip(),j={top:30,right:30,bottom:30,left:60},$=null,st={top:0,right:30,bottom:20,left:60},q=null,z=null,R=function(F){return F.x},V=function(F){return F.y},E=f.utils.defaultColor(),A=!0,O=!0,B=!1,M=!0,b=50,it=null,dt=null,ht=d3.dispatch("brush","stateChange","changeState"),h=0,S=f.utils.state(),at=null,ut=" (left axis)",Q=" (right axis)",ot=!1;a.clipEdge(!0),u.interactive(!1),u.pointActive(function(F){return!1}),x.orient("bottom").tickPadding(5),v.orient("left"),C.orient("right"),P.orient("bottom").tickPadding(5),W.orient("left"),J.orient("right"),rt.headerEnabled(!0).headerFormatter(function(F,ft){return x.tickFormat()(F,ft)});var N=function(F){return F.every(function(ft){return ft.disabled})};function lt(F){return F.each(function(ft){var xt=d3.select(this);f.utils.initSVG(xt);var Dt,Qt=f.utils.availableWidth(q,xt,j),Ct=f.utils.availableHeight(z,xt,j)-(O?b:0),St=b-st.top-st.bottom;if(lt.update=function(){xt.transition().duration(h).call(lt)},lt.container=this,S.setter(function(F){return function(ft){void 0!==ft.active&&F.forEach(function(xt,Rt){xt.disabled=!ft.active[Rt]})}}(ft),lt.update).getter(function(F){return function(){return{active:F.map(function(ft){return!ft.disabled})}}}(ft)).update(),S.disabled=ft.map(function(Ot){return!!Ot.disabled}),!at)for(Dt in at={},S)at[Dt]=S[Dt]instanceof Array?S[Dt].slice(0):S[Dt];if(!ft||!ft.length||!ft.filter(function(Ot){return Ot.values.length}).length)return f.utils.noData(lt,xt),lt;xt.selectAll(".nv-noData").remove();var ne=ft.filter(function(Ot){return!Ot.disabled&&Ot.bar}),_t=ft.filter(function(Ot){return!Ot.bar});ct=ne.length&&!ot?w.xScale():a.xScale(),U=P.scale(),p=ot?a.yScale():w.yScale(),_=ot?w.yScale():a.yScale(),D=ot?u.yScale():m.yScale(),Z=ot?m.yScale():u.yScale();var Yt=ft.filter(function(Ot){return!Ot.disabled&&(ot?!Ot.bar:Ot.bar)}).map(function(Ot){return Ot.values.map(function(jt,ee){return{x:R(jt,ee),y:V(jt,ee)}})}),te=ft.filter(function(Ot){return!Ot.disabled&&(ot?Ot.bar:!Ot.bar)}).map(function(Ot){return Ot.values.map(function(jt,ee){return{x:R(jt,ee),y:V(jt,ee)}})});ct.range([0,Qt]),U.domain(d3.extent(d3.merge(Yt.concat(te)),function(Ot){return Ot.x})).range([0,Qt]);var oe=xt.selectAll("g.nv-wrap.nv-linePlusBar").data([ft]),Wt=oe.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),Xt=oe.select("g");Wt.append("g").attr("class","nv-legendWrap");var re=Wt.append("g").attr("class","nv-focus");re.append("g").attr("class","nv-x nv-axis"),re.append("g").attr("class","nv-y1 nv-axis"),re.append("g").attr("class","nv-y2 nv-axis"),re.append("g").attr("class","nv-barsWrap"),re.append("g").attr("class","nv-linesWrap");var Pt=Wt.append("g").attr("class","nv-context");if(Pt.append("g").attr("class","nv-x nv-axis"),Pt.append("g").attr("class","nv-y1 nv-axis"),Pt.append("g").attr("class","nv-y2 nv-axis"),Pt.append("g").attr("class","nv-barsWrap"),Pt.append("g").attr("class","nv-linesWrap"),Pt.append("g").attr("class","nv-brushBackground"),Pt.append("g").attr("class","nv-x nv-brush"),A){var $t=tt.align()?Qt/2:Qt,ie=tt.align()?$t:0;tt.width($t),Xt.select(".nv-legendWrap").datum(ft.map(function(Ot){return Ot.originalKey=void 0===Ot.originalKey?Ot.key:Ot.originalKey,Ot.key=ot?Ot.originalKey+(Ot.bar?Q:ut):Ot.originalKey+(Ot.bar?ut:Q),Ot})).call(tt),!$&&tt.height()!==j.top&&(j.top=tt.height(),Ct=f.utils.availableHeight(z,xt,j)-b),Xt.select(".nv-legendWrap").attr("transform","translate("+ie+","+-j.top+")")}else Xt.select(".nv-legendWrap").selectAll("*").remove();oe.attr("transform","translate("+j.left+","+j.top+")"),Xt.select(".nv-context").style("display",O?"initial":"none"),m.width(Qt).height(St).color(ft.map(function(Ot,jt){return Ot.color||E(Ot,jt)}).filter(function(Ot,jt){return!ft[jt].disabled&&ft[jt].bar})),u.width(Qt).height(St).color(ft.map(function(Ot,jt){return Ot.color||E(Ot,jt)}).filter(function(Ot,jt){return!ft[jt].disabled&&!ft[jt].bar}));var xe=Xt.select(".nv-context .nv-barsWrap").datum(ne.length?ne:[{values:[]}]),de=Xt.select(".nv-context .nv-linesWrap").datum(N(_t)?[{values:[]}]:_t.filter(function(Ot){return!Ot.disabled}));Xt.select(".nv-context").attr("transform","translate(0,"+(Ct+j.bottom+st.top)+")"),xe.transition().call(m),de.transition().call(u),M&&(P._ticks(f.utils.calcTicksX(Qt/100,ft)).tickSize(-St,0),Xt.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+D.range()[0]+")"),Xt.select(".nv-context .nv-x.nv-axis").transition().call(P)),B&&(W.scale(D)._ticks(St/36).tickSize(-Qt,0),J.scale(Z)._ticks(St/36).tickSize(ne.length?0:-Qt,0),Xt.select(".nv-context .nv-y3.nv-axis").style("opacity",ne.length?1:0).attr("transform","translate(0,"+U.range()[0]+")"),Xt.select(".nv-context .nv-y2.nv-axis").style("opacity",_t.length?1:0).attr("transform","translate("+U.range()[1]+",0)"),Xt.select(".nv-context .nv-y1.nv-axis").transition().call(W),Xt.select(".nv-context .nv-y2.nv-axis").transition().call(J)),G.x(U).on("brush",Mt),it&&G.extent(it);var be=Xt.select(".nv-brushBackground").selectAll("g").data([it||G.extent()]),Ce=be.enter().append("g");Ce.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",St),Ce.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",St);var we=Xt.select(".nv-x.nv-brush").call(G);function Mt(){it=G.empty()?null:G.extent(),I=G.empty()?U.domain():G.extent(),ht.brush({extent:I,brush:G}),function ce(){G.empty()||G.extent(it),be.data([G.empty()?U.domain():it]).each(function(Ot,jt){var ee=U(Ot[0])-U.range()[0],fe=U.range()[1]-U(Ot[1]);d3.select(this).select(".left").attr("width",ee<0?0:ee),d3.select(this).select(".right").attr("x",U(Ot[1])).attr("width",fe<0?0:fe)})}(),w.width(Qt).height(Ct).color(ft.map(function(se,Bt){return se.color||E(se,Bt)}).filter(function(se,Bt){return!ft[Bt].disabled&&ft[Bt].bar})),a.width(Qt).height(Ct).color(ft.map(function(se,Bt){return se.color||E(se,Bt)}).filter(function(se,Bt){return!ft[Bt].disabled&&!ft[Bt].bar}));var Ot=Xt.select(".nv-focus .nv-barsWrap").datum(ne.length?ne.map(function(se,Bt){return{key:se.key,values:se.values.filter(function(Zt,pe){return w.x()(Zt,pe)>=I[0]&&w.x()(Zt,pe)<=I[1]})}}):[{values:[]}]),jt=Xt.select(".nv-focus .nv-linesWrap").datum(N(_t)?[{values:[]}]:_t.filter(function(se){return!se.disabled}).map(function(se,Bt){return{area:se.area,fillOpacity:se.fillOpacity,strokeWidth:se.strokeWidth,key:se.key,values:se.values.filter(function(Zt,pe){return a.x()(Zt,pe)>=I[0]&&a.x()(Zt,pe)<=I[1]})}}));ct=ne.length&&!ot?w.xScale():a.xScale(),x.scale(ct)._ticks(f.utils.calcTicksX(Qt/100,ft)).tickSize(-Ct,0),x.domain([Math.ceil(I[0]),Math.floor(I[1])]),Xt.select(".nv-x.nv-axis").transition().duration(h).call(x),Ot.transition().duration(h).call(w),jt.transition().duration(h).call(a),Xt.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+p.range()[0]+")"),v.scale(p)._ticks(f.utils.calcTicksY(Ct/36,ft)).tickSize(-Qt,0),C.scale(_)._ticks(f.utils.calcTicksY(Ct/36,ft)),C.tickSize(ot?_t.length?0:-Qt:ne.length?0:-Qt,0);var ee=ne.length?1:0,fe=_t.length&&!N(_t)?1:0,ke=ot?fe:ee,Ht=ot?ee:fe;Xt.select(".nv-focus .nv-y1.nv-axis").style("opacity",ke),Xt.select(".nv-focus .nv-y2.nv-axis").style("opacity",Ht).attr("transform","translate("+ct.range()[1]+",0)"),Xt.select(".nv-focus .nv-y1.nv-axis").transition().duration(h).call(v),Xt.select(".nv-focus .nv-y2.nv-axis").transition().duration(h).call(C)}we.selectAll("rect").attr("height",St),we.selectAll(".resize").append("path").attr("d",function zt(Ot){var jt=+("e"==Ot),ee=jt?1:-1,fe=St/3;return"M"+.5*ee+","+fe+"A6,6 0 0 "+jt+" "+6.5*ee+","+(fe+6)+"V"+(2*fe-6)+"A6,6 0 0 "+jt+" "+.5*ee+","+2*fe+"ZM"+2.5*ee+","+(fe+8)+"V"+(2*fe-8)+"M"+4.5*ee+","+(fe+8)+"V"+(2*fe-8)}),tt.dispatch.on("stateChange",function(Ot){for(var jt in Ot)S[jt]=Ot[jt];ht.stateChange(S),lt.update()}),ht.on("changeState",function(Ot){void 0!==Ot.disabled&&(ft.forEach(function(jt,ee){jt.disabled=Ot.disabled[ee]}),S.disabled=Ot.disabled),lt.update()}),Mt()}),lt}return a.dispatch.on("elementMouseover.tooltip",function(F){rt.duration(100).valueFormatter(function(ft,xt){return(ot?{main:v,focus:W}:{main:C,focus:J}).main.tickFormat()(ft,xt)}).data(F).hidden(!1)}),a.dispatch.on("elementMouseout.tooltip",function(F){rt.hidden(!0)}),w.dispatch.on("elementMouseover.tooltip",function(F){F.value=lt.x()(F.data),F.series={value:lt.y()(F.data),color:F.color},rt.duration(0).valueFormatter(function(ft,xt){return(ot?{main:C,focus:J}:{main:v,focus:W}).main.tickFormat()(ft,xt)}).data(F).hidden(!1)}),w.dispatch.on("elementMouseout.tooltip",function(F){rt.hidden(!0)}),w.dispatch.on("elementMousemove.tooltip",function(F){rt()}),lt.dispatch=ht,lt.legend=tt,lt.lines=a,lt.lines2=u,lt.bars=w,lt.bars2=m,lt.xAxis=x,lt.x2Axis=P,lt.y1Axis=v,lt.y2Axis=C,lt.y3Axis=W,lt.y4Axis=J,lt.tooltip=rt,lt.options=f.utils.optionsFunc.bind(lt),lt._options=Object.create({},{width:{get:function(){return q},set:function(F){q=F}},height:{get:function(){return z},set:function(F){z=F}},showLegend:{get:function(){return A},set:function(F){A=F}},brushExtent:{get:function(){return it},set:function(F){it=F}},noData:{get:function(){return dt},set:function(F){dt=F}},focusEnable:{get:function(){return O},set:function(F){O=F}},focusHeight:{get:function(){return b},set:function(F){b=F}},focusShowAxisX:{get:function(){return M},set:function(F){M=F}},focusShowAxisY:{get:function(){return B},set:function(F){B=F}},legendLeftAxisHint:{get:function(){return ut},set:function(F){ut=F}},legendRightAxisHint:{get:function(){return Q},set:function(F){Q=F}},margin:{get:function(){return j},set:function(F){void 0!==F.top&&(j.top=F.top,$=F.top),j.right=void 0!==F.right?F.right:j.right,j.bottom=void 0!==F.bottom?F.bottom:j.bottom,j.left=void 0!==F.left?F.left:j.left}},focusMargin:{get:function(){return st},set:function(F){st.top=void 0!==F.top?F.top:st.top,st.right=void 0!==F.right?F.right:st.right,st.bottom=void 0!==F.bottom?F.bottom:st.bottom,st.left=void 0!==F.left?F.left:st.left}},duration:{get:function(){return h},set:function(F){h=F}},color:{get:function(){return E},set:function(F){E=f.utils.getColor(F),tt.color(E)}},x:{get:function(){return R},set:function(F){R=F,a.x(F),u.x(F),w.x(F),m.x(F)}},y:{get:function(){return V},set:function(F){V=F,a.y(F),u.y(F),w.y(F),m.y(F)}},switchYAxisOrder:{get:function(){return ot},set:function(F){if(ot!==F){var ft=v;v=C,C=ft;var xt=W;W=J,J=xt}ot=F,v.orient("left"),C.orient("right"),W.orient("left"),J.orient("right")}}}),f.utils.inheritOptions(lt,a),f.utils.initOptions(lt),lt},f.models.multiBar=function(){"use strict";var q,R,V,E,A,b,I,a={top:0,right:0,bottom:0,left:0},u=960,w=500,m=d3.scale.ordinal(),x=d3.scale.linear(),P=Math.floor(1e4*Math.random()),v=null,C=function(p){return p.x},W=function(p){return p.y},J=[0],tt=!0,G=!1,rt="zero",j=f.utils.defaultColor(),$=!1,st=null,z=500,O=.1,B=.75,M=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),it=f.utils.renderWatch(M,z),ct=0;function U(p){return it.reset(),p.each(function(_){var D=u-a.left-a.right,Z=w-a.top-a.bottom;v=d3.select(this),f.utils.initSVG(v);var dt=0;if($&&_.length&&($=[{values:_[0].values.map(function(F){return{x:F.x,y:0,series:F.series,size:.01}})}]),G){var h=d3.layout.stack().offset(rt).values(function(F){return F.values}).y(W)(!_.length&&$?$:_);h.forEach(function(F,ft){F.nonStackable?(_[ft].nonStackableSeries=dt++,h[ft]=_[ft]):ft>0&&h[ft-1].nonStackable&&h[ft].values.map(function(xt,Rt){xt.y0-=h[ft-1].values[Rt].y,xt.y1=xt.y0+xt.y})}),_=h}_.forEach(function(F,ft){F.values.forEach(function(xt){xt.series=ft,xt.key=F.key})}),G&&_.length>0&&_[0].values.map(function(F,ft){var xt=0,Rt=0;_.map(function(Qt,Ct){if(!_[Ct].nonStackable){var St=Qt.values[ft];St.size=Math.abs(St.y),St.y<0?(St.y1=Rt,Rt-=St.size):(St.y1=St.size+xt,xt+=St.size)}})});var S=R&&V?[]:_.map(function(F,ft){return F.values.map(function(xt,Rt){return{x:C(xt,Rt),y:W(xt,Rt),y0:xt.y0,y1:xt.y1,idx:ft}})});m.domain(R||d3.merge(S).map(function(F){return F.x})).rangeBands(E||[0,D],O),x.domain(V||d3.extent(d3.merge(S).map(function(F){var ft=F.y;return G&&!_[F.idx].nonStackable&&(ft=F.y>0?F.y1:F.y1+F.y),ft}).concat(J))).range(A||[Z,0]),m.domain()[0]===m.domain()[1]&&(m.domain()[0]?m.domain([m.domain()[0]-.01*m.domain()[0],m.domain()[1]+.01*m.domain()[1]]):m.domain([-1,1])),x.domain()[0]===x.domain()[1]&&(x.domain()[0]?x.domain([x.domain()[0]+.01*x.domain()[0],x.domain()[1]-.01*x.domain()[1]]):x.domain([-1,1])),b=b||m,I=I||x;var at=v.selectAll("g.nv-wrap.nv-multibar").data([_]),ut=at.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),Q=ut.append("defs"),ot=ut.append("g"),yt=at.select("g");ot.append("g").attr("class","nv-groups"),at.attr("transform","translate("+a.left+","+a.top+")"),Q.append("clipPath").attr("id","nv-edge-clip-"+P).append("rect"),at.select("#nv-edge-clip-"+P+" rect").attr("width",D).attr("height",Z),yt.attr("clip-path",tt?"url(#nv-edge-clip-"+P+")":"");var wt=at.select(".nv-groups").selectAll(".nv-group").data(function(F){return F},function(F,ft){return ft});wt.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);var Et=it.transition(wt.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,z)).attr("y",function(F,ft,xt){var Rt=I(0)||0;return G&&_[F.series]&&!_[F.series].nonStackable&&(Rt=I(F.y0)),Rt}).attr("height",0).remove();Et.delay&&Et.delay(function(F,ft){return ft*(z/(ct+1))-ft}),wt.attr("class",function(F,ft){return"nv-group nv-series-"+ft}).classed("hover",function(F){return F.hover}).style("fill",function(F,ft){return j(F,ft)}).style("stroke",function(F,ft){return j(F,ft)}),wt.style("stroke-opacity",1).style("fill-opacity",B);var gt=wt.selectAll("rect.nv-bar").data(function(F){return $&&!_.length?$.values:F.values});gt.exit().remove(),gt.enter().append("rect").attr("class",function(F,ft){return W(F,ft)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(F,ft,xt){return G&&!_[xt].nonStackable?0:xt*m.rangeBand()/_.length}).attr("y",function(F,ft,xt){return I(G&&!_[xt].nonStackable?F.y0:0)||0}).attr("height",0).attr("width",function(F,ft,xt){return m.rangeBand()/(G&&!_[xt].nonStackable?1:_.length)}).attr("transform",function(F,ft){return"translate("+m(C(F,ft))+",0)"}),gt.style("fill",function(F,ft,xt){return j(F,xt,ft)}).style("stroke",function(F,ft,xt){return j(F,xt,ft)}).on("mouseover",function(F,ft,xt){d3.select(this).classed("hover",!0),M.elementMouseover({data:F,index:ft,series:_[xt],color:d3.select(this).style("fill")})}).on("mouseout",function(F,ft,xt){d3.select(this).classed("hover",!1),M.elementMouseout({data:F,index:ft,series:_[xt],color:d3.select(this).style("fill")})}).on("mousemove",function(F,ft,xt){M.elementMousemove({data:F,index:ft,series:_[xt],color:d3.select(this).style("fill")})}).on("click",function(F,ft,xt){M.elementClick({data:F,index:ft,series:_[xt],color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()}).on("dblclick",function(F,ft,xt){M.elementDblClick({data:F,index:ft,series:_[xt],color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),gt.attr("class",function(F,ft){return W(F,ft)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(F,ft){return"translate("+m(C(F,ft))+",0)"}),st&&(q||(q=_.map(function(){return!0})),gt.style("fill",function(F,ft,xt){return d3.rgb(st(F,ft)).darker(q.map(function(Rt,Qt){return Qt}).filter(function(Rt,Qt){return!q[Qt]})[xt]).toString()}).style("stroke",function(F,ft,xt){return d3.rgb(st(F,ft)).darker(q.map(function(Rt,Qt){return Qt}).filter(function(Rt,Qt){return!q[Qt]})[xt]).toString()}));var lt=gt.watchTransition(it,"multibar",Math.min(250,z)).delay(function(F,ft){return ft*z/_[0].values.length});G?lt.attr("y",function(F,ft,xt){return _[xt].nonStackable?W(F,ft)<0?x(0):x(0)-x(W(F,ft))<-1?x(0)-1:x(W(F,ft))||0:x(F.y1)}).attr("height",function(F,ft,xt){return _[xt].nonStackable?Math.max(Math.abs(x(W(F,ft))-x(0)),0)||0:Math.max(Math.abs(x(F.y+F.y0)-x(F.y0)),0)}).attr("x",function(F,ft,xt){var Rt=0;return _[xt].nonStackable&&(Rt=F.series*m.rangeBand()/_.length,_.length!==dt&&(Rt=_[xt].nonStackableSeries*m.rangeBand()/(2*dt))),Rt}).attr("width",function(F,ft,xt){if(_[xt].nonStackable){var Rt=m.rangeBand()/dt;return _.length!==dt&&(Rt=m.rangeBand()/(2*dt)),Rt}return m.rangeBand()}):lt.attr("x",function(F,ft){return F.series*m.rangeBand()/_.length}).attr("width",m.rangeBand()/_.length).attr("y",function(F,ft){return W(F,ft)<0?x(0):x(0)-x(W(F,ft))<1?x(0)-1:x(W(F,ft))||0}).attr("height",function(F,ft){return Math.max(Math.abs(x(W(F,ft))-x(0)),1)||0}),b=m.copy(),I=x.copy(),_[0]&&_[0].values&&(ct=_[0].values.length)}),it.renderEnd("multibar immediate"),U}return U.dispatch=M,U.options=f.utils.optionsFunc.bind(U),U._options=Object.create({},{width:{get:function(){return u},set:function(p){u=p}},height:{get:function(){return w},set:function(p){w=p}},x:{get:function(){return C},set:function(p){C=p}},y:{get:function(){return W},set:function(p){W=p}},xScale:{get:function(){return m},set:function(p){m=p}},yScale:{get:function(){return x},set:function(p){x=p}},xDomain:{get:function(){return R},set:function(p){R=p}},yDomain:{get:function(){return V},set:function(p){V=p}},xRange:{get:function(){return E},set:function(p){E=p}},yRange:{get:function(){return A},set:function(p){A=p}},forceY:{get:function(){return J},set:function(p){J=p}},stacked:{get:function(){return G},set:function(p){G=p}},stackOffset:{get:function(){return rt},set:function(p){rt=p}},clipEdge:{get:function(){return tt},set:function(p){tt=p}},disabled:{get:function(){return q},set:function(p){q=p}},id:{get:function(){return P},set:function(p){P=p}},hideable:{get:function(){return $},set:function(p){$=p}},groupSpacing:{get:function(){return O},set:function(p){O=p}},fillOpacity:{get:function(){return B},set:function(p){B=p}},margin:{get:function(){return a},set:function(p){a.top=void 0!==p.top?p.top:a.top,a.right=void 0!==p.right?p.right:a.right,a.bottom=void 0!==p.bottom?p.bottom:a.bottom,a.left=void 0!==p.left?p.left:a.left}},duration:{get:function(){return z},set:function(p){it.reset(z=p)}},color:{get:function(){return j},set:function(p){j=f.utils.getColor(p)}},barColor:{get:function(){return st},set:function(p){st=p?f.utils.getColor(p):null}}}),f.utils.initOptions(U),U},f.models.multiBarChart=function(){"use strict";var B,M,a=f.models.multiBar(),u=f.models.axis(),w=f.models.axis(),m=f.interactiveGuideline(),x=f.models.legend(),P=f.models.legend(),v=f.models.tooltip(),C={top:30,right:20,bottom:50,left:60},W=null,J=null,tt=null,G=f.utils.defaultColor(),rt=!0,j={},$=!0,st=null,q=!0,z=!0,R=!1,V=!0,E=!1,A=!1,O=0,b=f.utils.state(),I=null,it=null,ct=d3.dispatch("stateChange","changeState","renderEnd"),U=function(){return rt?180:0},p=250,_=!1;b.stacked=!1,a.stacked(!1),u.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(S){return S}),w.orient(R?"right":"left").tickFormat(d3.format(",.1f")),v.duration(0).valueFormatter(function(S,at){return w.tickFormat()(S,at)}).headerFormatter(function(S,at){return u.tickFormat()(S,at)}),m.tooltip.valueFormatter(function(S,at){return null==S?"N/A":w.tickFormat()(S,at)}).headerFormatter(function(S,at){return u.tickFormat()(S,at)}),m.tooltip.valueFormatter(function(S,at){return null==S?"N/A":w.tickFormat()(S,at)}).headerFormatter(function(S,at){return u.tickFormat()(S,at)}),m.tooltip.duration(0).valueFormatter(function(S,at){return w.tickFormat()(S,at)}).headerFormatter(function(S,at){return u.tickFormat()(S,at)}),P.updateState(!1);var D=f.utils.renderWatch(ct),Z=!1;function h(S){return D.reset(),D.models(a),q&&D.models(u),z&&D.models(w),S.each(function(at){var ut=d3.select(this);f.utils.initSVG(ut);var wt,ot=f.utils.availableWidth(J,ut,C),yt=f.utils.availableHeight(tt,ut,C);if(h.update=function(){0===p?ut.call(h):ut.transition().duration(p).call(h)},h.container=this,b.setter(function(S){return function(at){void 0!==at.stacked&&(Z=at.stacked),void 0!==at.active&&S.forEach(function(ut,Q){ut.disabled=!at.active[Q]})}}(at),h.update).getter(function(S){return function(){return{active:S.map(function(at){return!at.disabled}),stacked:Z}}}(at)).update(),b.disabled=at.map(function(St){return!!St.disabled}),!I)for(wt in I={},b)I[wt]=b[wt]instanceof Array?b[wt].slice(0):b[wt];if(!at||!at.length||!at.filter(function(St){return St.values.length}).length)return f.utils.noData(h,ut),h;ut.selectAll(".nv-noData").remove(),B=a.xScale(),M=a.yScale();var Et=ut.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([at]),gt=Et.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),N=Et.select("g");if(gt.append("g").attr("class","nv-x nv-axis"),gt.append("g").attr("class","nv-y nv-axis"),gt.append("g").attr("class","nv-barsWrap"),gt.append("g").attr("class","nv-legendWrap"),gt.append("g").attr("class","nv-controlsWrap"),gt.append("g").attr("class","nv-interactive"),$?"bottom"===st?(x.width(ot-C.right),N.select(".nv-legendWrap").datum(at).call(x),C.bottom=u.height()+x.height(),yt=f.utils.availableHeight(tt,ut,C),N.select(".nv-legendWrap").attr("transform","translate(0,"+(yt+u.height())+")")):(x.width(ot-U()),N.select(".nv-legendWrap").datum(at).call(x),!W&&x.height()!==C.top&&(C.top=x.height(),yt=f.utils.availableHeight(tt,ut,C)),N.select(".nv-legendWrap").attr("transform","translate("+U()+","+-C.top+")")):N.select(".nv-legendWrap").selectAll("*").remove(),rt){var lt=[{key:j.grouped||"Grouped",disabled:a.stacked()},{key:j.stacked||"Stacked",disabled:!a.stacked()}];P.width(U()).color(["#444","#444","#444"]),N.select(".nv-controlsWrap").datum(lt).attr("transform","translate(0,"+-C.top+")").call(P)}else N.select(".nv-controlsWrap").selectAll("*").remove();if(Et.attr("transform","translate("+C.left+","+C.top+")"),R&&N.select(".nv-y.nv-axis").attr("transform","translate("+ot+",0)"),a.disabled(at.map(function(St){return St.disabled})).width(ot).height(yt).color(at.map(function(St,Dt){return St.color||G(St,Dt)}).filter(function(St,Dt){return!at[Dt].disabled})),N.select(".nv-barsWrap").datum(at.filter(function(St){return!St.disabled})).call(a),q){u.scale(B)._ticks(f.utils.calcTicksX(ot/100,at)).tickSize(-yt,0),N.select(".nv-x.nv-axis").attr("transform","translate(0,"+M.range()[0]+")"),N.select(".nv-x.nv-axis").call(u);var ft=N.select(".nv-x.nv-axis > g").selectAll("g");if(ft.selectAll("line, text").style("opacity",1),E){var xt=function(St,Dt){return"translate("+St+","+Dt+")"};ft.selectAll("text").attr("transform",function(St,Dt,ne){return xt(0,ne%2==0?5:17)});var Ct=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;N.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(St,Dt){return xt(0,0===Dt||Ct%2!=0?17:5)})}A&&N.selectAll(".tick text").call(f.utils.wrapTicks,h.xAxis.rangeBand()),V&&ft.filter(function(St,Dt){return Dt%Math.ceil(at[0].values.length/(ot/100))!=0}).selectAll("text, line").style("opacity",0),O&&ft.selectAll(".tick text").attr("transform","rotate("+O+" 0,0)").style("text-anchor",O>0?"start":"end"),N.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}z&&(w.scale(M)._ticks(f.utils.calcTicksY(yt/36,at)).tickSize(-ot,0),N.select(".nv-y.nv-axis").call(w)),_&&(m.width(ot).height(yt).margin({left:C.left,top:C.top}).svgContainer(ut).xScale(B),Et.select(".nv-interactive").call(m)),x.dispatch.on("stateChange",function(St){for(var Dt in St)b[Dt]=St[Dt];ct.stateChange(b),h.update()}),P.dispatch.on("legendClick",function(St,Dt){if(St.disabled){switch(lt=lt.map(function(ne){return ne.disabled=!0,ne}),St.disabled=!1,St.key){case"Grouped":case j.grouped:a.stacked(!1);break;case"Stacked":case j.stacked:a.stacked(!0)}b.stacked=a.stacked(),ct.stateChange(b),h.update()}}),ct.on("changeState",function(St){void 0!==St.disabled&&(at.forEach(function(Dt,ne){Dt.disabled=St.disabled[ne]}),b.disabled=St.disabled),void 0!==St.stacked&&(a.stacked(St.stacked),b.stacked=St.stacked,Z=St.stacked),h.update()}),_?(m.dispatch.on("elementMousemove",function(St){if(null!=St.pointXValue){var Dt,ne,_t,Yt,te=[];at.filter(function(oe,Wt){return oe.seriesIndex=Wt,!oe.disabled}).forEach(function(oe,Wt){ne=B.domain().indexOf(St.pointXValue);var Xt=oe.values[ne];void 0!==Xt&&(Yt=Xt.x,void 0===Dt&&(Dt=Xt),void 0===_t&&(_t=St.mouseX),te.push({key:oe.key,value:h.y()(Xt,ne),color:G(oe,oe.seriesIndex),data:oe.values[ne]}))}),m.tooltip.data({value:Yt,index:ne,series:te})(),m.renderGuideLine(_t)}}),m.dispatch.on("elementMouseout",function(St){m.tooltip.hidden(!0)})):(a.dispatch.on("elementMouseover.tooltip",function(St){St.value=h.x()(St.data),St.series={key:St.data.key,value:h.y()(St.data),color:St.color},v.data(St).hidden(!1)}),a.dispatch.on("elementMouseout.tooltip",function(St){v.hidden(!0)}),a.dispatch.on("elementMousemove.tooltip",function(St){v()}))}),D.renderEnd("multibarchart immediate"),h}return h.dispatch=ct,h.multibar=a,h.legend=x,h.controls=P,h.xAxis=u,h.yAxis=w,h.state=b,h.tooltip=v,h.interactiveLayer=m,h.options=f.utils.optionsFunc.bind(h),h._options=Object.create({},{width:{get:function(){return J},set:function(S){J=S}},height:{get:function(){return tt},set:function(S){tt=S}},showLegend:{get:function(){return $},set:function(S){$=S}},legendPosition:{get:function(){return st},set:function(S){st=S}},showControls:{get:function(){return rt},set:function(S){rt=S}},controlLabels:{get:function(){return j},set:function(S){j=S}},showXAxis:{get:function(){return q},set:function(S){q=S}},showYAxis:{get:function(){return z},set:function(S){z=S}},defaultState:{get:function(){return I},set:function(S){I=S}},noData:{get:function(){return it},set:function(S){it=S}},reduceXTicks:{get:function(){return V},set:function(S){V=S}},rotateLabels:{get:function(){return O},set:function(S){O=S}},staggerLabels:{get:function(){return E},set:function(S){E=S}},wrapLabels:{get:function(){return A},set:function(S){A=!!S}},margin:{get:function(){return C},set:function(S){void 0!==S.top&&(C.top=S.top,W=S.top),C.right=void 0!==S.right?S.right:C.right,C.bottom=void 0!==S.bottom?S.bottom:C.bottom,C.left=void 0!==S.left?S.left:C.left}},duration:{get:function(){return p},set:function(S){a.duration(p=S),u.duration(p),w.duration(p),D.reset(p)}},color:{get:function(){return G},set:function(S){G=f.utils.getColor(S),x.color(G)}},rightAlignYAxis:{get:function(){return R},set:function(S){w.orient((R=S)?"right":"left")}},useInteractiveGuideline:{get:function(){return _},set:function(S){_=S}},barColor:{get:function(){return a.barColor},set:function(S){a.barColor(S),x.color(function(at,ut){return d3.rgb("#ccc").darker(1.5*ut).toString()})}}}),f.utils.inheritOptions(h,a),f.utils.initOptions(h),h},f.models.multiBarHorizontal=function(){"use strict";var j,O,B,M,b,ct,U,a={top:0,right:0,bottom:0,left:0},u=960,w=500,m=Math.floor(1e4*Math.random()),x=null,P=d3.scale.ordinal(),v=d3.scale.linear(),C=function(D){return D.x},W=function(D){return D.y},J=function(D){return D.yErr},tt=[0],G=f.utils.defaultColor(),rt=null,$=!1,st=!1,z=60,R=.1,V=.75,E=d3.format(",.2f"),I=250,it=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),p=f.utils.renderWatch(it,I);function _(D){return p.reset(),D.each(function(Z){var dt=u-a.left-a.right,ht=w-a.top-a.bottom;x=d3.select(this),f.utils.initSVG(x),$&&(Z=d3.layout.stack().offset("zero").values(function(gt){return gt.values}).y(W)(Z)),Z.forEach(function(gt,N){gt.values.forEach(function(lt){lt.series=N,lt.key=gt.key})}),$&&Z[0].values.map(function(gt,N){var lt=0,F=0;Z.map(function(ft){var xt=ft.values[N];xt.size=Math.abs(xt.y),xt.y<0?(xt.y1=F-xt.size,F-=xt.size):(xt.y1=lt,lt+=xt.size)})});var h=O&&B?[]:Z.map(function(gt){return gt.values.map(function(N,lt){return{x:C(N,lt),y:W(N,lt),y0:N.y0,y1:N.y1}})});P.domain(O||d3.merge(h).map(function(gt){return gt.x})).rangeBands(M||[0,ht],R),v.domain(B||d3.extent(d3.merge(h).map(function(gt){return $?gt.y>0?gt.y1+gt.y:gt.y1:gt.y}).concat(tt))),v.range(st&&!$?b||[v.domain()[0]<0?z:0,dt-(v.domain()[1]>0?z:0)]:b||[0,dt]),ct=ct||P,U=U||d3.scale.linear().domain(v.domain()).range([v(0),v(0)]);var S=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([Z]),at=S.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),Q=(at.append("defs"),at.append("g"));S.select("g"),Q.append("g").attr("class","nv-groups"),S.attr("transform","translate("+a.left+","+a.top+")");var yt=S.select(".nv-groups").selectAll(".nv-group").data(function(gt){return gt},function(gt,N){return N});yt.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),yt.exit().watchTransition(p,"multibarhorizontal: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),yt.attr("class",function(gt,N){return"nv-group nv-series-"+N}).classed("hover",function(gt){return gt.hover}).style("fill",function(gt,N){return G(gt,N)}).style("stroke",function(gt,N){return G(gt,N)}),yt.watchTransition(p,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",V);var wt=yt.selectAll("g.nv-bar").data(function(gt){return gt.values});wt.exit().remove();var Et=wt.enter().append("g").attr("transform",function(gt,N,lt){return"translate("+U($?gt.y0:0)+","+($?0:lt*P.rangeBand()/Z.length+P(C(gt,N)))+")"});Et.append("rect").attr("width",0).attr("height",P.rangeBand()/($?1:Z.length)),wt.on("mouseover",function(gt,N){d3.select(this).classed("hover",!0),it.elementMouseover({data:gt,index:N,color:d3.select(this).style("fill")})}).on("mouseout",function(gt,N){d3.select(this).classed("hover",!1),it.elementMouseout({data:gt,index:N,color:d3.select(this).style("fill")})}).on("mouseout",function(gt,N){it.elementMouseout({data:gt,index:N,color:d3.select(this).style("fill")})}).on("mousemove",function(gt,N){it.elementMousemove({data:gt,index:N,color:d3.select(this).style("fill")})}).on("click",function(gt,N){it.elementClick({data:gt,index:N,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()}).on("dblclick",function(gt,N){it.elementDblClick({data:gt,index:N,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),J(Z[0],0)&&(Et.append("polyline"),wt.select("polyline").attr("fill","none").attr("points",function(gt,N){var lt=J(gt,N),F=.8*P.rangeBand()/(2*($?1:Z.length));return[[(lt=(lt=lt.length?lt:[-Math.abs(lt),Math.abs(lt)]).map(function(xt){return v(xt+(W(gt,N)<0?0:W(gt,N)))-v(0)}))[0],-F],[lt[0],F],[lt[0],0],[lt[1],0],[lt[1],-F],[lt[1],F]].map(function(xt){return xt.join(",")}).join(" ")}).attr("transform",function(gt,N){return"translate(0, "+P.rangeBand()/(2*($?1:Z.length))+")"})),Et.append("text"),st&&!$?(wt.select("text").attr("text-anchor",function(gt,N){return W(gt,N)<0?"end":"start"}).attr("y",P.rangeBand()/(2*Z.length)).attr("dy",".32em").text(function(gt,N){var lt=E(W(gt,N)),F=J(gt,N);return void 0===F?lt:F.length?lt+"+"+E(Math.abs(F[1]))+"-"+E(Math.abs(F[0])):lt+"\xb1"+E(Math.abs(F))}),wt.watchTransition(p,"multibarhorizontal: bars").select("text").attr("x",function(gt,N){return W(gt,N)<0?-4:v(W(gt,N))-v(0)+4})):wt.selectAll("text").text(""),wt.selectAll("text.nv-bar-label").text(""),wt.attr("class",function(gt,N){return W(gt,N)<0?"nv-bar negative":"nv-bar positive"}),rt&&(j||(j=Z.map(function(){return!0})),wt.style("fill",function(gt,N,lt){return d3.rgb(rt(gt,N)).darker(j.map(function(F,ft){return ft}).filter(function(F,ft){return!j[ft]})[lt]).toString()}).style("stroke",function(gt,N,lt){return d3.rgb(rt(gt,N)).darker(j.map(function(F,ft){return ft}).filter(function(F,ft){return!j[ft]})[lt]).toString()})),$?wt.watchTransition(p,"multibarhorizontal: bars").attr("transform",function(gt,N){return"translate("+v(gt.y1)+","+P(C(gt,N))+")"}).select("rect").attr("width",function(gt,N){return Math.abs(v(W(gt,N)+gt.y0)-v(gt.y0))||0}).attr("height",P.rangeBand()):wt.watchTransition(p,"multibarhorizontal: bars").attr("transform",function(gt,N){return"translate("+(W(gt,N)<0?v(W(gt,N)):v(0))+","+(gt.series*P.rangeBand()/Z.length+P(C(gt,N)))+")"}).select("rect").attr("height",P.rangeBand()/Z.length).attr("width",function(gt,N){return Math.max(Math.abs(v(W(gt,N))-v(0)),1)||0}),ct=P.copy(),U=v.copy()}),p.renderEnd("multibarHorizontal immediate"),_}return _.dispatch=it,_.options=f.utils.optionsFunc.bind(_),_._options=Object.create({},{width:{get:function(){return u},set:function(D){u=D}},height:{get:function(){return w},set:function(D){w=D}},x:{get:function(){return C},set:function(D){C=D}},y:{get:function(){return W},set:function(D){W=D}},yErr:{get:function(){return J},set:function(D){J=D}},xScale:{get:function(){return P},set:function(D){P=D}},yScale:{get:function(){return v},set:function(D){v=D}},xDomain:{get:function(){return O},set:function(D){O=D}},yDomain:{get:function(){return B},set:function(D){B=D}},xRange:{get:function(){return M},set:function(D){M=D}},yRange:{get:function(){return b},set:function(D){b=D}},forceY:{get:function(){return tt},set:function(D){tt=D}},stacked:{get:function(){return $},set:function(D){$=D}},showValues:{get:function(){return st},set:function(D){st=D}},disabled:{get:function(){return j},set:function(D){j=D}},id:{get:function(){return m},set:function(D){m=D}},valueFormat:{get:function(){return E},set:function(D){E=D}},valuePadding:{get:function(){return z},set:function(D){z=D}},groupSpacing:{get:function(){return R},set:function(D){R=D}},fillOpacity:{get:function(){return V},set:function(D){V=D}},margin:{get:function(){return a},set:function(D){a.top=void 0!==D.top?D.top:a.top,a.right=void 0!==D.right?D.right:a.right,a.bottom=void 0!==D.bottom?D.bottom:a.bottom,a.left=void 0!==D.left?D.left:a.left}},duration:{get:function(){return I},set:function(D){p.reset(I=D)}},color:{get:function(){return G},set:function(D){G=f.utils.getColor(D)}},barColor:{get:function(){return rt},set:function(D){rt=D?f.utils.getColor(D):null}}}),f.utils.initOptions(_),_},f.models.multiBarHorizontalChart=function(){"use strict";var V,E,a=f.models.multiBarHorizontal(),u=f.models.axis(),w=f.models.axis(),m=f.models.legend().height(30),x=f.models.legend().height(30),P=f.models.tooltip(),v={top:30,right:20,bottom:50,left:60},C=null,W=null,J=null,tt=f.utils.defaultColor(),G=!0,rt="top",j={},$=!0,st="top",q=!0,z=!0,R=!1,A=f.utils.state(),O=null,B=null,M=d3.dispatch("stateChange","changeState","renderEnd"),b=function(){return G?180:0},I=250;A.stacked=!1,a.stacked(R),u.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(_){return _}),w.orient("bottom").tickFormat(d3.format(",.1f")),P.duration(0).valueFormatter(function(_,D){return w.tickFormat()(_,D)}).headerFormatter(function(_,D){return u.tickFormat()(_,D)}),x.updateState(!1);var U=f.utils.renderWatch(M,I);function p(_){return U.reset(),U.models(a),q&&U.models(u),z&&U.models(w),_.each(function(D){var Z=d3.select(this);f.utils.initSVG(Z);var S,ht=f.utils.availableWidth(W,Z,v),h=f.utils.availableHeight(J,Z,v);if(p.update=function(){Z.transition().duration(I).call(p)},p.container=this,R=a.stacked(),A.setter(function(_){return function(D){void 0!==D.stacked&&(R=D.stacked),void 0!==D.active&&_.forEach(function(Z,dt){Z.disabled=!D.active[dt]})}}(D),p.update).getter(function(_){return function(){return{active:_.map(function(D){return!D.disabled}),stacked:R}}}(D)).update(),A.disabled=D.map(function(Et){return!!Et.disabled}),!O)for(S in O={},A)O[S]=A[S]instanceof Array?A[S].slice(0):A[S];if(!D||!D.length||!D.filter(function(Et){return Et.values.length}).length)return f.utils.noData(p,Z),p;Z.selectAll(".nv-noData").remove(),V=a.xScale(),E=a.yScale().clamp(!0);var at=Z.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([D]),ut=at.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),Q=at.select("g");if(ut.append("g").attr("class","nv-x nv-axis"),ut.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),ut.append("g").attr("class","nv-barsWrap"),ut.append("g").attr("class","nv-legendWrap"),ut.append("g").attr("class","nv-controlsWrap"),$?(m.width(ht-b()),Q.select(".nv-legendWrap").datum(D).call(m),"bottom"===st?(v.bottom=u.height()+m.height(),h=f.utils.availableHeight(J,Z,v),Q.select(".nv-legendWrap").attr("transform","translate("+b()+","+(h+u.height())+")")):"top"===st&&(!C&&m.height()!==v.top&&(v.top=m.height(),h=f.utils.availableHeight(J,Z,v)),Q.select(".nv-legendWrap").attr("transform","translate("+b()+","+-v.top+")"))):Q.select(".nv-legendWrap").selectAll("*").remove(),G){var ot=[{key:j.grouped||"Grouped",disabled:a.stacked()},{key:j.stacked||"Stacked",disabled:!a.stacked()}];x.width(b()).color(["#444","#444","#444"]),"bottom"===rt?(v.bottom=u.height()+m.height(),h=f.utils.availableHeight(J,Z,v),Q.select(".nv-controlsWrap").datum(ot).attr("transform","translate(0,"+(h+u.height())+")").call(x)):"top"===rt&&Q.select(".nv-controlsWrap").datum(ot).attr("transform","translate(0,"+-v.top+")").call(x)}else Q.select(".nv-controlsWrap").selectAll("*").remove();at.attr("transform","translate("+v.left+","+v.top+")"),a.disabled(D.map(function(Et){return Et.disabled})).width(ht).height(h).color(D.map(function(Et,gt){return Et.color||tt(Et,gt)}).filter(function(Et,gt){return!D[gt].disabled})),Q.select(".nv-barsWrap").datum(D.filter(function(Et){return!Et.disabled})).transition().call(a),q&&(u.scale(V)._ticks(f.utils.calcTicksY(h/24,D)).tickSize(-ht,0),Q.select(".nv-x.nv-axis").call(u),Q.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text")),z&&(w.scale(E)._ticks(f.utils.calcTicksX(ht/100,D)).tickSize(-h,0),Q.select(".nv-y.nv-axis").attr("transform","translate(0,"+h+")"),Q.select(".nv-y.nv-axis").call(w)),Q.select(".nv-zeroLine line").attr("x1",E(0)).attr("x2",E(0)).attr("y1",0).attr("y2",-h),m.dispatch.on("stateChange",function(Et){for(var gt in Et)A[gt]=Et[gt];M.stateChange(A),p.update()}),x.dispatch.on("legendClick",function(Et,gt){if(Et.disabled){switch(ot=ot.map(function(N){return N.disabled=!0,N}),Et.disabled=!1,Et.key){case"Grouped":case j.grouped:a.stacked(!1);break;case"Stacked":case j.stacked:a.stacked(!0)}A.stacked=a.stacked(),M.stateChange(A),R=a.stacked(),p.update()}}),M.on("changeState",function(Et){void 0!==Et.disabled&&(D.forEach(function(gt,N){gt.disabled=Et.disabled[N]}),A.disabled=Et.disabled),void 0!==Et.stacked&&(a.stacked(Et.stacked),A.stacked=Et.stacked,R=Et.stacked),p.update()})}),U.renderEnd("multibar horizontal chart immediate"),p}return a.dispatch.on("elementMouseover.tooltip",function(_){_.value=p.x()(_.data),_.series={key:_.data.key,value:p.y()(_.data),color:_.color},P.data(_).hidden(!1)}),a.dispatch.on("elementMouseout.tooltip",function(_){P.hidden(!0)}),a.dispatch.on("elementMousemove.tooltip",function(_){P()}),p.dispatch=M,p.multibar=a,p.legend=m,p.controls=x,p.xAxis=u,p.yAxis=w,p.state=A,p.tooltip=P,p.options=f.utils.optionsFunc.bind(p),p._options=Object.create({},{width:{get:function(){return W},set:function(_){W=_}},height:{get:function(){return J},set:function(_){J=_}},showLegend:{get:function(){return $},set:function(_){$=_}},legendPosition:{get:function(){return st},set:function(_){st=_}},controlsPosition:{get:function(){return rt},set:function(_){rt=_}},showControls:{get:function(){return G},set:function(_){G=_}},controlLabels:{get:function(){return j},set:function(_){j=_}},showXAxis:{get:function(){return q},set:function(_){q=_}},showYAxis:{get:function(){return z},set:function(_){z=_}},defaultState:{get:function(){return O},set:function(_){O=_}},noData:{get:function(){return B},set:function(_){B=_}},margin:{get:function(){return v},set:function(_){void 0!==_.top&&(v.top=_.top,C=_.top),v.right=void 0!==_.right?_.right:v.right,v.bottom=void 0!==_.bottom?_.bottom:v.bottom,v.left=void 0!==_.left?_.left:v.left}},duration:{get:function(){return I},set:function(_){U.reset(I=_),a.duration(I),u.duration(I),w.duration(I)}},color:{get:function(){return tt},set:function(_){tt=f.utils.getColor(_),m.color(tt)}},barColor:{get:function(){return a.barColor},set:function(_){a.barColor(_),m.color(function(D,Z){return d3.rgb("#ccc").darker(1.5*Z).toString()})}}}),f.utils.inheritOptions(p,a),f.utils.initOptions(p),p},f.models.multiChart=function(){"use strict";var C,W,a={top:30,right:20,bottom:50,left:60},u=null,w=f.utils.defaultColor(),m=null,x=null,P=!0,v=null,J=function(h){return h.x},tt=function(h){return h.y},G="linear",rt=!0,j=f.interactiveGuideline(),$=!1,st=" (right axis)",q=250,z=d3.scale.linear(),R=d3.scale.linear(),V=d3.scale.linear(),E=f.models.line().yScale(R).duration(q),A=f.models.line().yScale(V).duration(q),O=f.models.scatter().yScale(R).duration(q),B=f.models.scatter().yScale(V).duration(q),M=f.models.multiBar().stacked(!1).yScale(R).duration(q),b=f.models.multiBar().stacked(!1).yScale(V).duration(q),I=f.models.stackedArea().yScale(R).duration(q),it=f.models.stackedArea().yScale(V).duration(q),ct=f.models.axis().scale(z).orient("bottom").tickPadding(5).duration(q),U=f.models.axis().scale(R).orient("left").duration(q),p=f.models.axis().scale(V).orient("right").duration(q),_=f.models.legend().height(30),D=f.models.tooltip(),Z=d3.dispatch(),dt=[E,A,O,B,M,b,I,it];function ht(h){return h.each(function(S){var at=d3.select(this);f.utils.initSVG(at),ht.update=function(){at.transition().call(ht)},ht.container=this;var Q=f.utils.availableWidth(m,at,a),ot=f.utils.availableHeight(x,at,a),yt=S.filter(function(Mt){return"line"==Mt.type&&1==Mt.yAxis}),wt=S.filter(function(Mt){return"line"==Mt.type&&2==Mt.yAxis}),Et=S.filter(function(Mt){return"scatter"==Mt.type&&1==Mt.yAxis}),gt=S.filter(function(Mt){return"scatter"==Mt.type&&2==Mt.yAxis}),N=S.filter(function(Mt){return"bar"==Mt.type&&1==Mt.yAxis}),lt=S.filter(function(Mt){return"bar"==Mt.type&&2==Mt.yAxis}),F=S.filter(function(Mt){return"area"==Mt.type&&1==Mt.yAxis}),ft=S.filter(function(Mt){return"area"==Mt.type&&2==Mt.yAxis});if(!S||!S.length||!S.filter(function(Mt){return Mt.values.length}).length)return f.utils.noData(ht,at),ht;at.selectAll(".nv-noData").remove();var xt=S.filter(function(Mt){return!Mt.disabled&&1==Mt.yAxis}).map(function(Mt){return Mt.values.map(function(Ot,jt){return{x:J(Ot),y:tt(Ot)}})}),Rt=S.filter(function(Mt){return!Mt.disabled&&2==Mt.yAxis}).map(function(Mt){return Mt.values.map(function(Ot,jt){return{x:J(Ot),y:tt(Ot)}})});z.domain(d3.extent(d3.merge(xt.concat(Rt)),function(Mt){return Mt.x})).range([0,Q]);var Qt=at.selectAll("g.wrap.multiChart").data([S]),Ct=Qt.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");Ct.append("g").attr("class","nv-x nv-axis"),Ct.append("g").attr("class","nv-y1 nv-axis"),Ct.append("g").attr("class","nv-y2 nv-axis"),Ct.append("g").attr("class","stack1Wrap"),Ct.append("g").attr("class","stack2Wrap"),Ct.append("g").attr("class","bars1Wrap"),Ct.append("g").attr("class","bars2Wrap"),Ct.append("g").attr("class","scatters1Wrap"),Ct.append("g").attr("class","scatters2Wrap"),Ct.append("g").attr("class","lines1Wrap"),Ct.append("g").attr("class","lines2Wrap"),Ct.append("g").attr("class","legendWrap"),Ct.append("g").attr("class","nv-interactive");var St=Qt.select("g"),Dt=S.map(function(Mt,Ot){return S[Ot].color||w(Mt,Ot)});if(P){var ne=_.align()?Q/2:Q,_t=_.align()?ne:0;_.width(ne),_.color(Dt),St.select(".legendWrap").datum(S.map(function(Mt){return Mt.originalKey=void 0===Mt.originalKey?Mt.key:Mt.originalKey,Mt.key=Mt.originalKey+(1==Mt.yAxis?"":st),Mt})).call(_),!u&&_.height()!==a.top&&(a.top=_.height(),ot=f.utils.availableHeight(x,at,a)),St.select(".legendWrap").attr("transform","translate("+_t+","+-a.top+")")}else St.select(".legendWrap").selectAll("*").remove();E.width(Q).height(ot).interpolate(G).color(Dt.filter(function(Mt,Ot){return!S[Ot].disabled&&1==S[Ot].yAxis&&"line"==S[Ot].type})),A.width(Q).height(ot).interpolate(G).color(Dt.filter(function(Mt,Ot){return!S[Ot].disabled&&2==S[Ot].yAxis&&"line"==S[Ot].type})),O.width(Q).height(ot).color(Dt.filter(function(Mt,Ot){return!S[Ot].disabled&&1==S[Ot].yAxis&&"scatter"==S[Ot].type})),B.width(Q).height(ot).color(Dt.filter(function(Mt,Ot){return!S[Ot].disabled&&2==S[Ot].yAxis&&"scatter"==S[Ot].type})),M.width(Q).height(ot).color(Dt.filter(function(Mt,Ot){return!S[Ot].disabled&&1==S[Ot].yAxis&&"bar"==S[Ot].type})),b.width(Q).height(ot).color(Dt.filter(function(Mt,Ot){return!S[Ot].disabled&&2==S[Ot].yAxis&&"bar"==S[Ot].type})),I.width(Q).height(ot).interpolate(G).color(Dt.filter(function(Mt,Ot){return!S[Ot].disabled&&1==S[Ot].yAxis&&"area"==S[Ot].type})),it.width(Q).height(ot).interpolate(G).color(Dt.filter(function(Mt,Ot){return!S[Ot].disabled&&2==S[Ot].yAxis&&"area"==S[Ot].type})),St.attr("transform","translate("+a.left+","+a.top+")");var Yt=St.select(".lines1Wrap").datum(yt.filter(function(Mt){return!Mt.disabled})),te=St.select(".scatters1Wrap").datum(Et.filter(function(Mt){return!Mt.disabled})),oe=St.select(".bars1Wrap").datum(N.filter(function(Mt){return!Mt.disabled})),Wt=St.select(".stack1Wrap").datum(F.filter(function(Mt){return!Mt.disabled})),Xt=St.select(".lines2Wrap").datum(wt.filter(function(Mt){return!Mt.disabled})),re=St.select(".scatters2Wrap").datum(gt.filter(function(Mt){return!Mt.disabled})),Pt=St.select(".bars2Wrap").datum(lt.filter(function(Mt){return!Mt.disabled})),$t=St.select(".stack2Wrap").datum(ft.filter(function(Mt){return!Mt.disabled})),ie=[];M.stacked()&&N.length&&(ie=N.filter(function(Ot){return!Ot.disabled}).map(function(Ot){return Ot.values})).length>0&&(ie=ie.reduce(function(Ot,jt){return Ot.map(function(ee,fe){return{x:ee.x,y:ee.y+jt[fe].y}})})),N.length&&ie.push({x:0,y:0});var xe=[];function de(Mt){var Ot=2===Mt.series.yAxis?p:U;Mt.value=Mt.point.x,Mt.series={value:Mt.point.y,color:Mt.point.color,key:Mt.series.key},D.duration(0).headerFormatter(function(jt,ee){return ct.tickFormat()(jt,ee)}).valueFormatter(function(jt,ee){return Ot.tickFormat()(jt,ee)}).data(Mt).hidden(!1)}function be(Mt){var Ot=2===Mt.series.yAxis?p:U;Mt.value=Mt.point.x,Mt.series={value:Mt.point.y,color:Mt.point.color,key:Mt.series.key},D.duration(100).headerFormatter(function(jt,ee){return ct.tickFormat()(jt,ee)}).valueFormatter(function(jt,ee){return Ot.tickFormat()(jt,ee)}).data(Mt).hidden(!1)}function Ce(Mt){var Ot=2===Mt.series.yAxis?p:U;Mt.point.x=I.x()(Mt.point),Mt.point.y=I.y()(Mt.point),D.duration(0).headerFormatter(function(jt,ee){return ct.tickFormat()(jt,ee)}).valueFormatter(function(jt,ee){return Ot.tickFormat()(jt,ee)}).data(Mt).hidden(!1)}function we(Mt){var Ot=2===Mt.series.yAxis?p:U;Mt.value=M.x()(Mt.data),Mt.series={value:M.y()(Mt.data),color:Mt.color,key:Mt.data.key},D.duration(0).headerFormatter(function(jt,ee){return ct.tickFormat()(jt,ee)}).valueFormatter(function(jt,ee){return Ot.tickFormat()(jt,ee)}).data(Mt).hidden(!1)}function zt(){for(var Mt=0,Ot=dt.length;Mt<Ot;Mt++){var jt=dt[Mt];try{jt.clearHighlights()}catch(ee){}}}b.stacked()&&lt.length&&(xe=lt.filter(function(Ot){return!Ot.disabled}).map(function(Ot){return Ot.values})).length>0&&(xe=xe.reduce(function(Ot,jt){return Ot.map(function(ee,fe){return{x:ee.x,y:ee.y+jt[fe].y}})})),lt.length&&xe.push({x:0,y:0}),R.domain(C||d3.extent(d3.merge(xt).concat(ie),function(Mt){return Mt.y})).range([0,ot]),V.domain(W||d3.extent(d3.merge(Rt).concat(xe),function(Mt){return Mt.y})).range([0,ot]),E.yDomain(R.domain()),O.yDomain(R.domain()),M.yDomain(R.domain()),I.yDomain(R.domain()),A.yDomain(V.domain()),B.yDomain(V.domain()),b.yDomain(V.domain()),it.yDomain(V.domain()),F.length&&d3.transition(Wt).call(I),ft.length&&d3.transition($t).call(it),N.length&&d3.transition(oe).call(M),lt.length&&d3.transition(Pt).call(b),yt.length&&d3.transition(Yt).call(E),wt.length&&d3.transition(Xt).call(A),Et.length&&d3.transition(te).call(O),gt.length&&d3.transition(re).call(B),ct._ticks(f.utils.calcTicksX(Q/100,S)).tickSize(-ot,0),St.select(".nv-x.nv-axis").attr("transform","translate(0,"+ot+")"),d3.transition(St.select(".nv-x.nv-axis")).call(ct),U._ticks(f.utils.calcTicksY(ot/36,S)).tickSize(-Q,0),d3.transition(St.select(".nv-y1.nv-axis")).call(U),p._ticks(f.utils.calcTicksY(ot/36,S)).tickSize(-Q,0),d3.transition(St.select(".nv-y2.nv-axis")).call(p),St.select(".nv-y1.nv-axis").classed("nv-disabled",!xt.length).attr("transform","translate("+z.range()[0]+",0)"),St.select(".nv-y2.nv-axis").classed("nv-disabled",!Rt.length).attr("transform","translate("+z.range()[1]+",0)"),_.dispatch.on("stateChange",function(Mt){ht.update()}),$&&(j.width(Q).height(ot).margin({left:a.left,top:a.top}).svgContainer(at).xScale(z),Qt.select(".nv-interactive").call(j)),$?(j.dispatch.on("elementMousemove",function(Mt){zt();var Ot,jt,ee,fe=[];S.filter(function(Ht,se){return Ht.seriesIndex=se,!Ht.disabled}).forEach(function(Ht,se){var Bt=z.domain(),Zt=Ht.values.filter(function(Jt,he){return ht.x()(Jt,he)>=Bt[0]&&ht.x()(Jt,he)<=Bt[1]}),pe=Zt[jt=f.interactiveBisect(Zt,Mt.pointXValue,ht.x())],ae=ht.y()(pe,jt);null!==ae&&function ce(Mt,Ot,jt){for(var ee=0,fe=dt.length;ee<fe;ee++){var ke=dt[ee];try{ke.highlightPoint(Mt,Ot,jt)}catch(Ht){}}}(se,jt,!0),void 0!==pe&&(void 0===Ot&&(Ot=pe),void 0===ee&&(ee=z(ht.x()(pe,jt))),fe.push({key:Ht.key,value:ae,color:w(Ht,Ht.seriesIndex),data:pe,yAxis:2==Ht.yAxis?p:U}))}),j.tooltip.headerFormatter(function(Ht,se){return ct.tickFormat()(Ht,se)}).valueFormatter(j.tooltip.valueFormatter()||function(Ht,se){return null==Ht?"N/A":fe[se].yAxis.tickFormat()(Ht)}).data({value:ht.x()(Ot,jt),index:jt,series:fe})(),j.renderGuideLine(ee)}),j.dispatch.on("elementMouseout",function(Mt){zt()})):(E.dispatch.on("elementMouseover.tooltip",de),A.dispatch.on("elementMouseover.tooltip",de),E.dispatch.on("elementMouseout.tooltip",function(Mt){D.hidden(!0)}),A.dispatch.on("elementMouseout.tooltip",function(Mt){D.hidden(!0)}),O.dispatch.on("elementMouseover.tooltip",be),B.dispatch.on("elementMouseover.tooltip",be),O.dispatch.on("elementMouseout.tooltip",function(Mt){D.hidden(!0)}),B.dispatch.on("elementMouseout.tooltip",function(Mt){D.hidden(!0)}),I.dispatch.on("elementMouseover.tooltip",Ce),it.dispatch.on("elementMouseover.tooltip",Ce),I.dispatch.on("elementMouseout.tooltip",function(Mt){D.hidden(!0)}),it.dispatch.on("elementMouseout.tooltip",function(Mt){D.hidden(!0)}),M.dispatch.on("elementMouseover.tooltip",we),b.dispatch.on("elementMouseover.tooltip",we),M.dispatch.on("elementMouseout.tooltip",function(Mt){D.hidden(!0)}),b.dispatch.on("elementMouseout.tooltip",function(Mt){D.hidden(!0)}),M.dispatch.on("elementMousemove.tooltip",function(Mt){D()}),b.dispatch.on("elementMousemove.tooltip",function(Mt){D()}))}),ht}return ht.dispatch=Z,ht.legend=_,ht.lines1=E,ht.lines2=A,ht.scatters1=O,ht.scatters2=B,ht.bars1=M,ht.bars2=b,ht.stack1=I,ht.stack2=it,ht.xAxis=ct,ht.yAxis1=U,ht.yAxis2=p,ht.tooltip=D,ht.interactiveLayer=j,ht.options=f.utils.optionsFunc.bind(ht),ht._options=Object.create({},{width:{get:function(){return m},set:function(h){m=h}},height:{get:function(){return x},set:function(h){x=h}},showLegend:{get:function(){return P},set:function(h){P=h}},yDomain1:{get:function(){return C},set:function(h){C=h}},yDomain2:{get:function(){return W},set:function(h){W=h}},noData:{get:function(){return v},set:function(h){v=h}},interpolate:{get:function(){return G},set:function(h){G=h}},legendRightAxisHint:{get:function(){return st},set:function(h){st=h}},margin:{get:function(){return a},set:function(h){void 0!==h.top&&(a.top=h.top,u=h.top),a.right=void 0!==h.right?h.right:a.right,a.bottom=void 0!==h.bottom?h.bottom:a.bottom,a.left=void 0!==h.left?h.left:a.left}},color:{get:function(){return w},set:function(h){w=f.utils.getColor(h)}},x:{get:function(){return J},set:function(h){J=h,E.x(h),A.x(h),O.x(h),B.x(h),M.x(h),b.x(h),I.x(h),it.x(h)}},y:{get:function(){return tt},set:function(h){tt=h,E.y(h),A.y(h),O.y(h),B.y(h),I.y(h),it.y(h),M.y(h),b.y(h)}},useVoronoi:{get:function(){return rt},set:function(h){rt=h,E.useVoronoi(h),A.useVoronoi(h),I.useVoronoi(h),it.useVoronoi(h)}},useInteractiveGuideline:{get:function(){return $},set:function(h){($=h)&&(E.interactive(!1),E.useVoronoi(!1),A.interactive(!1),A.useVoronoi(!1),I.interactive(!1),I.useVoronoi(!1),it.interactive(!1),it.useVoronoi(!1),O.interactive(!1),B.interactive(!1))}},duration:{get:function(){return q},set:function(h){q=h,[E,A,I,it,O,B,ct,U,p].forEach(function(S){S.duration(q)})}}}),f.utils.initOptions(ht),ht},f.models.ohlcBar=function(){"use strict";var V,E,A,O,a={top:0,right:0,bottom:0,left:0},u=null,w=null,m=Math.floor(1e4*Math.random()),x=null,P=d3.scale.linear(),v=d3.scale.linear(),C=function(b){return b.x},W=function(b){return b.y},J=function(b){return b.open},tt=function(b){return b.close},G=function(b){return b.high},rt=function(b){return b.low},j=[],$=[],st=!1,q=!0,z=f.utils.defaultColor(),R=!1,B=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function M(b){return b.each(function(I){x=d3.select(this);var it=f.utils.availableWidth(u,x,a),ct=f.utils.availableHeight(w,x,a);f.utils.initSVG(x);var U=it/I[0].values.length*.9;P.domain(V||d3.extent(I[0].values.map(C).concat(j))),P.range(st?A||[.5*it/I[0].values.length,it*(I[0].values.length-.5)/I[0].values.length]:A||[5+U/2,it-U/2-5]),v.domain(E||[d3.min(I[0].values.map(rt).concat($)),d3.max(I[0].values.map(G).concat($))]).range(O||[ct,0]),P.domain()[0]===P.domain()[1]&&(P.domain()[0]?P.domain([P.domain()[0]-.01*P.domain()[0],P.domain()[1]+.01*P.domain()[1]]):P.domain([-1,1])),v.domain()[0]===v.domain()[1]&&(v.domain()[0]?v.domain([v.domain()[0]+.01*v.domain()[0],v.domain()[1]-.01*v.domain()[1]]):v.domain([-1,1]));var p=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([I[0].values]),_=p.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),D=_.append("defs"),Z=_.append("g"),dt=p.select("g");Z.append("g").attr("class","nv-ticks"),p.attr("transform","translate("+a.left+","+a.top+")"),x.on("click",function(h,S){B.chartClick({data:h,index:S,pos:d3.event,id:m})}),D.append("clipPath").attr("id","nv-chart-clip-path-"+m).append("rect"),p.select("#nv-chart-clip-path-"+m+" rect").attr("width",it).attr("height",ct),dt.attr("clip-path",q?"url(#nv-chart-clip-path-"+m+")":"");var ht=p.select(".nv-ticks").selectAll(".nv-tick").data(function(h){return h});ht.exit().remove(),ht.enter().append("path").attr("class",function(h,S,at){return(J(h,S)>tt(h,S)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+at+"-"+S}).attr("d",function(h,S){return"m0,0l0,"+(v(J(h,S))-v(G(h,S)))+"l"+-U/2+",0l"+U/2+",0l0,"+(v(rt(h,S))-v(J(h,S)))+"l0,"+(v(tt(h,S))-v(rt(h,S)))+"l"+U/2+",0l"+-U/2+",0z"}).attr("transform",function(h,S){return"translate("+P(C(h,S))+","+v(G(h,S))+")"}).attr("fill",function(h,S){return z[0]}).attr("stroke",function(h,S){return z[0]}).attr("x",0).attr("y",function(h,S){return v(Math.max(0,W(h,S)))}).attr("height",function(h,S){return Math.abs(v(W(h,S))-v(0))}),ht.attr("class",function(h,S,at){return(J(h,S)>tt(h,S)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+at+"-"+S}),d3.transition(ht).attr("transform",function(h,S){return"translate("+P(C(h,S))+","+v(G(h,S))+")"}).attr("d",function(h,S){var at=it/I[0].values.length*.9;return"m0,0l0,"+(v(J(h,S))-v(G(h,S)))+"l"+-at/2+",0l"+at/2+",0l0,"+(v(rt(h,S))-v(J(h,S)))+"l0,"+(v(tt(h,S))-v(rt(h,S)))+"l"+at/2+",0l"+-at/2+",0z"})}),M}return M.highlightPoint=function(b,I){M.clearHighlights(),x.select(".nv-ohlcBar .nv-tick-0-"+b).classed("hover",I)},M.clearHighlights=function(){x.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)},M.dispatch=B,M.options=f.utils.optionsFunc.bind(M),M._options=Object.create({},{width:{get:function(){return u},set:function(b){u=b}},height:{get:function(){return w},set:function(b){w=b}},xScale:{get:function(){return P},set:function(b){P=b}},yScale:{get:function(){return v},set:function(b){v=b}},xDomain:{get:function(){return V},set:function(b){V=b}},yDomain:{get:function(){return E},set:function(b){E=b}},xRange:{get:function(){return A},set:function(b){A=b}},yRange:{get:function(){return O},set:function(b){O=b}},forceX:{get:function(){return j},set:function(b){j=b}},forceY:{get:function(){return $},set:function(b){$=b}},padData:{get:function(){return st},set:function(b){st=b}},clipEdge:{get:function(){return q},set:function(b){q=b}},id:{get:function(){return m},set:function(b){m=b}},interactive:{get:function(){return R},set:function(b){R=b}},x:{get:function(){return C},set:function(b){C=b}},y:{get:function(){return W},set:function(b){W=b}},open:{get:function(){return J()},set:function(b){J=b}},close:{get:function(){return tt()},set:function(b){tt=b}},high:{get:function(){return G},set:function(b){G=b}},low:{get:function(){return rt},set:function(b){rt=b}},margin:{get:function(){return a},set:function(b){a.top=null!=b.top?b.top:a.top,a.right=null!=b.right?b.right:a.right,a.bottom=null!=b.bottom?b.bottom:a.bottom,a.left=null!=b.left?b.left:a.left}},color:{get:function(){return z},set:function(b){z=f.utils.getColor(b)}}}),f.utils.initOptions(M),M},f.models.parallelCoordinates=function(){"use strict";var R,V,E,a={top:30,right:0,bottom:10,left:0},u=null,w=null,m=null,x=null,P=d3.scale.ordinal(),v={},C="undefined values",W=[],J=[],tt=[],G=!0,rt=f.utils.defaultColor(),j=[],$=[],st=[],q=[],z=1,A=d3.svg.line(),O=d3.svg.axis(),B=d3.dispatch("brushstart","brush","brushEnd","dimensionsOrder","stateChange","elementClick","elementMouseover","elementMouseout","elementMousemove","renderEnd","activeChanged"),M=f.utils.renderWatch(B);function b(I){return M.reset(),I.each(function(it){var ct=d3.select(this);if(m=f.utils.availableWidth(u,ct,a),x=f.utils.availableHeight(w,ct,a),f.utils.initSVG(ct),void 0===it[0].values){var U=[];it.forEach(function(_t){var Yt={};Object.keys(_t).forEach(function(oe){"name"!==oe&&(Yt[oe]=_t[oe])}),U.push({key:_t.name,values:Yt})}),it=U}var p=it.map(function(_t){return _t.values});0===$.length&&($=it),tt=W.sort(function(_t,Yt){return _t.currentPosition-Yt.currentPosition}).map(function(_t){return _t.key}),J=W.filter(function(_t){return!_t.disabled}),P.rangePoints([0,m],1).domain(J.map(function(_t){return _t.key}));var _={},D=!1,Z=[];tt.forEach(function(_t){var Yt=d3.extent(p,function(re){return+re[_t]}),te=Yt[0],oe=Yt[1],Wt=!1;(isNaN(te)||isNaN(oe))&&(Wt=!0,te=0,oe=0),te===oe&&(te-=1,oe+=1);var Xt=j.filter(function(re){return re.dimension==_t});0!==Xt.length&&(Wt?(te=v[_t].domain()[0],oe=v[_t].domain()[1]):!Xt[0].hasOnlyNaN&&G?(te=te>Xt[0].extent[0]?Xt[0].extent[0]:te,oe=oe<Xt[0].extent[1]?Xt[0].extent[1]:oe):Xt[0].hasNaN&&(oe=oe<Xt[0].extent[1]?Xt[0].extent[1]:oe,_[_t]=v[_t].domain()[1],D=!0)),v[_t]=d3.scale.linear().domain([te,oe]).range([.9*(x-12),0]),q=[],v[_t].brush=d3.svg.brush().y(v[_t]).on("brushstart",ft).on("brush",xt).on("brushend",Rt)});var dt=ct.selectAll("g.nv-wrap.nv-parallelCoordinates").data([it]),h=dt.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates").append("g"),S=dt.select("g");h.append("g").attr("class","nv-parallelCoordinates background"),h.append("g").attr("class","nv-parallelCoordinates foreground"),h.append("g").attr("class","nv-parallelCoordinates missingValuesline"),dt.attr("transform","translate("+a.left+","+a.top+")"),A.interpolate("cardinal").tension(z),O.orient("left");var ut,Q,at=d3.behavior.drag().on("dragstart",function Ct(_t){st[_t.key]=this.parentNode.__origin__=P(_t.key),V.attr("visibility","hidden")}).on("drag",function St(_t){st[_t.key]=Math.min(m,Math.max(0,this.parentNode.__origin__+=d3.event.x)),R.attr("d",lt),J.sort(function(Yt,te){return ne(Yt.key)-ne(te.key)}),J.forEach(function(Yt,te){return Yt.currentPosition=te}),P.domain(J.map(function(Yt){return Yt.key})),E.attr("transform",function(Yt){return"translate("+ne(Yt.key)+")"})}).on("dragend",function Dt(_t,Yt){delete this.parentNode.__origin__,delete st[_t.key],d3.select(this.parentNode).attr("transform","translate("+P(_t.key)+")"),R.attr("d",lt),V.attr("d",lt).attr("visibility",null),B.dimensionsOrder(J)}),ot=P.range()[1]-P.range()[0];if(ot=isNaN(ot)?P.range()[0]:ot,!isNaN(ot)){var yt=[0+ot/2,x-12,m-ot/2,x-12];(ut=dt.select(".missingValuesline").selectAll("line").data([yt])).enter().append("line"),ut.exit().remove(),ut.attr("x1",function(_t){return _t[0]}).attr("y1",function(_t){return _t[1]}).attr("x2",function(_t){return _t[2]}).attr("y2",function(_t){return _t[3]}),(Q=dt.select(".missingValuesline").selectAll("text").data([C])).append("text").data([C]),Q.enter().append("text"),Q.exit().remove(),Q.attr("y",x).attr("x",m-92-ot/2).text(function(_t){return _t})}(V=dt.select(".background").selectAll("path").data(it)).enter().append("path"),V.exit().remove(),V.attr("d",lt),(R=dt.select(".foreground").selectAll("path").data(it)).enter().append("path"),R.exit().remove(),R.attr("d",lt).style("stroke-width",function(_t,Yt){return isNaN(_t.strokeWidth)&&(_t.strokeWidth=1),_t.strokeWidth}).attr("stroke",function(_t,Yt){return _t.color||rt(_t,Yt)}),R.on("mouseover",function(_t,Yt){d3.select(this).classed("hover",!0).style("stroke-width",_t.strokeWidth+2+"px").style("stroke-opacity",1),B.elementMouseover({label:_t.name,color:_t.color||rt(_t,Yt),values:_t.values,dimensions:J})}),R.on("mouseout",function(_t,Yt){d3.select(this).classed("hover",!1).style("stroke-width",_t.strokeWidth+"px").style("stroke-opacity",.7),B.elementMouseout({label:_t.name,index:Yt})}),R.on("mousemove",function(_t,Yt){B.elementMousemove()}),R.on("click",function(_t){B.elementClick({id:_t.id})});var wt=(E=S.selectAll(".dimension").data(J)).enter().append("g").attr("class","nv-parallelCoordinates dimension");E.attr("transform",function(_t){return"translate("+P(_t.key)+",0)"}),wt.append("g").attr("class","nv-axis"),wt.append("text").attr("class","nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").on("mouseover",function(_t,Yt){B.elementMouseover({label:_t.tooltip||_t.key,color:_t.color})}).on("mouseout",function(_t,Yt){B.elementMouseout({label:_t.tooltip})}).on("mousemove",function(_t,Yt){B.elementMousemove()}).call(at),wt.append("g").attr("class","nv-brushBackground"),E.exit().remove(),E.select(".nv-label").text(function(_t){return _t.key}),F(G);var Et=tt.filter(function(_t){return!v[_t].brush.empty()}),gt=Et.map(function(_t){return v[_t].brush.extent()}),N=$.slice(0);function lt(_t){return A(J.map(function(Yt){if(isNaN(_t.values[Yt.key])||isNaN(parseFloat(_t.values[Yt.key]))||D){var te=v[Yt.key].domain(),oe=v[Yt.key].range(),Wt=te[0]-(te[1]-te[0])/9;if(q.indexOf(Yt.key)<0){var Xt=d3.scale.linear().domain([Wt,te[1]]).range([x-12,oe[1]]);v[Yt.key].brush.y(Xt),q.push(Yt.key)}if(isNaN(_t.values[Yt.key])||isNaN(parseFloat(_t.values[Yt.key])))return[P(Yt.key),v[Yt.key](Wt)]}return void 0!==ut&&(q.length>0||D?(ut.style("display","inline"),Q.style("display","inline")):(ut.style("display","none"),Q.style("display","none"))),[P(Yt.key),v[Yt.key](_t.values[Yt.key])]}))}function F(_t){j.forEach(function(Yt){var te=v[Yt.dimension].brush.y().domain();Yt.hasOnlyNaN&&(Yt.extent[1]=(v[Yt.dimension].domain()[1]-te[0])*(Yt.extent[1]-Yt.extent[0])/(_[Yt.dimension]-Yt.extent[0])+te[0]),Yt.hasNaN&&(Yt.extent[0]=te[0]),_t&&v[Yt.dimension].brush.extent(Yt.extent)}),E.select(".nv-brushBackground").each(function(Yt){d3.select(this).call(v[Yt.key].brush)}).selectAll("rect").attr("x",-8).attr("width",16),Qt()}function ft(){!1===G&&(G=!0,F(!0))}function xt(){Et=tt.filter(function(_t){return!v[_t].brush.empty()}),gt=Et.map(function(_t){return v[_t].brush.extent()}),j=[],Et.forEach(function(_t,Yt){j[Yt]={dimension:_t,extent:gt[Yt],hasNaN:!1,hasOnlyNaN:!1}}),$=[],R.style("display",function(_t){var Yt=Et.every(function(te,oe){return!(!isNaN(_t.values[te])&&!isNaN(parseFloat(_t.values[te]))||gt[oe][0]!=v[te].brush.y().domain()[0])||gt[oe][0]<=_t.values[te]&&_t.values[te]<=gt[oe][1]&&!isNaN(parseFloat(_t.values[te]))});return Yt&&$.push(_t),Yt?null:"none"}),Qt(),B.brush({filters:j,active:$})}function Rt(){var _t=Et.length>0;j.forEach(function(Yt){Yt.extent[0]===v[Yt.dimension].brush.y().domain()[0]&&q.indexOf(Yt.dimension)>=0&&(Yt.hasNaN=!0),Yt.extent[1]<v[Yt.dimension].domain()[0]&&(Yt.hasOnlyNaN=!0)}),B.brushEnd($,_t)}function Qt(){E.select(".nv-axis").each(function(_t,Yt){var te=j.filter(function(oe){return oe.dimension==_t.key});Z[_t.key]=v[_t.key].domain(),0!=te.length&&G&&(Z[_t.key]=[],te[0].extent[1]>v[_t.key].domain()[0]&&(Z[_t.key]=[te[0].extent[1]]),te[0].extent[0]>=v[_t.key].domain()[0]&&Z[_t.key].push(te[0].extent[0])),d3.select(this).call(O.scale(v[_t.key]).tickFormat(_t.format).tickValues(Z[_t.key]))})}function ne(_t){var Yt=st[_t];return null==Yt?P(_t):Yt}$=[],R.style("display",function(_t){var Yt=Et.every(function(te,oe){return!(!isNaN(_t.values[te])&&!isNaN(parseFloat(_t.values[te]))||gt[oe][0]!=v[te].brush.y().domain()[0])||gt[oe][0]<=_t.values[te]&&_t.values[te]<=gt[oe][1]&&!isNaN(parseFloat(_t.values[te]))});return Yt&&$.push(_t),Yt?null:"none"}),(j.length>0||!f.utils.arrayEquals($,N))&&B.activeChanged($)}),b}return b.dispatch=B,b.options=f.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return u},set:function(I){u=I}},height:{get:function(){return w},set:function(I){w=I}},dimensionData:{get:function(){return W},set:function(I){W=I}},displayBrush:{get:function(){return G},set:function(I){G=I}},filters:{get:function(){return j},set:function(I){j=I}},active:{get:function(){return $},set:function(I){$=I}},lineTension:{get:function(){return z},set:function(I){z=I}},undefinedValuesLabel:{get:function(){return C},set:function(I){C=I}},dimensions:{get:function(){return W.map(function(I){return I.key})},set:function(I){f.deprecated("dimensions","use dimensionData instead"),I.forEach(0===W.length?function(it){W.push({key:it})}:function(it,ct){W[ct].key=it})}},dimensionNames:{get:function(){return W.map(function(I){return I.key})},set:function(I){f.deprecated("dimensionNames","use dimensionData instead"),tt=[],I.forEach(0===W.length?function(it){W.push({key:it})}:function(it,ct){W[ct].key=it})}},dimensionFormats:{get:function(){return W.map(function(I){return I.format})},set:function(I){f.deprecated("dimensionFormats","use dimensionData instead"),I.forEach(0===W.length?function(it){W.push({format:it})}:function(it,ct){W[ct].format=it})}},margin:{get:function(){return a},set:function(I){a.top=void 0!==I.top?I.top:a.top,a.right=void 0!==I.right?I.right:a.right,a.bottom=void 0!==I.bottom?I.bottom:a.bottom,a.left=void 0!==I.left?I.left:a.left}},color:{get:function(){return rt},set:function(I){rt=f.utils.getColor(I)}}}),f.utils.initOptions(b),b},f.models.parallelCoordinatesChart=function(){"use strict";var a=f.models.parallelCoordinates(),u=f.models.legend(),w=f.models.tooltip(),x=(f.models.tooltip(),{top:0,right:0,bottom:0,left:0}),P=null,v=null,C=null,W=!0,J=f.utils.defaultColor(),tt=f.utils.state(),G=[],rt=!0,j=null,$=null,st="undefined",q=d3.dispatch("dimensionsOrder","brushEnd","stateChange","changeState","renderEnd"),R=f.utils.renderWatch(q);function A(O){return R.reset(),R.models(a),O.each(function(B){var M=d3.select(this);f.utils.initSVG(M);var ct,I=f.utils.availableWidth(v,M,x),it=f.utils.availableHeight(C,M,x);if(A.update=function(){M.call(A)},A.container=this,tt.setter(function(O){return function(B){void 0!==B.active&&O.forEach(function(M,b){M.disabled=!B.active[b]})}}(G),A.update).getter(function(O){return function(){return{active:O.map(function(B){return!B.disabled})}}}(G)).update(),tt.disabled=G.map(function(Z){return!!Z.disabled}),(G=G.map(function(Z){return Z.disabled=!!Z.disabled,Z})).forEach(function(Z,dt){Z.originalPosition=isNaN(Z.originalPosition)?dt:Z.originalPosition,Z.currentPosition=isNaN(Z.currentPosition)?dt:Z.currentPosition}),!j)for(ct in j={},tt)j[ct]=tt[ct]instanceof Array?tt[ct].slice(0):tt[ct];if(!B||!B.length)return f.utils.noData(A,M),A;M.selectAll(".nv-noData").remove();var U=M.selectAll("g.nv-wrap.nv-parallelCoordinatesChart").data([B]),p=U.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinatesChart").append("g"),_=U.select("g");p.append("g").attr("class","nv-parallelCoordinatesWrap"),p.append("g").attr("class","nv-legendWrap"),_.select("rect").attr("width",I).attr("height",it>0?it:0),W?(u.width(I).color(function(Z){return"rgb(188,190,192)"}),_.select(".nv-legendWrap").datum(G.sort(function(Z,dt){return Z.originalPosition-dt.originalPosition})).call(u),!P&&u.height()!==x.top&&(x.top=u.height(),it=f.utils.availableHeight(C,M,x)),U.select(".nv-legendWrap").attr("transform","translate( 0 ,"+-x.top+")")):_.select(".nv-legendWrap").selectAll("*").remove(),U.attr("transform","translate("+x.left+","+x.top+")"),a.width(I).height(it).dimensionData(G).displayBrush(rt),_.select(".nv-parallelCoordinatesWrap ").datum(B).transition().call(a),a.dispatch.on("brushEnd",function(Z,dt){dt?(rt=!0,q.brushEnd(Z)):rt=!1}),u.dispatch.on("stateChange",function(Z){for(var dt in Z)tt[dt]=Z[dt];q.stateChange(tt),A.update()}),a.dispatch.on("dimensionsOrder",function(Z){G.sort(function(ht,h){return ht.currentPosition-h.currentPosition});var dt=!1;G.forEach(function(ht,h){ht.currentPosition=h,ht.currentPosition!==ht.originalPosition&&(dt=!0)}),q.dimensionsOrder(G,dt)}),q.on("changeState",function(Z){void 0!==Z.disabled&&(G.forEach(function(dt,ht){dt.disabled=Z.disabled[ht]}),tt.disabled=Z.disabled),A.update()})}),R.renderEnd("parraleleCoordinateChart immediate"),A}return w.contentGenerator(function(O){var B='<table><thead><tr><td class="legend-color-guide"><div style="background-color:'+O.color+'"></div></td><td><strong>'+O.key+"</strong></td></tr></thead>";return 0!==O.series.length&&(B+='<tbody><tr><td height ="10px"></td></tr>',O.series.forEach(function(M){B=B+'<tr><td class="legend-color-guide"><div style="background-color:'+M.color+'"></div></td><td class="key">'+M.key+'</td><td class="value">'+M.value+"</td></tr>"}),B+="</tbody>"),B+="</table>"}),a.dispatch.on("elementMouseover.tooltip",function(O){var B={key:O.label,color:O.color,series:[]};O.values&&(Object.keys(O.values).forEach(function(M){var I,b=O.dimensions.filter(function(it){return it.key===M})[0];b&&(I=isNaN(O.values[M])||isNaN(parseFloat(O.values[M]))?st:b.format(O.values[M]),B.series.push({idx:b.currentPosition,key:M,value:I,color:b.color}))}),B.series.sort(function(M,b){return M.idx-b.idx})),w.data(B).hidden(!1)}),a.dispatch.on("elementMouseout.tooltip",function(O){w.hidden(!0)}),a.dispatch.on("elementMousemove.tooltip",function(){w()}),A.dispatch=q,A.parallelCoordinates=a,A.legend=u,A.tooltip=w,A.options=f.utils.optionsFunc.bind(A),A._options=Object.create({},{width:{get:function(){return v},set:function(O){v=O}},height:{get:function(){return C},set:function(O){C=O}},showLegend:{get:function(){return W},set:function(O){W=O}},defaultState:{get:function(){return j},set:function(O){j=O}},dimensionData:{get:function(){return G},set:function(O){G=O}},displayBrush:{get:function(){return rt},set:function(O){rt=O}},noData:{get:function(){return $},set:function(O){$=O}},nanValue:{get:function(){return st},set:function(O){st=O}},margin:{get:function(){return x},set:function(O){void 0!==O.top&&(x.top=O.top,P=O.top),x.right=void 0!==O.right?O.right:x.right,x.bottom=void 0!==O.bottom?O.bottom:x.bottom,x.left=void 0!==O.left?O.left:x.left}},color:{get:function(){return J},set:function(O){J=f.utils.getColor(O),u.color(J),a.color(J)}}}),f.utils.inheritOptions(A,a),f.utils.initOptions(A),A},f.models.pie=function(){"use strict";var a={top:0,right:0,bottom:0,left:0},u=500,w=500,m=function(_){return _.x},x=function(_){return _.y},P=Math.floor(1e4*Math.random()),v=null,C=f.utils.defaultColor(),W=d3.format(",.2f"),J=!0,tt=!1,G="key",rt=.02,j=!1,$=!1,st=!1,q=!0,z=0,R=!1,V=!1,E=!1,A=!1,O=0,B=.5,M=250,b=[],I=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),it=[],ct=[],U=f.utils.renderWatch(I);function p(_){return U.reset(),_.each(function(D){var Z=u-a.left-a.right,dt=w-a.top-a.bottom,ht=Math.min(Z,dt)/2,h=[],S=[];if(v=d3.select(this),0===b.length)for(var at=ht-ht/10,ut=B*ht,Q=0;Q<D[0].length;Q++)h.push(at),S.push(ut);else q?(h=b.map(function(Wt){return(Wt.outer-Wt.outer/10)*ht}),S=b.map(function(Wt){return(Wt.inner-Wt.inner/10)*ht}),B=d3.min(b.map(function(Wt){return Wt.inner-Wt.inner/10}))):(h=b.map(function(Wt){return Wt.outer*ht}),S=b.map(function(Wt){return Wt.inner*ht}),B=d3.min(b.map(function(Wt){return Wt.inner})));f.utils.initSVG(v);var ot=v.selectAll(".nv-wrap.nv-pie").data(D),wt=ot.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+P).append("g"),Et=ot.select("g"),gt=wt.append("g").attr("class","nv-pie");for(wt.append("g").attr("class","nv-pieLabels"),ot.attr("transform","translate("+a.left+","+a.top+")"),Et.select(".nv-pie").attr("transform","translate("+Z/2+","+dt/2+")"),Et.select(".nv-pieLabels").attr("transform","translate("+Z/2+","+dt/2+")"),v.on("click",function(Wt,Xt){I.chartClick({data:Wt,index:Xt,pos:d3.event,id:P})}),it=[],ct=[],Q=0;Q<D[0].length;Q++){var N=d3.svg.arc().outerRadius(h[Q]),lt=d3.svg.arc().outerRadius(h[Q]+5);!1!==V&&(N.startAngle(V),lt.startAngle(V)),!1!==A&&(N.endAngle(A),lt.endAngle(A)),$&&(N.innerRadius(S[Q]),lt.innerRadius(S[Q])),N.cornerRadius&&O&&(N.cornerRadius(O),lt.cornerRadius(O)),it.push(N),ct.push(lt)}var F=d3.layout.pie().sort(null).value(function(Wt){return Wt.disabled?0:x(Wt)});F.padAngle&&E&&F.padAngle(E),$&&st&&(gt.append("text").attr("class","nv-pie-title"),ot.select(".nv-pie-title").style("text-anchor","middle").text(function(Wt){return st}).style("font-size",Math.min(Z,dt)*B*2/(st.length+2)+"px").attr("dy","0.35em").attr("transform",function(Wt,Xt){return"translate(0, "+z+")"}));var ft=ot.select(".nv-pie").selectAll(".nv-slice").data(F),xt=ot.select(".nv-pieLabels").selectAll(".nv-label").data(F);ft.exit().remove(),xt.exit().remove();var Rt=ft.enter().append("g");if(Rt.attr("class","nv-slice"),Rt.on("mouseover",function(Wt,Xt){d3.select(this).classed("hover",!0),q&&d3.select(this).select("path").transition().duration(70).attr("d",ct[Xt]),I.elementMouseover({data:Wt.data,index:Xt,color:d3.select(this).style("fill"),percent:(Wt.endAngle-Wt.startAngle)/(2*Math.PI)})}),Rt.on("mouseout",function(Wt,Xt){d3.select(this).classed("hover",!1),q&&d3.select(this).select("path").transition().duration(50).attr("d",it[Xt]),I.elementMouseout({data:Wt.data,index:Xt})}),Rt.on("mousemove",function(Wt,Xt){I.elementMousemove({data:Wt.data,index:Xt})}),Rt.on("click",function(Wt,Xt){I.elementClick({data:Wt.data,index:Xt,color:d3.select(this).style("fill"),event:d3.event,element:this})}),Rt.on("dblclick",function(Wt,Xt){I.elementDblClick({data:Wt.data,index:Xt,color:d3.select(this).style("fill")})}),ft.attr("fill",function(Wt,Xt){return C(Wt.data,Xt)}),ft.attr("stroke",function(Wt,Xt){return C(Wt.data,Xt)}),Rt.append("path").each(function(Wt){this._current=Wt}),ft.select("path").transition().duration(M).attr("d",function(Wt,Xt){return it[Xt](Wt)}).attrTween("d",function oe(Wt,Xt){Wt.endAngle=isNaN(Wt.endAngle)?0:Wt.endAngle,Wt.startAngle=isNaN(Wt.startAngle)?0:Wt.startAngle,$||(Wt.innerRadius=0);var re=d3.interpolate(this._current,Wt);return this._current=re(0),function(Pt){return it[Xt](re(Pt))}}),J){var Ct=[];for(Q=0;Q<D[0].length;Q++)Ct.push(it[Q]),tt?$&&(Ct[Q]=d3.svg.arc().outerRadius(it[Q].outerRadius()),!1!==V&&Ct[Q].startAngle(V),!1!==A&&Ct[Q].endAngle(A)):$||Ct[Q].innerRadius(0);xt.enter().append("g").classed("nv-label",!0).each(function(Wt,Xt){var re=d3.select(this);re.attr("transform",function(Pt,$t){if(R){Pt.outerRadius=h[$t]+10,Pt.innerRadius=h[$t]+15;var ie=(Pt.startAngle+Pt.endAngle)/2*(180/Math.PI);return(Pt.startAngle+Pt.endAngle)/2<Math.PI?ie-=90:ie+=90,"translate("+Ct[$t].centroid(Pt)+") rotate("+ie+")"}return Pt.outerRadius=ht+10,Pt.innerRadius=ht+15,"translate("+Ct[$t].centroid(Pt)+")"}),re.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),re.append("text").style("text-anchor",R?(Wt.startAngle+Wt.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var St={},_t=function(Wt){return 140*Math.floor(Wt[0]/140)+","+14*Math.floor(Wt[1]/14)},Yt=function(Wt){return(Wt.endAngle-Wt.startAngle)/(2*Math.PI)};xt.watchTransition(U,"pie labels").attr("transform",function(Wt,Xt){if(R){Wt.outerRadius=h[Xt]+10,Wt.innerRadius=h[Xt]+15;var re=(Wt.startAngle+Wt.endAngle)/2*(180/Math.PI);return(Wt.startAngle+Wt.endAngle)/2<Math.PI?re-=90:re+=90,"translate("+Ct[Xt].centroid(Wt)+") rotate("+re+")"}Wt.outerRadius=ht+10,Wt.innerRadius=ht+15;var Pt=Ct[Xt].centroid(Wt),$t=Yt(Wt);if(Wt.value&&$t>=rt){var ie=_t(Pt);St[ie]&&(Pt[1]-=14),St[_t(Pt)]=!0}return"translate("+Pt+")"}),xt.select(".nv-label text").style("text-anchor",function(Wt,Xt){return R?(Wt.startAngle+Wt.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(Wt,Xt){var re=Yt(Wt),Pt="";if(!Wt.value||re<rt)return"";if("function"==typeof G)Pt=G(Wt,Xt,{key:m(Wt.data),value:x(Wt.data),percent:W(re)});else switch(G){case"key":Pt=m(Wt.data);break;case"value":Pt=W(x(Wt.data));break;case"percent":Pt=d3.format("%")(re)}return Pt}),j&&xt.each(function(Wt,Xt){if(this.getBBox){var re=this.getBBox(),Pt=Ct[Xt].centroid(Wt),$t={x:Pt[0]+re.x,y:Pt[1]+re.y},ie={x:$t.x+re.width,y:$t.y},xe={x:$t.x,y:$t.y+re.height},de={x:$t.x+re.width,y:$t.y+re.height};Wt.visible=f.utils.pointIsInArc($t,Wt,N)&&f.utils.pointIsInArc(ie,Wt,N)&&f.utils.pointIsInArc(xe,Wt,N)&&f.utils.pointIsInArc(de,Wt,N)}}).style("display",function(Wt){return Wt.visible?null:"none"})}}),U.renderEnd("pie immediate"),p}return p.dispatch=I,p.options=f.utils.optionsFunc.bind(p),p._options=Object.create({},{arcsRadius:{get:function(){return b},set:function(_){b=_}},width:{get:function(){return u},set:function(_){u=_}},height:{get:function(){return w},set:function(_){w=_}},showLabels:{get:function(){return J},set:function(_){J=_}},title:{get:function(){return st},set:function(_){st=_}},titleOffset:{get:function(){return z},set:function(_){z=_}},labelThreshold:{get:function(){return rt},set:function(_){rt=_}},hideOverlapLabels:{get:function(){return j},set:function(_){j=_}},valueFormat:{get:function(){return W},set:function(_){W=_}},x:{get:function(){return m},set:function(_){m=_}},id:{get:function(){return P},set:function(_){P=_}},endAngle:{get:function(){return A},set:function(_){A=_}},startAngle:{get:function(){return V},set:function(_){V=_}},padAngle:{get:function(){return E},set:function(_){E=_}},cornerRadius:{get:function(){return O},set:function(_){O=_}},donutRatio:{get:function(){return B},set:function(_){B=_}},labelsOutside:{get:function(){return tt},set:function(_){tt=_}},labelSunbeamLayout:{get:function(){return R},set:function(_){R=_}},donut:{get:function(){return $},set:function(_){$=_}},growOnHover:{get:function(){return q},set:function(_){q=_}},pieLabelsOutside:{get:function(){return tt},set:function(_){tt=_,f.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return tt},set:function(_){tt=_,f.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return W},set:function(_){W=_,f.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return a},set:function(_){a.top=void 0!==_.top?_.top:a.top,a.right=void 0!==_.right?_.right:a.right,a.bottom=void 0!==_.bottom?_.bottom:a.bottom,a.left=void 0!==_.left?_.left:a.left}},duration:{get:function(){return M},set:function(_){U.reset(M=_)}},y:{get:function(){return x},set:function(_){x=d3.functor(_)}},color:{get:function(){return C},set:function(_){C=f.utils.getColor(_)}},labelType:{get:function(){return G},set:function(_){G=_||"key"}}}),f.utils.initOptions(p),p},f.models.pieChart=function(){"use strict";var a=f.models.pie(),u=f.models.legend(),w=f.models.tooltip(),m={top:30,right:20,bottom:20,left:20},x=null,P=null,v=null,C=!1,W=!0,J="top",tt=f.utils.defaultColor(),G=f.utils.state(),rt=null,j=null,$=250,st=d3.dispatch("stateChange","changeState","renderEnd");w.duration(0).headerEnabled(!1).valueFormatter(function(E,A){return a.valueFormat()(E,A)});var q=f.utils.renderWatch(st);function V(E){return q.reset(),q.models(a),E.each(function(A){var O=d3.select(this);f.utils.initSVG(O);var I,M=f.utils.availableWidth(P,O,m),b=f.utils.availableHeight(v,O,m);if(V.update=function(){O.transition().call(V)},V.container=this,G.setter(function(E){return function(A){void 0!==A.active&&E.forEach(function(O,B){O.disabled=!A.active[B]})}}(A),V.update).getter(function(E){return function(){return{active:E.map(function(A){return!A.disabled})}}}(A)).update(),G.disabled=A.map(function(D){return!!D.disabled}),!rt)for(I in rt={},G)rt[I]=G[I]instanceof Array?G[I].slice(0):G[I];if(!A||!A.length)return f.utils.noData(V,O),V;O.selectAll(".nv-noData").remove();var it=O.selectAll("g.nv-wrap.nv-pieChart").data([A]),ct=it.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),U=it.select("g");if(ct.append("g").attr("class","nv-pieWrap"),ct.append("g").attr("class","nv-legendWrap"),W)if("top"===J)u.width(M).key(a.x()),it.select(".nv-legendWrap").datum(A).call(u),!x&&u.height()!==m.top&&(m.top=u.height(),b=f.utils.availableHeight(v,O,m)),it.select(".nv-legendWrap").attr("transform","translate(0,"+-m.top+")");else if("right"===J){var p=f.models.legend().width();M/2<p&&(p=M/2),u.height(b).key(a.x()),u.width(p),M-=u.width(),it.select(".nv-legendWrap").datum(A).call(u).attr("transform","translate("+M+",0)")}else"bottom"===J&&(u.width(M).key(a.x()),it.select(".nv-legendWrap").datum(A).call(u),m.bottom=u.height(),b=f.utils.availableHeight(v,O,m),it.select(".nv-legendWrap").attr("transform","translate(0,"+b+")"));else U.select(".nv-legendWrap").selectAll("*").remove();it.attr("transform","translate("+m.left+","+m.top+")"),a.width(M).height(b);var _=U.select(".nv-pieWrap").datum([A]);d3.transition(_).call(a),u.dispatch.on("stateChange",function(D){for(var Z in D)G[Z]=D[Z];st.stateChange(G),V.update()}),st.on("changeState",function(D){void 0!==D.disabled&&(A.forEach(function(Z,dt){Z.disabled=D.disabled[dt]}),G.disabled=D.disabled),V.update()})}),q.renderEnd("pieChart immediate"),V}return a.dispatch.on("elementMouseover.tooltip",function(E){E.series={key:V.x()(E.data),value:V.y()(E.data),color:E.color,percent:E.percent},C||(delete E.percent,delete E.series.percent),w.data(E).hidden(!1)}),a.dispatch.on("elementMouseout.tooltip",function(E){w.hidden(!0)}),a.dispatch.on("elementMousemove.tooltip",function(E){w()}),V.legend=u,V.dispatch=st,V.pie=a,V.tooltip=w,V.options=f.utils.optionsFunc.bind(V),V._options=Object.create({},{width:{get:function(){return P},set:function(E){P=E}},height:{get:function(){return v},set:function(E){v=E}},noData:{get:function(){return j},set:function(E){j=E}},showTooltipPercent:{get:function(){return C},set:function(E){C=E}},showLegend:{get:function(){return W},set:function(E){W=E}},legendPosition:{get:function(){return J},set:function(E){J=E}},defaultState:{get:function(){return rt},set:function(E){rt=E}},color:{get:function(){return tt},set:function(E){u.color(tt=E),a.color(tt)}},duration:{get:function(){return $},set:function(E){q.reset($=E),a.duration($)}},margin:{get:function(){return m},set:function(E){void 0!==E.top&&(m.top=E.top,x=E.top),m.right=void 0!==E.right?E.right:m.right,m.bottom=void 0!==E.bottom?E.bottom:m.bottom,m.left=void 0!==E.left?E.left:m.left}}}),f.utils.inheritOptions(V,a),f.utils.initOptions(V),V},f.models.sankey=function(){"use strict";var a={},u=24,w=8,m=[1,1],x=[],P=[],v=!0,C=function(E){(function G(){x.forEach(function(E){E.sourceLinks=[],E.targetLinks=[]}),P.forEach(function(E){var A=E.source,O=E.target;"number"==typeof A&&(A=E.source=x[E.source]),"number"==typeof O&&(O=E.target=x[E.target]),A.sourceLinks.push(E),O.targetLinks.push(E)})})(),function rt(){x.forEach(function(E){E.value=Math.max(d3.sum(E.sourceLinks,V),d3.sum(E.targetLinks,V))})}(),function j(){for(var A,E=x,O=0;E.length&&O<x.length;)A=[],E.forEach(function(B){B.x=O,B.dx=u,B.sourceLinks.forEach(function(M){A.indexOf(M.target)<0&&A.push(M.target)})}),E=A,++O;v&&function st(E){x.forEach(function(A){A.sourceLinks.length||(A.x=E-1)})}(O),function q(E){x.forEach(function(A){A.x*=E})}((m[0]-u)/(O-1))}(),function z(E){var A=d3.nest().key(function(ct){return ct.x}).sortKeys(d3.ascending).entries(x).map(function(ct){return ct.values});(function B(){var ct=d3.min(A,function(U){return(m[1]-(U.length-1)*w)/d3.sum(U,V)});A.forEach(function(U){U.forEach(function(p,_){p.y=_,p.dy=p.value*ct})}),P.forEach(function(U){U.dy=U.value*ct})})(),I(),R();for(var O=1;E>0;--E)b(O*=.99),I(),R(),M(O),I(),R();function M(ct){function U(p){return(p.source.y+p.sy+p.dy/2)*p.value}A.forEach(function(p,_){p.forEach(function(D){if(D.targetLinks.length){var Z=d3.sum(D.targetLinks,U)/d3.sum(D.targetLinks,V);D.y+=(Z-tt(D))*ct}})})}function b(ct){function U(p){return(p.target.y+p.ty+p.dy/2)*p.value}A.slice().reverse().forEach(function(p){p.forEach(function(_){if(_.sourceLinks.length){var D=d3.sum(_.sourceLinks,U)/d3.sum(_.sourceLinks,V);_.y+=(D-tt(_))*ct}})})}function I(){A.forEach(function(ct){var U,p,Z,_=0,D=ct.length;for(ct.sort(it),Z=0;Z<D;++Z)(p=_-(U=ct[Z]).y)>0&&(U.y+=p),_=U.y+U.dy+w;if((p=_-w-m[1])>0)for(_=U.y-=p,Z=D-2;Z>=0;--Z)(p=(U=ct[Z]).y+U.dy+w-_)>0&&(U.y-=p),_=U.y})}function it(ct,U){return ct.y-U.y}}(E)},J=function(){var E=.5;function A(O){var B=O.source.x+O.source.dx,M=O.target.x,b=d3.interpolateNumber(B,M),I=b(E),it=b(1-E),ct=O.source.y+O.sy+O.dy/2,U=O.target.y+O.ty+O.dy/2;return"M"+B+","+ct+"C"+I+","+ct+" "+it+","+U+" "+M+","+U}return A.curvature=function(O){return arguments.length?(E=+O,A):E},A},tt=function(E){return E.y+E.dy/2};function R(){function E(O,B){return O.source.y-B.source.y}function A(O,B){return O.target.y-B.target.y}x.forEach(function(O){O.sourceLinks.sort(A),O.targetLinks.sort(E)}),x.forEach(function(O){var B=0,M=0;O.sourceLinks.forEach(function(b){b.sy=B,B+=b.dy}),O.targetLinks.forEach(function(b){b.ty=M,M+=b.dy})})}function V(E){return E.value}return a.options=f.utils.optionsFunc.bind(a),a._options=Object.create({},{nodeWidth:{get:function(){return u},set:function(E){u=+E}},nodePadding:{get:function(){return w},set:function(E){w=E}},nodes:{get:function(){return x},set:function(E){x=E}},links:{get:function(){return P},set:function(E){P=E}},size:{get:function(){return m},set:function(E){m=E}},sinksRight:{get:function(){return v},set:function(E){v=E}},layout:{get:function(){C(32)},set:function(E){C(E)}},relayout:{get:function(){R()},set:function(E){}},center:{get:function(){return tt()},set:function(E){"function"==typeof E&&(tt=E)}},link:{get:function(){return J()},set:function(E){return"function"==typeof E&&(J=E),J()}}}),f.utils.initOptions(a),a},f.models.sankeyChart=function(){"use strict";var a={top:5,right:0,bottom:5,left:0},u=f.models.sankey(),w=600,m=400,x=36,P=40,v="units",C=void 0,W=d3.format(",.0f"),J=function(z){return W(z)+" "+v},tt=d3.scale.category20(),G=function(z){return z.source.name+" \u2192 "+z.target.name+"\n"+J(z.value)},rt=function(z){return z.color=tt(z.name.replace(/ .*/,""))},j=function(z){return d3.rgb(z.color).darker(2)},$=function(z){return z.name+"\n"+J(z.value)},st=function(z,R){z.append("text").attr("x",0).attr("y",0).attr("class","nvd3-sankey-chart-error").attr("text-anchor","middle").text(R)};function q(z){return z.each(function(R){var V={nodes:[{node:1,name:"Test 1"},{node:2,name:"Test 2"},{node:3,name:"Test 3"},{node:4,name:"Test 4"},{node:5,name:"Test 5"},{node:6,name:"Test 6"}],links:[{source:0,target:1,value:2295},{source:0,target:5,value:1199},{source:1,target:2,value:1119},{source:1,target:5,value:1176},{source:2,target:3,value:487},{source:2,target:5,value:632},{source:3,target:4,value:301},{source:3,target:5,value:186}]},E=!1,A=!1;if(("object"==typeof R.nodes&&R.nodes.length)>=0&&("object"==typeof R.links&&R.links.length)>=0&&(E=!0),R.nodes&&R.nodes.length>0&&R.links&&R.links.length>0&&(A=!0),!E)return console.error("NVD3 Sankey chart error:","invalid data format for",R),console.info("Valid data format is: ",V,JSON.stringify(V)),st(z,"Error loading chart, data is invalid"),!1;if(!A)return st(z,"No data available"),!1;var O=z.append("svg").attr("width",w).attr("height",m).append("g").attr("class","nvd3 nv-wrap nv-sankeyChart");u.nodeWidth(x).nodePadding(P).size([w,m]);var B=u.link();u.nodes(R.nodes).links(R.links).layout(32).center(C);var M=O.append("g").selectAll(".link").data(R.links).enter().append("path").attr("class","link").attr("d",B).style("stroke-width",function(it){return Math.max(1,it.dy)}).sort(function(it,ct){return ct.dy-it.dy});M.append("title").text(G);var b=O.append("g").selectAll(".node").data(R.nodes).enter().append("g").attr("class","node").attr("transform",function(it){return"translate("+it.x+","+it.y+")"}).call(d3.behavior.drag().origin(function(it){return it}).on("dragstart",function(){this.parentNode.appendChild(this)}).on("drag",function I(it){d3.select(this).attr("transform","translate("+it.x+","+(it.y=Math.max(0,Math.min(m-it.dy,d3.event.y)))+")"),u.relayout(),M.attr("d",B)}));b.append("rect").attr("height",function(it){return it.dy}).attr("width",u.nodeWidth()).style("fill",rt).style("stroke",j).append("title").text($),b.append("text").attr("x",-6).attr("y",function(it){return it.dy/2}).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(function(it){return it.name}).filter(function(it){return it.x<w/2}).attr("x",6+u.nodeWidth()).attr("text-anchor","start")}),q}return q.options=f.utils.optionsFunc.bind(q),q._options=Object.create({},{units:{get:function(){return v},set:function(z){v=z}},width:{get:function(){return w},set:function(z){w=z}},height:{get:function(){return m},set:function(z){m=z}},format:{get:function(){return J},set:function(z){J=z}},linkTitle:{get:function(){return G},set:function(z){G=z}},nodeWidth:{get:function(){return x},set:function(z){x=z}},nodePadding:{get:function(){return P},set:function(z){P=z}},center:{get:function(){return C},set:function(z){C=z}},margin:{get:function(){return a},set:function(z){a.top=void 0!==z.top?z.top:a.top,a.right=void 0!==z.right?z.right:a.right,a.bottom=void 0!==z.bottom?z.bottom:a.bottom,a.left=void 0!==z.left?z.left:a.left}},nodeStyle:{get:function(){return{}},set:function(z){rt=void 0!==z.fillColor?z.fillColor:rt,j=void 0!==z.strokeColor?z.strokeColor:j,$=void 0!==z.title?z.title:$}}}),f.utils.initOptions(q),q},f.models.scatter=function(){"use strict";var S,at,ut,Q,ot,yt,wt,Et,a={top:0,right:0,bottom:0,left:0},u=null,w=null,m=f.utils.defaultColor(),x=null,P=Math.floor(1e5*Math.random()),v=null,C=d3.scale.linear(),W=d3.scale.linear(),J=d3.scale.linear(),tt=function(Ct){return Ct.x},G=function(Ct){return Ct.y},rt=function(Ct){return Ct.size||1},j=function(Ct){return Ct.shape||"circle"},$=[],st=[],q=[],z=!0,R=function(Ct){return!Ct.notActive},V=!1,E=.1,A=!1,O=!0,B=!1,M=function(){return 25},b=null,I=null,it=null,ct=null,U=null,p=null,_=!1,D=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),Z=!0,dt=250,ht=300,h=!1,gt=!1,N=f.utils.renderWatch(D,dt),lt=[16,256],F={};function ft(Ct){var St;return F[St=Ct[0].series+":"+Ct[1]]=F[St]||{}}function xt(Ct){delete F[Ct[0].series+":"+Ct[1]]}function Rt(Ct){var St,Dt,ne,_t=ft(Ct),Yt=!1;for(St=1;St<arguments.length;St+=2)Dt=arguments[St],ne=arguments[St+1](Ct[0],Ct[1]),(_t[Dt]!==ne||!_t.hasOwnProperty(Dt))&&(_t[Dt]=ne,Yt=!0);return Yt}function Qt(Ct){return N.reset(),Ct.each(function(St){v=d3.select(this);var Dt=f.utils.availableWidth(u,v,a),ne=f.utils.availableHeight(w,v,a);f.utils.initSVG(v),St.forEach(function(zt,ce){zt.values.forEach(function(Mt){Mt.series=ce})});var _t="function"==typeof Qt.yScale().base,Yt=b&&I&&U?[]:d3.merge(St.map(function(zt){return zt.values.map(function(ce,Mt){return{x:tt(ce,Mt),y:G(ce,Mt),size:rt(ce,Mt)}})}));if(C.domain(b||d3.extent(Yt.map(function(zt){return zt.x}).concat($))),C.range(V&&St[0]?it||[(Dt*E+Dt)/(2*St[0].values.length),Dt-Dt*(1+E)/(2*St[0].values.length)]:it||[0,Dt]),_t){var te=d3.min(Yt.map(function(zt){if(0!==zt.y)return zt.y}));W.clamp(!0).domain(I||d3.extent(Yt.map(function(zt){return 0!==zt.y?zt.y:.1*te}).concat(st))).range(ct||[ne,0])}else W.domain(I||d3.extent(Yt.map(function(zt){return zt.y}).concat(st))).range(ct||[ne,0]);J.domain(U||d3.extent(Yt.map(function(zt){return zt.size}).concat(q))).range(p||lt),_=C.domain()[0]===C.domain()[1]||W.domain()[0]===W.domain()[1],C.domain()[0]===C.domain()[1]&&(C.domain()[0]?C.domain([C.domain()[0]-.01*C.domain()[0],C.domain()[1]+.01*C.domain()[1]]):C.domain([-1,1])),W.domain()[0]===W.domain()[1]&&(W.domain()[0]?W.domain([W.domain()[0]-.01*W.domain()[0],W.domain()[1]+.01*W.domain()[1]]):W.domain([-1,1])),isNaN(C.domain()[0])&&C.domain([-1,1]),isNaN(W.domain()[0])&&W.domain([-1,1]),S=S||C,at=at||W,ut=ut||J;var oe=C(1)!==S(1)||W(1)!==at(1)||J(1)!==ut(1);wt=wt||w;var Wt=(yt=yt||u)!==u||wt!==w,Xt=(Q=Q||[])[0]!==C.domain()[0]||Q[1]!==C.domain()[1];Q=C.domain(),ot=ot||[],Xt=Xt||ot[0]!==W.domain()[0]||ot[1]!==W.domain()[1],ot=W.domain();var re=v.selectAll("g.nv-wrap.nv-scatter").data([St]),Pt=re.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+P),$t=Pt.append("defs"),ie=Pt.append("g"),xe=re.select("g");function de(){if(gt=!1,!z)return!1;if(!0===Z){re.select(".nv-point-paths").selectAll("path").remove();var zt=d3.merge(St.map(function(Bt,Zt){return Bt.values.map(function(pe,ae){var Jt=tt(pe,ae),he=G(pe,ae);return[f.utils.NaNtoZero(C(Jt))+1e-4*Math.random(),f.utils.NaNtoZero(W(he))+1e-4*Math.random(),Zt,ae,pe]}).filter(function(pe,ae){return R(pe[4],ae)})}));if(0==zt.length)return!1;zt.length<3&&(zt.push([C.range()[0]-20,W.range()[0]-20,null,null]),zt.push([C.range()[1]+20,W.range()[1]+20,null,null]),zt.push([C.range()[0]-20,W.range()[0]+20,null,null]),zt.push([C.range()[1]+20,W.range()[1]-20,null,null]));var ce=d3.geom.polygon([[-10,-10],[-10,w+10],[u+10,w+10],[u+10,-10]]);zt=zt.sort(function(Bt,Zt){return Bt[0]-Zt[0]||Bt[1]-Zt[1]});for(var Ot=0;Ot<zt.length-1;)Math.abs(zt[Ot][0]-zt[Ot+1][0])<1e-4&&Math.abs(zt[Ot][1]-zt[Ot+1][1])<1e-4?zt.splice(Ot+1,1):Ot++;var jt=d3.geom.voronoi(zt).map(function(Bt,Zt){return{data:ce.clip(Bt),series:zt[Zt][2],point:zt[Zt][3]}}),ee=re.select(".nv-point-paths").selectAll("path").data(jt),fe=ee.enter().append("svg:path").attr("d",function(Bt){return Bt&&Bt.data&&0!==Bt.data.length?"M"+Bt.data.join(",")+"Z":"M 0 0"}).attr("id",function(Bt,Zt){return"nv-path-"+Zt}).attr("clip-path",function(Bt,Zt){return"url(#nv-clip-"+P+"-"+Zt+")"});B&&fe.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200)),O&&(re.select(".nv-point-clips").selectAll("*").remove(),re.select(".nv-point-clips").selectAll("clipPath").data(zt).enter().append("svg:clipPath").attr("id",function(Bt,Zt){return"nv-clip-"+P+"-"+Zt}).append("svg:circle").attr("cx",function(Bt){return Bt[0]}).attr("cy",function(Bt){return Bt[1]}).attr("r",M));var se=function(Bt,Zt,pe){if(gt)return 0;var ae=St[Zt.series];if(void 0!==ae){var Jt=ae.values[Zt.point];Jt.color=m(ae,Zt.series),Jt.x=tt(Jt),Jt.y=G(Jt);var he=v.node().getBoundingClientRect(),tr=window.pageYOffset||document.documentElement.scrollTop,Bn=window.pageXOffset||document.documentElement.scrollLeft;pe({point:Jt,series:ae,pos:{left:C(tt(Jt,Zt.point))+he.left+Bn+a.left+10,top:W(G(Jt,Zt.point))+he.top+tr+a.top+10},relativePos:[C(tt(Jt,Zt.point))+a.left,W(G(Jt,Zt.point))+a.top],seriesIndex:Zt.series,pointIndex:Zt.point,event:d3.event,element:Bt})}};ee.on("click",function(Bt){se(this,Bt,D.elementClick)}).on("dblclick",function(Bt){se(this,Bt,D.elementDblClick)}).on("mouseover",function(Bt){se(this,Bt,D.elementMouseover)}).on("mouseout",function(Bt,Zt){se(this,Bt,D.elementMouseout)})}else re.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(Bt,Zt){if(gt||!St[Bt.series])return 0;var pe=St[Bt.series],ae=pe.values[Zt];D.elementClick({point:ae,series:pe,pos:[C(tt(ae,Zt))+a.left,W(G(ae,Zt))+a.top],relativePos:[C(tt(ae,Zt))+a.left,W(G(ae,Zt))+a.top],seriesIndex:Bt.series,pointIndex:Zt,event:d3.event,element:this})}).on("dblclick",function(Bt,Zt){if(gt||!St[Bt.series])return 0;var pe=St[Bt.series],ae=pe.values[Zt];D.elementDblClick({point:ae,series:pe,pos:[C(tt(ae,Zt))+a.left,W(G(ae,Zt))+a.top],relativePos:[C(tt(ae,Zt))+a.left,W(G(ae,Zt))+a.top],seriesIndex:Bt.series,pointIndex:Zt})}).on("mouseover",function(Bt,Zt){if(gt||!St[Bt.series])return 0;var pe=St[Bt.series],ae=pe.values[Zt];D.elementMouseover({point:ae,series:pe,pos:[C(tt(ae,Zt))+a.left,W(G(ae,Zt))+a.top],relativePos:[C(tt(ae,Zt))+a.left,W(G(ae,Zt))+a.top],seriesIndex:Bt.series,pointIndex:Zt,color:m(Bt,Zt)})}).on("mouseout",function(Bt,Zt){if(gt||!St[Bt.series])return 0;var pe=St[Bt.series],ae=pe.values[Zt];D.elementMouseout({point:ae,series:pe,pos:[C(tt(ae,Zt))+a.left,W(G(ae,Zt))+a.top],relativePos:[C(tt(ae,Zt))+a.left,W(G(ae,Zt))+a.top],seriesIndex:Bt.series,pointIndex:Zt,color:m(Bt,Zt)})})}re.classed("nv-single-point",_),ie.append("g").attr("class","nv-groups"),ie.append("g").attr("class","nv-point-paths"),Pt.append("g").attr("class","nv-point-clips"),re.attr("transform","translate("+a.left+","+a.top+")"),$t.append("clipPath").attr("id","nv-edge-clip-"+P).append("rect").attr("transform","translate( -10, -10)"),re.select("#nv-edge-clip-"+P+" rect").attr("width",Dt+20).attr("height",ne>0?ne+20:0),xe.attr("clip-path",A?"url(#nv-edge-clip-"+P+")":""),gt=!0;var be=re.select(".nv-groups").selectAll(".nv-group").data(function(zt){return zt},function(zt){return zt.key});be.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),be.exit().remove(),be.attr("class",function(zt,ce){return(zt.classed||"")+" nv-group nv-series-"+ce}).classed("nv-noninteractive",!z).classed("hover",function(zt){return zt.hover}),be.watchTransition(N,"scatter: groups").style("fill",function(zt,ce){return m(zt,ce)}).style("stroke",function(zt,ce){return zt.pointBorderColor||x||m(zt,ce)}).style("stroke-opacity",1).style("fill-opacity",.5);var Ce=be.selectAll("path.nv-point").data(function(zt){return zt.values.map(function(ce,Mt){return[ce,Mt]}).filter(function(ce,Mt){return R(ce[0],Mt)})});if(Ce.enter().append("path").attr("class",function(zt){return"nv-point nv-point-"+zt[1]}).style("fill",function(zt){return zt.color}).style("stroke",function(zt){return zt.color}).attr("transform",function(zt){return"translate("+f.utils.NaNtoZero(S(tt(zt[0],zt[1])))+","+f.utils.NaNtoZero(at(G(zt[0],zt[1])))+")"}).attr("d",f.utils.symbol().type(function(zt){return j(zt[0])}).size(function(zt){return J(rt(zt[0],zt[1]))})),Ce.exit().each(xt).remove(),be.exit().selectAll("path.nv-point").watchTransition(N,"scatter exit").attr("transform",function(zt){return"translate("+f.utils.NaNtoZero(C(tt(zt[0],zt[1])))+","+f.utils.NaNtoZero(W(G(zt[0],zt[1])))+")"}).remove(),Ce.filter(function(zt){return Rt(zt,"x",tt,"y",G)||oe||Wt||Xt}).watchTransition(N,"scatter points").attr("transform",function(zt){return"translate("+f.utils.NaNtoZero(C(tt(zt[0],zt[1])))+","+f.utils.NaNtoZero(W(G(zt[0],zt[1])))+")"}),Ce.filter(function(zt){return Rt(zt,"shape",j,"size",rt)||oe||Wt||Xt}).watchTransition(N,"scatter points").attr("d",f.utils.symbol().type(function(zt){return j(zt[0])}).size(function(zt){return J(rt(zt[0],zt[1]))})),h){var we=be.selectAll(".nv-label").data(function(zt){return zt.values.map(function(ce,Mt){return[ce,Mt]}).filter(function(ce,Mt){return R(ce[0],Mt)})});we.enter().append("text").style("fill",function(zt,ce){return zt.color}).style("stroke-opacity",0).style("fill-opacity",1).attr("transform",function(zt){return"translate("+(f.utils.NaNtoZero(S(tt(zt[0],zt[1])))+Math.sqrt(J(rt(zt[0],zt[1]))/Math.PI)+2)+","+f.utils.NaNtoZero(at(G(zt[0],zt[1])))+")"}).text(function(zt,ce){return zt[0].label}),we.exit().remove(),be.exit().selectAll("path.nv-label").watchTransition(N,"scatter exit").attr("transform",function(zt){return"translate("+(f.utils.NaNtoZero(C(tt(zt[0],zt[1])))+Math.sqrt(J(rt(zt[0],zt[1]))/Math.PI)+2)+","+f.utils.NaNtoZero(W(G(zt[0],zt[1])))+")"}).remove(),we.each(function(zt){d3.select(this).classed("nv-label",!0).classed("nv-label-"+zt[1],!1).classed("hover",!1)}),we.watchTransition(N,"scatter labels").attr("transform",function(zt){return"translate("+(f.utils.NaNtoZero(C(tt(zt[0],zt[1])))+Math.sqrt(J(rt(zt[0],zt[1]))/Math.PI)+2)+","+f.utils.NaNtoZero(W(G(zt[0],zt[1])))+")"})}ht?(clearTimeout(Et),Et=setTimeout(de,ht)):de(),S=C.copy(),at=W.copy(),ut=J.copy(),yt=u,wt=w}),N.renderEnd("scatter immediate"),Qt}return Qt.dispatch=D,Qt.options=f.utils.optionsFunc.bind(Qt),Qt._calls=new function(){this.clearHighlights=function(){return f.dom.write(function(){v.selectAll(".nv-point.hover").classed("hover",!1)}),null},this.highlightPoint=function(Ct,St,Dt){f.dom.write(function(){v.select(".nv-groups").selectAll(".nv-series-"+Ct).selectAll(".nv-point-"+St).classed("hover",Dt)})}},D.on("elementMouseover.point",function(Ct){z&&Qt._calls.highlightPoint(Ct.seriesIndex,Ct.pointIndex,!0)}),D.on("elementMouseout.point",function(Ct){z&&Qt._calls.highlightPoint(Ct.seriesIndex,Ct.pointIndex,!1)}),Qt._options=Object.create({},{width:{get:function(){return u},set:function(Ct){u=Ct}},height:{get:function(){return w},set:function(Ct){w=Ct}},xScale:{get:function(){return C},set:function(Ct){C=Ct}},yScale:{get:function(){return W},set:function(Ct){W=Ct}},pointScale:{get:function(){return J},set:function(Ct){J=Ct}},xDomain:{get:function(){return b},set:function(Ct){b=Ct}},yDomain:{get:function(){return I},set:function(Ct){I=Ct}},pointDomain:{get:function(){return U},set:function(Ct){U=Ct}},xRange:{get:function(){return it},set:function(Ct){it=Ct}},yRange:{get:function(){return ct},set:function(Ct){ct=Ct}},pointRange:{get:function(){return p},set:function(Ct){p=Ct}},forceX:{get:function(){return $},set:function(Ct){$=Ct}},forceY:{get:function(){return st},set:function(Ct){st=Ct}},forcePoint:{get:function(){return q},set:function(Ct){q=Ct}},interactive:{get:function(){return z},set:function(Ct){z=Ct}},pointActive:{get:function(){return R},set:function(Ct){R=Ct}},padDataOuter:{get:function(){return E},set:function(Ct){E=Ct}},padData:{get:function(){return V},set:function(Ct){V=Ct}},clipEdge:{get:function(){return A},set:function(Ct){A=Ct}},clipVoronoi:{get:function(){return O},set:function(Ct){O=Ct}},clipRadius:{get:function(){return M},set:function(Ct){M=Ct}},showVoronoi:{get:function(){return B},set:function(Ct){B=Ct}},id:{get:function(){return P},set:function(Ct){P=Ct}},interactiveUpdateDelay:{get:function(){return ht},set:function(Ct){ht=Ct}},showLabels:{get:function(){return h},set:function(Ct){h=Ct}},pointBorderColor:{get:function(){return x},set:function(Ct){x=Ct}},x:{get:function(){return tt},set:function(Ct){tt=d3.functor(Ct)}},y:{get:function(){return G},set:function(Ct){G=d3.functor(Ct)}},pointSize:{get:function(){return rt},set:function(Ct){rt=d3.functor(Ct)}},pointShape:{get:function(){return j},set:function(Ct){j=d3.functor(Ct)}},margin:{get:function(){return a},set:function(Ct){a.top=void 0!==Ct.top?Ct.top:a.top,a.right=void 0!==Ct.right?Ct.right:a.right,a.bottom=void 0!==Ct.bottom?Ct.bottom:a.bottom,a.left=void 0!==Ct.left?Ct.left:a.left}},duration:{get:function(){return dt},set:function(Ct){N.reset(dt=Ct)}},color:{get:function(){return m},set:function(Ct){m=f.utils.getColor(Ct)}},useVoronoi:{get:function(){return Z},set:function(Ct){!1===(Z=Ct)&&(O=!1)}}}),f.utils.initOptions(Qt),Qt},f.models.scatterChart=function(){"use strict";var a=f.models.scatter(),u=f.models.axis(),w=f.models.axis(),m=f.models.legend(),x=f.models.distribution(),P=f.models.distribution(),v=f.models.tooltip(),C={top:30,right:20,bottom:50,left:75},W=null,J=null,tt=null,G=null,rt=f.utils.defaultColor(),j=a.xScale(),$=a.yScale(),st=!1,q=!1,z=!0,R=!0,V=!0,E=!1,A=f.utils.state(),O=null,B=d3.dispatch("stateChange","changeState","renderEnd"),M=null,b=250,I=!1;a.xScale(j).yScale($),u.orient("bottom").tickPadding(10),w.orient(E?"right":"left").tickPadding(10),x.axis("x"),P.axis("y"),v.headerFormatter(function(Z,dt){return u.tickFormat()(Z,dt)}).valueFormatter(function(Z,dt){return w.tickFormat()(Z,dt)});var U=f.utils.renderWatch(B,b);function D(Z){return U.reset(),U.models(a),R&&U.models(u),V&&U.models(w),st&&U.models(x),q&&U.models(P),Z.each(function(dt){G=d3.select(this),f.utils.initSVG(G);var at,h=f.utils.availableWidth(J,G,C),S=f.utils.availableHeight(tt,G,C);if(D.update=function(){0===b?G.call(D):G.transition().duration(b).call(D)},D.container=this,A.setter(function(Z){return function(dt){void 0!==dt.active&&Z.forEach(function(ht,h){ht.disabled=!dt.active[h]})}}(dt),D.update).getter(function(Z){return function(){return{active:Z.map(function(dt){return!dt.disabled})}}}(dt)).update(),A.disabled=dt.map(function(N){return!!N.disabled}),!O)for(at in O={},A)O[at]=A[at]instanceof Array?A[at].slice(0):A[at];if(!dt||!dt.length||!dt.filter(function(N){return N.values.length}).length)return f.utils.noData(D,G),U.renderEnd("scatter immediate"),D;G.selectAll(".nv-noData").remove(),j=a.xScale(),$=a.yScale();var ut=G.selectAll("g.nv-wrap.nv-scatterChart").data([dt]),ot=ut.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+a.id()).append("g"),yt=ut.select("g");ot.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),ot.append("g").attr("class","nv-x nv-axis"),ot.append("g").attr("class","nv-y nv-axis"),ot.append("g").attr("class","nv-scatterWrap"),ot.append("g").attr("class","nv-regressionLinesWrap"),ot.append("g").attr("class","nv-distWrap"),ot.append("g").attr("class","nv-legendWrap"),E&&yt.select(".nv-y.nv-axis").attr("transform","translate("+h+",0)"),z?(m.width(h),ut.select(".nv-legendWrap").datum(dt).call(m),!W&&m.height()!==C.top&&(C.top=m.height(),S=f.utils.availableHeight(tt,G,C)),ut.select(".nv-legendWrap").attr("transform","translate(0,"+-C.top+")")):yt.select(".nv-legendWrap").selectAll("*").remove(),ut.attr("transform","translate("+C.left+","+C.top+")"),a.width(h).height(S).color(dt.map(function(N,lt){return N.color=N.color||rt(N,lt),N.color}).filter(function(N,lt){return!dt[lt].disabled})).showLabels(I),ut.select(".nv-scatterWrap").datum(dt.filter(function(N){return!N.disabled})).call(a),ut.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+a.id()+")");var Et=ut.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(N){return N});Et.enter().append("g").attr("class","nv-regLines");var gt=Et.selectAll(".nv-regLine").data(function(N){return[N]});gt.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0),gt.filter(function(N){return N.intercept&&N.slope}).watchTransition(U,"scatterPlusLineChart: regline").attr("x1",j.range()[0]).attr("x2",j.range()[1]).attr("y1",function(N,lt){return $(j.domain()[0]*N.slope+N.intercept)}).attr("y2",function(N,lt){return $(j.domain()[1]*N.slope+N.intercept)}).style("stroke",function(N,lt,F){return rt(N,F)}).style("stroke-opacity",function(N,lt){return N.disabled||void 0===N.slope||void 0===N.intercept?0:1}),R&&(u.scale(j)._ticks(f.utils.calcTicksX(h/100,dt)).tickSize(-S,0),yt.select(".nv-x.nv-axis").attr("transform","translate(0,"+$.range()[0]+")").call(u)),V&&(w.scale($)._ticks(f.utils.calcTicksY(S/36,dt)).tickSize(-h,0),yt.select(".nv-y.nv-axis").call(w)),st&&(x.getData(a.x()).scale(j).width(h).color(dt.map(function(N,lt){return N.color||rt(N,lt)}).filter(function(N,lt){return!dt[lt].disabled})),ot.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),yt.select(".nv-distributionX").attr("transform","translate(0,"+$.range()[0]+")").datum(dt.filter(function(N){return!N.disabled})).call(x)),q&&(P.getData(a.y()).scale($).width(S).color(dt.map(function(N,lt){return N.color||rt(N,lt)}).filter(function(N,lt){return!dt[lt].disabled})),ot.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),yt.select(".nv-distributionY").attr("transform","translate("+(E?h:-P.size())+",0)").datum(dt.filter(function(N){return!N.disabled})).call(P)),m.dispatch.on("stateChange",function(N){for(var lt in N)A[lt]=N[lt];B.stateChange(A),D.update()}),B.on("changeState",function(N){void 0!==N.disabled&&(dt.forEach(function(lt,F){lt.disabled=N.disabled[F]}),A.disabled=N.disabled),D.update()}),a.dispatch.on("elementMouseout.tooltip",function(N){v.hidden(!0),G.select(".nv-chart-"+a.id()+" .nv-series-"+N.seriesIndex+" .nv-distx-"+N.pointIndex).attr("y1",0),G.select(".nv-chart-"+a.id()+" .nv-series-"+N.seriesIndex+" .nv-disty-"+N.pointIndex).attr("x2",P.size())}),a.dispatch.on("elementMouseover.tooltip",function(N){G.select(".nv-series-"+N.seriesIndex+" .nv-distx-"+N.pointIndex).attr("y1",N.relativePos[1]-S),G.select(".nv-series-"+N.seriesIndex+" .nv-disty-"+N.pointIndex).attr("x2",N.relativePos[0]+x.size()),v.data(N).hidden(!1)}),j.copy(),$.copy()}),U.renderEnd("scatter with line immediate"),D}return D.dispatch=B,D.scatter=a,D.legend=m,D.xAxis=u,D.yAxis=w,D.distX=x,D.distY=P,D.tooltip=v,D.options=f.utils.optionsFunc.bind(D),D._options=Object.create({},{width:{get:function(){return J},set:function(Z){J=Z}},height:{get:function(){return tt},set:function(Z){tt=Z}},container:{get:function(){return G},set:function(Z){G=Z}},showDistX:{get:function(){return st},set:function(Z){st=Z}},showDistY:{get:function(){return q},set:function(Z){q=Z}},showLegend:{get:function(){return z},set:function(Z){z=Z}},showXAxis:{get:function(){return R},set:function(Z){R=Z}},showYAxis:{get:function(){return V},set:function(Z){V=Z}},defaultState:{get:function(){return O},set:function(Z){O=Z}},noData:{get:function(){return M},set:function(Z){M=Z}},duration:{get:function(){return b},set:function(Z){b=Z}},showLabels:{get:function(){return I},set:function(Z){I=Z}},margin:{get:function(){return C},set:function(Z){void 0!==Z.top&&(C.top=Z.top,W=Z.top),C.right=void 0!==Z.right?Z.right:C.right,C.bottom=void 0!==Z.bottom?Z.bottom:C.bottom,C.left=void 0!==Z.left?Z.left:C.left}},rightAlignYAxis:{get:function(){return E},set:function(Z){E=Z,w.orient(Z?"right":"left")}},color:{get:function(){return rt},set:function(Z){rt=f.utils.getColor(Z),m.color(rt),x.color(rt),P.color(rt)}}}),f.utils.inheritOptions(D,a),f.utils.initOptions(D),D},f.models.sparkline=function(){"use strict";var tt,G,rt,j,a={top:2,right:0,bottom:2,left:0},u=400,w=32,m=null,x=!0,P=d3.scale.linear(),v=d3.scale.linear(),C=function(V){return V.x},W=function(V){return V.y},J=f.utils.getColor(["#000"]),$=!0,st=!0,q=d3.dispatch("renderEnd"),z=f.utils.renderWatch(q);function R(V){return z.reset(),V.each(function(E){var A=u-a.left-a.right,O=w-a.top-a.bottom;m=d3.select(this),f.utils.initSVG(m),P.domain(tt||d3.extent(E,C)).range(rt||[0,A]),v.domain(G||d3.extent(E,W)).range(j||[O,0]);var B=m.selectAll("g.nv-wrap.nv-sparkline").data([E]);B.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g"),B.select("g"),B.attr("transform","translate("+a.left+","+a.top+")");var it=B.selectAll("path").data(function(U){return[U]});it.enter().append("path"),it.exit().remove(),it.style("stroke",function(U,p){return U.color||J(U,p)}).attr("d",d3.svg.line().x(function(U,p){return P(C(U,p))}).y(function(U,p){return v(W(U,p))}));var ct=B.selectAll("circle.nv-point").data(function(U){var p=U.map(function(ht,h){return W(ht,h)});function _(ht){if(-1!=ht){var h=U[ht];return h.pointIndex=ht,h}return null}var D=_(p.lastIndexOf(v.domain()[1])),Z=_(p.indexOf(v.domain()[0])),dt=_(p.length-1);return[$?Z:null,$?D:null,st?dt:null].filter(function(ht){return null!=ht})});ct.enter().append("circle"),ct.exit().remove(),ct.attr("cx",function(U,p){return P(C(U,U.pointIndex))}).attr("cy",function(U,p){return v(W(U,U.pointIndex))}).attr("r",2).attr("class",function(U,p){return C(U,U.pointIndex)==P.domain()[1]?"nv-point nv-currentValue":W(U,U.pointIndex)==v.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),z.renderEnd("sparkline immediate"),R}return R.options=f.utils.optionsFunc.bind(R),R._options=Object.create({},{width:{get:function(){return u},set:function(V){u=V}},height:{get:function(){return w},set:function(V){w=V}},xDomain:{get:function(){return tt},set:function(V){tt=V}},yDomain:{get:function(){return G},set:function(V){G=V}},xRange:{get:function(){return rt},set:function(V){rt=V}},yRange:{get:function(){return j},set:function(V){j=V}},xScale:{get:function(){return P},set:function(V){P=V}},yScale:{get:function(){return v},set:function(V){v=V}},animate:{get:function(){return x},set:function(V){x=V}},showMinMaxPoints:{get:function(){return $},set:function(V){$=V}},showCurrentPoint:{get:function(){return st},set:function(V){st=V}},x:{get:function(){return C},set:function(V){C=d3.functor(V)}},y:{get:function(){return W},set:function(V){W=d3.functor(V)}},margin:{get:function(){return a},set:function(V){a.top=void 0!==V.top?V.top:a.top,a.right=void 0!==V.right?V.right:a.right,a.bottom=void 0!==V.bottom?V.bottom:a.bottom,a.left=void 0!==V.left?V.left:a.left}},color:{get:function(){return J},set:function(V){J=f.utils.getColor(V)}}}),R.dispatch=q,f.utils.initOptions(R),R},f.models.sparklinePlus=function(){"use strict";var x,P,a=f.models.sparkline(),u={top:15,right:100,bottom:10,left:50},w=null,m=null,v=[],C=!1,W=d3.format(",r"),J=d3.format(",.2f"),tt=!0,G=!0,rt=!1,j=null,$=d3.dispatch("renderEnd"),st=f.utils.renderWatch($);function q(z){return st.reset(),st.models(a),z.each(function(R){var V=d3.select(this);f.utils.initSVG(V);var E=f.utils.availableWidth(w,V,u),A=f.utils.availableHeight(m,V,u);if(q.update=function(){V.call(q)},q.container=this,!R||!R.length)return f.utils.noData(q,V),q;V.selectAll(".nv-noData").remove();var O=a.y()(R[R.length-1],R.length-1);x=a.xScale(),P=a.yScale();var B=V.selectAll("g.nv-wrap.nv-sparklineplus").data([R]),b=B.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),I=B.select("g");b.append("g").attr("class","nv-sparklineWrap"),b.append("g").attr("class","nv-valueWrap"),b.append("g").attr("class","nv-hoverArea"),B.attr("transform","translate("+u.left+","+u.top+")");var it=I.select(".nv-sparklineWrap");if(a.width(E).height(A),it.call(a),tt){var U=I.select(".nv-valueWrap").selectAll(".nv-currentValue").data([O]);U.enter().append("text").attr("class","nv-currentValue").attr("dx",rt?-8:8).attr("dy",".9em").style("text-anchor",rt?"end":"start"),U.attr("x",E+(rt?u.right:0)).attr("y",G?function(D){return P(D)}:0).style("fill",a.color()(R[R.length-1],R.length-1)).text(J(O))}function p(){if(!C){var D=I.selectAll(".nv-hoverValue").data(v),Z=D.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);D.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),D.attr("transform",function(dt){return"translate("+x(a.x()(R[dt],dt))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),v.length&&(Z.append("line").attr("x1",0).attr("y1",-u.top).attr("x2",0).attr("y2",A),Z.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-u.top).attr("text-anchor","end").attr("dy",".9em"),I.select(".nv-hoverValue .nv-xValue").text(W(a.x()(R[v[0]],v[0]))),Z.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-u.top).attr("text-anchor","start").attr("dy",".9em"),I.select(".nv-hoverValue .nv-yValue").text(J(a.y()(R[v[0]],v[0]))))}}b.select(".nv-hoverArea").append("rect").on("mousemove",function _(){if(!C){var D=d3.mouse(this)[0]-u.left;v=[function Z(dt,ht){for(var h=Math.abs(a.x()(dt[0],0)-ht),S=0,at=0;at<dt.length;at++)Math.abs(a.x()(dt[at],at)-ht)<h&&(h=Math.abs(a.x()(dt[at],at)-ht),S=at);return S}(R,Math.round(x.invert(D)))],p()}}).on("click",function(){C=!C}).on("mouseout",function(){v=[],p()}),I.select(".nv-hoverArea rect").attr("transform",function(D){return"translate("+-u.left+","+-u.top+")"}).attr("width",E+u.left+u.right).attr("height",A+u.top)}),st.renderEnd("sparklinePlus immediate"),q}return q.dispatch=$,q.sparkline=a,q.options=f.utils.optionsFunc.bind(q),q._options=Object.create({},{width:{get:function(){return w},set:function(z){w=z}},height:{get:function(){return m},set:function(z){m=z}},xTickFormat:{get:function(){return W},set:function(z){W=z}},yTickFormat:{get:function(){return J},set:function(z){J=z}},showLastValue:{get:function(){return tt},set:function(z){tt=z}},alignValue:{get:function(){return G},set:function(z){G=z}},rightAlignValue:{get:function(){return rt},set:function(z){rt=z}},noData:{get:function(){return j},set:function(z){j=z}},margin:{get:function(){return u},set:function(z){u.top=void 0!==z.top?z.top:u.top,u.right=void 0!==z.right?z.right:u.right,u.bottom=void 0!==z.bottom?z.bottom:u.bottom,u.left=void 0!==z.left?z.left:u.left}}}),f.utils.inheritOptions(q,a),f.utils.initOptions(q),q},f.models.stackedArea=function(){"use strict";var $,st,a={top:0,right:0,bottom:0,left:0},u=960,w=500,m=f.utils.defaultColor(),x=Math.floor(1e5*Math.random()),P=null,v=function(A){return A.x},C=function(A){return A.y},W=function(A,O){return!isNaN(C(A,O))&&null!==C(A,O)},J="stack",tt="zero",G="default",rt="linear",j=!1,q=f.models.scatter(),z=250,R=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");q.pointSize(2.2).pointDomain([2.2,2.2]);var V=f.utils.renderWatch(R,z);function E(A){return V.reset(),V.models(q),A.each(function(O){var B=u-a.left-a.right,M=w-a.top-a.bottom;P=d3.select(this),f.utils.initSVG(P),$=q.xScale(),st=q.yScale();var b=O;O.forEach(function(h,S){h.seriesIndex=S,h.values=h.values.map(function(at,ut){return at.index=ut,at.seriesIndex=S,at})});var I=O.filter(function(h){return!h.disabled});O=d3.layout.stack().order(G).offset(tt).values(function(h){return h.values}).x(v).y(C).out(function(h,S,at){h.display={y:at,y0:S}})(I);var it=P.selectAll("g.nv-wrap.nv-stackedarea").data([O]),ct=it.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),U=ct.append("defs"),p=ct.append("g"),_=it.select("g");p.append("g").attr("class","nv-areaWrap"),p.append("g").attr("class","nv-scatterWrap"),it.attr("transform","translate("+a.left+","+a.top+")"),0==q.forceY().length&&q.forceY().push(0),q.width(B).height(M).x(v).y(function(h){if(void 0!==h.display)return h.display.y+h.display.y0}).color(O.map(function(h,S){return h.color=h.color||m(h,h.seriesIndex),h.color})),_.select(".nv-scatterWrap").datum(O).call(q),U.append("clipPath").attr("id","nv-edge-clip-"+x).append("rect"),it.select("#nv-edge-clip-"+x+" rect").attr("width",B).attr("height",M),_.attr("clip-path",j?"url(#nv-edge-clip-"+x+")":"");var Z=d3.svg.area().defined(W).x(function(h,S){return $(v(h,S))}).y0(function(h){return st(h.display.y0)}).y1(function(h){return st(h.display.y+h.display.y0)}).interpolate(rt),dt=d3.svg.area().defined(W).x(function(h,S){return $(v(h,S))}).y0(function(h){return st(h.display.y0)}).y1(function(h){return st(h.display.y0)}),ht=_.select(".nv-areaWrap").selectAll("path.nv-area").data(function(h){return h});ht.enter().append("path").attr("class",function(h,S){return"nv-area nv-area-"+S}).attr("d",function(h,S){return dt(h.values,h.seriesIndex)}).on("mouseover",function(h,S){d3.select(this).classed("hover",!0),R.areaMouseover({point:h,series:h.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:h.seriesIndex})}).on("mouseout",function(h,S){d3.select(this).classed("hover",!1),R.areaMouseout({point:h,series:h.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:h.seriesIndex})}).on("click",function(h,S){d3.select(this).classed("hover",!1),R.areaClick({point:h,series:h.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:h.seriesIndex})}),ht.exit().remove(),ht.style("fill",function(h,S){return h.color||m(h,h.seriesIndex)}).style("stroke",function(h,S){return h.color||m(h,h.seriesIndex)}),ht.watchTransition(V,"stackedArea path").attr("d",function(h,S){return Z(h.values,S)}),q.dispatch.on("elementMouseover.area",function(h){_.select(".nv-chart-"+x+" .nv-area-"+h.seriesIndex).classed("hover",!0)}),q.dispatch.on("elementMouseout.area",function(h){_.select(".nv-chart-"+x+" .nv-area-"+h.seriesIndex).classed("hover",!1)}),E.d3_stackedOffset_stackPercent=function(h){var ut,Q,ot,S=h.length,at=h[0].length,yt=[];for(Q=0;Q<at;++Q){for(ut=0,ot=0;ut<b.length;ut++)ot+=C(b[ut].values[Q]);if(ot)for(ut=0;ut<S;ut++)h[ut][Q][1]/=ot;else for(ut=0;ut<S;ut++)h[ut][Q][1]=0}for(Q=0;Q<at;++Q)yt[Q]=0;return yt}}),V.renderEnd("stackedArea immediate"),E}return E.dispatch=R,E.scatter=q,q.dispatch.on("elementClick",function(){R.elementClick.apply(this,arguments)}),q.dispatch.on("elementMouseover",function(){R.elementMouseover.apply(this,arguments)}),q.dispatch.on("elementMouseout",function(){R.elementMouseout.apply(this,arguments)}),E.interpolate=function(A){return arguments.length?(rt=A,E):rt},E.duration=function(A){return arguments.length?(V.reset(z=A),q.duration(z),E):z},E.dispatch=R,E.scatter=q,E.options=f.utils.optionsFunc.bind(E),E._options=Object.create({},{width:{get:function(){return u},set:function(A){u=A}},height:{get:function(){return w},set:function(A){w=A}},defined:{get:function(){return W},set:function(A){W=A}},clipEdge:{get:function(){return j},set:function(A){j=A}},offset:{get:function(){return tt},set:function(A){tt=A}},order:{get:function(){return G},set:function(A){G=A}},interpolate:{get:function(){return rt},set:function(A){rt=A}},x:{get:function(){return v},set:function(A){v=d3.functor(A)}},y:{get:function(){return C},set:function(A){C=d3.functor(A)}},margin:{get:function(){return a},set:function(A){a.top=void 0!==A.top?A.top:a.top,a.right=void 0!==A.right?A.right:a.right,a.bottom=void 0!==A.bottom?A.bottom:a.bottom,a.left=void 0!==A.left?A.left:a.left}},color:{get:function(){return m},set:function(A){m=f.utils.getColor(A)}},style:{get:function(){return J},set:function(A){switch(J=A){case"stack":E.offset("zero"),E.order("default");break;case"stream":E.offset("wiggle"),E.order("inside-out");break;case"stream-center":E.offset("silhouette"),E.order("inside-out");break;case"expand":E.offset("expand"),E.order("default");break;case"stack_percent":E.offset(E.d3_stackedOffset_stackPercent),E.order("default")}}},duration:{get:function(){return z},set:function(A){V.reset(z=A),q.duration(z)}}}),f.utils.inheritOptions(E,q),f.utils.initOptions(E),E},f.models.stackedAreaChart=function(){"use strict";var B,M,a=f.models.stackedArea(),u=f.models.axis(),w=f.models.axis(),m=f.models.legend(),x=f.models.legend(),P=f.interactiveGuideline(),v=f.models.tooltip(),C=f.models.focus(f.models.stackedArea()),W={top:10,right:25,bottom:50,left:60},J=null,tt=null,G=null,rt=f.utils.defaultColor(),j=!0,$=!0,st="top",q=!0,z=!0,R=!1,V=!1,E=!1,A=!0,O="TOTAL",b=f.utils.state(),I=null,it=null,ct=d3.dispatch("stateChange","changeState","renderEnd"),U=250,p=["Stacked","Stream","Expanded"],_={},D=250;b.style=a.style(),u.orient("bottom").tickPadding(7),w.orient(R?"right":"left"),v.headerFormatter(function(ot,yt){return u.tickFormat()(ot,yt)}).valueFormatter(function(ot,yt){return w.tickFormat()(ot,yt)}),P.tooltip.headerFormatter(function(ot,yt){return u.tickFormat()(ot,yt)}).valueFormatter(function(ot,yt){return null==ot?"N/A":w.tickFormat()(ot,yt)});var Z=null,dt=null;x.updateState(!1);var ht=f.utils.renderWatch(ct),ut=(a.style(),d3.format("%"));function Q(ot){return ht.reset(),ht.models(a),q&&ht.models(u),z&&ht.models(w),ot.each(function(yt){var wt=d3.select(this);f.utils.initSVG(wt);var lt,gt=f.utils.availableWidth(tt,wt,W),N=f.utils.availableHeight(G,wt,W)-(V?C.height():0);if(Q.update=function(){wt.transition().duration(D).call(Q)},Q.container=this,b.setter(function(ot){return function(yt){void 0!==yt.active&&ot.forEach(function(wt,Et){wt.disabled=!yt.active[Et]})}}(yt),Q.update).getter(function(ot){return function(){return{active:ot.map(function(yt){return!yt.disabled}),style:a.style()}}}(yt)).update(),b.disabled=yt.map(function(Pt){return!!Pt.disabled}),!I)for(lt in I={},b)I[lt]=b[lt]instanceof Array?b[lt].slice(0):b[lt];if(!yt||!yt.length||!yt.filter(function(Pt){return Pt.values.length}).length)return f.utils.noData(Q,wt),Q;wt.selectAll(".nv-noData").remove(),B=a.xScale(),M=a.yScale();var F=wt.selectAll("g.nv-wrap.nv-stackedAreaChart").data([yt]),ft=F.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),xt=F.select("g");ft.append("g").attr("class","nv-legendWrap"),ft.append("g").attr("class","nv-controlsWrap");var Rt=ft.append("g").attr("class","nv-focus");if(Rt.append("g").attr("class","nv-background").append("rect"),Rt.append("g").attr("class","nv-x nv-axis"),Rt.append("g").attr("class","nv-y nv-axis"),Rt.append("g").attr("class","nv-stackedWrap"),Rt.append("g").attr("class","nv-interactive"),ft.append("g").attr("class","nv-focusWrap"),$){var Ct=j&&"top"===st?gt-U:gt;if(m.width(Ct),xt.select(".nv-legendWrap").datum(yt).call(m),"bottom"===st){var St=10+(q?12:0);W.bottom=Math.max(m.height()+St,W.bottom);var Dt=(N=f.utils.availableHeight(G,wt,W)-(V?C.height():0))+St;xt.select(".nv-legendWrap").attr("transform","translate(0,"+Dt+")")}else"top"===st&&(!J&&W.top!=m.height()&&(W.top=m.height(),N=f.utils.availableHeight(G,wt,W)-(V?C.height():0)),xt.select(".nv-legendWrap").attr("transform","translate("+(gt-Ct)+","+-W.top+")"))}else xt.select(".nv-legendWrap").selectAll("*").remove();if(j){var ne=[{key:_.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=a.style(),style:"stack"},{key:_.stream||"Stream",metaKey:"Stream",disabled:"stream"!=a.style(),style:"stream"},{key:_.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=a.style(),style:"expand"},{key:_.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=a.style(),style:"stack_percent"}];U=p.length/3*260,ne=ne.filter(function(Pt){return-1!==p.indexOf(Pt.metaKey)}),x.width(U).color(["#444","#444","#444"]),xt.select(".nv-controlsWrap").datum(ne).call(x);var _t=Math.max(x.height(),$&&"top"===st?m.height():0);W.top!=_t&&(W.top=_t,N=f.utils.availableHeight(G,wt,W)-(V?C.height():0)),xt.select(".nv-controlsWrap").attr("transform","translate(0,"+-W.top+")")}else xt.select(".nv-controlsWrap").selectAll("*").remove();F.attr("transform","translate("+W.left+","+W.top+")"),R&&xt.select(".nv-y.nv-axis").attr("transform","translate("+gt+",0)"),E&&(P.width(gt).height(N).margin({left:W.left,top:W.top}).svgContainer(wt).xScale(B),F.select(".nv-interactive").call(P)),xt.select(".nv-focus .nv-background rect").attr("width",gt).attr("height",N),a.width(gt).height(N).color(yt.map(function(Pt,$t){return Pt.color||rt(Pt,$t)}).filter(function(Pt,$t){return!yt[$t].disabled}));var te,Yt=xt.select(".nv-focus .nv-stackedWrap").datum(yt.filter(function(Pt){return!Pt.disabled}));function oe(){q&&xt.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+N+")").transition().duration(D).call(u)}function Wt(){if(z){if("expand"===a.style()||"stack_percent"===a.style()){var Pt=w.tickFormat();(!Z||Pt!==ut)&&(Z=Pt),w.tickFormat(ut)}else Z&&(w.tickFormat(Z),Z=null);xt.select(".nv-focus .nv-y.nv-axis").transition().duration(0).call(w)}}if(q&&u.scale(B)._ticks(f.utils.calcTicksX(gt/100,yt)).tickSize(-N,0),z&&(te="wiggle"===a.offset()?0:f.utils.calcTicksY(N/36,yt),w.scale(M)._ticks(te).tickSize(-gt,0)),V){C.width(gt),xt.select(".nv-focusWrap").attr("transform","translate(0,"+(N+W.bottom+C.margin().top)+")").datum(yt.filter(function(Pt){return!Pt.disabled})).call(C);var Xt=C.brush.empty()?C.xDomain():C.brush.extent();null!==Xt&&re(Xt)}else Yt.transition().call(a),oe(),Wt();function re(Pt){xt.select(".nv-focus .nv-stackedWrap").datum(yt.filter(function(ie){return!ie.disabled}).map(function(ie,xe){return{key:ie.key,area:ie.area,classed:ie.classed,values:ie.values.filter(function(de,be){return a.x()(de,be)>=Pt[0]&&a.x()(de,be)<=Pt[1]}),disableTooltip:ie.disableTooltip}})).transition().duration(D).call(a),oe(),Wt()}a.dispatch.on("areaClick.toggle",function(Pt){1===yt.filter(function($t){return!$t.disabled}).length?yt.forEach(function($t){$t.disabled=!1}):yt.forEach(function($t,ie){$t.disabled=ie!=Pt.seriesIndex}),b.disabled=yt.map(function($t){return!!$t.disabled}),ct.stateChange(b),Q.update()}),m.dispatch.on("stateChange",function(Pt){for(var $t in Pt)b[$t]=Pt[$t];ct.stateChange(b),Q.update()}),x.dispatch.on("legendClick",function(Pt,$t){!Pt.disabled||(ne=ne.map(function(ie){return ie.disabled=!0,ie}),Pt.disabled=!1,a.style(Pt.style),b.style=a.style(),ct.stateChange(b),Q.update())}),P.dispatch.on("elementMousemove",function(Pt){a.clearHighlights();var $t,ie,xe,de=[],be=0,Ce=!0,we=!1;if(yt.filter(function(ee,fe){return ee.seriesIndex=fe,!ee.disabled}).forEach(function(ee,fe){ie=f.interactiveBisect(ee.values,Pt.pointXValue,Q.x());var ke=ee.values[ie],Ht=Q.y()(ke,ie);if(null!=Ht&&Ht>0&&(a.highlightPoint(fe,ie,!0),we=!0),fe===yt.length-1&&!we&&a.highlightPoint(fe,ie,!0),void 0!==ke){void 0===$t&&($t=ke),void 0===xe&&(xe=Q.xScale()(Q.x()(ke,ie)));var se="expand"==a.style()?ke.display.y:Q.y()(ke,ie);de.push({key:ee.key,value:se,color:rt(ee,ee.seriesIndex),point:ke}),A&&"expand"!=a.style()&&null!=se&&(be+=se,Ce=!1)}}),de.reverse(),de.length>2){var zt=Q.yScale().invert(Pt.mouseY),Mt=null;de.forEach(function(ee,fe){zt=Math.abs(zt);var ke=Math.abs(ee.point.display.y0),Ht=Math.abs(ee.point.display.y);zt>=ke&&zt<=Ht+ke&&(Mt=fe)}),null!=Mt&&(de[Mt].highlight=!0)}A&&"expand"!=a.style()&&de.length>=2&&!Ce&&de.push({key:O,value:be,total:!0});var Ot=Q.x()($t,ie),jt=P.tooltip.valueFormatter();"expand"===a.style()||"stack_percent"===a.style()?(dt||(dt=jt),jt=d3.format(".1%")):dt&&(jt=dt,dt=null),P.tooltip.valueFormatter(jt).data({value:Ot,series:de})(),P.renderGuideLine(xe)}),P.dispatch.on("elementMouseout",function(Pt){a.clearHighlights()}),C.dispatch.on("onBrush",function(Pt){re(Pt)}),ct.on("changeState",function(Pt){void 0!==Pt.disabled&&yt.length===Pt.disabled.length&&(yt.forEach(function($t,ie){$t.disabled=Pt.disabled[ie]}),b.disabled=Pt.disabled),void 0!==Pt.style&&a.style(Pt.style),Q.update()})}),ht.renderEnd("stacked Area chart immediate"),Q}return a.dispatch.on("elementMouseover.tooltip",function(ot){ot.point.x=a.x()(ot.point),ot.point.y=a.y()(ot.point),v.data(ot).hidden(!1)}),a.dispatch.on("elementMouseout.tooltip",function(ot){v.hidden(!0)}),Q.dispatch=ct,Q.stacked=a,Q.legend=m,Q.controls=x,Q.xAxis=u,Q.x2Axis=C.xAxis,Q.yAxis=w,Q.y2Axis=C.yAxis,Q.interactiveLayer=P,Q.tooltip=v,Q.focus=C,Q.dispatch=ct,Q.options=f.utils.optionsFunc.bind(Q),Q._options=Object.create({},{width:{get:function(){return tt},set:function(ot){tt=ot}},height:{get:function(){return G},set:function(ot){G=ot}},showLegend:{get:function(){return $},set:function(ot){$=ot}},legendPosition:{get:function(){return st},set:function(ot){st=ot}},showXAxis:{get:function(){return q},set:function(ot){q=ot}},showYAxis:{get:function(){return z},set:function(ot){z=ot}},defaultState:{get:function(){return I},set:function(ot){I=ot}},noData:{get:function(){return it},set:function(ot){it=ot}},showControls:{get:function(){return j},set:function(ot){j=ot}},controlLabels:{get:function(){return _},set:function(ot){_=ot}},controlOptions:{get:function(){return p},set:function(ot){p=ot}},showTotalInTooltip:{get:function(){return A},set:function(ot){A=ot}},totalLabel:{get:function(){return O},set:function(ot){O=ot}},focusEnable:{get:function(){return V},set:function(ot){V=ot}},focusHeight:{get:function(){return C.height()},set:function(ot){C.height(ot)}},brushExtent:{get:function(){return C.brushExtent()},set:function(ot){C.brushExtent(ot)}},margin:{get:function(){return W},set:function(ot){void 0!==ot.top&&(W.top=ot.top,J=ot.top),W.right=void 0!==ot.right?ot.right:W.right,W.bottom=void 0!==ot.bottom?ot.bottom:W.bottom,W.left=void 0!==ot.left?ot.left:W.left}},focusMargin:{get:function(){return C.margin},set:function(ot){C.margin.top=void 0!==ot.top?ot.top:C.margin.top,C.margin.right=void 0!==ot.right?ot.right:C.margin.right,C.margin.bottom=void 0!==ot.bottom?ot.bottom:C.margin.bottom,C.margin.left=void 0!==ot.left?ot.left:C.margin.left}},duration:{get:function(){return D},set:function(ot){ht.reset(D=ot),a.duration(D),u.duration(D),w.duration(D)}},color:{get:function(){return rt},set:function(ot){rt=f.utils.getColor(ot),m.color(rt),a.color(rt),C.color(rt)}},x:{get:function(){return a.x()},set:function(ot){a.x(ot),C.x(ot)}},y:{get:function(){return a.y()},set:function(ot){a.y(ot),C.y(ot)}},rightAlignYAxis:{get:function(){return R},set:function(ot){w.orient((R=ot)?"right":"left")}},useInteractiveGuideline:{get:function(){return E},set:function(ot){E=!!ot,Q.interactive(!ot),Q.useVoronoi(!ot),a.scatter.interactive(!ot)}}}),f.utils.inheritOptions(Q,a),f.utils.initOptions(Q),Q},f.models.stackedAreaWithFocusChart=function(){return f.models.stackedAreaChart().margin({bottom:30}).focusEnable(!0)},f.models.sunburst=function(){"use strict";var V,E,A,O,a={top:0,right:0,bottom:0,left:0},u=600,w=600,m="count",x={count:function(h){return 1},value:function(h){return h.value||h.size},size:function(h){return h.value||h.size}},P=Math.floor(1e4*Math.random()),v=null,C=f.utils.defaultColor(),W=!1,J=function(h){return"count"===m?h.name+" #"+h.value:h.name+" "+(h.value||h.size)},tt=.02,G=function(h,S){return h.name>S.name},rt=function(h,S){return void 0!==h.parent?h.name+"-"+h.parent.name+"-"+S:h.name},j=!0,$=500,st=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),q=d3.scale.linear().range([0,2*Math.PI]),z=d3.scale.sqrt(),R=d3.layout.partition().sort(G),B={},M=d3.svg.arc().startAngle(function(h){return Math.max(0,Math.min(2*Math.PI,q(h.x)))}).endAngle(function(h){return Math.max(0,Math.min(2*Math.PI,q(h.x+h.dx)))}).innerRadius(function(h){return Math.max(0,z(h.y))}).outerRadius(function(h){return Math.max(0,z(h.y+h.dy))});function b(h){return I(h)>90?180:0}function I(h){return(Math.max(0,Math.min(2*Math.PI,q(h.x)))+Math.max(0,Math.min(2*Math.PI,q(h.x+h.dx))))/2*(180/Math.PI)-90}function it(h){var S=Math.max(0,Math.min(2*Math.PI,q(h.x)));return(Math.max(0,Math.min(2*Math.PI,q(h.x+h.dx)))-S)/(2*Math.PI)}function ct(h){var S=Math.max(0,Math.min(2*Math.PI,q(h.x)));return Math.max(0,Math.min(2*Math.PI,q(h.x+h.dx)))-S>tt}function U(h,S){var at=d3.interpolate(q.domain(),[V.x,V.x+V.dx]),ut=d3.interpolate(z.domain(),[V.y,1]),Q=d3.interpolate(z.range(),[V.y?20:0,O]);return 0===S?function(){return M(h)}:function(ot){return q.domain(at(ot)),z.domain(ut(ot)).range(Q(ot)),M(h)}}function p(h){var S=d3.interpolate({x:h.x0,dx:h.dx0,y:h.y0,dy:h.dy0},h);return function(at){var ut=S(at);return h.x0=ut.x,h.dx0=ut.dx,h.y0=ut.y,h.dy0=ut.dy,M(ut)}}function Z(h){var S=v.selectAll("text"),at=v.selectAll("path");S.transition().attr("opacity",0),V=h,at.transition().duration($).attrTween("d",U).each("end",function(ut){ut.x>=h.x&&ut.x<h.x+h.dx&&ut.depth>=h.depth&&d3.select(this.parentNode).select("text").transition().duration($).text(function(yt){return J(yt)}).attr("opacity",function(yt){return ct(yt)?1:0}).attr("transform",function(){var yt=this.getBBox().width;if(0===ut.depth)return"translate("+yt/2*-1+",0)";if(ut.depth===h.depth)return"translate("+(z(ut.y)+5)+",0)";var wt=I(ut),Et=b(ut);return 0===Et?"rotate("+wt+")translate("+(z(ut.y)+5)+",0)":"rotate("+wt+")translate("+(z(ut.y)+yt+5)+",0)rotate("+Et+")"})})}var dt=f.utils.renderWatch(st);function ht(h){return dt.reset(),h.each(function(S){v=d3.select(this),E=f.utils.availableWidth(u,v,a),A=f.utils.availableHeight(w,v,a),O=Math.min(E,A)/2,z.range([0,O]);var at=v.select("g.nvd3.nv-wrap.nv-sunburst");at[0][0]?at.attr("transform","translate("+(E/2+a.left+a.right)+","+(A/2+a.top+a.bottom)+")"):at=v.append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+P).attr("transform","translate("+(E/2+a.left+a.right)+","+(A/2+a.top+a.bottom)+")"),v.on("click",function(yt,wt){st.chartClick({data:yt,index:wt,pos:d3.event,id:P})}),R.value(x[m]||x.count);var ut=R.nodes(S[0]).reverse();!function D(h){h.forEach(function(S){var at=rt(S),ut=B[at];ut?(S.dx0=ut.dx,S.x0=ut.x,S.dy0=ut.dy,S.y0=ut.y):(S.dx0=S.dx,S.x0=S.x,S.dy0=S.dy,S.y0=S.y),function _(h){var S=rt(h);B[S]||(B[S]={});var at=B[S];at.dx=h.dx,at.x=h.x,at.dy=h.dy,at.y=h.y}(S)})}(ut);var Q=at.selectAll(".arc-container").data(ut,rt);Q.enter().append("g").attr("class","arc-container").append("path").attr("d",M).style("fill",function(yt){return yt.color?yt.color:C(j?(yt.children?yt:yt.parent).name:yt.name)}).style("stroke","#FFF").on("click",function(yt,wt){Z(yt),st.elementClick({data:yt,index:wt})}).on("mouseover",function(yt,wt){d3.select(this).classed("hover",!0).style("opacity",.8),st.elementMouseover({data:yt,color:d3.select(this).style("fill"),percent:it(yt)})}).on("mouseout",function(yt,wt){d3.select(this).classed("hover",!1).style("opacity",1),st.elementMouseout({data:yt})}).on("mousemove",function(yt,wt){st.elementMousemove({data:yt})}),Q.each(function(yt){d3.select(this).select("path").transition().duration($).attrTween("d",p)}),W&&(Q.selectAll("text").remove(),Q.append("text").text(function(yt){return J(yt)}).transition().duration($).attr("opacity",function(yt){return ct(yt)?1:0}).attr("transform",function(yt){var wt=this.getBBox().width;if(0===yt.depth)return"rotate(0)translate("+wt/2*-1+",0)";var Et=I(yt),gt=b(yt);return 0===gt?"rotate("+Et+")translate("+(z(yt.y)+5)+",0)":"rotate("+Et+")translate("+(z(yt.y)+wt+5)+",0)rotate("+gt+")"})),Z(ut[ut.length-1]),Q.exit().transition().duration($).attr("opacity",0).each("end",function(yt){var wt=rt(yt);B[wt]=void 0}).remove()}),dt.renderEnd("sunburst immediate"),ht}return ht.dispatch=st,ht.options=f.utils.optionsFunc.bind(ht),ht._options=Object.create({},{width:{get:function(){return u},set:function(h){u=h}},height:{get:function(){return w},set:function(h){w=h}},mode:{get:function(){return m},set:function(h){m=h}},id:{get:function(){return P},set:function(h){P=h}},duration:{get:function(){return $},set:function(h){$=h}},groupColorByParent:{get:function(){return j},set:function(h){j=!!h}},showLabels:{get:function(){return W},set:function(h){W=!!h}},labelFormat:{get:function(){return J},set:function(h){J=h}},labelThreshold:{get:function(){return tt},set:function(h){tt=h}},sort:{get:function(){return G},set:function(h){G=h}},key:{get:function(){return rt},set:function(h){rt=h}},margin:{get:function(){return a},set:function(h){a.top=null!=h.top?h.top:a.top,a.right=null!=h.right?h.right:a.right,a.bottom=null!=h.bottom?h.bottom:a.bottom,a.left=null!=h.left?h.left:a.left}},color:{get:function(){return C},set:function(h){C=f.utils.getColor(h)}}}),f.utils.initOptions(ht),ht},f.models.sunburstChart=function(){"use strict";var a=f.models.sunburst(),u=f.models.tooltip(),w={top:30,right:20,bottom:20,left:20},P=f.utils.defaultColor(),v=!1,W=(Math.round(1e5*Math.random()),null),J=null,tt=250,G=d3.dispatch("stateChange","changeState","renderEnd"),rt=f.utils.renderWatch(G);function j($){return rt.reset(),rt.models(a),$.each(function(st){var q=d3.select(this);f.utils.initSVG(q);var z=f.utils.availableWidth(null,q,w),R=f.utils.availableHeight(null,q,w);if(j.update=function(){0===tt?q.call(j):q.transition().duration(tt).call(j)},j.container=q,!st||!st.length)return f.utils.noData(j,q),j;q.selectAll(".nv-noData").remove(),a.width(z).height(R).margin(w),q.call(a)}),rt.renderEnd("sunburstChart immediate"),j}return u.duration(0).headerEnabled(!1).valueFormatter(function($){return $}),a.dispatch.on("elementMouseover.tooltip",function($){$.series={key:$.data.name,value:$.data.value||$.data.size,color:$.color,percent:$.percent},v||(delete $.percent,delete $.series.percent),u.data($).hidden(!1)}),a.dispatch.on("elementMouseout.tooltip",function($){u.hidden(!0)}),a.dispatch.on("elementMousemove.tooltip",function($){u()}),j.dispatch=G,j.sunburst=a,j.tooltip=u,j.options=f.utils.optionsFunc.bind(j),j._options=Object.create({},{noData:{get:function(){return J},set:function($){J=$}},defaultState:{get:function(){return W},set:function($){W=$}},showTooltipPercent:{get:function(){return v},set:function($){v=$}},color:{get:function(){return P},set:function($){a.color(P=$)}},duration:{get:function(){return tt},set:function($){rt.reset(tt=$),a.duration(tt)}},margin:{get:function(){return w},set:function($){w.top=void 0!==$.top?$.top:w.top,w.right=void 0!==$.right?$.right:w.right,w.bottom=void 0!==$.bottom?$.bottom:w.bottom,w.left=void 0!==$.left?$.left:w.left,a.margin(w)}}}),f.utils.inheritOptions(j,a),f.utils.initOptions(j),j},f.version="1.8.6"}}]);