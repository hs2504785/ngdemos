"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[5604],{6822:(b,M,t)=>{t.d(M,{K:()=>j});var O=t(2349),s=t(5e3),p=t(3075),g=t(7322),U=t(7531),E=t(7423);let j=(()=>{class C{constructor(d,l,v){this.fb=d,this.dialogRef=l,this.dialogTitle=v.dialogTitle,this.user=v.user,this.mode=v.mode;const r={email:[""],first_name:[""],last_name:[""]};"update"==this.mode?(this.form=this.fb.group(r),this.form.patchValue(Object.assign({},this.user))):"create"==this.mode&&(this.form=this.fb.group(Object.assign({},r)))}onClose(){this.dialogRef.close()}onSave(){const d=Object.assign(Object.assign({},this.user),this.form.value);"update"==this.mode?(console.log("Update User",d),this.dialogRef.close(d)):"create"==this.mode&&(console.log("Add User",d),d.avatar="https://reqres.in/img/faces/10-image.jpg",this.dialogRef.close(d))}}return C.\u0275fac=function(d){return new(d||C)(s.\u0275\u0275directiveInject(p.qu),s.\u0275\u0275directiveInject(O.so),s.\u0275\u0275directiveInject(O.WI))},C.\u0275cmp=s.\u0275\u0275defineComponent({type:C,selectors:[["app-user-cs-dialog"]],decls:16,vars:2,consts:[["mat-dialog-title",""],[3,"formGroup"],["matInput","","placeholder","Email","formControlName","email"],["matInput","","placeholder","First Name","formControlName","first_name"],["matInput","","placeholder","Last Name","formControlName","last_name"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(d,l){1&d&&(s.\u0275\u0275elementStart(0,"h2",0),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(2,"mat-dialog-content"),s.\u0275\u0275elementContainerStart(3)(4,1),s.\u0275\u0275elementStart(5,"mat-form-field"),s.\u0275\u0275element(6,"input",2),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(7,"mat-form-field"),s.\u0275\u0275element(8,"input",3),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(9,"mat-form-field"),s.\u0275\u0275element(10,"input",4),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementContainerEnd()(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(11,"mat-dialog-actions")(12,"button",5),s.\u0275\u0275listener("click",function(){return l.onClose()}),s.\u0275\u0275text(13,"Close"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(14,"button",6),s.\u0275\u0275listener("click",function(){return l.onSave()}),s.\u0275\u0275text(15,"Save"),s.\u0275\u0275elementEnd()()),2&d&&(s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate(l.dialogTitle),s.\u0275\u0275advance(3),s.\u0275\u0275property("formGroup",l.form))},dependencies:[O.uh,O.xY,O.H8,g.KE,U.Nt,E.lW,p.Fj,p.JJ,p.JL,p.sg,p.u],changeDetection:0}),C})()},7695:(b,M,t)=>{t.d(M,{O:()=>v});var O=t(26),s=t(515),p=t(3900),g=t(8505),U=t(262),E=t(5e3),j=t(4004),C=t(520),P=t(915);let d=(()=>{class r{constructor(a,D){this.http=a,this.cacheService=D,this.API_URL="https://reqres.in/api/users"}getUsers(){return this.cacheService.getData(`${this.API_URL}`).pipe((0,j.U)(a=>a.data))}addUser(a){return this.http.post(`${this.API_URL}`,a)}updateUser(a){return this.http.put(`${this.API_URL}/${a.id}`,a)}removeUser(a){return this.http.delete(`${this.API_URL}/${a}`)}}return r.\u0275fac=function(a){return new(a||r)(E.\u0275\u0275inject(C.eN),E.\u0275\u0275inject(P.Q))},r.\u0275prov=E.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var l=t(5357);let v=(()=>{class r extends O.m1{constructor(a,D){super({users:[],selectdUserId:1}),this.userCsService=a,this.route=D,this.users$=this.select(n=>n.users),this.selectedUserId$=this.select(n=>n.selectdUserId),this.usersCount$=this.select(this.users$,n=>n.length),this.top3users$=this.select(this.users$,n=>n.slice(0,3)),this.userById$=this.select(this.users$,this.selectedUserId$,(n,i)=>n.find(h=>h.id===i)),this.getUsers=this.effect(n=>n.pipe((0,p.w)(()=>this.userCsService.getUsers().pipe((0,g.b)({next:i=>this.setUsers(i),error:i=>this.logError(i)}),(0,U.K)(()=>s.E))))),this.addUser=this.effect(n=>n.pipe((0,p.w)(i=>this.userCsService.addUser(i).pipe((0,g.b)({next:h=>this.addUserInStore(h),error:h=>this.logError(h)}),(0,U.K)(()=>s.E))))),this.updateUser=this.effect(n=>n.pipe((0,p.w)(i=>this.userCsService.updateUser(i).pipe((0,g.b)({next:h=>this.updateUserInStore(h),error:h=>this.logError(h)}),(0,U.K)(()=>s.E))))),this.removeUser=this.effect(n=>n.pipe((0,p.w)(i=>this.userCsService.removeUser(+i).pipe((0,g.b)({next:h=>this.removeUserFromStore(i),error:h=>this.logError(h)}),(0,U.K)(()=>s.E))))),this.setUsers=this.updater((n,i)=>Object.assign(Object.assign({},n),{users:[...n.users,...i]})),this.addUserInStore=this.updater((n,i)=>Object.assign(Object.assign({},n),{users:[i,...n.users]})),this.removeUserFromStore=this.updater((n,i)=>Object.assign(Object.assign({},n),{users:n.users.filter(h=>h.id!==+i)})),this.updateUserInStore=this.updater((n,i)=>Object.assign(Object.assign({},n),{users:n.users.map(h=>h.id===i.id?i:h)}))}logError(a){console.log("Errr",a)}}return r.\u0275fac=function(a){return new(a||r)(E.\u0275\u0275inject(d),E.\u0275\u0275inject(l.gz))},r.\u0275prov=E.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac}),r})()},915:(b,M,t)=>{t.d(M,{Q:()=>d});var O=t(9646),s=t(4707),p=t(249),g=t(576),E=t(8343),j=t(8505),C=t(5e3),P=t(520);let d=(()=>{class l{constructor(r){this.http=r,this.responseCache=new Map}getData(r){const I=this.responseCache.get(r);return I?(0,O.of)(I):this.http.get(r).pipe(function U(l,v,r,I){r&&!(0,g.m)(r)&&(I=r);const a=(0,g.m)(r)?r:void 0;return D=>(0,p.O)(new s.t(l,v,I),a)(D)}(1),(0,E.x)(),(0,j.b)(a=>{this.responseCache.set(r,a)}))}clearCache(){this.responseCache.clear()}}return l.\u0275fac=function(r){return new(r||l)(C.\u0275\u0275inject(P.eN))},l.\u0275prov=C.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},26:(b,M,t)=>{t.d(M,{m1:()=>W});var O=t(9751),s=t(727),p=t(3101),g=t(4707),U=t(5191),E=t(9646),j=t(233),C=t(515),P=t(2843),d=t(7159),l=t(9841),v=t(7579),r=t(5363),I=t(8505),a=t(1365),D=t(4004),n=t(262),i=t(2722),h=t(5698),A=t(1884),K=t(4782),R=t(5e3);function y(){return u=>new O.y(f=>{let e,o;const c=new s.w0;return c.add(u.subscribe({complete:()=>{e&&f.next(o),f.complete()},error:m=>{f.error(m)},next:m=>{o=m,e||(e=p.E.schedule(()=>{f.next(o),e=void 0}),c.add(e))}})),c})}function T(u){return"function"==typeof u.ngrxOnStoreInit}function $(u){return"function"==typeof u.ngrxOnStateInit}const L=new R.InjectionToken("@ngrx/component-store Initial State");let W=(()=>{class u{constructor(e){this.destroySubject$=new g.t(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new g.t(1),this.isInitialized=!1,this.state$=this.select(o=>o),this.\u0275hasProvider=!1,e&&this.initState(e),this.checkProviderForHooks()}ngOnDestroy(){this.stateSubject$.complete(),this.destroySubject$.next()}updater(e){return o=>{let m,c=!0;const S=((0,U.b)(o)?o:(0,E.of)(o)).pipe((0,r.Q)(j.N),(0,I.b)(()=>this.assertStateIsInitialized()),(0,a.M)(this.stateSubject$),(0,D.U)(([_,N])=>e(N,_)),(0,I.b)(_=>this.stateSubject$.next(_)),(0,n.K)(_=>c?(m=_,C.E):(0,P._)(()=>_)),(0,i.R)(this.destroy$)).subscribe();if(m)throw m;return c=!1,S}}initState(e){(0,d.x)([e],j.N).subscribe(o=>{this.isInitialized=!0,this.stateSubject$.next(o)})}setState(e){"function"!=typeof e?this.initState(e):this.updater(e)()}patchState(e){const o="function"==typeof e?e(this.get()):e;this.updater((c,m)=>Object.assign(Object.assign({},c),m))(o)}get(e){let o;return this.assertStateIsInitialized(),this.stateSubject$.pipe((0,h.q)(1)).subscribe(c=>{o=e?e(c):c}),o}select(...e){const{observables:o,projector:c,config:m}=function B(u){const f=Array.from(u);let o,e={debounce:!1};const c=f.pop();return"function"!=typeof c?(e=Object.assign(Object.assign({},e),c),o=f.pop()):o=c,{observables:f,projector:o,config:e}}(e);let x;return x=0===o.length?this.stateSubject$.pipe(m.debounce?y():S=>S,(0,D.U)(S=>c(S))):(0,l.a)(o).pipe(m.debounce?y():S=>S,(0,D.U)(S=>c(...S))),x.pipe((0,A.x)(),(0,K.d)({refCount:!0,bufferSize:1}),(0,i.R)(this.destroy$))}effect(e){const o=new v.x;return e(o).pipe((0,i.R)(this.destroy$)).subscribe(),c=>((0,U.b)(c)?c:(0,E.of)(c)).pipe((0,i.R)(this.destroy$)).subscribe(x=>{o.next(x)})}checkProviderForHooks(){p.E.schedule(()=>{if((0,R.isDevMode)()&&(T(this)||$(this))&&!this.\u0275hasProvider){const e=[T(this)?"OnStoreInit":"",$(this)?"OnStateInit":""].filter(o=>o);console.warn(`@ngrx/component-store: ${this.constructor.name} has the ${e.join(" and ")} lifecycle hook(s) implemented without being provided using the provideComponentStore(${this.constructor.name}) function. To resolve this, provide the component store via provideComponentStore(${this.constructor.name})`)}})}assertStateIsInitialized(){if(!this.isInitialized)throw new Error(`${this.constructor.name} has not been initialized yet. Please make sure it is initialized before updating/getting.`)}}return u.\u0275fac=function(e){return new(e||u)(R.\u0275\u0275inject(L,8))},u.\u0275prov=R.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac}),u})()}}]);