"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[2570],{2570:(y,u,r)=>{r.r(u),r.d(u,{UsersDataModule:()=>j});var f=r(6019),c=r(9843),b=r(2438),S=r(9204),p=r(7847),l=r(5304),e=r(3668),m=r(9133),h=r(3649),g=r(8167),v=r(138),C=r(86);let U=(()=>{class n{constructor(t,s,o,i){this.fb=t,this.dialogRef=s,this.userService=i,this.dialogTitle=o.dialogTitle,this.user=o.user,this.mode=o.mode;const d={email:[""],first_name:[""],last_name:[""]};"update"==this.mode?(this.form=this.fb.group(d),this.form.patchValue(Object.assign({},this.user))):"create"==this.mode&&(this.form=this.fb.group(Object.assign({},d)))}onClose(){this.dialogRef.close()}onSave(){const t=Object.assign(Object.assign({},this.user),this.form.value);"update"==this.mode?(console.log("Update User",t),this.dialogRef.close(t)):"create"==this.mode&&(console.log("Add User",t),t.avatar="https://reqres.in/img/faces/10-image.jpg",this.dialogRef.close(t))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(m.qu),e.\u0275\u0275directiveInject(l.so),e.\u0275\u0275directiveInject(l.WI),e.\u0275\u0275directiveInject(h.K))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-user-data-dialog"]],decls:16,vars:2,consts:[["mat-dialog-title",""],[3,"formGroup"],["matInput","","placeholder","Email","formControlName","email"],["matInput","","placeholder","First Name","formControlName","first_name"],["matInput","","placeholder","Last Name","formControlName","last_name"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,s){1&t&&(e.\u0275\u0275elementStart(0,"h2",0),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"mat-dialog-content"),e.\u0275\u0275elementContainerStart(3),e.\u0275\u0275elementContainerStart(4,1),e.\u0275\u0275elementStart(5,"mat-form-field"),e.\u0275\u0275element(6,"input",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"mat-form-field"),e.\u0275\u0275element(8,"input",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"mat-form-field"),e.\u0275\u0275element(10,"input",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"mat-dialog-actions"),e.\u0275\u0275elementStart(12,"button",5),e.\u0275\u0275listener("click",function(){return s.onClose()}),e.\u0275\u0275text(13,"Close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"button",6),e.\u0275\u0275listener("click",function(){return s.onSave()}),e.\u0275\u0275text(15,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(s.dialogTitle),e.\u0275\u0275advance(3),e.\u0275\u0275property("formGroup",s.form))},directives:[l.uh,l.xY,m.JL,m.sg,g.KE,v.Nt,m.Fj,m.JJ,m.u,l.H8,C.lW],styles:[""],changeDetection:0}),n})();function D(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",5),e.\u0275\u0275elementStart(1,"div",6),e.\u0275\u0275element(2,"img",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",8),e.\u0275\u0275elementStart(4,"div"),e.\u0275\u0275elementStart(5,"strong"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"br"),e.\u0275\u0275elementStart(8,"small"),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div"),e.\u0275\u0275elementStart(11,"button",9),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().editUser(i)}),e.\u0275\u0275element(12,"i",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"button",11),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().removeUser(i)}),e.\u0275\u0275element(14,"i",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&n){const t=a.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275property("src",t.avatar,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.first_name),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.email)}}const E=[{path:"",component:(()=>{class n{constructor(t,s,o,i){this.route=t,this.dialog=s,this.userService=o,this.cd=i}ngOnInit(){this.users=this.route.snapshot.data.users}removeUser(t){console.log("Remove user"),this.userService.removeUser(t.id).subscribe(s=>{this.users=this.users.filter(o=>o.id!==t.id),this.cd.detectChanges()})}addUser(){const t=(0,p.m)();t.data={dialogTitle:"Add User",mode:"create"},this.sub=this.dialog.open(U,t).afterClosed().pipe((0,b.z)(s=>this.userService.addUser(s))).subscribe(s=>{this.users=[s,...this.users],this.cd.detectChanges()})}editUser(t){const s=(0,p.m)();s.data={dialogTitle:"Edit User",user:t,mode:"update"};const o=this.dialog.open(U,s).afterClosed().pipe((0,S.w)(i=>this.userService.updateUser(i))).subscribe(i=>{this.users=this.users.map(d=>d.id===t.id?i:d),console.log("Closed Edit",i),this.cd.detectChanges()});this.sub&&this.sub.add(o)}ngOnDestroy(){var t;null===(t=this.sub)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(c.gz),e.\u0275\u0275directiveInject(l.uw),e.\u0275\u0275directiveInject(h.K),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-users-data"]],decls:7,vars:1,consts:[[1,"container"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-primary","align-self-center",3,"click"],[1,"ti-plus"],["class","d-flex mb-2",4,"ngFor","ngForOf"],[1,"d-flex","mb-2"],[1,"flex-shrink-0","mr-2"],["alt","...",3,"src"],[1,"flex-grow-1","ml-2"],[1,"btn","btn-primary","mr-2",3,"click"],[1,"ti-pencil"],[1,"btn","btn-danger",3,"click"],[1,"ti-trash"]],template:function(t,s){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"header",1),e.\u0275\u0275elementStart(2,"h1"),e.\u0275\u0275text(3,"Users List (Service)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",2),e.\u0275\u0275listener("click",function(){return s.addUser()}),e.\u0275\u0275element(5,"i",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,D,15,3,"div",4),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",s.users))},directives:[f.sg],styles:["img[_ngcontent-%COMP%]{width:128px;height:128px}"],changeDetection:0}),n})()}];let x=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.Bz.forChild(E)],c.Bz]}),n})(),j=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[f.ez,x,l.Is,v.c,g.lN,C.ot,m.UX]]}),n})()}}]);