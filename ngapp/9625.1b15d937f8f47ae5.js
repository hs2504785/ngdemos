"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[9625],{9625:(x,S,a)=>{a.r(S),a.d(S,{SearchSortPaginateModule:()=>l});var d=a(6895),u=a(9116),e=a(4650),C=a(529);class s{constructor(t){this.http=t,this.API_URL="https://hksocket.herokuapp.com/api/products"}getProducts(){return this.http.get(`${this.API_URL}/frontend`)}getPaginatedProducts(t){let n=new C.LE;return t.s&&(n=n.set("s",t.s)),t.sort&&(n=n.set("sort",t.sort)),t.page&&(n=n.set("page",t.page.toString())),this.http.get(`${this.API_URL}/backend`,{params:n})}}function y(r,t){if(1&r&&(e.\u0275\u0275elementStart(0,"div",9)(1,"div",10),e.\u0275\u0275element(2,"img",11),e.\u0275\u0275elementStart(3,"div",12)(4,"p",13),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",14)(7,"small",15),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd()()()()()),2&r){const n=t.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275property("src",n.image,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(n.title),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("$",n.price,"")}}function F(r,t){if(1&r){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",16)(1,"button",17),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.loadMore())}),e.\u0275\u0275text(2,"Load More"),e.\u0275\u0275elementEnd()()}}s.\u0275fac=function(t){return new(t||s)(e.\u0275\u0275inject(C.eN))},s.\u0275prov=e.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"});class c{constructor(){this.products=[],this.setFilters=new e.EventEmitter}search(t){this.setFilters.emit({...this.filter,s:t,page:1})}sort(t){this.setFilters.emit({...this.filter,sort:t,page:1})}loadMore(){this.setFilters.emit({...this.filter,page:this.filter.page+1})}}c.\u0275fac=function(t){return new(t||c)},c.\u0275cmp=e.\u0275\u0275defineComponent({type:c,selectors:[["app-products"]],inputs:{products:"products",filter:"filter",lastPage:"lastPage"},outputs:{setFilters:"setFilters"},decls:13,vars:2,consts:[[1,"col-md-12","mb-4","input-group"],["placeholder","Search",1,"form-control",3,"keyup"],[1,"input-group-append"],[1,"form-select",3,"change"],["value","asc"],["value","desc"],[1,"row","row-cols-1","row-cols-sm-2","row-cols-md-3","g-3"],["class","col mb-4",4,"ngFor","ngForOf"],["class","d-flex justify-content-center mt-4",4,"ngIf"],[1,"col","mb-4"],[1,"card","shadow-sm"],["height","200",3,"src"],[1,"card-body"],[1,"card-text"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-muted"],[1,"d-flex","justify-content-center","mt-4"],[1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"input",1),e.\u0275\u0275listener("keyup",function(i){return n.search(i.target.value)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"div",2)(3,"select",3),e.\u0275\u0275listener("change",function(i){return n.sort(i.target.value)}),e.\u0275\u0275elementStart(4,"option"),e.\u0275\u0275text(5,"Select"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"option",4),e.\u0275\u0275text(7,"Price Ascending"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"option",5),e.\u0275\u0275text(9,"Price Descending"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275template(11,y,9,3,"div",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,F,3,0,"div",8)),2&t&&(e.\u0275\u0275advance(11),e.\u0275\u0275property("ngForOf",n.products),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.filter.page<n.lastPage))},dependencies:[d.sg,d.O5]});class m{constructor(t,n){this.productService=t,this.cd=n,this.products=[],this.filter={s:"",sort:"",page:1},this.lastPage=0}ngOnInit(){this.load(this.filter)}load(t){this.filter=t,this.productService.getPaginatedProducts(t).subscribe(n=>{this.products=1===t.page?n.data:[...this.products,...n.data],this.lastPage=n.last_page,this.cd.detectChanges()})}setFilters(t){this.load(t)}}m.\u0275fac=function(t){return new(t||m)(e.\u0275\u0275directiveInject(s),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))},m.\u0275cmp=e.\u0275\u0275defineComponent({type:m,selectors:[["app-backend"]],decls:1,vars:3,consts:[[3,"products","filter","lastPage","setFilters"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"app-products",0),e.\u0275\u0275listener("setFilters",function(i){return n.setFilters(i)}),e.\u0275\u0275elementEnd()),2&t&&e.\u0275\u0275property("products",n.products)("filter",n.filter)("lastPage",n.lastPage)},dependencies:[c]});class f{transform(t,n){return t.filter(o=>o.title.toLowerCase().indexOf(n.toLowerCase())>=0||o.description.toLowerCase().indexOf(n.toLowerCase())>=0)}}f.\u0275fac=function(t){return new(t||f)},f.\u0275pipe=e.\u0275\u0275definePipe({name:"search",type:f,pure:!0});class g{transform(t,n){return console.log(n),("asc"===n||"desc"===n)&&t.sort((o,i)=>{const P=o.price-i.price;if(0===P)return 0;const _=Math.abs(P)/P;return"asc"===n?_:-_}),t}}function k(r,t){if(1&r){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"app-products",1),e.\u0275\u0275listener("setFilters",function(i){e.\u0275\u0275restoreView(n);const P=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(P.filter=i)}),e.\u0275\u0275pipe(2,"sort"),e.\u0275\u0275pipe(3,"search"),e.\u0275\u0275pipe(4,"search"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&r){const n=t.ngIf,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("products",e.\u0275\u0275pipeBind2(2,3,e.\u0275\u0275pipeBind2(3,6,n,o.filter.s),o.filter.sort))("filter",o.filter)("lastPage",o.lastPage(e.\u0275\u0275pipeBind2(4,9,n,o.filter.s)))}}g.\u0275fac=function(t){return new(t||g)},g.\u0275pipe=e.\u0275\u0275definePipe({name:"sort",type:g,pure:!0});class h{constructor(t){this.productService=t,this.products$=this.productService.getProducts(),this.filter={s:"",sort:"",page:1},this.perPage=9}ngOnInit(){}lastPage(t){return Math.ceil(t.length/this.perPage)}}h.\u0275fac=function(t){return new(t||h)(e.\u0275\u0275directiveInject(s))},h.\u0275cmp=e.\u0275\u0275defineComponent({type:h,selectors:[["app-frontend"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"products","filter","lastPage","setFilters"]],template:function(t,n){1&t&&(e.\u0275\u0275template(0,k,5,12,"ng-container",0),e.\u0275\u0275pipe(1,"async")),2&t&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,n.products$))},dependencies:[d.O5,c,d.Ov,f,g]});class v{constructor(){}ngOnInit(){}}v.\u0275fac=function(t){return new(t||v)},v.\u0275cmp=e.\u0275\u0275defineComponent({type:v,selectors:[["app-search-sort-paginate"]],decls:12,vars:0,consts:[[1,"container"],[1,"d-flex","justify-content-center","py-3"],[1,"nav","nav-pills"],[1,"nav-item"],["routerLink","frontend","routerLinkActive","active",1,"nav-link"],["routerLink","backend","routerLinkActive","active",1,"nav-link"],[1,"album","py-5","bg-light"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"header",1)(2,"ul",2)(3,"li",3)(4,"a",4),e.\u0275\u0275text(5,"Frontend"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"li",3)(7,"a",5),e.\u0275\u0275text(8,"Backend"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(9,"div",6)(10,"div",0),e.\u0275\u0275element(11,"router-outlet"),e.\u0275\u0275elementEnd()())},dependencies:[u.lC,u.rH,u.Od],changeDetection:0});const w=[{path:"",component:v,children:[{path:"frontend",component:h},{path:"backend",component:m},{path:"",redirectTo:"frontend",pathMatch:"full"}]}];class p{}p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=e.\u0275\u0275defineNgModule({type:p}),p.\u0275inj=e.\u0275\u0275defineInjector({imports:[u.Bz.forChild(w),u.Bz]});class l{}l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=e.\u0275\u0275defineInjector({imports:[d.ez,p]})}}]);