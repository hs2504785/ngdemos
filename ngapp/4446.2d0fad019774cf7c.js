"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[4446],{4446:(I,h,r)=>{r.r(h),r.d(h,{RenderCircleModule:()=>s});var f=r(6895),g=r(9116),v=r(2629),e=r(4650),d=r(4006);const m=["mainCanvas"];class t{constructor(){this.title="NgWebWorker",this.GRID_LINES=20,this.lineInterval=0,this.gridColor="lightgreen",console.log("ctor complete")}ngAfterViewInit(){t.ctx=this.mainCanvas.nativeElement.getContext("2d"),this.initApp(),this.initBoard(),this.drawGrid(),this.toggleTimer()}initApp(){t.ctx.canvas.height=t.CANVAS_SIZE,t.ctx.canvas.width=t.ctx.canvas.height}initBoard(){console.log("initBoard..."),this.lineInterval=Math.floor(t.ctx.canvas.width/this.GRID_LINES),console.log(this.lineInterval)}drawGrid(){console.log("drawGrid..."),t.ctx.globalAlpha=1,t.ctx.fillStyle="white",t.ctx.fillRect(0,0,t.ctx.canvas.height,t.ctx.canvas.width);for(var n=0;n<this.GRID_LINES;n++)t.ctx.fillStyle=this.gridColor,t.ctx.fillRect(0,this.lineInterval*(n+1),t.ctx.canvas.width,2),t.ctx.fillRect(this.lineInterval*(n+1),0,2,t.ctx.canvas.width)}toggleTimer(){null===t.IntervalHandle?t.IntervalHandle=setInterval(this.drawRandomCircles,100):(clearInterval(t.IntervalHandle),t.IntervalHandle=null,this.drawGrid())}static generateRandomPoints(){return{x:Math.floor(Math.random()*t.CANVAS_SIZE),y:Math.floor(Math.random()*t.CANVAS_SIZE)}}drawRandomCircles(){var n=t.generateRandomPoints();t.drawPoint(n)}static drawPoint(n){var u="rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")";t.ctx.strokeStyle=u,t.ctx.fillStyle=u,t.ctx.beginPath(),t.ctx.arc(n.x,n.y,10,0,2*Math.PI),t.ctx.stroke(),t.ctx.fill()}}t.IntervalHandle=null,t.CANVAS_SIZE=400,t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-circle"]],viewQuery:function(n,a){if(1&n&&e.\u0275\u0275viewQuery(m,5),2&n){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(a.mainCanvas=i.first)}},decls:3,vars:0,consts:[["id","second"],[3,"mousedown"],["mainCanvas",""]],template:function(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"canvas",1,2),e.\u0275\u0275listener("mousedown",function(){return a.toggleTimer()}),e.\u0275\u0275elementEnd()())}});class c{constructor(n){this.cd=n,this.title="NgWebWorker",this.longProcessOutput="Long\nprocess\noutput\nwill\nappear\nhere\n"}ngOnInit(){this.initWorker()}initWorker(){typeof Worker<"u"&&(this.worker=new Worker(r.tu(new URL(r.p+r.u(501),r.b))),this.worker.onmessage=({data:n})=>{console.log("worker thread",n),this.longProcessOutput+=`${n}\n`,this.cd.detectChanges()})}mainThreadLoop(){this.longProcessOutput="",(0,v.W)(n=>{console.log("main thread",n),this.longProcessOutput+=`${n}\n`,this.cd.detectChanges()},9e9)}workerLoop(){this.longProcessOutput="",this.worker.postMessage("start looping...")}}c.\u0275fac=function(n){return new(n||c)(e.\u0275\u0275directiveInject(e.ChangeDetectorRef))},c.\u0275cmp=e.\u0275\u0275defineComponent({type:c,selectors:[["app-render-circle"]],decls:18,vars:1,consts:[[1,"container"],[1,"d-flex","justify-content-between"],[1,"main","text-center"],[1,"row"],[1,"col"],[1,"innerContainer"],[1,"btn","btn-primary","mr-2",3,"click"],[1,"btn","btn-success",3,"click"],["rows","10",1,"form-control",3,"ngModel"],[1,"text-muted","mb-4"]],template:function(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h1"),e.\u0275\u0275text(3,"Display Circles"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"button",6),e.\u0275\u0275listener("click",function(){return a.mainThreadLoop()}),e.\u0275\u0275text(9," Start Main Thread "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"button",7),e.\u0275\u0275listener("click",function(){return a.workerLoop()}),e.\u0275\u0275text(11," Start Worker "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",5),e.\u0275\u0275element(13,"textarea",8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",4)(15,"p",9),e.\u0275\u0275text(16,' Click on "Start Main Thread" button you will see circle rendering stopped '),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(17,"app-circle"),e.\u0275\u0275elementEnd()()()()),2&n&&(e.\u0275\u0275advance(13),e.\u0275\u0275property("ngModel",a.longProcessOutput))},dependencies:[d.Fj,d.JJ,d.On,t],styles:[".innerContainer[_ngcontent-%COMP%]{padding:1%}#first[_ngcontent-%COMP%]{width:50%;height:405px;float:left;background-color:#add8e6;color:#fff}#second[_ngcontent-%COMP%]{width:50%;float:right;background-color:green;color:#fff}"],changeDetection:0});const p=[{path:"",component:c}];class l{}l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=e.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=e.\u0275\u0275defineInjector({imports:[g.Bz.forChild(p),g.Bz]});class s{}s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.\u0275\u0275defineNgModule({type:s}),s.\u0275inj=e.\u0275\u0275defineInjector({imports:[f.ez,l,d.u5]})}}]);