(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[1176],{1176:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RenderCircleModule:()=>m});var r=n(1116),o=n(766),i=n(9637),l=n(5366),a=n(1041);const c=["mainCanvas"];let s=(()=>{class e{constructor(){this.title="NgWebWorker",this.GRID_LINES=20,this.lineInterval=0,this.gridColor="lightgreen",console.log("ctor complete")}ngAfterViewInit(){e.ctx=this.mainCanvas.nativeElement.getContext("2d"),this.initApp(),this.initBoard(),this.drawGrid(),this.toggleTimer()}initApp(){e.ctx.canvas.height=e.CANVAS_SIZE,e.ctx.canvas.width=e.ctx.canvas.height}initBoard(){console.log("initBoard..."),this.lineInterval=Math.floor(e.ctx.canvas.width/this.GRID_LINES),console.log(this.lineInterval)}drawGrid(){console.log("drawGrid..."),e.ctx.globalAlpha=1,e.ctx.fillStyle="white",e.ctx.fillRect(0,0,e.ctx.canvas.height,e.ctx.canvas.width);for(var t=0;t<this.GRID_LINES;t++)e.ctx.fillStyle=this.gridColor,e.ctx.fillRect(0,this.lineInterval*(t+1),e.ctx.canvas.width,2),e.ctx.fillRect(this.lineInterval*(t+1),0,2,e.ctx.canvas.width)}toggleTimer(){null===e.IntervalHandle?e.IntervalHandle=setInterval(this.drawRandomCircles,100):(clearInterval(e.IntervalHandle),e.IntervalHandle=null,this.drawGrid())}static generateRandomPoints(){return{x:Math.floor(Math.random()*e.CANVAS_SIZE),y:Math.floor(Math.random()*e.CANVAS_SIZE)}}drawRandomCircles(){var t=e.generateRandomPoints();e.drawPoint(t)}static drawPoint(t){var n="rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")";e.ctx.strokeStyle=n,e.ctx.fillStyle=n,e.ctx.beginPath(),e.ctx.arc(t.x,t.y,10,0,2*Math.PI),e.ctx.stroke(),e.ctx.fill()}}return e.IntervalHandle=null,e.CANVAS_SIZE=400,e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-circle"]],viewQuery:function(e,t){if(1&e&&l["\u0275\u0275viewQuery"](c,5),2&e){let e;l["\u0275\u0275queryRefresh"](e=l["\u0275\u0275loadQuery"]())&&(t.mainCanvas=e.first)}},decls:3,vars:0,consts:[["id","second"],[3,"mousedown"],["mainCanvas",""]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"canvas",1,2),l["\u0275\u0275listener"]("mousedown",function(){return t.toggleTimer()}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]())},styles:[""]}),e})();const d=[{path:"",component:(()=>{class e{constructor(e){this.cd=e,this.title="NgWebWorker",this.longProcessOutput="Long\nprocess\noutput\nwill\nappear\nhere\n"}ngOnInit(){this.initWorker()}initWorker(){"undefined"!=typeof Worker&&(this.worker=new Worker(new URL(n.p+n.u(1394),n.b)),this.worker.onmessage=({data:e})=>{console.log("worker thread",e),this.longProcessOutput+=`${e}\n`,this.cd.detectChanges()})}mainThreadLoop(){this.longProcessOutput="",(0,i.W)(e=>{console.log("main thread",e),this.longProcessOutput+=`${e}\n`,this.cd.detectChanges()},9e9)}workerLoop(){this.longProcessOutput="",this.worker.postMessage("start looping...")}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](l.ChangeDetectorRef))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-render-circle"]],decls:18,vars:1,consts:[[1,"container"],[1,"d-flex","justify-content-between"],[1,"main","text-center"],[1,"row"],[1,"col"],[1,"innerContainer"],[1,"btn","btn-primary","mr-2",3,"click"],[1,"btn","btn-success",3,"click"],["rows","10",1,"form-control",3,"ngModel"],[1,"text-muted","mb-4"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"h1"),l["\u0275\u0275text"](3,"Display Circles"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"div",2),l["\u0275\u0275elementStart"](5,"div",3),l["\u0275\u0275elementStart"](6,"div",4),l["\u0275\u0275elementStart"](7,"div",5),l["\u0275\u0275elementStart"](8,"button",6),l["\u0275\u0275listener"]("click",function(){return t.mainThreadLoop()}),l["\u0275\u0275text"](9," Start Main Thread "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"button",7),l["\u0275\u0275listener"]("click",function(){return t.workerLoop()}),l["\u0275\u0275text"](11," Start Worker "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"div",5),l["\u0275\u0275element"](13,"textarea",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"div",4),l["\u0275\u0275elementStart"](15,"p",9),l["\u0275\u0275text"](16,' Click on "Start Main Thread" button you will see circle rendering stopped '),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](17,"app-circle"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](13),l["\u0275\u0275property"]("ngModel",t.longProcessOutput))},directives:[a.Fj,a.JJ,a.On,s],styles:[".innerContainer[_ngcontent-%COMP%]{padding:1%}#first[_ngcontent-%COMP%]{height:405px;float:left;background-color:#add8e6}#first[_ngcontent-%COMP%], #second[_ngcontent-%COMP%]{width:50%;color:#fff}#second[_ngcontent-%COMP%]{float:right;background-color:green}"],changeDetection:0}),e})()}];let h=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({imports:[[o.Bz.forChild(d)],o.Bz]}),e})(),m=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({imports:[[r.ez,h,a.u5]]}),e})()}}]);