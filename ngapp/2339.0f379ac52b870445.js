"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[2339],{2339:(B,$,a)=>{a.r($),a.d($,{LongRunningModule:()=>I});var T=a(6019),k=a(9843),W=a(2389),t=a(3668);const A=["output"],v=1e6,S=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){console.log("here"),function(n={}){const{frames:o=50,speed:e=.0017,size:i=300,inset:u=3,parent:j=document.getElementById("longTask")}=n,N=document.createTextNode("\n    .lagRadar-sweep > * {\n      shape-rendering: crispEdges;\n    }\n    .lagRadar-face {\n      fill: transparent;\n    }\n    .lagRadar-hand {\n      stroke-width: 4px;\n      stroke-linecap: round;\n    }\n  ");function g(s,d={},m=[]){const c=document.createElementNS("http://www.w3.org/2000/svg",s);return Object.keys(d).forEach(l=>c.setAttribute(l,d[l])),m.forEach(l=>c.appendChild(l)),c}const L=2*Math.PI,r=i/2,h=r-u,w=g("path",{class:"lagRadar-hand"}),p=new Array(o).fill("path").map(s=>g(s)),x=g("svg",{class:"lagRadar",height:i,width:i},[g("style",{type:"text/css"},[N]),g("g",{class:"lagRadar-sweep"},p),w,g("circle",{class:"lagRadar-face",cx:r,cy:r,r:h})]);j.appendChild(x);let M,R=0,f={rotation:0,now:Date.now(),tx:r+h,ty:r};const P=(()=>{const c=120/Math.log(100);return function(l){return 120-Math.max(0,Math.min(c*Math.log(l/10),120))}})();!function C(){const s=Date.now(),d=Math.min(L-e,e*(s-f.now)),m=(f.rotation+d)%L,c=r+h*Math.cos(m),l=r+h*Math.sin(m),D=d<Math.PI?"0":"1",Q=`M${c} ${l}A${h} ${h} 0 ${D} 0 ${f.tx} ${f.ty}L${r} ${r}`,E=P(d/e);p[R%o].setAttribute("d",Q),p[R%o].setAttribute("fill",`hsl(${E}, 80%, 40%)`),w.setAttribute("d",`M${r} ${r}L${c} ${l}`),w.setAttribute("stroke",`hsl(${E}, 80%, 60%)`);for(let y=0;y<o;y++)p[(o+R-y)%o].style.fillOpacity=""+(1-y/o);R++,f={now:s,rotation:m,tx:c,ty:l},M=window.requestAnimationFrame(C)}()}(),this.initWorker()}initWorker(){"undefined"!=typeof Worker&&(this.worker=new Worker(a.tu(new URL(a.p+a.u(1214),a.b))),this.worker.onmessage=({data:e})=>{this.setResult("Worker",e,performance.now()-this.start)})}setResult(e,i,u){this.output.nativeElement.textContent=`\n    From ${e}.\n    Result: ${i}.\n    Time: ${u}`.trim()}runMainThread(){this.output.nativeElement.textContent="Wait...",this.start=performance.now();const e=(0,W.P)(v);this.setResult("Main thread",e,performance.now()-this.start)}runWorkerThread(){this.output.nativeElement.textContent="Wait...",this.start=performance.now(),this.worker.postMessage(v)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-long-running"]],viewQuery:function(e,i){if(1&e&&t.\u0275\u0275viewQuery(A,5),2&e){let u;t.\u0275\u0275queryRefresh(u=t.\u0275\u0275loadQuery())&&(i.output=u.first)}},decls:14,vars:0,consts:[[1,"container"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-warning","mr-2",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[1,"main","text-center"],[1,"text-muted"],["output",""],["id","longTask"]],template:function(e,i){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"h1"),t.\u0275\u0275text(3,"Long Running Task Demo"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div"),t.\u0275\u0275elementStart(5,"button",2),t.\u0275\u0275listener("click",function(){return i.runMainThread()}),t.\u0275\u0275text(6," Main Thread Task "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"button",3),t.\u0275\u0275listener("click",function(){return i.runWorkerThread()}),t.\u0275\u0275text(8," Web Worker Task "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"div",4),t.\u0275\u0275elementStart(10,"div",5,6),t.\u0275\u0275text(12,"Nothing to display... yet"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(13,"div",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())},styles:[""],changeDetection:0}),n})()}];let F=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[k.Bz.forChild(S)],k.Bz]}),n})(),I=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[T.ez,F]]}),n})()}}]);