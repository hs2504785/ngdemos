(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[7058],{7058:(t,e,n)=>{"use strict";n.r(e),n.d(e,{LongRunningModule:()=>d});var r=n(1116),a=n(766),o=n(9637),s=n(5366);const i=["output"],l=1e6,c=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){console.log("here"),function(t={}){const{frames:e=50,speed:n=.0017,size:r=300,inset:a=3,parent:o=document.getElementById("longTask")}=t,s=document.createTextNode("\n    .lagRadar-sweep > * {\n      shape-rendering: crispEdges;\n    }\n    .lagRadar-face {\n      fill: transparent;\n    }\n    .lagRadar-hand {\n      stroke-width: 4px;\n      stroke-linecap: round;\n    }\n  ");function i(t,e={},n=[]){const r=document.createElementNS("http://www.w3.org/2000/svg",t);return Object.keys(e).forEach(t=>r.setAttribute(t,e[t])),n.forEach(t=>r.appendChild(t)),r}const l=2*Math.PI,c=r/2,u=c-a,d=i("path",{class:"lagRadar-hand"}),h=new Array(e).fill("path").map(t=>i(t)),m=i("svg",{class:"lagRadar",height:r,width:r},[i("style",{type:"text/css"},[s]),i("g",{class:"lagRadar-sweep"},h),d,i("circle",{class:"lagRadar-face",cx:c,cy:c,r:u})]);let p;o.appendChild(m);let f=0,g={rotation:0,now:Date.now(),tx:c+u,ty:c};const w=(()=>{const t=120/Math.log(100);return function(e){return 120-Math.max(0,Math.min(t*Math.log(e/10),120))}})();!function t(){const r=Date.now(),a=Math.min(l-n,n*(r-g.now)),o=(g.rotation+a)%l,s=c+u*Math.cos(o),i=c+u*Math.sin(o),m=a<Math.PI?"0":"1",k=`M${s} ${i}A${u} ${u} 0 ${m} 0 ${g.tx} ${g.ty}L${c} ${c}`,y=w(a/n);h[f%e].setAttribute("d",k),h[f%e].setAttribute("fill",`hsl(${y}, 80%, 40%)`),d.setAttribute("d",`M${c} ${c}L${s} ${i}`),d.setAttribute("stroke",`hsl(${y}, 80%, 60%)`);for(let n=0;n<e;n++)h[(e+f-n)%e].style.fillOpacity=""+(1-n/e);f++,g={now:r,rotation:o,tx:s,ty:i},p=window.requestAnimationFrame(t)}()}(),this.initWorker()}initWorker(){"undefined"!=typeof Worker&&(this.worker=new Worker(new URL(n.p+n.u(9983),n.b)),this.worker.onmessage=({data:t})=>{this.setResult("Worker",t,performance.now()-this.start)})}setResult(t,e,n){this.output.nativeElement.textContent=`\n    From ${t}.\n    Result: ${e}.\n    Time: ${n}`.trim()}runMainThread(){this.output.nativeElement.textContent="Wait...",this.start=performance.now();const t=(0,o.P)(l);this.setResult("Main thread",t,performance.now()-this.start)}runWorkerThread(){this.output.nativeElement.textContent="Wait...",this.start=performance.now(),this.worker.postMessage(l)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["app-long-running"]],viewQuery:function(t,e){if(1&t&&s["\u0275\u0275viewQuery"](i,5),2&t){let t;s["\u0275\u0275queryRefresh"](t=s["\u0275\u0275loadQuery"]())&&(e.output=t.first)}},decls:14,vars:0,consts:[[1,"container"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-warning","mr-2",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[1,"main","text-center"],[1,"text-muted"],["output",""],["id","longTask"]],template:function(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"div",1),s["\u0275\u0275elementStart"](2,"h1"),s["\u0275\u0275text"](3,"Long Running Task Demo"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div"),s["\u0275\u0275elementStart"](5,"button",2),s["\u0275\u0275listener"]("click",function(){return e.runMainThread()}),s["\u0275\u0275text"](6," Main Thread Task "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"button",3),s["\u0275\u0275listener"]("click",function(){return e.runWorkerThread()}),s["\u0275\u0275text"](8," Web Worker Task "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",4),s["\u0275\u0275elementStart"](10,"div",5,6),s["\u0275\u0275text"](12,"Nothing to display... yet"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](13,"div",7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]())},styles:[""],changeDetection:0}),t})()}];let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=s["\u0275\u0275defineInjector"]({imports:[[a.Bz.forChild(c)],a.Bz]}),t})(),d=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=s["\u0275\u0275defineInjector"]({imports:[[r.ez,u]]}),t})()}}]);