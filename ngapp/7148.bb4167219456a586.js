"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[7148],{7148:(Q,k,r)=>{r.d(k,{xA:()=>W,zj:()=>v});var t=r(4650),T=r(9646),M=r(188),x=r(6451),D=r(7579),f=r(4968),P=r(1135),h=r(9300),z=r(6590),A=r(590),_=r(4004),$=r(3900),u=r(2722),p=r(6895);const S=["backdrop"],L=["dialog"];function B(n,a){if(1&n&&t.\u0275\u0275element(0,"div",6),2&n){const e=t.\u0275\u0275nextContext(),i=t.\u0275\u0275reference(3);t.\u0275\u0275property("dialogDragEnabled",!0)("dialogDragTarget",i)("dragConstraint",e.config.dragConstraint)}}function V(n,a){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",7),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.closeDialog())}),t.\u0275\u0275namespaceSVG(),t.\u0275\u0275elementStart(1,"svg",8),t.\u0275\u0275element(2,"path",9),t.\u0275\u0275elementEnd()()}}class v{}class b extends v{constructor(a={}){super(),this.beforeCloseGuards=[],this.mutate(a)}close(a){this.canClose(a).pipe((0,h.h)(Boolean)).subscribe({next:()=>this.onClose(a)})}beforeClose(a){this.beforeCloseGuards.push(a)}resetDrag(a){this.onReset(a)}canClose(a){const e=this.beforeCloseGuards.map(i=>i(a)).filter(i=>void 0!==i&&!0!==i).map(i=>"boolean"==typeof i?(0,T.of)(i):(0,M.D)(i).pipe((0,h.h)(o=>!o)));return(0,x.T)(...e).pipe((0,z.d)(!0),(0,A.P)())}mutate(a){Object.assign(this,a)}asDialogRef(){return this}}function m(n){return function H(n){return null==n}(n)?"":function U(n){return"string"==typeof n}(n)?n:`${n}px`}let w=(()=>{class n{constructor(){this.dialogDragEnabled=!1,this.host=(0,t.inject)(t.ElementRef),this.zone=(0,t.inject)(t.NgZone),this.delta={x:0,y:0},this.offset={x:0,y:0},this.enabled=!0,this.destroy$=new D.x}set dialogDragOffset(e){this.reset(e)}ngAfterViewInit(){this.enabled&&this.init()}ngOnChanges(){!this.enabled&&this.dialogDragEnabled&&this.dialogDragTarget&&(this.enabled=!0,this.handle?this.handle.style.setProperty("cursor","move"):this.enabled&&this.init()),this.dialogDragEnabled||(this.enabled=!1,this.handle&&this.handle.style.setProperty("cursor",""))}ngOnDestroy(){this.destroy$.next()}reset(e){const i={x:0,y:0};this.offset={...i,...e},this.delta={...i},this.translate()}setupEvents(){this.zone.runOutsideAngular(()=>{const e=(0,f.R)(this.handle,"mousedown"),i=(0,f.R)(document,"mousemove"),o=(0,f.R)(document,"mouseup");e.pipe((0,h.h)(()=>this.enabled),(0,_.U)(l=>({startX:l.clientX,startY:l.clientY})),(0,$.w)(({startX:l,startY:d})=>i.pipe((0,_.U)(c=>{c.preventDefault(),this.delta={x:c.clientX-l,y:c.clientY-d},"constrain"===this.dragConstraint&&this.checkConstraint()}),(0,u.R)(o))),(0,u.R)(this.destroy$)).subscribe(()=>{0===this.delta.x&&0===this.delta.y||this.translate()}),o.pipe((0,h.h)(()=>this.enabled),(0,h.h)(()=>0!==this.delta.x||0!==this.delta.y),(0,u.R)(this.destroy$)).subscribe(()=>{"bounce"===this.dragConstraint&&(this.checkConstraint(),this.translate()),this.offset.x+=this.delta.x,this.offset.y+=this.delta.y,this.delta={x:0,y:0}})})}translate(){this.target&&this.zone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this.handle.style.setProperty("transform",`translate(${this.translateX}px, ${this.translateY}px)`)})})}get translateX(){return this.offset.x+this.delta.x}get translateY(){return this.offset.y+this.delta.y}init(){if(!this.dialogDragTarget)throw new Error("You need to specify the drag target");this.handle=this.dialogDragHandle instanceof Element?this.dialogDragHandle:"string"==typeof this.dialogDragHandle&&this.dialogDragHandle?document.querySelector(this.dialogDragHandle):this.host.nativeElement,this.handle&&this.enabled&&this.handle.style.setProperty("cursor","move"),this.target=this.dialogDragTarget instanceof HTMLElement?this.dialogDragTarget:document.querySelector(this.dialogDragTarget),this.setupEvents(),this.translate()}checkConstraint(){const{width:e,height:i}=this.target.getBoundingClientRect(),{innerWidth:o,innerHeight:s}=window,l=this.translateY>0?this.translateY+i/2:this.translateY-i/2,d=s/2,c=this.translateX>0?this.translateX+e/2:this.translateX-e/2,g=o/2;-d>l&&(this.delta.y=i/2-d-this.offset.y),d<l&&(this.delta.y=d-i/2-this.offset.y),-g>c&&(this.delta.x=e/2-g-this.offset.x),g<c&&(this.delta.x=g-e/2-this.offset.x)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.\u0275\u0275defineDirective({type:n,selectors:[["","dialogDraggable",""]],inputs:{dialogDragHandle:"dialogDragHandle",dialogDragTarget:"dialogDragTarget",dialogDragEnabled:"dialogDragEnabled",dialogDragOffset:"dialogDragOffset",dragConstraint:"dragConstraint"},standalone:!0,features:[t.\u0275\u0275NgOnChangesFeature]}),n})();const C=new t.InjectionToken("A reference to the document. Useful for iframes that want appends to parent window",{providedIn:"root",factory:()=>(0,t.inject)(p.K0)}),y=new t.InjectionToken("config",{providedIn:"root",factory:()=>({})});const R=new t.InjectionToken("Global dialog config token",{providedIn:"root",factory:()=>function O(){return{id:void 0,container:(0,t.inject)(C).body,backdrop:!0,closeButton:!0,enableClose:!0,draggable:!1,dragConstraint:"none",resizable:!1,size:"md",windowClass:void 0,width:void 0,height:void 0,minHeight:void 0,maxHeight:void 0,data:void 0,vcr:void 0,sizes:{sm:{height:"auto",width:"400px"},md:{height:"auto",width:"560px"},lg:{height:"auto",width:"800px"},fullScreen:{height:"100%",width:"100%"}},onClose:void 0,onOpen:void 0}}()}),I=new t.InjectionToken("Nodes inserted into the dialog");let K=(()=>{class n{constructor(){this.config=(0,t.inject)(y),this.dialogRef=(0,t.inject)(b),this.size=this.config.sizes?.[this.config.size||"md"],this.styles={width:m(this.config.width||this.size?.width),height:m(this.config.height||this.size?.height),minHeight:m(this.config.minHeight||this.size?.minHeight),maxHeight:m(this.config.maxHeight||this.size?.maxHeight)},this.destroy$=new D.x,this.nodes=(0,t.inject)(I),this.document=(0,t.inject)(p.K0),this.host=(0,t.inject)(t.ElementRef).nativeElement,this.host.id=this.config.id,this.nodes.forEach(e=>this.host.appendChild(e)),this.config.windowClass&&this.config.windowClass.split(/\s/).filter(i=>i).forEach(i=>this.host.classList.add(i))}ngOnInit(){const i=this.dialogElement.nativeElement,o=(0,f.R)(this.config.backdrop?this.backdrop.nativeElement:this.document.body,"click",{capture:!0}).pipe((0,h.h)(({target:s})=>!i.contains(s)));o.pipe((0,u.R)(this.destroy$)).subscribe(this.dialogRef.backdropClick$),this.config.enableClose&&(0,x.T)((0,f.R)(this.document.body,"keyup").pipe((0,h.h)(({key:s})=>"Escape"===s)),o).pipe((0,u.R)(this.destroy$)).subscribe(()=>this.closeDialog()),this.nodes.forEach(s=>i.appendChild(s))}reset(e){this.config.draggable&&this.draggable.reset(e)}closeDialog(){this.dialogRef.close()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.dialogRef=null,this.nodes=null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ngneat-dialog"]],viewQuery:function(e,i){if(1&e&&(t.\u0275\u0275viewQuery(S,7),t.\u0275\u0275viewQuery(L,7),t.\u0275\u0275viewQuery(w,5)),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(i.backdrop=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(i.dialogElement=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(i.draggable=o.first)}},standalone:!0,features:[t.\u0275\u0275StandaloneFeature],decls:6,vars:8,consts:[[1,"ngneat-dialog-backdrop",3,"hidden"],["backdrop",""],[1,"ngneat-dialog-content",3,"ngStyle"],["dialog",""],["class","ngneat-drag-marker","dialogDraggable","",3,"dialogDragEnabled","dialogDragTarget","dragConstraint",4,"ngIf"],["class","ngneat-close-dialog",3,"click",4,"ngIf"],["dialogDraggable","",1,"ngneat-drag-marker",3,"dialogDragEnabled","dialogDragTarget","dragConstraint"],[1,"ngneat-close-dialog",3,"click"],["viewBox","0 0 329.26933 329","xmlns","http://www.w3.org/2000/svg"],["fill","currentColor","d","m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0"]],template:function(e,i){1&e&&(t.\u0275\u0275elementStart(0,"div",0,1)(2,"div",2,3),t.\u0275\u0275template(4,B,1,3,"div",4),t.\u0275\u0275template(5,V,3,0,"div",5),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275classProp("ngneat-dialog-backdrop-visible",i.config.backdrop),t.\u0275\u0275property("hidden",!i.config.backdrop),t.\u0275\u0275advance(2),t.\u0275\u0275classProp("ngneat-dialog-resizable",i.config.resizable),t.\u0275\u0275property("ngStyle",i.styles),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",i.config.draggable),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.config.closeButton))},dependencies:[w,p.ez,p.O5,p.PC],styles:[".ngneat-dialog-content{display:flex;flex-direction:column;overflow:hidden;position:relative;animation:dialog-open .4s cubic-bezier(.25,.8,.25,1);border-radius:var(--dialog-content-border-radius, 4px);box-sizing:border-box;box-shadow:var(--dialog-content-box-shadow, 0px 11px 19px rgba(15, 20, 58, .14));background:var(--dialog-content-bg, #fff);width:auto;max-width:100%;height:auto;max-height:100%}@keyframes dialog-open{0%{transform:translate(50px)}to{transform:none}}.ngneat-dialog-content.ngneat-dialog-resizable{resize:both}.ngneat-dialog-backdrop{position:fixed;display:flex;align-items:center;justify-content:center;inset:0;height:100%;width:100%;padding:30px;z-index:var(--dialog-backdrop-z-index, 1050);background-color:transparent;animation:dialog-open-backdrop .3s}.ngneat-dialog-backdrop.ngneat-dialog-backdrop-visible{background:var(--dialog-backdrop-bg, rgba(0, 0, 0, .32))}@keyframes dialog-open-backdrop{0%{opacity:0}to{opacity:1}}.ngneat-drag-marker{position:absolute;left:0;top:0;cursor:move;width:100%;height:10px;z-index:var(--dialog-drag-marker-z-index, 1051)}.ngneat-close-dialog{display:flex;align-items:center;justify-content:center;position:absolute;cursor:pointer;top:var(--dialog-close-btn-top, 6px);right:var(--dialog-close-btn-right, 10px);width:var(--dialog-close-btn-size, 30px);height:var(--dialog-close-btn-size, 30px);color:var(--dialog-close-btn-color, #5f6368);transition:all .2s ease-in-out;z-index:var(--dialog-close-z-index, 1051);border-radius:50%}.ngneat-close-dialog svg{width:var(--dialog-close-svg-size, 12px);height:var(--dialog-close-svg-size, 12px)}.ngneat-close-dialog:hover{color:var(--dialog-close-btn-color-hover, #5f6368);background-color:var(--dialog-close-btn-bg-hover, #eee)}body.ngneat-dialog-hidden{overflow:hidden}\n"],encapsulation:2}),n})();const j="ngneat-dialog-hidden";let W=(()=>{class n{constructor(){this.appRef=(0,t.inject)(t.ApplicationRef),this.injector=(0,t.inject)(t.EnvironmentInjector),this.document=(0,t.inject)(C),this.globalConfig=(0,t.inject)(R),this.dialogs=[],this.hasOpenDialogSub=new P.X(!1),this.hasOpenDialogs$=this.hasOpenDialogSub.asObservable()}hasOpenDialogs(){return this.dialogs.length>0}isOpen(e){return this.dialogs.some(i=>i.id===e)}closeAll(){this.dialogs.forEach(e=>e.close())}open(e,i={}){const o=this.mergeConfig(i);o.onOpen?.();const s=new b({id:o.id,data:o.data,backdropClick$:new D.x});this.throwIfIDAlreadyExists(o.id);const l={config:o,dialogRef:s};return this.dialogs.push(s),this.hasOpenDialogSub.next(!0),1===this.dialogs.length&&this.document.body.classList.add(j),e instanceof t.TemplateRef?this.openTemplate(e,l):"function"==typeof e?this.openComponent(e,l):function F(n){throw new TypeError(`Dialog must receive a Component or a TemplateRef, but this has been passed instead: ${n}`)}(e)}openTemplate(e,{config:i,dialogRef:o}){const s={$implicit:o,config:i},l=i.vcr?.createEmbeddedView(e,s)||e.createEmbeddedView(s);return this.attach({dialogRef:o,config:i,ref:e,view:l,attachToApp:!i.vcr})}openComponent(e,{config:i,dialogRef:o}){const s=(0,t.createComponent)(e,{elementInjector:t.Injector.create({providers:[{provide:v,useValue:o},{provide:y,useValue:i}],parent:i.vcr?.injector||this.injector}),environmentInjector:this.injector});return this.attach({dialogRef:o,config:i,ref:s,view:s.hostView,attachToApp:!0})}attach({dialogRef:e,config:i,ref:o,view:s,attachToApp:l}){const d=this.createDialog(i,e,s),c=i.container instanceof t.ElementRef?i.container.nativeElement:i.container,g={after:new D.x};return e.mutate({id:i.id,data:i.data,ref:o,onClose:E=>{this.globalConfig.onClose?.(),this.dialogs=this.dialogs.filter(({id:Y})=>e.id!==Y),this.hasOpenDialogSub.next(this.hasOpenDialogs()),c.removeChild(d.location.nativeElement),this.appRef.detachView(d.hostView),this.appRef.detachView(s),d.destroy(),s.destroy(),e.backdropClick$.complete(),e.mutate({ref:null,onClose:null,afterClosed$:null,backdropClick$:null,beforeCloseGuards:null,onReset:null}),g.after.next(E),g.after.complete(),0===this.dialogs.length&&this.document.body.classList.remove(j)},afterClosed$:g.after.asObservable(),onReset:E=>{d.instance.reset(E)}}),c.appendChild(d.location.nativeElement),this.appRef.attachView(d.hostView),l&&this.appRef.attachView(s),e.asDialogRef()}createDialog(e,i,o){return(0,t.createComponent)(K,{elementInjector:t.Injector.create({providers:[{provide:b,useValue:i},{provide:I,useValue:o.rootNodes},{provide:y,useValue:e}],parent:this.injector}),environmentInjector:this.injector})}mergeConfig(e){return{...this.globalConfig,id:`dialog-${Math.random().toString(36).substring(7)}`,...e,sizes:this.globalConfig?.sizes}}throwIfIDAlreadyExists(e){if(this.dialogs.find(i=>i.id===e))throw new Error(`Please, ID must be unique, but there is already a dialog created with this ID: ${e}`)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}]);