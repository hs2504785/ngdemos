"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[5515],{8403:(M,I,s)=>{s.d(I,{K:()=>S});var g=s(5304),n=s(3668),p=s(9133),b=s(8167),E=s(138),U=s(86);let S=(()=>{class f{constructor(c,u,l){this.fb=c,this.dialogRef=u,this.dialogTitle=l.dialogTitle,this.user=l.user,this.mode=l.mode;const m={email:[""],first_name:[""],last_name:[""]};"update"==this.mode?(this.form=this.fb.group(m),this.form.patchValue(Object.assign({},this.user))):"create"==this.mode&&(this.form=this.fb.group(Object.assign({},m)))}onClose(){this.dialogRef.close()}onSave(){const c=Object.assign(Object.assign({},this.user),this.form.value);"update"==this.mode?(console.log("Update User",c),this.dialogRef.close(c)):"create"==this.mode&&(console.log("Add User",c),c.avatar="https://reqres.in/img/faces/10-image.jpg",this.dialogRef.close(c))}}return f.\u0275fac=function(c){return new(c||f)(n.\u0275\u0275directiveInject(p.qu),n.\u0275\u0275directiveInject(g.so),n.\u0275\u0275directiveInject(g.WI))},f.\u0275cmp=n.\u0275\u0275defineComponent({type:f,selectors:[["app-user-cs-dialog"]],decls:16,vars:2,consts:[["mat-dialog-title",""],[3,"formGroup"],["matInput","","placeholder","Email","formControlName","email"],["matInput","","placeholder","First Name","formControlName","first_name"],["matInput","","placeholder","Last Name","formControlName","last_name"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(c,u){1&c&&(n.\u0275\u0275elementStart(0,"h2",0),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(2,"mat-dialog-content"),n.\u0275\u0275elementContainerStart(3),n.\u0275\u0275elementContainerStart(4,1),n.\u0275\u0275elementStart(5,"mat-form-field"),n.\u0275\u0275element(6,"input",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"mat-form-field"),n.\u0275\u0275element(8,"input",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"mat-form-field"),n.\u0275\u0275element(10,"input",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"mat-dialog-actions"),n.\u0275\u0275elementStart(12,"button",5),n.\u0275\u0275listener("click",function(){return u.onClose()}),n.\u0275\u0275text(13,"Close"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(14,"button",6),n.\u0275\u0275listener("click",function(){return u.onSave()}),n.\u0275\u0275text(15,"Save"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&c&&(n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(u.dialogTitle),n.\u0275\u0275advance(3),n.\u0275\u0275property("formGroup",u.form))},directives:[g.uh,g.xY,p.JL,p.sg,b.KE,E.Nt,p.Fj,p.JJ,p.u,g.H8,U.lW],styles:[""],changeDetection:0}),f})()},9995:(M,I,s)=>{s.d(I,{O:()=>J});var g=s(5548),n=s(1346),p=s(2907),b=s(466),E=s(7214),U=s(2411),S=s(1720),f=s(7575),j=s(540),c=s(2668),u=s(3405),l=s(6700),m=s(5571),C=s(8805),x=s(6636),$=s(8053),T=s(5389),A=s(4102),v=s(3668);function P(){return o=>new g.y(h=>{let t,i;const e=new n.w;return e.add(o.subscribe({complete:()=>{t&&h.next(i),h.complete()},error:r=>{h.error(r)},next:r=>{i=r,t||(t=p.E.schedule(()=>{h.next(i),t=void 0}),e.add(t))}})),e})}const L=new v.InjectionToken("@ngrx/component-store Initial State");let K=(()=>{class o{constructor(t){this.destroySubject$=new b.t(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new b.t(1),this.isInitialized=!1,this.notInitializedErrorMessage=`${this.constructor.name} has not been initialized yet. Please make sure it is initialized before updating/getting.`,this.state$=this.select(i=>i),t&&this.initState(t)}ngOnDestroy(){this.stateSubject$.complete(),this.destroySubject$.next()}updater(t){return i=>{let e;const a=((0,E.b)(i)?i:(0,U.of)(i)).pipe((0,l.b)(d=>this.isInitialized?(0,S.x)([d],f.N).pipe((0,m.M)(this.stateSubject$)):(0,j._)(new Error(this.notInitializedErrorMessage))),(0,C.R)(this.destroy$)).subscribe({next:([d,Q])=>{this.stateSubject$.next(t(Q,d))},error:d=>{e=d,this.stateSubject$.error(d)}});if(e)throw e;return a}}initState(t){(0,S.x)([t],f.N).subscribe(i=>{this.isInitialized=!0,this.stateSubject$.next(i)})}setState(t){"function"!=typeof t?this.initState(t):this.updater(t)()}patchState(t){const i="function"==typeof t?t(this.get()):t;this.updater((e,r)=>Object.assign(Object.assign({},e),r))(i)}get(t){if(!this.isInitialized)throw new Error(this.notInitializedErrorMessage);let i;return this.stateSubject$.pipe((0,x.q)(1)).subscribe(e=>{i=t?t(e):e}),i}select(...t){const{observables:i,projector:e,config:r}=function(o){const h=Array.from(o);let i,t={debounce:!1};const e=h.pop();return"function"!=typeof e?(t=Object.assign(Object.assign({},t),e),i=h.pop()):i=e,{observables:h,projector:i,config:t}}(t);let a;return a=0===i.length?this.stateSubject$.pipe(r.debounce?P():d=>d,(0,$.U)(e)):(0,c.aj)(i).pipe(r.debounce?P():d=>d,(0,$.U)(d=>e(...d))),a.pipe((0,T.x)(),(0,A.d)({refCount:!0,bufferSize:1}),(0,C.R)(this.destroy$))}effect(t){const i=new u.xQ;return t(i).pipe((0,C.R)(this.destroy$)).subscribe(),e=>((0,E.b)(e)?e:(0,U.of)(e)).pipe((0,C.R)(this.destroy$)).subscribe(a=>{i.next(a)})}}return o.\u0275fac=function(t){return new(t||o)(v.\u0275\u0275inject(L,8))},o.\u0275prov=v.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o})();var y=s(172),R=s(9204),D=s(1366),O=s(2047),N=s(4522),W=s(4776);let B=(()=>{class o{constructor(t,i){this.http=t,this.cacheService=i,this.API_URL="https://reqres.in/api/users"}getUsers(){return this.cacheService.getData(`${this.API_URL}`).pipe((0,$.U)(t=>t.data))}addUser(t){return this.http.post(`${this.API_URL}`,t)}updateUser(t){return this.http.put(`${this.API_URL}/${t.id}`,t)}removeUser(t){return this.http.delete(`${this.API_URL}/${t}`)}}return o.\u0275fac=function(t){return new(t||o)(v.\u0275\u0275inject(N.eN),v.\u0275\u0275inject(W.Q))},o.\u0275prov=v.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var F=s(9843);let J=(()=>{class o extends K{constructor(t,i){super({users:[],selectdUserId:1}),this.userCsService=t,this.route=i,this.users$=this.select(e=>e.users),this.selectedUserId$=this.select(e=>e.selectdUserId),this.usersCount$=this.select(this.users$,e=>e.length),this.top3users$=this.select(this.users$,e=>e.slice(0,3)),this.userById$=this.select(this.users$,this.selectedUserId$,(e,r)=>e.find(a=>a.id===r)),this.getUsers=this.effect(e=>e.pipe((0,R.w)(()=>this.userCsService.getUsers().pipe((0,D.b)({next:r=>this.setUsers(r),error:r=>this.logError(r)}),(0,O.K)(()=>y.E))))),this.addUser=this.effect(e=>e.pipe((0,R.w)(r=>this.userCsService.addUser(r).pipe((0,D.b)({next:a=>this.addUserInStore(a),error:a=>this.logError(a)}),(0,O.K)(()=>y.E))))),this.updateUser=this.effect(e=>e.pipe((0,R.w)(r=>this.userCsService.updateUser(r).pipe((0,D.b)({next:a=>this.updateUserInStore(a),error:a=>this.logError(a)}),(0,O.K)(()=>y.E))))),this.removeUser=this.effect(e=>e.pipe((0,R.w)(r=>this.userCsService.removeUser(+r).pipe((0,D.b)({next:a=>this.removeUserFromStore(r),error:a=>this.logError(a)}),(0,O.K)(()=>y.E))))),this.setUsers=this.updater((e,r)=>Object.assign(Object.assign({},e),{users:[...e.users,...r]})),this.addUserInStore=this.updater((e,r)=>Object.assign(Object.assign({},e),{users:[r,...e.users]})),this.removeUserFromStore=this.updater((e,r)=>Object.assign(Object.assign({},e),{users:e.users.filter(a=>a.id!==+r)})),this.updateUserInStore=this.updater((e,r)=>Object.assign(Object.assign({},e),{users:e.users.map(a=>a.id===r.id?r:a)}))}logError(t){console.log("Errr",t)}}return o.\u0275fac=function(t){return new(t||o)(v.\u0275\u0275inject(B),v.\u0275\u0275inject(F.gz))},o.\u0275prov=v.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac}),o})()},4776:(M,I,s)=>{s.d(I,{Q:()=>j});var g=s(2411),n=s(466),p=s(6087),E=s(5234),U=s(1366),S=s(3668),f=s(4522);let j=(()=>{class c{constructor(l){this.http=l,this.responseCache=new Map}getData(l){const m=this.responseCache.get(l);return m?(0,g.of)(m):this.http.get(l).pipe(function(c,u,l,m){const x=new n.t(1,void 0,m);return $=>(0,p.O)(()=>x,undefined)($)}(),(0,E.x)(),(0,U.b)(C=>{this.responseCache.set(l,C)}))}clearCache(){this.responseCache.clear()}}return c.\u0275fac=function(l){return new(l||c)(S.\u0275\u0275inject(f.eN))},c.\u0275prov=S.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);