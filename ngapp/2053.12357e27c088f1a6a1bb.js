(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[2053],{2053:(e,t,n)=>{"use strict";n.r(t),n.d(t,{SearchSortPaginateModule:()=>S});var r=n(1116),s=n(766),i=n(5366),a=n(2693);let c=(()=>{class e{constructor(e){this.http=e,this.API_URL="https://hksocket.herokuapp.com/api/products"}getProducts(){return this.http.get(`${this.API_URL}/frontend`)}getPaginatedProducts(e){let t=new a.LE;return e.s&&(t=t.set("s",e.s)),e.sort&&(t=t.set("sort",e.sort)),e.page&&(t=t.set("page",e.page.toString())),this.http.get(`${this.API_URL}/backend`,{params:t})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](a.eN))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function o(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",9),i["\u0275\u0275elementStart"](1,"div",10),i["\u0275\u0275element"](2,"img",11),i["\u0275\u0275elementStart"](3,"div",12),i["\u0275\u0275elementStart"](4,"p",13),i["\u0275\u0275text"](5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",14),i["\u0275\u0275elementStart"](7,"small",15),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("src",e.image,i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](e.title),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("$",e.price,"")}}function l(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",16),i["\u0275\u0275elementStart"](1,"button",17),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().loadMore()}),i["\u0275\u0275text"](2,"Load More"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}let d=(()=>{class e{constructor(){this.products=[],this.setFilters=new i.EventEmitter}search(e){this.setFilters.emit(Object.assign(Object.assign({},this.filter),{s:e,page:1}))}sort(e){this.setFilters.emit(Object.assign(Object.assign({},this.filter),{sort:e,page:1}))}loadMore(){this.setFilters.emit(Object.assign(Object.assign({},this.filter),{page:this.filter.page+1}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-products"]],inputs:{products:"products",filter:"filter",lastPage:"lastPage"},outputs:{setFilters:"setFilters"},decls:13,vars:2,consts:[[1,"col-md-12","mb-4","input-group"],["placeholder","Search",1,"form-control",3,"keyup"],[1,"input-group-append"],[1,"form-select",3,"change"],["value","asc"],["value","desc"],[1,"row","row-cols-1","row-cols-sm-2","row-cols-md-3","g-3"],["class","col mb-4",4,"ngFor","ngForOf"],["class","d-flex justify-content-center mt-4",4,"ngIf"],[1,"col","mb-4"],[1,"card","shadow-sm"],["height","200",3,"src"],[1,"card-body"],[1,"card-text"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-muted"],[1,"d-flex","justify-content-center","mt-4"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"input",1),i["\u0275\u0275listener"]("keyup",function(e){return t.search(e.target.value)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275elementStart"](3,"select",3),i["\u0275\u0275listener"]("change",function(e){return t.sort(e.target.value)}),i["\u0275\u0275elementStart"](4,"option"),i["\u0275\u0275text"](5,"Select"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"option",4),i["\u0275\u0275text"](7,"Price Ascending"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"option",5),i["\u0275\u0275text"](9,"Price Descending"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",6),i["\u0275\u0275template"](11,o,9,3,"div",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](12,l,3,0,"div",8)),2&e&&(i["\u0275\u0275advance"](11),i["\u0275\u0275property"]("ngForOf",t.products),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.filter.page<t.lastPage))},directives:[r.sg,r.O5],styles:[""]}),e})(),p=(()=>{class e{constructor(e,t){this.productService=e,this.cd=t,this.products=[],this.filter={s:"",sort:"",page:1},this.lastPage=0}ngOnInit(){this.load(this.filter)}load(e){this.filter=e,this.productService.getPaginatedProducts(e).subscribe(t=>{this.products=1===e.page?t.data:[...this.products,...t.data],this.lastPage=t.last_page,this.cd.detectChanges()})}setFilters(e){this.load(e)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](c),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-backend"]],decls:1,vars:3,consts:[[3,"products","filter","lastPage","setFilters"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"app-products",0),i["\u0275\u0275listener"]("setFilters",function(e){return t.setFilters(e)}),i["\u0275\u0275elementEnd"]()),2&e&&i["\u0275\u0275property"]("products",t.products)("filter",t.filter)("lastPage",t.lastPage)},directives:[d],styles:[""]}),e})(),u=(()=>{class e{transform(e,t){return console.log(t),"asc"!==t&&"desc"!==t||e.sort((e,n)=>{const r=e.price-n.price;if(0===r)return 0;const s=Math.abs(r)/r;return"asc"===t?s:-s}),e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i["\u0275\u0275definePipe"]({name:"sort",type:e,pure:!0}),e})(),m=(()=>{class e{transform(e,t){return e.filter(e=>e.title.toLowerCase().indexOf(t.toLowerCase())>=0||e.description.toLowerCase().indexOf(t.toLowerCase())>=0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i["\u0275\u0275definePipe"]({name:"search",type:e,pure:!0}),e})();function f(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"app-products",1),i["\u0275\u0275listener"]("setFilters",function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().filter=t}),i["\u0275\u0275pipe"](2,"sort"),i["\u0275\u0275pipe"](3,"search"),i["\u0275\u0275pipe"](4,"search"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("products",i["\u0275\u0275pipeBind2"](2,3,i["\u0275\u0275pipeBind2"](3,6,e,n.filter.s),n.filter.sort))("filter",n.filter)("lastPage",n.lastPage(i["\u0275\u0275pipeBind2"](4,9,e,n.filter.s)))}}let g=(()=>{class e{constructor(e){this.productService=e,this.products$=this.productService.getProducts(),this.filter={s:"",sort:"",page:1},this.perPage=9}ngOnInit(){}lastPage(e){return Math.ceil(e.length/this.perPage)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](c))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-frontend"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"products","filter","lastPage","setFilters"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,f,5,12,"ng-container",0),i["\u0275\u0275pipe"](1,"async")),2&e&&i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](1,1,t.products$))},directives:[r.O5,d],pipes:[r.Ov,u,m],styles:[""]}),e})();const h=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-search-sort-paginate"]],decls:12,vars:0,consts:[[1,"container"],[1,"d-flex","justify-content-center","py-3"],[1,"nav","nav-pills"],[1,"nav-item"],["routerLink","frontend","routerLinkActive","active",1,"nav-link"],["routerLink","backend","routerLinkActive","active",1,"nav-link"],[1,"album","py-5","bg-light"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"header",1),i["\u0275\u0275elementStart"](2,"ul",2),i["\u0275\u0275elementStart"](3,"li",3),i["\u0275\u0275elementStart"](4,"a",4),i["\u0275\u0275text"](5,"Frontend"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"li",3),i["\u0275\u0275elementStart"](7,"a",5),i["\u0275\u0275text"](8,"Backend"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"div",6),i["\u0275\u0275elementStart"](10,"div",0),i["\u0275\u0275element"](11,"router-outlet"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())},directives:[s.yS,s.Od,s.lC],styles:[""],changeDetection:0}),e})(),children:[{path:"frontend",component:g},{path:"backend",component:p},{path:"",redirectTo:"frontend"}]}];let v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[s.Bz.forChild(h)],s.Bz]}),e})(),S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.ez,v]]}),e})()}}]);