(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[8146],{8126:(e,t,s)=>{"use strict";s.d(t,{K:()=>l});var r=s(2935),i=s(5366),n=s(1041),o=s(3070),a=s(9550),c=s(4369);let l=(()=>{class e{constructor(e,t,s){this.fb=e,this.dialogRef=t,this.dialogTitle=s.dialogTitle,this.user=s.user,this.mode=s.mode;const r={email:[""],first_name:[""],last_name:[""]};"update"==this.mode?(this.form=this.fb.group(r),this.form.patchValue(Object.assign({},this.user))):"create"==this.mode&&(this.form=this.fb.group(Object.assign({},r)))}onClose(){this.dialogRef.close()}onSave(){const e=Object.assign(Object.assign({},this.user),this.form.value);"update"==this.mode?(console.log("Update User",e),this.dialogRef.close(e)):"create"==this.mode&&(console.log("Add User",e),e.avatar="https://reqres.in/img/faces/10-image.jpg",this.dialogRef.close(e))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](n.qu),i["\u0275\u0275directiveInject"](r.so),i["\u0275\u0275directiveInject"](r.WI))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-user-cs-dialog"]],decls:16,vars:2,consts:[["mat-dialog-title",""],[3,"formGroup"],["matInput","","placeholder","Email","formControlName","email"],["matInput","","placeholder","First Name","formControlName","first_name"],["matInput","","placeholder","Last Name","formControlName","last_name"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"h2",0),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](2,"mat-dialog-content"),i["\u0275\u0275elementContainerStart"](3),i["\u0275\u0275elementContainerStart"](4,1),i["\u0275\u0275elementStart"](5,"mat-form-field"),i["\u0275\u0275element"](6,"input",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mat-form-field"),i["\u0275\u0275element"](8,"input",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"mat-form-field"),i["\u0275\u0275element"](10,"input",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"mat-dialog-actions"),i["\u0275\u0275elementStart"](12,"button",5),i["\u0275\u0275listener"]("click",function(){return t.onClose()}),i["\u0275\u0275text"](13,"Close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"button",6),i["\u0275\u0275listener"]("click",function(){return t.onSave()}),i["\u0275\u0275text"](15,"Save"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](t.dialogTitle),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.form))},directives:[r.uh,r.xY,n.JL,n.sg,o.KE,a.Nt,n.Fj,n.JJ,n.u,r.H8,c.lW],styles:[""],changeDetection:0}),e})()},548:(e,t,s)=>{"use strict";s.d(t,{O:()=>z});var r=s(8318),i=s(7570),n=s(2709),o=s(6019),a=s(4710),c=s(878),l=s(1277),u=s(8489),h=s(1225),d=s(1305),p=s(5959),m=s(436),f=s(2728),b=s(5416),g=s(611),j=s(9996),S=s(8720),I=s(8303),U=s(5366);function v(){return e=>new r.y(t=>{let s,r;const o=new i.w;return o.add(e.subscribe({complete:()=>{s&&t.next(r),t.complete()},error:e=>{t.error(e)},next:e=>{r=e,s||(s=n.E.schedule(()=>{t.next(r),s=void 0}),o.add(s))}})),o})}const $=new U.InjectionToken("@ngrx/component-store Initial State");let E=(()=>{class e{constructor(e){this.destroySubject$=new o.t(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new o.t(1),this.isInitialized=!1,this.notInitializedErrorMessage=`${this.constructor.name} has not been initialized yet. Please make sure it is initialized before updating/getting.`,this.state$=this.select(e=>e),e&&this.initState(e)}ngOnDestroy(){this.stateSubject$.complete(),this.destroySubject$.next()}updater(e){return t=>{let s;const r=((0,a.b)(t)?t:(0,c.of)(t)).pipe((0,m.b)(e=>this.isInitialized?(0,l.x)([e],u.N).pipe((0,f.M)(this.stateSubject$)):(0,h._)(new Error(this.notInitializedErrorMessage))),(0,b.R)(this.destroy$)).subscribe({next:([t,s])=>{this.stateSubject$.next(e(s,t))},error:e=>{s=e,this.stateSubject$.error(e)}});if(s)throw s;return r}}initState(e){(0,l.x)([e],u.N).subscribe(e=>{this.isInitialized=!0,this.stateSubject$.next(e)})}setState(e){"function"!=typeof e?this.initState(e):this.updater(e)()}patchState(e){const t="function"==typeof e?e(this.get()):e;this.updater((e,t)=>Object.assign(Object.assign({},e),t))(t)}get(e){if(!this.isInitialized)throw new Error(this.notInitializedErrorMessage);let t;return this.stateSubject$.pipe((0,g.q)(1)).subscribe(s=>{t=e?e(s):s}),t}select(...e){const{observables:t,projector:s,config:r}=function(e){const t=Array.from(e);let s,r={debounce:!1};const i=t.pop();return"function"!=typeof i?(r=Object.assign(Object.assign({},r),i),s=t.pop()):s=i,{observables:t,projector:s,config:r}}(e);let i;return i=0===t.length?this.stateSubject$.pipe(r.debounce?v():e=>e,(0,j.U)(s)):(0,d.aj)(t).pipe(r.debounce?v():e=>e,(0,j.U)(e=>s(...e))),i.pipe((0,S.x)(),(0,I.d)({refCount:!0,bufferSize:1}),(0,b.R)(this.destroy$))}effect(e){const t=new p.xQ;return e(t).pipe((0,b.R)(this.destroy$)).subscribe(),e=>((0,a.b)(e)?e:(0,c.of)(e)).pipe((0,b.R)(this.destroy$)).subscribe(e=>{t.next(e)})}}return e.\u0275fac=function(t){return new(t||e)(U["\u0275\u0275inject"]($,8))},e.\u0275prov=U["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();var x=s(653),y=s(4689),w=s(4019),C=s(7727),O=s(2693);let k=(()=>{class e{constructor(e){this.http=e,this.API_URL="https://reqres.in/api/users"}getUsers(){return this.http.get(`${this.API_URL}`).pipe((0,j.U)(e=>e.data))}addUser(e){return this.http.post(`${this.API_URL}`,e)}updateUser(e){return this.http.put(`${this.API_URL}/${e.id}`,e)}removeUser(e){return this.http.delete(`${this.API_URL}/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(U["\u0275\u0275inject"](O.eN))},e.\u0275prov=U["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var R=s(766);let z=(()=>{class e extends E{constructor(e,t){super({users:[],selectdUserId:1}),this.userCsService=e,this.route=t,this.users$=this.select(e=>e.users),this.selectedUserId$=this.select(e=>e.selectdUserId),this.usersCount$=this.select(this.users$,e=>e.length),this.top3users$=this.select(this.users$,e=>e.slice(0,3)),this.userById$=this.select(this.users$,this.selectedUserId$,(e,t)=>e.find(e=>e.id===t)),this.getUsers=this.effect(e=>e.pipe((0,y.w)(()=>this.userCsService.getUsers().pipe((0,w.b)({next:e=>this.setUsers(e),error:e=>this.logError(e)}),(0,C.K)(()=>x.E))))),this.addUser=this.effect(e=>e.pipe((0,y.w)(e=>this.userCsService.addUser(e).pipe((0,w.b)({next:e=>this.addUserInStore(e),error:e=>this.logError(e)}),(0,C.K)(()=>x.E))))),this.updateUser=this.effect(e=>e.pipe((0,y.w)(e=>this.userCsService.updateUser(e).pipe((0,w.b)({next:e=>this.updateUserInStore(e),error:e=>this.logError(e)}),(0,C.K)(()=>x.E))))),this.removeUser=this.effect(e=>e.pipe((0,y.w)(e=>this.userCsService.removeUser(+e).pipe((0,w.b)({next:t=>this.removeUserFromStore(e),error:e=>this.logError(e)}),(0,C.K)(()=>x.E))))),this.setUsers=this.updater((e,t)=>Object.assign(Object.assign({},e),{users:[...e.users,...t]})),this.addUserInStore=this.updater((e,t)=>Object.assign(Object.assign({},e),{users:[t,...e.users]})),this.removeUserFromStore=this.updater((e,t)=>Object.assign(Object.assign({},e),{users:e.users.filter(e=>e.id!==+t)})),this.updateUserInStore=this.updater((e,t)=>Object.assign(Object.assign({},e),{users:e.users.map(e=>e.id===t.id?t:e)}))}logError(e){console.log("Errr",e)}}return e.\u0275fac=function(t){return new(t||e)(U["\u0275\u0275inject"](k),U["\u0275\u0275inject"](R.gz))},e.\u0275prov=U["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})()}}]);