"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[7738],{7738:(k,d,s)=>{s.r(d),s.d(d,{SearchSortPaginateModule:()=>E});var c=s(6019),l=s(9843),e=s(3668),m=s(4522);let u=(()=>{class n{constructor(t){this.http=t,this.API_URL="https://hksocket.herokuapp.com/api/products"}getProducts(){return this.http.get(`${this.API_URL}/frontend`)}getPaginatedProducts(t){let r=new m.LE;return t.s&&(r=r.set("s",t.s)),t.sort&&(r=r.set("sort",t.sort)),t.page&&(r=r.set("page",t.page.toString())),this.http.get(`${this.API_URL}/backend`,{params:r})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(m.eN))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function h(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div",9),e.\u0275\u0275elementStart(1,"div",10),e.\u0275\u0275element(2,"img",11),e.\u0275\u0275elementStart(3,"div",12),e.\u0275\u0275elementStart(4,"p",13),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",14),e.\u0275\u0275elementStart(7,"small",15),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&n){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275property("src",t.image,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.title),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("$",t.price,"")}}function S(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",16),e.\u0275\u0275elementStart(1,"button",17),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().loadMore()}),e.\u0275\u0275text(2,"Load More"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}}let f=(()=>{class n{constructor(){this.products=[],this.setFilters=new e.EventEmitter}search(t){this.setFilters.emit(Object.assign(Object.assign({},this.filter),{s:t,page:1}))}sort(t){this.setFilters.emit(Object.assign(Object.assign({},this.filter),{sort:t,page:1}))}loadMore(){this.setFilters.emit(Object.assign(Object.assign({},this.filter),{page:this.filter.page+1}))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-products"]],inputs:{products:"products",filter:"filter",lastPage:"lastPage"},outputs:{setFilters:"setFilters"},decls:13,vars:2,consts:[[1,"col-md-12","mb-4","input-group"],["placeholder","Search",1,"form-control",3,"keyup"],[1,"input-group-append"],[1,"form-select",3,"change"],["value","asc"],["value","desc"],[1,"row","row-cols-1","row-cols-sm-2","row-cols-md-3","g-3"],["class","col mb-4",4,"ngFor","ngForOf"],["class","d-flex justify-content-center mt-4",4,"ngIf"],[1,"col","mb-4"],[1,"card","shadow-sm"],["height","200",3,"src"],[1,"card-body"],[1,"card-text"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-muted"],[1,"d-flex","justify-content-center","mt-4"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"input",1),e.\u0275\u0275listener("keyup",function(a){return r.search(a.target.value)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"select",3),e.\u0275\u0275listener("change",function(a){return r.sort(a.target.value)}),e.\u0275\u0275elementStart(4,"option"),e.\u0275\u0275text(5,"Select"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"option",4),e.\u0275\u0275text(7,"Price Ascending"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"option",5),e.\u0275\u0275text(9,"Price Descending"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275template(11,h,9,3,"div",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,S,3,0,"div",8)),2&t&&(e.\u0275\u0275advance(11),e.\u0275\u0275property("ngForOf",r.products),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.filter.page<r.lastPage))},directives:[c.sg,c.O5],styles:[""]}),n})(),v=(()=>{class n{constructor(t,r){this.productService=t,this.cd=r,this.products=[],this.filter={s:"",sort:"",page:1},this.lastPage=0}ngOnInit(){this.load(this.filter)}load(t){this.filter=t,this.productService.getPaginatedProducts(t).subscribe(r=>{this.products=1===t.page?r.data:[...this.products,...r.data],this.lastPage=r.last_page,this.cd.detectChanges()})}setFilters(t){this.load(t)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(u),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-backend"]],decls:1,vars:3,consts:[[3,"products","filter","lastPage","setFilters"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"app-products",0),e.\u0275\u0275listener("setFilters",function(a){return r.setFilters(a)}),e.\u0275\u0275elementEnd()),2&t&&e.\u0275\u0275property("products",r.products)("filter",r.filter)("lastPage",r.lastPage)},directives:[f],styles:[""]}),n})(),P=(()=>{class n{transform(t,r){return console.log(r),("asc"===r||"desc"===r)&&t.sort((i,a)=>{const p=i.price-a.price;if(0===p)return 0;const g=Math.abs(p)/p;return"asc"===r?g:-g}),t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.\u0275\u0275definePipe({name:"sort",type:n,pure:!0}),n})(),C=(()=>{class n{transform(t,r){return t.filter(i=>i.title.toLowerCase().indexOf(r.toLowerCase())>=0||i.description.toLowerCase().indexOf(r.toLowerCase())>=0)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.\u0275\u0275definePipe({name:"search",type:n,pure:!0}),n})();function y(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"app-products",1),e.\u0275\u0275listener("setFilters",function(i){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().filter=i}),e.\u0275\u0275pipe(2,"sort"),e.\u0275\u0275pipe(3,"search"),e.\u0275\u0275pipe(4,"search"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=o.ngIf,r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("products",e.\u0275\u0275pipeBind2(2,3,e.\u0275\u0275pipeBind2(3,6,t,r.filter.s),r.filter.sort))("filter",r.filter)("lastPage",r.lastPage(e.\u0275\u0275pipeBind2(4,9,t,r.filter.s)))}}const _=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-search-sort-paginate"]],decls:12,vars:0,consts:[[1,"container"],[1,"d-flex","justify-content-center","py-3"],[1,"nav","nav-pills"],[1,"nav-item"],["routerLink","frontend","routerLinkActive","active",1,"nav-link"],["routerLink","backend","routerLinkActive","active",1,"nav-link"],[1,"album","py-5","bg-light"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"header",1),e.\u0275\u0275elementStart(2,"ul",2),e.\u0275\u0275elementStart(3,"li",3),e.\u0275\u0275elementStart(4,"a",4),e.\u0275\u0275text(5,"Frontend"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"li",3),e.\u0275\u0275elementStart(7,"a",5),e.\u0275\u0275text(8,"Backend"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",6),e.\u0275\u0275elementStart(10,"div",0),e.\u0275\u0275element(11,"router-outlet"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())},directives:[l.yS,l.Od,l.lC],styles:[""],changeDetection:0}),n})(),children:[{path:"frontend",component:(()=>{class n{constructor(t){this.productService=t,this.products$=this.productService.getProducts(),this.filter={s:"",sort:"",page:1},this.perPage=9}ngOnInit(){}lastPage(t){return Math.ceil(t.length/this.perPage)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(u))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-frontend"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"products","filter","lastPage","setFilters"]],template:function(t,r){1&t&&(e.\u0275\u0275template(0,y,5,12,"ng-container",0),e.\u0275\u0275pipe(1,"async")),2&t&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,r.products$))},directives:[c.O5,f],pipes:[c.Ov,P,C],styles:[""]}),n})()},{path:"backend",component:v},{path:"",redirectTo:"frontend"}]}];let F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[l.Bz.forChild(_)],l.Bz]}),n})(),E=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.ez,F]]}),n})()}}]);