"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[7487],{7487:(x,s,r)=>{r.r(s),r.d(s,{RenderCircleModule:()=>p});var h=r(6814),d=r(4190),u=r(967),t=r(5879),l=r(6223);const g=["mainCanvas"];let f=(()=>{class e{constructor(){this.title="NgWebWorker",this.GRID_LINES=20,this.lineInterval=0,this.gridColor="lightgreen",console.log("ctor complete")}ngAfterViewInit(){e.ctx=this.mainCanvas.nativeElement.getContext("2d"),this.initApp(),this.initBoard(),this.drawGrid(),this.toggleTimer()}initApp(){e.ctx.canvas.height=e.CANVAS_SIZE,e.ctx.canvas.width=e.ctx.canvas.height}initBoard(){console.log("initBoard..."),this.lineInterval=Math.floor(e.ctx.canvas.width/this.GRID_LINES),console.log(this.lineInterval)}drawGrid(){console.log("drawGrid..."),e.ctx.globalAlpha=1,e.ctx.fillStyle="white",e.ctx.fillRect(0,0,e.ctx.canvas.height,e.ctx.canvas.width);for(var n=0;n<this.GRID_LINES;n++)e.ctx.fillStyle=this.gridColor,e.ctx.fillRect(0,this.lineInterval*(n+1),e.ctx.canvas.width,2),e.ctx.fillRect(this.lineInterval*(n+1),0,2,e.ctx.canvas.width)}toggleTimer(){null===e.IntervalHandle?e.IntervalHandle=setInterval(this.drawRandomCircles,100):(clearInterval(e.IntervalHandle),e.IntervalHandle=null,this.drawGrid())}static generateRandomPoints(){return{x:Math.floor(Math.random()*e.CANVAS_SIZE),y:Math.floor(Math.random()*e.CANVAS_SIZE)}}drawRandomCircles(){var n=e.generateRandomPoints();e.drawPoint(n)}static drawPoint(n){var c="rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")";e.ctx.strokeStyle=c,e.ctx.fillStyle=c,e.ctx.beginPath(),e.ctx.arc(n.x,n.y,10,0,2*Math.PI),e.ctx.stroke(),e.ctx.fill()}}return e.IntervalHandle=null,e.CANVAS_SIZE=400,e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.\u0275\u0275defineComponent({type:e,selectors:[["app-circle"]],viewQuery:function(n,o){if(1&n&&t.\u0275\u0275viewQuery(g,5),2&n){let i;t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(o.mainCanvas=i.first)}},decls:3,vars:0,consts:[["id","second"],[3,"mousedown"],["mainCanvas",""]],template:function(n,o){1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"canvas",1,2),t.\u0275\u0275listener("mousedown",function(){return o.toggleTimer()}),t.\u0275\u0275elementEnd()())}}),e})();const v=[{path:"",component:(()=>{class e{constructor(n){this.cd=n,this.title="NgWebWorker",this.longProcessOutput="Long\nprocess\noutput\nwill\nappear\nhere\n"}ngOnInit(){this.initWorker()}initWorker(){typeof Worker<"u"&&(this.worker=new Worker(r.tu(new URL(r.p+r.u(2450),r.b))),this.worker.onmessage=({data:n})=>{console.log("worker thread",n),this.longProcessOutput+=`${n}\n`,this.cd.detectChanges()})}mainThreadLoop(){this.longProcessOutput="",(0,u.W)(n=>{console.log("main thread",n),this.longProcessOutput+=`${n}\n`,this.cd.detectChanges()},9e9)}workerLoop(){this.longProcessOutput="",this.worker.postMessage("start looping...")}}return e.\u0275fac=function(n){return new(n||e)(t.\u0275\u0275directiveInject(t.ChangeDetectorRef))},e.\u0275cmp=t.\u0275\u0275defineComponent({type:e,selectors:[["app-render-circle"]],decls:18,vars:1,consts:[[1,"container"],[1,"d-flex","justify-content-between"],[1,"main","text-center"],[1,"row"],[1,"col"],[1,"innerContainer"],[1,"btn","btn-primary","me-2",3,"click"],[1,"btn","btn-success",3,"click"],["rows","10",1,"form-control",3,"ngModel"],[1,"text-muted","mb-4"]],template:function(n,o){1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h1"),t.\u0275\u0275text(3,"Display Circles"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"button",6),t.\u0275\u0275listener("click",function(){return o.mainThreadLoop()}),t.\u0275\u0275text(9," Start Main Thread "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"button",7),t.\u0275\u0275listener("click",function(){return o.workerLoop()}),t.\u0275\u0275text(11," Start Worker "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(12,"div",5),t.\u0275\u0275element(13,"textarea",8),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(14,"div",4)(15,"p",9),t.\u0275\u0275text(16,' Click on "Start Main Thread" button you will see circle rendering stopped '),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(17,"app-circle"),t.\u0275\u0275elementEnd()()()()),2&n&&(t.\u0275\u0275advance(13),t.\u0275\u0275property("ngModel",o.longProcessOutput))},dependencies:[l.Fj,l.JJ,l.On,f],styles:[".innerContainer[_ngcontent-%COMP%]{padding:1%}#first[_ngcontent-%COMP%]{width:50%;height:405px;float:left;background-color:#add8e6;color:#fff}#second[_ngcontent-%COMP%]{width:50%;float:right;background-color:green;color:#fff}"],changeDetection:0}),e})()}];let m=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=t.\u0275\u0275defineInjector({imports:[d.Bz.forChild(v),d.Bz]}),e})(),p=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=t.\u0275\u0275defineInjector({imports:[h.ez,m,l.u5]}),e})()}}]);