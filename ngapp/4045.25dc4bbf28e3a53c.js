"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[4045],{251:(x,h,n)=>{n.r(h),n.d(h,{BlogModule:()=>at,entityMetadata:()=>W,postFeatureKey:()=>F,userFeatureKey:()=>b});var i=n(9808),v=n(5357),m=n(3075),t=n(5e3),u=n(8721),c=n(7322),f=n(4594),p=n(4107),I=n(508);function B(o,d){if(1&o&&(t.\u0275\u0275elementStart(0,"mat-option",5),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=d.$implicit;t.\u0275\u0275property("value",e.id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.name)}}function T(o,d){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-toolbar",1)(1,"div",2)(2,"mat-form-field")(3,"mat-label"),t.\u0275\u0275text(4,"User"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"mat-select",3),t.\u0275\u0275listener("selectionChange",function(l){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.selectUser(l.value))}),t.\u0275\u0275template(6,B,2,2,"mat-option",4),t.\u0275\u0275elementEnd()()()()}if(2&o){const e=d.ngIf,r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275property("formControl",r.selectedUser),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e)}}let U=(()=>{class o{constructor(e,r,l){this.userService=e,this.route=r,this.router=l,this.selectedUser=new m.NI,this.users$=this.userService.entities$,this.users$.subscribe(s=>{if(s&&s.length){const _=+s[0].id;this.selectedUser.setValue(_),this.selectUser(_,"preserve")}})}selectUser(e,r="merge"){setTimeout(()=>{this.router.navigate([+e],{relativeTo:this.route,queryParamsHandling:r})})}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(u.K),t.\u0275\u0275directiveInject(v.gz),t.\u0275\u0275directiveInject(v.F0))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-admin"]],decls:3,vars:3,consts:[["color","primary",4,"ngIf"],["color","primary"],[1,"d-flex","justify-content-end","w-100","mt-4"],["id","user",3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,T,7,2,"mat-toolbar",0),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275element(2,"router-outlet")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.users$))},dependencies:[i.sg,i.O5,m.JJ,m.oH,c.KE,c.hX,f.Ye,p.gD,I.ey,v.lC,i.Ov],styles:['[_nghost-%COMP%]{display:grid;height:100vh;grid-template:" mat-toolbar     " auto " router-outlet     " 0 " routed-component  " minmax(0,1fr)}router-outlet[_ngcontent-%COMP%]{grid-area:router-outlet}router-outlet[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{grid-area:routed-component}']}),o})();var C=n(5620),E=n(9841),S=n(4004),j=n(2182);const a=(0,C.ZF)("router"),{selectRouteParam:P,selectQueryParam:g}=j.Ug(a),O=P("userId"),M=(0,C.P1)(O,o=>o?+o:void 0),N=g("postId"),V=(0,C.P1)(N,o=>+o);var D=n(4533),A=n(7531),y=n(9224),z=n(7579),K=n(8505),J=n(3900),Y=n(2722),$=n(7423),L=n(4623);function H(o,d){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-list-item",4),t.\u0275\u0275listener("click",function(){const s=t.\u0275\u0275restoreView(e).$implicit,_=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(_.selectPost(s.id))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=d.$implicit,r=t.\u0275\u0275nextContext();t.\u0275\u0275classProp("mat-list-item-active",e.id===r.selectedPostId),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.title)}}let Q=(()=>{class o{constructor(e,r,l,s){this.userService=e,this.postService=r,this.router=l,this.store=s,this.unsubscribe=new z.x}ngOnInit(){this.currentUserId$=this.store.pipe((0,C.Ys)(M)),this.initializevalues()}initializevalues(){this.posts=this.currentUserId$.pipe((0,K.b)(e=>this.userId=e),(0,J.w)(e=>this.postService.getPostsByUser(e))),this.store.pipe((0,C.Ys)(V)).pipe((0,Y.R)(this.unsubscribe)).subscribe(e=>this.selectedPostId=e?+e:void 0)}selectPost(e){this.router.navigate([],{queryParams:{postId:e},queryParamsHandling:"merge"}),this.selectedPostId=e}createPost(){this.postService.add({body:"placeholder body",title:"placeholder title",userId:this.userId||0},{isOptimistic:!1})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(u.K),t.\u0275\u0275directiveInject(D.L),t.\u0275\u0275directiveInject(v.F0),t.\u0275\u0275directiveInject(C.yh))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-post-list"]],decls:10,vars:3,consts:[["mat-icon-button","",3,"click"],[1,"ti-plus"],["role","list"],["role","listitem",3,"mat-list-item-active","click",4,"ngFor","ngForOf"],["role","listitem",3,"click"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t.\u0275\u0275text(3,"Posts on your blog"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"button",0),t.\u0275\u0275listener("click",function(){return r.createPost()}),t.\u0275\u0275element(5,"i",1),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"mat-card-content")(7,"mat-action-list",2),t.\u0275\u0275template(8,H,2,3,"mat-list-item",3),t.\u0275\u0275pipe(9,"async"),t.\u0275\u0275elementEnd()()()),2&e&&(t.\u0275\u0275advance(8),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(9,1,r.posts)))},dependencies:[i.sg,y.a8,y.dk,y.dn,y.n5,$.lW,L.i$,L.Tg,i.Ov],styles:["mat-list-item[_ngcontent-%COMP%]{height:auto!important}mat-list-item[_ngcontent-%COMP%]     .mat-list-item-content{padding:10px!important}.mat-list-item-active[_ngcontent-%COMP%]{background-color:#d3d3d3}.mat-card-header[_ngcontent-%COMP%]{align-items:baseline}"]}),o})();var X=n(9300);function Z(o,d){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-form-field")(1,"input",2),t.\u0275\u0275listener("blur",function(){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext().ngIf,s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.setTitle(l))}),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("formControl",e.title)}}function G(o,d){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"mat-card-title"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"button",3),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext().ngIf,s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.delete(l))}),t.\u0275\u0275element(4,"i",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"button",3),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.editingTitle=!0)}),t.\u0275\u0275element(6,"i",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&o){const e=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.title)}}function w(o,d){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-form-field")(1,"input",2),t.\u0275\u0275listener("blur",function(){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext().ngIf,s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.setBody(l))}),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("formControl",e.body)}}function k(o,d){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"button",3),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.editingBody=!0)}),t.\u0275\u0275element(2,"i",6),t.\u0275\u0275text(3," Edit Body "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"mat-card-title"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&o){const e=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(e.body)}}function q(o,d){if(1&o&&(t.\u0275\u0275elementStart(0,"mat-card")(1,"mat-card-header",1),t.\u0275\u0275template(2,Z,2,1,"mat-form-field",0),t.\u0275\u0275template(3,G,7,1,"ng-container",0),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"mat-card-content"),t.\u0275\u0275template(5,w,2,1,"mat-form-field",0),t.\u0275\u0275template(6,k,6,1,"ng-container",0),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.editingTitle),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.editingTitle),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.editingBody),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.editingBody)}}let tt=(()=>{class o{constructor(e,r,l,s){this.router=e,this.postService=r,this.userService=l,this.store=s,this.editingTitle=!1,this.editingBody=!1,this.title=new m.NI,this.body=new m.NI}ngOnInit(){this.currentUserId$=this.store.pipe((0,C.Ys)(M)),this.initializeValues()}initializeValues(){const e=this.postService.entities$,r=this.store.pipe((0,C.Ys)(V)),l=(0,E.a)([e,r.pipe((0,X.h)(s=>!isNaN(s)))]).pipe((0,S.U)(([s,_])=>s.find(lt=>lt.id===_)));this.post$=(0,E.a)([l,this.currentUserId$]).pipe((0,S.U)(([s,_])=>_===(null==s?void 0:s.userId)?s:void 0),(0,K.b)(s=>{s?(this.title.setValue(s.title),this.body.setValue(s.body)):setTimeout(()=>{this.router.navigate([],{queryParams:{postId:void 0},queryParamsHandling:"merge"})})}))}delete(e){window.confirm("Are you sure you want to delete this post?")&&this.postService.delete(e)}setTitle(e){this.editingTitle=!1,this.postService.update(Object.assign(Object.assign({},e),{title:this.title.value}))}setBody(e){this.editingBody=!1,this.postService.update(Object.assign(Object.assign({},e),{body:this.body.value}))}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(v.F0),t.\u0275\u0275directiveInject(D.L),t.\u0275\u0275directiveInject(u.K),t.\u0275\u0275directiveInject(C.yh))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-post"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"bg-light"],["matInput","",3,"formControl","blur"],["mat-icon-button","",3,"click"],[1,"ti-trash"],["title","Edit Title",1,"ti-pencil"],[1,"ti-pencil"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,q,7,4,"mat-card",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.post$))},dependencies:[i.O5,m.Fj,m.JJ,m.oH,c.KE,A.Nt,y.a8,y.dk,y.dn,y.n5,$.lW,i.Ov],styles:[".mat-card-header[_ngcontent-%COMP%]{align-items:baseline}"]}),o})();function et(o,d){1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"app-post-list")(2,"app-post"),t.\u0275\u0275elementContainerEnd())}function nt(o,d){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"mat-card-content",1)(6,"div")(7,"mat-form-field"),t.\u0275\u0275element(8,"input",2),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"div")(10,"mat-form-field"),t.\u0275\u0275element(11,"input",3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(12,"div")(13,"mat-form-field"),t.\u0275\u0275element(14,"input",4),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(15,"div")(16,"mat-form-field"),t.\u0275\u0275element(17,"input",5),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275template(18,et,3,0,"ng-container",0),t.\u0275\u0275pipe(19,"async"),t.\u0275\u0275elementContainerEnd()),2&o){const e=d.ngIf,r=t.\u0275\u0275nextContext();let l;t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(e.name),t.\u0275\u0275advance(4),t.\u0275\u0275property("value",e.username),t.\u0275\u0275advance(3),t.\u0275\u0275property("value",e.name),t.\u0275\u0275advance(3),t.\u0275\u0275property("value",e.email),t.\u0275\u0275advance(3),t.\u0275\u0275property("value",e.phone),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(l=t.\u0275\u0275pipeBind1(19,6,r.posts$))?null:l.length)}}let ot=(()=>{class o{constructor(e,r,l){this.userService=e,this.postService=r,this.store=l}ngOnInit(){const e=this.userService.entities$,r=this.store.pipe((0,C.Ys)(M));this.user$=(0,E.a)([e,r]).pipe((0,S.U)(([l,s])=>l.find(_=>_.id===s))),this.posts$=this.postService.entities$}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(u.K),t.\u0275\u0275directiveInject(D.L),t.\u0275\u0275directiveInject(C.yh))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-user"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"user"],["matInput","","placeholder","Username","readonly","",3,"value"],["matInput","","placeholder","Name","readonly","",3,"value"],["matInput","","placeholder","Email","readonly","",3,"value"],["matInput","","placeholder","Phone Number","readonly","",3,"value"]],template:function(e,r){1&e&&(t.\u0275\u0275template(0,nt,20,8,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,r.user$))},dependencies:[i.O5,c.KE,A.Nt,y.a8,y.dk,y.dn,y.n5,Q,tt,i.Ov],styles:['[_nghost-%COMP%]{display:grid;grid-template-areas:"user user" "list post";grid-template-columns:1fr 1fr;grid-template-rows:auto 1fr;grid-gap:10px;margin:10px}mat-card[_ngcontent-%COMP%]{grid-area:user}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr}app-post-list[_ngcontent-%COMP%]{grid-area:list;overflow:auto}app-post[_ngcontent-%COMP%]{grid-area:post}.user[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-underline{background-color:none!important;height:auto}']}),o})();var R=n(1753),rt=n(3393),st=n(8659);const it=[{path:"",component:U,children:[{path:":userId",component:ot}]}],b="User",F="Post",W={[b]:{entityDispatcherOptions:{optimisticUpdate:!0,optimisticAdd:!0}},[F]:{entityDispatcherOptions:{optimisticUpdate:!0,optimisticAdd:!0}}};let at=(()=>{class o{constructor(e,r,l,s){this.eds=e,this.entityDataService=r,this.userDataService=l,this.postDataService=s,this.eds.registerMetadataMap(W),this.entityDataService.registerService(b,this.userDataService),this.entityDataService.registerService(F,this.postDataService)}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275inject(R.f0),t.\u0275\u0275inject(R.sP),t.\u0275\u0275inject(rt.M),t.\u0275\u0275inject(st.V))},o.\u0275mod=t.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=t.\u0275\u0275defineInjector({imports:[i.ez,m.UX,A.c,c.lN,f.g0,p.LD,y.QW,$.ot,L.ie,v.Bz.forChild(it)]}),o})()},8659:(x,h,n)=>{n.d(h,{V:()=>u});var i=n(1753),v=n(251),m=n(5e3),t=n(520);let u=(()=>{class c extends i.EJ{constructor(p,I){super(v.postFeatureKey,p,I),this.API_URL="https://jsonplaceholder.typicode.com/posts"}getAll(){return this.http.get(`${this.API_URL}`)}add(p){return this.http.post(`${this.API_URL}`,p)}update(p){return this.http.put(`${this.API_URL}/${p.id}`,p.changes)}delete(p){return this.http.delete(`${this.API_URL}/${p}`)}}return c.\u0275fac=function(p){return new(p||c)(m.\u0275\u0275inject(t.eN),m.\u0275\u0275inject(i.hR))},c.\u0275prov=m.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c})()},4533:(x,h,n)=>{n.d(h,{L:()=>t});var i=n(1753),v=n(4004),m=n(5e3);let t=(()=>{class u extends i.c8{constructor(f){super("Post",f),this.posts=this.entities$}getPostsByUser(f){return this.posts.pipe((0,v.U)(p=>p.filter(I=>I.userId===+f)))}}return u.\u0275fac=function(f){return new(f||u)(m.\u0275\u0275inject(i.yV))},u.\u0275prov=m.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},3393:(x,h,n)=>{n.d(h,{M:()=>u});var i=n(1753),v=n(251),m=n(5e3),t=n(520);let u=(()=>{class c extends i.EJ{constructor(p,I){super(v.userFeatureKey,p,I),this.API_URL="https://jsonplaceholder.typicode.com/users",this.getAll()}getAll(){return this.http.get(`${this.API_URL}`)}}return c.\u0275fac=function(p){return new(p||c)(m.\u0275\u0275inject(t.eN),m.\u0275\u0275inject(i.hR))},c.\u0275prov=m.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c})()},8721:(x,h,n)=>{n.d(h,{K:()=>m});var i=n(1753),v=n(5e3);let m=(()=>{class t extends i.c8{constructor(c){super("User",c)}}return t.\u0275fac=function(c){return new(c||t)(v.\u0275\u0275inject(i.yV))},t.\u0275prov=v.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},4045:(x,h,n)=>{n.r(h),n.d(h,{BlogdemoComponent:()=>t,BlogdemoModule:()=>j,BlogdemoService:()=>v});var i=n(5e3);let v=(()=>{class a{constructor(){}}return a.\u0275fac=function(g){return new(g||a)},a.\u0275prov=i.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var m=n(5357);let t=(()=>{class a{}return a.\u0275fac=function(g){return new(g||a)},a.\u0275cmp=i.\u0275\u0275defineComponent({type:a,selectors:[["lib-blogdemo"]],decls:1,vars:0,template:function(g,O){1&g&&i.\u0275\u0275element(0,"router-outlet")},dependencies:[m.lC],styles:["[_nghost-%COMP%]{height:100vh}"]}),a})();var u=n(9808),c=n(7423),f=n(4594),p=n(8505),I=n(590),B=n(8721),T=n(4533);let U=(()=>{class a{constructor(g,O){this.userService=g,this.postService=O}resolve(g,O){return this.postService.loaded$.pipe((0,p.b)(M=>{M||(this.userService.getAll(),this.postService.getAll())}),(0,I.P)())}}return a.\u0275fac=function(g){return new(g||a)(i.\u0275\u0275inject(B.K),i.\u0275\u0275inject(T.L))},a.\u0275prov=i.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a})();var C=n(8659),E=n(3393);const S=[{path:"",component:t,children:[{path:"blog",loadChildren:()=>Promise.resolve().then(n.bind(n,251)).then(a=>a.BlogModule),resolve:[U]},{path:"",redirectTo:"blog",pathMatch:"full"}]}];let j=(()=>{class a{}return a.\u0275fac=function(g){return new(g||a)},a.\u0275mod=i.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=i.\u0275\u0275defineInjector({providers:[E.M,C.V,U],imports:[u.ez,f.g0,c.ot,m.Bz.forChild(S)]}),a})()}}]);