"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[8351],{8351:(g,u,n)=>{n.r(u),n.d(u,{UserSearchCachedModule:()=>r});var d=n(6895),p=n(9116),e=n(4650),m=n(7579),C=n(4004),S=n(6604),U=n(529),f=n(3180);class h{constructor(t,i){this.http=t,this.cacheService=i,this.API_URL="https://jsonplaceholder.typicode.com/users",this.userQuerySubject=new m.x,this.users$=this.userQuerySubject.pipe((0,S.y)(v=>this.loadUsers(v)))}searchUser(t){this.userQuerySubject.next(t)}loadUsers(t){return this.cacheService.getData(`${this.API_URL}?q=${t}`).pipe((0,C.U)(i=>i.filter(v=>v?.name.toLowerCase().startsWith(t.toLowerCase()))))}}function l(a,t){if(1&a&&(e.\u0275\u0275elementStart(0,"li",6),e.\u0275\u0275text(1),e.\u0275\u0275elementStart(2,"small"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&a){const i=t.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",i.name," - "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i.email)}}h.\u0275fac=function(t){return new(t||h)(e.\u0275\u0275inject(U.eN),e.\u0275\u0275inject(f.Q))},h.\u0275prov=e.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac,providedIn:"root"});class o{constructor(t){this.userService=t}ngOnInit(){this.users$=this.userService.users$}searchUser(t){this.userService.searchUser(t)}}o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(h))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-user-search-cached"]],decls:10,vars:3,consts:[[1,"p-2"],[1,"text-muted"],[1,"container-fluid"],["placeholder","Type car name",1,"form-control",3,"input"],[1,"list-group","mt-2","w-50"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"h1"),e.\u0275\u0275text(2," Search User "),e.\u0275\u0275elementStart(3,"small",1),e.\u0275\u0275text(4,"(cached initial response)"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(5,"div",2)(6,"input",3),e.\u0275\u0275listener("input",function(y){return i.searchUser(y.target.value)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"ul",4),e.\u0275\u0275template(8,l,4,2,"li",5),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(9,1,i.users$)))},dependencies:[d.sg,d.Ov],changeDetection:0});const c=[{path:"",component:o}];class s{}s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.\u0275\u0275defineNgModule({type:s}),s.\u0275inj=e.\u0275\u0275defineInjector({imports:[p.Bz.forChild(c),p.Bz]});class r{}r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=e.\u0275\u0275defineInjector({imports:[d.ez,s]})},3180:(g,u,n)=>{n.d(u,{Q:()=>l});var d=n(9646),p=n(4707),e=n(249),m=n(576),S=n(8343),U=n(8505),f=n(4650),h=n(529);class l{constructor(c){this.http=c,this.responseCache=new Map}getData(c){const s=this.responseCache.get(c);return s?(0,d.of)(s):this.http.get(c).pipe(function C(o,c,s,r){s&&!(0,m.m)(s)&&(r=s);const a=(0,m.m)(s)?s:void 0;return t=>(0,e.O)(new p.t(o,c,r),a)(t)}(1),(0,S.x)(),(0,U.b)(r=>{this.responseCache.set(c,r)}))}clearCache(){this.responseCache.clear()}}l.\u0275fac=function(c){return new(c||l)(f.\u0275\u0275inject(h.eN))},l.\u0275prov=f.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"})}}]);