"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[9645],{9645:(b,E,n)=>{n.r(E),n.d(E,{UsersEntityModule:()=>m});var f=n(6895),C=n(9116),h=n(9653),x=n(5751),c=n(7558),F=n(3487),$=n(3568),t=n(4650),I=n(6325);function L(r,e){if(1&r){const s=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",5)(1,"div",6),t.\u0275\u0275element(2,"img",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",8)(4,"div")(5,"strong"),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(7,"br"),t.\u0275\u0275elementStart(8,"small"),t.\u0275\u0275text(9),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(10,"div")(11,"button",9),t.\u0275\u0275listener("click",function(){const U=t.\u0275\u0275restoreView(s).$implicit,g=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(g.editUser(U))}),t.\u0275\u0275element(12,"i",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"button",11),t.\u0275\u0275listener("click",function(){const U=t.\u0275\u0275restoreView(s).$implicit,g=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(g.removeUser(U))}),t.\u0275\u0275element(14,"i",12),t.\u0275\u0275elementEnd()()()()}if(2&r){const s=e.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275property("src",s.avatar,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(s.first_name),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(s.email)}}class p{constructor(e,s){this.store=e,this.dialog=s}ngOnInit(){this.users$=this.store.pipe((0,h.Ys)(F.vH))}removeUser(e){console.log("Remove user"),this.store.dispatch((0,c.Mb)({id:e.id}))}addUser(){const e=(0,x.m)();e.data={dialogTitle:"Add User",mode:"create"},this.dialog.open($.L,e)}editUser(e){const s=(0,x.m)();s.data={dialogTitle:"Edit User",user:e,mode:"update"},this.dialog.open($.L,s).afterClosed().subscribe(i=>{console.log("Closed",i)})}}p.\u0275fac=function(e){return new(e||p)(t.\u0275\u0275directiveInject(h.yh),t.\u0275\u0275directiveInject(I.uw))},p.\u0275cmp=t.\u0275\u0275defineComponent({type:p,selectors:[["app-users-entity"]],decls:8,vars:3,consts:[[1,"container"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-primary","align-self-center",3,"click"],[1,"ti-plus"],["class","d-flex mb-2",4,"ngFor","ngForOf"],[1,"d-flex","mb-2"],[1,"flex-shrink-0","mr-2"],["alt","...",3,"src"],[1,"flex-grow-1","ml-2"],[1,"btn","btn-primary","mr-2",3,"click"],[1,"ti-pencil"],[1,"btn","btn-danger",3,"click"],[1,"ti-trash"]],template:function(e,s){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"header",1)(2,"h1"),t.\u0275\u0275text(3,"Users List (Entity)"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"button",2),t.\u0275\u0275listener("click",function(){return s.addUser()}),t.\u0275\u0275element(5,"i",3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(6,L,15,3,"div",4),t.\u0275\u0275pipe(7,"async"),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(6),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(7,1,s.users$)))},dependencies:[f.sg,f.Ov],styles:["img[_ngcontent-%COMP%]{width:128px;height:128px}"],changeDetection:0});const R=[{path:"",component:p}];class a{}a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=t.\u0275\u0275defineInjector({imports:[C.Bz.forChild(R),C.Bz]});var A=n(4144),T=n(9549),P=n(4859),V=n(4006),o=n(8776),S=n(4365),v=n(3900),y=n(4004),j=n(262),z=n(5577),M=n(9646),O=n(529);class l{constructor(e){this.http=e,this.API_URL="https://reqres.in/api/users"}getUsers(){return this.http.get(`${this.API_URL}`).pipe((0,y.U)(e=>e.data))}addUser(e){return this.http.post(`${this.API_URL}`,e)}updateUser(e){return this.http.put(`${this.API_URL}/${e.id}`,e)}removeUser(e){return this.http.delete(`${this.API_URL}/${e}`)}}l.\u0275fac=function(e){return new(e||l)(t.\u0275\u0275inject(O.eN))},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"});class d{constructor(e,s){this.actions$=e,this.userentitySetvice=s,this.loadEntityUsers$=(0,o.GW)(()=>this.actions$.pipe((0,o.l4)(c.Ec),(0,v.w)(()=>this.userentitySetvice.getUsers().pipe((0,y.U)(i=>(0,c.vn)({users:i})),(0,j.K)(i=>(0,M.of)((0,c.V6)({error:i}))))))),this.deleteEntityUsers$=(0,o.GW)(()=>this.actions$.pipe((0,o.l4)(c.Mb),(0,z.z)(({id:i})=>this.userentitySetvice.removeUser(i))),{dispatch:!1}),this.createStoreUser$=(0,o.GW)(()=>this.actions$.pipe((0,o.l4)(c.S2),(0,v.w)(({user:i})=>this.userentitySetvice.addUser(i).pipe((0,y.U)(u=>(0,c.SI)({user:u})),(0,j.K)(()=>(0,M.of)((0,c.XI)())))))),this.editEntityUser$=(0,o.GW)(()=>this.actions$.pipe((0,o.l4)(c.f_),(0,v.w)(({user:i})=>{const u={id:i.id,...i.changes};return this.userentitySetvice.updateUser(u)})),{dispatch:!1})}}d.\u0275fac=function(e){return new(e||d)(t.\u0275\u0275inject(o.eX),t.\u0275\u0275inject(l))},d.\u0275prov=t.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac});class m{}m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=t.\u0275\u0275defineNgModule({type:m}),m.\u0275inj=t.\u0275\u0275defineInjector({imports:[f.ez,a,I.Is,A.c,T.lN,P.ot,V.UX,h.Aw.forFeature(S.YI,S.Jy),o.sQ.forFeature([d])]})}}]);