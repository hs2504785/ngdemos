"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[4647],{8858:(x,v,o)=>{o.r(v),o.d(v,{BlogModule:()=>I,entityMetadata:()=>Y,postFeatureKey:()=>b,userFeatureKey:()=>R});var s=o(6895),d=o(9116),a=o(4006),t=o(4650),l=o(964),u=o(9549),m=o(3683),P=o(4385),B=o(3238);function j(r,e){if(1&r&&(t.\u0275\u0275elementStart(0,"mat-option",5),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&r){const n=e.$implicit;t.\u0275\u0275property("value",n.id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(n.name)}}function D(r,e){if(1&r){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-toolbar",1)(1,"div",2)(2,"mat-form-field")(3,"mat-label"),t.\u0275\u0275text(4,"User"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"mat-select",3),t.\u0275\u0275listener("selectionChange",function(i){t.\u0275\u0275restoreView(n);const p=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(p.selectUser(i.value))}),t.\u0275\u0275template(6,j,2,2,"mat-option",4),t.\u0275\u0275elementEnd()()()()}if(2&r){const n=e.ngIf,c=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275property("formControl",c.selectedUser),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n)}}class g{constructor(e,n,c){this.userService=e,this.route=n,this.router=c,this.selectedUser=new a.NI,this.users$=this.userService.entities$,this.users$.subscribe(i=>{if(i&&i.length){const p=+i[0].id;this.selectedUser.setValue(p),this.selectUser(p,"preserve")}})}selectUser(e,n="merge"){setTimeout(()=>{this.router.navigate([+e],{relativeTo:this.route,queryParamsHandling:n})})}}g.\u0275fac=function(e){return new(e||g)(t.\u0275\u0275directiveInject(l.K),t.\u0275\u0275directiveInject(d.gz),t.\u0275\u0275directiveInject(d.F0))},g.\u0275cmp=t.\u0275\u0275defineComponent({type:g,selectors:[["app-admin"]],decls:3,vars:3,consts:[["color","primary",4,"ngIf"],["color","primary"],[1,"d-flex","justify-content-end","w-100","mt-4"],["id","user",3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){1&e&&(t.\u0275\u0275template(0,D,7,2,"mat-toolbar",0),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275element(2,"router-outlet")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,n.users$))},dependencies:[s.sg,s.O5,a.JJ,a.oH,u.KE,u.hX,m.Ye,P.gD,B.ey,d.lC,s.Ov],styles:['[_nghost-%COMP%]{display:grid;height:100vh;grid-template:" mat-toolbar     " auto " router-outlet     " 0 " routed-component  " minmax(0,1fr)}router-outlet[_ngcontent-%COMP%]{grid-area:router-outlet}router-outlet[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{grid-area:routed-component}']});var h=o(9653),E=o(9841),S=o(4004),_=o(6943);const y=(0,h.ZF)("router"),{selectRouteParam:f,selectQueryParam:M}=_.Ug(y),A=f("userId"),$=(0,h.P1)(A,r=>r?+r:void 0),H=M("postId"),W=(0,h.P1)(H,r=>+r);var L=o(2487),F=o(4144),C=o(3546),Q=o(7579),z=o(8505),X=o(3900),Z=o(2722),K=o(4859),V=o(6338);function G(r,e){if(1&r){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-list-item",5),t.\u0275\u0275listener("click",function(){const p=t.\u0275\u0275restoreView(n).$implicit,N=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(N.selectPost(p.id))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&r){const n=e.$implicit,c=t.\u0275\u0275nextContext();t.\u0275\u0275classProp("mat-list-item-active",n.id===c.selectedPostId),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(n.title)}}class O{constructor(e,n,c,i){this.userService=e,this.postService=n,this.router=c,this.store=i,this.unsubscribe=new Q.x}ngOnInit(){this.currentUserId$=this.store.pipe((0,h.Ys)($)),this.initializevalues()}initializevalues(){this.posts=this.currentUserId$.pipe((0,z.b)(e=>this.userId=e),(0,X.w)(e=>this.postService.getPostsByUser(e))),this.store.pipe((0,h.Ys)(W)).pipe((0,Z.R)(this.unsubscribe)).subscribe(e=>this.selectedPostId=e?+e:void 0)}selectPost(e){this.router.navigate([],{queryParams:{postId:e},queryParamsHandling:"merge"}),this.selectedPostId=e}createPost(){this.postService.add({body:"placeholder body",title:"placeholder title",userId:this.userId||0},{isOptimistic:!1})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}}O.\u0275fac=function(e){return new(e||O)(t.\u0275\u0275directiveInject(l.K),t.\u0275\u0275directiveInject(L.L),t.\u0275\u0275directiveInject(d.F0),t.\u0275\u0275directiveInject(h.yh))},O.\u0275cmp=t.\u0275\u0275defineComponent({type:O,selectors:[["app-post-list"]],decls:10,vars:3,consts:[["appearance","outlined"],["mat-icon-button","",3,"click"],[1,"ti-plus"],["role","list"],["role","listitem",3,"mat-list-item-active","click",4,"ngFor","ngForOf"],["role","listitem",3,"click"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),t.\u0275\u0275text(3,"Posts on your blog"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"button",1),t.\u0275\u0275listener("click",function(){return n.createPost()}),t.\u0275\u0275element(5,"i",2),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"mat-card-content")(7,"mat-action-list",3),t.\u0275\u0275template(8,G,2,3,"mat-list-item",4),t.\u0275\u0275pipe(9,"async"),t.\u0275\u0275elementEnd()()()),2&e&&(t.\u0275\u0275advance(8),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(9,1,n.posts)))},dependencies:[s.sg,C.a8,C.dn,C.dk,C.n5,K.RK,V.lT,V.Tg,s.Ov],styles:["mat-list-item[_ngcontent-%COMP%]{height:auto!important}mat-list-item[_ngcontent-%COMP%]     .mat-list-item-content{padding:10px!important}.mat-list-item-active[_ngcontent-%COMP%]{background-color:#d3d3d3}.mat-mdc-card-header[_ngcontent-%COMP%]{align-items:baseline}"]});var w=o(9300);function k(r,e){if(1&r){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-form-field")(1,"input",4),t.\u0275\u0275listener("blur",function(){t.\u0275\u0275restoreView(n);const i=t.\u0275\u0275nextContext().ngIf,p=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(p.setTitle(i))}),t.\u0275\u0275elementEnd()()}if(2&r){const n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("formControl",n.title)}}function q(r,e){if(1&r){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"mat-card-title"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"button",5),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const i=t.\u0275\u0275nextContext().ngIf,p=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(p.delete(i))}),t.\u0275\u0275element(4,"i",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"button",5),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.editingTitle=!0)}),t.\u0275\u0275element(6,"i",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&r){const n=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(n.title)}}function tt(r,e){if(1&r){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-form-field")(1,"input",4),t.\u0275\u0275listener("blur",function(){t.\u0275\u0275restoreView(n);const i=t.\u0275\u0275nextContext().ngIf,p=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(p.setBody(i))}),t.\u0275\u0275elementEnd()()}if(2&r){const n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("formControl",n.body)}}function et(r,e){if(1&r){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"button",5),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.editingBody=!0)}),t.\u0275\u0275element(2,"i",8),t.\u0275\u0275text(3," Edit Body "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"mat-card-title"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&r){const n=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(n.body)}}function nt(r,e){if(1&r&&(t.\u0275\u0275elementStart(0,"mat-card",1)(1,"mat-card-header",2),t.\u0275\u0275template(2,k,2,1,"mat-form-field",3),t.\u0275\u0275template(3,q,7,1,"ng-container",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"mat-card-content"),t.\u0275\u0275template(5,tt,2,1,"mat-form-field",3),t.\u0275\u0275template(6,et,6,1,"ng-container",3),t.\u0275\u0275elementEnd()()),2&r){const n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.editingTitle),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.editingTitle),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.editingBody),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.editingBody)}}class U{constructor(e,n,c,i){this.router=e,this.postService=n,this.userService=c,this.store=i,this.editingTitle=!1,this.editingBody=!1,this.title=new a.NI,this.body=new a.NI}ngOnInit(){this.currentUserId$=this.store.pipe((0,h.Ys)($)),this.initializeValues()}initializeValues(){const e=this.postService.entities$,n=this.store.pipe((0,h.Ys)(W)),c=(0,E.a)([e,n.pipe((0,w.h)(i=>!isNaN(i)))]).pipe((0,S.U)(([i,p])=>i.find(N=>N.id===p)));this.post$=(0,E.a)([c,this.currentUserId$]).pipe((0,S.U)(([i,p])=>p===i?.userId?i:void 0),(0,z.b)(i=>{i?(this.title.setValue(i.title),this.body.setValue(i.body)):setTimeout(()=>{this.router.navigate([],{queryParams:{postId:void 0},queryParamsHandling:"merge"})})}))}delete(e){window.confirm("Are you sure you want to delete this post?")&&this.postService.delete(e)}setTitle(e){this.editingTitle=!1,this.postService.update({...e,title:this.title.value})}setBody(e){this.editingBody=!1,this.postService.update({...e,body:this.body.value})}}function ot(r,e){1&r&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"app-post-list")(2,"app-post"),t.\u0275\u0275elementContainerEnd())}function rt(r,e){if(1&r&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"mat-card-content",2)(6,"div")(7,"mat-form-field"),t.\u0275\u0275element(8,"input",3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"div")(10,"mat-form-field"),t.\u0275\u0275element(11,"input",4),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(12,"div")(13,"mat-form-field"),t.\u0275\u0275element(14,"input",5),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(15,"div")(16,"mat-form-field"),t.\u0275\u0275element(17,"input",6),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275template(18,ot,3,0,"ng-container",0),t.\u0275\u0275pipe(19,"async"),t.\u0275\u0275elementContainerEnd()),2&r){const n=e.ngIf,c=t.\u0275\u0275nextContext();let i;t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(n.name),t.\u0275\u0275advance(4),t.\u0275\u0275property("value",n.username),t.\u0275\u0275advance(3),t.\u0275\u0275property("value",n.name),t.\u0275\u0275advance(3),t.\u0275\u0275property("value",n.email),t.\u0275\u0275advance(3),t.\u0275\u0275property("value",n.phone),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(i=t.\u0275\u0275pipeBind1(19,6,c.posts$))?null:i.length)}}U.\u0275fac=function(e){return new(e||U)(t.\u0275\u0275directiveInject(d.F0),t.\u0275\u0275directiveInject(L.L),t.\u0275\u0275directiveInject(l.K),t.\u0275\u0275directiveInject(h.yh))},U.\u0275cmp=t.\u0275\u0275defineComponent({type:U,selectors:[["app-post"]],decls:2,vars:3,consts:[["appearance","outlined",4,"ngIf"],["appearance","outlined"],[1,"bg-light"],[4,"ngIf"],["matInput","",3,"formControl","blur"],["mat-icon-button","",3,"click"],[1,"ti-trash"],["title","Edit Title",1,"ti-pencil"],[1,"ti-pencil"]],template:function(e,n){1&e&&(t.\u0275\u0275template(0,nt,7,4,"mat-card",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,n.post$))},dependencies:[s.O5,a.Fj,a.JJ,a.oH,F.Nt,u.KE,C.a8,C.dn,C.dk,C.n5,K.RK,s.Ov],styles:[".mat-mdc-card-header[_ngcontent-%COMP%]{align-items:baseline}"]});class T{constructor(e,n,c){this.userService=e,this.postService=n,this.store=c}ngOnInit(){const e=this.userService.entities$,n=this.store.pipe((0,h.Ys)($));this.user$=(0,E.a)([e,n]).pipe((0,S.U)(([c,i])=>c.find(p=>p.id===i))),this.posts$=this.postService.entities$}}T.\u0275fac=function(e){return new(e||T)(t.\u0275\u0275directiveInject(l.K),t.\u0275\u0275directiveInject(L.L),t.\u0275\u0275directiveInject(h.yh))},T.\u0275cmp=t.\u0275\u0275defineComponent({type:T,selectors:[["app-user"]],decls:2,vars:3,consts:[[4,"ngIf"],["appearance","outlined"],[1,"user"],["matInput","","placeholder","Username","readonly","",3,"value"],["matInput","","placeholder","Name","readonly","",3,"value"],["matInput","","placeholder","Email","readonly","",3,"value"],["matInput","","placeholder","Phone Number","readonly","",3,"value"]],template:function(e,n){1&e&&(t.\u0275\u0275template(0,rt,20,8,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(1,1,n.user$))},dependencies:[s.O5,F.Nt,u.KE,C.a8,C.dn,C.dk,C.n5,O,U,s.Ov],styles:['[_nghost-%COMP%]{display:grid;grid-template-areas:"user user" "list post";grid-template-columns:1fr 1fr;grid-template-rows:auto 1fr;grid-gap:10px;margin:10px}mat-card[_ngcontent-%COMP%]{grid-area:user}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr}app-post-list[_ngcontent-%COMP%]{grid-area:list;overflow:auto}app-post[_ngcontent-%COMP%]{grid-area:post}.user[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-underline{background-color:none!important;height:auto}']});var J=o(4169),it=o(5128),st=o(9727);const at=[{path:"",component:g,children:[{path:":userId",component:T}]}],R="User",b="Post",Y={[R]:{entityDispatcherOptions:{optimisticUpdate:!0,optimisticAdd:!0}},[b]:{entityDispatcherOptions:{optimisticUpdate:!0,optimisticAdd:!0}}};class I{constructor(e,n,c,i){this.eds=e,this.entityDataService=n,this.userDataService=c,this.postDataService=i,this.eds.registerMetadataMap(Y),this.entityDataService.registerService(R,this.userDataService),this.entityDataService.registerService(b,this.postDataService)}}I.\u0275fac=function(e){return new(e||I)(t.\u0275\u0275inject(J.f0),t.\u0275\u0275inject(J.sP),t.\u0275\u0275inject(it.M),t.\u0275\u0275inject(st.V))},I.\u0275mod=t.\u0275\u0275defineNgModule({type:I}),I.\u0275inj=t.\u0275\u0275defineInjector({imports:[s.ez,a.UX,F.c,u.lN,m.g0,P.LD,C.QW,K.ot,V.ie,d.Bz.forChild(at)]})},9727:(x,v,o)=>{o.d(v,{V:()=>l});var s=o(4169),d=o(8858),a=o(4650),t=o(529);class l extends s.EJ{constructor(m,P){super(d.postFeatureKey,m,P),this.API_URL="https://jsonplaceholder.typicode.com/posts"}getAll(){return this.http.get(`${this.API_URL}`)}add(m){return this.http.post(`${this.API_URL}`,m)}update(m){return this.http.put(`${this.API_URL}/${m.id}`,m.changes)}delete(m){return this.http.delete(`${this.API_URL}/${m}`)}}l.\u0275fac=function(m){return new(m||l)(a.\u0275\u0275inject(t.eN),a.\u0275\u0275inject(s.hR))},l.\u0275prov=a.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac})},2487:(x,v,o)=>{o.d(v,{L:()=>t});var s=o(4169),d=o(4004),a=o(4650);class t extends s.c8{constructor(u){super("Post",u),this.posts=this.entities$}getPostsByUser(u){return this.posts.pipe((0,d.U)(m=>m.filter(P=>P.userId===+u)))}}t.\u0275fac=function(u){return new(u||t)(a.\u0275\u0275inject(s.yV))},t.\u0275prov=a.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"})},5128:(x,v,o)=>{o.d(v,{M:()=>l});var s=o(4169),d=o(8858),a=o(4650),t=o(529);class l extends s.EJ{constructor(m,P){super(d.userFeatureKey,m,P),this.API_URL="https://jsonplaceholder.typicode.com/users",this.getAll()}getAll(){return this.http.get(`${this.API_URL}`)}}l.\u0275fac=function(m){return new(m||l)(a.\u0275\u0275inject(t.eN),a.\u0275\u0275inject(s.hR))},l.\u0275prov=a.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac})},964:(x,v,o)=>{o.d(v,{K:()=>a});var s=o(4169),d=o(4650);class a extends s.c8{constructor(l){super("User",l)}}a.\u0275fac=function(l){return new(l||a)(d.\u0275\u0275inject(s.yV))},a.\u0275prov=d.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"})},4647:(x,v,o)=>{o.r(v),o.d(v,{BlogdemoComponent:()=>t,BlogdemoModule:()=>_,BlogdemoService:()=>d});var s=o(4650);class d{constructor(){}}d.\u0275fac=function(f){return new(f||d)},d.\u0275prov=s.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac,providedIn:"root"});var a=o(9116);class t{}t.\u0275fac=function(f){return new(f||t)},t.\u0275cmp=s.\u0275\u0275defineComponent({type:t,selectors:[["lib-blogdemo"]],decls:1,vars:0,template:function(f,M){1&f&&s.\u0275\u0275element(0,"router-outlet")},dependencies:[a.lC],styles:["[_nghost-%COMP%]{height:100vh}"]});var l=o(6895),u=o(4859),m=o(3683),P=o(8505),B=o(590),j=o(964),D=o(2487);class g{constructor(f,M){this.userService=f,this.postService=M}resolve(f,M){return this.postService.loaded$.pipe((0,P.b)(A=>{A||(this.userService.getAll(),this.postService.getAll())}),(0,B.P)())}}g.\u0275fac=function(f){return new(f||g)(s.\u0275\u0275inject(j.K),s.\u0275\u0275inject(D.L))},g.\u0275prov=s.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac});var h=o(9727),E=o(5128);const S=[{path:"",component:t,children:[{path:"blog",loadChildren:()=>Promise.resolve().then(o.bind(o,8858)).then(y=>y.BlogModule),resolve:[g]},{path:"",redirectTo:"blog",pathMatch:"full"}]}];class _{}_.\u0275fac=function(f){return new(f||_)},_.\u0275mod=s.\u0275\u0275defineNgModule({type:_}),_.\u0275inj=s.\u0275\u0275defineInjector({providers:[E.M,h.V,g],imports:[l.ez,m.g0,u.ot,a.Bz.forChild(S)]})}}]);