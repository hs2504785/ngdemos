"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[7148],{7148:(Q,k,r)=>{r.d(k,{xA:()=>K,zj:()=>C});var e=r(4650),T=r(9646),M=r(188),_=r(6451),m=r(7579),f=r(4968),h=r(9300),P=r(6590),z=r(590),w=r(4004),A=r(3900),u=r(2722),p=r(6895);const $=["backdrop"],L=["dialog"];function V(n,s){if(1&n&&e.\u0275\u0275element(0,"div",6),2&n){const t=e.\u0275\u0275nextContext(),i=e.\u0275\u0275reference(3);e.\u0275\u0275property("dialogDragEnabled",!0)("dialogDragTarget",i)("dragConstraint",t.config.dragConstraint)}}function B(n,s){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",7),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.closeDialog())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(1,"svg",8),e.\u0275\u0275element(2,"path",9),e.\u0275\u0275elementEnd()()}}class C{}class v extends C{constructor(s={}){super(),this.beforeCloseGuards=[],this.mutate(s)}close(s){this.canClose(s).pipe((0,h.h)(Boolean)).subscribe({next:()=>this.onClose(s)})}beforeClose(s){this.beforeCloseGuards.push(s)}resetDrag(s){this.onReset(s)}canClose(s){const t=this.beforeCloseGuards.map(i=>i(s)).filter(i=>void 0!==i&&!0!==i).map(i=>"boolean"==typeof i?(0,T.of)(i):(0,M.D)(i).pipe((0,h.h)(o=>!o)));return(0,_.T)(...t).pipe((0,P.d)(!0),(0,z.P)())}mutate(s){Object.assign(this,s)}asDialogRef(){return this}}function D(n){return function H(n){return null==n}(n)?"":function S(n){return"string"==typeof n}(n)?n:`${n}px`}let R=(()=>{class n{constructor(){this.dialogDragEnabled=!1,this.host=(0,e.inject)(e.ElementRef),this.zone=(0,e.inject)(e.NgZone),this.delta={x:0,y:0},this.offset={x:0,y:0},this.enabled=!0,this.destroy$=new m.x}set dialogDragOffset(t){this.reset(t)}ngAfterViewInit(){!this.enabled||this.init()}ngOnChanges(){!this.enabled&&this.dialogDragEnabled&&this.dialogDragTarget&&(this.enabled=!0,this.handle?this.handle.style.setProperty("cursor","move"):this.enabled&&this.init()),this.dialogDragEnabled||(this.enabled=!1,this.handle&&this.handle.style.setProperty("cursor",""))}ngOnDestroy(){this.destroy$.next()}reset(t){const i={x:0,y:0};this.offset={...i,...t},this.delta={...i},this.translate()}setupEvents(){this.zone.runOutsideAngular(()=>{const t=(0,f.R)(this.handle,"mousedown"),i=(0,f.R)(document,"mousemove"),o=(0,f.R)(document,"mouseup");t.pipe((0,h.h)(()=>this.enabled),(0,w.U)(l=>({startX:l.clientX,startY:l.clientY})),(0,A.w)(({startX:l,startY:d})=>i.pipe((0,w.U)(c=>{c.preventDefault(),this.delta={x:c.clientX-l,y:c.clientY-d},"constrain"===this.dragConstraint&&this.checkConstraint()}),(0,u.R)(o))),(0,u.R)(this.destroy$)).subscribe(()=>{0===this.delta.x&&0===this.delta.y||this.translate()}),o.pipe((0,h.h)(()=>this.enabled),(0,h.h)(()=>0!==this.delta.x||0!==this.delta.y),(0,u.R)(this.destroy$)).subscribe(()=>{"bounce"===this.dragConstraint&&(this.checkConstraint(),this.translate()),this.offset.x+=this.delta.x,this.offset.y+=this.delta.y,this.delta={x:0,y:0}})})}translate(){this.target&&this.zone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this.handle.style.setProperty("transform",`translate(${this.translateX}px, ${this.translateY}px)`)})})}get translateX(){return this.offset.x+this.delta.x}get translateY(){return this.offset.y+this.delta.y}init(){if(!this.dialogDragTarget)throw new Error("You need to specify the drag target");this.handle=this.dialogDragHandle instanceof Element?this.dialogDragHandle:"string"==typeof this.dialogDragHandle&&this.dialogDragHandle?document.querySelector(this.dialogDragHandle):this.host.nativeElement,this.handle&&this.enabled&&this.handle.style.setProperty("cursor","move"),this.target=this.dialogDragTarget instanceof HTMLElement?this.dialogDragTarget:document.querySelector(this.dialogDragTarget),this.setupEvents(),this.translate()}checkConstraint(){const{width:t,height:i}=this.target.getBoundingClientRect(),{innerWidth:o,innerHeight:a}=window,l=this.translateY>0?this.translateY+i/2:this.translateY-i/2,d=a/2,c=this.translateX>0?this.translateX+t/2:this.translateX-t/2,g=o/2;-d>l&&(this.delta.y=i/2-d-this.offset.y),d<l&&(this.delta.y=d-i/2-this.offset.y),-g>c&&(this.delta.x=t/2-g-this.offset.x),g<c&&(this.delta.x=g-t/2-this.offset.x)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=e.\u0275\u0275defineDirective({type:n,selectors:[["","dialogDraggable",""]],inputs:{dialogDragHandle:"dialogDragHandle",dialogDragTarget:"dialogDragTarget",dialogDragEnabled:"dialogDragEnabled",dialogDragOffset:"dialogDragOffset",dragConstraint:"dragConstraint"},standalone:!0,features:[e.\u0275\u0275NgOnChangesFeature]}),n})();const b=new e.InjectionToken("A reference to the document. Useful for iframes that want appends to parent window",{providedIn:"root",factory:()=>(0,e.inject)(p.K0)}),y=new e.InjectionToken("config",{providedIn:"root",factory:()=>({})});const I=new e.InjectionToken("Global dialog config token",{providedIn:"root",factory:()=>function x(){return{id:void 0,container:(0,e.inject)(b).body,backdrop:!0,closeButton:!0,enableClose:!0,draggable:!1,dragConstraint:"none",resizable:!1,size:"md",windowClass:void 0,width:void 0,height:void 0,minHeight:void 0,maxHeight:void 0,data:void 0,vcr:void 0,sizes:{sm:{height:"auto",width:"400px"},md:{height:"auto",width:"560px"},lg:{height:"auto",width:"800px"},fullScreen:{height:"100%",width:"100%"}},onClose:void 0,onOpen:void 0}}()}),O=new e.InjectionToken("Nodes inserted into the dialog");let U=(()=>{class n{constructor(){this.config=(0,e.inject)(y),this.dialogRef=(0,e.inject)(v),this.size=this.config.sizes?.[this.config.size||"md"],this.styles={width:D(this.config.width||this.size?.width),height:D(this.config.height||this.size?.height),minHeight:D(this.config.minHeight||this.size?.minHeight),maxHeight:D(this.config.maxHeight||this.size?.maxHeight)},this.destroy$=new m.x,this.nodes=(0,e.inject)(O),this.document=(0,e.inject)(p.K0),this.host=(0,e.inject)(e.ElementRef).nativeElement,this.host.id=this.config.id,this.nodes.forEach(t=>this.host.appendChild(t)),this.config.windowClass&&this.config.windowClass.split(/\s/).filter(i=>i).forEach(i=>this.host.classList.add(i))}ngOnInit(){const i=this.dialogElement.nativeElement,o=(0,f.R)(this.config.backdrop?this.backdrop.nativeElement:this.document.body,"click",{capture:!0}).pipe((0,h.h)(({target:a})=>!i.contains(a)));o.pipe((0,u.R)(this.destroy$)).subscribe(this.dialogRef.backdropClick$),this.config.enableClose&&(0,_.T)((0,f.R)(this.document.body,"keyup").pipe((0,h.h)(({key:a})=>"Escape"===a)),o).pipe((0,u.R)(this.destroy$)).subscribe(()=>this.closeDialog()),this.nodes.forEach(a=>i.appendChild(a))}reset(t){this.config.draggable&&this.draggable.reset(t)}closeDialog(){this.dialogRef.close()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.dialogRef=null,this.nodes=null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ngneat-dialog"]],viewQuery:function(t,i){if(1&t&&(e.\u0275\u0275viewQuery($,7),e.\u0275\u0275viewQuery(L,7),e.\u0275\u0275viewQuery(R,5)),2&t){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(i.backdrop=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(i.dialogElement=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(i.draggable=o.first)}},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:6,vars:8,consts:[[1,"ngneat-dialog-backdrop",3,"hidden"],["backdrop",""],[1,"ngneat-dialog-content",3,"ngStyle"],["dialog",""],["class","ngneat-drag-marker","dialogDraggable","",3,"dialogDragEnabled","dialogDragTarget","dragConstraint",4,"ngIf"],["class","ngneat-close-dialog",3,"click",4,"ngIf"],["dialogDraggable","",1,"ngneat-drag-marker",3,"dialogDragEnabled","dialogDragTarget","dragConstraint"],[1,"ngneat-close-dialog",3,"click"],["viewBox","0 0 329.26933 329","xmlns","http://www.w3.org/2000/svg"],["fill","currentColor","d","m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0,1)(2,"div",2,3),e.\u0275\u0275template(4,V,1,3,"div",4),e.\u0275\u0275template(5,B,3,0,"div",5),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275classProp("ngneat-dialog-backdrop-visible",i.config.backdrop),e.\u0275\u0275property("hidden",!i.config.backdrop),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("ngneat-dialog-resizable",i.config.resizable),e.\u0275\u0275property("ngStyle",i.styles),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.config.draggable),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.config.closeButton))},dependencies:[R,p.ez,p.O5,p.PC],styles:[".ngneat-dialog-content{display:flex;flex-direction:column;overflow:hidden;position:relative;animation:dialog-open .4s cubic-bezier(.25,.8,.25,1);border-radius:4px;box-sizing:border-box;box-shadow:0 11px 15px -7px #0003,0 24px 38px 3px #00000024,0 9px 46px 8px #0000001f;background:#fff;color:#000000de;width:auto;max-width:100%;height:auto;max-height:100%}@keyframes dialog-open{0%{transform:translate(50px)}to{transform:none}}.ngneat-dialog-content.ngneat-dialog-resizable{resize:both}.ngneat-dialog-backdrop{position:fixed;display:flex;align-items:center;justify-content:center;inset:0;height:100%;width:100%;padding:30px;z-index:1050;background-color:transparent;animation:dialog-open-backdrop .3s}.ngneat-dialog-backdrop.ngneat-dialog-backdrop-visible{background:rgba(0,0,0,.32)}@keyframes dialog-open-backdrop{0%{opacity:0}to{opacity:1}}.ngneat-drag-marker{position:absolute;left:0;top:0;cursor:move;width:100%;height:10px;z-index:1051}.ngneat-close-dialog{display:flex;align-items:center;justify-content:center;position:absolute;top:10px;cursor:pointer;right:10px;width:24px;height:24px;color:#5f6368;transition:color .2s ease-in-out;z-index:1051}.ngneat-close-dialog svg{width:12px;height:12px}.ngneat-close-dialog:hover{color:#5d9ff1}body.ngneat-dialog-hidden{overflow:hidden}\n"],encapsulation:2}),n})();const j="ngneat-dialog-hidden";let K=(()=>{class n{constructor(){this.appRef=(0,e.inject)(e.ApplicationRef),this.injector=(0,e.inject)(e.EnvironmentInjector),this.document=(0,e.inject)(b),this.globalConfig=(0,e.inject)(I),this.dialogs=[]}closeAll(){this.dialogs.forEach(t=>t.close())}open(t,i={}){const o=this.mergeConfig(i);o.onOpen?.();const a=new v({id:o.id,data:o.data,backdropClick$:new m.x});this.throwIfIDAlreadyExists(o.id);const l={config:o,dialogRef:a};return this.dialogs.push(a),1===this.dialogs.length&&this.document.body.classList.add(j),t instanceof e.TemplateRef?this.openTemplate(t,l):"function"==typeof t?this.openComponent(t,l):function W(n){throw new TypeError(`Dialog must receive a Component or a TemplateRef, but this has been passed instead: ${n}`)}(t)}openTemplate(t,{config:i,dialogRef:o}){const a={$implicit:o,config:i},l=i.vcr?.createEmbeddedView(t,a)||t.createEmbeddedView(a);return this.attach({dialogRef:o,config:i,ref:t,view:l,attachToApp:!i.vcr})}openComponent(t,{config:i,dialogRef:o}){const a=(0,e.createComponent)(t,{elementInjector:e.Injector.create({providers:[{provide:C,useValue:o},{provide:y,useValue:i}],parent:i.vcr?.injector||this.injector}),environmentInjector:this.injector});return this.attach({dialogRef:o,config:i,ref:a,view:a.hostView,attachToApp:!0})}attach({dialogRef:t,config:i,ref:o,view:a,attachToApp:l}){const d=this.createDialog(i,t,a),c=i.container instanceof e.ElementRef?i.container.nativeElement:i.container,g={after:new m.x};return t.mutate({id:i.id,data:i.data,ref:o,onClose:E=>{this.globalConfig.onClose?.(),this.dialogs=this.dialogs.filter(({id:Y})=>t.id!==Y),c.removeChild(d.location.nativeElement),this.appRef.detachView(d.hostView),this.appRef.detachView(a),d.destroy(),a.destroy(),t.backdropClick$.complete(),t.mutate({ref:null,onClose:null,afterClosed$:null,backdropClick$:null,beforeCloseGuards:null,onReset:null}),g.after.next(E),g.after.complete(),0===this.dialogs.length&&this.document.body.classList.remove(j)},afterClosed$:g.after.asObservable(),onReset:E=>{d.instance.reset(E)}}),c.appendChild(d.location.nativeElement),this.appRef.attachView(d.hostView),l&&this.appRef.attachView(a),t.asDialogRef()}createDialog(t,i,o){return(0,e.createComponent)(U,{elementInjector:e.Injector.create({providers:[{provide:v,useValue:i},{provide:O,useValue:o.rootNodes},{provide:y,useValue:t}],parent:this.injector}),environmentInjector:this.injector})}mergeConfig(t){return{...this.globalConfig,id:`dialog-${Math.random().toString(36).substring(7)}`,...t,sizes:this.globalConfig?.sizes}}throwIfIDAlreadyExists(t){if(this.dialogs.find(i=>i.id===t))throw new Error(`Please, ID must be unique, but there is already a dialog created with this ID: ${t}`)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}]);