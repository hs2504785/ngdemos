(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[5600],{5600:(e,t,n)=>{"use strict";n.r(t),n.d(t,{TodosEntityModule:()=>W});var o=n(1116),i=n(766),r=n(8691),l=n(5366),d=n(1671),s=n(1041);let c=(()=>{class e{constructor(e){this.store=e}ngOnInit(){}addTodo(e){console.log("Todo",e),this.store.dispatch((0,r.ju)({todo:e}))}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](d.yh))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["lib-add-todo"]],decls:15,vars:0,consts:[[1,"d-flex","justify-content-between"],[3,"ngSubmit"],["form","ngForm"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","ngModel","","name","title",1,"form-control"],[1,"mb-3","form-check"],["type","checkbox","id","completed","ngModel","","name","completed",1,"form-check-input"],["for","completed",1,"form-check-label"],["type","submit",1,"btn","btn-primary"]],template:function(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"header",0),l["\u0275\u0275elementStart"](1,"h1"),l["\u0275\u0275text"](2,"Add todo"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"form",1,2),l["\u0275\u0275listener"]("ngSubmit",function(){l["\u0275\u0275restoreView"](e);const n=l["\u0275\u0275reference"](4);return t.addTodo(n.value)}),l["\u0275\u0275elementStart"](5,"div",3),l["\u0275\u0275elementStart"](6,"label",4),l["\u0275\u0275text"](7,"Title"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](8,"input",5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"div",6),l["\u0275\u0275element"](10,"input",7),l["\u0275\u0275elementStart"](11,"label",8),l["\u0275\u0275text"](12,"Completed"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"button",9),l["\u0275\u0275text"](14,"Submit"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}},directives:[s._Y,s.JL,s.F,s.Fj,s.JJ,s.On,s.Wl],styles:[""]}),e})();var a=n(3884),m=n(322),p=n(5934);const u="entityTodos",f=(0,m.H)({sortComparer:function(e,t){return e.title.localeCompare(t.title)}}),h=f.getInitialState({}),v=(0,d.Lq)(h,(0,d.on)(r.DK,(e,t)=>f.addOne(t.todo,e)),(0,d.on)(r.IX,(e,t)=>f.updateOne(t.todo,e)),(0,d.on)(r.RS,(e,t)=>f.removeOne(t.todoId,e)),(0,d.on)(p.jb,(e,t)=>f.setAll(t.todos,e))),{selectEntities:g,selectAll:S}=f.getSelectors();function b(e,t){return v(e,t)}const E=(0,d.ZF)(u),y=(0,d.P1)(E,S),I=(0,d.P1)(E,g),x=(0,d.ZF)("router"),{selectRouteParams:w}=(0,a.Ug)(x),C=(0,d.P1)(I,w,(e,{id:t})=>e&&e[t]);function O(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275elementStart"](1,"form",2,3),l["\u0275\u0275listener"]("ngSubmit",function(){const t=l["\u0275\u0275restoreView"](e).ngIf,n=l["\u0275\u0275reference"](2);return l["\u0275\u0275nextContext"]().updateTodo(t,n.value)}),l["\u0275\u0275elementStart"](3,"div",4),l["\u0275\u0275elementStart"](4,"label",5),l["\u0275\u0275text"](5,"Title"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](6,"input",6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"div",7),l["\u0275\u0275element"](8,"input",8),l["\u0275\u0275elementStart"](9,"label",9),l["\u0275\u0275text"](10,"Completed"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"button",10),l["\u0275\u0275text"](12,"Submit"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf;l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngModel",e.title),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngModel",e.completed)}}let T=(()=>{class e{constructor(e){this.store=e}ngOnInit(){this.todo$=this.store.pipe((0,d.Ys)(C))}updateTodo(e,t){const n=Object.assign(Object.assign({},e),t);this.store.dispatch((0,r.IX)({todo:{id:n.id,changes:t}})),console.log("Update ",n)}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](d.yh))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["lib-edit-todo"]],decls:5,vars:3,consts:[[1,"d-flex","justify-content-between","mt-2"],[4,"ngIf"],[3,"ngSubmit"],["form","ngForm"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","name","title",1,"form-control",3,"ngModel"],[1,"mb-3","form-check"],["type","checkbox","id","completed","name","completed",1,"form-check-input",3,"ngModel"],["for","completed",1,"form-check-label"],["type","submit",1,"btn","btn-primary"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"header",0),l["\u0275\u0275elementStart"](1,"h1"),l["\u0275\u0275text"](2,"Edit todo"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](3,O,13,2,"ng-container",1),l["\u0275\u0275pipe"](4,"async")),2&e&&(l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",l["\u0275\u0275pipeBind1"](4,1,t.todo$)))},directives:[o.O5,s._Y,s.JL,s.F,s.Fj,s.JJ,s.On,s.Wl],pipes:[o.Ov],styles:[""]}),e})(),k=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["lib-view-todo"]],decls:2,vars:0,template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"p"),l["\u0275\u0275text"](1,"view-todo works!"),l["\u0275\u0275elementEnd"]())},styles:[""]}),e})();const j=function(e){return["edit",e]};function $(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"li",9),l["\u0275\u0275elementStart"](1,"div",10),l["\u0275\u0275text"](2),l["\u0275\u0275elementStart"](3,"div"),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"a",11),l["\u0275\u0275element"](6,"i",12),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"i",13),l["\u0275\u0275listener"]("click",function(){const t=l["\u0275\u0275restoreView"](e).$implicit;return l["\u0275\u0275nextContext"](2).removeTodo(t)}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate2"](" ",e.id," - ",e.title," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("Completed: ",e.completed,""),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("routerLink",l["\u0275\u0275pureFunction1"](4,j,e.id))}}function F(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"ul",7),l["\u0275\u0275template"](1,$,8,6,"li",8),l["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf;l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",e)}}const D=[{path:"",component:(()=>{class e{constructor(e){this.store=e}ngOnInit(){this.todos$=this.store.pipe((0,d.Ys)(y))}removeTodo(e){this.store.dispatch((0,r.iV)({todoId:e.id}))}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](d.yh))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["lib-todos-entity"]],decls:12,vars:3,consts:[[1,"container"],[1,"row"],[1,"col-sm-6"],[1,"d-flex","justify-content-between","mb-2"],["routerLink","add",1,"btn","btn-primary","add-todo"],[1,"ti-plus"],["class","list-group",4,"ngIf"],[1,"list-group"],["class","list-group-item d-flex justify-content-between",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between"],[1,"todo"],[3,"routerLink"],[1,"ti-pencil","mr-2"],[1,"ti-trash",3,"click"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"header",3),l["\u0275\u0275elementStart"](4,"h1"),l["\u0275\u0275text"](5,"Todo List"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"a",4),l["\u0275\u0275element"](7,"i",5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](8,F,2,1,"ul",6),l["\u0275\u0275pipe"](9,"async"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"div",2),l["\u0275\u0275element"](11,"router-outlet"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](8),l["\u0275\u0275property"]("ngIf",l["\u0275\u0275pipeBind1"](9,1,t.todos$)))},directives:[i.yS,o.O5,i.lC,o.sg],pipes:[o.Ov],styles:[".add-todo[_ngcontent-%COMP%]{display:flex;align-self:center}.todo[_ngcontent-%COMP%]{flex:1}.ti-trash[_ngcontent-%COMP%]{cursor:pointer;margin-top:2px;margin-left:10px}"]}),e})(),children:[{path:"add",component:c},{path:"edit/:id",component:T},{path:"view/:id",component:k}]}];let M=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({imports:[[i.Bz.forChild(D)],i.Bz]}),e})();var _=n(1368),V=n(878),L=n(4689),P=n(9996),U=n(7727),J=n(6290),N=n(7335),R=n(529),Y=n(1537);let A=(()=>{class e extends N.sk{constructor(){super({url:`${R.N.socketConfig.url}/todos`,options:R.N.socketConfig.opts}),this.liveCreated$=this.fromEvent(Y.Z.ADD_ENTITY_TODO),this.liveUpdated$=this.fromEvent(Y.Z.EDIT_TODO),this.liveDeleted$=this.fromEvent(Y.Z.DELETE_ENTITY_TODO_SUCCESS)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),K=(()=>{class e{constructor(e,t,n){this.actions$=e,this.todoService=t,this.todoSocket=n,this.editPost$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(r.IX),(0,L.w)(({todo:e})=>{console.log("HERER",e);const t=Object.assign({id:e.id},e.changes);return this.todoService.updateTodo(t)})),{dispatch:!1}),this.createTodo$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(r.ju),(0,L.w)(({todo:e})=>this.todoService.addTodo(e).pipe((0,P.U)(e=>(0,r.DK)({todo:e})),(0,U.K)(()=>(0,V.of)((0,r.$G)())))))),this.deleteEntityTodo$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(r.iV),(0,L.w)(({todoId:e})=>this.todoService.removeTodo(e).pipe((0,P.U)(()=>(0,r.RS)({todoId:e})),(0,U.K)(()=>(0,V.of)((0,r.TV)())))))),this.liveCreate$=this.todoSocket.liveCreated$.pipe((0,P.U)(e=>(0,r.DK)({todo:e}))),this.liveDestroy$=this.todoSocket.liveDeleted$.pipe((0,P.U)(e=>(0,r.RS)({todoId:e})))}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275inject"](_.eX),l["\u0275\u0275inject"](J.w),l["\u0275\u0275inject"](A))},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})(),W=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({imports:[[o.ez,s.u5,M,d.Aw.forFeature(u,b),_.sQ.forFeature([K])]]}),e})()}}]);