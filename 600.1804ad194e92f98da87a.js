(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[600],{5600:(t,e,o)=>{"use strict";o.r(e),o.d(e,{TodosEntityModule:()=>X});var n=o(1116),i=o(766),s=o(8691),c=o(5366),r=o(1671),d=o(1041);let l=(()=>{class t{constructor(t){this.store=t}ngOnInit(){}addTodo(t){console.log("Todo",t),this.store.dispatch((0,s.ju)({todo:t}))}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(r.yh))},t.\u0275cmp=c.Xpm({type:t,selectors:[["lib-add-todo"]],decls:15,vars:0,consts:[[1,"d-flex","justify-content-between"],[3,"ngSubmit"],["form","ngForm"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","ngModel","","name","title",1,"form-control"],[1,"mb-3","form-check"],["type","checkbox","id","completed","ngModel","","name","completed",1,"form-check-input"],["for","completed",1,"form-check-label"],["type","submit",1,"btn","btn-primary"]],template:function(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"header",0),c.TgZ(1,"h1"),c._uU(2,"Add todo"),c.qZA(),c.qZA(),c.TgZ(3,"form",1,2),c.NdJ("ngSubmit",function(){c.CHM(t);const o=c.MAs(4);return e.addTodo(o.value)}),c.TgZ(5,"div",3),c.TgZ(6,"label",4),c._uU(7,"Title"),c.qZA(),c._UZ(8,"input",5),c.qZA(),c.TgZ(9,"div",6),c._UZ(10,"input",7),c.TgZ(11,"label",8),c._uU(12,"Completed"),c.qZA(),c.qZA(),c.TgZ(13,"button",9),c._uU(14,"Submit"),c.qZA(),c.qZA()}},directives:[d._Y,d.JL,d.F,d.Fj,d.JJ,d.On,d.Wl],styles:[""]}),t})();var p=o(3884),u=o(322),a=o(5934);const f="entityTodos",m=(0,u.H)({sortComparer:function(t,e){return t.title.localeCompare(e.title)}}),g=m.getInitialState({}),Z=(0,r.Lq)(g,(0,r.on)(s.DK,(t,e)=>m.addOne(e.todo,t)),(0,r.on)(s.IX,(t,e)=>m.updateOne(e.todo,t)),(0,r.on)(s.RS,(t,e)=>m.removeOne(e.todoId,t)),(0,r.on)(a.jb,(t,e)=>m.setAll(e.todos,t))),{selectEntities:h,selectAll:T}=m.getSelectors();function v(t,e){return Z(t,e)}const b=(0,r.ZF)(f),A=(0,r.P1)(b,T),y=(0,r.P1)(b,h),q=(0,r.ZF)("router"),{selectRouteParams:_}=(0,p.Ug)(q),k=(0,r.P1)(y,_,(t,{id:e})=>t&&t[e]);function w(t,e){if(1&t){const t=c.EpF();c.ynx(0),c.TgZ(1,"form",2,3),c.NdJ("ngSubmit",function(){const e=c.CHM(t).ngIf,o=c.MAs(2);return c.oxw().updateTodo(e,o.value)}),c.TgZ(3,"div",4),c.TgZ(4,"label",5),c._uU(5,"Title"),c.qZA(),c._UZ(6,"input",6),c.qZA(),c.TgZ(7,"div",7),c._UZ(8,"input",8),c.TgZ(9,"label",9),c._uU(10,"Completed"),c.qZA(),c.qZA(),c.TgZ(11,"button",10),c._uU(12,"Submit"),c.qZA(),c.qZA(),c.BQk()}if(2&t){const t=e.ngIf;c.xp6(6),c.Q6J("ngModel",t.title),c.xp6(2),c.Q6J("ngModel",t.completed)}}let O=(()=>{class t{constructor(t){this.store=t}ngOnInit(){this.todo$=this.store.pipe((0,r.Ys)(k))}updateTodo(t,e){const o=Object.assign(Object.assign({},t),e);this.store.dispatch((0,s.IX)({todo:{id:o.id,changes:e}})),console.log("Update ",o)}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(r.yh))},t.\u0275cmp=c.Xpm({type:t,selectors:[["lib-edit-todo"]],decls:5,vars:3,consts:[[1,"d-flex","justify-content-between","mt-2"],[4,"ngIf"],[3,"ngSubmit"],["form","ngForm"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","name","title",1,"form-control",3,"ngModel"],[1,"mb-3","form-check"],["type","checkbox","id","completed","name","completed",1,"form-check-input",3,"ngModel"],["for","completed",1,"form-check-label"],["type","submit",1,"btn","btn-primary"]],template:function(t,e){1&t&&(c.TgZ(0,"header",0),c.TgZ(1,"h1"),c._uU(2,"Edit todo"),c.qZA(),c.qZA(),c.YNc(3,w,13,2,"ng-container",1),c.ALo(4,"async")),2&t&&(c.xp6(3),c.Q6J("ngIf",c.lcZ(4,1,e.todo$)))},directives:[n.O5,d._Y,d.JL,d.F,d.Fj,d.JJ,d.On,d.Wl],pipes:[n.Ov],styles:[""]}),t})(),U=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Xpm({type:t,selectors:[["lib-view-todo"]],decls:2,vars:0,template:function(t,e){1&t&&(c.TgZ(0,"p"),c._uU(1,"view-todo works!"),c.qZA())},styles:[""]}),t})();const x=function(t){return["edit",t]};function I(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"li",9),c.TgZ(1,"div",10),c._uU(2),c.TgZ(3,"div"),c._uU(4),c.qZA(),c.qZA(),c.TgZ(5,"a",11),c._UZ(6,"i",12),c.qZA(),c.TgZ(7,"i",13),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw(2).removeTodo(e)}),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(2),c.AsE(" ",t.id," - ",t.title," "),c.xp6(2),c.hij("Completed: ",t.completed,""),c.xp6(1),c.Q6J("routerLink",c.VKq(4,x,t.id))}}function S(t,e){if(1&t&&(c.TgZ(0,"ul",7),c.YNc(1,I,8,6,"li",8),c.qZA()),2&t){const t=e.ngIf;c.xp6(1),c.Q6J("ngForOf",t)}}const C=[{path:"",component:(()=>{class t{constructor(t){this.store=t}ngOnInit(){this.todos$=this.store.pipe((0,r.Ys)(A))}removeTodo(t){this.store.dispatch((0,s.iV)({todoId:t.id}))}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(r.yh))},t.\u0275cmp=c.Xpm({type:t,selectors:[["lib-todos-entity"]],decls:12,vars:3,consts:[[1,"container"],[1,"row"],[1,"col-sm-6"],[1,"d-flex","justify-content-between","mb-2"],["routerLink","add",1,"btn","btn-primary","add-todo"],[1,"ti-plus"],["class","list-group",4,"ngIf"],[1,"list-group"],["class","list-group-item d-flex justify-content-between",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between"],[1,"todo"],[3,"routerLink"],[1,"ti-pencil","mr-2"],[1,"ti-trash",3,"click"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"header",3),c.TgZ(4,"h1"),c._uU(5,"Todo List"),c.qZA(),c.TgZ(6,"a",4),c._UZ(7,"i",5),c.qZA(),c.qZA(),c.YNc(8,S,2,1,"ul",6),c.ALo(9,"async"),c.qZA(),c.TgZ(10,"div",2),c._UZ(11,"router-outlet"),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(8),c.Q6J("ngIf",c.lcZ(9,1,e.todos$)))},directives:[i.yS,n.O5,i.lC,n.sg],pipes:[n.Ov],styles:[".add-todo[_ngcontent-%COMP%]{display:flex;align-self:center}.todo[_ngcontent-%COMP%]{flex:1}.ti-trash[_ngcontent-%COMP%]{cursor:pointer;margin-top:2px;margin-left:10px}"]}),t})(),children:[{path:"add",component:l},{path:"edit/:id",component:O},{path:"view/:id",component:U}]}];let $=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[i.Bz.forChild(C)],i.Bz]}),t})();var E=o(4809),F=o(878),J=o(4689),j=o(9996),M=o(7727),Y=o(6290),D=o(7335),L=o(529),N=o(1537);let P=(()=>{class t extends D.sk{constructor(){super({url:`${L.N.socketConfig.url}/todos`,options:L.N.socketConfig.opts}),this.liveCreated$=this.fromEvent(N.Z.ADD_ENTITY_TODO),this.liveUpdated$=this.fromEvent(N.Z.EDIT_TODO),this.liveDeleted$=this.fromEvent(N.Z.DELETE_ENTITY_TODO_SUCCESS)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Q=(()=>{class t{constructor(t,e,o){this.actions$=t,this.todoService=e,this.todoSocket=o,this.editPost$=(0,E.GW)(()=>this.actions$.pipe((0,E.l4)(s.IX),(0,J.w)(({todo:t})=>{console.log("HERER",t);const e=Object.assign({id:t.id},t.changes);return this.todoService.updateTodo(e)})),{dispatch:!1}),this.createTodo$=(0,E.GW)(()=>this.actions$.pipe((0,E.l4)(s.ju),(0,J.w)(({todo:t})=>this.todoService.addTodo(t).pipe((0,j.U)(t=>(0,s.DK)({todo:t})),(0,M.K)(()=>(0,F.of)((0,s.$G)())))))),this.deleteEntityTodo$=(0,E.GW)(()=>this.actions$.pipe((0,E.l4)(s.iV),(0,J.w)(({todoId:t})=>this.todoService.removeTodo(t).pipe((0,j.U)(()=>(0,s.RS)({todoId:t})),(0,M.K)(()=>(0,F.of)((0,s.TV)())))))),this.liveCreate$=this.todoSocket.liveCreated$.pipe((0,j.U)(t=>(0,s.DK)({todo:t}))),this.liveDestroy$=this.todoSocket.liveDeleted$.pipe((0,j.U)(t=>(0,s.RS)({todoId:t})))}}return t.\u0275fac=function(e){return new(e||t)(c.LFG(E.eX),c.LFG(Y.w),c.LFG(P))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac}),t})(),X=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[n.ez,d.u5,$,r.Aw.forFeature(f,v),E.sQ.forFeature([Q])]]}),t})()}}]);