(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[994],{994:(t,e,s)=>{"use strict";s.r(e),s.d(e,{UsersEntityModule:()=>w});var i=s(1116),r=s(766),o=s(1671),n=s(842),a=s(6625),c=s(9505),l=s(2935),u=s(5366),d=s(1041),p=s(3070),h=s(9550),m=s(4369);let g=(()=>{class t{constructor(t,e,s,i){this.fb=t,this.dialogRef=e,this.store=i,this.dialogTitle=s.dialogTitle,this.user=s.user,this.mode=s.mode;const r={email:[""],first_name:[""],last_name:[""]};"update"==this.mode?(this.form=this.fb.group(r),this.form.patchValue(Object.assign({},this.user))):"create"==this.mode&&(this.form=this.fb.group(Object.assign({},r)))}onClose(){this.dialogRef.close()}onSave(){const t=Object.assign(Object.assign({},this.user),this.form.value);"update"==this.mode?(console.log("Update User",t),this.store.dispatch((0,a.f_)({user:{id:this.user.id,changes:this.form.value}})),this.dialogRef.close()):"create"==this.mode&&(console.log("Add User",t),t.avatar="https://robohash.org/test?size=128x128",this.store.dispatch((0,a.S2)({user:t})),this.dialogRef.close())}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(d.qu),u.Y36(l.so),u.Y36(l.WI),u.Y36(o.yh))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-user-entity-dialog"]],decls:16,vars:2,consts:[["mat-dialog-title",""],[3,"formGroup"],["matInput","","placeholder","Email","formControlName","email"],["matInput","","placeholder","First Name","formControlName","first_name"],["matInput","","placeholder","Last Name","formControlName","last_name"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(u.TgZ(0,"h2",0),u._uU(1),u.qZA(),u.TgZ(2,"mat-dialog-content"),u.ynx(3),u.ynx(4,1),u.TgZ(5,"mat-form-field"),u._UZ(6,"input",2),u.qZA(),u.TgZ(7,"mat-form-field"),u._UZ(8,"input",3),u.qZA(),u.TgZ(9,"mat-form-field"),u._UZ(10,"input",4),u.qZA(),u.BQk(),u.BQk(),u.qZA(),u.TgZ(11,"mat-dialog-actions"),u.TgZ(12,"button",5),u.NdJ("click",function(){return e.onClose()}),u._uU(13,"Close"),u.qZA(),u.TgZ(14,"button",6),u.NdJ("click",function(){return e.onSave()}),u._uU(15,"Save"),u.qZA(),u.qZA()),2&t&&(u.xp6(1),u.Oqu(e.dialogTitle),u.xp6(3),u.Q6J("formGroup",e.form))},directives:[l.uh,l.xY,d.JL,d.sg,p.KE,h.Nt,d.Fj,d.JJ,d.u,l.H8,m.lW],styles:[""],changeDetection:0}),t})();function f(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"div",5),u.TgZ(1,"div",6),u._UZ(2,"img",7),u.qZA(),u.TgZ(3,"div",8),u.TgZ(4,"div"),u.TgZ(5,"strong"),u._uU(6),u.qZA(),u._UZ(7,"br"),u.TgZ(8,"small"),u._uU(9),u.qZA(),u.qZA(),u.TgZ(10,"div"),u.TgZ(11,"button",9),u.NdJ("click",function(){const e=u.CHM(t).$implicit;return u.oxw().editUser(e)}),u._UZ(12,"i",10),u.qZA(),u.TgZ(13,"button",11),u.NdJ("click",function(){const e=u.CHM(t).$implicit;return u.oxw().removeUser(e)}),u._UZ(14,"i",12),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&t){const t=e.$implicit;u.xp6(2),u.Q6J("src",t.avatar,u.LSH),u.xp6(4),u.Oqu(t.first_name),u.xp6(3),u.Oqu(t.email)}}const Z=[{path:"",component:(()=>{class t{constructor(t,e){this.store=t,this.dialog=e}ngOnInit(){this.users$=this.store.pipe((0,o.Ys)(c.vH))}removeUser(t){console.log("Remove user"),this.store.dispatch((0,a.Mb)({id:t.id}))}addUser(){const t=(0,n.m)();t.data={dialogTitle:"Add User",mode:"create"},this.dialog.open(g,t)}editUser(t){const e=(0,n.m)();e.data={dialogTitle:"Edit User",user:t,mode:"update"},this.dialog.open(g,e).afterClosed().subscribe(t=>{console.log("Closed",t)})}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(o.yh),u.Y36(l.uw))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-users-entity"]],decls:8,vars:3,consts:[[1,"container"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-primary","align-self-center",3,"click"],[1,"ti-plus"],["class","d-flex mb-2",4,"ngFor","ngForOf"],[1,"d-flex","mb-2"],[1,"flex-shrink-0","mr-2"],["alt","...",3,"src"],[1,"flex-grow-1","ml-2"],[1,"btn","btn-primary","mr-2",3,"click"],[1,"ti-pencil"],[1,"btn","btn-danger",3,"click"],[1,"ti-trash"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"header",1),u.TgZ(2,"h1"),u._uU(3,"Users List (Entity)"),u.qZA(),u.TgZ(4,"button",2),u.NdJ("click",function(){return e.addUser()}),u._UZ(5,"i",3),u.qZA(),u.qZA(),u.YNc(6,f,15,3,"div",4),u.ALo(7,"async"),u.qZA()),2&t&&(u.xp6(6),u.Q6J("ngForOf",u.lcZ(7,1,e.users$)))},directives:[i.sg],pipes:[i.Ov],styles:["img[_ngcontent-%COMP%]{width:128px;height:128px}"],changeDetection:0}),t})()}];let U=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[r.Bz.forChild(Z)],r.Bz]}),t})();var v=s(4809),b=s(8958),A=s(4689),y=s(9996),_=s(7727),q=s(3982),T=s(878),$=s(2693);let k=(()=>{class t{constructor(t){this.http=t,this.API_URL="https://reqres.in/api/users"}getUsers(){return this.http.get(`${this.API_URL}`).pipe((0,y.U)(t=>t.data))}addUser(t){return this.http.post(`${this.API_URL}`,t)}updateUser(t){return this.http.put(`${this.API_URL}/${t.id}`,t)}removeUser(t){return this.http.delete(`${this.API_URL}/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(u.LFG($.eN))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),x=(()=>{class t{constructor(t,e){this.actions$=t,this.userentitySetvice=e,this.loadEntityUsers$=(0,v.GW)(()=>this.actions$.pipe((0,v.l4)(a.Ec),(0,A.w)(()=>this.userentitySetvice.getUsers().pipe((0,y.U)(t=>(0,a.vn)({users:t})),(0,_.K)(t=>(0,T.of)((0,a.V6)({error:t}))))))),this.deleteEntityUsers$=(0,v.GW)(()=>this.actions$.pipe((0,v.l4)(a.Mb),(0,q.zg)(({id:t})=>this.userentitySetvice.removeUser(t))),{dispatch:!1}),this.createStoreUser$=(0,v.GW)(()=>this.actions$.pipe((0,v.l4)(a.S2),(0,A.w)(({user:t})=>this.userentitySetvice.addUser(t).pipe((0,y.U)(t=>(0,a.SI)({user:t})),(0,_.K)(()=>(0,T.of)((0,a.XI)())))))),this.editEntityUser$=(0,v.GW)(()=>this.actions$.pipe((0,v.l4)(a.f_),(0,A.w)(({user:t})=>{const e=Object.assign({id:t.id},t.changes);return this.userentitySetvice.updateUser(e)})),{dispatch:!1})}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(v.eX),u.LFG(k))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[i.ez,U,l.Is,h.c,p.lN,m.ot,d.UX,o.Aw.forFeature(b.YI,b.Jy),v.sQ.forFeature([x])]]}),t})()}}]);