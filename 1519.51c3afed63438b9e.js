"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[1519],{1519:(A,C,t)=>{t.r(C),t.d(C,{UsersStoreModule:()=>d});var g=t(6895),y=t(9116),U=t(9653),$=t(7956),o=t(4257),I=t(9154),E=t(3601),e=t(4650),F=t(6325);function M(i,r){if(1&i){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",5)(1,"div",6),e.\u0275\u0275element(2,"img",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",8)(4,"div")(5,"strong"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"br"),e.\u0275\u0275elementStart(8,"small"),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"div")(11,"button",9),e.\u0275\u0275listener("click",function(){const S=e.\u0275\u0275restoreView(n).$implicit,x=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(x.editUser(S))}),e.\u0275\u0275element(12,"i",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"button",11),e.\u0275\u0275listener("click",function(){const S=e.\u0275\u0275restoreView(n).$implicit,x=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(x.removeUser(S))}),e.\u0275\u0275element(14,"i",12),e.\u0275\u0275elementEnd()()()()}if(2&i){const n=r.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275property("src",n.avatar,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(n.first_name),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(n.email)}}class m{constructor(r,n){this.store=r,this.dialog=n}ngOnInit(){this.users$=this.store.pipe((0,U.Ys)(I.zE))}removeUser(r){console.log("Remove user"),this.store.dispatch((0,o.Fp)({id:r.id}))}addUser(){const r=(0,$.m)();r.data={dialogTitle:"Add User",mode:"create"},this.dialog.open(E.W,r)}editUser(r){const n=(0,$.m)();n.data={dialogTitle:"Edit User",user:r,mode:"update"},this.dialog.open(E.W,n).afterClosed().subscribe(s=>{console.log("Closed",s)})}}m.\u0275fac=function(r){return new(r||m)(e.\u0275\u0275directiveInject(U.yh),e.\u0275\u0275directiveInject(F.uw))},m.\u0275cmp=e.\u0275\u0275defineComponent({type:m,selectors:[["app-users-store"]],decls:8,vars:3,consts:[[1,"container"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-primary","align-self-center",3,"click"],[1,"ti-plus"],["class","d-flex mb-2",4,"ngFor","ngForOf"],[1,"d-flex","mb-2"],[1,"flex-shrink-0","mr-2"],["alt","...",3,"src"],[1,"flex-grow-1","ml-2"],[1,"btn","btn-primary","mr-2",3,"click"],[1,"ti-pencil"],[1,"btn","btn-danger",3,"click"],[1,"ti-trash"]],template:function(r,n){1&r&&(e.\u0275\u0275elementStart(0,"div",0)(1,"header",1)(2,"h1"),e.\u0275\u0275text(3,"Users List (Store)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",2),e.\u0275\u0275listener("click",function(){return n.addUser()}),e.\u0275\u0275element(5,"i",3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,M,15,3,"div",4),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275elementEnd()),2&r&&(e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(7,1,n.users$)))},dependencies:[g.sg,g.Ov],styles:["img[_ngcontent-%COMP%]{width:128px;height:128px}"],changeDetection:0});const z=[{path:"",component:m}];class c{}c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.\u0275\u0275defineNgModule({type:c}),c.\u0275inj=e.\u0275\u0275defineInjector({imports:[y.Bz.forChild(z),y.Bz]});var T=t(4144),W=t(9549),G=t(4859),K=t(4006),l=t(8776),h=t(3900),f=t(4004),p=t(262),O=t(5577),v=t(9646),V=t(2562);class a{constructor(r,n){this.actions$=r,this.userStoreSetvice=n,this.loadStoreUsers$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(o.zc),(0,h.w)(()=>this.userStoreSetvice.getUsers().pipe((0,f.U)(s=>(0,o.IU)({users:s})),(0,p.K)(s=>(0,v.of)((0,o.aA)({error:s}))))))),this.deleteStoreUsers$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(o.Fp),(0,O.z)(({id:s})=>this.userStoreSetvice.removeUser(s).pipe((0,f.U)(()=>(0,o.yc)()),(0,p.K)(()=>(0,v.of)((0,o.ru)())))))),this.createStoreUser$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(o.Dx),(0,h.w)(({user:s})=>this.userStoreSetvice.addUser(s).pipe((0,f.U)(u=>(0,o.Kz)({user:u})),(0,p.K)(()=>(0,v.of)((0,o.Ls)())))))),this.editStoreUser$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(o.d0),(0,h.w)(({user:s})=>this.userStoreSetvice.updateUser(s).pipe((0,f.U)(u=>(0,o.U7)({user:u})),(0,p.K)(()=>(0,v.of)((0,o.ox)()))))))}}a.\u0275fac=function(r){return new(r||a)(e.\u0275\u0275inject(l.eX),e.\u0275\u0275inject(V.p))},a.\u0275prov=e.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac});var j=t(4303);class d{}d.\u0275fac=function(r){return new(r||d)},d.\u0275mod=e.\u0275\u0275defineNgModule({type:d}),d.\u0275inj=e.\u0275\u0275defineInjector({imports:[g.ez,c,F.Is,T.c,W.lN,G.ot,K.UX,U.Aw.forFeature(j.GH,j.wq),l.sQ.forFeature([a])]})}}]);