(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[232],{9232:(t,n,e)=>{"use strict";e.r(n),e.d(n,{EbookComponent:()=>X,EbookModule:()=>kt,EbookService:()=>i});var o=e(5366);let i=(()=>{class t{constructor(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var s=e(1671);const r=(0,s.PH)("[Auth] Logout"),c=(0,s.PH)("[Auth] Logout Confirmation"),a=(0,s.PH)("[Auth] Logout Confirmation Dismiss"),u=(0,s.PH)("[Login Component] Login",(0,s.Ky)()),l=(0,s.PH)("[Auth/API] Login Success",(0,s.Ky)()),g=(0,s.PH)("[Auth/API] Login Failure",(0,s.Ky)()),p=(0,s.PH)("[Auth/API] Login Redirect"),d=(0,s.Lq)({error:null,pending:!1},(0,s.on)(u,t=>Object.assign(Object.assign({},t),{error:null,pending:!0})),(0,s.on)(l,t=>Object.assign(Object.assign({},t),{error:null,pending:!1})),(0,s.on)(g,(t,{error:n})=>Object.assign(Object.assign({},t),{error:n,pending:!1}))),f={user:null},m=(0,s.Lq)(f,(0,s.on)(l,(t,{user:n})=>Object.assign(Object.assign({},t),{user:n})),(0,s.on)(r,()=>f)),h="auth",v={status:m,login:d},b=(0,s.ZF)(h),Z=(0,s.P1)(b,t=>t.status),y=(0,s.P1)(Z,t=>t.user),A=(0,s.P1)(y,t=>!!t),w=(0,s.P1)(b,t=>t.login),k=((0,s.P1)(w,t=>t.error),(0,s.P1)(w,t=>t.pending),(0,s.PH)("[Layout] Open Sidenav")),L=(0,s.PH)("[Layout] Close Sidenav"),C="layout",M=(0,s.Lq)({showSidenav:!1},(0,s.on)(L,t=>({showSidenav:!1})),(0,s.on)(k,t=>({showSidenav:!0})),(0,s.on)(c,t=>({showSidenav:!1}))),S=(0,s.ZF)(C),q=(0,s.P1)(S,t=>t.showSidenav);var x=e(168),P=e(667);const T=["*"];let _=(()=>{class t{constructor(){this.open=!1,this.closeMenu=new o.vpe}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["lib-sidenav"]],inputs:{open:"open"},outputs:{closeMenu:"closeMenu"},ngContentSelectors:T,decls:4,vars:1,consts:[["disableClose","",3,"opened","keydown.escape","closedStart"],["sidenav",""]],template:function(t,n){if(1&t){const t=o.EpF();o.F$t(),o.TgZ(0,"mat-sidenav",0,1),o.NdJ("keydown.escape",function(){return o.CHM(t),o.MAs(1).close()})("closedStart",function(){return n.closeMenu.emit()}),o.TgZ(2,"mat-nav-list"),o.Hsn(3),o.qZA(),o.qZA()}2&t&&o.Q6J("opened",n.open)},directives:[x.JX,P.Hk],styles:["mat-sidenav[_ngcontent-%COMP%]{width:300px}"]}),t})();var F=e(1116),O=e(7112),I=e(4369);const J=["*"];let U=(()=>{class t{constructor(){this.openMenu=new o.vpe}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["lib-toolbar"]],outputs:{openMenu:"openMenu"},ngContentSelectors:J,decls:4,vars:0,consts:[["color","primary"],["mat-icon-button","","aria-label","menu",3,"click"],[1,"ti-menu"]],template:function(t,n){1&t&&(o.F$t(),o.TgZ(0,"mat-toolbar",0),o.TgZ(1,"button",1),o.NdJ("click",function(){return n.openMenu.emit()}),o._UZ(2,"i",2),o.qZA(),o.Hsn(3),o.qZA())},directives:[O.Ye,I.lW],styles:[""]}),t})();var $=e(766),H=e(7064);const N=["*"];let G=(()=>{class t{constructor(){this.icon="",this.hint="",this.routerLink="/ebook",this.navigate=new o.vpe}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["lib-nav-item"]],inputs:{icon:"icon",hint:"hint",routerLink:"routerLink"},outputs:{navigate:"navigate"},ngContentSelectors:N,decls:6,vars:5,consts:[["mat-list-item","",3,"routerLink","click"],["mat-list-icon",""],["mat-line",""],["mat-line","",1,"secondary"]],template:function(t,n){1&t&&(o.F$t(),o.TgZ(0,"a",0),o.NdJ("click",function(){return n.navigate.emit()}),o._UZ(1,"i",1),o.TgZ(2,"span",2),o.Hsn(3),o.qZA(),o.TgZ(4,"span",3),o._uU(5),o.qZA(),o.qZA()),2&t&&(o.Q6J("routerLink",n.routerLink),o.xp6(1),o.Gre("ti-",n.icon,""),o.xp6(4),o.Oqu(n.hint))},directives:[P.Tg,$.yS,P.Nh,H.X2],styles:[".secondary[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}"]}),t})();function Y(t,n){if(1&t){const t=o.EpF();o.TgZ(0,"lib-nav-item",6),o.NdJ("navigate",function(){return o.CHM(t),o.oxw().closeSidenav()}),o._uU(1," My Collection "),o.qZA()}}function j(t,n){if(1&t){const t=o.EpF();o.TgZ(0,"lib-nav-item",7),o.NdJ("navigate",function(){return o.CHM(t),o.oxw().closeSidenav()}),o._uU(1," Browse Books "),o.qZA()}}function Q(t,n){if(1&t){const t=o.EpF();o.TgZ(0,"lib-nav-item",8),o.NdJ("navigate",function(){return o.CHM(t),o.oxw().closeSidenav()}),o._uU(1," Sign In "),o.qZA()}}function z(t,n){if(1&t){const t=o.EpF();o.TgZ(0,"lib-nav-item",8),o.NdJ("navigate",function(){return o.CHM(t),o.oxw().logout()}),o._uU(1," Sign Out "),o.qZA()}}let X=(()=>{class t{constructor(t){this.store=t,this.showSidenav$=this.store.select(q),this.loggedIn$=this.store.select(A)}closeSidenav(){this.store.dispatch(L())}openSidenav(){this.store.dispatch(k())}logout(){this.store.dispatch(c())}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(s.yh))},t.\u0275cmp=o.Xpm({type:t,selectors:[["lib-ebook"]],decls:14,vars:15,consts:[["fullscreen",""],[3,"open"],["routerLink","books","icon","book","hint","View your book collection",3,"navigate",4,"ngIf"],["routerLink","books/find","icon","search","hint","Find your next book!",3,"navigate",4,"ngIf"],[3,"navigate",4,"ngIf"],[3,"openMenu"],["routerLink","books","icon","book","hint","View your book collection",3,"navigate"],["routerLink","books/find","icon","search","hint","Find your next book!",3,"navigate"],[3,"navigate"]],template:function(t,n){1&t&&(o.TgZ(0,"mat-sidenav-container",0),o.TgZ(1,"lib-sidenav",1),o.ALo(2,"async"),o.YNc(3,Y,2,0,"lib-nav-item",2),o.ALo(4,"async"),o.YNc(5,j,2,0,"lib-nav-item",3),o.ALo(6,"async"),o.YNc(7,Q,2,0,"lib-nav-item",4),o.ALo(8,"async"),o.YNc(9,z,2,0,"lib-nav-item",4),o.ALo(10,"async"),o.qZA(),o.TgZ(11,"lib-toolbar",5),o.NdJ("openMenu",function(){return n.openSidenav()}),o._uU(12," Book Collection "),o.qZA(),o._UZ(13,"router-outlet"),o.qZA()),2&t&&(o.xp6(1),o.Q6J("open",o.lcZ(2,5,n.showSidenav$)),o.xp6(2),o.Q6J("ngIf",o.lcZ(4,7,n.loggedIn$)),o.xp6(2),o.Q6J("ngIf",o.lcZ(6,9,n.loggedIn$)),o.xp6(2),o.Q6J("ngIf",!1===o.lcZ(8,11,n.loggedIn$)),o.xp6(2),o.Q6J("ngIf",o.lcZ(10,13,n.loggedIn$)))},directives:[x.TM,_,F.O5,U,$.lC,G,$.rH],pipes:[F.Ov],styles:["mat-sidenav-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.03)}"]}),t})();var B=e(9550),E=e(2797),W=e(2935),K=e(878),R=e(1041);function V(t,n){if(1&t&&(o.TgZ(0,"p",10),o._uU(1),o.qZA()),2&t){const t=o.oxw();o.xp6(1),o.hij(" ",t.errorMessage," ")}}let D=(()=>{class t{constructor(t){this.fb=t,this.submitted=new o.vpe}ngOnInit(){this.form=this.fb.group({username:"ngrx",password:""})}submit(){this.form.valid&&this.submitted.emit(this.form.value)}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(R.qu))},t.\u0275cmp=o.Xpm({type:t,selectors:[["lib-login-form"]],inputs:{errorMessage:"errorMessage"},outputs:{submitted:"submitted"},decls:17,vars:2,consts:[[1,"mx-5"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","email","id","name","formControlName","username",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control"],["class","loginError",4,"ngIf"],[1,"loginButtons"],["type","submit","mat-button",""],[1,"loginError"]],template:function(t,n){1&t&&(o.TgZ(0,"mat-card"),o.TgZ(1,"mat-card-title"),o._uU(2,"Login"),o.qZA(),o.TgZ(3,"mat-card-content",0),o.TgZ(4,"form",1),o.NdJ("ngSubmit",function(){return n.submit()}),o.TgZ(5,"div",2),o.TgZ(6,"label",3),o._uU(7,"Name"),o.qZA(),o._UZ(8,"input",4),o.qZA(),o.TgZ(9,"div",2),o.TgZ(10,"label",5),o._uU(11,"Password"),o.qZA(),o._UZ(12,"input",6),o.qZA(),o.YNc(13,V,2,1,"p",7),o.TgZ(14,"p",8),o.TgZ(15,"button",9),o._uU(16,"Login"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.xp6(4),o.Q6J("formGroup",n.form),o.xp6(9),o.Q6J("ngIf",n.errorMessage))},directives:[E.a8,E.n5,E.dn,R._Y,R.JL,R.sg,R.Fj,R.JJ,R.u,F.O5,I.lW],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;margin:72px 0}.mat-form-field[_ngcontent-%COMP%]{width:100%;min-width:300px}mat-card-content[_ngcontent-%COMP%], mat-card-title[_ngcontent-%COMP%]{display:flex;justify-content:center}.loginError[_ngcontent-%COMP%]{padding:16px;width:300px;color:#fff;background-color:red}.loginButtons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}"]}),t})();const tt=[{path:"login",component:(()=>{class t{constructor(t,n){this.store=t,this.router=n,this.pending$=(0,K.of)(!1),this.error$=(0,K.of)(!1)}onSubmit(t){this.store.dispatch(u({credentials:t}))}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(s.yh),o.Y36($.F0))},t.\u0275cmp=o.Xpm({type:t,selectors:[["lib-login"]],decls:2,vars:3,consts:[[3,"errorMessage","submitted"]],template:function(t,n){1&t&&(o.TgZ(0,"lib-login-form",0),o.NdJ("submitted",function(t){return n.onSubmit(t)}),o.ALo(1,"async"),o.qZA()),2&t&&o.Q6J("errorMessage",o.lcZ(1,1,n.error$))},directives:[D],pipes:[F.Ov],styles:[""]}),t})(),data:{title:"Login"}}];let nt=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[$.Bz.forChild(tt)],$.Bz]}),t})();var et=e(3070),ot=e(4809),it=e(436),st=e(9996),rt=e(7727),ct=e(653);const at=(0,s.PH)("[Auth] Load Auths"),ut=(0,s.PH)("[Auth] Load Auths Success",(0,s.Ky)()),lt=(0,s.PH)("[Auth] Load Auths Failure",(0,s.Ky)());let gt=(()=>{class t{constructor(t){this.actions$=t,this.loadAuths$=(0,ot.GW)(()=>this.actions$.pipe((0,ot.l4)(at),(0,it.b)(()=>ct.E.pipe((0,st.U)(t=>ut({data:t})),(0,rt.K)(t=>(0,K.of)(lt({error:t})))))))}}return t.\u0275fac=function(n){return new(n||t)(o.LFG(ot.eX))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})();var pt=e(4981),dt=e(4019),ft=e(1225);let mt=(()=>{class t{constructor(){}login({username:t}){return"test"!==t&&"ngrx"!==t?(0,ft._)("Invalid username or password"):(0,K.of)({name:"User"})}logout(){return(0,K.of)(!0)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ht=(()=>{class t{constructor(t,n,e){this.actions$=t,this.authService=n,this.router=e,this.login$=(0,ot.GW)(()=>this.actions$.pipe((0,ot.l4)(u),(0,st.U)(t=>t.credentials),(0,pt.z)(t=>this.authService.login(t).pipe((0,st.U)(t=>l({user:t})),(0,rt.K)(t=>(0,K.of)(g({error:t}))))))),this.loginSuccess$=(0,ot.GW)(()=>this.actions$.pipe((0,ot.l4)(l),(0,dt.b)(()=>{this.router.navigate(["/ebook"])})),{dispatch:!1}),this.loginRedirect$=(0,ot.GW)(()=>this.actions$.pipe((0,ot.l4)(p,r),(0,dt.b)(t=>{this.router.navigate(["/ebook/login"])})),{dispatch:!1})}}return t.\u0275fac=function(n){return new(n||t)(o.LFG(ot.eX),o.LFG(mt),o.LFG($.F0))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})(),vt=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["lib-logout-confirmation-dialog"]],decls:9,vars:2,consts:[["mat-dialog-title",""],["mat-button","",3,"mat-dialog-close"]],template:function(t,n){1&t&&(o.TgZ(0,"h2",0),o._uU(1,"Logout"),o.qZA(),o.TgZ(2,"mat-dialog-content"),o._uU(3,"Are you sure you want to logout?"),o.qZA(),o.TgZ(4,"mat-dialog-actions"),o.TgZ(5,"button",1),o._uU(6,"Cancel"),o.qZA(),o.TgZ(7,"button",1),o._uU(8,"OK"),o.qZA(),o.qZA()),2&t&&(o.xp6(5),o.Q6J("mat-dialog-close",!1),o.xp6(2),o.Q6J("mat-dialog-close",!0))},directives:[W.uh,W.xY,W.H8,I.lW,W.ZT],styles:["[_nghost-%COMP%]{display:block;width:100%;max-width:300px}mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}[mat-button][_ngcontent-%COMP%]{padding:0}"]}),t})();const bt=(0,s.PH)("[User] Idle Timeout");let Zt=(()=>{class t{constructor(t,n,e,o){this.actions$=t,this.authService=n,this.router=e,this.dialog=o,this.logoutConfirmation$=(0,ot.GW)(()=>this.actions$.pipe((0,ot.l4)(c),(0,pt.z)(()=>this.dialog.open(vt).afterClosed()),(0,st.U)(t=>t?r():a()))),this.logoutIdleUser$=(0,ot.GW)(()=>this.actions$.pipe((0,ot.l4)(bt),(0,st.U)(()=>r())))}}return t.\u0275fac=function(n){return new(n||t)(o.LFG(ot.eX),o.LFG(mt),o.LFG($.F0),o.LFG(W.uw))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})(),yt=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[F.ez,nt,I.ot,R.UX,E.QW,et.lN,B.c,W.Is,s.Aw.forFeature(h,v),ot.sQ.forFeature([gt,ht,Zt])]]}),t})();var At=e(611);const wt=[{path:"",component:X,children:[{path:"books",loadChildren:()=>e.e(743).then(e.bind(e,7743)).then(t=>t.BooksModule),canActivate:[(()=>{class t{constructor(t,n){this.store=t,this.router=n}canActivate(){return this.store.select(A).pipe((0,st.U)(t=>!!t||(this.store.dispatch(p()),!1)),(0,At.q)(1))}}return t.\u0275fac=function(n){return new(n||t)(o.LFG(s.yh),o.LFG($.F0))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()]},{path:"",redirectTo:"books"}]}];let kt=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[F.ez,yt,$.Bz.forChild(wt),B.c,E.QW,I.ot,x.SJ,P.ie,O.g0,W.Is,s.Aw.forFeature(C,M)]]}),t})()}}]);