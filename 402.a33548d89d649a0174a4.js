(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[402],{3402:(t,s,e)=>{"use strict";e.r(s),e.d(s,{SongsModule:()=>P});var n=e(1116),i=e(8147),o=e(8619),r=e(8512),c=e(6673);class l{constructor(t,s){this.compare=t,this.keySelector=s}call(t,s){return s.subscribe(new g(t,this.compare,this.keySelector))}}class g extends c.L{constructor(t,s,e){super(t),this.keySelector=e,this.hasKey=!1,"function"==typeof s&&(this.compare=s)}compare(t,s){return t===s}_next(t){let s;try{const{keySelector:e}=this;s=e?e(t):t}catch(n){return this.destination.error(n)}let e=!1;if(this.hasKey)try{const{compare:t}=this;e=t(this.key,s)}catch(n){return this.destination.error(n)}else this.hasKey=!0;e||(this.key=s,this.destination.next(t))}}var a=e(9996);const p={playlist:void 0};class u{constructor(){this.subject=new r.X(p),this.store=this.subject.asObservable().pipe(t=>t.lift(new l(void 0,void 0)))}get value(){return this.subject.value}select(t){return this.store.pipe(function(...t){const s=t.length;if(0===s)throw new Error("list of properties cannot be empty.");return e=>(0,a.U)(function(t,s){return e=>{let n=e;for(let i=0;i<s;i++){const s=null!=n?n[t[i]]:void 0;if(void 0===s)return;n=s}return n}}(t,s))(e)}(t))}set(t,s){this.subject.next(Object.assign(Object.assign({},this.value),{[t]:s}))}}var h=e(6599),d=e(2693);let f=(()=>{class t{constructor(t,s){this.http=t,this.store=s,this.API_URL="http://localhost:3000/playlist",this.getPlaylist$=this.http.get(this.API_URL).pipe((0,h.b)(t=>this.store.set("playlist",t)))}toggle(t){this.http.put(`${this.API_URL}/${t.track._id}`,t.track).subscribe(s=>{const e=this.store.value.playlist.map(s=>t.track._id===s._id?Object.assign(Object.assign({},s),t.track):s);this.store.set("playlist",e)})}}return t.\u0275fac=function(s){return new(s||t)(o.LFG(d.eN),o.LFG(u))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})();function v(t,s){if(1&t){const t=o.EpF();o.TgZ(0,"li"),o.TgZ(1,"p"),o._uU(2),o.qZA(),o.TgZ(3,"span"),o._uU(4),o.qZA(),o.TgZ(5,"div",2),o.NdJ("click",function(){const s=o.CHM(t).index;return o.oxw().toggleItem(s,"favourite")}),o.qZA(),o.TgZ(6,"div",3),o.NdJ("click",function(){const s=o.CHM(t).index;return o.oxw().toggleItem(s,"listened")}),o.qZA(),o.qZA()}if(2&t){const t=s.$implicit;o.xp6(2),o.Oqu(t.artist),o.xp6(2),o.Oqu(t.track),o.xp6(1),o.ekj("active",t.favourite),o.xp6(1),o.ekj("active",t.listened)}}const y=["*"];let _=(()=>{class t{constructor(){this.toggle=new o.vpe}toggleItem(t,s){const e=this.list[t];this.toggle.emit({track:Object.assign(Object.assign({},e),{[s]:!e[s]})})}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["songs-list"]],inputs:{list:"list"},outputs:{toggle:"toggle"},ngContentSelectors:y,decls:5,vars:1,consts:[[1,"songs-list"],[4,"ngFor","ngForOf"],[1,"songs-list__favourite",3,"click"],[1,"songs-list__listened",3,"click"]],template:function(t,s){1&t&&(o.F$t(),o.TgZ(0,"div",0),o.TgZ(1,"h3"),o.Hsn(2),o.qZA(),o.TgZ(3,"ul"),o.YNc(4,v,7,6,"li",1),o.qZA(),o.qZA()),2&t&&(o.xp6(4),o.Q6J("ngForOf",s.list))},directives:[n.sg],styles:[".songs-list[_ngcontent-%COMP%]{background:#fff;box-shadow:0 16px 24px 0 rgba(0,0,0,.1);border-radius:4px;overflow:hidden}.songs-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{background:#552075;color:#fff;padding:10px;text-align:center}.songs-list__favourite[_ngcontent-%COMP%]{width:22px;height:20px;position:absolute;top:27px;right:20px;background:url(/assets/images/favourite.svg) no-repeat 0 0;background-size:20px 20px;cursor:pointer}.songs-list__favourite.active[_ngcontent-%COMP%]{background:url(/assets/images/favourite-active.svg) no-repeat 0 0;background-size:20px 20px}.songs-list__listened[_ngcontent-%COMP%]{width:22px;height:20px;position:absolute;top:27px;right:50px;cursor:pointer;background:url(/assets/images/played.svg) no-repeat 0 0;background-size:20px 20px}.songs-list__listened.active[_ngcontent-%COMP%]{background:url(/assets/images/played-active.svg) no-repeat 0 0;background-size:20px 20px}.songs-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;padding:10px 20px}.songs-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2n){background:#f5f4f5}.songs-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;font-margin:0;font-weight:500}.songs-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#807d82}"],changeDetection:0}),t})(),x=(()=>{class t{constructor(t,s){this.store=t,this.songsService=s}ngOnInit(){this.playlist$=this.store.select("playlist"),this.subscription=this.songsService.getPlaylist$.subscribe()}onToggle(t){this.songsService.toggle(t)}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(s){return new(s||t)(o.Y36(u),o.Y36(f))},t.\u0275cmp=o.Xpm({type:t,selectors:[["songs-playlist"]],decls:4,vars:3,consts:[[1,"songs"],[3,"list","toggle"]],template:function(t,s){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"songs-list",1),o.NdJ("toggle",function(t){return s.onToggle(t)}),o.ALo(2,"async"),o._uU(3," Playlist "),o.qZA(),o.qZA()),2&t&&(o.xp6(1),o.Q6J("list",o.lcZ(2,1,s.playlist$)))},directives:[_],pipes:[n.Ov],encapsulation:2}),t})();var b=e(3835);let m=(()=>{class t{constructor(t,s){this.store=t,this.songsService=s}ngOnInit(){this.listened$=this.store.select("playlist").pipe((0,b.h)(Boolean),(0,a.U)(t=>t.filter(t=>t.listened)))}onToggle(t){this.songsService.toggle(t)}}return t.\u0275fac=function(s){return new(s||t)(o.Y36(u),o.Y36(f))},t.\u0275cmp=o.Xpm({type:t,selectors:[["songs-listened"]],decls:4,vars:3,consts:[[1,"songs"],[3,"list","toggle"]],template:function(t,s){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"songs-list",1),o.NdJ("toggle",function(t){return s.onToggle(t)}),o.ALo(2,"async"),o._uU(3," Played "),o.qZA(),o.qZA()),2&t&&(o.xp6(1),o.Q6J("list",o.lcZ(2,1,s.listened$)))},directives:[_],pipes:[n.Ov],encapsulation:2}),t})(),O=(()=>{class t{constructor(t,s){this.store=t,this.songsService=s}ngOnInit(){this.favourites$=this.store.select("playlist").pipe((0,b.h)(Boolean),(0,a.U)(t=>t.filter(t=>t.favourite)))}onToggle(t){this.songsService.toggle(t)}}return t.\u0275fac=function(s){return new(s||t)(o.Y36(u),o.Y36(f))},t.\u0275cmp=o.Xpm({type:t,selectors:[["songs-favourites"]],decls:4,vars:3,consts:[[1,"songs"],[3,"list","toggle"]],template:function(t,s){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"songs-list",1),o.NdJ("toggle",function(t){return s.onToggle(t)}),o.ALo(2,"async"),o._uU(3," Favourites "),o.qZA(),o.qZA()),2&t&&(o.xp6(1),o.Q6J("list",o.lcZ(2,1,s.favourites$)))},directives:[_],pipes:[n.Ov],encapsulation:2}),t})();const Z=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-songs"]],decls:4,vars:0,consts:[[1,"songs"]],template:function(t,s){1&t&&(o.TgZ(0,"div",0),o._UZ(1,"songs-playlist"),o._UZ(2,"songs-listened"),o._UZ(3,"songs-favourites"),o.qZA())},directives:[x,m,O],styles:["div[_ngcontent-%COMP%]{display:flex;justify-content:center}songs-favourites[_ngcontent-%COMP%], songs-listened[_ngcontent-%COMP%], songs-playlist[_ngcontent-%COMP%]{flex:0 0 33%;margin:0 10px}"]}),t})()}];let k=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[i.Bz.forChild(Z)],i.Bz]}),t})(),P=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({providers:[u,f],imports:[[n.ez,k]]}),t})()}}]);