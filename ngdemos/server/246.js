"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=246,exports.ids=[246],exports.modules={70246:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AgSimpleModule:()=>AgSimpleModule});var common=__webpack_require__(89318),router=__webpack_require__(14195),core=__webpack_require__(40305);function makeNull(value){return null==value||""===value?null:value}function exists(value,allowEmptyString){return void 0===allowEmptyString&&(allowEmptyString=!1),null!=value&&(""!==value||allowEmptyString)}function missing(value){return!exists(value)}function missingOrEmpty(value){return null==value||0===value.length}function toStringOrNull(value){return null!=value&&"function"==typeof value.toString?value.toString():null}function attrToNumber(value){if(void 0!==value){if(null===value||""===value)return null;if("number"==typeof value)return isNaN(value)?void 0:value;var valueParsed=parseInt(value,10);return isNaN(valueParsed)?void 0:valueParsed}}function attrToBoolean(value){if(void 0!==value)return null!==value&&""!==value&&("boolean"==typeof value?value:/true/i.test(value))}function attrToString(value){if(null!=value&&""!==value)return value}function referenceCompare(left,right){return null==left&&null==right||!(null==left&&null!=right||null!=left&&null==right)&&left===right}function jsonEquals(val1,val2){return(val1?JSON.stringify(val1):null)===(val2?JSON.stringify(val2):null)}function defaultComparator(valueA,valueB,accentedCompare){void 0===accentedCompare&&(accentedCompare=!1);var valueAMissing=null==valueA,valueBMissing=null==valueB;if(valueA&&valueA.toNumber&&(valueA=valueA.toNumber()),valueB&&valueB.toNumber&&(valueB=valueB.toNumber()),valueAMissing&&valueBMissing)return 0;if(valueAMissing)return-1;if(valueBMissing)return 1;function doQuickCompare(a,b){return a>b?1:a<b?-1:0}if(__name(doQuickCompare,"doQuickCompare"),"string"!=typeof valueA||!accentedCompare)return doQuickCompare(valueA,valueB);try{return valueA.localeCompare(valueB)}catch{return doQuickCompare(valueA,valueB)}}function values(object){if(object instanceof Set||object instanceof Map){var arr_1=[];return object.forEach(function(value){return arr_1.push(value)}),arr_1}return Object.values(object)}__name(makeNull,"makeNull"),__name(exists,"exists"),__name(missing,"missing"),__name(missingOrEmpty,"missingOrEmpty"),__name(toStringOrNull,"toStringOrNull"),__name(attrToNumber,"attrToNumber"),__name(attrToBoolean,"attrToBoolean"),__name(attrToString,"attrToString"),__name(referenceCompare,"referenceCompare"),__name(jsonEquals,"jsonEquals"),__name(defaultComparator,"defaultComparator"),__name(values,"values");var GenericUtils=Object.freeze({__proto__:null,makeNull,exists,missing,missingOrEmpty,toStringOrNull,attrToNumber,attrToBoolean,attrToString,referenceCompare,jsonEquals,defaultComparator,values}),ColumnKeyCreator=function(){function ColumnKeyCreator2(){this.existingKeys={}}return __name(ColumnKeyCreator2,"ColumnKeyCreator"),ColumnKeyCreator2.prototype.addExistingKeys=function(keys2){for(var i=0;i<keys2.length;i++)this.existingKeys[keys2[i]]=!0},ColumnKeyCreator2.prototype.getUniqueKey=function(colId,colField){colId=toStringOrNull(colId);for(var count=0;;){var idToTry=void 0;if(colId?(idToTry=colId,0!==count&&(idToTry+="_"+count)):colField?(idToTry=colField,0!==count&&(idToTry+="_"+count)):idToTry=""+count,!this.existingKeys[idToTry])return this.existingKeys[idToTry]=!0,idToTry;count++}},ColumnKeyCreator2}();function iterateObject(object,callback){null!=object&&(Array.isArray(object)?object.forEach(function(value,index){return callback(""+index,value)}):Object.keys(object).forEach(function(key){return callback(key,object[key])}))}function cloneObject(object){for(var copy={},keys2=Object.keys(object),i=0;i<keys2.length;i++){var key=keys2[i],value=object[key];copy[key]=value}return copy}function deepCloneObject(object){return JSON.parse(JSON.stringify(object))}function deepCloneDefinition(object,keysToSkip){if(object){var obj=object,res={};return Object.keys(obj).forEach(function(key){if(!(keysToSkip&&keysToSkip.indexOf(key)>=0)){var value=obj[key],sourceIsSimpleObject=isNonNullObject(value)&&value.constructor===Object;res[key]=sourceIsSimpleObject?deepCloneDefinition(value):value}}),res}}function getProperty(object,key){return object[key]}function setProperty(object,key,value){object[key]=value}function copyPropertiesIfPresent(source,target){for(var properties=[],_i=2;_i<arguments.length;_i++)properties[_i-2]=arguments[_i];properties.forEach(function(p){return copyPropertyIfPresent(source,target,p)})}function copyPropertyIfPresent(source,target,property,transform){var value=getProperty(source,property);void 0!==value&&setProperty(target,property,transform?transform(value):value)}function getAllKeysInObjects(objects){var allValues={};return objects.filter(function(obj){return null!=obj}).forEach(function(obj){Object.keys(obj).forEach(function(key){return allValues[key]=null})}),Object.keys(allValues)}function getAllValuesInObject(obj){if(!obj)return[];var anyObject=Object;if("function"==typeof anyObject.values)return anyObject.values(obj);var ret=[];for(var key in obj)obj.hasOwnProperty(key)&&obj.propertyIsEnumerable(key)&&ret.push(obj[key]);return ret}function mergeDeep(dest,source,copyUndefined,makeCopyOfSimpleObjects){void 0===copyUndefined&&(copyUndefined=!0),void 0===makeCopyOfSimpleObjects&&(makeCopyOfSimpleObjects=!1),exists(source)&&iterateObject(source,function(key,sourceValue){var destValue=dest[key];if(destValue!==sourceValue){if(makeCopyOfSimpleObjects)if(null==destValue&&null!=sourceValue)"object"==typeof sourceValue&&sourceValue.constructor===Object&&(destValue={},dest[key]=destValue);isNonNullObject(sourceValue)&&isNonNullObject(destValue)&&!Array.isArray(destValue)?mergeDeep(destValue,sourceValue,copyUndefined,makeCopyOfSimpleObjects):(copyUndefined||void 0!==sourceValue)&&(dest[key]=sourceValue)}})}function missingOrEmptyObject(value){return missing(value)||0===Object.keys(value).length}function get(source,expression,defaultValue){if(null==source)return defaultValue;for(var keys2=expression.split("."),objectToRead=source;keys2.length>1;)if(null==(objectToRead=objectToRead[keys2.shift()]))return defaultValue;return objectToRead[keys2[0]]??defaultValue}function set(target,expression,value){if(null!=target){var keys2=expression.split("."),objectToUpdate=target;keys2.forEach(function(key,i){objectToUpdate[key]||(objectToUpdate[key]={}),i<keys2.length-1&&(objectToUpdate=objectToUpdate[key])}),objectToUpdate[keys2[keys2.length-1]]=value}}function getValueUsingField(data,field,fieldContainsDots){if(field&&data){if(!fieldContainsDots)return data[field];for(var fields=field.split("."),currentObject=data,i=0;i<fields.length;i++){if(null==currentObject)return;currentObject=currentObject[fields[i]]}return currentObject}}function removeAllReferences(obj,objectName){Object.keys(obj).forEach(function(key){"object"==typeof obj[key]&&(obj[key]=void 0)});var proto=Object.getPrototypeOf(obj),properties={};Object.keys(proto).forEach(function(key){if("function"==typeof proto[key]){var func=__name(function(){console.warn("AG Grid: "+objectName+" function "+key+"() cannot be called as the grid has been destroyed.\n                     Please don't call grid API functions on destroyed grids - as a matter of fact you shouldn't\n                     be keeping the API reference, your application has a memory leak! Remove the API reference\n                     when the grid is destroyed.")},"func");properties[key]={value:func,writable:!0}}}),Object.defineProperties(obj,properties)}function isNonNullObject(value){return"object"==typeof value&&null!==value}__name(iterateObject,"iterateObject"),__name(cloneObject,"cloneObject"),__name(deepCloneObject,"deepCloneObject"),__name(deepCloneDefinition,"deepCloneDefinition"),__name(getProperty,"getProperty"),__name(setProperty,"setProperty"),__name(copyPropertiesIfPresent,"copyPropertiesIfPresent"),__name(copyPropertyIfPresent,"copyPropertyIfPresent"),__name(getAllKeysInObjects,"getAllKeysInObjects"),__name(getAllValuesInObject,"getAllValuesInObject"),__name(mergeDeep,"mergeDeep"),__name(missingOrEmptyObject,"missingOrEmptyObject"),__name(get,"get"),__name(set,"set"),__name(getValueUsingField,"getValueUsingField"),__name(removeAllReferences,"removeAllReferences"),__name(isNonNullObject,"isNonNullObject");var ObjectUtils=Object.freeze({__proto__:null,iterateObject,cloneObject,deepCloneObject,deepCloneDefinition,getProperty,setProperty,copyPropertiesIfPresent,copyPropertyIfPresent,getAllKeysInObjects,getAllValuesInObject,mergeDeep,missingOrEmptyObject,get,set,getValueUsingField,removeAllReferences,isNonNullObject}),doOnceFlags={};function doOnce(func,key){doOnceFlags[key]||(func(),doOnceFlags[key]=!0)}function getFunctionName(funcConstructor){if(funcConstructor.name)return funcConstructor.name;var matches=/function\s+([^\(]+)/.exec(funcConstructor.toString());return matches&&2===matches.length?matches[1].trim():null}function isFunction(val){return!!(val&&val.constructor&&val.call&&val.apply)}function executeInAWhile(funcs){executeAfter(funcs,400)}__name(doOnce,"doOnce"),__name(getFunctionName,"getFunctionName"),__name(isFunction,"isFunction"),__name(executeInAWhile,"executeInAWhile");var executeNextVMTurnFuncs=[],executeNextVMTurnPending=!1;function executeNextVMTurn(func){executeNextVMTurnFuncs.push(func),!executeNextVMTurnPending&&(executeNextVMTurnPending=!0,window.setTimeout(function(){var funcsCopy=executeNextVMTurnFuncs.slice();executeNextVMTurnFuncs.length=0,executeNextVMTurnPending=!1,funcsCopy.forEach(function(func2){return func2()})},0))}function executeAfter(funcs,milliseconds){void 0===milliseconds&&(milliseconds=0),funcs.length>0&&window.setTimeout(function(){return funcs.forEach(function(func){return func()})},milliseconds)}function debounce(func,delay){var timeout;return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var context=this;window.clearTimeout(timeout),timeout=window.setTimeout(function(){func.apply(context,args)},delay)}}function throttle(func,wait){var previousCall=0;return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var currentCall=(new Date).getTime();currentCall-previousCall<wait||(previousCall=currentCall,func.apply(this,args))}}function waitUntil(condition,callback,timeout,timeoutMessage){void 0===timeout&&(timeout=100);var timeStamp=(new Date).getTime(),interval=null,executed=!1,internalCallback=__name(function(){var reachedTimeout=(new Date).getTime()-timeStamp>timeout;(condition()||reachedTimeout)&&(callback(),executed=!0,null!=interval&&(window.clearInterval(interval),interval=null),reachedTimeout&&timeoutMessage&&console.warn(timeoutMessage))},"internalCallback");internalCallback(),executed||(interval=window.setInterval(internalCallback,10))}function compose(){for(var fns=[],_i=0;_i<arguments.length;_i++)fns[_i]=arguments[_i];return function(arg){return fns.reduce(function(composed,f){return f(composed)},arg)}}function callIfPresent(func){func&&func()}__name(executeNextVMTurn,"executeNextVMTurn"),__name(executeAfter,"executeAfter"),__name(debounce,"debounce"),__name(throttle,"throttle"),__name(waitUntil,"waitUntil"),__name(compose,"compose"),__name(callIfPresent,"callIfPresent");var noop=__name(function(){},"noop"),FunctionUtils=Object.freeze({__proto__:null,doOnce,getFunctionName,isFunction,executeInAWhile,executeNextVMTurn,executeAfter,debounce,throttle,waitUntil,compose,callIfPresent,noop}),__read$s=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},Context=function(){function Context2(params,logger){if(this.beanWrappers={},this.destroyed=!1,params&&params.beanClasses){this.contextParams=params,this.logger=logger,this.logger.log(">> creating ag-Application Context"),this.createBeans();var beanInstances=this.getBeanInstances();this.wireBeans(beanInstances),this.logger.log(">> ag-Application Context ready - component is alive")}}return __name(Context2,"Context"),Context2.prototype.getBeanInstances=function(){return values(this.beanWrappers).map(function(beanEntry){return beanEntry.beanInstance})},Context2.prototype.createBean=function(bean,afterPreCreateCallback){if(!bean)throw Error("Can't wire to bean since it is null");return this.wireBeans([bean],afterPreCreateCallback),bean},Context2.prototype.wireBeans=function(beanInstances,afterPreCreateCallback){this.autoWireBeans(beanInstances),this.methodWireBeans(beanInstances),this.callLifeCycleMethods(beanInstances,"preConstructMethods"),exists(afterPreCreateCallback)&&beanInstances.forEach(afterPreCreateCallback),this.callLifeCycleMethods(beanInstances,"postConstructMethods")},Context2.prototype.createBeans=function(){var _this=this;this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),iterateObject(this.beanWrappers,function(key,beanEntry){var constructorParamsMeta;beanEntry.bean.__agBeanMetaData&&beanEntry.bean.__agBeanMetaData.autowireMethods&&beanEntry.bean.__agBeanMetaData.autowireMethods.agConstructor&&(constructorParamsMeta=beanEntry.bean.__agBeanMetaData.autowireMethods.agConstructor);var constructorParams=_this.getBeansForParameters(constructorParamsMeta,beanEntry.bean.name),newInstance=new(beanEntry.bean.bind.apply(beanEntry.bean,function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$s(arguments[i]));return ar}([null],constructorParams)));beanEntry.beanInstance=newInstance});var createdBeanNames=Object.keys(this.beanWrappers).join(", ");this.logger.log("created beans: "+createdBeanNames)},Context2.prototype.createBeanWrapper=function(BeanClass){var metaData=BeanClass.__agBeanMetaData;if(!metaData){var beanName=void 0;return beanName=BeanClass.prototype.constructor?getFunctionName(BeanClass.prototype.constructor):""+BeanClass,void console.error("Context item "+beanName+" is not a bean")}var beanEntry={bean:BeanClass,beanInstance:null,beanName:metaData.beanName};this.beanWrappers[metaData.beanName]=beanEntry},Context2.prototype.autoWireBeans=function(beanInstances){var _this=this;beanInstances.forEach(function(beanInstance){_this.forEachMetaDataInHierarchy(beanInstance,function(metaData,beanName){var attributes=metaData.agClassAttributes;attributes&&attributes.forEach(function(attribute){var otherBean=_this.lookupBeanInstance(beanName,attribute.beanName,attribute.optional);beanInstance[attribute.attributeName]=otherBean})})})},Context2.prototype.methodWireBeans=function(beanInstances){var _this=this;beanInstances.forEach(function(beanInstance){_this.forEachMetaDataInHierarchy(beanInstance,function(metaData,beanName){iterateObject(metaData.autowireMethods,function(methodName,wireParams){if("agConstructor"!==methodName){var initParams=_this.getBeansForParameters(wireParams,beanName);beanInstance[methodName].apply(beanInstance,initParams)}})})})},Context2.prototype.forEachMetaDataInHierarchy=function(beanInstance,callback){for(var prototype=Object.getPrototypeOf(beanInstance);null!=prototype;){var constructor=prototype.constructor;if(constructor.hasOwnProperty("__agBeanMetaData"))callback(constructor.__agBeanMetaData,this.getBeanName(constructor));prototype=Object.getPrototypeOf(prototype)}},Context2.prototype.getBeanName=function(constructor){if(constructor.__agBeanMetaData&&constructor.__agBeanMetaData.beanName)return constructor.__agBeanMetaData.beanName;var constructorString=constructor.toString();return constructorString.substring(9,constructorString.indexOf("("))},Context2.prototype.getBeansForParameters=function(parameters,beanName){var _this=this,beansList=[];return parameters&&iterateObject(parameters,function(paramIndex,otherBeanName){var otherBean=_this.lookupBeanInstance(beanName,otherBeanName);beansList[Number(paramIndex)]=otherBean}),beansList},Context2.prototype.lookupBeanInstance=function(wiringBean,beanName,optional){if(void 0===optional&&(optional=!1),"context"===beanName)return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(beanName))return this.contextParams.providedBeanInstances[beanName];var beanEntry=this.beanWrappers[beanName];return beanEntry?beanEntry.beanInstance:(optional||console.error("AG Grid: unable to find bean reference "+beanName+" while initialising "+wiringBean),null)},Context2.prototype.callLifeCycleMethods=function(beanInstances,lifeCycleMethod){var _this=this;beanInstances.forEach(function(beanInstance){return _this.callLifeCycleMethodsOnBean(beanInstance,lifeCycleMethod)})},Context2.prototype.callLifeCycleMethodsOnBean=function(beanInstance,lifeCycleMethod,methodToIgnore){var allMethods={};this.forEachMetaDataInHierarchy(beanInstance,function(metaData){var methods=metaData[lifeCycleMethod];methods&&methods.forEach(function(methodName){methodName!=methodToIgnore&&(allMethods[methodName]=!0)})}),Object.keys(allMethods).forEach(function(methodName){return beanInstance[methodName]()})},Context2.prototype.getBean=function(name){return this.lookupBeanInstance("getBean",name,!0)},Context2.prototype.destroy=function(){if(!this.destroyed){this.logger.log(">> Shutting down ag-Application Context");var beanInstances=this.getBeanInstances();this.destroyBeans(beanInstances),this.contextParams.providedBeanInstances=null,this.destroyed=!0,this.logger.log(">> ag-Application Context shut down - component is dead")}},Context2.prototype.destroyBean=function(bean){bean&&this.destroyBeans([bean])},Context2.prototype.destroyBeans=function(beans){var _this=this;return beans?(beans.forEach(function(bean){_this.callLifeCycleMethodsOnBean(bean,"preDestroyMethods","destroy");var beanAny=bean;"function"==typeof beanAny.destroy&&beanAny.destroy()}),[]):[]},Context2}();function PreConstruct(target,methodName,descriptor){var props=getOrCreateProps$1(target.constructor);props.preConstructMethods||(props.preConstructMethods=[]),props.preConstructMethods.push(methodName)}function PostConstruct(target,methodName,descriptor){var props=getOrCreateProps$1(target.constructor);props.postConstructMethods||(props.postConstructMethods=[]),props.postConstructMethods.push(methodName)}function PreDestroy(target,methodName,descriptor){var props=getOrCreateProps$1(target.constructor);props.preDestroyMethods||(props.preDestroyMethods=[]),props.preDestroyMethods.push(methodName)}function Bean(beanName){return function(classConstructor){getOrCreateProps$1(classConstructor).beanName=beanName}}function Autowired(name){return function(target,propertyKey,descriptor){autowiredFunc(target,name,!1,target,propertyKey,null)}}function Optional(name){return function(target,propertyKey,descriptor){autowiredFunc(target,name,!0,target,propertyKey,null)}}function autowiredFunc(target,name,optional,classPrototype,methodOrAttributeName,index){if(null!==name)if("number"!=typeof index){var props=getOrCreateProps$1(target.constructor);props.agClassAttributes||(props.agClassAttributes=[]),props.agClassAttributes.push({attributeName:methodOrAttributeName,beanName:name,optional})}else console.error("AG Grid: Autowired should be on an attribute");else console.error("AG Grid: Autowired name should not be null")}function Qualifier(name){return function(classPrototype,methodOrAttributeName,index){var props,constructor="function"==typeof classPrototype?classPrototype:classPrototype.constructor;if("number"==typeof index){var methodName=void 0;methodOrAttributeName?(props=getOrCreateProps$1(constructor),methodName=methodOrAttributeName):(props=getOrCreateProps$1(constructor),methodName="agConstructor"),props.autowireMethods||(props.autowireMethods={}),props.autowireMethods[methodName]||(props.autowireMethods[methodName]={}),props.autowireMethods[methodName][index]=name}}}function getOrCreateProps$1(target){return target.hasOwnProperty("__agBeanMetaData")||(target.__agBeanMetaData={}),target.__agBeanMetaData}__name(PreConstruct,"PreConstruct"),__name(PostConstruct,"PostConstruct"),__name(PreDestroy,"PreDestroy"),__name(Bean,"Bean"),__name(Autowired,"Autowired"),__name(Optional,"Optional"),__name(autowiredFunc,"autowiredFunc"),__name(Qualifier,"Qualifier"),__name(getOrCreateProps$1,"getOrCreateProps$1");var ModuleNames,ModuleNames2,__decorate$2C=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__param$a=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},EventService=function(){function EventService2(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}return __name(EventService2,"EventService"),EventService2.prototype.setBeans=function(loggerFactory,gridOptionsService,frameworkOverrides,globalEventListener){if(void 0===globalEventListener&&(globalEventListener=null),this.frameworkOverrides=frameworkOverrides,this.gridOptionsService=gridOptionsService,globalEventListener){var async=gridOptionsService.useAsyncEvents();this.addGlobalListener(globalEventListener,async)}},EventService2.prototype.getListeners=function(eventType,async,autoCreateListenerCollection){var listenerMap=async?this.allAsyncListeners:this.allSyncListeners,listeners=listenerMap.get(eventType);return!listeners&&autoCreateListenerCollection&&(listeners=new Set,listenerMap.set(eventType,listeners)),listeners},EventService2.prototype.noRegisteredListenersExist=function(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size},EventService2.prototype.addEventListener=function(eventType,listener,async){void 0===async&&(async=!1),this.getListeners(eventType,async,!0).add(listener)},EventService2.prototype.removeEventListener=function(eventType,listener,async){void 0===async&&(async=!1);var listeners=this.getListeners(eventType,async,!1);listeners&&(listeners.delete(listener),0===listeners.size)&&(async?this.allAsyncListeners:this.allSyncListeners).delete(eventType)},EventService2.prototype.addGlobalListener=function(listener,async){void 0===async&&(async=!1),(async?this.globalAsyncListeners:this.globalSyncListeners).add(listener)},EventService2.prototype.removeGlobalListener=function(listener,async){void 0===async&&(async=!1),(async?this.globalAsyncListeners:this.globalSyncListeners).delete(listener)},EventService2.prototype.dispatchEvent=function(event){var agEvent=event;if(this.gridOptionsService){var _a=this.gridOptionsService,api=_a.api,columnApi=_a.columnApi,context=_a.context;agEvent.api=api,agEvent.columnApi=columnApi,agEvent.context=context}this.dispatchToListeners(agEvent,!0),this.dispatchToListeners(agEvent,!1),this.firedEvents[agEvent.type]=!0},EventService2.prototype.dispatchEventOnce=function(event){this.firedEvents[event.type]||this.dispatchEvent(event)},EventService2.prototype.dispatchToListeners=function(event,async){var _this=this,eventType=event.type;if(async&&"event"in event){var browserEvent=event.event;browserEvent instanceof Event&&(event.eventPath=browserEvent.composedPath())}var processEventListeners=__name(function(listeners2){return listeners2.forEach(function(listener){async?_this.dispatchAsync(function(){return listener(event)}):listener(event)})},"processEventListeners"),listeners=this.getListeners(eventType,async,!1);listeners&&processEventListeners(listeners),(async?this.globalAsyncListeners:this.globalSyncListeners).forEach(function(listener){async?_this.dispatchAsync(function(){return _this.frameworkOverrides.dispatchEvent(eventType,function(){return listener(eventType,event)},!0)}):_this.frameworkOverrides.dispatchEvent(eventType,function(){return listener(eventType,event)},!0)})},EventService2.prototype.dispatchAsync=function(func){this.asyncFunctionsQueue.push(func),this.scheduled||(window.setTimeout(this.flushAsyncQueue.bind(this),0),this.scheduled=!0)},EventService2.prototype.flushAsyncQueue=function(){this.scheduled=!1;var queueCopy=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],queueCopy.forEach(function(func){return func()})},__decorate$2C([__param$a(0,Qualifier("loggerFactory")),__param$a(1,Qualifier("gridOptionsService")),__param$a(2,Qualifier("frameworkOverrides")),__param$a(3,Qualifier("globalEventListener"))],EventService2.prototype,"setBeans",null),EventService2=__decorate$2C([Bean("eventService")],EventService2)}();(ModuleNames2=ModuleNames||(ModuleNames={})).CommunityCoreModule="@ag-grid-community/core",ModuleNames2.CommunityAllModules="@ag-grid-community/all",ModuleNames2.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",ModuleNames2.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",ModuleNames2.CsvExportModule="@ag-grid-community/csv-export",ModuleNames2.EnterpriseCoreModule="@ag-grid-enterprise/core",ModuleNames2.EnterpriseAllModules="@ag-grid-enterprise/all",ModuleNames2.RowGroupingModule="@ag-grid-enterprise/row-grouping",ModuleNames2.ColumnToolPanelModule="@ag-grid-enterprise/column-tool-panel",ModuleNames2.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",ModuleNames2.MenuModule="@ag-grid-enterprise/menu",ModuleNames2.SetFilterModule="@ag-grid-enterprise/set-filter",ModuleNames2.MultiFilterModule="@ag-grid-enterprise/multi-filter",ModuleNames2.StatusBarModule="@ag-grid-enterprise/status-bar",ModuleNames2.SideBarModule="@ag-grid-enterprise/side-bar",ModuleNames2.RangeSelectionModule="@ag-grid-enterprise/range-selection",ModuleNames2.MasterDetailModule="@ag-grid-enterprise/master-detail",ModuleNames2.RichSelectModule="@ag-grid-enterprise/rich-select",ModuleNames2.GridChartsModule="@ag-grid-enterprise/charts",ModuleNames2.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",ModuleNames2.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",ModuleNames2.ExcelExportModule="@ag-grid-enterprise/excel-export",ModuleNames2.ClipboardModule="@ag-grid-enterprise/clipboard",ModuleNames2.SparklinesModule="@ag-grid-enterprise/sparklines",ModuleNames2.AngularModule="@ag-grid-community/angular",ModuleNames2.ReactModule="@ag-grid-community/react",ModuleNames2.VueModule="@ag-grid-community/vue",ModuleNames2.PolymerModule="@ag-grid-community/polymer";var ModuleRegistry=function(){function ModuleRegistry2(){}return __name(ModuleRegistry2,"ModuleRegistry"),ModuleRegistry2.register=function(module,moduleBased){void 0===moduleBased&&(moduleBased=!0),ModuleRegistry2.runVersionChecks(module),ModuleRegistry2.modulesMap[module.moduleName]=module,ModuleRegistry2.setModuleBased(moduleBased)},ModuleRegistry2.runVersionChecks=function(module){if(ModuleRegistry2.currentModuleVersion||(ModuleRegistry2.currentModuleVersion=module.version),module.version?module.version!==ModuleRegistry2.currentModuleVersion&&console.error("AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '"+module.moduleName+"' is version "+module.version+" but the other modules are version "+this.currentModuleVersion+". Please update all modules to the same version."):console.error("AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '"+module.moduleName+"' is incompatible. Please update all modules to the same version."),module.validate){var result=module.validate();if(!result.isValid){var errorResult=result;console.error("AG Grid: "+errorResult.message)}}},ModuleRegistry2.setModuleBased=function(moduleBased){void 0===ModuleRegistry2.moduleBased?ModuleRegistry2.moduleBased=moduleBased:ModuleRegistry2.moduleBased!==moduleBased&&doOnce(function(){console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.")},"ModulePackageCheck")},ModuleRegistry2.setIsBundled=function(){ModuleRegistry2.isBundled=!0},ModuleRegistry2.registerModules=function(modules,moduleBased){void 0===moduleBased&&(moduleBased=!0),ModuleRegistry2.setModuleBased(moduleBased),modules&&modules.forEach(function(module){return ModuleRegistry2.register(module,moduleBased)})},ModuleRegistry2.assertRegistered=function(moduleName,reason){var _a;if(this.isRegistered(moduleName))return!0;var warningMessage,warningKey=reason+moduleName;if(ModuleRegistry2.isBundled)warningMessage="AG Grid: unable to use "+reason+" as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:\n        \n        <script src=\"https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js\"><\/script>\n        \nFor more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise";else if(ModuleRegistry2.moduleBased||void 0===ModuleRegistry2.moduleBased){var modName=null===(_a=Object.entries(ModuleNames).find(function(_a2){var _b=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}(_a2,2);return _b[0],_b[1]===moduleName}))||void 0===_a?void 0:_a[0];warningMessage="AG Grid: unable to use "+reason+" as the "+modName+" is not registered. Check if you have registered the module:\n           \n    import { ModuleRegistry } from '@ag-grid-community/core';\n    import { "+modName+" } from '"+moduleName+"';\n    \n    ModuleRegistry.registerModules([ "+modName+" ]);\n\nFor more info see: https://www.ag-grid.com/javascript-grid/modules/"}else warningMessage="AG Grid: unable to use "+reason+" as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:\n            \n    import 'ag-grid-enterprise';\n            \nFor more info see: https://www.ag-grid.com/javascript-grid/packages/";return doOnce(function(){console.warn(warningMessage)},warningKey),!1},ModuleRegistry2.isRegistered=function(moduleName){return!!ModuleRegistry2.modulesMap[moduleName]},ModuleRegistry2.getRegisteredModules=function(){return values(ModuleRegistry2.modulesMap)},ModuleRegistry2.isPackageBased=function(){return!ModuleRegistry2.moduleBased},ModuleRegistry2.modulesMap={},ModuleRegistry2}(),__decorate$2B=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},instanceIdSequence$4=0;function getNextColInstanceId(){return instanceIdSequence$4++}__name(getNextColInstanceId,"getNextColInstanceId");var Column=function(){function Column2(colDef,userProvidedColDef,colId,primary){this.instanceId=getNextColInstanceId(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.filterActive=!1,this.eventService=new EventService,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=colDef,this.userProvidedColDef=userProvidedColDef,this.colId=colId,this.primary=primary,this.setState(colDef)}return __name(Column2,"Column"),Column2.prototype.getInstanceId=function(){return this.instanceId},Column2.prototype.setState=function(colDef){void 0!==colDef.sort?("asc"===colDef.sort||"desc"===colDef.sort)&&(this.sort=colDef.sort):("asc"===colDef.initialSort||"desc"===colDef.initialSort)&&(this.sort=colDef.initialSort);var sortIndex=attrToNumber(colDef.sortIndex),initialSortIndex=attrToNumber(colDef.initialSortIndex);void 0!==sortIndex?null!==sortIndex&&(this.sortIndex=sortIndex):null!==initialSortIndex&&(this.sortIndex=initialSortIndex);var hide=attrToBoolean(colDef.hide),initialHide=attrToBoolean(colDef.initialHide);this.visible=void 0!==hide?!hide:!initialHide,void 0!==colDef.pinned?this.setPinned(colDef.pinned):this.setPinned(colDef.initialPinned);var flex=attrToNumber(colDef.flex),initialFlex=attrToNumber(colDef.initialFlex);void 0!==flex?this.flex=flex:void 0!==initialFlex&&(this.flex=initialFlex)},Column2.prototype.setColDef=function(colDef,userProvidedColDef){this.colDef=colDef,this.userProvidedColDef=userProvidedColDef,this.initMinAndMaxWidths(),this.initDotNotation(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged","api"))},Column2.prototype.getUserProvidedColDef=function(){return this.userProvidedColDef},Column2.prototype.setParent=function(parent){this.parent=parent},Column2.prototype.getParent=function(){return this.parent},Column2.prototype.setOriginalParent=function(originalParent){this.originalParent=originalParent},Column2.prototype.getOriginalParent=function(){return this.originalParent},Column2.prototype.initialise=function(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.validate()},Column2.prototype.initDotNotation=function(){var suppressDotNotation=this.gridOptionsService.is("suppressFieldDotNotation");this.fieldContainsDots=exists(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!suppressDotNotation,this.tooltipFieldContainsDots=exists(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!suppressDotNotation},Column2.prototype.initMinAndMaxWidths=function(){var colDef=this.colDef;this.minWidth=this.columnUtils.calculateColMinWidth(colDef),this.maxWidth=this.columnUtils.calculateColMaxWidth(colDef)},Column2.prototype.resetActualWidth=function(source){void 0===source&&(source="api");var initialWidth=this.columnUtils.calculateColInitialWidth(this.colDef);this.setActualWidth(initialWidth,source,!0)},Column2.prototype.isEmptyGroup=function(){return!1},Column2.prototype.isRowGroupDisplayed=function(colId){if(missing(this.colDef)||missing(this.colDef.showRowGroup))return!1;var showingAllGroups=!0===this.colDef.showRowGroup,showingThisGroup=this.colDef.showRowGroup===colId;return showingAllGroups||showingThisGroup},Column2.prototype.isPrimary=function(){return this.primary},Column2.prototype.isFilterAllowed=function(){return!!this.colDef.filter||!!this.colDef.filterFramework},Column2.prototype.isFieldContainsDots=function(){return this.fieldContainsDots},Column2.prototype.isTooltipFieldContainsDots=function(){return this.tooltipFieldContainsDots},Column2.prototype.validate=function(){var colDefAny=this.colDef;function warnOnce(msg,key,obj){doOnce(function(){obj?console.warn(msg,obj):doOnce(function(){return console.warn(msg)},key)},key)}if(__name(warnOnce,"warnOnce"),this.gridOptionsService.isRowModelType("clientSide")&&!ModuleRegistry.isRegistered(ModuleNames.RowGroupingModule)){(itemsUsed=["enableRowGroup","rowGroup","rowGroupIndex","enablePivot","enableValue","pivot","pivotIndex","aggFunc"].filter(function(x){return exists(colDefAny[x])})).length>0&&ModuleRegistry.assertRegistered(ModuleNames.RowGroupingModule,itemsUsed.map(function(i){return"colDef."+i}).join(", "))}if(("agRichSelect"===this.colDef.cellEditor||"agRichSelectCellEditor"===this.colDef.cellEditor)&&ModuleRegistry.assertRegistered(ModuleNames.RichSelectModule,this.colDef.cellEditor),this.gridOptionsService.isTreeData()){var itemsUsed;(itemsUsed=["rowGroup","rowGroupIndex","pivot","pivotIndex"].filter(function(x){return exists(colDefAny[x])})).length>0&&warnOnce("AG Grid: "+itemsUsed.join()+" is not possible when doing tree data, your column definition should not have "+itemsUsed.join(),"TreeDataCannotRowGroup")}exists(colDefAny.menuTabs)&&ModuleRegistry.assertRegistered(ModuleNames.MenuModule,"menuTabs"),exists(colDefAny.columnsMenuParams)&&ModuleRegistry.assertRegistered(ModuleNames.MenuModule,"columnsMenuParams"),exists(colDefAny.columnsMenuParams)&&ModuleRegistry.assertRegistered(ModuleNames.ColumnToolPanelModule,"columnsMenuParams"),exists(this.colDef.width)&&"number"!=typeof this.colDef.width&&warnOnce("AG Grid: colDef.width should be a number, not "+typeof this.colDef.width,"ColumnCheck"),(colDefAny.pinnedRowCellRenderer||colDefAny.pinnedRowCellRendererParams||colDefAny.pinnedRowCellRendererFramework)&&warnOnce("AG Grid: pinnedRowCellRenderer[Params,Framework] no longer exist. Use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned.","colDef.pinnedRowCellRenderer-deprecated"),exists(colDefAny.columnGroupShow)&&"closed"!==colDefAny.columnGroupShow&&"open"!==colDefAny.columnGroupShow&&warnOnce("AG Grid: '"+colDefAny.columnGroupShow+"' is not valid for columnGroupShow. Valid values are 'open', 'closed'","columnGroupShow_invalid")},Column2.prototype.addEventListener=function(eventType,listener){this.eventService.addEventListener(eventType,listener)},Column2.prototype.removeEventListener=function(eventType,listener){this.eventService.removeEventListener(eventType,listener)},Column2.prototype.createColumnFunctionCallbackParams=function(rowNode){return{node:rowNode,data:rowNode.data,column:this,colDef:this.colDef,context:this.gridOptionsService.context,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi}},Column2.prototype.isSuppressNavigable=function(rowNode){if("boolean"==typeof this.colDef.suppressNavigable)return this.colDef.suppressNavigable;if("function"==typeof this.colDef.suppressNavigable){var params=this.createColumnFunctionCallbackParams(rowNode);return(0,this.colDef.suppressNavigable)(params)}return!1},Column2.prototype.isCellEditable=function(rowNode){return!(rowNode.group&&!this.gridOptionsService.is("enableGroupEdit"))&&this.isColumnFunc(rowNode,this.colDef.editable)},Column2.prototype.isSuppressFillHandle=function(){return!!attrToBoolean(this.colDef.suppressFillHandle)},Column2.prototype.isAutoHeight=function(){return!!attrToBoolean(this.colDef.autoHeight)},Column2.prototype.isAutoHeaderHeight=function(){return!!attrToBoolean(this.colDef.autoHeaderHeight)},Column2.prototype.isRowDrag=function(rowNode){return this.isColumnFunc(rowNode,this.colDef.rowDrag)},Column2.prototype.isDndSource=function(rowNode){return this.isColumnFunc(rowNode,this.colDef.dndSource)},Column2.prototype.isCellCheckboxSelection=function(rowNode){return this.isColumnFunc(rowNode,this.colDef.checkboxSelection)},Column2.prototype.isSuppressPaste=function(rowNode){return this.isColumnFunc(rowNode,this.colDef?this.colDef.suppressPaste:null)},Column2.prototype.isResizable=function(){return!!attrToBoolean(this.colDef.resizable)},Column2.prototype.isColumnFunc=function(rowNode,value){return"boolean"==typeof value?value:"function"==typeof value&&value(this.createColumnFunctionCallbackParams(rowNode))},Column2.prototype.setMoving=function(moving,source){void 0===source&&(source="api"),this.moving=moving,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",source))},Column2.prototype.createColumnEvent=function(type,source){return{type,column:this,columns:[this],source,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}},Column2.prototype.isMoving=function(){return this.moving},Column2.prototype.getSort=function(){return this.sort},Column2.prototype.setSort=function(sort,source){void 0===source&&(source="api"),this.sort!==sort&&(this.sort=sort,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",source)))},Column2.prototype.setMenuVisible=function(visible,source){void 0===source&&(source="api"),this.menuVisible!==visible&&(this.menuVisible=visible,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",source)))},Column2.prototype.isMenuVisible=function(){return this.menuVisible},Column2.prototype.isSortAscending=function(){return"asc"===this.sort},Column2.prototype.isSortDescending=function(){return"desc"===this.sort},Column2.prototype.isSortNone=function(){return missing(this.sort)},Column2.prototype.isSorting=function(){return exists(this.sort)},Column2.prototype.getSortIndex=function(){return this.sortIndex},Column2.prototype.setSortIndex=function(sortOrder){this.sortIndex=sortOrder},Column2.prototype.setAggFunc=function(aggFunc){this.aggFunc=aggFunc},Column2.prototype.getAggFunc=function(){return this.aggFunc},Column2.prototype.getLeft=function(){return this.left},Column2.prototype.getOldLeft=function(){return this.oldLeft},Column2.prototype.getRight=function(){return this.left+this.actualWidth},Column2.prototype.setLeft=function(left,source){void 0===source&&(source="api"),this.oldLeft=this.left,this.left!==left&&(this.left=left,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",source)))},Column2.prototype.isFilterActive=function(){return this.filterActive},Column2.prototype.setFilterActive=function(active,source,additionalEventAttributes){void 0===source&&(source="api"),this.filterActive!==active&&(this.filterActive=active,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",source)));var filterChangedEvent=this.createColumnEvent("filterChanged",source);additionalEventAttributes&&mergeDeep(filterChangedEvent,additionalEventAttributes),this.eventService.dispatchEvent(filterChangedEvent)},Column2.prototype.setPinned=function(pinned){this.pinned=!0===pinned||"left"===pinned?"left":"right"===pinned?"right":null},Column2.prototype.setFirstRightPinned=function(firstRightPinned,source){void 0===source&&(source="api"),this.firstRightPinned!==firstRightPinned&&(this.firstRightPinned=firstRightPinned,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",source)))},Column2.prototype.setLastLeftPinned=function(lastLeftPinned,source){void 0===source&&(source="api"),this.lastLeftPinned!==lastLeftPinned&&(this.lastLeftPinned=lastLeftPinned,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",source)))},Column2.prototype.isFirstRightPinned=function(){return this.firstRightPinned},Column2.prototype.isLastLeftPinned=function(){return this.lastLeftPinned},Column2.prototype.isPinned=function(){return"left"===this.pinned||"right"===this.pinned},Column2.prototype.isPinnedLeft=function(){return"left"===this.pinned},Column2.prototype.isPinnedRight=function(){return"right"===this.pinned},Column2.prototype.getPinned=function(){return this.pinned},Column2.prototype.setVisible=function(visible,source){void 0===source&&(source="api");var newValue=!0===visible;this.visible!==newValue&&(this.visible=newValue,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",source)))},Column2.prototype.isVisible=function(){return this.visible},Column2.prototype.getColDef=function(){return this.colDef},Column2.prototype.getColumnGroupShow=function(){return this.colDef.columnGroupShow},Column2.prototype.getColId=function(){return this.colId},Column2.prototype.getId=function(){return this.getColId()},Column2.prototype.getUniqueId=function(){return this.getId()},Column2.prototype.getDefinition=function(){return this.colDef},Column2.prototype.getActualWidth=function(){return this.actualWidth},Column2.prototype.getAutoHeaderHeight=function(){return this.autoHeaderHeight},Column2.prototype.setAutoHeaderHeight=function(height){var changed=height!==this.autoHeaderHeight;return this.autoHeaderHeight=height,changed},Column2.prototype.createBaseColDefParams=function(rowNode){return{node:rowNode,data:rowNode.data,colDef:this.colDef,column:this,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}},Column2.prototype.getColSpan=function(rowNode){if(missing(this.colDef.colSpan))return 1;var params=this.createBaseColDefParams(rowNode),colSpan=this.colDef.colSpan(params);return Math.max(colSpan,1)},Column2.prototype.getRowSpan=function(rowNode){if(missing(this.colDef.rowSpan))return 1;var params=this.createBaseColDefParams(rowNode),rowSpan=this.colDef.rowSpan(params);return Math.max(rowSpan,1)},Column2.prototype.setActualWidth=function(actualWidth,source,silent){void 0===source&&(source="api"),void 0===silent&&(silent=!1),null!=this.minWidth&&(actualWidth=Math.max(actualWidth,this.minWidth)),null!=this.maxWidth&&(actualWidth=Math.min(actualWidth,this.maxWidth)),this.actualWidth!==actualWidth&&(this.actualWidth=actualWidth,this.flex&&"flex"!==source&&"gridInitializing"!==source&&(this.flex=null),silent||this.fireColumnWidthChangedEvent(source))},Column2.prototype.fireColumnWidthChangedEvent=function(source){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",source))},Column2.prototype.isGreaterThanMax=function(width){return null!=this.maxWidth&&width>this.maxWidth},Column2.prototype.getMinWidth=function(){return this.minWidth},Column2.prototype.getMaxWidth=function(){return this.maxWidth},Column2.prototype.getFlex=function(){return this.flex||0},Column2.prototype.setFlex=function(flex){this.flex!==flex&&(this.flex=flex)},Column2.prototype.setMinimum=function(source){void 0===source&&(source="api"),exists(this.minWidth)&&this.setActualWidth(this.minWidth,source)},Column2.prototype.setRowGroupActive=function(rowGroup,source){void 0===source&&(source="api"),this.rowGroupActive!==rowGroup&&(this.rowGroupActive=rowGroup,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",source)))},Column2.prototype.isRowGroupActive=function(){return this.rowGroupActive},Column2.prototype.setPivotActive=function(pivot,source){void 0===source&&(source="api"),this.pivotActive!==pivot&&(this.pivotActive=pivot,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",source)))},Column2.prototype.isPivotActive=function(){return this.pivotActive},Column2.prototype.isAnyFunctionActive=function(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()},Column2.prototype.isAnyFunctionAllowed=function(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()},Column2.prototype.setValueActive=function(value,source){void 0===source&&(source="api"),this.aggregationActive!==value&&(this.aggregationActive=value,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",source)))},Column2.prototype.isValueActive=function(){return this.aggregationActive},Column2.prototype.isAllowPivot=function(){return!0===this.colDef.enablePivot},Column2.prototype.isAllowValue=function(){return!0===this.colDef.enableValue},Column2.prototype.isAllowRowGroup=function(){return!0===this.colDef.enableRowGroup},Column2.prototype.getMenuTabs=function(defaultValues){var menuTabs=this.getColDef().menuTabs;return null==menuTabs&&(menuTabs=defaultValues),menuTabs},Column2.EVENT_MOVING_CHANGED="movingChanged",Column2.EVENT_LEFT_CHANGED="leftChanged",Column2.EVENT_WIDTH_CHANGED="widthChanged",Column2.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged",Column2.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged",Column2.EVENT_VISIBLE_CHANGED="visibleChanged",Column2.EVENT_FILTER_CHANGED="filterChanged",Column2.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged",Column2.EVENT_SORT_CHANGED="sortChanged",Column2.EVENT_COL_DEF_CHANGED="colDefChanged",Column2.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged",Column2.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged",Column2.EVENT_PIVOT_CHANGED="columnPivotChanged",Column2.EVENT_VALUE_CHANGED="columnValueChanged",__decorate$2B([Autowired("gridOptionsService")],Column2.prototype,"gridOptionsService",void 0),__decorate$2B([Autowired("columnUtils")],Column2.prototype,"columnUtils",void 0),__decorate$2B([PostConstruct],Column2.prototype,"initialise",null),Column2}(),ProvidedColumnGroup=function(){function ProvidedColumnGroup2(colGroupDef,groupId,padding,level){this.localEventService=new EventService,this.expandable=!1,this.instanceId=getNextColInstanceId(),this.expandableListenerRemoveCallback=null,this.colGroupDef=colGroupDef,this.groupId=groupId,this.expanded=!!colGroupDef&&!!colGroupDef.openByDefault,this.padding=padding,this.level=level}return __name(ProvidedColumnGroup2,"ProvidedColumnGroup"),ProvidedColumnGroup2.prototype.destroy=function(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)},ProvidedColumnGroup2.prototype.reset=function(colGroupDef,level){this.colGroupDef=colGroupDef,this.level=level,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0},ProvidedColumnGroup2.prototype.getInstanceId=function(){return this.instanceId},ProvidedColumnGroup2.prototype.setOriginalParent=function(originalParent){this.originalParent=originalParent},ProvidedColumnGroup2.prototype.getOriginalParent=function(){return this.originalParent},ProvidedColumnGroup2.prototype.getLevel=function(){return this.level},ProvidedColumnGroup2.prototype.isVisible=function(){return!!this.children&&this.children.some(function(child){return child.isVisible()})},ProvidedColumnGroup2.prototype.isPadding=function(){return this.padding},ProvidedColumnGroup2.prototype.setExpanded=function(expanded){this.expanded=void 0!==expanded&&expanded;var event={type:ProvidedColumnGroup2.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(event)},ProvidedColumnGroup2.prototype.isExpandable=function(){return this.expandable},ProvidedColumnGroup2.prototype.isExpanded=function(){return this.expanded},ProvidedColumnGroup2.prototype.getGroupId=function(){return this.groupId},ProvidedColumnGroup2.prototype.getId=function(){return this.getGroupId()},ProvidedColumnGroup2.prototype.setChildren=function(children){this.children=children},ProvidedColumnGroup2.prototype.getChildren=function(){return this.children},ProvidedColumnGroup2.prototype.getColGroupDef=function(){return this.colGroupDef},ProvidedColumnGroup2.prototype.getLeafColumns=function(){var result=[];return this.addLeafColumns(result),result},ProvidedColumnGroup2.prototype.addLeafColumns=function(leafColumns){this.children&&this.children.forEach(function(child){child instanceof Column?leafColumns.push(child):child instanceof ProvidedColumnGroup2&&child.addLeafColumns(leafColumns)})},ProvidedColumnGroup2.prototype.getColumnGroupShow=function(){var colGroupDef=this.colGroupDef;if(colGroupDef)return colGroupDef.columnGroupShow},ProvidedColumnGroup2.prototype.setupExpandable=function(){var _this=this;this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();var listener=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(function(col){return col.addEventListener("visibleChanged",listener)}),this.expandableListenerRemoveCallback=function(){_this.getLeafColumns().forEach(function(col){return col.removeEventListener("visibleChanged",listener)}),_this.expandableListenerRemoveCallback=null}},ProvidedColumnGroup2.prototype.setExpandable=function(){if(!this.isPadding()){for(var atLeastOneShowingWhenOpen=!1,atLeastOneShowingWhenClosed=!1,atLeastOneChangeable=!1,children=this.findChildrenRemovingPadding(),i=0,j=children.length;i<j;i++){var abstractColumn=children[i];if(abstractColumn.isVisible()){var headerGroupShow=abstractColumn.getColumnGroupShow();"open"===headerGroupShow?(atLeastOneShowingWhenOpen=!0,atLeastOneChangeable=!0):"closed"===headerGroupShow?(atLeastOneShowingWhenClosed=!0,atLeastOneChangeable=!0):(atLeastOneShowingWhenOpen=!0,atLeastOneShowingWhenClosed=!0)}}var expandable=atLeastOneShowingWhenOpen&&atLeastOneShowingWhenClosed&&atLeastOneChangeable;if(this.expandable!==expandable){this.expandable=expandable;var event_1={type:ProvidedColumnGroup2.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(event_1)}}},ProvidedColumnGroup2.prototype.findChildrenRemovingPadding=function(){var res=[],process=__name(function(items){items.forEach(function(item){item instanceof ProvidedColumnGroup2&&item.isPadding()?process(item.children):res.push(item)})},"process");return process(this.children),res},ProvidedColumnGroup2.prototype.onColumnVisibilityChanged=function(){this.setExpandable()},ProvidedColumnGroup2.prototype.addEventListener=function(eventType,listener){this.localEventService.addEventListener(eventType,listener)},ProvidedColumnGroup2.prototype.removeEventListener=function(eventType,listener){this.localEventService.removeEventListener(eventType,listener)},ProvidedColumnGroup2.EVENT_EXPANDED_CHANGED="expandedChanged",ProvidedColumnGroup2.EVENT_EXPANDABLE_CHANGED="expandableChanged",function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PreDestroy],ProvidedColumnGroup2.prototype,"destroy",null),ProvidedColumnGroup2}(),DefaultColumnTypes={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function firstExistingValue(){for(var values2=[],_i=0;_i<arguments.length;_i++)values2[_i]=arguments[_i];for(var i=0;i<values2.length;i++){var value=values2[i];if(exists(value))return value}return null}function existsAndNotEmpty(value){return null!=value&&value.length>0}function last(arr){if(arr&&arr.length)return arr[arr.length-1]}function areEqual(a,b,comparator){return null==a&&null==b||null!=a&&null!=b&&a.length===b.length&&a.every(function(value,index){return comparator?comparator(value,b[index]):b[index]===value})}function shallowCompare(arr1,arr2){return areEqual(arr1,arr2)}function sortNumerically(array){return array.sort(function(a,b){return a-b})}function removeRepeatsFromArray(array,object){if(array)for(var index=array.length-2;index>=0;index--){var thisOneMatches=array[index]===object,nextOneMatches=array[index+1]===object;thisOneMatches&&nextOneMatches&&array.splice(index+1,1)}}function removeFromArray(array,object){var index=array.indexOf(object);index>=0&&array.splice(index,1)}function removeAllFromArray(array,toRemove){toRemove.forEach(function(item){return removeFromArray(array,item)})}function insertIntoArray(array,object,toIndex){array.splice(toIndex,0,object)}function insertArrayIntoArray(dest,src,toIndex){if(null!=dest&&null!=src)for(var i=src.length-1;i>=0;i--){insertIntoArray(dest,src[i],toIndex)}}function moveInArray(array,objectsToMove,toIndex){removeAllFromArray(array,objectsToMove),objectsToMove.slice().reverse().forEach(function(obj){return insertIntoArray(array,obj,toIndex)})}function includes(array,value){return array.indexOf(value)>-1}function flatten(arrayOfArrays){return[].concat.apply([],arrayOfArrays)}function pushAll(target,source){null==source||null==target||source.forEach(function(value){return target.push(value)})}function toStrings(array){return array.map(toStringOrNull)}function forEachReverse(list,action){if(null!=list)for(var i=list.length-1;i>=0;i--)action(list[i],i)}__name(firstExistingValue,"firstExistingValue"),__name(existsAndNotEmpty,"existsAndNotEmpty"),__name(last,"last"),__name(areEqual,"areEqual"),__name(shallowCompare,"shallowCompare"),__name(sortNumerically,"sortNumerically"),__name(removeRepeatsFromArray,"removeRepeatsFromArray"),__name(removeFromArray,"removeFromArray"),__name(removeAllFromArray,"removeAllFromArray"),__name(insertIntoArray,"insertIntoArray"),__name(insertArrayIntoArray,"insertArrayIntoArray"),__name(moveInArray,"moveInArray"),__name(includes,"includes"),__name(flatten,"flatten"),__name(pushAll,"pushAll"),__name(toStrings,"toStrings"),__name(forEachReverse,"forEachReverse");var ArrayUtils=Object.freeze({__proto__:null,firstExistingValue,existsAndNotEmpty,last,areEqual,shallowCompare,sortNumerically,removeRepeatsFromArray,removeFromArray,removeAllFromArray,insertIntoArray,insertArrayIntoArray,moveInArray,includes,flatten,pushAll,toStrings,forEachReverse}),AG_GRID_STOP_PROPAGATION="__ag_Grid_Stop_Propagation",PASSIVE_EVENTS$1=["touchstart","touchend","touchmove","touchcancel","scroll"],supports={};function stopPropagationForAgGrid(event){event[AG_GRID_STOP_PROPAGATION]=!0}function isStopPropagationForAgGrid(event){return!0===event[AG_GRID_STOP_PROPAGATION]}__name(stopPropagationForAgGrid,"stopPropagationForAgGrid"),__name(isStopPropagationForAgGrid,"isStopPropagationForAgGrid");var tags,isEventSupported=(tags={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},__name(function(eventName){if("boolean"==typeof supports[eventName])return supports[eventName];var el=document.createElement(tags[eventName]||"div");return supports[eventName="on"+eventName]=eventName in el},"eventChecker"));function getCtrlForEvent(gridOptionsService,event,type){for(var sourceElement=event.target;sourceElement;){var renderedComp=gridOptionsService.getDomData(sourceElement,type);if(renderedComp)return renderedComp;sourceElement=sourceElement.parentElement}return null}function isElementInEventPath(element,event){return!(!event||!element)&&getEventPath(event).indexOf(element)>=0}function createEventPath(event){for(var res=[],pointer=event.target;pointer;)res.push(pointer),pointer=pointer.parentElement;return res}function getEventPath(event){var eventNoType=event;return eventNoType.path?eventNoType.path:eventNoType.composedPath?eventNoType.composedPath():createEventPath(eventNoType)}function addSafePassiveEventListener(frameworkOverrides,eElement,event,listener){var options=includes(PASSIVE_EVENTS$1,event)?{passive:!0}:void 0;frameworkOverrides&&frameworkOverrides.addEventListener&&frameworkOverrides.addEventListener(eElement,event,listener,options)}__name(getCtrlForEvent,"getCtrlForEvent"),__name(isElementInEventPath,"isElementInEventPath"),__name(createEventPath,"createEventPath"),__name(getEventPath,"getEventPath"),__name(addSafePassiveEventListener,"addSafePassiveEventListener");var extendStatics,EventUtils=Object.freeze({__proto__:null,stopPropagationForAgGrid,isStopPropagationForAgGrid,isEventSupported,getCtrlForEvent,isElementInEventPath,createEventPath,getEventPath,addSafePassiveEventListener}),__decorate$2z=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},BeanStub=function(){function BeanStub2(){var _this=this;this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.isAlive=function(){return!_this.destroyed}}return __name(BeanStub2,"BeanStub"),BeanStub2.prototype.getFrameworkOverrides=function(){return this.frameworkOverrides},BeanStub2.prototype.getContext=function(){return this.context},BeanStub2.prototype.destroy=function(){this.destroyFunctions.forEach(function(func){return func()}),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:BeanStub2.EVENT_DESTROYED})},BeanStub2.prototype.addEventListener=function(eventType,listener){this.localEventService||(this.localEventService=new EventService),this.localEventService.addEventListener(eventType,listener)},BeanStub2.prototype.removeEventListener=function(eventType,listener){this.localEventService&&this.localEventService.removeEventListener(eventType,listener)},BeanStub2.prototype.dispatchEventAsync=function(event){var _this=this;window.setTimeout(function(){return _this.dispatchEvent(event)},0)},BeanStub2.prototype.dispatchEvent=function(event){this.localEventService&&this.localEventService.dispatchEvent(event)},BeanStub2.prototype.addManagedListener=function(object,event,listener){var _this=this;if(!this.destroyed){object instanceof HTMLElement?addSafePassiveEventListener(this.getFrameworkOverrides(),object,event,listener):object.addEventListener(event,listener);var destroyFunc=__name(function(){return object.removeEventListener(event,listener),_this.destroyFunctions=_this.destroyFunctions.filter(function(fn){return fn!==destroyFunc}),null},"destroyFunc");return this.destroyFunctions.push(destroyFunc),destroyFunc}},BeanStub2.prototype.addManagedPropertyListener=function(event,listener){var _this=this;if(!this.destroyed){this.gridOptionsService.addEventListener(event,listener);var destroyFunc=__name(function(){return _this.gridOptionsService.removeEventListener(event,listener),_this.destroyFunctions=_this.destroyFunctions.filter(function(fn){return fn!==destroyFunc}),null},"destroyFunc");return this.destroyFunctions.push(destroyFunc),destroyFunc}},BeanStub2.prototype.addDestroyFunc=function(func){this.isAlive()?this.destroyFunctions.push(func):func()},BeanStub2.prototype.createManagedBean=function(bean,context){var res=this.createBean(bean,context);return this.addDestroyFunc(this.destroyBean.bind(this,bean,context)),res},BeanStub2.prototype.createBean=function(bean,context,afterPreCreateCallback){return(context||this.getContext()).createBean(bean,afterPreCreateCallback)},BeanStub2.prototype.destroyBean=function(bean,context){return(context||this.getContext()).destroyBean(bean)},BeanStub2.prototype.destroyBeans=function(beans,context){var _this=this;return beans&&beans.forEach(function(bean){return _this.destroyBean(bean,context)}),[]},BeanStub2.EVENT_DESTROYED="destroyed",__decorate$2z([Autowired("frameworkOverrides")],BeanStub2.prototype,"frameworkOverrides",void 0),__decorate$2z([Autowired("context")],BeanStub2.prototype,"context",void 0),__decorate$2z([Autowired("eventService")],BeanStub2.prototype,"eventService",void 0),__decorate$2z([Autowired("gridOptionsService")],BeanStub2.prototype,"gridOptionsService",void 0),__decorate$2z([Autowired("localeService")],BeanStub2.prototype,"localeService",void 0),__decorate$2z([Autowired("environment")],BeanStub2.prototype,"environment",void 0),__decorate$2z([PreDestroy],BeanStub2.prototype,"destroy",null),BeanStub2}(),__extends$2S=(extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics"),function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__decorate$2y=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ColumnFactory=function(_super){function ColumnFactory2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2S(ColumnFactory2,_super),__name(ColumnFactory2,"ColumnFactory"),ColumnFactory2.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("ColumnFactory")},ColumnFactory2.prototype.createColumnTree=function(defs,primaryColumns,existingTree){var columnKeyCreator=new ColumnKeyCreator,_a=this.extractExistingTreeData(existingTree),existingCols=_a.existingCols,existingGroups=_a.existingGroups,existingColKeys=_a.existingColKeys;columnKeyCreator.addExistingKeys(existingColKeys);var unbalancedTree=this.recursivelyCreateColumns(defs,0,primaryColumns,existingCols,columnKeyCreator,existingGroups),treeDept=this.findMaxDept(unbalancedTree,0);this.logger.log("Number of levels for grouped columns is "+treeDept);var columnTree=this.balanceColumnTree(unbalancedTree,0,treeDept,columnKeyCreator),deptFirstCallback=__name(function(child,parent){child instanceof ProvidedColumnGroup&&child.setupExpandable(),child.setOriginalParent(parent)},"deptFirstCallback");return this.columnUtils.depthFirstOriginalTreeSearch(null,columnTree,deptFirstCallback),{columnTree,treeDept}},ColumnFactory2.prototype.extractExistingTreeData=function(existingTree){var existingCols=[],existingGroups=[],existingColKeys=[];return existingTree&&this.columnUtils.depthFirstOriginalTreeSearch(null,existingTree,function(item){if(item instanceof ProvidedColumnGroup){var group=item;existingGroups.push(group)}else{var col=item;existingColKeys.push(col.getId()),existingCols.push(col)}}),{existingCols,existingGroups,existingColKeys}},ColumnFactory2.prototype.createForAutoGroups=function(autoGroupCols,gridBalancedTree){var _this=this;return autoGroupCols.map(function(col){return _this.createAutoGroupTreeItem(gridBalancedTree,col)})},ColumnFactory2.prototype.createAutoGroupTreeItem=function(balancedColumnTree,column){for(var nextChild=column,i=this.findDepth(balancedColumnTree)-1;i>=0;i--){var autoGroup=new ProvidedColumnGroup(null,"FAKE_PATH_"+column.getId()+"}_"+i,!0,i);this.createBean(autoGroup),autoGroup.setChildren([nextChild]),nextChild.setOriginalParent(autoGroup),nextChild=autoGroup}return nextChild},ColumnFactory2.prototype.findDepth=function(balancedColumnTree){for(var dept=0,pointer=balancedColumnTree;pointer&&pointer[0]&&pointer[0]instanceof ProvidedColumnGroup;)dept++,pointer=pointer[0].getChildren();return dept},ColumnFactory2.prototype.balanceColumnTree=function(unbalancedTree,currentDept,columnDept,columnKeyCreator){for(var result=[],i=0;i<unbalancedTree.length;i++){var child=unbalancedTree[i];if(child instanceof ProvidedColumnGroup){var originalGroup=child,newChildren=this.balanceColumnTree(originalGroup.getChildren(),currentDept+1,columnDept,columnKeyCreator);originalGroup.setChildren(newChildren),result.push(originalGroup)}else{for(var firstPaddedGroup=void 0,currentPaddedGroup=void 0,j=columnDept-1;j>=currentDept;j--){var newColId=columnKeyCreator.getUniqueKey(null,null),colGroupDefMerged=this.createMergedColGroupDef(null),paddedGroup=new ProvidedColumnGroup(colGroupDefMerged,newColId,!0,currentDept);this.createBean(paddedGroup),currentPaddedGroup&&currentPaddedGroup.setChildren([paddedGroup]),currentPaddedGroup=paddedGroup,firstPaddedGroup||(firstPaddedGroup=currentPaddedGroup)}if(firstPaddedGroup&&currentPaddedGroup){if(result.push(firstPaddedGroup),unbalancedTree.some(function(leaf){return leaf instanceof ProvidedColumnGroup})){currentPaddedGroup.setChildren([child]);continue}currentPaddedGroup.setChildren(unbalancedTree);break}result.push(child)}}return result},ColumnFactory2.prototype.findMaxDept=function(treeChildren,dept){for(var maxDeptThisLevel=dept,i=0;i<treeChildren.length;i++){var abstractColumn=treeChildren[i];if(abstractColumn instanceof ProvidedColumnGroup){var originalGroup=abstractColumn,newDept=this.findMaxDept(originalGroup.getChildren(),dept+1);maxDeptThisLevel<newDept&&(maxDeptThisLevel=newDept)}}return maxDeptThisLevel},ColumnFactory2.prototype.recursivelyCreateColumns=function(defs,level,primaryColumns,existingColsCopy,columnKeyCreator,existingGroups){var _this=this;return(defs||[]).map(function(def){return _this.isColumnGroup(def)?_this.createColumnGroup(primaryColumns,def,level,existingColsCopy,columnKeyCreator,existingGroups):_this.createColumn(primaryColumns,def,existingColsCopy,columnKeyCreator)})},ColumnFactory2.prototype.createColumnGroup=function(primaryColumns,colGroupDef,level,existingColumns,columnKeyCreator,existingGroups){var providedGroup,colGroupDefMerged=this.createMergedColGroupDef(colGroupDef),groupId=columnKeyCreator.getUniqueKey(colGroupDefMerged.groupId||null,null),existingGroup=this.findExistingGroup(colGroupDef,existingGroups);existingGroup?((providedGroup=existingGroup).reset(colGroupDefMerged,level),removeFromArray(existingGroups,existingGroup)):(providedGroup=new ProvidedColumnGroup(colGroupDefMerged,groupId,!1,level),this.createBean(providedGroup));var children=this.recursivelyCreateColumns(colGroupDefMerged.children,level+1,primaryColumns,existingColumns,columnKeyCreator,existingGroups);return providedGroup.setChildren(children),providedGroup},ColumnFactory2.prototype.createMergedColGroupDef=function(colGroupDef){var colGroupDefMerged={};return Object.assign(colGroupDefMerged,this.gridOptionsService.get("defaultColGroupDef")),Object.assign(colGroupDefMerged,colGroupDef),colGroupDefMerged},ColumnFactory2.prototype.createColumn=function(primaryColumns,colDef,existingColsCopy,columnKeyCreator){var colDefMerged=this.mergeColDefs(colDef),column=this.findExistingColumn(colDef,existingColsCopy);if(existingColsCopy&&column&&removeFromArray(existingColsCopy,column),column)column.setColDef(colDefMerged,colDef),this.applyColumnState(column,colDefMerged);else{var colId=columnKeyCreator.getUniqueKey(colDefMerged.colId,colDefMerged.field);column=new Column(colDefMerged,colDef,colId,primaryColumns),this.context.createBean(column)}return column},ColumnFactory2.prototype.applyColumnState=function(column,colDef){var flex=attrToNumber(colDef.flex);if(void 0!==flex&&column.setFlex(flex),column.getFlex()<=0){var width=attrToNumber(colDef.width);if(null!=width)column.setActualWidth(width);else{var widthBeforeUpdate=column.getActualWidth();column.setActualWidth(widthBeforeUpdate)}}void 0!==colDef.sort&&("asc"==colDef.sort||"desc"==colDef.sort?column.setSort(colDef.sort):column.setSort(void 0));var sortIndex=attrToNumber(colDef.sortIndex);void 0!==sortIndex&&column.setSortIndex(sortIndex);var hide=attrToBoolean(colDef.hide);void 0!==hide&&column.setVisible(!hide),void 0!==colDef.pinned&&column.setPinned(colDef.pinned)},ColumnFactory2.prototype.findExistingColumn=function(newColDef,existingColsCopy){return(existingColsCopy||[]).find(function(existingCol){var existingColDef=existingCol.getUserProvidedColDef();if(!existingColDef)return!1;var newHasId=null!=newColDef.colId,newHasField=null!=newColDef.field;return newHasId?existingCol.getId()===newColDef.colId:newHasField?existingColDef.field===newColDef.field:existingColDef===newColDef})},ColumnFactory2.prototype.findExistingGroup=function(newGroupDef,existingGroups){return existingGroups.find(function(existingGroup){return!!existingGroup.getColGroupDef()&&(!!(null!=newGroupDef.groupId)&&existingGroup.getId()===newGroupDef.groupId)})},ColumnFactory2.prototype.mergeColDefs=function(colDef){var colDefMerged={},defaultColDef=this.gridOptionsService.get("defaultColDef");mergeDeep(colDefMerged,defaultColDef,!1,!0);var columnType=colDef.type;columnType||(columnType=defaultColDef&&defaultColDef.type),columnType&&this.assignColumnTypes(columnType,colDefMerged),mergeDeep(colDefMerged,colDef,!1,!0);var autoGroupColDef=this.gridOptionsService.get("autoGroupColumnDef"),isSortingCoupled=this.gridOptionsService.isColumnsSortingCoupledToGroup();return colDef.rowGroup&&autoGroupColDef&&isSortingCoupled&&mergeDeep(colDefMerged,{sort:autoGroupColDef.sort,initialSort:autoGroupColDef.initialSort},!1,!0),colDefMerged},ColumnFactory2.prototype.assignColumnTypes=function(type,colDefMerged){var typeKeys=[];if(type instanceof Array){type.some(function(a){return"string"!=typeof a})?console.warn("AG Grid: if colDef.type is supplied an array it should be of type 'string[]'"):typeKeys=type}else{if("string"!=typeof type)return void console.warn("AG Grid: colDef.type should be of type 'string' | 'string[]'");typeKeys=type.split(",")}var allColumnTypes=Object.assign({},DefaultColumnTypes);iterateObject(this.gridOptionsService.get("columnTypes")||{},function(key,value){key in allColumnTypes?console.warn("AG Grid: the column type '"+key+"' is a default column type and cannot be overridden."):allColumnTypes[key]=value}),typeKeys.forEach(function(t){var typeColDef=allColumnTypes[t.trim()];typeColDef?mergeDeep(colDefMerged,typeColDef,!1,!0):console.warn("AG Grid: colDef.type '"+t+"' does not correspond to defined gridOptions.columnTypes")})},ColumnFactory2.prototype.isColumnGroup=function(abstractColDef){return void 0!==abstractColDef.children},__decorate$2y([Autowired("columnUtils")],ColumnFactory2.prototype,"columnUtils",void 0),__decorate$2y([(paramIndex=0,decorator=Qualifier("loggerFactory"),function(target,key){decorator(target,key,paramIndex)})],ColumnFactory2.prototype,"setBeans",null),ColumnFactory2=__decorate$2y([Bean("columnFactory")],ColumnFactory2);var paramIndex,decorator}(BeanStub),ColDefUtil=function(){function ColDefUtil2(){}return __name(ColDefUtil2,"ColDefUtil"),ColDefUtil2.ColDefPropertyMap={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentFramework:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellRendererFramework:void 0,cellEditor:void 0,cellEditorFramework:void 0,cellEditorParams:void 0,filterFramework:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentFramework:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,floatingFilterComponentFramework:void 0,tooltipComponentParams:void 0,tooltipComponentFramework:void 0,refData:void 0,columnsMenuParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0},ColDefUtil2.ALL_PROPERTIES=Object.keys(ColDefUtil2.ColDefPropertyMap),ColDefUtil2.FRAMEWORK_PROPERTIES=["__ob__","__v_skip","__metadata__","mappedColumnProperties","hasChildColumns","toColDef","createColDefFromGridColumn"],ColDefUtil2}(),Events=function(){function Events2(){}return __name(Events2,"Events"),Events2.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged",Events2.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded",Events2.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged",Events2.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",Events2.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll",Events2.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged",Events2.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged",Events2.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged",Events2.EVENT_COLUMN_MOVED="columnMoved",Events2.EVENT_COLUMN_VISIBLE="columnVisible",Events2.EVENT_COLUMN_PINNED="columnPinned",Events2.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened",Events2.EVENT_COLUMN_RESIZED="columnResized",Events2.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged",Events2.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged",Events2.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed",Events2.EVENT_ROW_GROUP_OPENED="rowGroupOpened",Events2.EVENT_ROW_DATA_CHANGED="rowDataChanged",Events2.EVENT_ROW_DATA_UPDATED="rowDataUpdated",Events2.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged",Events2.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged",Events2.EVENT_CHART_CREATED="chartCreated",Events2.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged",Events2.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged",Events2.EVENT_CHART_DESTROYED="chartDestroyed",Events2.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged",Events2.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged",Events2.EVENT_INTERNAL_TOOL_PANEL_VISIBLE_CHANGED="internalToolPanelVisibleChanged",Events2.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart",Events2.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd",Events2.EVENT_MODEL_UPDATED="modelUpdated",Events2.EVENT_PASTE_START="pasteStart",Events2.EVENT_PASTE_END="pasteEnd",Events2.EVENT_FILL_START="fillStart",Events2.EVENT_FILL_END="fillEnd",Events2.EVENT_UNDO_STARTED="undoStarted",Events2.EVENT_UNDO_ENDED="undoEnded",Events2.EVENT_REDO_STARTED="redoStarted",Events2.EVENT_REDO_ENDED="redoEnded",Events2.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart",Events2.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd",Events2.EVENT_CELL_CLICKED="cellClicked",Events2.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked",Events2.EVENT_CELL_MOUSE_DOWN="cellMouseDown",Events2.EVENT_CELL_CONTEXT_MENU="cellContextMenu",Events2.EVENT_CELL_VALUE_CHANGED="cellValueChanged",Events2.EVENT_CELL_EDIT_REQUEST="cellEditRequest",Events2.EVENT_ROW_VALUE_CHANGED="rowValueChanged",Events2.EVENT_CELL_FOCUSED="cellFocused",Events2.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared",Events2.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused",Events2.EVENT_ROW_SELECTED="rowSelected",Events2.EVENT_SELECTION_CHANGED="selectionChanged",Events2.EVENT_CELL_KEY_DOWN="cellKeyDown",Events2.EVENT_CELL_KEY_PRESS="cellKeyPress",Events2.EVENT_CELL_MOUSE_OVER="cellMouseOver",Events2.EVENT_CELL_MOUSE_OUT="cellMouseOut",Events2.EVENT_FILTER_CHANGED="filterChanged",Events2.EVENT_FILTER_MODIFIED="filterModified",Events2.EVENT_FILTER_OPENED="filterOpened",Events2.EVENT_SORT_CHANGED="sortChanged",Events2.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved",Events2.EVENT_ROW_CLICKED="rowClicked",Events2.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked",Events2.EVENT_GRID_READY="gridReady",Events2.EVENT_GRID_SIZE_CHANGED="gridSizeChanged",Events2.EVENT_VIEWPORT_CHANGED="viewportChanged",Events2.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged",Events2.EVENT_FIRST_DATA_RENDERED="firstDataRendered",Events2.EVENT_DRAG_STARTED="dragStarted",Events2.EVENT_DRAG_STOPPED="dragStopped",Events2.EVENT_CHECKBOX_CHANGED="checkboxChanged",Events2.EVENT_ROW_EDITING_STARTED="rowEditingStarted",Events2.EVENT_ROW_EDITING_STOPPED="rowEditingStopped",Events2.EVENT_CELL_EDITING_STARTED="cellEditingStarted",Events2.EVENT_CELL_EDITING_STOPPED="cellEditingStopped",Events2.EVENT_BODY_SCROLL="bodyScroll",Events2.EVENT_BODY_SCROLL_END="bodyScrollEnd",Events2.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged",Events2.EVENT_PAGINATION_CHANGED="paginationChanged",Events2.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged",Events2.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged",Events2.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged",Events2.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged",Events2.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged",Events2.EVENT_FLASH_CELLS="flashCells",Events2.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged",Events2.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged",Events2.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged",Events2.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged",Events2.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged",Events2.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged",Events2.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged",Events2.EVENT_ROW_DRAG_ENTER="rowDragEnter",Events2.EVENT_ROW_DRAG_MOVE="rowDragMove",Events2.EVENT_ROW_DRAG_LEAVE="rowDragLeave",Events2.EVENT_ROW_DRAG_END="rowDragEnd",Events2.EVENT_GRID_STYLES_CHANGED="gridStylesChanged",Events2.EVENT_POPUP_TO_FRONT="popupToFront",Events2.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest",Events2.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest",Events2.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest",Events2.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest",Events2.EVENT_KEYBOARD_FOCUS="keyboardFocus",Events2.EVENT_MOUSE_FOCUS="mouseFocus",Events2.EVENT_STORE_UPDATED="storeUpdated",Events2}(),__read$q=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$l=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$q(arguments[i]));return ar},PropertyKeys=function(){function PropertyKeys2(){}return __name(PropertyKeys2,"PropertyKeys"),PropertyKeys2.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","serverSideStoreType","groupDisplayType","treeDataDisplayType","colResizeDefault"],PropertyKeys2.OBJECT_PROPERTIES=["components","frameworkComponents","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef"],PropertyKeys2.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass"],PropertyKeys2.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","tabIndex"],PropertyKeys2.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellSelection","suppressCellFocus","suppressHorizontalScroll","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSelectsChildren","groupIncludeFooter","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","rememberGroupStateWhenNewData","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","treeData","masterDetail","suppressMultiRangeSelection","enterMovesDownAfterEdit","enterMovesDown","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","immutableData","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilteringAlwaysResets","serverSideSortingAlwaysResets","serverSideSortAllLevels","serverSideFilterAllLevels","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","reactUi","suppressReactUi","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","groupRowsSticky","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter"],PropertyKeys2.FUNCTIONAL_PROPERTIES=["localeTextFunc","doesExternalFilterPass","groupRowAggNodes","isFullWidthCell","processSecondaryColDef","processSecondaryColGroupDef","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","postSort","defaultGroupOrderComparator","rowDragText","groupRowRenderer","groupRowRendererFramework","fullWidthCellRenderer","fullWidthCellRendererFramework","loadingCellRenderer","loadingCellRendererFramework","loadingOverlayComponent","loadingOverlayComponentFramework","noRowsOverlayComponent","noRowsOverlayComponentFramework","detailCellRenderer","detailCellRendererFramework"],PropertyKeys2.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","getRowNodeId","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideStoreParams","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","groupAggFiltering"],PropertyKeys2.FUNCTION_PROPERTIES=__spread$l(PropertyKeys2.FUNCTIONAL_PROPERTIES,PropertyKeys2.CALLBACK_PROPERTIES),PropertyKeys2.ALL_PROPERTIES=__spread$l(PropertyKeys2.ARRAY_PROPERTIES,PropertyKeys2.OBJECT_PROPERTIES,PropertyKeys2.STRING_PROPERTIES,PropertyKeys2.NUMBER_PROPERTIES,PropertyKeys2.FUNCTION_PROPERTIES,PropertyKeys2.BOOLEAN_PROPERTIES),PropertyKeys2.FRAMEWORK_PROPERTIES=["__ob__","__v_skip","__metadata__","mappedColumnProperties","hasChildColumns","toColDef","createColDefFromGridColumn"],PropertyKeys2}(),__assign$k=function(){return __assign$k=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$k.apply(this,arguments)},__read$p=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},ComponentUtil=function(){function ComponentUtil2(){}return __name(ComponentUtil2,"ComponentUtil"),ComponentUtil2.getCallbackForEvent=function(eventName){return!eventName||eventName.length<2?eventName:"on"+eventName[0].toUpperCase()+eventName.substr(1)},ComponentUtil2.getCoercionLookup=function(){var coercionLookup={};return function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$p(arguments[i]));return ar}(ComponentUtil2.ARRAY_PROPERTIES,ComponentUtil2.OBJECT_PROPERTIES,ComponentUtil2.STRING_PROPERTIES,ComponentUtil2.FUNCTION_PROPERTIES,ComponentUtil2.EVENT_CALLBACKS).forEach(function(key){return coercionLookup[key]="none"}),ComponentUtil2.BOOLEAN_PROPERTIES.forEach(function(key){return coercionLookup[key]="boolean"}),ComponentUtil2.NUMBER_PROPERTIES.forEach(function(key){return coercionLookup[key]="number"}),coercionLookup},ComponentUtil2.getValue=function(key,rawValue){var coercionStep=ComponentUtil2.coercionLookup[key];if(coercionStep){var newValue=rawValue;switch(coercionStep){case"number":newValue=ComponentUtil2.toNumber(rawValue);break;case"boolean":newValue=ComponentUtil2.toBoolean(rawValue);break;case"none":"groupAggFiltering"===key&&"function"!=typeof rawValue&&(newValue=ComponentUtil2.toBoolean(rawValue))}return newValue}},ComponentUtil2.getGridOptionKeys=function(component,isVue){return Object.keys(isVue?ComponentUtil2.coercionLookup:component)},ComponentUtil2.copyAttributesToGridOptions=function(gridOptions,component,isVue){void 0===isVue&&(isVue=!1),"object"!=typeof gridOptions&&(gridOptions={});var pGridOptions=gridOptions;return ComponentUtil2.getGridOptionKeys(component,isVue).forEach(function(key){var value=component[key];if(typeof value<"u"){var coercedValue=ComponentUtil2.getValue(key,value);void 0!==coercedValue&&(pGridOptions[key]=coercedValue)}}),gridOptions},ComponentUtil2.processOnChange=function(changes,api){if(changes&&0!==Object.keys(changes).length){var changesToApply=__assign$k({},changes);changesToApply.columnTypes&&(api.setColumnTypes(changesToApply.columnTypes.currentValue,"gridOptionsChanged"),delete changesToApply.columnTypes),changesToApply.autoGroupColumnDef&&(api.setAutoGroupColumnDef(changesToApply.autoGroupColumnDef.currentValue,"gridOptionsChanged"),delete changesToApply.autoGroupColumnDef),changesToApply.defaultColDef&&(api.setDefaultColDef(changesToApply.defaultColDef.currentValue,"gridOptionsChanged"),delete changesToApply.defaultColDef),changesToApply.columnDefs&&(api.setColumnDefs(changesToApply.columnDefs.currentValue,"gridOptionsChanged"),delete changesToApply.columnDefs),Object.keys(changesToApply).forEach(function(key){var gridKey=key,coercedValue=ComponentUtil2.getValue(gridKey,changesToApply[gridKey].currentValue);api.__setProperty(gridKey,coercedValue)});var event={type:Events.EVENT_COMPONENT_STATE_CHANGED};iterateObject(changes,function(key,value){event[key]=value}),api.dispatchEvent(event)}},ComponentUtil2.toBoolean=function(value){return"boolean"==typeof value?value:"string"==typeof value&&("TRUE"===value.toUpperCase()||""==value)},ComponentUtil2.toNumber=function(value){return"number"==typeof value?value:"string"==typeof value?Number(value):void 0},ComponentUtil2.EVENTS=values(Events),ComponentUtil2.EXCLUDED_INTERNAL_EVENTS=[Events.EVENT_SCROLLBAR_WIDTH_CHANGED,Events.EVENT_CHECKBOX_CHANGED,Events.EVENT_HEIGHT_SCALE_CHANGED,Events.EVENT_BODY_HEIGHT_CHANGED,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,Events.EVENT_SCROLL_VISIBILITY_CHANGED,Events.EVENT_COLUMN_HOVER_CHANGED,Events.EVENT_FLASH_CELLS,Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,Events.EVENT_DISPLAYED_ROWS_CHANGED,Events.EVENT_LEFT_PINNED_WIDTH_CHANGED,Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED,Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,Events.EVENT_POPUP_TO_FRONT,Events.EVENT_KEYBOARD_FOCUS,Events.EVENT_MOUSE_FOCUS,Events.EVENT_STORE_UPDATED,Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END,Events.EVENT_FILL_START,Events.EVENT_FILL_END,Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,Events.EVENT_FULL_WIDTH_ROW_FOCUSED,Events.EVENT_HEADER_HEIGHT_CHANGED,Events.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,Events.EVENT_INTERNAL_TOOL_PANEL_VISIBLE_CHANGED,Events.EVENT_CELL_FOCUS_CLEARED,Events.EVENT_GRID_STYLES_CHANGED],ComponentUtil2.PUBLIC_EVENTS=ComponentUtil2.EVENTS.filter(function(e){return!includes(ComponentUtil2.EXCLUDED_INTERNAL_EVENTS,e)}),ComponentUtil2.EVENT_CALLBACKS=ComponentUtil2.EVENTS.map(function(event){return ComponentUtil2.getCallbackForEvent(event)}),ComponentUtil2.STRING_PROPERTIES=PropertyKeys.STRING_PROPERTIES,ComponentUtil2.OBJECT_PROPERTIES=PropertyKeys.OBJECT_PROPERTIES,ComponentUtil2.ARRAY_PROPERTIES=PropertyKeys.ARRAY_PROPERTIES,ComponentUtil2.NUMBER_PROPERTIES=PropertyKeys.NUMBER_PROPERTIES,ComponentUtil2.BOOLEAN_PROPERTIES=PropertyKeys.BOOLEAN_PROPERTIES,ComponentUtil2.FUNCTION_PROPERTIES=PropertyKeys.FUNCTION_PROPERTIES,ComponentUtil2.ALL_PROPERTIES=PropertyKeys.ALL_PROPERTIES,ComponentUtil2.ALL_PROPERTIES_SET=new Set(PropertyKeys.ALL_PROPERTIES),ComponentUtil2.coercionLookup=ComponentUtil2.getCoercionLookup(),ComponentUtil2}();function fuzzyCheckStrings(inputValues,validValues,allSuggestions){var fuzzyMatches={},invalidInputs=inputValues.filter(function(inputValue){return!validValues.some(function(validValue){return validValue===inputValue})});return invalidInputs.length>0&&invalidInputs.forEach(function(invalidInput){return fuzzyMatches[invalidInput]=fuzzySuggestions(invalidInput,allSuggestions)}),fuzzyMatches}function fuzzySuggestions(inputValue,allSuggestions,hideIrrelevant){var thisSuggestions=allSuggestions.map(function(text){return{value:text,relevance:stringWeightedDistances(inputValue.toLowerCase(),text.toLocaleLowerCase())}});return thisSuggestions.sort(function(a,b){return b.relevance-a.relevance}),hideIrrelevant&&(thisSuggestions=thisSuggestions.filter(function(suggestion){return 0!==suggestion.relevance})),thisSuggestions.map(function(suggestion){return suggestion.value})}function stringWeightedDistances(str1,str2){for(var a=str1.replace(/\s/g,""),b=str2.replace(/\s/g,""),weight=0,lastIndex=-1,i=0;i<a.length;i++){var idx=b.indexOf(a[i],lastIndex+1);-1!==idx&&(weight+=100-100*(lastIndex=idx)/1e4*100)}return weight}__name(fuzzyCheckStrings,"fuzzyCheckStrings"),__name(fuzzySuggestions,"fuzzySuggestions"),__name(stringWeightedDistances,"stringWeightedDistances");var FuzzyMatchUtils=Object.freeze({__proto__:null,fuzzyCheckStrings,fuzzySuggestions}),__decorate$2x=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$o=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$j=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$o(arguments[i]));return ar};function logDeprecation(version,oldProp,newProp,message){var newPropMsg=newProp?"Please use '"+newProp+"' instead. ":"";doOnce(function(){return console.warn("AG Grid: since v"+version+", '"+oldProp+"' is deprecated. "+newPropMsg+(message??""))},"Deprecated_"+oldProp)}__name(logDeprecation,"logDeprecation");var GridOptionsValidator=function(){function GridOptionsValidator2(){this.deprecatedProperties={serverSideInfiniteScroll:{version:"29",message:"Infinite Scrolling is now the default behaviour. This can be suppressed with `suppressServerSideInfiniteScroll`."},rememberGroupStateWhenNewData:{version:"24",message:"Now that transaction updates are possible and they keep group state, this feature is no longer needed."},suppressEnterpriseResetOnNewColumns:{version:"25",message:"Now that it is possible to dynamically change columns in the grid, this is no longer needed."},suppressColumnStateEvents:{version:"25",message:'Events should be ignored based on the `event.source`, which will be "api" if the event was due to setting column state via the API.'},defaultExportParams:{version:"25.2",message:"The property `defaultExportParams` has been replaced by `defaultCsvExportParams` and `defaultExcelExportParams`"},stopEditingWhenGridLosesFocus:{version:"25.2.2",newProp:"stopEditingWhenCellsLoseFocus",copyToNewProp:!0},applyColumnDefOrder:{version:"26",message:"The property `applyColumnDefOrder` is no longer needed, as this is the default behaviour. To turn this behaviour off, set maintainColumnOrder=true"},groupMultiAutoColumn:{version:"26",newProp:"groupDisplayType",copyToNewProp:!0,newPropValue:"multipleColumns"},groupUseEntireRow:{version:"26",newProp:"groupDisplayType",copyToNewProp:!0,newPropValue:"groupRows"},defaultGroupSortComparator:{version:"26",newProp:"initialGroupOrderComparator"},enableMultiRowDragging:{version:"26.1",newProp:"rowDragMultiRow",copyToNewProp:!0},colWidth:{version:"26.1",newProp:"defaultColDef.width"},minColWidth:{version:"26.1",newProp:"defaultColDef.minWidth"},maxColWidth:{version:"26.1",newProp:"defaultColDef.maxWidth"},reactUi:{version:"26.1",message:"React UI is on by default, so no need for reactUi=true. To turn it off, set suppressReactUi=true."},suppressCellSelection:{version:"27",newProp:"suppressCellFocus",copyToNewProp:!0},clipboardDeliminator:{version:"27.1",newProp:"clipboardDelimiter",copyToNewProp:!0},getRowNodeId:{version:"27.1",newProp:"getRowId",message:"The difference: if getRowId() is implemented then immutable data is enabled by default."},defaultGroupOrderComparator:{version:"27.2",newProp:"initialGroupOrderComparator"},groupRowAggNodes:{version:"27.2",newProp:"getGroupRowAgg"},postSort:{version:"27.2",newProp:"postSortRows"},isFullWidthCell:{version:"27.2",newProp:"isFullWidthRow"},localeTextFunc:{version:"27.2",newProp:"getLocaleText"},serverSideFilteringAlwaysResets:{version:"28.0",newProp:"serverSideFilterAllLevels",copyToNewProp:!0},serverSideSortingAlwaysResets:{version:"28.0",newProp:"serverSideSortAllLevels",copyToNewProp:!0},suppressReactUi:{version:"28",message:"The legacy React rendering engine is deprecated and will be removed in the next major version of the grid."},processSecondaryColDef:{version:"28",newProp:"processPivotResultColDef",copyToNewProp:!0},processSecondaryColGroupDef:{version:"28",newProp:"processPivotResultColGroupDef",copyToNewProp:!0},getServerSideStoreParams:{version:"28",newProp:"getServerSideGroupLevelParams",copyToNewProp:!0},enableChartToolPanelsButton:{version:"29",message:"The Chart Tool Panels button is now enabled by default. To hide the Chart Tool Panels button and display the hamburger button instead, set suppressChartToolPanelsButton=true."}}}return __name(GridOptionsValidator2,"GridOptionsValidator"),GridOptionsValidator2.prototype.pickOneWarning=function(prop1,prop2){console.warn("AG Grid: "+prop1+" and "+prop2+" do not work with each other, you need to pick one.")},GridOptionsValidator2.prototype.init=function(){var _this=this;if(this.checkForDeprecated(),this.checkForViolations(),!0!==this.gridOptions.suppressPropertyNamesCheck&&(this.checkGridOptionsProperties(),this.checkColumnDefProperties()),this.gridOptionsService.is("groupSelectsChildren")&&this.gridOptionsService.is("suppressParentsInRowNodes")&&console.warn("AG Grid: 'groupSelectsChildren' does not work with 'suppressParentsInRowNodes', this selection method needs the part in rowNode to work"),this.gridOptionsService.is("groupSelectsChildren")&&("multiple"!==this.gridOptionsService.get("rowSelection")&&console.warn("AG Grid: rowSelection must be 'multiple' for groupSelectsChildren to make sense"),this.gridOptionsService.isRowModelType("serverSide")&&console.warn("AG Grid: group selects children is NOT supported for Server Side Row Model. This is because the rows are lazy loaded, so selecting a group is not possible asthe grid has no way of knowing what the children are.")),this.gridOptionsService.is("groupRemoveSingleChildren")&&this.gridOptionsService.is("groupHideOpenParents")&&this.pickOneWarning("groupRemoveSingleChildren","groupHideOpenParents"),this.gridOptionsService.isRowModelType("serverSide")){var msg=__name(function(prop,alt){return"AG Grid: '"+prop+"' is not supported on the Server-Side Row Model."+(alt?" Please use "+alt+" instead.":"")},"msg");this.gridOptionsService.exists("groupDefaultExpanded")&&console.warn(msg("groupDefaultExpanded","isServerSideGroupOpenByDefault callback")),this.gridOptionsService.exists("groupIncludeFooter")&&console.warn(msg("groupIncludeFooter")),this.gridOptionsService.exists("groupIncludeTotalFooter")&&console.warn(msg("groupIncludeTotalFooter"))}this.gridOptionsService.is("enableRangeSelection")?ModuleRegistry.assertRegistered(ModuleNames.RangeSelectionModule,"enableRangeSelection"):(this.gridOptionsService.is("enableRangeHandle")||this.gridOptionsService.is("enableFillHandle"))&&console.warn("AG Grid: 'enableRangeHandle' or 'enableFillHandle' will not work unless 'enableRangeSelection' is set to true");var validateRegistered=__name(function(prop,module){return _this.gridOptionsService.exists(prop)&&ModuleRegistry.assertRegistered(module,prop)},"validateRegistered");validateRegistered("sideBar",ModuleNames.SideBarModule),validateRegistered("statusBar",ModuleNames.StatusBarModule),validateRegistered("enableCharts",ModuleNames.GridChartsModule),validateRegistered("getMainMenuItems",ModuleNames.MenuModule),validateRegistered("getContextMenuItems",ModuleNames.MenuModule),validateRegistered("allowContextMenuWithControlKey",ModuleNames.MenuModule),this.gridOptionsService.is("groupRowsSticky")&&(this.gridOptionsService.is("groupHideOpenParents")&&this.pickOneWarning("groupRowsSticky","groupHideOpenParents"),this.gridOptionsService.is("masterDetail")&&this.pickOneWarning("groupRowsSticky","masterDetail"),this.gridOptionsService.is("pagination")&&this.pickOneWarning("groupRowsSticky","pagination"))},GridOptionsValidator2.prototype.checkColumnDefProperties=function(){var _this=this;null!=this.gridOptions.columnDefs&&this.gridOptions.columnDefs.forEach(function(colDef){var userProperties=Object.getOwnPropertyNames(colDef),validProperties=__spread$j(ColDefUtil.ALL_PROPERTIES,ColDefUtil.FRAMEWORK_PROPERTIES);_this.checkProperties(userProperties,validProperties,validProperties,"colDef","https://www.ag-grid.com/javascript-data-grid/column-properties/")})},GridOptionsValidator2.prototype.checkGridOptionsProperties=function(){var userProperties=Object.getOwnPropertyNames(this.gridOptions),validProperties=__spread$j(PropertyKeys.ALL_PROPERTIES,PropertyKeys.FRAMEWORK_PROPERTIES,ComponentUtil.EVENT_CALLBACKS),validPropertiesAndExceptions=__spread$j(validProperties,["api","columnApi"],Object.keys(this.deprecatedProperties));this.checkProperties(userProperties,validPropertiesAndExceptions,validProperties,"gridOptions","https://www.ag-grid.com/javascript-data-grid/grid-options/")},GridOptionsValidator2.prototype.checkProperties=function(userProperties,validPropertiesAndExceptions,validProperties,containerName,docsUrl){var invalidProperties=fuzzyCheckStrings(userProperties,validPropertiesAndExceptions,validProperties);iterateObject(invalidProperties,function(key,value){console.warn("AG Grid: invalid "+containerName+" property '"+key+"' did you mean any of these: "+value.slice(0,8).join(", "))}),Object.keys(invalidProperties).length>0&&console.warn("AG Grid: to see all the valid "+containerName+" properties please check: "+docsUrl)},GridOptionsValidator2.prototype.checkForDeprecated=function(){var options=this.gridOptions;if(Object.entries(this.deprecatedProperties).forEach(function(_a){var _b,_c=__read$o(_a,2),oldProp=_c[0],details=_c[1],oldPropValue=options[oldProp];oldPropValue&&(logDeprecation(details.version,oldProp,details.newProp,details.message),details.copyToNewProp&&details.newProp&&null==options[details.newProp]&&(options[details.newProp]=null!==(_b=details.newPropValue)&&void 0!==_b?_b:oldPropValue))}),options.groupSuppressAutoColumn){var propName=options.treeData?"treeDataDisplayType":"groupDisplayType";console.warn("AG Grid: since v26.0, the grid property `groupSuppressAutoColumn` has been replaced by `"+propName+" = 'custom'`"),options[propName]="custom"}options.immutableData&&(options.getRowId?console.warn("AG Grid: since v27.1, `immutableData` is deprecated. With the `getRowId` callback implemented, immutable data is enabled by default so you can remove `immutableData=true`."):console.warn("AG Grid: since v27.1, `immutableData` is deprecated. To enable immutable data you must implement the `getRowId()` callback.")),options.serverSideStoreType&&(console.warn("AG Grid: since v29.0, `serverSideStoreType` has been replaced by `suppressServerSideInfiniteScroll`. Set to false to use Partial Store, and true to use Full Store."),options.suppressServerSideInfiniteScroll="partial"!==options.serverSideStoreType)},GridOptionsValidator2.prototype.checkForViolations=function(){this.gridOptionsService.is("treeData")&&this.treeDataViolations()},GridOptionsValidator2.prototype.treeDataViolations=function(){this.gridOptionsService.isRowModelType("clientSide")&&(this.gridOptionsService.exists("getDataPath")||console.warn("AG Grid: property usingTreeData=true with rowModel=clientSide, but you did not provide getDataPath function, please provide getDataPath function if using tree data.")),this.gridOptionsService.isRowModelType("serverSide")&&(this.gridOptionsService.exists("isServerSideGroup")||console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide isServerSideGroup function, please provide isServerSideGroup function if using tree data."),this.gridOptionsService.exists("getServerSideGroupKey")||console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide getServerSideGroupKey function, please provide getServerSideGroupKey function if using tree data."))},__decorate$2x([Autowired("gridOptions")],GridOptionsValidator2.prototype,"gridOptions",void 0),__decorate$2x([Autowired("gridOptionsService")],GridOptionsValidator2.prototype,"gridOptionsService",void 0),__decorate$2x([PostConstruct],GridOptionsValidator2.prototype,"init",null),GridOptionsValidator2=__decorate$2x([Bean("gridOptionsValidator")],GridOptionsValidator2)}();function matchesGroupDisplayType(toMatch,supplied){var groupDisplayTypeValues=["groupRows","multipleColumns","custom","singleColumn"];return groupDisplayTypeValues.indexOf(supplied)<0?(console.warn("AG Grid: '"+supplied+"' is not a valid groupDisplayType value - possible values are: '"+groupDisplayTypeValues.join("', '")+"'"),!1):supplied===toMatch}function matchesTreeDataDisplayType(toMatch,supplied){var treeDataDisplayTypeValues=["auto","custom"];return treeDataDisplayTypeValues.indexOf(supplied)<0?(console.warn("AG Grid: '"+supplied+"' is not a valid treeDataDisplayType value - possible values are: '"+treeDataDisplayTypeValues.join("', '")+"'"),!1):supplied===toMatch}__name(matchesGroupDisplayType,"matchesGroupDisplayType"),__name(matchesTreeDataDisplayType,"matchesTreeDataDisplayType");var ColumnGroup=function(){function ColumnGroup2(providedColumnGroup,groupId,partId,pinned){this.displayedChildren=[],this.localEventService=new EventService,this.groupId=groupId,this.partId=partId,this.providedColumnGroup=providedColumnGroup,this.pinned=pinned}return __name(ColumnGroup2,"ColumnGroup"),ColumnGroup2.createUniqueId=function(groupId,instanceId){return groupId+"_"+instanceId},ColumnGroup2.prototype.reset=function(){this.parent=null,this.children=null,this.displayedChildren=null},ColumnGroup2.prototype.getParent=function(){return this.parent},ColumnGroup2.prototype.setParent=function(parent){this.parent=parent},ColumnGroup2.prototype.getUniqueId=function(){return ColumnGroup2.createUniqueId(this.groupId,this.partId)},ColumnGroup2.prototype.isEmptyGroup=function(){return 0===this.displayedChildren.length},ColumnGroup2.prototype.isMoving=function(){var allLeafColumns=this.getProvidedColumnGroup().getLeafColumns();return!(!allLeafColumns||0===allLeafColumns.length)&&allLeafColumns.every(function(col){return col.isMoving()})},ColumnGroup2.prototype.checkLeft=function(){if(this.displayedChildren.forEach(function(child){child instanceof ColumnGroup2&&child.checkLeft()}),this.displayedChildren.length>0)if(this.gridOptionsService.is("enableRtl")){var lastChildLeft=last(this.displayedChildren).getLeft();this.setLeft(lastChildLeft)}else{var firstChildLeft=this.displayedChildren[0].getLeft();this.setLeft(firstChildLeft)}else this.setLeft(null)},ColumnGroup2.prototype.getLeft=function(){return this.left},ColumnGroup2.prototype.getOldLeft=function(){return this.oldLeft},ColumnGroup2.prototype.setLeft=function(left){this.oldLeft=left,this.left!==left&&(this.left=left,this.localEventService.dispatchEvent(this.createAgEvent(ColumnGroup2.EVENT_LEFT_CHANGED)))},ColumnGroup2.prototype.getPinned=function(){return this.pinned},ColumnGroup2.prototype.createAgEvent=function(type){return{type}},ColumnGroup2.prototype.addEventListener=function(eventType,listener){this.localEventService.addEventListener(eventType,listener)},ColumnGroup2.prototype.removeEventListener=function(eventType,listener){this.localEventService.removeEventListener(eventType,listener)},ColumnGroup2.prototype.getGroupId=function(){return this.groupId},ColumnGroup2.prototype.getPartId=function(){return this.partId},ColumnGroup2.prototype.isChildInThisGroupDeepSearch=function(wantedChild){var result=!1;return this.children.forEach(function(foundChild){wantedChild===foundChild&&(result=!0),foundChild instanceof ColumnGroup2&&foundChild.isChildInThisGroupDeepSearch(wantedChild)&&(result=!0)}),result},ColumnGroup2.prototype.getActualWidth=function(){var groupActualWidth=0;return this.displayedChildren&&this.displayedChildren.forEach(function(child){groupActualWidth+=child.getActualWidth()}),groupActualWidth},ColumnGroup2.prototype.isResizable=function(){if(!this.displayedChildren)return!1;var result=!1;return this.displayedChildren.forEach(function(child){child.isResizable()&&(result=!0)}),result},ColumnGroup2.prototype.getMinWidth=function(){var result=0;return this.displayedChildren.forEach(function(groupChild){result+=groupChild.getMinWidth()||0}),result},ColumnGroup2.prototype.addChild=function(child){this.children||(this.children=[]),this.children.push(child)},ColumnGroup2.prototype.getDisplayedChildren=function(){return this.displayedChildren},ColumnGroup2.prototype.getLeafColumns=function(){var result=[];return this.addLeafColumns(result),result},ColumnGroup2.prototype.getDisplayedLeafColumns=function(){var result=[];return this.addDisplayedLeafColumns(result),result},ColumnGroup2.prototype.getDefinition=function(){return this.providedColumnGroup.getColGroupDef()},ColumnGroup2.prototype.getColGroupDef=function(){return this.providedColumnGroup.getColGroupDef()},ColumnGroup2.prototype.isPadding=function(){return this.providedColumnGroup.isPadding()},ColumnGroup2.prototype.isExpandable=function(){return this.providedColumnGroup.isExpandable()},ColumnGroup2.prototype.isExpanded=function(){return this.providedColumnGroup.isExpanded()},ColumnGroup2.prototype.setExpanded=function(expanded){this.providedColumnGroup.setExpanded(expanded)},ColumnGroup2.prototype.addDisplayedLeafColumns=function(leafColumns){this.displayedChildren.forEach(function(child){child instanceof Column?leafColumns.push(child):child instanceof ColumnGroup2&&child.addDisplayedLeafColumns(leafColumns)})},ColumnGroup2.prototype.addLeafColumns=function(leafColumns){this.children.forEach(function(child){child instanceof Column?leafColumns.push(child):child instanceof ColumnGroup2&&child.addLeafColumns(leafColumns)})},ColumnGroup2.prototype.getChildren=function(){return this.children},ColumnGroup2.prototype.getColumnGroupShow=function(){return this.providedColumnGroup.getColumnGroupShow()},ColumnGroup2.prototype.getProvidedColumnGroup=function(){return this.providedColumnGroup},ColumnGroup2.prototype.getOriginalColumnGroup=function(){return logDeprecation("27","getOriginalColumnGroup","getProvidedColumnGroup"),this.getProvidedColumnGroup()},ColumnGroup2.prototype.getPaddingLevel=function(){var parent=this.getParent();return this.isPadding()&&parent&&parent.isPadding()?1+parent.getPaddingLevel():0},ColumnGroup2.prototype.calculateDisplayedColumns=function(){var _this=this;this.displayedChildren=[];for(var parentWithExpansion=this;null!=parentWithExpansion&&parentWithExpansion.isPadding();)parentWithExpansion=parentWithExpansion.getParent();if(!(!!parentWithExpansion&&parentWithExpansion.providedColumnGroup.isExpandable()))return this.displayedChildren=this.children,void this.localEventService.dispatchEvent(this.createAgEvent(ColumnGroup2.EVENT_DISPLAYED_CHILDREN_CHANGED));this.children.forEach(function(child){if(!(child instanceof ColumnGroup2&&(!child.displayedChildren||!child.displayedChildren.length)))switch(child.getColumnGroupShow()){case"open":parentWithExpansion.providedColumnGroup.isExpanded()&&_this.displayedChildren.push(child);break;case"closed":parentWithExpansion.providedColumnGroup.isExpanded()||_this.displayedChildren.push(child);break;default:_this.displayedChildren.push(child)}}),this.localEventService.dispatchEvent(this.createAgEvent(ColumnGroup2.EVENT_DISPLAYED_CHILDREN_CHANGED))},ColumnGroup2.EVENT_LEFT_CHANGED="leftChanged",ColumnGroup2.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged",function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([Autowired("gridOptionsService")],ColumnGroup2.prototype,"gridOptionsService",void 0),ColumnGroup2}(),GroupInstanceIdCreator=function(){function GroupInstanceIdCreator2(){this.existingIds={}}return __name(GroupInstanceIdCreator2,"GroupInstanceIdCreator"),GroupInstanceIdCreator2.prototype.getInstanceIdForKey=function(key){var result,lastResult=this.existingIds[key];return result="number"!=typeof lastResult?0:lastResult+1,this.existingIds[key]=result,result},GroupInstanceIdCreator2}(),__extends$2R=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2v=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AutoGroupColService=function(_super){function AutoGroupColService2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2R(AutoGroupColService2,_super),__name(AutoGroupColService2,"AutoGroupColService"),AutoGroupColService2.prototype.createAutoGroupColumns=function(existingCols,rowGroupColumns){var _this=this,groupAutoColumns=[],doingTreeData=this.gridOptionsService.isTreeData(),doingMultiAutoColumn=this.gridOptionsService.isGroupMultiAutoColumn();return doingTreeData&&doingMultiAutoColumn&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),doingMultiAutoColumn=!1),doingMultiAutoColumn?rowGroupColumns.forEach(function(rowGroupCol,index){groupAutoColumns.push(_this.createOneAutoGroupColumn(existingCols,rowGroupCol,index))}):groupAutoColumns.push(this.createOneAutoGroupColumn(existingCols)),groupAutoColumns},AutoGroupColService2.prototype.createOneAutoGroupColumn=function(existingCols,rowGroupCol,index){var colId,defaultAutoColDef=this.generateDefaultColDef(rowGroupCol);(colId=rowGroupCol?"ag-Grid-AutoColumn-"+rowGroupCol.getId():"ag-Grid-AutoColumn",mergeDeep(defaultAutoColDef,this.gridOptionsService.get("autoGroupColumnDef")),(defaultAutoColDef=this.columnFactory.mergeColDefs(defaultAutoColDef)).colId=colId,this.gridOptionsService.isTreeData())||missing(defaultAutoColDef.field)&&missing(defaultAutoColDef.valueGetter)&&missing(defaultAutoColDef.filterValueGetter)&&"agGroupColumnFilter"!==defaultAutoColDef.filter&&(defaultAutoColDef.filter=!1);index&&index>0&&(defaultAutoColDef.headerCheckboxSelection=!1);var existingCol=existingCols.find(function(col){return col.getId()==colId});if(existingCol)return existingCol.setColDef(defaultAutoColDef,null),this.columnFactory.applyColumnState(existingCol,defaultAutoColDef),existingCol;this.gridOptionsService.isColumnsSortingCoupledToGroup()&&(defaultAutoColDef.sort||defaultAutoColDef.initialSort)&&!defaultAutoColDef.field&&mergeDeep(defaultAutoColDef,{sort:null,initialSort:null},!0,!0);var newCol=new Column(defaultAutoColDef,null,colId,!0);return this.context.createBean(newCol),newCol},AutoGroupColService2.prototype.generateDefaultColDef=function(rowGroupCol){var userDef=this.gridOptionsService.get("autoGroupColumnDef"),res={headerName:this.localeService.getLocaleTextFunc()("group","Group")};if(userDef&&(userDef.cellRenderer||userDef.cellRendererFramework||userDef.cellRendererSelector)||(res.cellRenderer="agGroupCellRenderer"),rowGroupCol){var colDef=rowGroupCol.getColDef();Object.assign(res,{headerName:this.columnModel.getDisplayNameForColumn(rowGroupCol,"header"),headerValueGetter:colDef.headerValueGetter}),(colDef.cellRenderer||colDef.cellRendererFramework)&&Object.assign(res,{cellRendererParams:{innerRenderer:colDef.cellRenderer,innerRendererFramework:colDef.cellRendererFramework,innerRendererParams:colDef.cellRendererParams}}),res.showRowGroup=rowGroupCol.getColId()}else res.showRowGroup=!0;return res},__decorate$2v([Autowired("columnModel")],AutoGroupColService2.prototype,"columnModel",void 0),__decorate$2v([Autowired("columnFactory")],AutoGroupColService2.prototype,"columnFactory",void 0),AutoGroupColService2=__decorate$2v([Bean("autoGroupColService")],AutoGroupColService2)}(BeanStub),reUnescapedHtml=/[&<>"']/g,HTML_ESCAPES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function utf8_encode(s){var stringFromCharCode=String.fromCharCode;function ucs2decode(string){var output=[];if(!string)return[];for(var value,extra,len=string.length,counter=0;counter<len;)(value=string.charCodeAt(counter++))>=55296&&value<=56319&&counter<len?56320==(64512&(extra=string.charCodeAt(counter++)))?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--):output.push(value);return output}function checkScalarValue(point){if(point>=55296&&point<=57343)throw Error("Lone surrogate U+"+point.toString(16).toUpperCase()+" is not a scalar value")}function createByte(point,shift){return stringFromCharCode(point>>shift&63|128)}function encodeCodePoint(point){if(point>=0&&point<=31&&10!==point)return"_x"+point.toString(16).toUpperCase().padStart(4,"0")+"_";if(!(4294967168&point))return stringFromCharCode(point);var symbol="";return 4294965248&point?4294901760&point?4292870144&point||(symbol=stringFromCharCode(point>>18&7|240),symbol+=createByte(point,12),symbol+=createByte(point,6)):(checkScalarValue(point),symbol=stringFromCharCode(point>>12&15|224),symbol+=createByte(point,6)):symbol=stringFromCharCode(point>>6&31|192),symbol+=stringFromCharCode(63&point|128)}__name(ucs2decode,"ucs2decode"),__name(checkScalarValue,"checkScalarValue"),__name(createByte,"createByte"),__name(encodeCodePoint,"encodeCodePoint");for(var codePoints=ucs2decode(s),length=codePoints.length,index=-1,byteString="";++index<length;)byteString+=encodeCodePoint(codePoints[index]);return byteString}function capitalise(str){return str[0].toUpperCase()+str.substr(1).toLowerCase()}function escapeString(toEscape,skipEscapingHtmlChars){if(null==toEscape)return null;var stringResult=toEscape.toString().toString();return skipEscapingHtmlChars?stringResult:stringResult.replace(reUnescapedHtml,function(chr){return HTML_ESCAPES[chr]})}function camelCaseToHumanText(camelCase){if(!camelCase||null==camelCase)return null;return camelCase.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z])([a-z])/g,"$1 $2$3").replace(/\./g," ").split(" ").map(function(word){return word.substring(0,1).toUpperCase()+(word.length>1?word.substring(1,word.length):"")}).join(" ")}__name(utf8_encode,"utf8_encode"),__name(capitalise,"capitalise"),__name(escapeString,"escapeString"),__name(camelCaseToHumanText,"camelCaseToHumanText");var StringUtils=Object.freeze({__proto__:null,utf8_encode,capitalise,escapeString,camelCaseToHumanText});function convertToMap(arr){var map=new Map;return arr.forEach(function(pair){return map.set(pair[0],pair[1])}),map}function mapById(arr,callback){var map=new Map;return arr.forEach(function(item){return map.set(callback(item),item)}),map}function keys(map){var arr=[];return map.forEach(function(_2,key){return arr.push(key)}),arr}__name(convertToMap,"convertToMap"),__name(mapById,"mapById"),__name(keys,"keys");var MapUtils=Object.freeze({__proto__:null,convertToMap,mapById,keys}),__extends$2Q=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2u=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__values$5=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$n=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$i=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$n(arguments[i]));return ar},ColumnModel=function(_super){function ColumnModel2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.primaryHeaderRowCount=0,_this.secondaryHeaderRowCount=0,_this.gridHeaderRowCount=0,_this.displayedColumnsLeft=[],_this.displayedColumnsRight=[],_this.displayedColumnsCenter=[],_this.displayedColumns=[],_this.displayedColumnsAndGroupsMap={},_this.viewportColumns=[],_this.viewportColumnsHash="",_this.headerViewportColumns=[],_this.viewportColumnsCenter=[],_this.headerViewportColumnsCenter=[],_this.autoHeightActiveAtLeastOnce=!1,_this.rowGroupColumns=[],_this.valueColumns=[],_this.pivotColumns=[],_this.ready=!1,_this.autoGroupsNeedBuilding=!1,_this.forceRecreateAutoGroups=!1,_this.pivotMode=!1,_this.bodyWidth=0,_this.leftWidth=0,_this.rightWidth=0,_this.bodyWidthDirty=!0,_this.flexColsCalculatedAtLestOnce=!1,_this}return __extends$2Q(ColumnModel2,_super),__name(ColumnModel2,"ColumnModel"),ColumnModel2.prototype.init=function(){var _this=this;this.suppressColumnVirtualisation=this.gridOptionsService.is("suppressColumnVirtualisation");var pivotMode=this.gridOptionsService.is("pivotMode");this.isPivotSettingAllowed(pivotMode)&&(this.pivotMode=pivotMode),this.usingTreeData=this.gridOptionsService.isTreeData(),this.addManagedPropertyListener("groupDisplayType",function(){return _this.onAutoGroupColumnDefChanged()}),this.addManagedPropertyListener("autoGroupColumnDef",function(){return _this.onAutoGroupColumnDefChanged()}),this.addManagedPropertyListener("defaultColDef",function(params){return _this.onSharedColDefChanged(params.source)}),this.addManagedPropertyListener("columnTypes",function(params){return _this.onSharedColDefChanged(params.source)})},ColumnModel2.prototype.onAutoGroupColumnDefChanged=function(){this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns("gridOptionsChanged")},ColumnModel2.prototype.onSharedColDefChanged=function(source){void 0===source&&(source="api"),this.forceRecreateAutoGroups=!0,this.createColumnsFromColumnDefs(!0,source)},ColumnModel2.prototype.setColumnDefs=function(columnDefs,source){void 0===source&&(source="api");var colsPreviouslyExisted=!!this.columnDefs;this.columnDefs=columnDefs,this.createColumnsFromColumnDefs(colsPreviouslyExisted,source)},ColumnModel2.prototype.destroyOldColumns=function(oldTree,newTree){var oldObjectsById={};if(oldTree){this.columnUtils.depthFirstOriginalTreeSearch(null,oldTree,function(child){oldObjectsById[child.getInstanceId()]=child}),newTree&&this.columnUtils.depthFirstOriginalTreeSearch(null,newTree,function(child){oldObjectsById[child.getInstanceId()]=null});var colsToDestroy=Object.values(oldObjectsById).filter(function(item){return null!=item});this.destroyBeans(colsToDestroy)}},ColumnModel2.prototype.destroyColumns=function(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)},ColumnModel2.prototype.createColumnsFromColumnDefs=function(colsPreviouslyExisted,source){var _this=this;void 0===source&&(source="api");var dispatchEventsFunc=colsPreviouslyExisted?this.compareColumnStatesAndDispatchEvents(source):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;var oldPrimaryColumns=this.primaryColumns,oldPrimaryTree=this.primaryColumnTree,balancedTreeResult=this.columnFactory.createColumnTree(this.columnDefs,!0,oldPrimaryTree);this.destroyOldColumns(this.primaryColumnTree,balancedTreeResult.columnTree),this.primaryColumnTree=balancedTreeResult.columnTree,this.primaryHeaderRowCount=balancedTreeResult.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(function(col){return _this.primaryColumnsMap[col.getId()]=col}),this.extractRowGroupColumns(source,oldPrimaryColumns),this.extractPivotColumns(source,oldPrimaryColumns),this.extractValueColumns(source,oldPrimaryColumns),this.ready=!0;var gridColsNotProcessed=void 0===this.gridColsArePrimary;(this.gridColsArePrimary||gridColsNotProcessed)&&(this.updateGridColumns(),colsPreviouslyExisted&&!this.gridOptionsService.is("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(source),this.checkViewportColumns()),this.dispatchEverythingChanged(source),dispatchEventsFunc&&dispatchEventsFunc(),this.dispatchNewColumnsLoaded()},ColumnModel2.prototype.dispatchNewColumnsLoaded=function(){var newColumnsLoadedEvent={type:Events.EVENT_NEW_COLUMNS_LOADED};this.eventService.dispatchEvent(newColumnsLoadedEvent)},ColumnModel2.prototype.dispatchEverythingChanged=function(source){void 0===source&&(source="api");var eventEverythingChanged={type:Events.EVENT_COLUMN_EVERYTHING_CHANGED,source};this.eventService.dispatchEvent(eventEverythingChanged)},ColumnModel2.prototype.orderGridColumnsLikePrimary=function(){var _this=this,primaryColumns=this.primaryColumns;primaryColumns&&(this.gridColumns.sort(function(colA,colB){var primaryIndexA=primaryColumns.indexOf(colA),primaryIndexB=primaryColumns.indexOf(colB),indexAPresent=primaryIndexA>=0,indexBPresent=primaryIndexB>=0;return indexAPresent&&indexBPresent?primaryIndexA-primaryIndexB:indexAPresent?1:indexBPresent?-1:_this.gridColumns.indexOf(colA)-_this.gridColumns.indexOf(colB)}),this.gridColumns=this.placeLockedColumns(this.gridColumns))},ColumnModel2.prototype.getAllDisplayedAutoHeightCols=function(){return this.displayedAutoHeightCols},ColumnModel2.prototype.setViewport=function(){this.gridOptionsService.is("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)},ColumnModel2.prototype.getDisplayedColumnsStartingAt=function(column){for(var currentColumn=column,columns=[];null!=currentColumn;)columns.push(currentColumn),currentColumn=this.getDisplayedColAfter(currentColumn);return columns},ColumnModel2.prototype.checkViewportColumns=function(){if(null!=this.displayedColumnsCenter&&this.extractViewport()){var event={type:Events.EVENT_VIRTUAL_COLUMNS_CHANGED};this.eventService.dispatchEvent(event)}},ColumnModel2.prototype.setViewportPosition=function(scrollWidth,scrollPosition){(scrollWidth!==this.scrollWidth||scrollPosition!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=scrollWidth,this.scrollPosition=scrollPosition,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns())},ColumnModel2.prototype.isPivotMode=function(){return this.pivotMode},ColumnModel2.prototype.isPivotSettingAllowed=function(pivot){return!pivot||!this.gridOptionsService.isTreeData()||(console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1)},ColumnModel2.prototype.setPivotMode=function(pivotMode,source){if(void 0===source&&(source="api"),pivotMode!==this.pivotMode&&this.isPivotSettingAllowed(this.pivotMode)){this.pivotMode=pivotMode,this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(source);var event={type:Events.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(event)}},ColumnModel2.prototype.getSecondaryPivotColumn=function(pivotKeys,valueColKey){if(missing(this.secondaryColumns))return null;var valueColumnToFind=this.getPrimaryColumn(valueColKey),foundColumn=null;return this.secondaryColumns.forEach(function(column){var thisPivotKeys=column.getColDef().pivotKeys,pivotValueColumn=column.getColDef().pivotValueColumn;areEqual(thisPivotKeys,pivotKeys)&&pivotValueColumn===valueColumnToFind&&(foundColumn=column)}),foundColumn},ColumnModel2.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("columnModel")},ColumnModel2.prototype.setFirstRightAndLastLeftPinned=function(source){var lastLeft,firstRight;this.gridOptionsService.is("enableRtl")?(lastLeft=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,firstRight=this.displayedColumnsRight?last(this.displayedColumnsRight):null):(lastLeft=this.displayedColumnsLeft?last(this.displayedColumnsLeft):null,firstRight=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(function(column){column.setLastLeftPinned(column===lastLeft,source),column.setFirstRightPinned(column===firstRight,source)})},ColumnModel2.prototype.autoSizeColumns=function(params){var _this=this,columns=params.columns,skipHeader=params.skipHeader,skipHeaderGroups=params.skipHeaderGroups,stopAtGroup=params.stopAtGroup,_a=params.source,source=void 0===_a?"api":_a;this.animationFrameService.flushAllFrames();for(var columnsAutosized=[],changesThisTimeAround=-1,shouldSkipHeader=skipHeader??this.gridOptionsService.is("skipHeaderOnAutoSize"),shouldSkipHeaderGroups=skipHeaderGroups??shouldSkipHeader;0!==changesThisTimeAround;)changesThisTimeAround=0,this.actionOnGridColumns(columns,function(column){if(columnsAutosized.indexOf(column)>=0)return!1;var preferredWidth=_this.autoWidthCalculator.getPreferredWidthForColumn(column,shouldSkipHeader);if(preferredWidth>0){var newWidth=_this.normaliseColumnWidth(column,preferredWidth);column.setActualWidth(newWidth,source),columnsAutosized.push(column),changesThisTimeAround++}return!0},source);shouldSkipHeaderGroups||this.autoSizeColumnGroupsByColumns(columns,stopAtGroup),this.dispatchColumnResizedEvent(columnsAutosized,!0,"autosizeColumns")},ColumnModel2.prototype.dispatchColumnResizedEvent=function(columns,finished,source,flexColumns){if(void 0===flexColumns&&(flexColumns=null),columns&&columns.length){var event_1={type:Events.EVENT_COLUMN_RESIZED,columns,column:1===columns.length?columns[0]:null,flexColumns,finished,source};this.eventService.dispatchEvent(event_1)}},ColumnModel2.prototype.dispatchColumnChangedEvent=function(type,columns,source){var event={type,columns,column:columns&&1==columns.length?columns[0]:null,source};this.eventService.dispatchEvent(event)},ColumnModel2.prototype.dispatchColumnMovedEvent=function(params){var movedColumns=params.movedColumns,source=params.source,toIndex=params.toIndex,finished=params.finished,event={type:Events.EVENT_COLUMN_MOVED,columns:movedColumns,column:movedColumns&&1===movedColumns.length?movedColumns[0]:null,toIndex,finished,source};this.eventService.dispatchEvent(event)},ColumnModel2.prototype.dispatchColumnPinnedEvent=function(changedColumns,source){if(changedColumns.length){var column=1===changedColumns.length?changedColumns[0]:null,pinned=this.getCommonValue(changedColumns,function(col){return col.getPinned()}),event={type:Events.EVENT_COLUMN_PINNED,pinned:pinned??null,columns:changedColumns,column,source};this.eventService.dispatchEvent(event)}},ColumnModel2.prototype.dispatchColumnVisibleEvent=function(changedColumns,source){if(changedColumns.length){var column=1===changedColumns.length?changedColumns[0]:null,visible=this.getCommonValue(changedColumns,function(col){return col.isVisible()}),event={type:Events.EVENT_COLUMN_VISIBLE,visible,columns:changedColumns,column,source};this.eventService.dispatchEvent(event)}},ColumnModel2.prototype.autoSizeColumn=function(key,skipHeader,source){void 0===source&&(source="api"),key&&this.autoSizeColumns({columns:[key],skipHeader,skipHeaderGroups:!0,source})},ColumnModel2.prototype.autoSizeColumnGroupsByColumns=function(keys2,stopAtGroup){var e_1,_a,e_2,_b,columnGroups=new Set;this.getGridColumns(keys2).forEach(function(col){for(var parent=col.getParent();parent&&parent!=stopAtGroup;)parent.isPadding()||columnGroups.add(parent),parent=parent.getParent()});var headerGroupCtrl;try{for(var columnGroups_1=__values$5(columnGroups),columnGroups_1_1=columnGroups_1.next();!columnGroups_1_1.done;columnGroups_1_1=columnGroups_1.next()){var columnGroup=columnGroups_1_1.value;try{for(var _c=(e_2=void 0,__values$5(this.ctrlsService.getHeaderRowContainerCtrls())),_d=_c.next();!_d.done;_d=_c.next()){if(headerGroupCtrl=_d.value.getHeaderCtrlForColumn(columnGroup))break}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_d&&!_d.done&&(_b=_c.return)&&_b.call(_c)}finally{if(e_2)throw e_2.error}}headerGroupCtrl&&headerGroupCtrl.resizeLeafColumnsToFit()}}catch(e_1_1){e_1={error:e_1_1}}finally{try{columnGroups_1_1&&!columnGroups_1_1.done&&(_a=columnGroups_1.return)&&_a.call(columnGroups_1)}finally{if(e_1)throw e_1.error}}return[]},ColumnModel2.prototype.autoSizeAllColumns=function(skipHeader,source){void 0===source&&(source="api");var allDisplayedColumns=this.getAllDisplayedColumns();this.autoSizeColumns({columns:allDisplayedColumns,skipHeader,source})},ColumnModel2.prototype.getColumnsFromTree=function(rootColumns){var result=[],recursiveFindColumns=__name(function(childColumns){for(var i=0;i<childColumns.length;i++){var child=childColumns[i];child instanceof Column?result.push(child):child instanceof ProvidedColumnGroup&&recursiveFindColumns(child.getChildren())}},"recursiveFindColumns");return recursiveFindColumns(rootColumns),result},ColumnModel2.prototype.getAllDisplayedTrees=function(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null},ColumnModel2.prototype.getPrimaryColumnTree=function(){return this.primaryColumnTree},ColumnModel2.prototype.getHeaderRowCount=function(){return this.gridHeaderRowCount},ColumnModel2.prototype.getDisplayedTreeLeft=function(){return this.displayedTreeLeft},ColumnModel2.prototype.getDisplayedTreeRight=function(){return this.displayedTreeRight},ColumnModel2.prototype.getDisplayedTreeCentre=function(){return this.displayedTreeCentre},ColumnModel2.prototype.isColumnDisplayed=function(column){return this.getAllDisplayedColumns().indexOf(column)>=0},ColumnModel2.prototype.getAllDisplayedColumns=function(){return this.displayedColumns},ColumnModel2.prototype.getViewportColumns=function(){return this.viewportColumns},ColumnModel2.prototype.getDisplayedLeftColumnsForRow=function(rowNode){return this.colSpanActive?this.getDisplayedColumnsForRow(rowNode,this.displayedColumnsLeft):this.displayedColumnsLeft},ColumnModel2.prototype.getDisplayedRightColumnsForRow=function(rowNode){return this.colSpanActive?this.getDisplayedColumnsForRow(rowNode,this.displayedColumnsRight):this.displayedColumnsRight},ColumnModel2.prototype.getDisplayedColumnsForRow=function(rowNode,displayedColumns,filterCallback,emptySpaceBeforeColumn){for(var out_i_1,result=[],lastConsideredCol=null,_loop_1=__name(function(i2){var filterPasses,col=displayedColumns[i2],maxAllowedColSpan=displayedColumns.length-i2,colSpan=Math.min(col.getColSpan(rowNode),maxAllowedColSpan),columnsToCheckFilter=[col];if(colSpan>1){for(var colsToRemove=colSpan-1,j=1;j<=colsToRemove;j++)columnsToCheckFilter.push(displayedColumns[i2+j]);i2+=colsToRemove}if(filterCallback?(filterPasses=!1,columnsToCheckFilter.forEach(function(colForFilter){filterCallback(colForFilter)&&(filterPasses=!0)})):filterPasses=!0,filterPasses){if(0===result.length&&lastConsideredCol)!!emptySpaceBeforeColumn&&emptySpaceBeforeColumn(col)&&result.push(lastConsideredCol);result.push(col)}lastConsideredCol=col,out_i_1=i2},"_loop_1"),i=0;i<displayedColumns.length;i++)_loop_1(i),i=out_i_1;return result},ColumnModel2.prototype.getViewportCenterColumnsForRow=function(rowNode){var _this=this;if(!this.colSpanActive)return this.viewportColumnsCenter;var emptySpaceBeforeColumn=__name(function(col){var left=col.getLeft();return exists(left)&&left>_this.viewportLeft},"emptySpaceBeforeColumn"),filterCallback=this.suppressColumnVirtualisation?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(rowNode,this.displayedColumnsCenter,filterCallback,emptySpaceBeforeColumn)},ColumnModel2.prototype.getAriaColumnIndex=function(col){return this.getAllGridColumns().indexOf(col)+1},ColumnModel2.prototype.isColumnInHeaderViewport=function(col){return!!col.isAutoHeaderHeight()||this.isColumnInRowViewport(col)},ColumnModel2.prototype.isColumnInRowViewport=function(col){if(col.isAutoHeight())return!0;var columnLeft=col.getLeft()||0,columnRight=columnLeft+col.getActualWidth(),leftBounds=this.viewportLeft-200,rightBounds=this.viewportRight+200;return!(columnLeft<leftBounds&&columnRight<leftBounds)&&!(columnLeft>rightBounds&&columnRight>rightBounds)},ColumnModel2.prototype.getDisplayedColumnsLeftWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsLeft)},ColumnModel2.prototype.getDisplayedColumnsRightWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsRight)},ColumnModel2.prototype.updatePrimaryColumnList=function(keys2,masterList,actionIsAdd,columnCallback,eventType,source){var _this=this;if(void 0===source&&(source="api"),keys2&&!missingOrEmpty(keys2)){var atLeastOne=!1;if(keys2.forEach(function(key){var columnToAdd=_this.getPrimaryColumn(key);if(columnToAdd){if(actionIsAdd){if(masterList.indexOf(columnToAdd)>=0)return;masterList.push(columnToAdd)}else{if(masterList.indexOf(columnToAdd)<0)return;removeFromArray(masterList,columnToAdd)}columnCallback(columnToAdd),atLeastOne=!0}}),atLeastOne){this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(source);var event={type:eventType,columns:masterList,column:1===masterList.length?masterList[0]:null,source};this.eventService.dispatchEvent(event)}}},ColumnModel2.prototype.setRowGroupColumns=function(colKeys,source){void 0===source&&(source="api"),this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(colKeys,this.rowGroupColumns,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.setRowGroupActive.bind(this),source)},ColumnModel2.prototype.setRowGroupActive=function(active,column,source){active!==column.isRowGroupActive()&&(column.setRowGroupActive(active,source),active&&!this.gridOptionsService.is("suppressRowGroupHidesColumns")&&this.setColumnVisible(column,!1,source),!active&&!this.gridOptionsService.is("suppressMakeColumnVisibleAfterUnGroup")&&this.setColumnVisible(column,!0,source))},ColumnModel2.prototype.addRowGroupColumn=function(key,source){void 0===source&&(source="api"),key&&this.addRowGroupColumns([key],source)},ColumnModel2.prototype.addRowGroupColumns=function(keys2,source){void 0===source&&(source="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(keys2,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),Events.EVENT_COLUMN_ROW_GROUP_CHANGED,source)},ColumnModel2.prototype.removeRowGroupColumns=function(keys2,source){void 0===source&&(source="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(keys2,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),Events.EVENT_COLUMN_ROW_GROUP_CHANGED,source)},ColumnModel2.prototype.removeRowGroupColumn=function(key,source){void 0===source&&(source="api"),key&&this.removeRowGroupColumns([key],source)},ColumnModel2.prototype.addPivotColumns=function(keys2,source){void 0===source&&(source="api"),this.updatePrimaryColumnList(keys2,this.pivotColumns,!0,function(column){return column.setPivotActive(!0,source)},Events.EVENT_COLUMN_PIVOT_CHANGED,source)},ColumnModel2.prototype.setPivotColumns=function(colKeys,source){void 0===source&&(source="api"),this.setPrimaryColumnList(colKeys,this.pivotColumns,Events.EVENT_COLUMN_PIVOT_CHANGED,function(added,column){column.setPivotActive(added,source)},source)},ColumnModel2.prototype.addPivotColumn=function(key,source){void 0===source&&(source="api"),this.addPivotColumns([key],source)},ColumnModel2.prototype.removePivotColumns=function(keys2,source){void 0===source&&(source="api"),this.updatePrimaryColumnList(keys2,this.pivotColumns,!1,function(column){return column.setPivotActive(!1,source)},Events.EVENT_COLUMN_PIVOT_CHANGED,source)},ColumnModel2.prototype.removePivotColumn=function(key,source){void 0===source&&(source="api"),this.removePivotColumns([key],source)},ColumnModel2.prototype.setPrimaryColumnList=function(colKeys,masterList,eventName,columnCallback,source){var _this=this;masterList.length=0,exists(colKeys)&&colKeys.forEach(function(key){var column=_this.getPrimaryColumn(key);column&&masterList.push(column)}),(this.primaryColumns||[]).forEach(function(column){var added=masterList.indexOf(column)>=0;columnCallback(added,column)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(source),this.dispatchColumnChangedEvent(eventName,masterList,source)},ColumnModel2.prototype.setValueColumns=function(colKeys,source){void 0===source&&(source="api"),this.setPrimaryColumnList(colKeys,this.valueColumns,Events.EVENT_COLUMN_VALUE_CHANGED,this.setValueActive.bind(this),source)},ColumnModel2.prototype.setValueActive=function(active,column,source){if(active!==column.isValueActive()&&(column.setValueActive(active,source),active&&!column.getAggFunc())){var initialAggFunc=this.aggFuncService.getDefaultAggFunc(column);column.setAggFunc(initialAggFunc)}},ColumnModel2.prototype.addValueColumns=function(keys2,source){void 0===source&&(source="api"),this.updatePrimaryColumnList(keys2,this.valueColumns,!0,this.setValueActive.bind(this,!0),Events.EVENT_COLUMN_VALUE_CHANGED,source)},ColumnModel2.prototype.addValueColumn=function(colKey,source){void 0===source&&(source="api"),colKey&&this.addValueColumns([colKey],source)},ColumnModel2.prototype.removeValueColumn=function(colKey,source){void 0===source&&(source="api"),this.removeValueColumns([colKey],source)},ColumnModel2.prototype.removeValueColumns=function(keys2,source){void 0===source&&(source="api"),this.updatePrimaryColumnList(keys2,this.valueColumns,!1,this.setValueActive.bind(this,!1),Events.EVENT_COLUMN_VALUE_CHANGED,source)},ColumnModel2.prototype.normaliseColumnWidth=function(column,newWidth){var minWidth=column.getMinWidth();exists(minWidth)&&newWidth<minWidth&&(newWidth=minWidth);var maxWidth=column.getMaxWidth();return exists(maxWidth)&&column.isGreaterThanMax(newWidth)&&(newWidth=maxWidth),newWidth},ColumnModel2.prototype.getPrimaryOrGridColumn=function(key){return this.getPrimaryColumn(key)||this.getGridColumn(key)},ColumnModel2.prototype.setColumnWidths=function(columnWidths,shiftKey,finished,source){var _this=this;void 0===source&&(source="api");var sets=[];columnWidths.forEach(function(columnWidth){var col=_this.getPrimaryOrGridColumn(columnWidth.key);if(col&&(sets.push({width:columnWidth.newWidth,ratios:[1],columns:[col]}),"shift"===_this.gridOptionsService.get("colResizeDefault")&&(shiftKey=!shiftKey),shiftKey)){var otherCol=_this.getDisplayedColAfter(col);if(!otherCol)return;var widthDiff=col.getActualWidth()-columnWidth.newWidth,otherColWidth=otherCol.getActualWidth()+widthDiff;sets.push({width:otherColWidth,ratios:[1],columns:[otherCol]})}}),0!==sets.length&&this.resizeColumnSets({resizeSets:sets,finished,source})},ColumnModel2.prototype.checkMinAndMaxWidthsForSet=function(columnResizeSet){var columns=columnResizeSet.columns,width=columnResizeSet.width,minWidthAccumulated=0,maxWidthAccumulated=0,maxWidthActive=!0;return columns.forEach(function(col){var minWidth=col.getMinWidth();minWidthAccumulated+=minWidth||0;var maxWidth=col.getMaxWidth();exists(maxWidth)&&maxWidth>0?maxWidthAccumulated+=maxWidth:maxWidthActive=!1}),width>=minWidthAccumulated&&(!maxWidthActive||width<=maxWidthAccumulated)},ColumnModel2.prototype.resizeColumnSets=function(params){var _this=this,resizeSets=params.resizeSets,finished=params.finished,source=params.source;if(!resizeSets||resizeSets.every(function(columnResizeSet){return _this.checkMinAndMaxWidthsForSet(columnResizeSet)})){var changedCols=[],allResizedCols=[];resizeSets.forEach(function(set2){var width=set2.width,columns2=set2.columns,ratios=set2.ratios,newWidths={},finishedCols={};columns2.forEach(function(col){return allResizedCols.push(col)});for(var finishedColsGrew=!0,loopCount=0,_loop_2=__name(function(){if(++loopCount>1e3)return console.error("AG Grid: infinite loop in resizeColumnSets"),"break";finishedColsGrew=!1;var subsetCols=[],subsetRatioTotal=0,pixelsToDistribute=width;columns2.forEach(function(col,index){if(finishedCols[col.getId()])pixelsToDistribute-=newWidths[col.getId()];else{subsetCols.push(col);var ratioThisCol=ratios[index];subsetRatioTotal+=ratioThisCol}});var ratioScale=1/subsetRatioTotal;subsetCols.forEach(function(col,index){var colNewWidth;index===subsetCols.length-1?colNewWidth=pixelsToDistribute:(colNewWidth=Math.round(ratios[index]*width*ratioScale),pixelsToDistribute-=colNewWidth);var minWidth=col.getMinWidth(),maxWidth=col.getMaxWidth();exists(minWidth)&&colNewWidth<minWidth?(colNewWidth=minWidth,finishedCols[col.getId()]=!0,finishedColsGrew=!0):exists(maxWidth)&&maxWidth>0&&colNewWidth>maxWidth&&(colNewWidth=maxWidth,finishedCols[col.getId()]=!0,finishedColsGrew=!0),newWidths[col.getId()]=colNewWidth})},"_loop_2");finishedColsGrew;){if("break"===_loop_2())break}columns2.forEach(function(col){var newWidth=newWidths[col.getId()];col.getActualWidth()!==newWidth&&(col.setActualWidth(newWidth,source),changedCols.push(col))})});var atLeastOneColChanged=changedCols.length>0,flexedCols=[];atLeastOneColChanged&&(flexedCols=this.refreshFlexedColumns({resizingCols:allResizedCols,skipSetLeft:!0}),this.setLeftValues(source),this.updateBodyWidths(),this.checkViewportColumns());var colsForEvent=allResizedCols.concat(flexedCols);(atLeastOneColChanged||finished)&&this.dispatchColumnResizedEvent(colsForEvent,finished,source,flexedCols)}else if(finished){var columns=resizeSets&&resizeSets.length>0?resizeSets[0].columns:null;this.dispatchColumnResizedEvent(columns,finished,source)}},ColumnModel2.prototype.setColumnAggFunc=function(key,aggFunc,source){if(void 0===source&&(source="api"),key){var column=this.getPrimaryColumn(key);column&&(column.setAggFunc(aggFunc),this.dispatchColumnChangedEvent(Events.EVENT_COLUMN_VALUE_CHANGED,[column],source))}},ColumnModel2.prototype.moveRowGroupColumn=function(fromIndex,toIndex,source){void 0===source&&(source="api");var column=this.rowGroupColumns[fromIndex];this.rowGroupColumns.splice(fromIndex,1),this.rowGroupColumns.splice(toIndex,0,column);var event={type:Events.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:this.rowGroupColumns,column:1===this.rowGroupColumns.length?this.rowGroupColumns[0]:null,source};this.eventService.dispatchEvent(event)},ColumnModel2.prototype.moveColumns=function(columnsToMoveKeys,toIndex,source,finished){if(void 0===source&&(source="api"),void 0===finished&&(finished=!0),this.columnAnimationService.start(),toIndex>this.gridColumns.length-columnsToMoveKeys.length)return console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+toIndex),void console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");var movedColumns=this.getGridColumns(columnsToMoveKeys);!this.doesMovePassRules(movedColumns,toIndex)||(moveInArray(this.gridColumns,movedColumns,toIndex),this.updateDisplayedColumns(source),this.dispatchColumnMovedEvent({movedColumns,source,toIndex,finished}),this.columnAnimationService.finish())},ColumnModel2.prototype.doesMovePassRules=function(columnsToMove,toIndex){var proposedColumnOrder=this.getProposedColumnOrder(columnsToMove,toIndex);return this.doesOrderPassRules(proposedColumnOrder)},ColumnModel2.prototype.doesOrderPassRules=function(gridOrder){return!(!this.doesMovePassMarryChildren(gridOrder)||!this.doesMovePassLockedPositions(gridOrder))},ColumnModel2.prototype.getProposedColumnOrder=function(columnsToMove,toIndex){var proposedColumnOrder=this.gridColumns.slice();return moveInArray(proposedColumnOrder,columnsToMove,toIndex),proposedColumnOrder},ColumnModel2.prototype.sortColumnsLikeGridColumns=function(cols){var _this=this;!cols||cols.length<=1||(cols.filter(function(c){return _this.gridColumns.indexOf(c)<0}).length>0||cols.sort(function(a,b){return _this.gridColumns.indexOf(a)-_this.gridColumns.indexOf(b)}))},ColumnModel2.prototype.doesMovePassLockedPositions=function(proposedColumnOrder){var lastPlacement=0,rulePassed=!0,lockPositionToPlacement=__name(function(position){return position?!0===position||"left"===position?0:2:1},"lockPositionToPlacement");return proposedColumnOrder.forEach(function(col){var placement=lockPositionToPlacement(col.getColDef().lockPosition);placement<lastPlacement&&(rulePassed=!1),lastPlacement=placement}),rulePassed},ColumnModel2.prototype.doesMovePassMarryChildren=function(allColumnsCopy){var rulePassed=!0;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(child){if(child instanceof ProvidedColumnGroup){var columnGroup=child,colGroupDef=columnGroup.getColGroupDef();if(colGroupDef&&colGroupDef.marryChildren){var newIndexes=[];columnGroup.getLeafColumns().forEach(function(col){var newColIndex=allColumnsCopy.indexOf(col);newIndexes.push(newColIndex)}),Math.max.apply(Math,newIndexes)-Math.min.apply(Math,newIndexes)>columnGroup.getLeafColumns().length-1&&(rulePassed=!1)}}}),rulePassed},ColumnModel2.prototype.moveColumn=function(key,toIndex,source){void 0===source&&(source="api"),this.moveColumns([key],toIndex,source)},ColumnModel2.prototype.moveColumnByIndex=function(fromIndex,toIndex,source){void 0===source&&(source="api");var column=this.gridColumns[fromIndex];this.moveColumn(column,toIndex,source)},ColumnModel2.prototype.getColumnDefs=function(){var _this=this;if(this.primaryColumns){var cols=this.primaryColumns.slice();return this.gridColsArePrimary?cols.sort(function(a,b){return _this.gridColumns.indexOf(a)-_this.gridColumns.indexOf(b)}):this.lastPrimaryOrder&&cols.sort(function(a,b){return _this.lastPrimaryOrder.indexOf(a)-_this.lastPrimaryOrder.indexOf(b)}),this.columnDefFactory.buildColumnDefs(cols,this.rowGroupColumns,this.pivotColumns)}},ColumnModel2.prototype.getBodyContainerWidth=function(){return this.bodyWidth},ColumnModel2.prototype.getContainerWidth=function(pinned){switch(pinned){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}},ColumnModel2.prototype.updateBodyWidths=function(){var newBodyWidth=this.getWidthOfColsInList(this.displayedColumnsCenter),newLeftWidth=this.getWidthOfColsInList(this.displayedColumnsLeft),newRightWidth=this.getWidthOfColsInList(this.displayedColumnsRight);if(this.bodyWidthDirty=this.bodyWidth!==newBodyWidth,this.bodyWidth!==newBodyWidth||this.leftWidth!==newLeftWidth||this.rightWidth!==newRightWidth){this.bodyWidth=newBodyWidth,this.leftWidth=newLeftWidth,this.rightWidth=newRightWidth;var event_2={type:Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(event_2)}},ColumnModel2.prototype.getValueColumns=function(){return this.valueColumns?this.valueColumns:[]},ColumnModel2.prototype.getPivotColumns=function(){return this.pivotColumns?this.pivotColumns:[]},ColumnModel2.prototype.isPivotActive=function(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode},ColumnModel2.prototype.getRowGroupColumns=function(){return this.rowGroupColumns?this.rowGroupColumns:[]},ColumnModel2.prototype.getDisplayedCenterColumns=function(){return this.displayedColumnsCenter},ColumnModel2.prototype.getDisplayedLeftColumns=function(){return this.displayedColumnsLeft},ColumnModel2.prototype.getDisplayedRightColumns=function(){return this.displayedColumnsRight},ColumnModel2.prototype.getDisplayedColumns=function(type){switch(type){case"left":return this.getDisplayedLeftColumns();case"right":return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}},ColumnModel2.prototype.getAllPrimaryColumns=function(){return this.primaryColumns?this.primaryColumns.slice():null},ColumnModel2.prototype.getSecondaryColumns=function(){return this.secondaryColumns?this.secondaryColumns.slice():null},ColumnModel2.prototype.getAllColumnsForQuickFilter=function(){return this.columnsForQuickFilter},ColumnModel2.prototype.getAllGridColumns=function(){return this.gridColumns},ColumnModel2.prototype.isEmpty=function(){return missingOrEmpty(this.gridColumns)},ColumnModel2.prototype.isRowGroupEmpty=function(){return missingOrEmpty(this.rowGroupColumns)},ColumnModel2.prototype.setColumnVisible=function(key,visible,source){void 0===source&&(source="api"),this.setColumnsVisible([key],visible,source)},ColumnModel2.prototype.setColumnsVisible=function(keys2,visible,source){void 0===visible&&(visible=!1),void 0===source&&(source="api"),this.applyColumnState({state:keys2.map(function(key){return{colId:"string"==typeof key?key:key.getColId(),hide:!visible}})},source)},ColumnModel2.prototype.setColumnPinned=function(key,pinned,source){void 0===source&&(source="api"),key&&this.setColumnsPinned([key],pinned,source)},ColumnModel2.prototype.setColumnsPinned=function(keys2,pinned,source){var actualPinned;(void 0===source&&(source="api"),this.gridOptionsService.isDomLayout("print"))?console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'"):(this.columnAnimationService.start(),actualPinned=!0===pinned||"left"===pinned?"left":"right"===pinned?"right":null,this.actionOnGridColumns(keys2,function(col){return col.getPinned()!==actualPinned&&(col.setPinned(actualPinned),!0)},source,function(){return{type:Events.EVENT_COLUMN_PINNED,pinned:actualPinned,column:null,columns:null,source}}),this.columnAnimationService.finish())},ColumnModel2.prototype.actionOnGridColumns=function(keys2,action,source,createEvent){var _this=this;if(!missingOrEmpty(keys2)){var updatedColumns=[];if(keys2.forEach(function(key){var column=_this.getGridColumn(key);column&&(!1!==action(column)&&updatedColumns.push(column))}),updatedColumns.length&&(this.updateDisplayedColumns(source),exists(createEvent)&&createEvent)){var event_3=createEvent();event_3.columns=updatedColumns,event_3.column=1===updatedColumns.length?updatedColumns[0]:null,this.eventService.dispatchEvent(event_3)}}},ColumnModel2.prototype.getDisplayedColBefore=function(col){var allDisplayedColumns=this.getAllDisplayedColumns(),oldIndex=allDisplayedColumns.indexOf(col);return oldIndex>0?allDisplayedColumns[oldIndex-1]:null},ColumnModel2.prototype.getDisplayedColAfter=function(col){var allDisplayedColumns=this.getAllDisplayedColumns(),oldIndex=allDisplayedColumns.indexOf(col);return oldIndex<allDisplayedColumns.length-1?allDisplayedColumns[oldIndex+1]:null},ColumnModel2.prototype.getDisplayedGroupAfter=function(columnGroup){return this.getDisplayedGroupAtDirection(columnGroup,"After")},ColumnModel2.prototype.getDisplayedGroupBefore=function(columnGroup){return this.getDisplayedGroupAtDirection(columnGroup,"Before")},ColumnModel2.prototype.getDisplayedGroupAtDirection=function(columnGroup,direction){for(var requiredLevel=columnGroup.getProvidedColumnGroup().getLevel()+columnGroup.getPaddingLevel(),colGroupLeafColumns=columnGroup.getDisplayedLeafColumns(),col="After"===direction?last(colGroupLeafColumns):colGroupLeafColumns[0],getDisplayColMethod="getDisplayedCol"+direction;;){var column=this[getDisplayColMethod](col);if(!column)return null;var groupPointer=this.getColumnGroupAtLevel(column,requiredLevel);if(groupPointer!==columnGroup)return groupPointer}},ColumnModel2.prototype.getColumnGroupAtLevel=function(column,level){for(var groupPointer=column.getParent();;){if(groupPointer.getProvidedColumnGroup().getLevel()+groupPointer.getPaddingLevel()<=level)break;groupPointer=groupPointer.getParent()}return groupPointer},ColumnModel2.prototype.isPinningLeft=function(){return this.displayedColumnsLeft.length>0},ColumnModel2.prototype.isPinningRight=function(){return this.displayedColumnsRight.length>0},ColumnModel2.prototype.getPrimaryAndSecondaryAndAutoColumns=function(){var _a;return(_a=[]).concat.apply(_a,__spread$i([this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[]]))},ColumnModel2.prototype.createStateItemFromColumn=function(column){var rowGroupIndex=column.isRowGroupActive()?this.rowGroupColumns.indexOf(column):null,pivotIndex=column.isPivotActive()?this.pivotColumns.indexOf(column):null,aggFunc=column.isValueActive()?column.getAggFunc():null,sort=null!=column.getSort()?column.getSort():null,sortIndex=null!=column.getSortIndex()?column.getSortIndex():null,flex=null!=column.getFlex()&&column.getFlex()>0?column.getFlex():null;return{colId:column.getColId(),width:column.getActualWidth(),hide:!column.isVisible(),pinned:column.getPinned(),sort,sortIndex,aggFunc,rowGroup:column.isRowGroupActive(),rowGroupIndex,pivot:column.isPivotActive(),pivotIndex,flex}},ColumnModel2.prototype.getColumnState=function(){if(missing(this.primaryColumns)||!this.isAlive())return[];var res=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(res),res},ColumnModel2.prototype.orderColumnStateList=function(columnStateList){var colIdToGridIndexMap=convertToMap(this.gridColumns.map(function(col,index){return[col.getColId(),index]}));columnStateList.sort(function(itemA,itemB){return(colIdToGridIndexMap.has(itemA.colId)?colIdToGridIndexMap.get(itemA.colId):-1)-(colIdToGridIndexMap.has(itemB.colId)?colIdToGridIndexMap.get(itemB.colId):-1)})},ColumnModel2.prototype.resetColumnState=function(source){void 0===source&&(source="api");var primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),columnStates=[],letRowGroupIndex=1e3,letPivotIndex=1e3,colsToProcess=[];this.groupAutoColumns&&(colsToProcess=colsToProcess.concat(this.groupAutoColumns)),primaryColumns&&(colsToProcess=colsToProcess.concat(primaryColumns)),colsToProcess.forEach(function(column){var getValueOrNull=__name(function(a,b){return a??b??null},"getValueOrNull"),colDef=column.getColDef(),sort=getValueOrNull(colDef.sort,colDef.initialSort),sortIndex=getValueOrNull(colDef.sortIndex,colDef.initialSortIndex),hide=getValueOrNull(colDef.hide,colDef.initialHide),pinned=getValueOrNull(colDef.pinned,colDef.initialPinned),width=getValueOrNull(colDef.width,colDef.initialWidth),flex=getValueOrNull(colDef.flex,colDef.initialFlex),rowGroupIndex=getValueOrNull(colDef.rowGroupIndex,colDef.initialRowGroupIndex),rowGroup=getValueOrNull(colDef.rowGroup,colDef.initialRowGroup);null==rowGroupIndex&&(null==rowGroup||0==rowGroup)&&(rowGroupIndex=null,rowGroup=null);var pivotIndex=getValueOrNull(colDef.pivotIndex,colDef.initialPivotIndex),pivot=getValueOrNull(colDef.pivot,colDef.initialPivot);null==pivotIndex&&(null==pivot||0==pivot)&&(pivotIndex=null,pivot=null);var aggFunc=getValueOrNull(colDef.aggFunc,colDef.initialAggFunc),stateItem={colId:column.getColId(),sort,sortIndex,hide,pinned,width,flex,rowGroup,rowGroupIndex,pivot,pivotIndex,aggFunc};missing(rowGroupIndex)&&rowGroup&&(stateItem.rowGroupIndex=letRowGroupIndex++),missing(pivotIndex)&&pivot&&(stateItem.pivotIndex=letPivotIndex++),columnStates.push(stateItem)}),this.applyColumnState({state:columnStates,applyOrder:!0},source)},ColumnModel2.prototype.applyColumnState=function(params,source){var _this=this;if(missingOrEmpty(this.primaryColumns))return!1;if(params&&params.state&&!params.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;var applyStates=__name(function(states,existingColumns,getById){var dispatchEventsFunc=_this.compareColumnStatesAndDispatchEvents(source);_this.autoGroupsNeedBuilding=!0;var columnsWithNoState=existingColumns.slice(),rowGroupIndexes={},pivotIndexes={},autoGroupColumnStates=[],unmatchedAndAutoStates2=[],unmatchedCount2=0,previousRowGroupCols=_this.rowGroupColumns.slice(),previousPivotCols=_this.pivotColumns.slice();states.forEach(function(state){var colId=state.colId||"";if(colId.startsWith("ag-Grid-AutoColumn"))return autoGroupColumnStates.push(state),void unmatchedAndAutoStates2.push(state);var column=getById(colId);column?(_this.syncColumnWithStateItem(column,state,params.defaultState,rowGroupIndexes,pivotIndexes,!1,source),removeFromArray(columnsWithNoState,column)):(unmatchedAndAutoStates2.push(state),unmatchedCount2+=1)});var applyDefaultsFunc=__name(function(col){return _this.syncColumnWithStateItem(col,null,params.defaultState,rowGroupIndexes,pivotIndexes,!1,source)},"applyDefaultsFunc");columnsWithNoState.forEach(applyDefaultsFunc);var comparator=__name(function(indexes,oldList,colA,colB){var indexA=indexes[colA.getId()],indexB=indexes[colB.getId()],aHasIndex=null!=indexA,bHasIndex=null!=indexB;if(aHasIndex&&bHasIndex)return indexA-indexB;if(aHasIndex)return-1;if(bHasIndex)return 1;var oldIndexA=oldList.indexOf(colA),oldIndexB=oldList.indexOf(colB),aHasOldIndex=oldIndexA>=0;return aHasOldIndex&&oldIndexB>=0?oldIndexA-oldIndexB:aHasOldIndex?-1:1},"comparator");_this.rowGroupColumns.sort(comparator.bind(_this,rowGroupIndexes,previousRowGroupCols)),_this.pivotColumns.sort(comparator.bind(_this,pivotIndexes,previousPivotCols)),_this.updateGridColumns();var autoGroupColsCopy=_this.groupAutoColumns?_this.groupAutoColumns.slice():[];return autoGroupColumnStates.forEach(function(stateItem){var autoCol=_this.getAutoColumn(stateItem.colId);removeFromArray(autoGroupColsCopy,autoCol),_this.syncColumnWithStateItem(autoCol,stateItem,params.defaultState,null,null,!0,source)}),autoGroupColsCopy.forEach(applyDefaultsFunc),_this.applyOrderAfterApplyState(params),_this.updateDisplayedColumns(source),_this.dispatchEverythingChanged(source),dispatchEventsFunc(),{unmatchedAndAutoStates:unmatchedAndAutoStates2,unmatchedCount:unmatchedCount2}},"applyStates");this.columnAnimationService.start();var _a=applyStates(params.state||[],this.primaryColumns||[],function(id){return _this.getPrimaryColumn(id)}),unmatchedAndAutoStates=_a.unmatchedAndAutoStates,unmatchedCount=_a.unmatchedCount;return(unmatchedAndAutoStates.length>0||exists(params.defaultState))&&(unmatchedCount=applyStates(unmatchedAndAutoStates,this.secondaryColumns||[],function(id){return _this.getSecondaryColumn(id)}).unmatchedCount),this.columnAnimationService.finish(),0===unmatchedCount},ColumnModel2.prototype.applyOrderAfterApplyState=function(params){var _this=this;if(params.applyOrder&&params.state){var newOrder=[],processedColIds={};params.state.forEach(function(item){if(item.colId&&!processedColIds[item.colId]){var col=_this.gridColumnsMap[item.colId];col&&(newOrder.push(col),processedColIds[item.colId]=!0)}});var autoGroupInsertIndex=0;if(this.gridColumns.forEach(function(col){var colId=col.getColId();null!=processedColIds[colId]||(colId.startsWith("ag-Grid-AutoColumn")?insertIntoArray(newOrder,col,autoGroupInsertIndex++):newOrder.push(col))}),newOrder=this.placeLockedColumns(newOrder),!this.doesMovePassMarryChildren(newOrder))return void console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");this.gridColumns=newOrder}},ColumnModel2.prototype.compareColumnStatesAndDispatchEvents=function(source){var _this=this,startState={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},columnStateBefore=this.getColumnState(),columnStateBeforeMap={};return columnStateBefore.forEach(function(col){columnStateBeforeMap[col.colId]=col}),function(){var colsForState=_this.getPrimaryAndSecondaryAndAutoColumns(),dispatchWhenListsDifferent=__name(function(eventType,colsBefore,colsAfter,idMapper){if(!areEqual(colsBefore.map(idMapper),colsAfter.map(idMapper))){var event={type:eventType,columns:colsAfter,column:1===colsAfter.length?colsAfter[0]:null,source};_this.eventService.dispatchEvent(event)}},"dispatchWhenListsDifferent"),getChangedColumns=__name(function(changedPredicate){var changedColumns=[];return colsForState.forEach(function(column){var colStateBefore=columnStateBeforeMap[column.getColId()];colStateBefore&&changedPredicate(colStateBefore,column)&&changedColumns.push(column)}),changedColumns},"getChangedColumns"),columnIdMapper=__name(function(c){return c.getColId()},"columnIdMapper");dispatchWhenListsDifferent(Events.EVENT_COLUMN_ROW_GROUP_CHANGED,startState.rowGroupColumns,_this.rowGroupColumns,columnIdMapper),dispatchWhenListsDifferent(Events.EVENT_COLUMN_PIVOT_CHANGED,startState.pivotColumns,_this.pivotColumns,columnIdMapper),getChangedColumns(__name(function(cs,c){var oldActive=null!=cs.aggFunc,activeChanged=oldActive!=c.isValueActive(),aggFuncChanged=oldActive&&cs.aggFunc!=c.getAggFunc();return activeChanged||aggFuncChanged},"valueChangePredicate")).length>0&&_this.dispatchColumnChangedEvent(Events.EVENT_COLUMN_VALUE_CHANGED,_this.valueColumns,source);var resizeChangePredicate=__name(function(cs,c){return cs.width!=c.getActualWidth()},"resizeChangePredicate");_this.dispatchColumnResizedEvent(getChangedColumns(resizeChangePredicate),!0,source);var pinnedChangePredicate=__name(function(cs,c){return cs.pinned!=c.getPinned()},"pinnedChangePredicate");_this.dispatchColumnPinnedEvent(getChangedColumns(pinnedChangePredicate),source);var visibilityChangePredicate=__name(function(cs,c){return cs.hide==c.isVisible()},"visibilityChangePredicate");_this.dispatchColumnVisibleEvent(getChangedColumns(visibilityChangePredicate),source),getChangedColumns(__name(function(cs,c){return cs.sort!=c.getSort()||cs.sortIndex!=c.getSortIndex()},"sortChangePredicate")).length>0&&_this.sortController.dispatchSortChangedEvents(source),_this.normaliseColumnMovedEventForColumnState(columnStateBefore,source)}},ColumnModel2.prototype.getCommonValue=function(cols,valueGetter){if(cols&&0!=cols.length){for(var firstValue=valueGetter(cols[0]),i=1;i<cols.length;i++)if(firstValue!==valueGetter(cols[i]))return;return firstValue}},ColumnModel2.prototype.normaliseColumnMovedEventForColumnState=function(colStateBefore,source){var _this=this,colStateAfter=this.getColumnState(),colStateAfterMapped={};colStateAfter.forEach(function(s){return colStateAfterMapped[s.colId]=s});var colsIntersectIds={};colStateBefore.forEach(function(s){colStateAfterMapped[s.colId]&&(colsIntersectIds[s.colId]=!0)});var beforeFiltered=colStateBefore.filter(function(c){return colsIntersectIds[c.colId]}),afterFiltered=colStateAfter.filter(function(c){return colsIntersectIds[c.colId]}),movedColumns=[];afterFiltered.forEach(function(csAfter,index){var csBefore=beforeFiltered&&beforeFiltered[index];if(csBefore&&csBefore.colId!==csAfter.colId){var gridCol=_this.getGridColumn(csBefore.colId);gridCol&&movedColumns.push(gridCol)}}),movedColumns.length&&this.dispatchColumnMovedEvent({movedColumns,source,finished:!0})},ColumnModel2.prototype.syncColumnWithStateItem=function(column,stateItem,defaultState,rowGroupIndexes,pivotIndexes,autoCol,source){if(column){var getValue=__name(function(key1,key2){var obj={value1:void 0,value2:void 0},calculated=!1;return stateItem&&(void 0!==stateItem[key1]&&(obj.value1=stateItem[key1],calculated=!0),exists(key2)&&void 0!==stateItem[key2]&&(obj.value2=stateItem[key2],calculated=!0)),!calculated&&defaultState&&(void 0!==defaultState[key1]&&(obj.value1=defaultState[key1]),exists(key2)&&void 0!==defaultState[key2]&&(obj.value2=defaultState[key2])),obj},"getValue"),hide=getValue("hide").value1;void 0!==hide&&column.setVisible(!hide,source);var pinned=getValue("pinned").value1;void 0!==pinned&&column.setPinned(pinned);var minColWidth=this.columnUtils.calculateColMinWidth(column.getColDef()),flex=getValue("flex").value1;if(void 0!==flex&&column.setFlex(flex),column.getFlex()<=0){var width=getValue("width").value1;null!=width&&null!=minColWidth&&width>=minColWidth&&column.setActualWidth(width,source)}var sort=getValue("sort").value1;void 0!==sort&&("desc"===sort||"asc"===sort?column.setSort(sort,source):column.setSort(void 0,source));var sortIndex=getValue("sortIndex").value1;if(void 0!==sortIndex&&column.setSortIndex(sortIndex),!autoCol&&column.isPrimary()){var aggFunc=getValue("aggFunc").value1;void 0!==aggFunc&&("string"==typeof aggFunc?(column.setAggFunc(aggFunc),column.isValueActive()||(column.setValueActive(!0,source),this.valueColumns.push(column))):(exists(aggFunc)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),column.isValueActive()&&(column.setValueActive(!1,source),removeFromArray(this.valueColumns,column))));var _a=getValue("rowGroup","rowGroupIndex"),rowGroup=_a.value1,rowGroupIndex=_a.value2;(void 0!==rowGroup||void 0!==rowGroupIndex)&&("number"==typeof rowGroupIndex||rowGroup?(column.isRowGroupActive()||(column.setRowGroupActive(!0,source),this.rowGroupColumns.push(column)),rowGroupIndexes&&"number"==typeof rowGroupIndex&&(rowGroupIndexes[column.getId()]=rowGroupIndex)):column.isRowGroupActive()&&(column.setRowGroupActive(!1,source),removeFromArray(this.rowGroupColumns,column)));var _b=getValue("pivot","pivotIndex"),pivot=_b.value1,pivotIndex=_b.value2;(void 0!==pivot||void 0!==pivotIndex)&&("number"==typeof pivotIndex||pivot?(column.isPivotActive()||(column.setPivotActive(!0,source),this.pivotColumns.push(column)),pivotIndexes&&"number"==typeof pivotIndex&&(pivotIndexes[column.getId()]=pivotIndex)):column.isPivotActive()&&(column.setPivotActive(!1,source),removeFromArray(this.pivotColumns,column)))}}},ColumnModel2.prototype.getGridColumns=function(keys2){return this.getColumns(keys2,this.getGridColumn.bind(this))},ColumnModel2.prototype.getColumns=function(keys2,columnLookupCallback){var foundColumns=[];return keys2&&keys2.forEach(function(key){var column=columnLookupCallback(key);column&&foundColumns.push(column)}),foundColumns},ColumnModel2.prototype.getColumnWithValidation=function(key){if(null==key)return null;var column=this.getGridColumn(key);return column||console.warn("AG Grid: could not find column "+key),column},ColumnModel2.prototype.getPrimaryColumn=function(key){return this.primaryColumns?this.getColumn(key,this.primaryColumns,this.primaryColumnsMap):null},ColumnModel2.prototype.getGridColumn=function(key){return this.getColumn(key,this.gridColumns,this.gridColumnsMap)},ColumnModel2.prototype.getSecondaryColumn=function(key){return this.secondaryColumns?this.getColumn(key,this.secondaryColumns,this.secondaryColumnsMap):null},ColumnModel2.prototype.getColumn=function(key,columnList,columnMap){if(!key)return null;if("string"==typeof key&&columnMap[key])return columnMap[key];for(var i=0;i<columnList.length;i++)if(this.columnsMatch(columnList[i],key))return columnList[i];return this.getAutoColumn(key)},ColumnModel2.prototype.getSourceColumnsForGroupColumn=function(groupCol){var sourceColumnId=groupCol.getColDef().showRowGroup;if(!sourceColumnId)return null;if(!0===sourceColumnId)return this.rowGroupColumns.slice(0);var column=this.getPrimaryColumn(sourceColumnId);return column?[column]:null},ColumnModel2.prototype.getAutoColumn=function(key){var _this=this;return this.groupAutoColumns&&exists(this.groupAutoColumns)&&!missing(this.groupAutoColumns)&&this.groupAutoColumns.find(function(groupCol){return _this.columnsMatch(groupCol,key)})||null},ColumnModel2.prototype.columnsMatch=function(column,key){var columnMatches=column===key,colDefMatches=column.getColDef()===key,idMatches=column.getColId()==key;return columnMatches||colDefMatches||idMatches},ColumnModel2.prototype.getDisplayNameForColumn=function(column,location,includeAggFunc){if(void 0===includeAggFunc&&(includeAggFunc=!1),!column)return null;var headerName=this.getHeaderName(column.getColDef(),column,null,null,location);return includeAggFunc?this.wrapHeaderNameWithAggFunc(column,headerName):headerName},ColumnModel2.prototype.getDisplayNameForProvidedColumnGroup=function(columnGroup,providedColumnGroup,location){var colGroupDef=providedColumnGroup?providedColumnGroup.getColGroupDef():null;return colGroupDef?this.getHeaderName(colGroupDef,null,columnGroup,providedColumnGroup,location):null},ColumnModel2.prototype.getDisplayNameForColumnGroup=function(columnGroup,location){return this.getDisplayNameForProvidedColumnGroup(columnGroup,columnGroup.getProvidedColumnGroup(),location)},ColumnModel2.prototype.getHeaderName=function(colDef,column,columnGroup,providedColumnGroup,location){var headerValueGetter=colDef.headerValueGetter;if(headerValueGetter){var params={colDef,column,columnGroup,providedColumnGroup,location,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};return"function"==typeof headerValueGetter?headerValueGetter(params):"string"==typeof headerValueGetter?this.expressionService.evaluate(headerValueGetter,params):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}return null!=colDef.headerName?colDef.headerName:colDef.field?camelCaseToHumanText(colDef.field):""},ColumnModel2.prototype.wrapHeaderNameWithAggFunc=function(column,headerName){if(this.gridOptionsService.is("suppressAggFuncInHeader"))return headerName;var aggFuncFound,pivotValueColumn=column.getColDef().pivotValueColumn,aggFunc=null;if(exists(pivotValueColumn)){var isCollapsedHeaderEnabled=this.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn")&&1===this.valueColumns.length,isTotalColumn=void 0!==column.getColDef().pivotTotalColumnIds;if(isCollapsedHeaderEnabled&&!isTotalColumn)return headerName;aggFunc=pivotValueColumn?pivotValueColumn.getAggFunc():null,aggFuncFound=!0}else{var measureActive=column.isValueActive(),aggregationPresent=this.pivotMode||!this.isRowGroupEmpty();measureActive&&aggregationPresent?(aggFunc=column.getAggFunc(),aggFuncFound=!0):aggFuncFound=!1}if(aggFuncFound){var aggFuncString="string"==typeof aggFunc?aggFunc:"func";return this.localeService.getLocaleTextFunc()(aggFuncString,aggFuncString)+"("+headerName+")"}return headerName},ColumnModel2.prototype.getColumnGroup=function(colId,partId){if(!colId)return null;if(colId instanceof ColumnGroup)return colId;var allColumnGroups=this.getAllDisplayedTrees(),checkPartId="number"==typeof partId,result=null;return this.columnUtils.depthFirstAllColumnTreeSearch(allColumnGroups,function(child){if(child instanceof ColumnGroup){var columnGroup=child;(checkPartId?colId===columnGroup.getGroupId()&&partId===columnGroup.getPartId():colId===columnGroup.getGroupId())&&(result=columnGroup)}}),result},ColumnModel2.prototype.isReady=function(){return this.ready},ColumnModel2.prototype.extractValueColumns=function(source,oldPrimaryColumns){this.valueColumns=this.extractColumns(oldPrimaryColumns,this.valueColumns,function(col,flag){return col.setValueActive(flag,source)},function(){},function(){},function(colDef){var aggFunc=colDef.aggFunc;return null===aggFunc||""===aggFunc?null:void 0!==aggFunc?!!aggFunc:void 0},function(colDef){return null!=colDef.initialAggFunc&&""!=colDef.initialAggFunc}),this.valueColumns.forEach(function(col){var colDef=col.getColDef();null!=colDef.aggFunc&&""!=colDef.aggFunc?col.setAggFunc(colDef.aggFunc):col.getAggFunc()||col.setAggFunc(colDef.initialAggFunc)})},ColumnModel2.prototype.extractRowGroupColumns=function(source,oldPrimaryColumns){this.rowGroupColumns=this.extractColumns(oldPrimaryColumns,this.rowGroupColumns,function(col,flag){return col.setRowGroupActive(flag,source)},function(colDef){return colDef.rowGroupIndex},function(colDef){return colDef.initialRowGroupIndex},function(colDef){return colDef.rowGroup},function(colDef){return colDef.initialRowGroup})},ColumnModel2.prototype.extractColumns=function(oldPrimaryColumns,previousCols,setFlagFunc,getIndexFunc,getInitialIndexFunc,getValueFunc,getInitialValueFunc){void 0===oldPrimaryColumns&&(oldPrimaryColumns=[]),void 0===previousCols&&(previousCols=[]);var colsWithIndex=[],colsWithValue=[];(this.primaryColumns||[]).forEach(function(col){var colIsNew=oldPrimaryColumns.indexOf(col)<0,colDef=col.getColDef(),value=attrToBoolean(getValueFunc(colDef)),initialValue=attrToBoolean(getInitialValueFunc(colDef)),index=attrToNumber(getIndexFunc(colDef)),initialIndex=attrToNumber(getInitialIndexFunc(colDef));(void 0!==value?value:void 0!==index?null!==index&&index>=0:colIsNew?void 0!==initialValue?initialValue:!!(void 0!==initialIndex)&&(null!=initialIndex&&initialIndex>=0):previousCols.indexOf(col)>=0)&&((colIsNew?null!=index||null!=initialIndex:null!=index)?colsWithIndex.push(col):colsWithValue.push(col))});var getIndexForCol=__name(function(col){var index=getIndexFunc(col.getColDef()),defaultIndex=getInitialIndexFunc(col.getColDef());return index??defaultIndex},"getIndexForCol");colsWithIndex.sort(function(colA,colB){var indexA=getIndexForCol(colA),indexB=getIndexForCol(colB);return indexA===indexB?0:indexA<indexB?-1:1});var res=[].concat(colsWithIndex);return previousCols.forEach(function(col){colsWithValue.indexOf(col)>=0&&res.push(col)}),colsWithValue.forEach(function(col){res.indexOf(col)<0&&res.push(col)}),previousCols.forEach(function(col){res.indexOf(col)<0&&setFlagFunc(col,!1)}),res.forEach(function(col){previousCols.indexOf(col)<0&&setFlagFunc(col,!0)}),res},ColumnModel2.prototype.extractPivotColumns=function(source,oldPrimaryColumns){this.pivotColumns=this.extractColumns(oldPrimaryColumns,this.pivotColumns,function(col,flag){return col.setPivotActive(flag,source)},function(colDef){return colDef.pivotIndex},function(colDef){return colDef.initialPivotIndex},function(colDef){return colDef.pivot},function(colDef){return colDef.initialPivot})},ColumnModel2.prototype.resetColumnGroupState=function(source){void 0===source&&(source="api");var stateItems=[];this.columnUtils.depthFirstOriginalTreeSearch(null,this.primaryColumnTree,function(child){if(child instanceof ProvidedColumnGroup){var colGroupDef=child.getColGroupDef(),groupState={groupId:child.getGroupId(),open:colGroupDef?colGroupDef.openByDefault:void 0};stateItems.push(groupState)}}),this.setColumnGroupState(stateItems,source)},ColumnModel2.prototype.getColumnGroupState=function(){var columnGroupState=[];return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(node){node instanceof ProvidedColumnGroup&&columnGroupState.push({groupId:node.getGroupId(),open:node.isExpanded()})}),columnGroupState},ColumnModel2.prototype.setColumnGroupState=function(stateItems,source){var _this=this;void 0===source&&(source="api"),this.columnAnimationService.start();var impactedGroups=[];stateItems.forEach(function(stateItem){var groupKey=stateItem.groupId,newValue=stateItem.open,providedColumnGroup=_this.getProvidedColumnGroup(groupKey);providedColumnGroup&&providedColumnGroup.isExpanded()!==newValue&&(_this.logger.log("columnGroupOpened("+providedColumnGroup.getGroupId()+","+newValue+")"),providedColumnGroup.setExpanded(newValue),impactedGroups.push(providedColumnGroup))}),this.updateGroupsAndDisplayedColumns(source),this.setFirstRightAndLastLeftPinned(source),impactedGroups.forEach(function(providedColumnGroup){var event={type:Events.EVENT_COLUMN_GROUP_OPENED,columnGroup:providedColumnGroup};_this.eventService.dispatchEvent(event)}),this.columnAnimationService.finish()},ColumnModel2.prototype.setColumnGroupOpened=function(key,newValue,source){var keyAsString;void 0===source&&(source="api"),keyAsString=key instanceof ProvidedColumnGroup?key.getId():key||"",this.setColumnGroupState([{groupId:keyAsString,open:newValue}],source)},ColumnModel2.prototype.getProvidedColumnGroup=function(key){"string"!=typeof key&&console.error("AG Grid: group key must be a string");var res=null;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(node){node instanceof ProvidedColumnGroup&&node.getId()===key&&(res=node)}),res},ColumnModel2.prototype.calculateColumnsForDisplay=function(){var _this=this;return this.pivotMode&&missing(this.secondaryColumns)?this.gridColumns.filter(function(column){var isAutoGroupCol=_this.groupAutoColumns&&includes(_this.groupAutoColumns,column),isValueCol=_this.valueColumns&&includes(_this.valueColumns,column);return isAutoGroupCol||isValueCol}):this.gridColumns.filter(function(column){return _this.groupAutoColumns&&includes(_this.groupAutoColumns,column)||column.isVisible()})},ColumnModel2.prototype.checkColSpanActiveInCols=function(columns){var result=!1;return columns.forEach(function(col){exists(col.getColDef().colSpan)&&(result=!0)}),result},ColumnModel2.prototype.calculateColumnsForGroupDisplay=function(){var _this=this;this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};var checkFunc=__name(function(col){var colDef=col.getColDef(),underlyingColumn=colDef.showRowGroup;colDef&&exists(underlyingColumn)&&(_this.groupDisplayColumns.push(col),"string"==typeof underlyingColumn?_this.groupDisplayColumnsMap[underlyingColumn]=col:!0===underlyingColumn&&_this.getRowGroupColumns().forEach(function(rowGroupCol){_this.groupDisplayColumnsMap[rowGroupCol.getId()]=col}))},"checkFunc");this.gridColumns.forEach(checkFunc),this.groupAutoColumns&&this.groupAutoColumns.forEach(checkFunc)},ColumnModel2.prototype.getGroupDisplayColumns=function(){return this.groupDisplayColumns},ColumnModel2.prototype.getGroupDisplayColumnForGroup=function(rowGroupColumnId){return this.groupDisplayColumnsMap[rowGroupColumnId]},ColumnModel2.prototype.updateDisplayedColumns=function(source){var columnsForDisplay=this.calculateColumnsForDisplay();this.buildDisplayedTrees(columnsForDisplay),this.calculateColumnsForGroupDisplay(),this.updateGroupsAndDisplayedColumns(source),this.setFirstRightAndLastLeftPinned(source)},ColumnModel2.prototype.isSecondaryColumnsPresent=function(){return exists(this.secondaryColumns)},ColumnModel2.prototype.setSecondaryColumns=function(colDefs,source){var _this=this;void 0===source&&(source="api");var newColsPresent=colDefs&&colDefs.length>0;if(newColsPresent||!missing(this.secondaryColumns)){if(newColsPresent){this.processSecondaryColumnDefinitions(colDefs);var balancedTreeResult=this.columnFactory.createColumnTree(colDefs,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0);this.destroyOldColumns(this.secondaryBalancedTree,balancedTreeResult.columnTree),this.secondaryBalancedTree=balancedTreeResult.columnTree,this.secondaryHeaderRowCount=balancedTreeResult.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(function(col){return _this.secondaryColumnsMap[col.getId()]=col}),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(source)}},ColumnModel2.prototype.processSecondaryColumnDefinitions=function(colDefs){var columnCallback=this.gridOptionsService.get("processPivotResultColDef")||this.gridOptionsService.get("processSecondaryColDef"),groupCallback=this.gridOptionsService.get("processPivotResultColGroupDef")||this.gridOptionsService.get("processSecondaryColGroupDef");if(columnCallback||groupCallback){var searchForColDefs=__name(function(colDefs2){colDefs2.forEach(function(abstractColDef){if(exists(abstractColDef.children)){var colGroupDef=abstractColDef;groupCallback&&groupCallback(colGroupDef),searchForColDefs(colGroupDef.children)}else{columnCallback&&columnCallback(abstractColDef)}})},"searchForColDefs");colDefs&&searchForColDefs(colDefs)}},ColumnModel2.prototype.updateGridColumns=function(){var _this=this,prevGridCols=this.gridBalancedTree;this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns;var sortOrderToRecover=void 0;if(this.secondaryColumns&&this.secondaryBalancedTree){var hasSameColumns=this.secondaryColumns.every(function(col){return void 0!==_this.gridColumnsMap[col.getColId()]});this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,hasSameColumns&&(sortOrderToRecover=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,sortOrderToRecover=this.lastPrimaryOrder);if(this.createGroupAutoColumnsIfNeeded()&&sortOrderToRecover){var groupAutoColsMap_1=convertToMap(this.groupAutoColumns.map(function(col){return[col,!0]}));sortOrderToRecover=sortOrderToRecover.filter(function(col){return!groupAutoColsMap_1.has(col)}),sortOrderToRecover=__spread$i(this.groupAutoColumns,sortOrderToRecover)}if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(sortOrderToRecover),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(function(col){return _this.gridColumnsMap[col.getId()]=col}),this.setAutoHeightActive(),!areEqual(prevGridCols,this.gridBalancedTree)){var event_4={type:Events.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(event_4)}},ColumnModel2.prototype.setAutoHeightActive=function(){if(this.autoHeightActive=this.gridColumns.filter(function(col){return col.isAutoHeight()}).length>0,this.autoHeightActive){this.autoHeightActiveAtLeastOnce=!0;var rowModelType=this.rowModel.getType();if(!("clientSide"===rowModelType||"serverSide"===rowModelType)){doOnce(function(){return console.warn("AG Grid - autoHeight columns only work with Client Side Row Model and Server Side Row Model.")},"autoHeightActive.wrongRowModel")}}},ColumnModel2.prototype.orderGridColsLike=function(colsOrder){if(!missing(colsOrder)){var lastOrderMapped=convertToMap(colsOrder.map(function(col,index){return[col,index]})),noColsFound=!0;if(this.gridColumns.forEach(function(col){lastOrderMapped.has(col)&&(noColsFound=!1)}),!noColsFound){var gridColsMap=convertToMap(this.gridColumns.map(function(col){return[col,!0]})),oldColsOrdered=colsOrder.filter(function(col){return gridColsMap.has(col)}),oldColsMap=convertToMap(oldColsOrdered.map(function(col){return[col,!0]})),newColsOrdered=this.gridColumns.filter(function(col){return!oldColsMap.has(col)}),newGridColumns=oldColsOrdered.slice();newColsOrdered.forEach(function(newCol){var parent=newCol.getOriginalParent();if(parent){for(var siblings=[];!siblings.length&&parent;){parent.getLeafColumns().forEach(function(leafCol){var presentInNewGriColumns=newGridColumns.indexOf(leafCol)>=0,noYetInSiblings=siblings.indexOf(leafCol)<0;presentInNewGriColumns&&noYetInSiblings&&siblings.push(leafCol)}),parent=parent.getOriginalParent()}if(siblings.length){var indexes=siblings.map(function(col){return newGridColumns.indexOf(col)}),lastIndex=Math.max.apply(Math,__spread$i(indexes));insertIntoArray(newGridColumns,newCol,lastIndex+1)}else newGridColumns.push(newCol)}else newGridColumns.push(newCol)}),this.gridColumns=newGridColumns}}},ColumnModel2.prototype.isPrimaryColumnGroupsPresent=function(){return this.primaryHeaderRowCount>1},ColumnModel2.prototype.refreshQuickFilterColumns=function(){var _a,columnsForQuickFilter;this.groupAutoColumns?columnsForQuickFilter=(null!==(_a=this.primaryColumns)&&void 0!==_a?_a:[]).concat(this.groupAutoColumns):this.primaryColumns&&(columnsForQuickFilter=this.primaryColumns),columnsForQuickFilter=columnsForQuickFilter??[],this.columnsForQuickFilter=this.gridOptionsService.is("excludeHiddenColumnsFromQuickFilter")?columnsForQuickFilter.filter(function(col){return col.isVisible()}):columnsForQuickFilter},ColumnModel2.prototype.placeLockedColumns=function(cols){var left=[],normal=[],right=[];return cols.forEach(function(col){var position=col.getColDef().lockPosition;"right"===position?right.push(col):"left"===position||!0===position?left.push(col):normal.push(col)}),__spread$i(left,normal,right)},ColumnModel2.prototype.addAutoGroupToGridColumns=function(){if(missing(this.groupAutoColumns))return this.destroyOldColumns(this.groupAutoColsBalancedTree),void(this.groupAutoColsBalancedTree=null);this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;var newAutoColsTree=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,newAutoColsTree),this.groupAutoColsBalancedTree=newAutoColsTree,this.gridBalancedTree=newAutoColsTree.concat(this.gridBalancedTree)},ColumnModel2.prototype.clearDisplayedAndViewportColumns=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""},ColumnModel2.prototype.updateGroupsAndDisplayedColumns=function(source){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(source),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();var event={type:Events.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(event)},ColumnModel2.prototype.deriveDisplayedColumns=function(source){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinDisplayedColumns(),this.setLeftValues(source),this.displayedAutoHeightCols=this.displayedColumns.filter(function(col){return col.isAutoHeight()})},ColumnModel2.prototype.isAutoRowHeightActive=function(){return this.autoHeightActive},ColumnModel2.prototype.wasAutoRowHeightEverActive=function(){return this.autoHeightActiveAtLeastOnce},ColumnModel2.prototype.joinDisplayedColumns=function(){this.gridOptionsService.is("enableRtl")?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)},ColumnModel2.prototype.setLeftValues=function(source){this.setLeftValuesOfColumns(source),this.setLeftValuesOfGroups()},ColumnModel2.prototype.setLeftValuesOfColumns=function(source){var _this=this;if(this.primaryColumns){var allColumns=this.primaryColumns.slice(0),doingRtl=this.gridOptionsService.is("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(function(columns){if(doingRtl){var left_1=_this.getWidthOfColsInList(columns);columns.forEach(function(column){left_1-=column.getActualWidth(),column.setLeft(left_1,source)})}else{var left_2=0;columns.forEach(function(column){column.setLeft(left_2,source),left_2+=column.getActualWidth()})}removeAllFromArray(allColumns,columns)}),allColumns.forEach(function(column){column.setLeft(null,source)})}},ColumnModel2.prototype.setLeftValuesOfGroups=function(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(function(columns){columns.forEach(function(column){column instanceof ColumnGroup&&column.checkLeft()})})},ColumnModel2.prototype.derivedDisplayedColumnsFromDisplayedTree=function(tree,columns){columns.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(tree,function(child){child instanceof Column&&columns.push(child)})},ColumnModel2.prototype.extractViewportColumns=function(){this.suppressColumnVirtualisation?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)},ColumnModel2.prototype.getVirtualHeaderGroupRow=function(type,dept){var result;switch(type){case"left":result=this.viewportRowLeft[dept];break;case"right":result=this.viewportRowRight[dept];break;default:result=this.viewportRowCenter[dept]}return missing(result)&&(result=[]),result},ColumnModel2.prototype.calculateHeaderRows=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};var virtualColIds={};this.headerViewportColumns.forEach(function(col){return virtualColIds[col.getId()]=!0});var testGroup=__name(function(children,result,dept){for(var returnValue=!1,i=0;i<children.length;i++){var child=children[i],addThisItem=!1;if(child instanceof Column)addThisItem=!0===virtualColIds[child.getId()];else{var displayedChildren=child.getDisplayedChildren();displayedChildren&&(addThisItem=testGroup(displayedChildren,result,dept+1))}addThisItem&&(returnValue=!0,result[dept]||(result[dept]=[]),result[dept].push(child))}return returnValue},"testGroup");testGroup(this.displayedTreeLeft,this.viewportRowLeft,0),testGroup(this.displayedTreeRight,this.viewportRowRight,0),testGroup(this.displayedTreeCentre,this.viewportRowCenter,0)},ColumnModel2.prototype.extractViewport=function(){var hashColumn=__name(function(c){return c.getId()+"-"+(c.getPinned()||"normal")},"hashColumn");this.extractViewportColumns();var newHash=this.viewportColumns.map(hashColumn).join("#"),changed=this.viewportColumnsHash!==newHash;return changed&&(this.viewportColumnsHash=newHash,this.calculateHeaderRows()),changed},ColumnModel2.prototype.refreshFlexedColumns=function(params){var _this=this;void 0===params&&(params={});var source=params.source?params.source:"flex";if(null!=params.viewportWidth&&(this.flexViewportWidth=params.viewportWidth),!this.flexViewportWidth)return[];var flexAfterDisplayIndex=-1;params.resizingCols&&params.resizingCols.forEach(function(col2){var indexOfCol=_this.displayedColumnsCenter.indexOf(col2);flexAfterDisplayIndex<indexOfCol&&(flexAfterDisplayIndex=indexOfCol)});var isColFlex=__name(function(col2){var afterResizingCols=_this.displayedColumnsCenter.indexOf(col2)>flexAfterDisplayIndex;return col2.getFlex()&&afterResizingCols},"isColFlex"),knownWidthColumns=this.displayedColumnsCenter.filter(function(col2){return!isColFlex(col2)}),flexingColumns=this.displayedColumnsCenter.filter(function(col2){return isColFlex(col2)}),changedColumns=[];if(!flexingColumns.length)return[];var spaceForFlexingColumns,flexingColumnSizes=[];outer:for(;;){var totalFlex=flexingColumns.reduce(function(count,col2){return count+col2.getFlex()},0);spaceForFlexingColumns=this.flexViewportWidth-this.getWidthOfColsInList(knownWidthColumns);for(var i=0;i<flexingColumns.length;i++){var col=flexingColumns[i],widthByFlexRule=spaceForFlexingColumns*col.getFlex()/totalFlex,constrainedWidth=0,minWidth=col.getMinWidth(),maxWidth=col.getMaxWidth();if(exists(minWidth)&&widthByFlexRule<minWidth?constrainedWidth=minWidth:exists(maxWidth)&&widthByFlexRule>maxWidth&&(constrainedWidth=maxWidth),constrainedWidth){col.setActualWidth(constrainedWidth,source),removeFromArray(flexingColumns,col),changedColumns.push(col),knownWidthColumns.push(col);continue outer}flexingColumnSizes[i]=Math.round(widthByFlexRule)}break}var remainingSpace=spaceForFlexingColumns;return flexingColumns.forEach(function(col2,i2){col2.setActualWidth(Math.min(flexingColumnSizes[i2],remainingSpace),source),changedColumns.push(col2),remainingSpace-=flexingColumnSizes[i2]}),params.skipSetLeft||this.setLeftValues(source),params.updateBodyWidths&&this.updateBodyWidths(),params.fireResizedEvent&&this.dispatchColumnResizedEvent(changedColumns,!0,source,flexingColumns),this.flexColsCalculatedAtLestOnce||(this.gridOptionsService.isRowModelType("clientSide")&&this.rowModel.resetRowHeights(),this.flexColsCalculatedAtLestOnce=!0),flexingColumns},ColumnModel2.prototype.sizeColumnsToFit=function(gridWidth,source,silent,params){var _a,_b,_c,_d,_e;void 0===source&&(source="sizeColumnsToFit");var limitsMap={};params&&(null===(_a=null==params?void 0:params.columnLimits)||void 0===_a||_a.forEach(function(_a2){var key=_a2.key,dimensions=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}(_a2,["key"]);limitsMap["string"==typeof key?key:key.getColId()]=dimensions}));var allDisplayedColumns=this.getAllDisplayedColumns(),doColumnsAlreadyFit=gridWidth===this.getWidthOfColsInList(allDisplayedColumns);if(!(gridWidth<=0||!allDisplayedColumns.length||doColumnsAlreadyFit)){var colsToSpread=[],colsToNotSpread=[];allDisplayedColumns.forEach(function(column2){!0===column2.getColDef().suppressSizeToFit?colsToNotSpread.push(column2):colsToSpread.push(column2)});var colsToDispatchEventFor=colsToSpread.slice(0),finishedResizing=!1,moveToNotSpread=__name(function(column2){removeFromArray(colsToSpread,column2),colsToNotSpread.push(column2)},"moveToNotSpread");for(colsToSpread.forEach(function(column2){return column2.resetActualWidth(source)});!finishedResizing;){finishedResizing=!0;var availablePixels=gridWidth-this.getWidthOfColsInList(colsToNotSpread);if(availablePixels<=0)colsToSpread.forEach(function(column2){var _a2,_b2,widthOverride2=null!==(_b2=null===(_a2=null==limitsMap?void 0:limitsMap[column2.getId()])||void 0===_a2?void 0:_a2.minWidth)&&void 0!==_b2?_b2:null==params?void 0:params.defaultMinWidth;"number"!=typeof widthOverride2?column2.setMinimum(source):column2.setActualWidth(widthOverride2)});else for(var scale=availablePixels/this.getWidthOfColsInList(colsToSpread),pixelsForLastCol=availablePixels,i=colsToSpread.length-1;i>=0;i--){var column=colsToSpread[i],widthOverride=null==limitsMap?void 0:limitsMap[column.getId()],minOverride=null!==(_b=null==widthOverride?void 0:widthOverride.minWidth)&&void 0!==_b?_b:null==params?void 0:params.defaultMinWidth,maxOverride=null!==(_c=null==widthOverride?void 0:widthOverride.maxWidth)&&void 0!==_c?_c:null==params?void 0:params.defaultMaxWidth,colMinWidth=null!==(_d=column.getMinWidth())&&void 0!==_d?_d:0,colMaxWidth=null!==(_e=column.getMaxWidth())&&void 0!==_e?_e:Number.MAX_VALUE,minWidth="number"==typeof minOverride&&minOverride>colMinWidth?minOverride:column.getMinWidth(),maxWidth="number"==typeof maxOverride&&maxOverride<colMaxWidth?maxOverride:column.getMaxWidth(),newWidth=Math.round(column.getActualWidth()*scale);exists(minWidth)&&newWidth<minWidth?(newWidth=minWidth,moveToNotSpread(column),finishedResizing=!1):exists(maxWidth)&&newWidth>maxWidth?(newWidth=maxWidth,moveToNotSpread(column),finishedResizing=!1):0===i&&(newWidth=pixelsForLastCol),column.setActualWidth(newWidth,source,!0),pixelsForLastCol-=newWidth}}colsToDispatchEventFor.forEach(function(col){col.fireColumnWidthChangedEvent(source)}),this.setLeftValues(source),this.updateBodyWidths(),!silent&&this.dispatchColumnResizedEvent(colsToDispatchEventFor,!0,source)}},ColumnModel2.prototype.buildDisplayedTrees=function(visibleColumns){var leftVisibleColumns=[],rightVisibleColumns=[],centerVisibleColumns=[];visibleColumns.forEach(function(column){switch(column.getPinned()){case"left":leftVisibleColumns.push(column);break;case"right":rightVisibleColumns.push(column);break;default:centerVisibleColumns.push(column)}});var groupInstanceIdCreator=new GroupInstanceIdCreator;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(leftVisibleColumns,this.gridBalancedTree,groupInstanceIdCreator,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(rightVisibleColumns,this.gridBalancedTree,groupInstanceIdCreator,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(centerVisibleColumns,this.gridBalancedTree,groupInstanceIdCreator,null,this.displayedTreeCentre),this.updateDisplayedMap()},ColumnModel2.prototype.updateDisplayedMap=function(){var _this=this;this.displayedColumnsAndGroupsMap={};var func=__name(function(child){_this.displayedColumnsAndGroupsMap[child.getUniqueId()]=child},"func");this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre,func),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft,func),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight,func)},ColumnModel2.prototype.isDisplayed=function(item){return this.displayedColumnsAndGroupsMap[item.getUniqueId()]===item},ColumnModel2.prototype.updateOpenClosedVisibilityInColumnGroups=function(){var allColumnGroups=this.getAllDisplayedTrees();this.columnUtils.depthFirstAllColumnTreeSearch(allColumnGroups,function(child){child instanceof ColumnGroup&&child.calculateDisplayedColumns()})},ColumnModel2.prototype.getGroupAutoColumns=function(){return this.groupAutoColumns},ColumnModel2.prototype.createGroupAutoColumnsIfNeeded=function(){if(!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;var groupFullWidthRow=this.gridOptionsService.isGroupUseEntireRow(this.pivotMode),suppressAutoColumn=this.pivotMode?this.gridOptionsService.is("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn();if((this.rowGroupColumns.length>0||this.usingTreeData)&&!suppressAutoColumn&&!groupFullWidthRow){var existingCols=this.groupAutoColumns||[],newAutoGroupCols=this.autoGroupColService.createAutoGroupColumns(existingCols,this.rowGroupColumns);if(!this.autoColsEqual(newAutoGroupCols,this.groupAutoColumns)||this.forceRecreateAutoGroups)return this.groupAutoColumns=newAutoGroupCols,!0}else this.groupAutoColumns=null;return!1},ColumnModel2.prototype.isGroupSuppressAutoColumn=function(){var groupDisplayType=this.gridOptionsService.get("groupDisplayType");if(!!groupDisplayType&&matchesGroupDisplayType("custom",groupDisplayType))return!0;var treeDataDisplayType=this.gridOptionsService.get("treeDataDisplayType");return!!treeDataDisplayType&&matchesTreeDataDisplayType("custom",treeDataDisplayType)},ColumnModel2.prototype.autoColsEqual=function(colsA,colsB){return areEqual(colsA,colsB,function(a,b){return a.getColId()===b.getColId()})},ColumnModel2.prototype.getWidthOfColsInList=function(columnList){return columnList.reduce(function(width,col){return width+col.getActualWidth()},0)},ColumnModel2.prototype.getGridBalancedTree=function(){return this.gridBalancedTree},ColumnModel2.prototype.hasFloatingFilters=function(){return!!this.gridColumns&&this.gridColumns.some(function(col){return col.getColDef().floatingFilter})},ColumnModel2.prototype.getFirstDisplayedColumn=function(){var isRtl=this.gridOptionsService.is("enableRtl"),queryOrder=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];isRtl&&queryOrder.reverse();for(var i=0;i<queryOrder.length;i++){var container=this[queryOrder[i]]();if(container.length)return isRtl?last(container):container[0]}return null},ColumnModel2.prototype.setColumnHeaderHeight=function(col,height){if(col.setAutoHeaderHeight(height)){var event_5={type:Events.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:col,columns:[col],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(event_5)}},ColumnModel2.prototype.getColumnGroupHeaderRowHeight=function(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()},ColumnModel2.prototype.getColumnHeaderRowHeight=function(){var defaultHeight=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),displayedHeights=this.getAllDisplayedColumns().filter(function(col){return col.isAutoHeaderHeight()}).map(function(col){return col.getAutoHeaderHeight()||0});return Math.max.apply(Math,__spread$i([defaultHeight],displayedHeights))},ColumnModel2.prototype.getHeaderHeight=function(){var _a;return null!==(_a=this.gridOptionsService.getNum("headerHeight"))&&void 0!==_a?_a:this.environment.getFromTheme(25,"headerHeight")},ColumnModel2.prototype.getFloatingFiltersHeight=function(){var _a;return null!==(_a=this.gridOptionsService.getNum("floatingFiltersHeight"))&&void 0!==_a?_a:this.getHeaderHeight()},ColumnModel2.prototype.getGroupHeaderHeight=function(){var _a;return null!==(_a=this.gridOptionsService.getNum("groupHeaderHeight"))&&void 0!==_a?_a:this.getHeaderHeight()},ColumnModel2.prototype.getPivotHeaderHeight=function(){var _a;return null!==(_a=this.gridOptionsService.getNum("pivotHeaderHeight"))&&void 0!==_a?_a:this.getHeaderHeight()},ColumnModel2.prototype.getPivotGroupHeaderHeight=function(){var _a;return null!==(_a=this.gridOptionsService.getNum("pivotGroupHeaderHeight"))&&void 0!==_a?_a:this.getGroupHeaderHeight()},__decorate$2u([Autowired("expressionService")],ColumnModel2.prototype,"expressionService",void 0),__decorate$2u([Autowired("columnFactory")],ColumnModel2.prototype,"columnFactory",void 0),__decorate$2u([Autowired("displayedGroupCreator")],ColumnModel2.prototype,"displayedGroupCreator",void 0),__decorate$2u([Autowired("ctrlsService")],ColumnModel2.prototype,"ctrlsService",void 0),__decorate$2u([Autowired("autoWidthCalculator")],ColumnModel2.prototype,"autoWidthCalculator",void 0),__decorate$2u([Autowired("columnUtils")],ColumnModel2.prototype,"columnUtils",void 0),__decorate$2u([Autowired("columnAnimationService")],ColumnModel2.prototype,"columnAnimationService",void 0),__decorate$2u([Autowired("autoGroupColService")],ColumnModel2.prototype,"autoGroupColService",void 0),__decorate$2u([Optional("aggFuncService")],ColumnModel2.prototype,"aggFuncService",void 0),__decorate$2u([Optional("valueCache")],ColumnModel2.prototype,"valueCache",void 0),__decorate$2u([Optional("animationFrameService")],ColumnModel2.prototype,"animationFrameService",void 0),__decorate$2u([Autowired("rowModel")],ColumnModel2.prototype,"rowModel",void 0),__decorate$2u([Autowired("sortController")],ColumnModel2.prototype,"sortController",void 0),__decorate$2u([Autowired("columnDefFactory")],ColumnModel2.prototype,"columnDefFactory",void 0),__decorate$2u([PostConstruct],ColumnModel2.prototype,"init",null),__decorate$2u([PreDestroy],ColumnModel2.prototype,"destroyColumns",null),__decorate$2u([(paramIndex=0,decorator=Qualifier("loggerFactory"),function(target,key){decorator(target,key,paramIndex)})],ColumnModel2.prototype,"setBeans",null),ColumnModel2=__decorate$2u([Bean("columnModel")],ColumnModel2);var paramIndex,decorator}(BeanStub),__extends$2P=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),ColumnUtils=function(_super){function ColumnUtils2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2P(ColumnUtils2,_super),__name(ColumnUtils2,"ColumnUtils"),ColumnUtils2.prototype.calculateColMinWidth=function(colDef){return null!=colDef.minWidth?colDef.minWidth:this.environment.getMinColWidth()},ColumnUtils2.prototype.calculateColMaxWidth=function(colDef){return null!=colDef.maxWidth?colDef.maxWidth:Number.MAX_SAFE_INTEGER},ColumnUtils2.prototype.calculateColInitialWidth=function(colDef){var width,minColWidth=this.calculateColMinWidth(colDef),maxColWidth=this.calculateColMaxWidth(colDef),colDefWidth=attrToNumber(colDef.width),colDefInitialWidth=attrToNumber(colDef.initialWidth);return width=null!=colDefWidth?colDefWidth:null!=colDefInitialWidth?colDefInitialWidth:200,Math.max(Math.min(width,maxColWidth),minColWidth)},ColumnUtils2.prototype.getOriginalPathForColumn=function(column,originalBalancedTree){var result=[],found=!1,recursePath=__name(function(balancedColumnTree,dept){for(var i=0;i<balancedColumnTree.length;i++){if(found)return;var node=balancedColumnTree[i];if(node instanceof ProvidedColumnGroup)recursePath(node.getChildren(),dept+1),result[dept]=node;else node===column&&(found=!0)}},"recursePath");return recursePath(originalBalancedTree,0),found?result:null},ColumnUtils2.prototype.depthFirstOriginalTreeSearch=function(parent,tree,callback){var _this=this;tree&&tree.forEach(function(child){child instanceof ProvidedColumnGroup&&_this.depthFirstOriginalTreeSearch(child,child.getChildren(),callback),callback(child,parent)})},ColumnUtils2.prototype.depthFirstAllColumnTreeSearch=function(tree,callback){var _this=this;tree&&tree.forEach(function(child){child instanceof ColumnGroup&&_this.depthFirstAllColumnTreeSearch(child.getChildren(),callback),callback(child)})},ColumnUtils2.prototype.depthFirstDisplayedColumnTreeSearch=function(tree,callback){var _this=this;tree&&tree.forEach(function(child){child instanceof ColumnGroup&&_this.depthFirstDisplayedColumnTreeSearch(child.getDisplayedChildren(),callback),callback(child)})},ColumnUtils2=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean("columnUtils")],ColumnUtils2),ColumnUtils2}(BeanStub),__extends$2O=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),DisplayedGroupCreator=function(_super){function DisplayedGroupCreator2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2O(DisplayedGroupCreator2,_super),__name(DisplayedGroupCreator2,"DisplayedGroupCreator"),DisplayedGroupCreator2.prototype.createDisplayedGroups=function(sortedVisibleColumns,balancedColumnTree,groupInstanceIdCreator,pinned,oldDisplayedGroups){var previousRealPath,previousOriginalPath,_this=this,result=[],oldColumnsMapped=this.mapOldGroupsById(oldDisplayedGroups);return sortedVisibleColumns.forEach(function(currentColumn){for(var currentOriginalPath=_this.getOriginalPathForColumn(balancedColumnTree,currentColumn),currentRealPath=[],firstColumn=!previousOriginalPath,i=0;i<currentOriginalPath.length;i++)if(firstColumn||currentOriginalPath[i]!==previousOriginalPath[i]){var newGroup=_this.createColumnGroup(currentOriginalPath[i],groupInstanceIdCreator,oldColumnsMapped,pinned);currentRealPath[i]=newGroup,0==i?result.push(newGroup):currentRealPath[i-1].addChild(newGroup)}else currentRealPath[i]=previousRealPath[i];0===currentRealPath.length?result.push(currentColumn):last(currentRealPath).addChild(currentColumn);previousRealPath=currentRealPath,previousOriginalPath=currentOriginalPath}),this.setupParentsIntoColumns(result,null),result},DisplayedGroupCreator2.prototype.createColumnGroup=function(providedGroup,groupInstanceIdCreator,oldColumnsMapped,pinned){var groupId=providedGroup.getGroupId(),instanceId=groupInstanceIdCreator.getInstanceIdForKey(groupId),columnGroup=oldColumnsMapped[ColumnGroup.createUniqueId(groupId,instanceId)];return columnGroup&&columnGroup.getProvidedColumnGroup()!==providedGroup&&(columnGroup=null),exists(columnGroup)?columnGroup.reset():(columnGroup=new ColumnGroup(providedGroup,groupId,instanceId,pinned),this.context.createBean(columnGroup)),columnGroup},DisplayedGroupCreator2.prototype.mapOldGroupsById=function(displayedGroups){var result={},recursive=__name(function(columnsOrGroups){columnsOrGroups.forEach(function(columnOrGroup){if(columnOrGroup instanceof ColumnGroup){var columnGroup=columnOrGroup;result[columnOrGroup.getUniqueId()]=columnGroup,recursive(columnGroup.getChildren())}})},"recursive");return displayedGroups&&recursive(displayedGroups),result},DisplayedGroupCreator2.prototype.setupParentsIntoColumns=function(columnsOrGroups,parent){var _this=this;columnsOrGroups.forEach(function(columnsOrGroup){if(columnsOrGroup.setParent(parent),columnsOrGroup instanceof ColumnGroup){var columnGroup=columnsOrGroup;_this.setupParentsIntoColumns(columnGroup.getChildren(),columnGroup)}})},DisplayedGroupCreator2.prototype.getOriginalPathForColumn=function(balancedColumnTree,column){var result=[],found=!1,recursePath=__name(function(columnTree,dept){for(var i=0;i<columnTree.length;i++){if(found)return;var node=columnTree[i];node instanceof ProvidedColumnGroup?(recursePath(node.getChildren(),dept+1),result[dept]=node):node===column&&(found=!0)}},"recursePath");return recursePath(balancedColumnTree,0),found?result:(console.warn("AG Grid: could not get path"),null)},DisplayedGroupCreator2=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean("displayedGroupCreator")],DisplayedGroupCreator2),DisplayedGroupCreator2}(BeanStub),__extends$2N=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgStackComponentsRegistry=function(_super){function AgStackComponentsRegistry2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.componentsMappedByName={},_this}return __extends$2N(AgStackComponentsRegistry2,_super),__name(AgStackComponentsRegistry2,"AgStackComponentsRegistry"),AgStackComponentsRegistry2.prototype.setupComponents=function(components){var _this=this;components&&components.forEach(function(componentMeta){return _this.addComponent(componentMeta)})},AgStackComponentsRegistry2.prototype.addComponent=function(componentMeta){var classUpperCase=componentMeta.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[classUpperCase]=componentMeta.componentClass},AgStackComponentsRegistry2.prototype.getComponentClass=function(htmlTag){return this.componentsMappedByName[htmlTag]},AgStackComponentsRegistry2=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean("agStackComponentsRegistry")],AgStackComponentsRegistry2),AgStackComponentsRegistry2}(BeanStub);function setAriaAttribute(element,attribute,value){element.setAttribute(ariaAttributeName(attribute),value.toString())}function removeAriaAttribute(element,attribute){element.removeAttribute(ariaAttributeName(attribute))}function ariaAttributeName(attribute){return"aria-"+attribute}function setAriaRole(element,role){role?element.setAttribute("role",role):element.removeAttribute("role")}function getAriaSortState(sortDirection){return"asc"===sortDirection?"ascending":"desc"===sortDirection?"descending":"mixed"===sortDirection?"other":"none"}function getAriaLevel(element){return parseInt(element.getAttribute("aria-level"),10)}function getAriaPosInSet(element){return parseInt(element.getAttribute("aria-posinset"),10)}function getAriaDescribedBy(element){return element.getAttribute("aria-describedby")||""}function setAriaLabel(element,label){null!=label&&""!==label?setAriaAttribute(element,"label",label):removeAriaAttribute(element,"label")}function setAriaLabelledBy(element,labelledBy){var key="labelledby";labelledBy?setAriaAttribute(element,key,labelledBy):removeAriaAttribute(element,key)}function setAriaDescription(element,description){var key="description";description?setAriaAttribute(element,key,description):removeAriaAttribute(element,key)}function setAriaDescribedBy(element,describedby){var key="describedby";describedby?setAriaAttribute(element,key,describedby):removeAriaAttribute(element,key)}function setAriaLevel(element,level){setAriaAttribute(element,"level",level)}function setAriaDisabled(element,disabled){setAriaAttribute(element,"disabled",disabled)}function setAriaHidden(element,hidden){hidden?setAriaAttribute(element,"hidden",!0):removeAriaAttribute(element,"hidden")}function setAriaExpanded(element,expanded){setAriaAttribute(element,"expanded",expanded)}function removeAriaExpanded(element){removeAriaAttribute(element,"expanded")}function setAriaSetSize(element,setsize){setAriaAttribute(element,"setsize",setsize)}function setAriaPosInSet(element,position){setAriaAttribute(element,"posinset",position)}function setAriaMultiSelectable(element,multiSelectable){setAriaAttribute(element,"multiselectable",multiSelectable)}function setAriaRowCount(element,rowCount){setAriaAttribute(element,"rowcount",rowCount)}function setAriaRowIndex(element,rowIndex){setAriaAttribute(element,"rowindex",rowIndex)}function setAriaColCount(element,colCount){setAriaAttribute(element,"colcount",colCount)}function setAriaColIndex(element,colIndex){setAriaAttribute(element,"colindex",colIndex)}function setAriaColSpan(element,colSpan){setAriaAttribute(element,"colspan",colSpan)}function setAriaSort(element,sort){setAriaAttribute(element,"sort",sort)}function removeAriaSort(element){removeAriaAttribute(element,"sort")}function setAriaSelected(element,selected){selected?setAriaAttribute(element,"selected",selected):removeAriaAttribute(element,"selected")}function setAriaChecked(element,checked){setAriaAttribute(element,"checked",void 0===checked?"mixed":checked)}__name(setAriaAttribute,"setAriaAttribute"),__name(removeAriaAttribute,"removeAriaAttribute"),__name(ariaAttributeName,"ariaAttributeName"),__name(setAriaRole,"setAriaRole"),__name(getAriaSortState,"getAriaSortState"),__name(getAriaLevel,"getAriaLevel"),__name(getAriaPosInSet,"getAriaPosInSet"),__name(getAriaDescribedBy,"getAriaDescribedBy"),__name(setAriaLabel,"setAriaLabel"),__name(setAriaLabelledBy,"setAriaLabelledBy"),__name(setAriaDescription,"setAriaDescription"),__name(setAriaDescribedBy,"setAriaDescribedBy"),__name(setAriaLevel,"setAriaLevel"),__name(setAriaDisabled,"setAriaDisabled"),__name(setAriaHidden,"setAriaHidden"),__name(setAriaExpanded,"setAriaExpanded"),__name(removeAriaExpanded,"removeAriaExpanded"),__name(setAriaSetSize,"setAriaSetSize"),__name(setAriaPosInSet,"setAriaPosInSet"),__name(setAriaMultiSelectable,"setAriaMultiSelectable"),__name(setAriaRowCount,"setAriaRowCount"),__name(setAriaRowIndex,"setAriaRowIndex"),__name(setAriaColCount,"setAriaColCount"),__name(setAriaColIndex,"setAriaColIndex"),__name(setAriaColSpan,"setAriaColSpan"),__name(setAriaSort,"setAriaSort"),__name(removeAriaSort,"removeAriaSort"),__name(setAriaSelected,"setAriaSelected"),__name(setAriaChecked,"setAriaChecked");var isSafari,safariVersion,isChrome,isFirefox,isMacOs,isIOS,invisibleScrollbar,browserScrollbarWidth,AriaUtils=Object.freeze({__proto__:null,setAriaRole,getAriaSortState,getAriaLevel,getAriaPosInSet,getAriaDescribedBy,setAriaLabel,setAriaLabelledBy,setAriaDescription,setAriaDescribedBy,setAriaLevel,setAriaDisabled,setAriaHidden,setAriaExpanded,removeAriaExpanded,setAriaSetSize,setAriaPosInSet,setAriaMultiSelectable,setAriaRowCount,setAriaRowIndex,setAriaColCount,setAriaColIndex,setAriaColSpan,setAriaSort,removeAriaSort,setAriaSelected,setAriaChecked});function isBrowserSafari(){return void 0===isSafari&&(isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),isSafari}function getSafariVersion(){if(void 0===safariVersion)if(isBrowserSafari()){var versionMatch=navigator.userAgent.match(/version\/(\d+)/i);versionMatch&&(safariVersion=null!=versionMatch[1]?parseFloat(versionMatch[1]):0)}else safariVersion=0;return safariVersion}function isBrowserChrome(){if(void 0===isChrome){var win=window;isChrome=!!win.chrome&&(!!win.chrome.webstore||!!win.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return isChrome}function isBrowserFirefox(){return void 0===isFirefox&&(isFirefox=/(firefox)/i.test(navigator.userAgent)),isFirefox}function isMacOsUserAgent(){return void 0===isMacOs&&(isMacOs=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),isMacOs}function isIOSUserAgent(){return void 0===isIOS&&(isIOS=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),isIOS}function browserSupportsPreventScroll(){return!isBrowserSafari()||getSafariVersion()>=15}function getTabIndex(el){if(!el)return null;var numberTabIndex=el.tabIndex,tabIndex=el.getAttribute("tabIndex");return-1!==numberTabIndex||null!==tabIndex&&(""!==tabIndex||isBrowserFirefox())?numberTabIndex.toString():null}function getMaxDivHeight(){if(!document.body)return-1;var res=1e6,testUpTo=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,div=document.createElement("div");for(document.body.appendChild(div);;){var test=2*res;if(div.style.height=test+"px",test>testUpTo||div.clientHeight!==test)break;res=test}return document.body.removeChild(div),res}function getBodyWidth(){var _a,_b,_c;return null!==(_b=null===(_a=document.body)||void 0===_a?void 0:_a.clientWidth)&&void 0!==_b?_b:window.innerHeight||(null===(_c=document.documentElement)||void 0===_c?void 0:_c.clientWidth)||-1}function getBodyHeight(){var _a,_b,_c;return null!==(_b=null===(_a=document.body)||void 0===_a?void 0:_a.clientHeight)&&void 0!==_b?_b:window.innerHeight||(null===(_c=document.documentElement)||void 0===_c?void 0:_c.clientHeight)||-1}function getScrollbarWidth(){return null==browserScrollbarWidth&&initScrollbarWidthAndVisibility(),browserScrollbarWidth}function initScrollbarWidthAndVisibility(){var body=document.body,div=document.createElement("div");div.style.width=div.style.height="100px",div.style.opacity="0",div.style.overflow="scroll",div.style.msOverflowStyle="scrollbar",div.style.position="absolute",body.appendChild(div);var width=div.offsetWidth-div.clientWidth;0===width&&0===div.clientWidth&&(width=null),div.parentNode&&div.parentNode.removeChild(div),null!=width&&(browserScrollbarWidth=width,invisibleScrollbar=0===width)}function isInvisibleScrollbar(){return null==invisibleScrollbar&&initScrollbarWidthAndVisibility(),invisibleScrollbar}__name(isBrowserSafari,"isBrowserSafari"),__name(getSafariVersion,"getSafariVersion"),__name(isBrowserChrome,"isBrowserChrome"),__name(isBrowserFirefox,"isBrowserFirefox"),__name(isMacOsUserAgent,"isMacOsUserAgent"),__name(isIOSUserAgent,"isIOSUserAgent"),__name(browserSupportsPreventScroll,"browserSupportsPreventScroll"),__name(getTabIndex,"getTabIndex"),__name(getMaxDivHeight,"getMaxDivHeight"),__name(getBodyWidth,"getBodyWidth"),__name(getBodyHeight,"getBodyHeight"),__name(getScrollbarWidth,"getScrollbarWidth"),__name(initScrollbarWidthAndVisibility,"initScrollbarWidthAndVisibility"),__name(isInvisibleScrollbar,"isInvisibleScrollbar");var BrowserUtils=Object.freeze({__proto__:null,isBrowserSafari,getSafariVersion,isBrowserChrome,isBrowserFirefox,isMacOsUserAgent,isIOSUserAgent,browserSupportsPreventScroll,getTabIndex,getMaxDivHeight,getBodyWidth,getBodyHeight,getScrollbarWidth,isInvisibleScrollbar});function padStartWidthZeros(value,totalStringSize){return value.toString().padStart(totalStringSize,"0")}function createArrayOfNumbers(first,last2){for(var result=[],i=first;i<=last2;i++)result.push(i);return result}function cleanNumber(value){return"string"==typeof value&&(value=parseInt(value,10)),"number"==typeof value?Math.floor(value):null}function decToHex(number,bytes){for(var hex="",i=0;i<bytes;i++)hex+=String.fromCharCode(255&number),number>>>=8;return hex}function formatNumberTwoDecimalPlacesAndCommas(value,thousandSeparator,decimalSeparator){return"number"!=typeof value?"":formatNumberCommas(Math.round(100*value)/100,thousandSeparator,decimalSeparator)}function formatNumberCommas(value,thousandSeparator,decimalSeparator){return"number"!=typeof value?"":value.toString().replace(".",decimalSeparator).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+thousandSeparator)}function sum(values2){return null==values2?null:values2.reduce(function(total,value){return total+value},0)}function zeroOrGreater(value,defaultValue){return value>=0?value:defaultValue}function oneOrGreater(value,defaultValue){var valueNumber=parseInt(value,10);return!isNaN(valueNumber)&&isFinite(valueNumber)&&valueNumber>0?valueNumber:defaultValue}__name(padStartWidthZeros,"padStartWidthZeros"),__name(createArrayOfNumbers,"createArrayOfNumbers"),__name(cleanNumber,"cleanNumber"),__name(decToHex,"decToHex"),__name(formatNumberTwoDecimalPlacesAndCommas,"formatNumberTwoDecimalPlacesAndCommas"),__name(formatNumberCommas,"formatNumberCommas"),__name(sum,"sum"),__name(zeroOrGreater,"zeroOrGreater"),__name(oneOrGreater,"oneOrGreater");var NumberUtils=Object.freeze({__proto__:null,padStartWidthZeros,createArrayOfNumbers,cleanNumber,decToHex,formatNumberTwoDecimalPlacesAndCommas,formatNumberCommas,sum,zeroOrGreater,oneOrGreater}),__read$m=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};function serialiseDate(date,includeTime,separator){if(void 0===includeTime&&(includeTime=!0),void 0===separator&&(separator="-"),!date)return null;var serialised=[date.getFullYear(),date.getMonth()+1,date.getDate()].map(function(part){return padStartWidthZeros(part,2)}).join(separator);return includeTime&&(serialised+=" "+[date.getHours(),date.getMinutes(),date.getSeconds()].map(function(part){return padStartWidthZeros(part,2)}).join(":")),serialised}__name(serialiseDate,"serialiseDate");var calculateOrdinal=__name(function(value){if(value>3&&value<21)return"th";switch(value%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"},"calculateOrdinal");function dateToFormattedString(date,format){void 0===format&&(format="YYYY-MM-DD");var fullYear=padStartWidthZeros(date.getFullYear(),4),months=["January","February","March","April","May","June","July","August","September","October","November","December"],days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],replace={YYYY:function(){return fullYear.slice(fullYear.length-4,fullYear.length)},YY:function(){return fullYear.slice(fullYear.length-2,fullYear.length)},Y:function(){return""+date.getFullYear()},MMMM:function(){return months[date.getMonth()]},MMM:function(){return months[date.getMonth()].slice(0,3)},MM:function(){return padStartWidthZeros(date.getMonth()+1,2)},Mo:function(){return""+(date.getMonth()+1)+calculateOrdinal(date.getMonth()+1)},M:function(){return""+(date.getMonth()+1)},Do:function(){return""+date.getDate()+calculateOrdinal(date.getDate())},DD:function(){return padStartWidthZeros(date.getDate(),2)},D:function(){return""+date.getDate()},dddd:function(){return days[date.getDay()]},ddd:function(){return days[date.getDay()].slice(0,3)},dd:function(){return days[date.getDay()].slice(0,2)},do:function(){return""+date.getDay()+calculateOrdinal(date.getDay())},d:function(){return""+date.getDay()}},regexp=new RegExp(Object.keys(replace).join("|"),"g");return format.replace(regexp,function(match){return match in replace?replace[match]():match})}function parseDateTimeFromString(value){if(!value)return null;var _a=__read$m(value.split(" "),2),dateStr=_a[0],timeStr=_a[1];if(!dateStr)return null;var fields=dateStr.split("-").map(function(f){return parseInt(f,10)});if(3!==fields.filter(function(f){return!isNaN(f)}).length)return null;var _b=__read$m(fields,3),year=_b[0],month=_b[1],day=_b[2],date=new Date(year,month-1,day);if(date.getFullYear()!==year||date.getMonth()!==month-1||date.getDate()!==day)return null;if(!timeStr||"00:00:00"===timeStr)return date;var _c=__read$m(timeStr.split(":").map(function(part){return parseInt(part,10)}),3),hours=_c[0],minutes=_c[1],seconds=_c[2];return hours>=0&&hours<24&&date.setHours(hours),minutes>=0&&minutes<60&&date.setMinutes(minutes),seconds>=0&&seconds<60&&date.setSeconds(seconds),date}__name(dateToFormattedString,"dateToFormattedString"),__name(parseDateTimeFromString,"parseDateTimeFromString");var rtlNegativeScroll,DateUtils=Object.freeze({__proto__:null,serialiseDate,dateToFormattedString,parseDateTimeFromString}),__values$4=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$l=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};function radioCssClass(element,elementClass,otherElementClass){for(var parent=element.parentElement,sibling=parent&&parent.firstChild;sibling;)elementClass&&sibling.classList.toggle(elementClass,sibling===element),otherElementClass&&sibling.classList.toggle(otherElementClass,sibling!==element),sibling=sibling.nextSibling}__name(radioCssClass,"radioCssClass");var FOCUSABLE_EXCLUDE=".ag-hidden, .ag-hidden *, [disabled], .ag-disabled, .ag-disabled *";function isFocusableFormField(element){var matches=Element.prototype.matches||Element.prototype.msMatchesSelector,isFocusable=matches.call(element,"input, select, button, textarea"),isNotFocusable=matches.call(element,FOCUSABLE_EXCLUDE),isElementVisible=isVisible(element);return isFocusable&&!isNotFocusable&&isElementVisible}function setDisplayed(element,displayed,options){void 0===options&&(options={});var skipAriaHidden=options.skipAriaHidden;element.classList.toggle("ag-hidden",!displayed),skipAriaHidden||setAriaHidden(element,!displayed)}function setVisible(element,visible,options){void 0===options&&(options={});var skipAriaHidden=options.skipAriaHidden;element.classList.toggle("ag-invisible",!visible),skipAriaHidden||setAriaHidden(element,!visible)}function setDisabled(element,disabled){var addOrRemoveDisabledAttribute=disabled?function(e){return e.setAttribute("disabled","")}:function(e){return e.removeAttribute("disabled")};addOrRemoveDisabledAttribute(element),nodeListForEach(element.querySelectorAll("input"),function(input){return addOrRemoveDisabledAttribute(input)})}function isElementChildOfClass(element,cls,maxNest){for(var counter=0;element;){if(element.classList.contains(cls))return!0;if(element=element.parentElement,"number"==typeof maxNest){if(++counter>maxNest)break}else if(element===maxNest)break}return!1}function getElementSize(el){var _a=window.getComputedStyle(el),height=_a.height,width=_a.width,paddingTop=_a.paddingTop,paddingRight=_a.paddingRight,paddingBottom=_a.paddingBottom,paddingLeft=_a.paddingLeft,marginTop=_a.marginTop,marginRight=_a.marginRight,marginBottom=_a.marginBottom,marginLeft=_a.marginLeft,boxSizing=_a.boxSizing;return{height:parseFloat(height),width:parseFloat(width),paddingTop:parseFloat(paddingTop),paddingRight:parseFloat(paddingRight),paddingBottom:parseFloat(paddingBottom),paddingLeft:parseFloat(paddingLeft),marginTop:parseFloat(marginTop),marginRight:parseFloat(marginRight),marginBottom:parseFloat(marginBottom),marginLeft:parseFloat(marginLeft),boxSizing}}function getInnerHeight(el){var size=getElementSize(el);return"border-box"===size.boxSizing?size.height-size.paddingTop-size.paddingBottom:size.height}function getInnerWidth(el){var size=getElementSize(el);return"border-box"===size.boxSizing?size.width-size.paddingLeft-size.paddingRight:size.width}function getAbsoluteHeight(el){var size=getElementSize(el),marginRight=size.marginBottom+size.marginTop;return Math.ceil(el.offsetHeight+marginRight)}function getAbsoluteWidth(el){var size=getElementSize(el),marginWidth=size.marginLeft+size.marginRight;return Math.ceil(el.offsetWidth+marginWidth)}function isRtlNegativeScroll(){if("boolean"==typeof rtlNegativeScroll)return rtlNegativeScroll;var template=document.createElement("div");return template.style.direction="rtl",template.style.width="1px",template.style.height="1px",template.style.position="fixed",template.style.top="0px",template.style.overflow="hidden",template.dir="rtl",template.innerHTML='<div style="width: 2px">\n            <span style="display: inline-block; width: 1px"></span>\n            <span style="display: inline-block; width: 1px"></span>\n        </div>',document.body.appendChild(template),template.scrollLeft=1,rtlNegativeScroll=0===Math.floor(template.scrollLeft),document.body.removeChild(template),rtlNegativeScroll}function getScrollLeft(element,rtl){var scrollLeft=element.scrollLeft;return rtl&&(scrollLeft=Math.abs(scrollLeft),isBrowserChrome()&&!isRtlNegativeScroll()&&(scrollLeft=element.scrollWidth-element.clientWidth-scrollLeft)),scrollLeft}function setScrollLeft(element,value,rtl){rtl&&(isRtlNegativeScroll()?value*=-1:(isBrowserSafari()||isBrowserChrome())&&(value=element.scrollWidth-element.clientWidth-value)),element.scrollLeft=value}function clearElement(el){for(;el&&el.firstChild;)el.removeChild(el.firstChild)}function removeElement(parent,cssSelector){removeFromParent(parent.querySelector(cssSelector))}function removeFromParent(node){node&&node.parentNode&&node.parentNode.removeChild(node)}function isVisible(element){return null!==element.offsetParent}function loadTemplate(template){var tempDiv=document.createElement("div");return tempDiv.innerHTML=(template||"").trim(),tempDiv.firstChild}function appendHtml(eContainer,htmlTemplate){eContainer.lastChild?eContainer.insertAdjacentHTML("afterbegin",htmlTemplate):eContainer.innerHTML=htmlTemplate}function getElementAttribute(element,attributeName){return element.attributes&&element.attributes[attributeName]?element.attributes[attributeName].value:null}function offsetHeight(element){return element&&element.clientHeight?element.clientHeight:0}function offsetWidth(element){return element&&element.clientWidth?element.clientWidth:0}function ensureDomOrder(eContainer,eChild,eChildBefore){if(!eChildBefore||eChildBefore.nextSibling!==eChild){var focusedEl=document.activeElement,eChildHasFocus=eChild.contains(focusedEl);eChildBefore?eChildBefore.nextSibling?eContainer.insertBefore(eChild,eChildBefore.nextSibling):eContainer.appendChild(eChild):eContainer.firstChild&&eContainer.firstChild!==eChild&&eContainer.insertAdjacentElement("afterbegin",eChild),eChildHasFocus&&focusedEl&&browserSupportsPreventScroll()&&focusedEl.focus({preventScroll:!0})}}function setDomChildOrder(eContainer,orderedChildren){for(var i=0;i<orderedChildren.length;i++){var correctCellAtIndex=orderedChildren[i],actualCellAtIndex=eContainer.children[i];actualCellAtIndex!==correctCellAtIndex&&eContainer.insertBefore(correctCellAtIndex,actualCellAtIndex)}}function insertWithDomOrder(eContainer,eToInsert,eChildBefore){eChildBefore?eChildBefore.insertAdjacentElement("afterend",eToInsert):eContainer.firstChild?eContainer.insertAdjacentElement("afterbegin",eToInsert):eContainer.appendChild(eToInsert)}function prependDC(parent,documentFragment){exists(parent.firstChild)?parent.insertBefore(documentFragment,parent.firstChild):parent.appendChild(documentFragment)}function addStylesToElement(eElement,styles){var e_1,_a;if(styles)try{for(var _b=__values$4(Object.entries(styles)),_c=_b.next();!_c.done;_c=_b.next()){var _d=__read$l(_c.value,2),key=_d[0],value=_d[1];if(key&&key.length&&null!=value){var parsedKey=key.replace(/[A-Z]/g,function(s){return"-"+s.toLocaleLowerCase()}),valueAsString=value.toString(),priority=valueAsString.replace(/\s*!important/g,"").length!=valueAsString.length?"important":void 0;eElement.style.setProperty(parsedKey,value,priority)}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}}function isHorizontalScrollShowing(element){return element.clientWidth<element.scrollWidth}function isVerticalScrollShowing(element){return element.clientHeight<element.scrollHeight}function setElementWidth(element,width){"flex"===width?(element.style.removeProperty("width"),element.style.removeProperty("minWidth"),element.style.removeProperty("maxWidth"),element.style.flex="1 1 auto"):setFixedWidth(element,width)}function setFixedWidth(element,width){width=formatSize(width),element.style.width=width.toString(),element.style.maxWidth=width.toString(),element.style.minWidth=width.toString()}function setElementHeight(element,height){"flex"===height?(element.style.removeProperty("height"),element.style.removeProperty("minHeight"),element.style.removeProperty("maxHeight"),element.style.flex="1 1 auto"):setFixedHeight(element,height)}function setFixedHeight(element,height){height=formatSize(height),element.style.height=height.toString(),element.style.maxHeight=height.toString(),element.style.minHeight=height.toString()}function formatSize(size){return"number"==typeof size?size+"px":size}function isNodeOrElement(o){return o instanceof Node||o instanceof HTMLElement}function copyNodeList(nodeList){if(null==nodeList)return[];var result=[];return nodeListForEach(nodeList,function(node){return result.push(node)}),result}function iterateNamedNodeMap(map,callback){if(map)for(var i=0;i<map.length;i++){var attr=map[i];callback(attr.name,attr.value)}}function addOrRemoveAttribute(element,name,value){null==value?element.removeAttribute(name):element.setAttribute(name,value.toString())}function nodeListForEach(nodeList,action){if(null!=nodeList)for(var i=0;i<nodeList.length;i++)action(nodeList[i])}__name(isFocusableFormField,"isFocusableFormField"),__name(setDisplayed,"setDisplayed"),__name(setVisible,"setVisible"),__name(setDisabled,"setDisabled"),__name(isElementChildOfClass,"isElementChildOfClass"),__name(getElementSize,"getElementSize"),__name(getInnerHeight,"getInnerHeight"),__name(getInnerWidth,"getInnerWidth"),__name(getAbsoluteHeight,"getAbsoluteHeight"),__name(getAbsoluteWidth,"getAbsoluteWidth"),__name(isRtlNegativeScroll,"isRtlNegativeScroll"),__name(getScrollLeft,"getScrollLeft"),__name(setScrollLeft,"setScrollLeft"),__name(clearElement,"clearElement"),__name(removeElement,"removeElement"),__name(removeFromParent,"removeFromParent"),__name(isVisible,"isVisible"),__name(loadTemplate,"loadTemplate"),__name(appendHtml,"appendHtml"),__name(getElementAttribute,"getElementAttribute"),__name(offsetHeight,"offsetHeight"),__name(offsetWidth,"offsetWidth"),__name(ensureDomOrder,"ensureDomOrder"),__name(setDomChildOrder,"setDomChildOrder"),__name(insertWithDomOrder,"insertWithDomOrder"),__name(prependDC,"prependDC"),__name(addStylesToElement,"addStylesToElement"),__name(isHorizontalScrollShowing,"isHorizontalScrollShowing"),__name(isVerticalScrollShowing,"isVerticalScrollShowing"),__name(setElementWidth,"setElementWidth"),__name(setFixedWidth,"setFixedWidth"),__name(setElementHeight,"setElementHeight"),__name(setFixedHeight,"setFixedHeight"),__name(formatSize,"formatSize"),__name(isNodeOrElement,"isNodeOrElement"),__name(copyNodeList,"copyNodeList"),__name(iterateNamedNodeMap,"iterateNamedNodeMap"),__name(addOrRemoveAttribute,"addOrRemoveAttribute"),__name(nodeListForEach,"nodeListForEach");var DomUtils=Object.freeze({__proto__:null,radioCssClass,FOCUSABLE_SELECTOR:"[tabindex], input, select, button, textarea, [href]",FOCUSABLE_EXCLUDE,isFocusableFormField,setDisplayed,setVisible,setDisabled,isElementChildOfClass,getElementSize,getInnerHeight,getInnerWidth,getAbsoluteHeight,getAbsoluteWidth,isRtlNegativeScroll,getScrollLeft,setScrollLeft,clearElement,removeElement,removeFromParent,isVisible,loadTemplate,appendHtml,getElementAttribute,offsetHeight,offsetWidth,ensureDomOrder,setDomChildOrder,insertWithDomOrder,prependDC,addStylesToElement,isHorizontalScrollShowing,isVerticalScrollShowing,setElementWidth,setFixedWidth,setElementHeight,setFixedHeight,formatSize,isNodeOrElement,copyNodeList,iterateNamedNodeMap,addOrRemoveAttribute,nodeListForEach}),iconNameClassMap={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"};function createIcon(iconName,gridOptionsService,column){var iconContents=createIconNoSpan(iconName,gridOptionsService,column);if(iconContents&&iconContents.className.indexOf("ag-icon")>-1)return iconContents;var eResult=document.createElement("span");return eResult.appendChild(iconContents),eResult}function createIconNoSpan(iconName,gridOptionsService,column,forceCreate){var userProvidedIcon=null,icons=column&&column.getColDef().icons;if(icons&&(userProvidedIcon=icons[iconName]),gridOptionsService&&!userProvidedIcon){var optionsIcons=gridOptionsService.get("icons");optionsIcons&&(userProvidedIcon=optionsIcons[iconName])}if(!userProvidedIcon){var span=document.createElement("span"),cssClass=iconNameClassMap[iconName];return cssClass||(forceCreate?cssClass=iconName:(console.warn("AG Grid: Did not find icon "+iconName),cssClass="")),span.setAttribute("class","ag-icon ag-icon-"+cssClass),span.setAttribute("unselectable","on"),setAriaRole(span,"presentation"),span}var rendererResult=void 0;if("function"==typeof userProvidedIcon)rendererResult=userProvidedIcon();else{if("string"!=typeof userProvidedIcon)throw new Error("icon from grid options needs to be a string or a function");rendererResult=userProvidedIcon}return"string"==typeof rendererResult?loadTemplate(rendererResult):isNodeOrElement(rendererResult)?rendererResult:void console.warn("AG Grid: iconRenderer should return back a string or a dom object")}__name(createIcon,"createIcon"),__name(createIconNoSpan,"createIconNoSpan");var IconUtils=Object.freeze({__proto__:null,iconNameClassMap,createIcon,createIconNoSpan}),KeyCode=function(){function KeyCode2(){}return __name(KeyCode2,"KeyCode"),KeyCode2.BACKSPACE="Backspace",KeyCode2.TAB="Tab",KeyCode2.ENTER="Enter",KeyCode2.ESCAPE="Escape",KeyCode2.SPACE=" ",KeyCode2.LEFT="ArrowLeft",KeyCode2.UP="ArrowUp",KeyCode2.RIGHT="ArrowRight",KeyCode2.DOWN="ArrowDown",KeyCode2.DELETE="Delete",KeyCode2.F2="F2",KeyCode2.PAGE_UP="PageUp",KeyCode2.PAGE_DOWN="PageDown",KeyCode2.PAGE_HOME="Home",KeyCode2.PAGE_END="End",KeyCode2.A="KeyA",KeyCode2.C="KeyC",KeyCode2.D="KeyD",KeyCode2.V="KeyV",KeyCode2.X="KeyX",KeyCode2.Y="KeyY",KeyCode2.Z="KeyZ",KeyCode2}(),A_KEYCODE=65,C_KEYCODE=67,V_KEYCODE=86,D_KEYCODE=68,Z_KEYCODE=90,Y_KEYCODE=89;function isEventFromPrintableCharacter(event){return!(event.altKey||event.ctrlKey||event.metaKey)&&1===event.key.length}function isUserSuppressingKeyboardEvent(gridOptionsService,keyboardEvent,rowNode,column,editing){var colDefFunc=column?column.getColDef().suppressKeyboardEvent:void 0;if(!colDefFunc)return!1;var params={event:keyboardEvent,editing,column,api:gridOptionsService.api,node:rowNode,data:rowNode.data,colDef:column.getColDef(),context:gridOptionsService.context,columnApi:gridOptionsService.columnApi};if(colDefFunc&&colDefFunc(params))return!0;return!1}function isUserSuppressingHeaderKeyboardEvent(gridOptionsService,keyboardEvent,headerRowIndex,column){var colDef=column.getDefinition(),colDefFunc=colDef&&colDef.suppressHeaderKeyboardEvent;return!!exists(colDefFunc)&&!!colDefFunc({api:gridOptionsService.api,columnApi:gridOptionsService.columnApi,context:gridOptionsService.context,colDef,column,headerRowIndex,event:keyboardEvent})}function normaliseQwertyAzerty(keyboardEvent){var code;switch(keyboardEvent.keyCode){case A_KEYCODE:code=KeyCode.A;break;case C_KEYCODE:code=KeyCode.C;break;case V_KEYCODE:code=KeyCode.V;break;case D_KEYCODE:code=KeyCode.D;break;case Z_KEYCODE:code=KeyCode.Z;break;case Y_KEYCODE:code=KeyCode.Y;break;default:code=keyboardEvent.code}return code}function isDeleteKey(key,alwaysReturnFalseOnBackspace){return void 0===alwaysReturnFalseOnBackspace&&(alwaysReturnFalseOnBackspace=!1),key===KeyCode.DELETE||!alwaysReturnFalseOnBackspace&&key===KeyCode.BACKSPACE&&isMacOsUserAgent()}__name(isEventFromPrintableCharacter,"isEventFromPrintableCharacter"),__name(isUserSuppressingKeyboardEvent,"isUserSuppressingKeyboardEvent"),__name(isUserSuppressingHeaderKeyboardEvent,"isUserSuppressingHeaderKeyboardEvent"),__name(normaliseQwertyAzerty,"normaliseQwertyAzerty"),__name(isDeleteKey,"isDeleteKey");var KeyboardUtils=Object.freeze({__proto__:null,isEventFromPrintableCharacter,isUserSuppressingKeyboardEvent,isUserSuppressingHeaderKeyboardEvent,normaliseQwertyAzerty,isDeleteKey});function areEventsNear(e1,e2,pixelCount){if(0===pixelCount)return!1;var diffX=Math.abs(e1.clientX-e2.clientX),diffY=Math.abs(e1.clientY-e2.clientY);return Math.max(diffX,diffY)<=pixelCount}__name(areEventsNear,"areEventsNear");var MouseUtils=Object.freeze({__proto__:null,areEventsNear});function sortRowNodesByOrder(rowNodes,rowNodeOrder){if(!rowNodes)return!1;for(var comparator=__name(function(nodeA,nodeB){var positionA=rowNodeOrder[nodeA.id],positionB=rowNodeOrder[nodeB.id],aHasIndex=void 0!==positionA,bHasIndex=void 0!==positionB;return aHasIndex&&bHasIndex?positionA-positionB:!aHasIndex&&!bHasIndex?nodeA.__objectId-nodeB.__objectId:aHasIndex?1:-1},"comparator"),atLeastOneOutOfOrder=!1,i=0;i<rowNodes.length-1;i++)if(comparator(rowNodes[i],rowNodes[i+1])>0){atLeastOneOutOfOrder=!0;break}return!!atLeastOneOutOfOrder&&(rowNodes.sort(comparator),!0)}function traverseNodesWithKey(nodes,callback){var keyParts=[];function recursiveSearchNodes(currentNodes){currentNodes&&currentNodes.forEach(function(node){if(node.group||node.hasChildren()){keyParts.push(node.key);var key=keyParts.join("|");callback(node,key),recursiveSearchNodes(node.childrenAfterGroup),keyParts.pop()}})}recursiveSearchNodes(nodes),__name(recursiveSearchNodes,"recursiveSearchNodes")}__name(sortRowNodesByOrder,"sortRowNodesByOrder"),__name(traverseNodesWithKey,"traverseNodesWithKey");var RowNodeUtils=Object.freeze({__proto__:null,sortRowNodesByOrder,traverseNodesWithKey});function convertToSet(list){var set2=new Set;return list.forEach(function(x){return set2.add(x)}),set2}__name(convertToSet,"convertToSet");var AgPromiseStatus,AgPromiseStatus2,SetUtils=Object.freeze({__proto__:null,convertToSet}),__assign$j=function(){return __assign$j=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$j.apply(this,arguments)},_=__assign$j(__assign$j(__assign$j(__assign$j(__assign$j(__assign$j(__assign$j(__assign$j(__assign$j(__assign$j(__assign$j(__assign$j(__assign$j(__assign$j(__assign$j(__assign$j(__assign$j(__assign$j({},AriaUtils),ArrayUtils),BrowserUtils),DateUtils),DomUtils),EventUtils),FunctionUtils),FuzzyMatchUtils),GenericUtils),IconUtils),KeyboardUtils),MapUtils),MouseUtils),NumberUtils),ObjectUtils),RowNodeUtils),SetUtils),StringUtils),NumberSequence=function(){function NumberSequence2(initValue,step){void 0===initValue&&(initValue=0),void 0===step&&(step=1),this.nextValue=initValue,this.step=step}return __name(NumberSequence2,"NumberSequence"),NumberSequence2.prototype.next=function(){var valToReturn=this.nextValue;return this.nextValue+=this.step,valToReturn},NumberSequence2.prototype.peek=function(){return this.nextValue},NumberSequence2.prototype.skip=function(count){this.nextValue+=count},NumberSequence2}();(AgPromiseStatus2=AgPromiseStatus||(AgPromiseStatus={}))[AgPromiseStatus2.IN_PROGRESS=0]="IN_PROGRESS",AgPromiseStatus2[AgPromiseStatus2.RESOLVED=1]="RESOLVED";var TooltipStates,TooltipStates2,AgPromise=function(){function AgPromise2(callback){var _this=this;this.status=AgPromiseStatus.IN_PROGRESS,this.resolution=null,this.waiters=[],callback(function(value){return _this.onDone(value)},function(params){return _this.onReject(params)})}return __name(AgPromise2,"AgPromise"),AgPromise2.all=function(promises){return new AgPromise2(function(resolve){var remainingToResolve=promises.length,combinedValues=new Array(remainingToResolve);promises.forEach(function(promise,index){promise.then(function(value){combinedValues[index]=value,0===--remainingToResolve&&resolve(combinedValues)})})})},AgPromise2.resolve=function(value){return void 0===value&&(value=null),new AgPromise2(function(resolve){return resolve(value)})},AgPromise2.prototype.then=function(func){var _this=this;return new AgPromise2(function(resolve){_this.status===AgPromiseStatus.RESOLVED?resolve(func(_this.resolution)):_this.waiters.push(function(value){return resolve(func(value))})})},AgPromise2.prototype.resolveNow=function(ifNotResolvedValue,ifResolved){return this.status===AgPromiseStatus.RESOLVED?ifResolved(this.resolution):ifNotResolvedValue},AgPromise2.prototype.onDone=function(value){this.status=AgPromiseStatus.RESOLVED,this.resolution=value,this.waiters.forEach(function(waiter){return waiter(value)})},AgPromise2.prototype.onReject=function(params){console.warn("TBI")},AgPromise2}(),__extends$2M=(function(){function Timer2(){this.timestamp=(new Date).getTime()}__name(Timer2,"Timer"),Timer2.prototype.print=function(msg){var duration=(new Date).getTime()-this.timestamp;console.info(msg+" = "+duration),this.timestamp=(new Date).getTime()}}(),function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}()),__assign$i=function(){return __assign$i=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$i.apply(this,arguments)},__decorate$2q=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};(TooltipStates2=TooltipStates||(TooltipStates={}))[TooltipStates2.NOTHING=0]="NOTHING",TooltipStates2[TooltipStates2.WAITING_TO_SHOW=1]="WAITING_TO_SHOW",TooltipStates2[TooltipStates2.SHOWING=2]="SHOWING";var CustomTooltipFeature=function(_super){function CustomTooltipFeature2(parentComp){var _this=_super.call(this)||this;return _this.DEFAULT_SHOW_TOOLTIP_DELAY=2e3,_this.DEFAULT_HIDE_TOOLTIP_DELAY=1e4,_this.SHOW_QUICK_TOOLTIP_DIFF=1e3,_this.FADE_OUT_TOOLTIP_TIMEOUT=1e3,_this.state=TooltipStates.NOTHING,_this.tooltipInstanceCount=0,_this.tooltipMouseTrack=!1,_this.parentComp=parentComp,_this}return __extends$2M(CustomTooltipFeature2,_super),__name(CustomTooltipFeature2,"CustomTooltipFeature"),CustomTooltipFeature2.prototype.postConstruct=function(){this.tooltipShowDelay=this.getTooltipDelay("show")||this.DEFAULT_SHOW_TOOLTIP_DELAY,this.tooltipHideDelay=this.getTooltipDelay("hide")||this.DEFAULT_HIDE_TOOLTIP_DELAY,this.tooltipMouseTrack=this.gridOptionsService.is("tooltipMouseTrack");var el=this.parentComp.getGui();this.addManagedListener(el,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(el,"mouseleave",this.onMouseLeave.bind(this)),this.addManagedListener(el,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(el,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(el,"keydown",this.onKeyDown.bind(this))},CustomTooltipFeature2.prototype.destroy=function(){this.setToDoNothing(),_super.prototype.destroy.call(this)},CustomTooltipFeature2.prototype.onMouseEnter=function(e){if(!isIOSUserAgent()&&this.state==TooltipStates.NOTHING){var delay=this.isLastTooltipHiddenRecently()?200:this.tooltipShowDelay;this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),delay),this.lastMouseEvent=e,this.state=TooltipStates.WAITING_TO_SHOW}},CustomTooltipFeature2.prototype.onMouseLeave=function(){this.setToDoNothing()},CustomTooltipFeature2.prototype.onKeyDown=function(){this.setToDoNothing()},CustomTooltipFeature2.prototype.setToDoNothing=function(){this.state===TooltipStates.SHOWING&&this.hideTooltip(),this.clearTimeouts(),this.state=TooltipStates.NOTHING},CustomTooltipFeature2.prototype.onMouseMove=function(e){this.lastMouseEvent=e,this.tooltipMouseTrack&&this.state===TooltipStates.SHOWING&&this.tooltipComp&&this.positionTooltipUnderLastMouseEvent()},CustomTooltipFeature2.prototype.onMouseDown=function(){this.setToDoNothing()},CustomTooltipFeature2.prototype.getTooltipDelay=function(type){var tooltipShowDelay=this.gridOptionsService.getNum("tooltipShowDelay"),tooltipHideDelay=this.gridOptionsService.getNum("tooltipHideDelay"),delay="show"===type?tooltipShowDelay:tooltipHideDelay,capitalisedType=capitalise(type);return exists(delay)?(delay<0&&doOnce(function(){return console.warn("AG Grid: tooltip"+capitalisedType+"Delay should not be lower than 0")},"tooltip"+capitalisedType+"DelayWarn"),Math.max(200,delay)):null},CustomTooltipFeature2.prototype.hideTooltip=function(){this.tooltipComp&&(this.destroyTooltipComp(),CustomTooltipFeature2.lastTooltipHideTime=(new Date).getTime()),this.state=TooltipStates.NOTHING},CustomTooltipFeature2.prototype.destroyTooltipComp=function(){var _this=this;this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");var tooltipPopupDestroyFunc=this.tooltipPopupDestroyFunc,tooltipComp=this.tooltipComp;window.setTimeout(function(){tooltipPopupDestroyFunc(),_this.getContext().destroyBean(tooltipComp)},this.FADE_OUT_TOOLTIP_TIMEOUT),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0},CustomTooltipFeature2.prototype.isLastTooltipHiddenRecently=function(){return(new Date).getTime()-CustomTooltipFeature2.lastTooltipHideTime<this.SHOW_QUICK_TOOLTIP_DIFF},CustomTooltipFeature2.prototype.showTooltip=function(){var params=__assign$i({},this.parentComp.getTooltipParams());if(exists(params.value)){this.state=TooltipStates.SHOWING,this.tooltipInstanceCount++;var callback=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(params).newAgStackInstance().then(callback)}else this.setToDoNothing()},CustomTooltipFeature2.prototype.newTooltipComponentCallback=function(tooltipInstanceCopy,tooltipComp){if(this.state!==TooltipStates.SHOWING||this.tooltipInstanceCount!==tooltipInstanceCopy)this.getContext().destroyBean(tooltipComp);else{var eGui=tooltipComp.getGui();this.tooltipComp=tooltipComp,eGui.classList.contains("ag-tooltip")||eGui.classList.add("ag-tooltip-custom");var translate=this.localeService.getLocaleTextFunc(),addPopupRes=this.popupService.addPopup({eChild:eGui,ariaLabel:translate("ariaLabelTooltip","Tooltip")});addPopupRes&&(this.tooltipPopupDestroyFunc=addPopupRes.hideFunc),this.positionTooltipUnderLastMouseEvent(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.tooltipHideDelay)}},CustomTooltipFeature2.prototype.positionTooltipUnderLastMouseEvent=function(){this.popupService.positionPopupUnderMouseEvent({type:"tooltip",mouseEvent:this.lastMouseEvent,ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack})},CustomTooltipFeature2.prototype.clearTimeouts=function(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0),this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)},__decorate$2q([Autowired("popupService")],CustomTooltipFeature2.prototype,"popupService",void 0),__decorate$2q([Autowired("userComponentFactory")],CustomTooltipFeature2.prototype,"userComponentFactory",void 0),__decorate$2q([Autowired("columnApi")],CustomTooltipFeature2.prototype,"columnApi",void 0),__decorate$2q([Autowired("gridApi")],CustomTooltipFeature2.prototype,"gridApi",void 0),__decorate$2q([PostConstruct],CustomTooltipFeature2.prototype,"postConstruct",null),CustomTooltipFeature2}(BeanStub),CssClassManager=function(){function CssClassManager2(getGui){this.cssClassStates={},this.getGui=getGui}return __name(CssClassManager2,"CssClassManager"),CssClassManager2.prototype.addCssClass=function(className){var _this=this,list=(className||"").split(" ");if(list.length>1)list.forEach(function(cls){return _this.addCssClass(cls)});else if(!0!==this.cssClassStates[className]&&className.length){var eGui=this.getGui();eGui&&eGui.classList.add(className),this.cssClassStates[className]=!0}},CssClassManager2.prototype.removeCssClass=function(className){var _this=this,list=(className||"").split(" ");if(list.length>1)list.forEach(function(cls){return _this.removeCssClass(cls)});else if(!1!==this.cssClassStates[className]&&className.length){var eGui=this.getGui();eGui&&eGui.classList.remove(className),this.cssClassStates[className]=!1}},CssClassManager2.prototype.containsCssClass=function(className){var eGui=this.getGui();return!!eGui&&eGui.classList.contains(className)},CssClassManager2.prototype.addOrRemoveCssClass=function(className,addOrRemove){var _this=this;if(className){if(className.indexOf(" ")>=0){var list=(className||"").split(" ");if(list.length>1)return void list.forEach(function(cls){return _this.addOrRemoveCssClass(cls,addOrRemove)})}if(this.cssClassStates[className]!==addOrRemove&&className.length){var eGui=this.getGui();eGui&&eGui.classList.toggle(className,addOrRemove),this.cssClassStates[className]=addOrRemove}}},CssClassManager2}(),__extends$2L=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2p=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},compIdSequence=new NumberSequence,Component=function(_super){function Component2(template){var _this=_super.call(this)||this;return _this.displayed=!0,_this.visible=!0,_this.compId=compIdSequence.next(),_this.cssClassManager=new CssClassManager(function(){return _this.eGui}),template&&_this.setTemplate(template),_this}return __extends$2L(Component2,_super),__name(Component2,"Component"),Component2.prototype.preConstructOnComponent=function(){this.usingBrowserTooltips=this.gridOptionsService.is("enableBrowserTooltips")},Component2.prototype.getCompId=function(){return this.compId},Component2.prototype.getTooltipParams=function(){return{value:this.tooltipText,location:"UNKNOWN"}},Component2.prototype.setTooltip=function(newTooltipText){var _this=this,removeTooltip=__name(function(){_this.usingBrowserTooltips?_this.getGui().removeAttribute("title"):_this.tooltipFeature=_this.destroyBean(_this.tooltipFeature)},"removeTooltip"),addTooltip=__name(function(){_this.usingBrowserTooltips?_this.getGui().setAttribute("title",_this.tooltipText):_this.tooltipFeature=_this.createBean(new CustomTooltipFeature(_this))},"addTooltip");this.tooltipText!=newTooltipText&&(this.tooltipText&&removeTooltip(),null!=newTooltipText&&(this.tooltipText=newTooltipText,this.tooltipText&&addTooltip()))},Component2.prototype.createChildComponentsFromTags=function(parentNode,paramsMap){var _this=this;copyNodeList(parentNode.childNodes).forEach(function(childNode){if(childNode instanceof HTMLElement){var childComp=_this.createComponentFromElement(childNode,function(childComp2){childComp2.getGui()&&_this.copyAttributesFromNode(childNode,childComp2.getGui())},paramsMap);if(childComp){if(childComp.addItems&&childNode.children.length){_this.createChildComponentsFromTags(childNode,paramsMap);var items=Array.prototype.slice.call(childNode.children);childComp.addItems(items)}_this.swapComponentForNode(childComp,parentNode,childNode)}else childNode.childNodes&&_this.createChildComponentsFromTags(childNode,paramsMap)}})},Component2.prototype.createComponentFromElement=function(element,afterPreCreateCallback,paramsMap){var key=element.nodeName,componentParams=paramsMap?paramsMap[element.getAttribute("ref")]:void 0,ComponentClass=this.agStackComponentsRegistry.getComponentClass(key);if(ComponentClass){Component2.elementGettingCreated=element;var newComponent=new ComponentClass(componentParams);return newComponent.setParentComponent(this),this.createBean(newComponent,null,afterPreCreateCallback),newComponent}return null},Component2.prototype.copyAttributesFromNode=function(source,dest){iterateNamedNodeMap(source.attributes,function(name,value){return dest.setAttribute(name,value)})},Component2.prototype.swapComponentForNode=function(newComponent,parentNode,childNode){var eComponent=newComponent.getGui();parentNode.replaceChild(eComponent,childNode),parentNode.insertBefore(document.createComment(childNode.nodeName),eComponent),this.addDestroyFunc(this.destroyBean.bind(this,newComponent)),this.swapInComponentForQuerySelectors(newComponent,childNode)},Component2.prototype.swapInComponentForQuerySelectors=function(newComponent,childNode){var thisNoType=this;this.iterateOverQuerySelectors(function(querySelector){thisNoType[querySelector.attributeName]===childNode&&(thisNoType[querySelector.attributeName]=newComponent)})},Component2.prototype.iterateOverQuerySelectors=function(action){for(var thisPrototype=Object.getPrototypeOf(this);null!=thisPrototype;){var metaData=thisPrototype.__agComponentMetaData,currentProtoName=getFunctionName(thisPrototype.constructor);metaData&&metaData[currentProtoName]&&metaData[currentProtoName].querySelectors&&metaData[currentProtoName].querySelectors.forEach(function(querySelector){return action(querySelector)}),thisPrototype=Object.getPrototypeOf(thisPrototype)}},Component2.prototype.setTemplate=function(template,paramsMap){var eGui=loadTemplate(template);this.setTemplateFromElement(eGui,paramsMap)},Component2.prototype.setTemplateFromElement=function(element,paramsMap){this.eGui=element,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),paramsMap)},Component2.prototype.createChildComponentsPreConstruct=function(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())},Component2.prototype.wireQuerySelectors=function(){var _this=this;if(this.eGui){var thisNoType=this;this.iterateOverQuerySelectors(function(querySelector){var setResult=__name(function(result){return thisNoType[querySelector.attributeName]=result},"setResult");if(querySelector.refSelector&&_this.eGui.getAttribute("ref")===querySelector.refSelector)setResult(_this.eGui);else{var resultOfQuery=_this.eGui.querySelector(querySelector.querySelector);resultOfQuery&&setResult(resultOfQuery.__agComponent||resultOfQuery)}})}},Component2.prototype.getGui=function(){return this.eGui},Component2.prototype.getFocusableElement=function(){return this.eGui},Component2.prototype.setParentComponent=function(component){this.parentComponent=component},Component2.prototype.getParentComponent=function(){return this.parentComponent},Component2.prototype.setGui=function(eGui){this.eGui=eGui},Component2.prototype.queryForHtmlElement=function(cssSelector){return this.eGui.querySelector(cssSelector)},Component2.prototype.queryForHtmlInputElement=function(cssSelector){return this.eGui.querySelector(cssSelector)},Component2.prototype.appendChild=function(newChild,container){if(null!=newChild)if(container||(container=this.eGui),isNodeOrElement(newChild))container.appendChild(newChild);else{var childComponent=newChild;container.appendChild(childComponent.getGui())}},Component2.prototype.isDisplayed=function(){return this.displayed},Component2.prototype.setVisible=function(visible,options){if(void 0===options&&(options={}),visible!==this.visible){this.visible=visible;var skipAriaHidden=options.skipAriaHidden;setVisible(this.eGui,visible,{skipAriaHidden})}},Component2.prototype.setDisplayed=function(displayed,options){if(void 0===options&&(options={}),displayed!==this.displayed){this.displayed=displayed;var skipAriaHidden=options.skipAriaHidden;setDisplayed(this.eGui,displayed,{skipAriaHidden});var event_1={type:Component2.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(event_1)}},Component2.prototype.destroy=function(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.parentComponent&&(this.parentComponent=void 0);var eGui=this.eGui;eGui&&eGui.__agComponent&&(eGui.__agComponent=void 0),_super.prototype.destroy.call(this)},Component2.prototype.addGuiEventListener=function(event,listener,options){var _this=this;this.eGui.addEventListener(event,listener,options),this.addDestroyFunc(function(){return _this.eGui.removeEventListener(event,listener)})},Component2.prototype.addCssClass=function(className){this.cssClassManager.addCssClass(className)},Component2.prototype.removeCssClass=function(className){this.cssClassManager.removeCssClass(className)},Component2.prototype.containsCssClass=function(className){return this.cssClassManager.containsCssClass(className)},Component2.prototype.addOrRemoveCssClass=function(className,addOrRemove){this.cssClassManager.addOrRemoveCssClass(className,addOrRemove)},Component2.prototype.getAttribute=function(key){var eGui=this.eGui;return eGui?eGui.getAttribute(key):null},Component2.prototype.getRefElement=function(refName){return this.queryForHtmlElement('[ref="'+refName+'"]')},Component2.EVENT_DISPLAYED_CHANGED="displayedChanged",__decorate$2p([Autowired("agStackComponentsRegistry")],Component2.prototype,"agStackComponentsRegistry",void 0),__decorate$2p([PreConstruct],Component2.prototype,"preConstructOnComponent",null),__decorate$2p([PreConstruct],Component2.prototype,"createChildComponentsPreConstruct",null),Component2}(BeanStub);function RefSelector(ref){return querySelectorFunc.bind(this,"[ref="+ref+"]",ref)}function querySelectorFunc(selector,refSelector,classPrototype,methodOrAttributeName,index){null!==selector?"number"!=typeof index?addToObjectProps(classPrototype,"querySelectors",{attributeName:methodOrAttributeName,querySelector:selector,refSelector}):console.error("AG Grid: QuerySelector should be on an attribute"):console.error("AG Grid: QuerySelector selector should not be null")}function addToObjectProps(target,key,value){var props=getOrCreateProps(target,getFunctionName(target.constructor));props[key]||(props[key]=[]),props[key].push(value)}function getOrCreateProps(target,instanceName){return target.__agComponentMetaData||(target.__agComponentMetaData={}),target.__agComponentMetaData[instanceName]||(target.__agComponentMetaData[instanceName]={}),target.__agComponentMetaData[instanceName]}__name(function QuerySelector(selector){return querySelectorFunc.bind(this,selector,void 0)},"QuerySelector"),__name(RefSelector,"RefSelector"),__name(querySelectorFunc,"querySelectorFunc"),__name(addToObjectProps,"addToObjectProps"),__name(getOrCreateProps,"getOrCreateProps");var ConditionPosition,ConditionPosition2,__extends$2K=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2o=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ReadOnlyFloatingFilter=function(_super){function ReadOnlyFloatingFilter2(){return _super.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')||this}return __extends$2K(ReadOnlyFloatingFilter2,_super),__name(ReadOnlyFloatingFilter2,"ReadOnlyFloatingFilter"),ReadOnlyFloatingFilter2.prototype.destroy=function(){_super.prototype.destroy.call(this)},ReadOnlyFloatingFilter2.prototype.init=function(params){this.params=params;var displayName=this.columnModel.getDisplayNameForColumn(params.column,"header",!0),translate=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(displayName+" "+translate("ariaFilterInput","Filter Input"))},ReadOnlyFloatingFilter2.prototype.onParentModelChanged=function(parentModel){var _this=this;parentModel?this.params.parentFilterInstance(function(filterInstance){if(filterInstance.getModelAsString){var modelAsString=filterInstance.getModelAsString(parentModel);_this.eFloatingFilterText.setValue(modelAsString)}}):this.eFloatingFilterText.setValue("")},__decorate$2o([RefSelector("eFloatingFilterText")],ReadOnlyFloatingFilter2.prototype,"eFloatingFilterText",void 0),__decorate$2o([Autowired("columnModel")],ReadOnlyFloatingFilter2.prototype,"columnModel",void 0),ReadOnlyFloatingFilter2}(Component),DateCompWrapper=function(){function DateCompWrapper2(context,userComponentFactory,dateComponentParams,eParent){var _this=this;this.alive=!0,this.context=context,this.eParent=eParent,userComponentFactory.getDateCompDetails(dateComponentParams).newAgStackInstance().then(function(dateComp){_this.alive?(_this.dateComp=dateComp,dateComp&&(eParent.appendChild(dateComp.getGui()),dateComp.afterGuiAttached&&dateComp.afterGuiAttached(),_this.tempValue&&dateComp.setDate(_this.tempValue),null!=_this.disabled&&_this.setDateCompDisabled(_this.disabled))):context.destroyBean(dateComp)})}return __name(DateCompWrapper2,"DateCompWrapper"),DateCompWrapper2.prototype.destroy=function(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)},DateCompWrapper2.prototype.getDate=function(){return this.dateComp?this.dateComp.getDate():this.tempValue},DateCompWrapper2.prototype.setDate=function(value){this.dateComp?this.dateComp.setDate(value):this.tempValue=value},DateCompWrapper2.prototype.setDisabled=function(disabled){this.dateComp?this.setDateCompDisabled(disabled):this.disabled=disabled},DateCompWrapper2.prototype.setDisplayed=function(displayed){setDisplayed(this.eParent,displayed)},DateCompWrapper2.prototype.setInputPlaceholder=function(placeholder){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(placeholder)},DateCompWrapper2.prototype.setInputAriaLabel=function(label){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(label)},DateCompWrapper2.prototype.afterGuiAttached=function(params){this.dateComp&&"function"==typeof this.dateComp.afterGuiAttached&&this.dateComp.afterGuiAttached(params)},DateCompWrapper2.prototype.setDateCompDisabled=function(disabled){null!=this.dateComp&&null!=this.dateComp.setDisabled&&this.dateComp.setDisabled(disabled)},DateCompWrapper2}(),__assign$h=function(){return __assign$h=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$h.apply(this,arguments)},OptionsFactory=function(){function OptionsFactory2(){this.customFilterOptions={}}return __name(OptionsFactory2,"OptionsFactory"),OptionsFactory2.prototype.init=function(params,defaultOptions){this.filterOptions=params.filterOptions||defaultOptions,this.mapCustomOptions(),this.selectDefaultItem(params),this.checkForDeprecatedParams()},OptionsFactory2.prototype.checkForDeprecatedParams=function(){this.filterOptions.some(function(opt){return"string"!=typeof opt&&null!=opt.test})&&console.warn("AG Grid: [IFilterOptionDef] since v26.2.0, test() has been replaced with predicate()."),this.filterOptions.some(function(opt){return"string"!=typeof opt&&null!=opt.hideFilterInput})&&console.warn("AG Grid: [IFilterOptionDef] since v26.2.0, useOfHideFilterInput has been replaced with numberOfInputs.")},OptionsFactory2.prototype.getFilterOptions=function(){return this.filterOptions},OptionsFactory2.prototype.mapCustomOptions=function(){var _this=this;this.filterOptions&&this.filterOptions.forEach(function(filterOption){if("string"!=typeof filterOption){var propertyCheck=__name(function(keys2){return!!keys2.some(function(key){return null!=filterOption[key]})||(console.warn("AG Grid: ignoring FilterOptionDef as it doesn't contain one of '"+keys2+"'"),!1)},"propertyCheck");if(![["displayKey"],["displayName"],["predicate","test"]].every(propertyCheck))return void(_this.filterOptions=_this.filterOptions.filter(function(v){return v===filterOption})||[]);var test=filterOption.test,mutatedFilterOptions=__assign$h({},filterOption);null!=test&&null==filterOption.predicate&&(mutatedFilterOptions.predicate=function(v,cv){return test(v[0],cv)},delete mutatedFilterOptions.test),mutatedFilterOptions.hideFilterInput&&null==mutatedFilterOptions.numberOfInputs&&(mutatedFilterOptions.numberOfInputs=0,delete mutatedFilterOptions.hideFilterInput),_this.customFilterOptions[filterOption.displayKey]=mutatedFilterOptions}})},OptionsFactory2.prototype.selectDefaultItem=function(params){if(params.defaultOption)this.defaultOption=params.defaultOption;else if(this.filterOptions.length>=1){var firstFilterOption=this.filterOptions[0];"string"==typeof firstFilterOption?this.defaultOption=firstFilterOption:firstFilterOption.displayKey?this.defaultOption=firstFilterOption.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")},OptionsFactory2.prototype.getDefaultOption=function(){return this.defaultOption},OptionsFactory2.prototype.getCustomOption=function(name){return this.customFilterOptions[name]},OptionsFactory2}(),DEFAULT_FILTER_LOCALE_TEXT={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose One",equals:"Equals",notEqual:"Not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"In range",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equals",greaterThanOrEqual:"Greater than or equals",contains:"Contains",notContains:"Not contains",startsWith:"Starts with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},__extends$2J=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$g=function(){return __assign$g=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$g.apply(this,arguments)},__decorate$2n=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ManagedFocusFeature=function(_super){function ManagedFocusFeature2(eFocusableElement,callbacks){void 0===callbacks&&(callbacks={});var _this=_super.call(this)||this;return _this.eFocusableElement=eFocusableElement,_this.callbacks=callbacks,_this.callbacks=__assign$g({shouldStopEventPropagation:function(){return!1},onTabKeyDown:function(e){if(!e.defaultPrevented){var nextRoot=_this.focusService.findNextFocusableElement(_this.eFocusableElement,!1,e.shiftKey);nextRoot&&(nextRoot.focus(),e.preventDefault())}}},callbacks),_this}return __extends$2J(ManagedFocusFeature2,_super),__name(ManagedFocusFeature2,"ManagedFocusFeature"),ManagedFocusFeature2.prototype.postConstruct=function(){this.eFocusableElement.classList.add(ManagedFocusFeature2.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)},ManagedFocusFeature2.prototype.addKeyDownListeners=function(eGui){var _this=this;this.addManagedListener(eGui,"keydown",function(e){if(!e.defaultPrevented&&!isStopPropagationForAgGrid(e)){if(_this.callbacks.shouldStopEventPropagation(e))return void stopPropagationForAgGrid(e);e.key===KeyCode.TAB?_this.callbacks.onTabKeyDown(e):_this.callbacks.handleKeyDown&&_this.callbacks.handleKeyDown(e)}})},ManagedFocusFeature2.FOCUS_MANAGED_CLASS="ag-focus-managed",__decorate$2n([Autowired("focusService")],ManagedFocusFeature2.prototype,"focusService",void 0),__decorate$2n([PostConstruct],ManagedFocusFeature2.prototype,"postConstruct",null),ManagedFocusFeature2}(BeanStub),__extends$2I=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2m=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ProvidedFilter=function(_super){function ProvidedFilter2(filterNameKey){var _this=_super.call(this)||this;return _this.filterNameKey=filterNameKey,_this.applyActive=!1,_this.hidePopup=null,_this.appliedModel=null,_this}return __extends$2I(ProvidedFilter2,_super),__name(ProvidedFilter2,"ProvidedFilter"),ProvidedFilter2.prototype.postConstruct=function(){this.resetTemplate(),this.createManagedBean(new ManagedFocusFeature(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)}))},ProvidedFilter2.prototype.handleKeyDown=function(e){},ProvidedFilter2.prototype.getFilterTitle=function(){return this.translate(this.filterNameKey)},ProvidedFilter2.prototype.isFilterActive=function(){return!!this.appliedModel},ProvidedFilter2.prototype.resetTemplate=function(paramsMap){var eGui=this.getGui();eGui&&eGui.removeEventListener("submit",this.onFormSubmit);var templateString='\n            <form class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-'+this.getCssIdentifier()+'-body-wrapper">\n                    '+this.createBodyTemplate()+"\n                </div>\n            </form>";this.setTemplate(templateString,paramsMap),(eGui=this.getGui())&&eGui.addEventListener("submit",this.onFormSubmit)},ProvidedFilter2.prototype.isReadOnly=function(){return!!this.providedFilterParams.readOnly},ProvidedFilter2.prototype.init=function(params){var _this=this;this.setParams(params),this.resetUiToDefaults(!0).then(function(){_this.updateUiVisibility(),_this.setupOnBtApplyDebounce()})},ProvidedFilter2.prototype.setParams=function(params){this.providedFilterParams=params,this.applyActive=ProvidedFilter2.isUseApplyButton(params),this.createButtonPanel()},ProvidedFilter2.prototype.createButtonPanel=function(){var _this=this,buttons=this.providedFilterParams.buttons;if(!(!buttons||buttons.length<1||this.isReadOnly())){var eButtonsPanel=document.createElement("div");eButtonsPanel.classList.add("ag-filter-apply-panel");var addButton=__name(function(type){var text,clickListener;switch(type){case"apply":text=_this.translate("applyFilter"),clickListener=__name(function(e){return _this.onBtApply(!1,!1,e)},"clickListener");break;case"clear":text=_this.translate("clearFilter"),clickListener=__name(function(){return _this.onBtClear()},"clickListener");break;case"reset":text=_this.translate("resetFilter"),clickListener=__name(function(){return _this.onBtReset()},"clickListener");break;case"cancel":text=_this.translate("cancelFilter"),clickListener=__name(function(e){_this.onBtCancel(e)},"clickListener");break;default:return void console.warn("AG Grid: Unknown button type specified")}var button=loadTemplate('<button\n                    type="'+("apply"===type?"submit":"button")+'"\n                    ref="'+type+'FilterButton"\n                    class="ag-standard-button ag-filter-apply-panel-button"\n                >'+text+"\n                </button>");eButtonsPanel.appendChild(button),_this.addManagedListener(button,"click",clickListener)},"addButton");convertToSet(buttons).forEach(function(type){return addButton(type)}),this.getGui().appendChild(eButtonsPanel)}},ProvidedFilter2.prototype.getDefaultDebounceMs=function(){return 0},ProvidedFilter2.prototype.setupOnBtApplyDebounce=function(){var debounceMs=ProvidedFilter2.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs());this.onBtApplyDebounce=debounce(this.onBtApply.bind(this),debounceMs)},ProvidedFilter2.prototype.getModel=function(){return this.appliedModel?this.appliedModel:null},ProvidedFilter2.prototype.setModel=function(model){var _this=this;return(null!=model?this.setModelIntoUi(model):this.resetUiToDefaults()).then(function(){_this.updateUiVisibility(),_this.applyModel("api")})},ProvidedFilter2.prototype.onBtCancel=function(e){var _this=this,currentModel=this.getModel(),afterAppliedFunc=__name(function(){_this.onUiChanged(!1,"prevent"),_this.providedFilterParams.closeOnApply&&_this.close(e)},"afterAppliedFunc");null!=currentModel?this.setModelIntoUi(currentModel).then(afterAppliedFunc):this.resetUiToDefaults().then(afterAppliedFunc)},ProvidedFilter2.prototype.onBtClear=function(){var _this=this;this.resetUiToDefaults().then(function(){return _this.onUiChanged()})},ProvidedFilter2.prototype.onBtReset=function(){this.onBtClear(),this.onBtApply()},ProvidedFilter2.prototype.applyModel=function(source){var newModel=this.getModelFromUi();if(!this.isModelValid(newModel))return!1;var previousModel=this.appliedModel;return this.appliedModel=newModel,!this.areModelsEqual(previousModel,newModel)},ProvidedFilter2.prototype.isModelValid=function(model){return!0},ProvidedFilter2.prototype.onFormSubmit=function(e){e.preventDefault()},ProvidedFilter2.prototype.onBtApply=function(afterFloatingFilter,afterDataChange,e){void 0===afterFloatingFilter&&(afterFloatingFilter=!1),void 0===afterDataChange&&(afterDataChange=!1),e&&e.preventDefault(),this.applyModel(afterDataChange?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter,afterDataChange}),this.providedFilterParams.closeOnApply&&this.applyActive&&!afterFloatingFilter&&!afterDataChange&&this.close(e)},ProvidedFilter2.prototype.onNewRowsLoaded=function(){},ProvidedFilter2.prototype.close=function(e){if(this.hidePopup){var params,keyboardEvent=e,key=keyboardEvent&&keyboardEvent.key;("Enter"===key||"Space"===key)&&(params={keyboardEvent}),this.hidePopup(params),this.hidePopup=null}},ProvidedFilter2.prototype.onUiChanged=function(fromFloatingFilter,apply){if(void 0===fromFloatingFilter&&(fromFloatingFilter=!1),this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){var isValid=this.isModelValid(this.getModelFromUi());setDisabled(this.getRefElement("applyFilterButton"),!isValid)}fromFloatingFilter&&!apply||"immediately"===apply?this.onBtApply(fromFloatingFilter):(!this.applyActive&&!apply||"debounce"===apply)&&this.onBtApplyDebounce()},ProvidedFilter2.prototype.afterGuiAttached=function(params){null!=params&&(this.hidePopup=params.hidePopup)},ProvidedFilter2.getDebounceMs=function(params,debounceDefault){return ProvidedFilter2.isUseApplyButton(params)?(null!=params.debounceMs&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):null!=params.debounceMs?params.debounceMs:debounceDefault},ProvidedFilter2.isUseApplyButton=function(params){return!!params.buttons&&params.buttons.indexOf("apply")>=0},ProvidedFilter2.prototype.destroy=function(){var eGui=this.getGui();eGui&&eGui.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,_super.prototype.destroy.call(this)},ProvidedFilter2.prototype.translate=function(key){return this.localeService.getLocaleTextFunc()(key,DEFAULT_FILTER_LOCALE_TEXT[key])},ProvidedFilter2.prototype.getCellValue=function(rowNode){var _a=this.providedFilterParams,api=_a.api,colDef=_a.colDef,column=_a.column,columnApi=_a.columnApi,context=_a.context;return this.providedFilterParams.valueGetter({api,colDef,column,columnApi,context,data:rowNode.data,getValue:function(field){return rowNode.data[field]},node:rowNode})},__decorate$2m([Autowired("rowModel")],ProvidedFilter2.prototype,"rowModel",void 0),__decorate$2m([PostConstruct],ProvidedFilter2.prototype,"postConstruct",null),ProvidedFilter2}(Component),__extends$2H=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgAbstractLabel=function(_super){function AgAbstractLabel2(config,template){var _this=_super.call(this,template)||this;return _this.labelSeparator="",_this.labelAlignment="left",_this.disabled=!1,_this.label="",_this.config=config||{},_this}return __extends$2H(AgAbstractLabel2,_super),__name(AgAbstractLabel2,"AgAbstractLabel"),AgAbstractLabel2.prototype.postConstruct=function(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");var _a=this.config,labelSeparator=_a.labelSeparator,label=_a.label,labelWidth=_a.labelWidth,labelAlignment=_a.labelAlignment;null!=labelSeparator&&this.setLabelSeparator(labelSeparator),null!=label&&this.setLabel(label),null!=labelWidth&&this.setLabelWidth(labelWidth),this.setLabelAlignment(labelAlignment||this.labelAlignment),this.refreshLabel()},AgAbstractLabel2.prototype.refreshLabel=function(){clearElement(this.eLabel),"string"==typeof this.label?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),""===this.label?(setDisplayed(this.eLabel,!1),setAriaRole(this.eLabel,"presentation")):(setDisplayed(this.eLabel,!0),setAriaRole(this.eLabel,null))},AgAbstractLabel2.prototype.setLabelSeparator=function(labelSeparator){return this.labelSeparator===labelSeparator||(this.labelSeparator=labelSeparator,null!=this.label&&this.refreshLabel()),this},AgAbstractLabel2.prototype.getLabelId=function(){return this.eLabel.id=this.eLabel.id||"ag-"+this.getCompId()+"-label",this.eLabel.id},AgAbstractLabel2.prototype.getLabel=function(){return this.label},AgAbstractLabel2.prototype.setLabel=function(label){return this.label===label||(this.label=label,this.refreshLabel()),this},AgAbstractLabel2.prototype.setLabelAlignment=function(alignment){var eGuiClassList=this.getGui().classList;return eGuiClassList.toggle("ag-label-align-left","left"===alignment),eGuiClassList.toggle("ag-label-align-right","right"===alignment),eGuiClassList.toggle("ag-label-align-top","top"===alignment),this},AgAbstractLabel2.prototype.setLabelEllipsis=function(hasEllipsis){return this.eLabel.classList.toggle("ag-label-ellipsis",hasEllipsis),this},AgAbstractLabel2.prototype.setLabelWidth=function(width){return null==this.label||setElementWidth(this.eLabel,width),this},AgAbstractLabel2.prototype.setDisabled=function(disabled){disabled=!!disabled;var element=this.getGui();return setDisabled(element,disabled),element.classList.toggle("ag-disabled",disabled),this.disabled=disabled,this},AgAbstractLabel2.prototype.isDisabled=function(){return!!this.disabled},function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PostConstruct],AgAbstractLabel2.prototype,"postConstruct",null),AgAbstractLabel2}(Component),__extends$2G=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgAbstractField=function(_super){function AgAbstractField2(config,template,className){var _this=_super.call(this,config,template)||this;return _this.className=className,_this}return __extends$2G(AgAbstractField2,_super),__name(AgAbstractField2,"AgAbstractField"),AgAbstractField2.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this),this.className&&this.addCssClass(this.className)},AgAbstractField2.prototype.onValueChange=function(callbackFn){var _this=this;return this.addManagedListener(this,AgAbstractField2.EVENT_CHANGED,function(){return callbackFn(_this.getValue())}),this},AgAbstractField2.prototype.getWidth=function(){return this.getGui().clientWidth},AgAbstractField2.prototype.setWidth=function(width){return setFixedWidth(this.getGui(),width),this},AgAbstractField2.prototype.getPreviousValue=function(){return this.previousValue},AgAbstractField2.prototype.getValue=function(){return this.value},AgAbstractField2.prototype.setValue=function(value,silent){return this.value===value||(this.previousValue=this.value,this.value=value,silent||this.dispatchEvent({type:AgAbstractField2.EVENT_CHANGED})),this},AgAbstractField2.EVENT_CHANGED="valueChange",AgAbstractField2}(AgAbstractLabel),__extends$2F=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2k=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgPickerField=function(_super){function AgPickerField2(config,className,pickerIcon,ariaRole){var _this=_super.call(this,config,'<div class="ag-picker-field" role="presentation">\n                <div ref="eLabel"></div>\n                <div ref="eWrapper"\n                    class="ag-wrapper ag-picker-field-wrapper"\n                    tabIndex="-1"\n                    aria-expanded="false"\n                    '+(ariaRole?'role="'+ariaRole+'"':"")+'\n                >\n                    <div ref="eDisplayField" class="ag-picker-field-display"></div>\n                    <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                </div>\n            </div>',className)||this;return _this.pickerIcon=pickerIcon,_this.isPickerDisplayed=!1,_this.isDestroyingPicker=!1,_this.skipClick=!1,_this}return __extends$2F(AgPickerField2,_super),__name(AgPickerField2,"AgPickerField"),AgPickerField2.prototype.postConstruct=function(){var _this=this;_super.prototype.postConstruct.call(this);var displayId=this.getCompId()+"-display";this.eDisplayField.setAttribute("id",displayId),setAriaDescribedBy(this.eWrapper,displayId);var clickHandler=__name(function(){_this.skipClick?_this.skipClick=!1:_this.isDisabled()||(_this.pickerComponent=_this.showPicker())},"clickHandler"),eGui=this.getGui();if(this.addManagedListener(eGui,"mousedown",function(e){!_this.skipClick&&_this.pickerComponent&&_this.pickerComponent.isAlive()&&isVisible(_this.pickerComponent.getGui())&&eGui.contains(e.target)&&(_this.skipClick=!0)}),this.addManagedListener(eGui,"keydown",function(e){switch(e.key){case KeyCode.UP:case KeyCode.DOWN:case KeyCode.ENTER:case KeyCode.SPACE:clickHandler();case KeyCode.ESCAPE:_this.isPickerDisplayed&&e.preventDefault()}}),this.addManagedListener(this.eWrapper,"click",clickHandler),this.addManagedListener(this.eLabel,"click",clickHandler),this.pickerIcon){var icon=createIconNoSpan(this.pickerIcon,this.gridOptionsService);icon&&this.eIcon.appendChild(icon)}},AgPickerField2.prototype.refreshLabel=function(){exists(this.getLabel())?setAriaLabelledBy(this.eWrapper,this.getLabelId()):this.eWrapper.removeAttribute("aria-labelledby"),_super.prototype.refreshLabel.call(this)},AgPickerField2.prototype.setAriaLabel=function(label){return setAriaLabel(this.eWrapper,label),this},AgPickerField2.prototype.setInputWidth=function(width){return setElementWidth(this.eWrapper,width),this},AgPickerField2.prototype.getFocusableElement=function(){return this.eWrapper},__decorate$2k([RefSelector("eLabel")],AgPickerField2.prototype,"eLabel",void 0),__decorate$2k([RefSelector("eWrapper")],AgPickerField2.prototype,"eWrapper",void 0),__decorate$2k([RefSelector("eDisplayField")],AgPickerField2.prototype,"eDisplayField",void 0),__decorate$2k([RefSelector("eIcon")],AgPickerField2.prototype,"eIcon",void 0),AgPickerField2}(AgAbstractField),__extends$2E=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgList=function(_super){function AgList2(cssIdentifier){void 0===cssIdentifier&&(cssIdentifier="default");var _this=_super.call(this,'<div class="ag-list ag-'+cssIdentifier+'-list" role="listbox"></div>')||this;return _this.cssIdentifier=cssIdentifier,_this.options=[],_this.itemEls=[],_this}return __extends$2E(AgList2,_super),__name(AgList2,"AgList"),AgList2.prototype.init=function(){this.addManagedListener(this.getGui(),"keydown",this.handleKeyDown.bind(this))},AgList2.prototype.handleKeyDown=function(e){var key=e.key;switch(key){case KeyCode.ENTER:if(this.highlightedEl){var pos=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(pos)}else this.setValue(this.getValue());break;case KeyCode.DOWN:case KeyCode.UP:var isDown=key===KeyCode.DOWN,itemToHighlight=void 0;if(e.preventDefault(),this.highlightedEl){var nextPos=this.itemEls.indexOf(this.highlightedEl)+(isDown?1:-1);nextPos=Math.min(Math.max(nextPos,0),this.itemEls.length-1),itemToHighlight=this.itemEls[nextPos]}else itemToHighlight=this.itemEls[isDown?0:this.itemEls.length-1];this.highlightItem(itemToHighlight)}},AgList2.prototype.addOptions=function(listOptions){var _this=this;return listOptions.forEach(function(listOption){return _this.addOption(listOption)}),this},AgList2.prototype.addOption=function(listOption){var value=listOption.value,sanitisedText=escapeString(listOption.text||value);return this.options.push({value,text:sanitisedText}),this.renderOption(value,sanitisedText),this.updateIndices(),this},AgList2.prototype.updateIndices=function(){var options=this.getGui().querySelectorAll(".ag-list-item");options.forEach(function(option,idx){setAriaPosInSet(option,idx+1),setAriaSetSize(option,options.length)})},AgList2.prototype.renderOption=function(value,text){var _this=this,itemEl=document.createElement("div");setAriaRole(itemEl,"option"),itemEl.classList.add("ag-list-item","ag-"+this.cssIdentifier+"-list-item"),itemEl.innerHTML="<span>"+text+"</span>",itemEl.tabIndex=-1,this.itemEls.push(itemEl),this.addManagedListener(itemEl,"mouseover",function(){return _this.highlightItem(itemEl)}),this.addManagedListener(itemEl,"mouseleave",function(){return _this.clearHighlighted()}),this.addManagedListener(itemEl,"click",function(){return _this.setValue(value)}),this.getGui().appendChild(itemEl)},AgList2.prototype.setValue=function(value,silent){if(this.value===value)return this.fireItemSelected(),this;if(null==value)return this.reset(),this;var idx=this.options.findIndex(function(option2){return option2.value===value});if(-1!==idx){var option=this.options[idx];this.value=option.value,this.displayValue=null!=option.text?option.text:option.value,this.highlightItem(this.itemEls[idx]),silent||this.fireChangeEvent()}return this},AgList2.prototype.setValueByIndex=function(idx){return this.setValue(this.options[idx].value)},AgList2.prototype.getValue=function(){return this.value},AgList2.prototype.getDisplayValue=function(){return this.displayValue},AgList2.prototype.refreshHighlighted=function(){var _this=this;this.clearHighlighted();var idx=this.options.findIndex(function(option){return option.value===_this.value});-1!==idx&&this.highlightItem(this.itemEls[idx])},AgList2.prototype.reset=function(){this.value=null,this.displayValue=null,this.clearHighlighted(),this.fireChangeEvent()},AgList2.prototype.highlightItem=function(el){el.offsetParent&&(this.clearHighlighted(),this.highlightedEl=el,this.highlightedEl.classList.add(AgList2.ACTIVE_CLASS),setAriaSelected(this.highlightedEl,!0),this.highlightedEl.focus())},AgList2.prototype.clearHighlighted=function(){!this.highlightedEl||!this.highlightedEl.offsetParent||(this.highlightedEl.classList.remove(AgList2.ACTIVE_CLASS),setAriaSelected(this.highlightedEl,!1),this.highlightedEl=null)},AgList2.prototype.fireChangeEvent=function(){this.dispatchEvent({type:AgAbstractField.EVENT_CHANGED}),this.fireItemSelected()},AgList2.prototype.fireItemSelected=function(){this.dispatchEvent({type:AgList2.EVENT_ITEM_SELECTED})},AgList2.EVENT_ITEM_SELECTED="selectedItem",AgList2.ACTIVE_CLASS="ag-active-item",function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PostConstruct],AgList2.prototype,"init",null),AgList2}(Component),__extends$2D=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2i=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgSelect=function(_super){function AgSelect2(config){return _super.call(this,config,"ag-select","smallDown","listbox")||this}return __extends$2D(AgSelect2,_super),__name(AgSelect2,"AgSelect"),AgSelect2.prototype.init=function(){var _this=this;this.listComponent=this.createBean(new AgList("select")),this.listComponent.setParentComponent(this),this.eWrapper.tabIndex=0,this.listComponent.addManagedListener(this.listComponent,AgList.EVENT_ITEM_SELECTED,function(){_this.hideList&&_this.hideList()}),this.listComponent.addManagedListener(this.listComponent,AgAbstractField.EVENT_CHANGED,function(){_this.setValue(_this.listComponent.getValue(),!1,!0),_this.hideList&&_this.hideList()})},AgSelect2.prototype.showPicker=function(){var _this=this,listGui=this.listComponent.getGui(),eDocument=this.gridOptionsService.getDocument(),destroyMouseWheelFunc=this.addManagedListener(eDocument.body,"wheel",function(e){!listGui.contains(e.target)&&_this.hideList&&_this.hideList()}),destroyFocusOutFunc=this.addManagedListener(listGui,"focusout",function(e){!listGui.contains(e.relatedTarget)&&_this.hideList&&_this.hideList()}),translate=this.localeService.getLocaleTextFunc(),addPopupRes=this.popupService.addPopup({modal:!0,eChild:listGui,closeOnEsc:!0,closedCallback:function(){_this.hideList=null,_this.isPickerDisplayed=!1,destroyFocusOutFunc(),destroyMouseWheelFunc(),_this.isAlive()&&(setAriaExpanded(_this.eWrapper,!1),_this.getFocusableElement().focus())},ariaLabel:translate("ariaLabelSelectField","Select Field")});return addPopupRes&&(this.hideList=addPopupRes.hideFunc),this.isPickerDisplayed=!0,setElementWidth(listGui,getAbsoluteWidth(this.eWrapper)),setAriaExpanded(this.eWrapper,!0),listGui.style.maxHeight=getInnerHeight(this.popupService.getPopupParent())+"px",listGui.style.position="absolute",this.popupService.positionPopupByComponent({type:"ag-list",eventSource:this.eWrapper,ePopup:listGui,position:"under",keepWithinBounds:!0}),this.listComponent.refreshHighlighted(),this.listComponent},AgSelect2.prototype.addOptions=function(options){var _this=this;return options.forEach(function(option){return _this.addOption(option)}),this},AgSelect2.prototype.addOption=function(option){return this.listComponent.addOption(option),this},AgSelect2.prototype.setValue=function(value,silent,fromPicker){return this.value===value?this:(fromPicker||this.listComponent.setValue(value,!0),this.listComponent.getValue()===this.getValue()?this:(this.eDisplayField.innerHTML=this.listComponent.getDisplayValue(),_super.prototype.setValue.call(this,value,silent)))},AgSelect2.prototype.destroy=function(){this.hideList&&this.hideList(),this.destroyBean(this.listComponent),_super.prototype.destroy.call(this)},__decorate$2i([Autowired("popupService")],AgSelect2.prototype,"popupService",void 0),__decorate$2i([PostConstruct],AgSelect2.prototype,"init",null),AgSelect2}(AgPickerField),__extends$2C=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2h=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgAbstractInputField=function(_super){function AgAbstractInputField2(config,className,inputType,displayFieldTag){void 0===inputType&&(inputType="text"),void 0===displayFieldTag&&(displayFieldTag="input");var _this=_super.call(this,config,'\n            <div role="presentation">\n                <div ref="eLabel" class="ag-input-field-label"></div>\n                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <'+displayFieldTag+' ref="eInput" class="ag-input-field-input"></'+displayFieldTag+">\n                </div>\n            </div>",className)||this;return _this.inputType=inputType,_this.displayFieldTag=displayFieldTag,_this}return __extends$2C(AgAbstractInputField2,_super),__name(AgAbstractInputField2,"AgAbstractInputField"),AgAbstractInputField2.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this),this.setInputType(),this.eLabel.classList.add(this.className+"-label"),this.eWrapper.classList.add(this.className+"-input-wrapper"),this.eInput.classList.add(this.className+"-input"),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||"ag-"+this.getCompId()+"-input";var _a=this.config,width=_a.width,value=_a.value;null!=width&&this.setWidth(width),null!=value&&this.setValue(value),this.addInputListeners()},AgAbstractInputField2.prototype.refreshLabel=function(){exists(this.getLabel())?setAriaLabelledBy(this.eInput,this.getLabelId()):this.eInput.removeAttribute("aria-labelledby"),_super.prototype.refreshLabel.call(this)},AgAbstractInputField2.prototype.addInputListeners=function(){var _this=this;this.addManagedListener(this.eInput,"input",function(e){return _this.setValue(e.target.value)})},AgAbstractInputField2.prototype.setInputType=function(){"input"===this.displayFieldTag&&this.eInput.setAttribute("type",this.inputType)},AgAbstractInputField2.prototype.getInputElement=function(){return this.eInput},AgAbstractInputField2.prototype.setInputWidth=function(width){return setElementWidth(this.eWrapper,width),this},AgAbstractInputField2.prototype.setInputName=function(name){return this.getInputElement().setAttribute("name",name),this},AgAbstractInputField2.prototype.getFocusableElement=function(){return this.eInput},AgAbstractInputField2.prototype.setMaxLength=function(length){return this.eInput.maxLength=length,this},AgAbstractInputField2.prototype.setInputPlaceholder=function(placeholder){return addOrRemoveAttribute(this.eInput,"placeholder",placeholder),this},AgAbstractInputField2.prototype.setInputAriaLabel=function(label){return setAriaLabel(this.eInput,label),this},AgAbstractInputField2.prototype.setDisabled=function(disabled){return setDisabled(this.eInput,disabled),_super.prototype.setDisabled.call(this,disabled)},__decorate$2h([RefSelector("eLabel")],AgAbstractInputField2.prototype,"eLabel",void 0),__decorate$2h([RefSelector("eWrapper")],AgAbstractInputField2.prototype,"eWrapper",void 0),__decorate$2h([RefSelector("eInput")],AgAbstractInputField2.prototype,"eInput",void 0),AgAbstractInputField2}(AgAbstractField),__extends$2B=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2g=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};(ConditionPosition2=ConditionPosition||(ConditionPosition={}))[ConditionPosition2.One=0]="One",ConditionPosition2[ConditionPosition2.Two=1]="Two";var DragSourceType,DragSourceType2,VerticalDirection,VerticalDirection2,HorizontalDirection,HorizontalDirection2,SimpleFilterModelFormatter=function(){function SimpleFilterModelFormatter2(localeService,optionsFactory){this.localeService=localeService,this.optionsFactory=optionsFactory}return __name(SimpleFilterModelFormatter2,"SimpleFilterModelFormatter"),SimpleFilterModelFormatter2.prototype.getModelAsString=function(model){if(!model)return null;if(null!=model.operator){var combinedModel=model,_a=combinedModel||{},condition1=_a.condition1,condition2=_a.condition2,customOption1=this.getModelAsString(condition1),customOption2=this.getModelAsString(condition2);return[customOption1,combinedModel.operator,customOption2].join(" ")}if(model.type===SimpleFilter.BLANK||model.type===SimpleFilter.NOT_BLANK)return this.localeService.getLocaleTextFunc()(model.type,model.type);var condition=model,customOption=this.optionsFactory.getCustomOption(condition.type),_b=customOption||{},displayKey=_b.displayKey,displayName=_b.displayName,numberOfInputs=_b.numberOfInputs;return displayKey&&displayName&&0===numberOfInputs?(this.localeService.getLocaleTextFunc()(displayKey,displayName),displayName):this.conditionToString(condition,customOption)},SimpleFilterModelFormatter2}(),SimpleFilter=function(_super){function SimpleFilter2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2B(SimpleFilter2,_super),__name(SimpleFilter2,"SimpleFilter"),SimpleFilter2.prototype.getNumberOfInputs=function(type){var customOpts=this.optionsFactory.getCustomOption(type);if(customOpts)return customOpts.numberOfInputs??1;var zeroInputTypes=[SimpleFilter2.EMPTY,SimpleFilter2.NOT_BLANK,SimpleFilter2.BLANK];return type&&zeroInputTypes.indexOf(type)>=0?0:type===SimpleFilter2.IN_RANGE?2:1},SimpleFilter2.prototype.onFloatingFilterChanged=function(type,value){this.setTypeFromFloatingFilter(type),this.setValueFromFloatingFilter(value),this.onUiChanged(!0)},SimpleFilter2.prototype.setTypeFromFloatingFilter=function(type){this.eType1.setValue(type),this.eType2.setValue(this.optionsFactory.getDefaultOption()),(this.isDefaultOperator("AND")?this.eJoinOperatorAnd:this.eJoinOperatorOr).setValue(!0)},SimpleFilter2.prototype.getModelFromUi=function(){return this.isConditionUiComplete(ConditionPosition.One)?this.isAllowTwoConditions()&&this.isConditionUiComplete(ConditionPosition.Two)?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:this.createCondition(ConditionPosition.One),condition2:this.createCondition(ConditionPosition.Two)}:this.createCondition(ConditionPosition.One):null},SimpleFilter2.prototype.getConditionTypes=function(){return[this.eType1.getValue(),this.eType2.getValue()]},SimpleFilter2.prototype.getJoinOperator=function(){return!0===this.eJoinOperatorOr.getValue()?"OR":"AND"},SimpleFilter2.prototype.areModelsEqual=function(a,b){if(!a&&!b)return!0;if(!a&&b||a&&!b)return!1;var res,aIsSimple=!a.operator,bIsSimple=!b.operator;if(!aIsSimple&&bIsSimple||aIsSimple&&!bIsSimple)return!1;if(aIsSimple){var aSimple=a,bSimple=b;res=this.areSimpleModelsEqual(aSimple,bSimple)}else{var aCombined=a,bCombined=b;res=aCombined.operator===bCombined.operator&&this.areSimpleModelsEqual(aCombined.condition1,bCombined.condition1)&&this.areSimpleModelsEqual(aCombined.condition2,bCombined.condition2)}return res},SimpleFilter2.prototype.setModelIntoUi=function(model){if(model.operator){var combinedModel=model,orChecked="OR"===combinedModel.operator;this.eJoinOperatorAnd.setValue(!orChecked),this.eJoinOperatorOr.setValue(orChecked),this.eType1.setValue(combinedModel.condition1.type),this.eType2.setValue(combinedModel.condition2.type),this.setConditionIntoUi(combinedModel.condition1,ConditionPosition.One),this.setConditionIntoUi(combinedModel.condition2,ConditionPosition.Two)}else{var simpleModel=model;this.eJoinOperatorAnd.setValue(this.isDefaultOperator("AND")),this.eJoinOperatorOr.setValue(this.isDefaultOperator("OR")),this.eType1.setValue(simpleModel.type),this.eType2.setValue(this.optionsFactory.getDefaultOption()),this.setConditionIntoUi(simpleModel,ConditionPosition.One),this.setConditionIntoUi(null,ConditionPosition.Two)}return AgPromise.resolve()},SimpleFilter2.prototype.doesFilterPass=function(params){var _this=this,model=this.getModel();if(null==model)return!0;var operator=model.operator,models=[];if(operator){var combinedModel=model;models.push(combinedModel.condition1,combinedModel.condition2)}else models.push(model);return models[operator&&"OR"===operator?"some":"every"](function(m){return _this.individualConditionPasses(params,m)})},SimpleFilter2.prototype.setParams=function(params){_super.prototype.setParams.call(this,params),this.optionsFactory=new OptionsFactory,this.optionsFactory.init(params,this.getDefaultFilterOptions()),this.allowTwoConditions=!params.suppressAndOrCondition,this.alwaysShowBothConditions=!!params.alwaysShowBothConditions,this.defaultJoinOperator=this.getDefaultJoinOperator(params.defaultJoinOperator),this.filterPlaceholder=params.filterPlaceholder,this.putOptionsIntoDropdown(),this.addChangedListeners()},SimpleFilter2.prototype.getDefaultJoinOperator=function(defaultJoinOperator){return includes(["AND","OR"],defaultJoinOperator)?defaultJoinOperator:"AND"},SimpleFilter2.prototype.putOptionsIntoDropdown=function(){var _this=this,filterOptions=this.optionsFactory.getFilterOptions(),eTypes=[this.eType1,this.eType2];filterOptions.forEach(function(option){var listOption="string"==typeof option?_this.createBoilerplateListOption(option):_this.createCustomListOption(option);eTypes.forEach(function(eType){return eType.addOption(listOption)})}),eTypes.forEach(function(eType){return eType.setDisabled(filterOptions.length<=1)})},SimpleFilter2.prototype.createBoilerplateListOption=function(option){return{value:option,text:this.translate(option)}},SimpleFilter2.prototype.createCustomListOption=function(option){var displayKey=option.displayKey,customOption=this.optionsFactory.getCustomOption(option.displayKey);return{value:displayKey,text:customOption?this.localeService.getLocaleTextFunc()(customOption.displayKey,customOption.displayName):this.translate(displayKey)}},SimpleFilter2.prototype.isAllowTwoConditions=function(){return this.allowTwoConditions},SimpleFilter2.prototype.createBodyTemplate=function(){return'\n            <ag-select class="ag-filter-select" ref="eOptions1"></ag-select>\n            '+this.createValueTemplate(ConditionPosition.One)+'\n            <div class="ag-filter-condition" ref="eJoinOperatorPanel">\n               <ag-radio-button ref="eJoinOperatorAnd" class="ag-filter-condition-operator ag-filter-condition-operator-and"></ag-radio-button>\n               <ag-radio-button ref="eJoinOperatorOr" class="ag-filter-condition-operator ag-filter-condition-operator-or"></ag-radio-button>\n            </div>\n            <ag-select class="ag-filter-select" ref="eOptions2"></ag-select>\n            '+this.createValueTemplate(ConditionPosition.Two)},SimpleFilter2.prototype.getCssIdentifier=function(){return"simple-filter"},SimpleFilter2.prototype.updateUiVisibility=function(){var _this=this,elementConditionGroups=[[this.eType1],[this.eType2,this.eJoinOperatorPanel,this.eJoinOperatorAnd,this.eJoinOperatorOr]],elementBodies=[this.eCondition1Body,this.eCondition2Body];elementConditionGroups.forEach(function(group,position){var visible=_this.isConditionVisible(position),disabled=_this.isConditionDisabled(position);group.forEach(function(element){element instanceof AgAbstractInputField||element instanceof AgSelect?(element.setDisabled(disabled),element.setDisplayed(visible)):(setDisabled(element,disabled),setDisplayed(element,visible))})}),elementBodies.forEach(function(element,index){setDisplayed(element,_this.isConditionBodyVisible(index))}),this.forEachInput(function(element,index,position,numberOfInputs){_this.setElementDisplayed(element,index<numberOfInputs),_this.setElementDisabled(element,_this.isConditionDisabled(position))}),this.resetPlaceholder()},SimpleFilter2.prototype.afterGuiAttached=function(params){if(_super.prototype.afterGuiAttached.call(this,params),this.resetPlaceholder(),!params||!params.suppressFocus&&!this.isReadOnly()){var firstInput=this.getInputs()[0][0];if(!firstInput)return;firstInput instanceof AgAbstractInputField&&firstInput.getInputElement().focus()}},SimpleFilter2.prototype.getPlaceholderText=function(defaultPlaceholder,position){var placeholder=this.translate(defaultPlaceholder);if(isFunction(this.filterPlaceholder)){var filterPlaceholderFn=this.filterPlaceholder,filterOptionKey=0===position?this.eType1.getValue():this.eType2.getValue();placeholder=filterPlaceholderFn({filterOptionKey,filterOption:this.translate(filterOptionKey),placeholder})}else"string"==typeof this.filterPlaceholder&&(placeholder=this.filterPlaceholder);return placeholder},SimpleFilter2.prototype.resetPlaceholder=function(){var _this=this,globalTranslate=this.localeService.getLocaleTextFunc();this.forEachInput(function(element,index,position,numberOfInputs){if(element instanceof AgAbstractInputField){var placeholder=0===index&&numberOfInputs>1?"inRangeStart":0===index?"filterOoo":"inRangeEnd",ariaLabel=0===index&&numberOfInputs>1?globalTranslate("ariaFilterFromValue","Filter from value"):0===index?globalTranslate("ariaFilterValue","Filter Value"):globalTranslate("ariaFilterToValue","Filter to Value");element.setInputPlaceholder(_this.getPlaceholderText(placeholder,position)),element.setInputAriaLabel(ariaLabel)}})},SimpleFilter2.prototype.setElementValue=function(element,value,silent){element instanceof AgAbstractInputField&&element.setValue(null!=value?String(value):null,silent)},SimpleFilter2.prototype.setElementDisplayed=function(element,displayed){element instanceof Component&&setDisplayed(element.getGui(),displayed)},SimpleFilter2.prototype.setElementDisabled=function(element,disabled){element instanceof Component&&setDisabled(element.getGui(),disabled)},SimpleFilter2.prototype.attachElementOnChange=function(element,listener){element instanceof AgAbstractInputField&&element.onValueChange(listener)},SimpleFilter2.prototype.forEachInput=function(cb){var _this=this,inputs=this.getInputs();this.getConditionTypes().forEach(function(type,position){for(var numberOfInputs=_this.getNumberOfInputs(type),index=0;index<inputs[position].length;index++){var input=inputs[position][index];null!=input&&cb(input,index,position,numberOfInputs)}})},SimpleFilter2.prototype.isConditionVisible=function(position){return 0===position||!!this.allowTwoConditions&&(this.isReadOnly()?this.isConditionUiComplete(position):!!this.alwaysShowBothConditions||this.isConditionUiComplete(position-1))},SimpleFilter2.prototype.isConditionDisabled=function(position){return!(!this.isReadOnly()&&this.isConditionVisible(position))||0!==position&&!this.isConditionUiComplete(position-1)},SimpleFilter2.prototype.isConditionBodyVisible=function(position){if(!this.isConditionVisible(position))return!1;var type=this.getConditionTypes()[position];return this.getNumberOfInputs(type)>0},SimpleFilter2.prototype.isConditionUiComplete=function(position){return!(this.getConditionTypes()[position]===SimpleFilter2.EMPTY||this.getValues(position).some(function(v){return null==v}))},SimpleFilter2.prototype.resetUiToDefaults=function(silent){var _this=this,filteringLabel=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator"),uniqueGroupId="ag-simple-filter-and-or-"+this.getCompId(),defaultOption=this.optionsFactory.getDefaultOption();return this.eType1.setValue(defaultOption,silent).setAriaLabel(filteringLabel).setDisabled(this.isReadOnly()),this.eType2.setValue(this.optionsFactory.getDefaultOption(),silent).setAriaLabel(filteringLabel).setDisabled(this.isReadOnly()),this.eJoinOperatorAnd.setValue(this.isDefaultOperator("AND"),silent).setName(uniqueGroupId).setLabel(this.translate("andCondition")).setDisabled(this.isReadOnly()),this.eJoinOperatorOr.setValue(this.isDefaultOperator("OR"),silent).setName(uniqueGroupId).setLabel(this.translate("orCondition")).setDisabled(this.isReadOnly()),this.forEachInput(function(element){_this.setElementValue(element,null,silent),_this.setElementDisabled(element,_this.isReadOnly())}),this.resetPlaceholder(),AgPromise.resolve()},SimpleFilter2.prototype.setConditionIntoUi=function(model,position){var _this=this,values2=this.mapValuesFromModel(model);this.forEachInput(function(element,index,elPosition,_2){elPosition===position&&_this.setElementValue(element,null!=values2[index]?values2[index]:null)})},SimpleFilter2.prototype.setValueFromFloatingFilter=function(value){var _this=this;this.forEachInput(function(element,index,position,_2){_this.setElementValue(element,0===index&&0===position?value:null)})},SimpleFilter2.prototype.isDefaultOperator=function(operator){return operator===this.defaultJoinOperator},SimpleFilter2.prototype.addChangedListeners=function(){var _this=this;if(!this.isReadOnly()){var listener=__name(function(){return _this.onUiChanged()},"listener");this.eType1.onValueChange(listener),this.eType2.onValueChange(listener),this.eJoinOperatorOr.onValueChange(listener),this.eJoinOperatorAnd.onValueChange(listener),this.forEachInput(function(element){_this.attachElementOnChange(element,listener)})}},SimpleFilter2.prototype.individualConditionPasses=function(params,filterModel){var cellValue=this.getCellValue(params.node),values2=this.mapValuesFromModel(filterModel),customFilterOption=this.optionsFactory.getCustomOption(filterModel.type);return this.evaluateCustomFilter(customFilterOption,values2,cellValue)??(null==cellValue?this.evaluateNullValue(filterModel.type):this.evaluateNonNullValue(values2,cellValue,filterModel,params))},SimpleFilter2.prototype.evaluateCustomFilter=function(customFilterOption,values2,cellValue){if(null!=customFilterOption){var predicate=customFilterOption.predicate;if(null!=predicate&&!values2.some(function(v){return null==v}))return predicate(values2,cellValue)}},SimpleFilter2.prototype.isBlank=function(cellValue){return null==cellValue||"string"==typeof cellValue&&0===cellValue.trim().length},SimpleFilter2.EMPTY="empty",SimpleFilter2.BLANK="blank",SimpleFilter2.NOT_BLANK="notBlank",SimpleFilter2.EQUALS="equals",SimpleFilter2.NOT_EQUAL="notEqual",SimpleFilter2.LESS_THAN="lessThan",SimpleFilter2.LESS_THAN_OR_EQUAL="lessThanOrEqual",SimpleFilter2.GREATER_THAN="greaterThan",SimpleFilter2.GREATER_THAN_OR_EQUAL="greaterThanOrEqual",SimpleFilter2.IN_RANGE="inRange",SimpleFilter2.CONTAINS="contains",SimpleFilter2.NOT_CONTAINS="notContains",SimpleFilter2.STARTS_WITH="startsWith",SimpleFilter2.ENDS_WITH="endsWith",__decorate$2g([RefSelector("eOptions1")],SimpleFilter2.prototype,"eType1",void 0),__decorate$2g([RefSelector("eOptions2")],SimpleFilter2.prototype,"eType2",void 0),__decorate$2g([RefSelector("eJoinOperatorPanel")],SimpleFilter2.prototype,"eJoinOperatorPanel",void 0),__decorate$2g([RefSelector("eJoinOperatorAnd")],SimpleFilter2.prototype,"eJoinOperatorAnd",void 0),__decorate$2g([RefSelector("eJoinOperatorOr")],SimpleFilter2.prototype,"eJoinOperatorOr",void 0),__decorate$2g([RefSelector("eCondition1Body")],SimpleFilter2.prototype,"eCondition1Body",void 0),__decorate$2g([RefSelector("eCondition2Body")],SimpleFilter2.prototype,"eCondition2Body",void 0),SimpleFilter2}(ProvidedFilter),__extends$2A=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),ScalarFilter=function(_super){function ScalarFilter2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2A(ScalarFilter2,_super),__name(ScalarFilter2,"ScalarFilter"),ScalarFilter2.prototype.setParams=function(params){_super.prototype.setParams.call(this,params),this.scalarFilterParams=params},ScalarFilter2.prototype.evaluateNullValue=function(filterType){switch(filterType){case ScalarFilter2.EQUALS:case ScalarFilter2.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case ScalarFilter2.GREATER_THAN:case ScalarFilter2.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case ScalarFilter2.LESS_THAN:case ScalarFilter2.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case ScalarFilter2.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case ScalarFilter2.BLANK:return!0;case ScalarFilter2.NOT_BLANK:return!1}return!1},ScalarFilter2.prototype.evaluateNonNullValue=function(values2,cellValue,filterModel){var comparator=this.comparator(),compareResult=null!=values2[0]?comparator(values2[0],cellValue):0;switch(filterModel.type){case ScalarFilter2.EQUALS:return 0===compareResult;case ScalarFilter2.NOT_EQUAL:return 0!==compareResult;case ScalarFilter2.GREATER_THAN:return compareResult>0;case ScalarFilter2.GREATER_THAN_OR_EQUAL:return compareResult>=0;case ScalarFilter2.LESS_THAN:return compareResult<0;case ScalarFilter2.LESS_THAN_OR_EQUAL:return compareResult<=0;case ScalarFilter2.IN_RANGE:var compareToResult=comparator(values2[1],cellValue);return this.scalarFilterParams.inRangeInclusive?compareResult>=0&&compareToResult<=0:compareResult>0&&compareToResult<0;case ScalarFilter2.BLANK:return this.isBlank(cellValue);case ScalarFilter2.NOT_BLANK:return!this.isBlank(cellValue);default:return console.warn('AG Grid: Unexpected type of filter "'+filterModel.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}},ScalarFilter2}(SimpleFilter),__extends$2z=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$f=function(){return __assign$f=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$f.apply(this,arguments)},__decorate$2f=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},DEFAULT_MIN_YEAR=1e3,DEFAULT_MAX_YEAR=1/0,DateFilterModelFormatter=function(_super){function DateFilterModelFormatter2(dateFilterParams,localeService,optionsFactory){var _this=_super.call(this,localeService,optionsFactory)||this;return _this.dateFilterParams=dateFilterParams,_this}return __extends$2z(DateFilterModelFormatter2,_super),__name(DateFilterModelFormatter2,"DateFilterModelFormatter"),DateFilterModelFormatter2.prototype.conditionToString=function(condition,options){var type=condition.type,numberOfInputs=(options||{}).numberOfInputs,isRange=type==SimpleFilter.IN_RANGE||2===numberOfInputs,dateFrom=parseDateTimeFromString(condition.dateFrom),dateTo=parseDateTimeFromString(condition.dateTo),format=this.dateFilterParams.inRangeFloatingFilterDateFormat;return isRange?(null!==dateFrom?dateToFormattedString(dateFrom,format):"null")+"-"+(null!==dateTo?dateToFormattedString(dateTo,format):"null"):null!=dateFrom?dateToFormattedString(dateFrom,format):""+type},DateFilterModelFormatter2}(SimpleFilterModelFormatter),DateFilter=function(_super){function DateFilter2(){var _this=_super.call(this,"dateFilter")||this;return _this.minValidYear=DEFAULT_MIN_YEAR,_this.maxValidYear=DEFAULT_MAX_YEAR,_this}return __extends$2z(DateFilter2,_super),__name(DateFilter2,"DateFilter"),DateFilter2.prototype.afterGuiAttached=function(params){_super.prototype.afterGuiAttached.call(this,params),this.dateCondition1FromComp.afterGuiAttached(params)},DateFilter2.prototype.mapValuesFromModel=function(filterModel){var _a=filterModel||{},dateFrom=_a.dateFrom,dateTo=_a.dateTo,type=_a.type;return[dateFrom&&parseDateTimeFromString(dateFrom)||null,dateTo&&parseDateTimeFromString(dateTo)||null].slice(0,this.getNumberOfInputs(type))},DateFilter2.prototype.comparator=function(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)},DateFilter2.prototype.defaultComparator=function(filterDate,cellValue){return null==cellValue||cellValue<filterDate?-1:cellValue>filterDate?1:0},DateFilter2.prototype.setParams=function(params){_super.prototype.setParams.call(this,params),this.dateFilterParams=params;var yearParser=__name(function(param,fallback){if(null!=params[param]){if(!isNaN(params[param]))return null==params[param]?fallback:Number(params[param]);console.warn("AG Grid: DateFilter "+param+" is not a number")}return fallback},"yearParser");this.minValidYear=yearParser("minValidYear",DEFAULT_MIN_YEAR),this.maxValidYear=yearParser("maxValidYear",DEFAULT_MAX_YEAR),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),this.createDateComponents(),this.filterModelFormatter=new DateFilterModelFormatter(this.dateFilterParams,this.localeService,this.optionsFactory)},DateFilter2.prototype.createDateComponents=function(){var _this=this,createDateCompWrapper=__name(function(element){return new DateCompWrapper(_this.getContext(),_this.userComponentFactory,{onDateChanged:function(){return _this.onUiChanged()},filterParams:_this.dateFilterParams},element)},"createDateCompWrapper");this.dateCondition1FromComp=createDateCompWrapper(this.eCondition1PanelFrom),this.dateCondition1ToComp=createDateCompWrapper(this.eCondition1PanelTo),this.dateCondition2FromComp=createDateCompWrapper(this.eCondition2PanelFrom),this.dateCondition2ToComp=createDateCompWrapper(this.eCondition2PanelTo),this.addDestroyFunc(function(){_this.forEachInput(function(element){return element.destroy()})})},DateFilter2.prototype.setElementValue=function(element,value,silent){element.setDate(value)},DateFilter2.prototype.setElementDisplayed=function(element,displayed){element.setDisplayed(displayed)},DateFilter2.prototype.setElementDisabled=function(element,disabled){element.setDisabled(disabled)},DateFilter2.prototype.getDefaultFilterOptions=function(){return DateFilter2.DEFAULT_FILTER_OPTIONS},DateFilter2.prototype.createValueTemplate=function(position){var pos=position===ConditionPosition.One?"1":"2";return'\n            <div class="ag-filter-body" ref="eCondition'+pos+'Body">\n                <div class="ag-filter-from ag-filter-date-from" ref="eCondition'+pos+'PanelFrom"></div>\n                <div class="ag-filter-to ag-filter-date-to" ref="eCondition'+pos+'PanelTo"></div>\n            </div>'},DateFilter2.prototype.isConditionUiComplete=function(position){var _this=this;if(!_super.prototype.isConditionUiComplete.call(this,position))return!1;var isValidDate=__name(function(value){return null!=value&&value.getUTCFullYear()>=_this.minValidYear&&value.getUTCFullYear()<=_this.maxValidYear},"isValidDate"),valid=!0;return this.forEachInput(function(element,index,elPosition,numberOfInputs){elPosition!==position||!valid||index>=numberOfInputs||(valid=valid&&isValidDate(element.getDate()))}),valid},DateFilter2.prototype.areSimpleModelsEqual=function(aSimple,bSimple){return aSimple.dateFrom===bSimple.dateFrom&&aSimple.dateTo===bSimple.dateTo&&aSimple.type===bSimple.type},DateFilter2.prototype.getFilterType=function(){return"date"},DateFilter2.prototype.createCondition=function(position){var type=this.getConditionTypes()[position],model={},values2=this.getValues(position);return values2.length>0&&(model.dateFrom=serialiseDate(values2[0])),values2.length>1&&(model.dateTo=serialiseDate(values2[1])),__assign$f({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type},model)},DateFilter2.prototype.resetPlaceholder=function(){var globalTranslate=this.localeService.getLocaleTextFunc(),placeholder=this.translate("dateFormatOoo"),ariaLabel=globalTranslate("ariaFilterValue","Filter Value");this.forEachInput(function(element){element.setInputPlaceholder(placeholder),element.setInputAriaLabel(ariaLabel)})},DateFilter2.prototype.getInputs=function(){return[[this.dateCondition1FromComp,this.dateCondition1ToComp],[this.dateCondition2FromComp,this.dateCondition2ToComp]]},DateFilter2.prototype.getValues=function(position){var result=[];return this.forEachInput(function(element,index,elPosition,numberOfInputs){position===elPosition&&index<numberOfInputs&&result.push(element.getDate())}),result},DateFilter2.prototype.getModelAsString=function(model){var _a;return null!==(_a=this.filterModelFormatter.getModelAsString(model))&&void 0!==_a?_a:""},DateFilter2.DEFAULT_FILTER_OPTIONS=[ScalarFilter.EQUALS,ScalarFilter.GREATER_THAN,ScalarFilter.LESS_THAN,ScalarFilter.NOT_EQUAL,ScalarFilter.IN_RANGE,ScalarFilter.BLANK,ScalarFilter.NOT_BLANK],__decorate$2f([RefSelector("eCondition1PanelFrom")],DateFilter2.prototype,"eCondition1PanelFrom",void 0),__decorate$2f([RefSelector("eCondition1PanelTo")],DateFilter2.prototype,"eCondition1PanelTo",void 0),__decorate$2f([RefSelector("eCondition2PanelFrom")],DateFilter2.prototype,"eCondition2PanelFrom",void 0),__decorate$2f([RefSelector("eCondition2PanelTo")],DateFilter2.prototype,"eCondition2PanelTo",void 0),__decorate$2f([Autowired("userComponentFactory")],DateFilter2.prototype,"userComponentFactory",void 0),DateFilter2}(ScalarFilter),__extends$2y=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),SimpleFloatingFilter=function(_super){function SimpleFloatingFilter2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2y(SimpleFloatingFilter2,_super),__name(SimpleFloatingFilter2,"SimpleFloatingFilter"),SimpleFloatingFilter2.prototype.getDefaultDebounceMs=function(){return 0},SimpleFloatingFilter2.prototype.destroy=function(){_super.prototype.destroy.call(this)},SimpleFloatingFilter2.prototype.isEventFromFloatingFilter=function(event){return event&&event.afterFloatingFilter},SimpleFloatingFilter2.prototype.isEventFromDataChange=function(event){return null==event?void 0:event.afterDataChange},SimpleFloatingFilter2.prototype.getLastType=function(){return this.lastType},SimpleFloatingFilter2.prototype.isReadOnly=function(){return this.readOnly},SimpleFloatingFilter2.prototype.setLastTypeFromModel=function(model){if(model){var condition;if(model.operator)condition=model.condition1;else condition=model;this.lastType=condition.type}else this.lastType=this.optionsFactory.getDefaultOption()},SimpleFloatingFilter2.prototype.canWeEditAfterModelFromParentFilter=function(model){if(!model)return this.isTypeEditable(this.lastType);if(model.operator)return!1;var simpleModel=model;return this.isTypeEditable(simpleModel.type)},SimpleFloatingFilter2.prototype.init=function(params){this.optionsFactory=new OptionsFactory,this.optionsFactory.init(params.filterParams,this.getDefaultFilterOptions()),this.lastType=this.optionsFactory.getDefaultOption(),this.readOnly=!!params.filterParams.readOnly;var editable=this.isTypeEditable(this.lastType);this.setEditable(editable)},SimpleFloatingFilter2.prototype.doesFilterHaveSingleInput=function(filterType){var numberOfInputs=(this.optionsFactory.getCustomOption(filterType)||{}).numberOfInputs;return null==numberOfInputs||1==numberOfInputs},SimpleFloatingFilter2.prototype.isTypeEditable=function(type){var uneditableTypes=[SimpleFilter.IN_RANGE,SimpleFilter.EMPTY,SimpleFilter.BLANK,SimpleFilter.NOT_BLANK];return!!type&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(type)&&uneditableTypes.indexOf(type)<0},SimpleFloatingFilter2}(Component),__extends$2x=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2e=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},DateFloatingFilter=function(_super){function DateFloatingFilter2(){return _super.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>\n                <div ref="eDateWrapper" style="display: flex;"></div>\n            </div>')||this}return __extends$2x(DateFloatingFilter2,_super),__name(DateFloatingFilter2,"DateFloatingFilter"),DateFloatingFilter2.prototype.getDefaultFilterOptions=function(){return DateFilter.DEFAULT_FILTER_OPTIONS},DateFloatingFilter2.prototype.init=function(params){_super.prototype.init.call(this,params),this.params=params,this.filterParams=params.filterParams,this.createDateComponent();var translate=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(translate("ariaDateFilterInput","Date Filter Input")),this.filterModelFormatter=new DateFilterModelFormatter(this.filterParams,this.localeService,this.optionsFactory)},DateFloatingFilter2.prototype.setEditable=function(editable){setDisplayed(this.eDateWrapper,editable),setDisplayed(this.eReadOnlyText.getGui(),!editable)},DateFloatingFilter2.prototype.onParentModelChanged=function(model,event){if(!this.isEventFromFloatingFilter(event)&&!this.isEventFromDataChange(event)){_super.prototype.setLastTypeFromModel.call(this,model);var allowEditing=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(model);if(this.setEditable(allowEditing),allowEditing){if(model){var dateModel=model;this.dateComp.setDate(parseDateTimeFromString(dateModel.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(model)),this.dateComp.setDate(null)}},DateFloatingFilter2.prototype.onDateChanged=function(){var _this=this,filterValueText=serialiseDate(this.dateComp.getDate());this.params.parentFilterInstance(function(filterInstance){if(filterInstance){var date=parseDateTimeFromString(filterValueText);filterInstance.onFloatingFilterChanged(_this.getLastType()||null,date)}})},DateFloatingFilter2.prototype.createDateComponent=function(){var _this=this,debounceMs=ProvidedFilter.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),dateComponentParams={onDateChanged:debounce(this.onDateChanged.bind(this),debounceMs),filterParams:this.params.column.getColDef().filterParams};this.dateComp=new DateCompWrapper(this.getContext(),this.userComponentFactory,dateComponentParams,this.eDateWrapper),this.addDestroyFunc(function(){return _this.dateComp.destroy()})},DateFloatingFilter2.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},__decorate$2e([Autowired("userComponentFactory")],DateFloatingFilter2.prototype,"userComponentFactory",void 0),__decorate$2e([RefSelector("eReadOnlyText")],DateFloatingFilter2.prototype,"eReadOnlyText",void 0),__decorate$2e([RefSelector("eDateWrapper")],DateFloatingFilter2.prototype,"eDateWrapper",void 0),DateFloatingFilter2}(SimpleFloatingFilter),__extends$2w=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),DefaultDateComponent=function(_super){function DefaultDateComponent2(){return _super.call(this,'\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>\n            </div>')||this}return __extends$2w(DefaultDateComponent2,_super),__name(DefaultDateComponent2,"DefaultDateComponent"),DefaultDateComponent2.prototype.destroy=function(){_super.prototype.destroy.call(this)},DefaultDateComponent2.prototype.init=function(params){var _this=this,eDocument=this.gridOptionsService.getDocument(),inputElement=this.eDateInput.getInputElement(),shouldUseBrowserDatePicker=this.shouldUseBrowserDatePicker(params);shouldUseBrowserDatePicker&&(inputElement.type="date");var usingSafariDatePicker=shouldUseBrowserDatePicker&&isBrowserSafari();this.addManagedListener(inputElement,"mousedown",function(){_this.eDateInput.isDisabled()||usingSafariDatePicker||inputElement.focus()}),this.addManagedListener(inputElement,"input",function(e){e.target===eDocument.activeElement&&(_this.eDateInput.isDisabled()||params.onDateChanged())});var _a=params.filterParams||{},minValidYear=_a.minValidYear,maxValidYear=_a.maxValidYear;minValidYear&&(inputElement.min=minValidYear+"-01-01"),maxValidYear&&(inputElement.max=maxValidYear+"-12-31")},DefaultDateComponent2.prototype.getDate=function(){return parseDateTimeFromString(this.eDateInput.getValue())},DefaultDateComponent2.prototype.setDate=function(date){this.eDateInput.setValue(serialiseDate(date,!1))},DefaultDateComponent2.prototype.setInputPlaceholder=function(placeholder){this.eDateInput.setInputPlaceholder(placeholder)},DefaultDateComponent2.prototype.setDisabled=function(disabled){this.eDateInput.setDisabled(disabled)},DefaultDateComponent2.prototype.afterGuiAttached=function(params){(!params||!params.suppressFocus)&&this.eDateInput.getInputElement().focus()},DefaultDateComponent2.prototype.shouldUseBrowserDatePicker=function(params){return params.filterParams&&null!=params.filterParams.browserDatePicker?params.filterParams.browserDatePicker:isBrowserChrome()||isBrowserFirefox()||isBrowserSafari()&&getSafariVersion()>=14.1},function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([RefSelector("eDateInput")],DefaultDateComponent2.prototype,"eDateInput",void 0),DefaultDateComponent2}(Component),__extends$2v=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2c=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},NumberFilterModelFormatter=function(_super){function NumberFilterModelFormatter2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2v(NumberFilterModelFormatter2,_super),__name(NumberFilterModelFormatter2,"NumberFilterModelFormatter"),NumberFilterModelFormatter2.prototype.conditionToString=function(condition,options){var numberOfInputs=(options||{}).numberOfInputs;return condition.type==SimpleFilter.IN_RANGE||2===numberOfInputs?condition.filter+"-"+condition.filterTo:null!=condition.filter?""+condition.filter:""+condition.type},NumberFilterModelFormatter2}(SimpleFilterModelFormatter),NumberFilter=function(_super){function NumberFilter2(){return _super.call(this,"numberFilter")||this}return __extends$2v(NumberFilter2,_super),__name(NumberFilter2,"NumberFilter"),NumberFilter2.prototype.mapValuesFromModel=function(filterModel){var _a=filterModel||{},filter=_a.filter,filterTo=_a.filterTo,type=_a.type;return[filter??null,filterTo??null].slice(0,this.getNumberOfInputs(type))},NumberFilter2.prototype.getDefaultDebounceMs=function(){return 500},NumberFilter2.prototype.comparator=function(){return function(left,right){return left===right?0:left<right?1:-1}},NumberFilter2.prototype.setParams=function(params){this.numberFilterParams=params;var allowedCharPattern=this.getAllowedCharPattern();if(allowedCharPattern){var config={allowedCharPattern};this.resetTemplate({"eValue-index0-1":config,"eValue-index1-1":config,"eValue-index0-2":config,"eValue-index1-2":config})}_super.prototype.setParams.call(this,params),this.filterModelFormatter=new NumberFilterModelFormatter(this.localeService,this.optionsFactory)},NumberFilter2.prototype.getDefaultFilterOptions=function(){return NumberFilter2.DEFAULT_FILTER_OPTIONS},NumberFilter2.prototype.createValueTemplate=function(position){var pos=position===ConditionPosition.One?"1":"2",agElementTag=this.getAllowedCharPattern()?"ag-input-text-field":"ag-input-number-field";return'\n            <div class="ag-filter-body" ref="eCondition'+pos+'Body" role="presentation">\n                <'+agElementTag+' class="ag-filter-from ag-filter-filter" ref="eValue-index0-'+pos+'"></'+agElementTag+">\n                <"+agElementTag+' class="ag-filter-to ag-filter-filter" ref="eValue-index1-'+pos+'"></'+agElementTag+">\n            </div>"},NumberFilter2.prototype.getValues=function(position){var _this=this,result=[];return this.forEachInput(function(element,index,elPosition,numberOfInputs){position===elPosition&&index<numberOfInputs&&result.push(_this.stringToFloat(element.getValue()))}),result},NumberFilter2.prototype.areSimpleModelsEqual=function(aSimple,bSimple){return aSimple.filter===bSimple.filter&&aSimple.filterTo===bSimple.filterTo&&aSimple.type===bSimple.type},NumberFilter2.prototype.getFilterType=function(){return"number"},NumberFilter2.prototype.stringToFloat=function(value){if("number"==typeof value)return value;var filterText=makeNull(value);return null!=filterText&&""===filterText.trim()&&(filterText=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(filterText):null==filterText||"-"===filterText.trim()?null:parseFloat(filterText)},NumberFilter2.prototype.createCondition=function(position){var type=this.getConditionTypes()[position],model={filterType:this.getFilterType(),type},values2=this.getValues(position);return values2.length>0&&(model.filter=values2[0]),values2.length>1&&(model.filterTo=values2[1]),model},NumberFilter2.prototype.getInputs=function(){return[[this.eValueFrom1,this.eValueTo1],[this.eValueFrom2,this.eValueTo2]]},NumberFilter2.prototype.getAllowedCharPattern=function(){return(this.numberFilterParams||{}).allowedCharPattern||(isBrowserChrome()?null:"\\d\\-\\.")},NumberFilter2.prototype.getModelAsString=function(model){var _a;return null!==(_a=this.filterModelFormatter.getModelAsString(model))&&void 0!==_a?_a:""},NumberFilter2.DEFAULT_FILTER_OPTIONS=[ScalarFilter.EQUALS,ScalarFilter.NOT_EQUAL,ScalarFilter.LESS_THAN,ScalarFilter.LESS_THAN_OR_EQUAL,ScalarFilter.GREATER_THAN,ScalarFilter.GREATER_THAN_OR_EQUAL,ScalarFilter.IN_RANGE,ScalarFilter.BLANK,ScalarFilter.NOT_BLANK],__decorate$2c([RefSelector("eValue-index0-1")],NumberFilter2.prototype,"eValueFrom1",void 0),__decorate$2c([RefSelector("eValue-index1-1")],NumberFilter2.prototype,"eValueTo1",void 0),__decorate$2c([RefSelector("eValue-index0-2")],NumberFilter2.prototype,"eValueFrom2",void 0),__decorate$2c([RefSelector("eValue-index1-2")],NumberFilter2.prototype,"eValueTo2",void 0),NumberFilter2}(ScalarFilter),__extends$2u=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$e=function(){return __assign$e=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$e.apply(this,arguments)},__decorate$2b=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},TextFilterModelFormatter=function(_super){function TextFilterModelFormatter2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2u(TextFilterModelFormatter2,_super),__name(TextFilterModelFormatter2,"TextFilterModelFormatter"),TextFilterModelFormatter2.prototype.conditionToString=function(condition,options){var numberOfInputs=(options||{}).numberOfInputs;return condition.type==SimpleFilter.IN_RANGE||2===numberOfInputs?condition.filter+"-"+condition.filterTo:null!=condition.filter?""+condition.filter:""+condition.type},TextFilterModelFormatter2}(SimpleFilterModelFormatter),TextFilter=function(_super){function TextFilter2(){return _super.call(this,"textFilter")||this}return __extends$2u(TextFilter2,_super),__name(TextFilter2,"TextFilter"),TextFilter2.trimInput=function(value){var trimmedInput=value&&value.trim();return""===trimmedInput?value:trimmedInput},TextFilter2.prototype.getDefaultDebounceMs=function(){return 500},TextFilter2.prototype.setParams=function(params){_super.prototype.setParams.call(this,params),this.textFilterParams=params,this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?TextFilter2.DEFAULT_FORMATTER:TextFilter2.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new TextFilterModelFormatter(this.localeService,this.optionsFactory)},TextFilter2.prototype.getTextMatcher=function(){var legacyComparator=this.textFilterParams.textCustomComparator;return legacyComparator?(_.doOnce(function(){return console.warn("AG Grid - textCustomComparator is deprecated, use textMatcher instead.")},"textCustomComparator.deprecated"),function(_a){var filterOption=_a.filterOption,value=_a.value,filterText=_a.filterText;return legacyComparator(filterOption,value,filterText)}):this.textFilterParams.textMatcher||TextFilter2.DEFAULT_MATCHER},TextFilter2.prototype.createCondition=function(position){var type=this.getConditionTypes()[position],model={filterType:this.getFilterType(),type},values2=this.getValues(position);return values2.length>0&&(model.filter=values2[0]),values2.length>1&&(model.filterTo=values2[1]),model},TextFilter2.prototype.getFilterType=function(){return"text"},TextFilter2.prototype.areSimpleModelsEqual=function(aSimple,bSimple){return aSimple.filter===bSimple.filter&&aSimple.filterTo===bSimple.filterTo&&aSimple.type===bSimple.type},TextFilter2.prototype.getInputs=function(){return[[this.eValueFrom1,this.eValueTo1],[this.eValueFrom2,this.eValueTo2]]},TextFilter2.prototype.getValues=function(position){var _this=this,result=[];return this.forEachInput(function(element,index,elPosition,numberOfInputs){if(position===elPosition&&index<numberOfInputs){var value=makeNull(element.getValue()),cleanValue=(_this.textFilterParams.trimInput?TextFilter2.trimInput(value):value)||null;result.push(cleanValue),element.setValue(cleanValue,!0)}}),result},TextFilter2.prototype.getDefaultFilterOptions=function(){return TextFilter2.DEFAULT_FILTER_OPTIONS},TextFilter2.prototype.createValueTemplate=function(position){var pos=position===ConditionPosition.One?"1":"2";return'\n            <div class="ag-filter-body" ref="eCondition'+pos+'Body" role="presentation">\n                <ag-input-text-field class=".ag-filter-from ag-filter-filter" ref="eValue-index0-'+pos+'"></ag-input-text-field>\n                <ag-input-text-field class="ag-filter-to ag-filter-filter" ref="eValue-index1-'+pos+'"></ag-input-text-field>\n            </div>'},TextFilter2.prototype.mapValuesFromModel=function(filterModel){var _a=filterModel||{},filter=_a.filter,filterTo=_a.filterTo,type=_a.type;return[filter||null,filterTo||null].slice(0,this.getNumberOfInputs(type))},TextFilter2.prototype.evaluateNullValue=function(filterType){var filterTypesAllowNulls=[SimpleFilter.NOT_EQUAL,SimpleFilter.NOT_CONTAINS,SimpleFilter.BLANK];return!!filterType&&filterTypesAllowNulls.indexOf(filterType)>=0},TextFilter2.prototype.evaluateNonNullValue=function(values2,cellValue,filterModel,params){var _this=this,formattedValues=values2.map(function(v){return _this.formatter(v)})||[],cellValueFormatted=this.formatter(cellValue),_a=this.textFilterParams,api=_a.api,colDef=_a.colDef,column=_a.column,columnApi=_a.columnApi,context=_a.context,textFormatter=_a.textFormatter;if(filterModel.type===SimpleFilter.BLANK)return this.isBlank(cellValue);if(filterModel.type===SimpleFilter.NOT_BLANK)return!this.isBlank(cellValue);var matcherParams={api,colDef,column,columnApi,context,node:params.node,data:params.data,filterOption:filterModel.type,value:cellValueFormatted,textFormatter};return formattedValues.some(function(v){return _this.matcher(__assign$e(__assign$e({},matcherParams),{filterText:v}))})},TextFilter2.prototype.getModelAsString=function(model){var _a;return null!==(_a=this.filterModelFormatter.getModelAsString(model))&&void 0!==_a?_a:""},TextFilter2.DEFAULT_FILTER_OPTIONS=[SimpleFilter.CONTAINS,SimpleFilter.NOT_CONTAINS,SimpleFilter.EQUALS,SimpleFilter.NOT_EQUAL,SimpleFilter.STARTS_WITH,SimpleFilter.ENDS_WITH,SimpleFilter.BLANK,SimpleFilter.NOT_BLANK],TextFilter2.DEFAULT_FORMATTER=function(from){return from},TextFilter2.DEFAULT_LOWERCASE_FORMATTER=function(from){return null==from?null:from.toString().toLowerCase()},TextFilter2.DEFAULT_MATCHER=function(_a){var filterOption=_a.filterOption,value=_a.value,filterText=_a.filterText;if(null==filterText)return!1;switch(filterOption){case TextFilter2.CONTAINS:return value.indexOf(filterText)>=0;case TextFilter2.NOT_CONTAINS:return value.indexOf(filterText)<0;case TextFilter2.EQUALS:return value===filterText;case TextFilter2.NOT_EQUAL:return value!=filterText;case TextFilter2.STARTS_WITH:return 0===value.indexOf(filterText);case TextFilter2.ENDS_WITH:var index=value.lastIndexOf(filterText);return index>=0&&index===value.length-filterText.length;default:return!1}},__decorate$2b([RefSelector("eValue-index0-1")],TextFilter2.prototype,"eValueFrom1",void 0),__decorate$2b([RefSelector("eValue-index1-1")],TextFilter2.prototype,"eValueTo1",void 0),__decorate$2b([RefSelector("eValue-index0-2")],TextFilter2.prototype,"eValueFrom2",void 0),__decorate$2b([RefSelector("eValue-index1-2")],TextFilter2.prototype,"eValueTo2",void 0),TextFilter2}(SimpleFilter),__extends$2t=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2a=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},TextInputFloatingFilter=function(_super){function TextInputFloatingFilter2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2t(TextInputFloatingFilter2,_super),__name(TextInputFloatingFilter2,"TextInputFloatingFilter"),TextInputFloatingFilter2.prototype.postConstruct=function(){this.resetTemplate()},TextInputFloatingFilter2.prototype.resetTemplate=function(paramsMap){this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterInput"></ag-input-text-field>\n            </div>\n        ',paramsMap)},TextInputFloatingFilter2.prototype.getDefaultDebounceMs=function(){return 500},TextInputFloatingFilter2.prototype.onParentModelChanged=function(model,event){this.isEventFromFloatingFilter(event)||this.isEventFromDataChange(event)||(this.setLastTypeFromModel(model),this.eFloatingFilterInput.setValue(this.getFilterModelFormatter().getModelAsString(model)),this.setEditable(this.canWeEditAfterModelFromParentFilter(model)))},TextInputFloatingFilter2.prototype.init=function(params){_super.prototype.init.call(this,params),this.params=params,this.applyActive=ProvidedFilter.isUseApplyButton(this.params.filterParams);var allowedCharPattern=this.params.filterParams.allowedCharPattern;if(null!=allowedCharPattern&&this.resetTemplate({eFloatingFilterInput:{allowedCharPattern}}),!this.isReadOnly()){var debounceMs=ProvidedFilter.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),toDebounce=debounce(this.syncUpWithParentFilter.bind(this),debounceMs),filterGui=this.eFloatingFilterInput.getGui();this.addManagedListener(filterGui,"input",toDebounce),this.addManagedListener(filterGui,"keypress",toDebounce),this.addManagedListener(filterGui,"keydown",toDebounce)}var columnDef=params.column.getDefinition();(this.isReadOnly()||columnDef.filterParams&&columnDef.filterParams.filterOptions&&1===columnDef.filterParams.filterOptions.length&&"inRange"===columnDef.filterParams.filterOptions[0])&&this.eFloatingFilterInput.setDisabled(!0);var displayName=this.columnModel.getDisplayNameForColumn(params.column,"header",!0),translate=this.localeService.getLocaleTextFunc();this.eFloatingFilterInput.setInputAriaLabel(displayName+" "+translate("ariaFilterInput","Filter Input"))},TextInputFloatingFilter2.prototype.syncUpWithParentFilter=function(e){var _this=this,enterKeyPressed=e.key===KeyCode.ENTER;if(!this.applyActive||enterKeyPressed){var value=this.eFloatingFilterInput.getValue();this.params.filterParams.trimInput&&(value=TextFilter.trimInput(value),this.eFloatingFilterInput.setValue(value,!0)),this.params.parentFilterInstance(function(filterInstance){filterInstance&&filterInstance.onFloatingFilterChanged(_this.getLastType()||null,value||null)})}},TextInputFloatingFilter2.prototype.setEditable=function(editable){this.eFloatingFilterInput.setDisabled(!editable)},__decorate$2a([Autowired("columnModel")],TextInputFloatingFilter2.prototype,"columnModel",void 0),__decorate$2a([RefSelector("eFloatingFilterInput")],TextInputFloatingFilter2.prototype,"eFloatingFilterInput",void 0),__decorate$2a([PostConstruct],TextInputFloatingFilter2.prototype,"postConstruct",null),TextInputFloatingFilter2}(SimpleFloatingFilter),__extends$2s=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),NumberFloatingFilter=function(_super){function NumberFloatingFilter2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2s(NumberFloatingFilter2,_super),__name(NumberFloatingFilter2,"NumberFloatingFilter"),NumberFloatingFilter2.prototype.init=function(params){_super.prototype.init.call(this,params),this.filterModelFormatter=new NumberFilterModelFormatter(this.localeService,this.optionsFactory)},NumberFloatingFilter2.prototype.getDefaultFilterOptions=function(){return NumberFilter.DEFAULT_FILTER_OPTIONS},NumberFloatingFilter2.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},NumberFloatingFilter2}(TextInputFloatingFilter),__extends$2r=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),TextFloatingFilter=function(_super){function TextFloatingFilter2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2r(TextFloatingFilter2,_super),__name(TextFloatingFilter2,"TextFloatingFilter"),TextFloatingFilter2.prototype.init=function(params){_super.prototype.init.call(this,params),this.filterModelFormatter=new TextFilterModelFormatter(this.localeService,this.optionsFactory)},TextFloatingFilter2.prototype.getDefaultFilterOptions=function(){return TextFilter.DEFAULT_FILTER_OPTIONS},TextFloatingFilter2.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},TextFloatingFilter2}(TextInputFloatingFilter),TouchListener=function(){function TouchListener2(eElement,preventMouseClick){var _this=this;void 0===preventMouseClick&&(preventMouseClick=!1),this.destroyFuncs=[],this.touching=!1,this.eventService=new EventService,this.eElement=eElement,this.preventMouseClick=preventMouseClick;var startListener=this.onTouchStart.bind(this),moveListener=this.onTouchMove.bind(this),endListener=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",startListener,{passive:!0}),this.eElement.addEventListener("touchmove",moveListener,{passive:!0}),this.eElement.addEventListener("touchend",endListener,{passive:!1}),this.destroyFuncs.push(function(){_this.eElement.removeEventListener("touchstart",startListener,{passive:!0}),_this.eElement.removeEventListener("touchmove",moveListener,{passive:!0}),_this.eElement.removeEventListener("touchend",endListener,{passive:!1})})}return __name(TouchListener2,"TouchListener"),TouchListener2.prototype.getActiveTouch=function(touchList){for(var i=0;i<touchList.length;i++){if(touchList[i].identifier===this.touchStart.identifier)return touchList[i]}return null},TouchListener2.prototype.addEventListener=function(eventType,listener){this.eventService.addEventListener(eventType,listener)},TouchListener2.prototype.removeEventListener=function(eventType,listener){this.eventService.removeEventListener(eventType,listener)},TouchListener2.prototype.onTouchStart=function(touchEvent){var _this=this;if(!this.touching){this.touchStart=touchEvent.touches[0],this.touching=!0,this.moved=!1;var touchStartCopy=this.touchStart;window.setTimeout(function(){var touchesMatch=_this.touchStart===touchStartCopy;if(_this.touching&&touchesMatch&&!_this.moved){_this.moved=!0;var event_1={type:TouchListener2.EVENT_LONG_TAP,touchStart:_this.touchStart,touchEvent};_this.eventService.dispatchEvent(event_1)}},500)}},TouchListener2.prototype.onTouchMove=function(touchEvent){if(this.touching){var touch=this.getActiveTouch(touchEvent.touches);if(touch)!areEventsNear(touch,this.touchStart,4)&&(this.moved=!0)}},TouchListener2.prototype.onTouchEnd=function(touchEvent){if(this.touching){if(!this.moved){var event_2={type:TouchListener2.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(event_2),this.checkForDoubleTap()}this.preventMouseClick&&touchEvent.cancelable&&touchEvent.preventDefault(),this.touching=!1}},TouchListener2.prototype.checkForDoubleTap=function(){var now=(new Date).getTime();if(this.lastTapTime&&this.lastTapTime>0)if(now-this.lastTapTime>TouchListener2.DOUBLE_TAP_MILLIS){var event_3={type:TouchListener2.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(event_3),this.lastTapTime=null}else this.lastTapTime=now;else this.lastTapTime=now},TouchListener2.prototype.destroy=function(){this.destroyFuncs.forEach(function(func){return func()})},TouchListener2.EVENT_TAP="tap",TouchListener2.EVENT_DOUBLE_TAP="doubleTap",TouchListener2.EVENT_LONG_TAP="longTap",TouchListener2.DOUBLE_TAP_MILLIS=500,TouchListener2}(),__extends$2q=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$29=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SortIndicatorComp=function(_super){function SortIndicatorComp2(skipTemplate){var _this=_super.call(this)||this;return skipTemplate||_this.setTemplate(SortIndicatorComp2.TEMPLATE),_this}return __extends$2q(SortIndicatorComp2,_super),__name(SortIndicatorComp2,"SortIndicatorComp"),SortIndicatorComp2.prototype.attachCustomElements=function(eSortOrder,eSortAsc,eSortDesc,eSortMixed,eSortNone){this.eSortOrder=eSortOrder,this.eSortAsc=eSortAsc,this.eSortDesc=eSortDesc,this.eSortMixed=eSortMixed,this.eSortNone=eSortNone},SortIndicatorComp2.prototype.setupSort=function(column,suppressOrder){var _this=this;void 0===suppressOrder&&(suppressOrder=!1),this.column=column,this.suppressOrder=suppressOrder,this.setupMultiSortIndicator(),!!this.column.getColDef().sortable&&(this.addInIcon("sortAscending",this.eSortAsc,column),this.addInIcon("sortDescending",this.eSortDesc,column),this.addInIcon("sortUnSort",this.eSortNone,column),this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,function(){return _this.onSortChanged()}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return _this.onSortChanged()}),this.onSortChanged())},SortIndicatorComp2.prototype.addInIcon=function(iconName,eParent,column){if(null!=eParent){var eIcon=createIconNoSpan(iconName,this.gridOptionsService,column);eIcon&&eParent.appendChild(eIcon)}},SortIndicatorComp2.prototype.onSortChanged=function(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()},SortIndicatorComp2.prototype.updateIcons=function(){var sortDirection=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){var isAscending="asc"===sortDirection;setDisplayed(this.eSortAsc,isAscending,{skipAriaHidden:!0})}if(this.eSortDesc){var isDescending="desc"===sortDirection;setDisplayed(this.eSortDesc,isDescending,{skipAriaHidden:!0})}if(this.eSortNone){var alwaysHideNoSort=!this.column.getColDef().unSortIcon&&!this.gridOptionsService.is("unSortIcon"),isNone=null==sortDirection;setDisplayed(this.eSortNone,!alwaysHideNoSort&&isNone,{skipAriaHidden:!0})}},SortIndicatorComp2.prototype.setupMultiSortIndicator=function(){var _this=this;this.addInIcon("sortUnSort",this.eSortMixed,this.column);var isColumnShowingRowGroup=this.column.getColDef().showRowGroup;this.gridOptionsService.isColumnsSortingCoupledToGroup()&&isColumnShowingRowGroup&&(this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,function(){return _this.updateMultiSortIndicator()}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return _this.updateMultiSortIndicator()}),this.updateMultiSortIndicator())},SortIndicatorComp2.prototype.updateMultiSortIndicator=function(){if(this.eSortMixed){var isMixedSort="mixed"===this.sortController.getDisplaySortForColumn(this.column);setDisplayed(this.eSortMixed,isMixedSort,{skipAriaHidden:!0})}},SortIndicatorComp2.prototype.updateSortOrder=function(){var _a,_this=this;if(this.eSortOrder){var allColumnsWithSorting=this.sortController.getColumnsWithSortingOrdered(),indexThisCol=null!==(_a=this.sortController.getDisplaySortIndexForColumn(this.column))&&void 0!==_a?_a:-1,moreThanOneColSorting=allColumnsWithSorting.some(function(col){var _a2;return null!==(_a2=_this.sortController.getDisplaySortIndexForColumn(col))&&void 0!==_a2&&_a2}),showIndex=indexThisCol>=0&&moreThanOneColSorting;setDisplayed(this.eSortOrder,showIndex,{skipAriaHidden:!0}),indexThisCol>=0?this.eSortOrder.innerHTML=(indexThisCol+1).toString():clearElement(this.eSortOrder)}},SortIndicatorComp2.TEMPLATE='<span class="ag-sort-indicator-container">\n            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>\n        </span>',__decorate$29([RefSelector("eSortOrder")],SortIndicatorComp2.prototype,"eSortOrder",void 0),__decorate$29([RefSelector("eSortAsc")],SortIndicatorComp2.prototype,"eSortAsc",void 0),__decorate$29([RefSelector("eSortDesc")],SortIndicatorComp2.prototype,"eSortDesc",void 0),__decorate$29([RefSelector("eSortMixed")],SortIndicatorComp2.prototype,"eSortMixed",void 0),__decorate$29([RefSelector("eSortNone")],SortIndicatorComp2.prototype,"eSortNone",void 0),__decorate$29([Autowired("columnModel")],SortIndicatorComp2.prototype,"columnModel",void 0),__decorate$29([Autowired("sortController")],SortIndicatorComp2.prototype,"sortController",void 0),SortIndicatorComp2}(Component),__extends$2p=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$28=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderComp=function(_super){function HeaderComp2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.lastMovingChanged=0,_this}return __extends$2p(HeaderComp2,_super),__name(HeaderComp2,"HeaderComp"),HeaderComp2.prototype.destroy=function(){_super.prototype.destroy.call(this)},HeaderComp2.prototype.refresh=function(params){return this.params=params,this.workOutTemplate()==this.currentTemplate&&this.workOutShowMenu()==this.currentShowMenu&&this.workOutSort()==this.currentSort&&(this.setDisplayName(params),!0)},HeaderComp2.prototype.workOutTemplate=function(){var template=firstExistingValue(this.params.template,HeaderComp2.TEMPLATE);return template=template&&template.trim?template.trim():template},HeaderComp2.prototype.init=function(params){this.params=params,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setupIcons(params.column),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setDisplayName(params)},HeaderComp2.prototype.setDisplayName=function(params){if(this.currentDisplayName!=params.displayName){this.currentDisplayName=params.displayName;var displayNameSanitised=escapeString(this.currentDisplayName);this.eText&&(this.eText.innerHTML=displayNameSanitised)}},HeaderComp2.prototype.setupIcons=function(column){this.addInIcon("menu",this.eMenu,column),this.addInIcon("filter",this.eFilter,column)},HeaderComp2.prototype.addInIcon=function(iconName,eParent,column){if(null!=eParent){var eIcon=createIconNoSpan(iconName,this.gridOptionsService,column);eIcon&&eParent.appendChild(eIcon)}},HeaderComp2.prototype.setupTap=function(){var _this=this,gridOptionsService=this.gridOptionsService;if(!gridOptionsService.is("suppressTouch")){var touchListener=new TouchListener(this.getGui(),!0),suppressMenuHide=gridOptionsService.is("suppressMenuHide"),tapMenuButton=suppressMenuHide&&exists(this.eMenu),menuTouchListener=tapMenuButton?new TouchListener(this.eMenu,!0):touchListener;if(this.params.enableMenu){var eventType=tapMenuButton?"EVENT_TAP":"EVENT_LONG_TAP",showMenuFn=__name(function(event){gridOptionsService.api.showColumnMenuAfterMouseClick(_this.params.column,event.touchStart)},"showMenuFn");this.addManagedListener(menuTouchListener,TouchListener[eventType],showMenuFn)}if(this.params.enableSorting){var tapListener=__name(function(event){var target=event.touchStart.target;suppressMenuHide&&_this.eMenu.contains(target)||_this.sortController.progressSort(_this.params.column,!1,"uiColumnSorted")},"tapListener");this.addManagedListener(touchListener,TouchListener.EVENT_TAP,tapListener)}this.addDestroyFunc(function(){return touchListener.destroy()}),tapMenuButton&&this.addDestroyFunc(function(){return menuTouchListener.destroy()})}},HeaderComp2.prototype.workOutShowMenu=function(){var menuHides=!this.gridOptionsService.is("suppressMenuHide"),onIpadAndMenuHides=isIOSUserAgent()&&menuHides;return this.params.enableMenu&&!onIpadAndMenuHides},HeaderComp2.prototype.setMenu=function(){var _this=this;if(this.eMenu){if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu)return void removeFromParent(this.eMenu);var suppressMenuHide=this.gridOptionsService.is("suppressMenuHide");this.addManagedListener(this.eMenu,"click",function(){return _this.showMenu(_this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",suppressMenuHide)}},HeaderComp2.prototype.showMenu=function(eventSource){eventSource||(eventSource=this.eMenu),this.menuFactory.showMenuAfterButtonClick(this.params.column,eventSource,"columnMenu")},HeaderComp2.prototype.workOutSort=function(){return this.params.enableSorting},HeaderComp2.prototype.setupSort=function(){var _this=this;if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new SortIndicatorComp(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),this.currentSort){var sortUsingCtrl="ctrl"===this.gridOptionsService.get("multiSortKey");this.addManagedListener(this.params.column,Column.EVENT_MOVING_CHANGED,function(){_this.lastMovingChanged=(new Date).getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",function(event){var moving=_this.params.column.isMoving(),movedRecently=(new Date).getTime()-_this.lastMovingChanged<50;if(!(moving||movedRecently)){var multiSort=sortUsingCtrl?event.ctrlKey||event.metaKey:event.shiftKey;_this.params.progressSort(multiSort)}});var onSortingChanged=__name(function(){if(_this.addOrRemoveCssClass("ag-header-cell-sorted-asc",_this.params.column.isSortAscending()),_this.addOrRemoveCssClass("ag-header-cell-sorted-desc",_this.params.column.isSortDescending()),_this.addOrRemoveCssClass("ag-header-cell-sorted-none",_this.params.column.isSortNone()),_this.params.column.getColDef().showRowGroup){var sourceColumns=_this.columnModel.getSourceColumnsForGroupColumn(_this.params.column),isMultiSorting=!(null==sourceColumns?void 0:sourceColumns.every(function(sourceCol){return _this.params.column.getSort()==sourceCol.getSort()}));_this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",isMultiSorting)}},"onSortingChanged");this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,onSortingChanged),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,onSortingChanged)}},HeaderComp2.prototype.setupFilterIcon=function(){this.eFilter&&(this.addManagedListener(this.params.column,Column.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged())},HeaderComp2.prototype.onFilterChanged=function(){var filterPresent=this.params.column.isFilterActive();setDisplayed(this.eFilter,filterPresent,{skipAriaHidden:!0})},HeaderComp2.TEMPLATE='<div class="ag-cell-label-container" role="presentation">\n            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n            <div ref="eLabel" class="ag-header-cell-label" role="presentation">\n                <span ref="eText" class="ag-header-cell-text"></span>\n                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>\n            </div>\n        </div>',__decorate$28([Autowired("sortController")],HeaderComp2.prototype,"sortController",void 0),__decorate$28([Autowired("menuFactory")],HeaderComp2.prototype,"menuFactory",void 0),__decorate$28([Autowired("columnModel")],HeaderComp2.prototype,"columnModel",void 0),__decorate$28([RefSelector("eFilter")],HeaderComp2.prototype,"eFilter",void 0),__decorate$28([RefSelector("eSortIndicator")],HeaderComp2.prototype,"eSortIndicator",void 0),__decorate$28([RefSelector("eMenu")],HeaderComp2.prototype,"eMenu",void 0),__decorate$28([RefSelector("eLabel")],HeaderComp2.prototype,"eLabel",void 0),__decorate$28([RefSelector("eText")],HeaderComp2.prototype,"eText",void 0),__decorate$28([RefSelector("eSortOrder")],HeaderComp2.prototype,"eSortOrder",void 0),__decorate$28([RefSelector("eSortAsc")],HeaderComp2.prototype,"eSortAsc",void 0),__decorate$28([RefSelector("eSortDesc")],HeaderComp2.prototype,"eSortDesc",void 0),__decorate$28([RefSelector("eSortMixed")],HeaderComp2.prototype,"eSortMixed",void 0),__decorate$28([RefSelector("eSortNone")],HeaderComp2.prototype,"eSortNone",void 0),HeaderComp2}(Component),__extends$2o=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$27=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderGroupComp=function(_super){function HeaderGroupComp2(){return _super.call(this,HeaderGroupComp2.TEMPLATE)||this}return __extends$2o(HeaderGroupComp2,_super),__name(HeaderGroupComp2,"HeaderGroupComp"),HeaderGroupComp2.prototype.destroy=function(){_super.prototype.destroy.call(this)},HeaderGroupComp2.prototype.init=function(params){this.params=params,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()},HeaderGroupComp2.prototype.checkWarnings=function(){if(this.params.template){doOnce(function(){return console.warn("AG Grid: A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")},"HeaderGroupComp.templateNotSupported")}},HeaderGroupComp2.prototype.setupExpandIcons=function(){var _this=this;this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");var expandAction=__name(function(event){if(!isStopPropagationForAgGrid(event)){var newExpandedValue=!_this.params.columnGroup.isExpanded();_this.columnModel.setColumnGroupOpened(_this.params.columnGroup.getProvidedColumnGroup(),newExpandedValue,"uiColumnExpanded")}},"expandAction");this.addTouchAndClickListeners(this.eCloseIcon,expandAction),this.addTouchAndClickListeners(this.eOpenIcon,expandAction);var stopPropagationAction=__name(function(event){stopPropagationForAgGrid(event)},"stopPropagationAction");this.addManagedListener(this.eCloseIcon,"dblclick",stopPropagationAction),this.addManagedListener(this.eOpenIcon,"dblclick",stopPropagationAction),this.addManagedListener(this.getGui(),"dblclick",expandAction),this.updateIconVisibility();var providedColumnGroup=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(providedColumnGroup,ProvidedColumnGroup.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(providedColumnGroup,ProvidedColumnGroup.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))},HeaderGroupComp2.prototype.addTouchAndClickListeners=function(eElement,action){var touchListener=new TouchListener(eElement,!0);this.addManagedListener(touchListener,TouchListener.EVENT_TAP,action),this.addDestroyFunc(function(){return touchListener.destroy()}),this.addManagedListener(eElement,"click",action)},HeaderGroupComp2.prototype.updateIconVisibility=function(){if(this.params.columnGroup.isExpandable()){var expanded=this.params.columnGroup.isExpanded();setDisplayed(this.eOpenIcon,expanded),setDisplayed(this.eCloseIcon,!expanded)}else setDisplayed(this.eOpenIcon,!1),setDisplayed(this.eCloseIcon,!1)},HeaderGroupComp2.prototype.addInIcon=function(iconName,refName){var eIcon=createIconNoSpan(iconName,this.gridOptionsService,null);eIcon&&this.getRefElement(refName).appendChild(eIcon)},HeaderGroupComp2.prototype.addGroupExpandIcon=function(){if(!this.params.columnGroup.isExpandable())return setDisplayed(this.eOpenIcon,!1),void setDisplayed(this.eCloseIcon,!1)},HeaderGroupComp2.prototype.setupLabel=function(){var displayName=this.params.displayName;if(exists(displayName)){var displayNameSanitised=escapeString(displayName);this.getRefElement("agLabel").innerHTML=displayNameSanitised}},HeaderGroupComp2.TEMPLATE='<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">\n            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>',__decorate$27([Autowired("columnModel")],HeaderGroupComp2.prototype,"columnModel",void 0),__decorate$27([RefSelector("agOpened")],HeaderGroupComp2.prototype,"eOpenIcon",void 0),__decorate$27([RefSelector("agClosed")],HeaderGroupComp2.prototype,"eCloseIcon",void 0),HeaderGroupComp2}(Component),__extends$2n=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),PopupComponent=function(_super){function PopupComponent2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2n(PopupComponent2,_super),__name(PopupComponent2,"PopupComponent"),PopupComponent2.prototype.isPopup=function(){return!0},PopupComponent2.prototype.setParentComponent=function(container){container.addCssClass("ag-has-popup"),_super.prototype.setParentComponent.call(this,container)},PopupComponent2.prototype.destroy=function(){var parentComp=this.parentComponent;parentComp&&parentComp.isAlive()&&parentComp.getGui().classList.remove("ag-has-popup"),_super.prototype.destroy.call(this)},PopupComponent2}(Component),__extends$2m=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),LargeTextCellEditor=function(_super){function LargeTextCellEditor2(){return _super.call(this,LargeTextCellEditor2.TEMPLATE)||this}return __extends$2m(LargeTextCellEditor2,_super),__name(LargeTextCellEditor2,"LargeTextCellEditor"),LargeTextCellEditor2.prototype.init=function(params){this.params=params,this.focusAfterAttached=params.cellStartedEdit,this.eTextArea.setMaxLength(params.maxLength||200).setCols(params.cols||60).setRows(params.rows||10),exists(params.value,!0)&&this.eTextArea.setValue(params.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this))},LargeTextCellEditor2.prototype.onKeyDown=function(event){var key=event.key;(key===KeyCode.LEFT||key===KeyCode.UP||key===KeyCode.RIGHT||key===KeyCode.DOWN||event.shiftKey&&key===KeyCode.ENTER)&&event.stopPropagation()},LargeTextCellEditor2.prototype.afterGuiAttached=function(){var translate=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(translate("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()},LargeTextCellEditor2.prototype.getValue=function(){return this.params.parseValue(this.eTextArea.getValue())},LargeTextCellEditor2.TEMPLATE='<div class="ag-large-text" tabindex="0">\n            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>',function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([RefSelector("eTextArea")],LargeTextCellEditor2.prototype,"eTextArea",void 0),LargeTextCellEditor2}(PopupComponent),__extends$2l=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$25=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SelectCellEditor=function(_super){function SelectCellEditor2(){var _this=_super.call(this,'<div class="ag-cell-edit-wrapper"><ag-select class="ag-cell-editor" ref="eSelect"></ag-select></div>')||this;return _this.startedByEnter=!1,_this}return __extends$2l(SelectCellEditor2,_super),__name(SelectCellEditor2,"SelectCellEditor"),SelectCellEditor2.prototype.init=function(params){var _this=this;if(this.focusAfterAttached=params.cellStartedEdit,missing(params.values))console.warn("AG Grid: no values found for select cellEditor");else{this.startedByEnter=null!=params.eventKey&&params.eventKey===KeyCode.ENTER;var hasValue=!1;params.values.forEach(function(value){var option={value},valueFormatted=_this.valueFormatterService.formatValue(params.column,null,value),valueFormattedExits=null!=valueFormatted;option.text=valueFormattedExits?valueFormatted:value,_this.eSelect.addOption(option),hasValue=hasValue||params.value===value}),hasValue?this.eSelect.setValue(params.value,!0):params.values.length&&this.eSelect.setValue(params.values[0],!0),"fullRow"!==this.gridOptionsService.get("editType")&&this.eSelect.onValueChange(function(){return params.stopEditing()})}},SelectCellEditor2.prototype.afterGuiAttached=function(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&this.eSelect.showPicker()},SelectCellEditor2.prototype.focusIn=function(){this.eSelect.getFocusableElement().focus()},SelectCellEditor2.prototype.getValue=function(){return this.eSelect.getValue()},SelectCellEditor2.prototype.isPopup=function(){return!1},__decorate$25([Autowired("valueFormatterService")],SelectCellEditor2.prototype,"valueFormatterService",void 0),__decorate$25([RefSelector("eSelect")],SelectCellEditor2.prototype,"eSelect",void 0),SelectCellEditor2}(PopupComponent),__extends$2k=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),TextCellEditor=function(_super){function TextCellEditor2(){return _super.call(this,TextCellEditor2.TEMPLATE)||this}return __extends$2k(TextCellEditor2,_super),__name(TextCellEditor2,"TextCellEditor"),TextCellEditor2.prototype.init=function(params){this.params=params;var startValue,eInput=this.eInput;params.cellStartedEdit?(this.focusAfterAttached=!0,params.eventKey===KeyCode.BACKSPACE||params.eventKey===KeyCode.DELETE?startValue="":params.charPress?startValue=params.charPress:(startValue=this.getStartValue(params),params.eventKey!==KeyCode.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,startValue=this.getStartValue(params)),null!=startValue&&eInput.setValue(startValue,!0),null!=params.maxLength&&eInput.setMaxLength(params.maxLength),this.addManagedListener(eInput.getGui(),"keydown",function(event){var key=event.key;(key===KeyCode.PAGE_UP||key===KeyCode.PAGE_DOWN)&&event.preventDefault()})},TextCellEditor2.prototype.afterGuiAttached=function(){var translate=this.localeService.getLocaleTextFunc(),eInput=this.eInput;if(eInput.setInputAriaLabel(translate("ariaInputEditor","Input Editor")),this.focusAfterAttached){isBrowserSafari()||eInput.getFocusableElement().focus();var inputEl=eInput.getInputElement();if(this.highlightAllOnFocus)inputEl.select();else{var value=eInput.getValue(),len=exists(value)&&value.length||0;len&&inputEl.setSelectionRange(len,len)}}},TextCellEditor2.prototype.focusIn=function(){var eInput=this.eInput,focusEl=eInput.getFocusableElement(),inputEl=eInput.getInputElement();focusEl.focus(),inputEl.select()},TextCellEditor2.prototype.getValue=function(){var eInput=this.eInput;return this.params.parseValue(eInput.getValue())},TextCellEditor2.prototype.getStartValue=function(params){return params.useFormatter||params.column.getColDef().refData?params.formatValue(params.value):params.value},TextCellEditor2.prototype.isPopup=function(){return!1},TextCellEditor2.TEMPLATE='<div class="ag-cell-edit-wrapper">\n            <ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>\n        </div>',function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([RefSelector("eInput")],TextCellEditor2.prototype,"eInput",void 0),TextCellEditor2}(PopupComponent),__extends$2j=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AnimateShowChangeCellRenderer=function(_super){function AnimateShowChangeCellRenderer2(){var _this=_super.call(this,AnimateShowChangeCellRenderer2.TEMPLATE)||this;return _this.refreshCount=0,_this}return __extends$2j(AnimateShowChangeCellRenderer2,_super),__name(AnimateShowChangeCellRenderer2,"AnimateShowChangeCellRenderer"),AnimateShowChangeCellRenderer2.prototype.init=function(params){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(params)},AnimateShowChangeCellRenderer2.prototype.showDelta=function(params,delta){var absDelta=Math.abs(delta),valueFormatted=params.formatValue(absDelta),valueToUse=exists(valueFormatted)?valueFormatted:absDelta,deltaUp=delta>=0;this.eDelta.innerHTML=deltaUp?"\u2191"+valueToUse:"\u2193"+valueToUse,this.eDelta.classList.toggle("ag-value-change-delta-up",deltaUp),this.eDelta.classList.toggle("ag-value-change-delta-down",!deltaUp)},AnimateShowChangeCellRenderer2.prototype.setTimerToRemoveDelta=function(){var _this=this;this.refreshCount++;var refreshCountCopy=this.refreshCount;window.setTimeout(function(){refreshCountCopy===_this.refreshCount&&_this.hideDeltaValue()},2e3)},AnimateShowChangeCellRenderer2.prototype.hideDeltaValue=function(){this.eValue.classList.remove("ag-value-change-value-highlight"),clearElement(this.eDelta)},AnimateShowChangeCellRenderer2.prototype.refresh=function(params){var value=params.value;if(value===this.lastValue||(exists(params.valueFormatted)?this.eValue.innerHTML=params.valueFormatted:exists(params.value)?this.eValue.innerHTML=value:clearElement(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering()))return!1;if("number"==typeof value&&"number"==typeof this.lastValue){var delta=value-this.lastValue;this.showDelta(params,delta)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),this.setTimerToRemoveDelta(),this.lastValue=value,!0},AnimateShowChangeCellRenderer2.TEMPLATE='<span><span class="ag-value-change-delta"></span><span class="ag-value-change-value"></span></span>',function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([Autowired("filterManager")],AnimateShowChangeCellRenderer2.prototype,"filterManager",void 0),AnimateShowChangeCellRenderer2}(Component),__extends$2i=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AnimateSlideCellRenderer=function(_super){function AnimateSlideCellRenderer2(){var _this=_super.call(this,AnimateSlideCellRenderer2.TEMPLATE)||this;return _this.refreshCount=0,_this.eCurrent=_this.queryForHtmlElement(".ag-value-slide-current"),_this}return __extends$2i(AnimateSlideCellRenderer2,_super),__name(AnimateSlideCellRenderer2,"AnimateSlideCellRenderer"),AnimateSlideCellRenderer2.prototype.init=function(params){this.refresh(params)},AnimateSlideCellRenderer2.prototype.addSlideAnimation=function(){var _this=this;this.refreshCount++;var refreshCountCopy=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious),this.ePrevious=loadTemplate('<span class="ag-value-slide-previous ag-value-slide-out"></span>'),this.ePrevious.innerHTML=this.eCurrent.innerHTML,this.getGui().insertBefore(this.ePrevious,this.eCurrent),window.setTimeout(function(){refreshCountCopy===_this.refreshCount&&_this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(function(){refreshCountCopy===_this.refreshCount&&(_this.getGui().removeChild(_this.ePrevious),_this.ePrevious=null)},3e3)},AnimateSlideCellRenderer2.prototype.refresh=function(params){var value=params.value;return missing(value)&&(value=""),value!==this.lastValue&&!this.filterManager.isSuppressFlashingCellsBecauseFiltering()&&(this.addSlideAnimation(),this.lastValue=value,exists(params.valueFormatted)?this.eCurrent.innerHTML=params.valueFormatted:exists(params.value)?this.eCurrent.innerHTML=value:clearElement(this.eCurrent),!0)},AnimateSlideCellRenderer2.TEMPLATE='<span>\n            <span class="ag-value-slide-current"></span>\n        </span>',function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([Autowired("filterManager")],AnimateSlideCellRenderer2.prototype,"filterManager",void 0),AnimateSlideCellRenderer2}(Component),__assign$d=function(){return __assign$d=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$d.apply(this,arguments)},RowNode=function(){function RowNode2(beans){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=RowNode2.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.selected=!1,this.beans=beans}return __name(RowNode2,"RowNode"),RowNode2.prototype.setData=function(data){this.setDataCommon(data,!1)},RowNode2.prototype.updateData=function(data){this.setDataCommon(data,!0)},RowNode2.prototype.setDataCommon=function(data,update){var oldData=this.data;this.data=data,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable();var event=this.createDataChangedEvent(data,oldData,update);this.dispatchLocalEvent(event)},RowNode2.prototype.updateDataOnDetailNode=function(){this.detailNode&&(this.detailNode.data=this.data)},RowNode2.prototype.createDataChangedEvent=function(newData,oldData,update){return{type:RowNode2.EVENT_DATA_CHANGED,node:this,oldData,newData,update}},RowNode2.prototype.createLocalRowEvent=function(type){return{type,node:this}},RowNode2.prototype.getRowIndexString=function(){return"top"===this.rowPinned?"t-"+this.rowIndex:"bottom"===this.rowPinned?"b-"+this.rowIndex:this.rowIndex.toString()},RowNode2.prototype.createDaemonNode=function(){var oldNode=new RowNode2(this.beans);return oldNode.id=this.id,oldNode.data=this.data,oldNode.__daemon=!0,oldNode.selected=this.selected,oldNode.level=this.level,oldNode},RowNode2.prototype.setDataAndId=function(data,id){var oldNode=exists(this.id)?this.createDaemonNode():null,oldData=this.data;this.data=data,this.updateDataOnDetailNode(),this.setId(id),this.beans.selectionService.syncInRowNode(this,oldNode),this.checkRowSelectable();var event=this.createDataChangedEvent(data,oldData,!1);this.dispatchLocalEvent(event)},RowNode2.prototype.checkRowSelectable=function(){var isRowSelectableFunc=this.beans.gridOptionsService.get("isRowSelectable");this.setRowSelectable(!isRowSelectableFunc||isRowSelectableFunc(this))},RowNode2.prototype.setRowSelectable=function(newVal){if(this.selectable!==newVal&&(this.selectable=newVal,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_SELECTABLE_CHANGED)),this.beans.gridOptionsService.is("groupSelectsChildren"))){var selected=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:selected??!1,source:"selectableChanged"})}},RowNode2.prototype.setId=function(id){var getRowIdFunc=this.beans.gridOptionsService.getRowIdFunc();if(getRowIdFunc)if(this.data){var parentKeys=this.getGroupKeys(!0);this.id=getRowIdFunc({data:this.data,parentKeys:parentKeys.length>0?parentKeys:void 0,level:this.level}),null!==this.id&&"string"==typeof this.id&&this.id.startsWith(RowNode2.ID_PREFIX_ROW_GROUP)&&console.error("AG Grid: Row IDs cannot start with "+RowNode2.ID_PREFIX_ROW_GROUP+", this is a reserved prefix for AG Grid's row grouping feature."),null!==this.id&&"string"!=typeof this.id&&(this.id=""+this.id)}else this.id=void 0;else this.id=id},RowNode2.prototype.getGroupKeys=function(excludeSelf){void 0===excludeSelf&&(excludeSelf=!1);var keys2=[],pointer=this;for(excludeSelf&&(pointer=pointer.parent);pointer&&pointer.level>=0;)keys2.push(pointer.key),pointer=pointer.parent;return keys2.reverse(),keys2},RowNode2.prototype.isPixelInRange=function(pixel){return!(!exists(this.rowTop)||!exists(this.rowHeight))&&(pixel>=this.rowTop&&pixel<this.rowTop+this.rowHeight)},RowNode2.prototype.setFirstChild=function(firstChild){this.firstChild!==firstChild&&(this.firstChild=firstChild,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_FIRST_CHILD_CHANGED)))},RowNode2.prototype.setLastChild=function(lastChild){this.lastChild!==lastChild&&(this.lastChild=lastChild,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_LAST_CHILD_CHANGED)))},RowNode2.prototype.setChildIndex=function(childIndex){this.childIndex!==childIndex&&(this.childIndex=childIndex,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_CHILD_INDEX_CHANGED)))},RowNode2.prototype.setRowTop=function(rowTop){this.oldRowTop=this.rowTop,this.rowTop!==rowTop&&(this.rowTop=rowTop,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_TOP_CHANGED)),this.setDisplayed(null!==rowTop))},RowNode2.prototype.clearRowTopAndRowIndex=function(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)},RowNode2.prototype.setDisplayed=function(displayed){this.displayed!==displayed&&(this.displayed=displayed,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_DISPLAYED_CHANGED)))},RowNode2.prototype.setDragging=function(dragging){this.dragging!==dragging&&(this.dragging=dragging,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_DRAGGING_CHANGED)))},RowNode2.prototype.setHighlighted=function(highlighted){highlighted!==this.highlighted&&(this.highlighted=highlighted,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_HIGHLIGHT_CHANGED)))},RowNode2.prototype.setAllChildrenCount=function(allChildrenCount){this.allChildrenCount!==allChildrenCount&&(this.allChildrenCount=allChildrenCount,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_ALL_CHILDREN_COUNT_CHANGED)))},RowNode2.prototype.setMaster=function(master){this.master!==master&&(this.master&&!master&&(this.expanded=!1),this.master=master,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_MASTER_CHANGED)))},RowNode2.prototype.setGroup=function(group){this.group!==group&&(this.group&&!group&&(this.expanded=!1),this.group=group,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_GROUP_CHANGED)))},RowNode2.prototype.setRowHeight=function(rowHeight,estimated){void 0===estimated&&(estimated=!1),this.rowHeight=rowHeight,this.rowHeightEstimated=estimated,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_HEIGHT_CHANGED))},RowNode2.prototype.setRowAutoHeight=function(cellHeight,column){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[column.getId()]=cellHeight,null!=cellHeight&&(null==this.checkAutoHeightsDebounced&&(this.checkAutoHeightsDebounced=debounce(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())},RowNode2.prototype.checkAutoHeights=function(){var notAllPresent=!1,nonePresent=!0,newRowHeight=0,autoHeights=this.__autoHeights;if(null!=autoHeights&&(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach(function(col){var cellHeight=autoHeights[col.getId()];null!=cellHeight?(nonePresent=!1,cellHeight>newRowHeight&&(newRowHeight=cellHeight)):notAllPresent=!0}),!notAllPresent&&((nonePresent||newRowHeight<10)&&(newRowHeight=this.beans.gridOptionsService.getRowHeightForNode(this).height),newRowHeight!=this.rowHeight))){this.setRowHeight(newRowHeight);var rowModel=this.beans.rowModel;rowModel.onRowHeightChangedDebounced&&rowModel.onRowHeightChangedDebounced()}},RowNode2.prototype.setRowIndex=function(rowIndex){this.rowIndex!==rowIndex&&(this.rowIndex=rowIndex,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_ROW_INDEX_CHANGED)))},RowNode2.prototype.setUiLevel=function(uiLevel){this.uiLevel!==uiLevel&&(this.uiLevel=uiLevel,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_UI_LEVEL_CHANGED)))},RowNode2.prototype.setExpanded=function(expanded,e){if(this.expanded!==expanded){this.expanded=expanded,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_EXPANDED_CHANGED));var event=Object.assign({},this.createGlobalRowEvent(Events.EVENT_ROW_GROUP_OPENED),{expanded,event:e||null});this.beans.rowNodeEventThrottle.dispatchExpanded(event),this.beans.gridOptionsService.is("groupIncludeFooter")&&this.beans.rowRenderer.refreshCells({rowNodes:[this]})}},RowNode2.prototype.createGlobalRowEvent=function(type){return{type,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned,context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi}},RowNode2.prototype.dispatchLocalEvent=function(event){this.eventService&&this.eventService.dispatchEvent(event)},RowNode2.prototype.setDataValue=function(colKey,newValue,eventSource){var column=this.beans.columnModel.getPrimaryColumn(colKey),oldValue=this.beans.valueService.getValue(column,this);if(this.beans.gridOptionsService.is("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(column,oldValue,newValue,eventSource),!1;var valueChanged=this.beans.valueService.setValue(this,column,newValue,eventSource);return this.dispatchCellChangedEvent(column,newValue,oldValue),this.checkRowSelectable(),valueChanged},RowNode2.prototype.dispatchEventForSaveValueReadOnly=function(column,oldValue,newValue,eventSource){var event={type:Events.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column,colDef:column.getColDef(),context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,data:this.data,node:this,oldValue,newValue,value:newValue,source:eventSource};this.beans.eventService.dispatchEvent(event)},RowNode2.prototype.setGroupValue=function(colKey,newValue){var column=this.beans.columnModel.getGridColumn(colKey);missing(this.groupData)&&(this.groupData={});var columnId=column.getColId(),oldValue=this.groupData[columnId];oldValue!==newValue&&(this.groupData[columnId]=newValue,this.dispatchCellChangedEvent(column,newValue,oldValue))},RowNode2.prototype.setAggData=function(newAggData){var _this=this,colIds=getAllKeysInObjects([this.aggData,newAggData]),oldAggData=this.aggData;this.aggData=newAggData,this.eventService&&colIds.forEach(function(colId){var column=_this.beans.columnModel.getGridColumn(colId),value=_this.aggData?_this.aggData[colId]:void 0,oldValue=oldAggData?oldAggData[colId]:void 0;_this.dispatchCellChangedEvent(column,value,oldValue)})},RowNode2.prototype.updateHasChildren=function(){var newValue=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gridOptionsService.isRowModelType("serverSide")){var isTreeData=this.beans.gridOptionsService.isTreeData(),isGroupFunc=this.beans.gridOptionsService.get("isServerSideGroup");newValue=!this.stub&&!this.footer&&(isTreeData?!!isGroupFunc&&isGroupFunc(this.data):!!this.group)}newValue!==this.__hasChildren&&(this.__hasChildren=!!newValue,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_HAS_CHILDREN_CHANGED)))},RowNode2.prototype.hasChildren=function(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren},RowNode2.prototype.isEmptyRowGroupNode=function(){return this.group&&missingOrEmpty(this.childrenAfterGroup)},RowNode2.prototype.dispatchCellChangedEvent=function(column,newValue,oldValue){var cellChangedEvent={type:RowNode2.EVENT_CELL_CHANGED,node:this,column,newValue,oldValue};this.dispatchLocalEvent(cellChangedEvent)},RowNode2.prototype.resetQuickFilterAggregateText=function(){this.quickFilterAggregateText=null},RowNode2.prototype.isExpandable=function(){return!!(this.hasChildren()&&!this.footer||this.master)},RowNode2.prototype.isSelected=function(){return this.footer?this.sibling.isSelected():this.selected},RowNode2.prototype.depthFirstSearch=function(callback){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(function(child){return child.depthFirstSearch(callback)}),callback(this)},RowNode2.prototype.calculateSelectedFromChildren=function(){var _a,atLeastOneSelected=!1,atLeastOneDeSelected=!1,atLeastOneMixed=!1;if(null===(_a=this.childrenAfterGroup)||void 0===_a||!_a.length)return this.selectable?this.selected:null;for(var i=0;i<this.childrenAfterGroup.length;i++){var child=this.childrenAfterGroup[i],childState=child.isSelected();if(!child.selectable){var selectable=child.calculateSelectedFromChildren();if(null===selectable)continue;childState=selectable}switch(childState){case!0:atLeastOneSelected=!0;break;case!1:atLeastOneDeSelected=!0;break;default:atLeastOneMixed=!0}}return atLeastOneMixed||atLeastOneSelected&&atLeastOneDeSelected?void 0:!!atLeastOneSelected||!atLeastOneDeSelected&&(this.selectable?this.selected:null)},RowNode2.prototype.setSelectedInitialValue=function(selected){this.selected=selected},RowNode2.prototype.setSelected=function(newValue,clearSelection,suppressFinishActions,source){void 0===clearSelection&&(clearSelection=!1),void 0===suppressFinishActions&&(suppressFinishActions=!1),void 0===source&&(source="api"),this.setSelectedParams({newValue,clearSelection,suppressFinishActions,rangeSelect:!1,source})},RowNode2.prototype.isRowPinned=function(){return"top"===this.rowPinned||"bottom"===this.rowPinned},RowNode2.prototype.setSelectedParams=function(params){var _a,_b,groupSelectsChildren=this.beans.gridOptionsService.is("groupSelectsChildren"),newValue=!0===params.newValue,clearSelection=!0===params.clearSelection,suppressFinishActions=!0===params.suppressFinishActions,rangeSelect=!0===params.rangeSelect,groupSelectsFiltered=groupSelectsChildren&&!0===params.groupSelectsFiltered,source=null!==(_a=params.source)&&void 0!==_a?_a:"api";if(void 0===this.id)return console.warn("AG Grid: cannot select node until id for node is known"),0;if(this.rowPinned)return console.warn("AG Grid: cannot select pinned rows"),0;if(this.footer)return this.sibling.setSelectedParams(params);if(rangeSelect&&this.beans.selectionService.getLastSelectedNode()){var newRowClicked=this.beans.selectionService.getLastSelectedNode()!==this,allowMultiSelect="multiple"===this.beans.gridOptionsService.get("rowSelection");if(newRowClicked&&allowMultiSelect){var nodesChanged=this.doRowRangeSelection(params.newValue,source);return this.beans.selectionService.setLastSelectedNode(this),nodesChanged}}var updatedCount=0;groupSelectsFiltered&&this.group||this.selectThisNode(newValue,params.event,source)&&updatedCount++;if(groupSelectsChildren&&!(null===(_b=this.childrenAfterGroup)||void 0===_b)&&_b.length&&(updatedCount+=this.selectChildNodes(newValue,groupSelectsFiltered,source)),!suppressFinishActions){if(newValue&&(clearSelection||"multiple"!==this.beans.gridOptionsService.get("rowSelection"))&&(updatedCount+=this.beans.selectionService.clearOtherNodes(this,source)),updatedCount>0){this.beans.selectionService.updateGroupsFromChildrenSelections(source);var event_1={type:Events.EVENT_SELECTION_CHANGED,source};this.beans.eventService.dispatchEvent(event_1)}newValue&&this.beans.selectionService.setLastSelectedNode(this)}return updatedCount},RowNode2.prototype.doRowRangeSelection=function(value,source){var _this=this;void 0===value&&(value=!0);var groupsSelectChildren=this.beans.gridOptionsService.is("groupSelectsChildren"),lastSelectedNode=this.beans.selectionService.getLastSelectedNode(),nodesToSelect=this.beans.rowModel.getNodesInRangeForSelection(this,lastSelectedNode),updatedCount=0;nodesToSelect.forEach(function(rowNode){rowNode.group&&groupsSelectChildren||!1===value&&_this===rowNode||rowNode.selectThisNode(value,void 0,source)&&updatedCount++}),this.beans.selectionService.updateGroupsFromChildrenSelections(source);var event={type:Events.EVENT_SELECTION_CHANGED,source};return this.beans.eventService.dispatchEvent(event),updatedCount},RowNode2.prototype.isParentOfNode=function(potentialParent){for(var parentNode=this.parent;parentNode;){if(parentNode===potentialParent)return!0;parentNode=parentNode.parent}return!1},RowNode2.prototype.selectThisNode=function(newValue,e,source){void 0===source&&(source="api");var selectionNotAllowed=!this.selectable&&newValue,selectionNotChanged=this.selected===newValue;if(selectionNotAllowed||selectionNotChanged)return!1;this.selected=newValue,this.eventService&&this.dispatchLocalEvent(this.createLocalRowEvent(RowNode2.EVENT_ROW_SELECTED));var event=__assign$d(__assign$d({},this.createGlobalRowEvent(Events.EVENT_ROW_SELECTED)),{event:e||null,source});return this.beans.eventService.dispatchEvent(event),!0},RowNode2.prototype.selectChildNodes=function(newValue,groupSelectsFiltered,source){var children=groupSelectsFiltered?this.childrenAfterAggFilter:this.childrenAfterGroup;if(missing(children))return 0;for(var updatedCount=0,i=0;i<children.length;i++)updatedCount+=children[i].setSelectedParams({newValue,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered,source});return updatedCount},RowNode2.prototype.addEventListener=function(eventType,listener){this.eventService||(this.eventService=new EventService),this.eventService.addEventListener(eventType,listener)},RowNode2.prototype.removeEventListener=function(eventType,listener){this.eventService&&(this.eventService.removeEventListener(eventType,listener),this.eventService.noRegisteredListenersExist()&&(this.eventService=null))},RowNode2.prototype.onMouseEnter=function(){this.dispatchLocalEvent(this.createLocalRowEvent(RowNode2.EVENT_MOUSE_ENTER))},RowNode2.prototype.onMouseLeave=function(){this.dispatchLocalEvent(this.createLocalRowEvent(RowNode2.EVENT_MOUSE_LEAVE))},RowNode2.prototype.getFirstChildOfFirstChild=function(rowGroupColumn){for(var currentRowNode=this,isCandidate=!0,foundFirstChildPath=!1,nodeToSwapIn=null;isCandidate&&!foundFirstChildPath;){var parentRowNode=currentRowNode.parent;exists(parentRowNode)&&currentRowNode.firstChild?parentRowNode.rowGroupColumn===rowGroupColumn&&(foundFirstChildPath=!0,nodeToSwapIn=parentRowNode):isCandidate=!1,currentRowNode=parentRowNode}return foundFirstChildPath?nodeToSwapIn:null},RowNode2.prototype.isFullWidthCell=function(){var isFullWidthCellFunc=this.getIsFullWidthCellFunc();return!!isFullWidthCellFunc&&isFullWidthCellFunc({rowNode:this})},RowNode2.prototype.getIsFullWidthCellFunc=function(){var isFullWidthRow=this.beans.gridOptionsService.getCallback("isFullWidthRow");if(isFullWidthRow)return isFullWidthRow;var isFullWidthCell=this.beans.gridOptionsService.get("isFullWidthCell");return isFullWidthCell?function(params){return isFullWidthCell(params.rowNode)}:void 0},RowNode2.prototype.getRoute=function(){if(null!=this.key){for(var res=[],pointer=this;null!=pointer.key;)res.push(pointer.key),pointer=pointer.parent;return res.reverse()}},RowNode2.prototype.createFooter=function(){var _this=this;if(!this.sibling){var footerNode=new RowNode2(this.beans);Object.keys(this).forEach(function(key){footerNode[key]=_this[key]}),footerNode.footer=!0,footerNode.setRowTop(null),footerNode.setRowIndex(null),footerNode.oldRowTop=null,footerNode.id="rowGroupFooter_"+this.id,footerNode.sibling=this,this.sibling=footerNode}},RowNode2.ID_PREFIX_ROW_GROUP="row-group-",RowNode2.ID_PREFIX_TOP_PINNED="t-",RowNode2.ID_PREFIX_BOTTOM_PINNED="b-",RowNode2.OBJECT_ID_SEQUENCE=0,RowNode2.EVENT_ROW_SELECTED="rowSelected",RowNode2.EVENT_DATA_CHANGED="dataChanged",RowNode2.EVENT_CELL_CHANGED="cellChanged",RowNode2.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged",RowNode2.EVENT_MASTER_CHANGED="masterChanged",RowNode2.EVENT_GROUP_CHANGED="groupChanged",RowNode2.EVENT_MOUSE_ENTER="mouseEnter",RowNode2.EVENT_MOUSE_LEAVE="mouseLeave",RowNode2.EVENT_HEIGHT_CHANGED="heightChanged",RowNode2.EVENT_TOP_CHANGED="topChanged",RowNode2.EVENT_DISPLAYED_CHANGED="displayedChanged",RowNode2.EVENT_FIRST_CHILD_CHANGED="firstChildChanged",RowNode2.EVENT_LAST_CHILD_CHANGED="lastChildChanged",RowNode2.EVENT_CHILD_INDEX_CHANGED="childIndexChanged",RowNode2.EVENT_ROW_INDEX_CHANGED="rowIndexChanged",RowNode2.EVENT_EXPANDED_CHANGED="expandedChanged",RowNode2.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged",RowNode2.EVENT_SELECTABLE_CHANGED="selectableChanged",RowNode2.EVENT_UI_LEVEL_CHANGED="uiLevelChanged",RowNode2.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged",RowNode2.EVENT_DRAGGING_CHANGED="draggingChanged",RowNode2}(),__extends$2h=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$c=function(){return __assign$c=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$c.apply(this,arguments)},__decorate$21=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},CheckboxSelectionComponent=function(_super){function CheckboxSelectionComponent2(){return _super.call(this,'\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n            </div>')||this}return __extends$2h(CheckboxSelectionComponent2,_super),__name(CheckboxSelectionComponent2,"CheckboxSelectionComponent"),CheckboxSelectionComponent2.prototype.postConstruct=function(){this.eCheckbox.setPassive(!0)},CheckboxSelectionComponent2.prototype.getCheckboxId=function(){return this.eCheckbox.getInputElement().id},CheckboxSelectionComponent2.prototype.onDataChanged=function(){this.onSelectionChanged()},CheckboxSelectionComponent2.prototype.onSelectableChanged=function(){this.showOrHideSelect()},CheckboxSelectionComponent2.prototype.onSelectionChanged=function(){var translate=this.localeService.getLocaleTextFunc(),state=this.rowNode.isSelected(),stateName=void 0===state?translate("ariaIndeterminate","indeterminate"):!0===state?translate("ariaChecked","checked"):translate("ariaUnchecked","unchecked"),ariaLabel=translate("ariaRowToggleSelection","Press Space to toggle row selection");this.eCheckbox.setValue(state,!0),this.eCheckbox.setInputAriaLabel(ariaLabel+" ("+stateName+")")},CheckboxSelectionComponent2.prototype.onCheckedClicked=function(event){var groupSelectsFiltered=this.gridOptionsService.is("groupSelectsFiltered");return this.rowNode.setSelectedParams({newValue:!1,rangeSelect:event.shiftKey,groupSelectsFiltered,event,source:"checkboxSelected"})},CheckboxSelectionComponent2.prototype.onUncheckedClicked=function(event){var groupSelectsFiltered=this.gridOptionsService.is("groupSelectsFiltered");return this.rowNode.setSelectedParams({newValue:!0,rangeSelect:event.shiftKey,groupSelectsFiltered,event,source:"checkboxSelected"})},CheckboxSelectionComponent2.prototype.init=function(params){var _this=this;if(this.rowNode=params.rowNode,this.column=params.column,this.overrides=params.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",function(event){stopPropagationForAgGrid(event)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",function(event){stopPropagationForAgGrid(event);var isSelected=_this.eCheckbox.getValue();void 0===_this.eCheckbox.getPreviousValue()||void 0===isSelected?0===_this.onUncheckedClicked(event||{})&&_this.onCheckedClicked(event):isSelected?_this.onCheckedClicked(event):_this.onUncheckedClicked(event||{})}),this.addManagedListener(this.rowNode,RowNode.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gridOptionsService.get("isRowSelectable")||"function"==typeof this.getIsVisible()){var showOrHideSelectListener=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,showOrHideSelectListener),this.addManagedListener(this.rowNode,RowNode.EVENT_DATA_CHANGED,showOrHideSelectListener),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,showOrHideSelectListener),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")},CheckboxSelectionComponent2.prototype.showOrHideSelect=function(){var _a,_b,_c,_d,selectable=this.rowNode.selectable,isVisible2=this.getIsVisible();if(selectable)if("function"==typeof isVisible2){var extraParams=null===(_a=this.overrides)||void 0===_a?void 0:_a.callbackParams,params=null===(_b=this.column)||void 0===_b?void 0:_b.createColumnFunctionCallbackParams(this.rowNode);selectable=!!params&&isVisible2(__assign$c(__assign$c({},extraParams),params))}else selectable=isVisible2??!1;if(null===(_c=this.column)||void 0===_c?void 0:_c.getColDef().showDisabledCheckboxes)return this.eCheckbox.setDisabled(!selectable),this.setVisible(!0),void this.setDisplayed(!0);null!==(_d=this.overrides)&&void 0!==_d&&_d.removeHidden?this.setDisplayed(selectable):this.setVisible(selectable)},CheckboxSelectionComponent2.prototype.getIsVisible=function(){var _a,_b;return this.overrides?this.overrides.isVisible:null===(_b=null===(_a=this.column)||void 0===_a?void 0:_a.getColDef())||void 0===_b?void 0:_b.checkboxSelection},__decorate$21([RefSelector("eCheckbox")],CheckboxSelectionComponent2.prototype,"eCheckbox",void 0),__decorate$21([PostConstruct],CheckboxSelectionComponent2.prototype,"postConstruct",null),CheckboxSelectionComponent2}(Component),__extends$2g=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$20=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__values$3=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};(DragSourceType2=DragSourceType||(DragSourceType={}))[DragSourceType2.ToolPanel=0]="ToolPanel",DragSourceType2[DragSourceType2.HeaderCell=1]="HeaderCell",DragSourceType2[DragSourceType2.RowDrag=2]="RowDrag",DragSourceType2[DragSourceType2.ChartPanel=3]="ChartPanel",(VerticalDirection2=VerticalDirection||(VerticalDirection={}))[VerticalDirection2.Up=0]="Up",VerticalDirection2[VerticalDirection2.Down=1]="Down",(HorizontalDirection2=HorizontalDirection||(HorizontalDirection={}))[HorizontalDirection2.Left=0]="Left",HorizontalDirection2[HorizontalDirection2.Right=1]="Right";var ExcelFactoryMode,ExcelFactoryMode2,DragAndDropService=function(_super){function DragAndDropService2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.dragSourceAndParamsList=[],_this.dropTargets=[],_this}var DragAndDropService_1;return __extends$2g(DragAndDropService2,_super),__name(DragAndDropService2,"DragAndDropService"),DragAndDropService_1=DragAndDropService2,DragAndDropService2.prototype.init=function(){this.ePinnedIcon=createIcon("columnMovePin",this.gridOptionsService,null),this.eHideIcon=createIcon("columnMoveHide",this.gridOptionsService,null),this.eMoveIcon=createIcon("columnMoveMove",this.gridOptionsService,null),this.eLeftIcon=createIcon("columnMoveLeft",this.gridOptionsService,null),this.eRightIcon=createIcon("columnMoveRight",this.gridOptionsService,null),this.eGroupIcon=createIcon("columnMoveGroup",this.gridOptionsService,null),this.eAggregateIcon=createIcon("columnMoveValue",this.gridOptionsService,null),this.ePivotIcon=createIcon("columnMovePivot",this.gridOptionsService,null),this.eDropNotAllowedIcon=createIcon("dropNotAllowed",this.gridOptionsService,null)},DragAndDropService2.prototype.addDragSource=function(dragSource,allowTouch){void 0===allowTouch&&(allowTouch=!1);var params={eElement:dragSource.eElement,dragStartPixels:dragSource.dragStartPixels,onDragStart:this.onDragStart.bind(this,dragSource),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this)};this.dragSourceAndParamsList.push({params,dragSource}),this.dragService.addDragSource(params,allowTouch)},DragAndDropService2.prototype.removeDragSource=function(dragSource){var sourceAndParams=this.dragSourceAndParamsList.find(function(item){return item.dragSource===dragSource});sourceAndParams&&(this.dragService.removeDragSource(sourceAndParams.params),removeFromArray(this.dragSourceAndParamsList,sourceAndParams))},DragAndDropService2.prototype.clearDragSourceParamsList=function(){var _this=this;this.dragSourceAndParamsList.forEach(function(sourceAndParams){return _this.dragService.removeDragSource(sourceAndParams.params)}),this.dragSourceAndParamsList.length=0},DragAndDropService2.prototype.nudge=function(){this.dragging&&this.onDragging(this.eventLastTime,!0)},DragAndDropService2.prototype.onDragStart=function(dragSource,mouseEvent){this.dragging=!0,this.dragSource=dragSource,this.eventLastTime=mouseEvent,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=this.dragSource.dragSourceDropTarget,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()},DragAndDropService2.prototype.onDragStop=function(mouseEvent){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){var draggingEvent=this.createDropTargetEvent(this.lastDropTarget,mouseEvent,null,null,!1);this.lastDropTarget.onDragStop(draggingEvent)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()},DragAndDropService2.prototype.onDragging=function(mouseEvent,fromNudge){var _a,_b,_c,_d,_this=this,hDirection=this.getHorizontalDirection(mouseEvent),vDirection=this.getVerticalDirection(mouseEvent);this.eventLastTime=mouseEvent,this.positionGhost(mouseEvent);var validDropTargets=this.dropTargets.filter(function(target){return _this.isMouseOnDropTarget(mouseEvent,target)}),dropTarget=this.findCurrentDropTarget(mouseEvent,validDropTargets);if(dropTarget!==this.lastDropTarget)this.leaveLastTargetIfExists(mouseEvent,hDirection,vDirection,fromNudge),null!==this.lastDropTarget&&null===dropTarget&&(null===(_b=(_a=this.dragSource).onGridExit)||void 0===_b||_b.call(_a,this.dragItem)),null===this.lastDropTarget&&null!==dropTarget&&(null===(_d=(_c=this.dragSource).onGridEnter)||void 0===_d||_d.call(_c,this.dragItem)),this.enterDragTargetIfExists(dropTarget,mouseEvent,hDirection,vDirection,fromNudge),this.lastDropTarget=dropTarget;else if(dropTarget&&dropTarget.onDragging){var draggingEvent=this.createDropTargetEvent(dropTarget,mouseEvent,hDirection,vDirection,fromNudge);dropTarget.onDragging(draggingEvent)}},DragAndDropService2.prototype.getAllContainersFromDropTarget=function(dropTarget){var secondaryContainers=dropTarget.getSecondaryContainers?dropTarget.getSecondaryContainers():null,containers=[[dropTarget.getContainer()]];return secondaryContainers?containers.concat(secondaryContainers):containers},DragAndDropService2.prototype.allContainersIntersect=function(mouseEvent,containers){var e_1,_a;try{for(var containers_1=__values$3(containers),containers_1_1=containers_1.next();!containers_1_1.done;containers_1_1=containers_1.next()){var rect=containers_1_1.value.getBoundingClientRect();if(0===rect.width||0===rect.height)return!1;var horizontalFit=mouseEvent.clientX>=rect.left&&mouseEvent.clientX<rect.right,verticalFit=mouseEvent.clientY>=rect.top&&mouseEvent.clientY<rect.bottom;if(!horizontalFit||!verticalFit)return!1}}catch(e_1_1){e_1={error:e_1_1}}finally{try{containers_1_1&&!containers_1_1.done&&(_a=containers_1.return)&&_a.call(containers_1)}finally{if(e_1)throw e_1.error}}return!0},DragAndDropService2.prototype.isMouseOnDropTarget=function(mouseEvent,dropTarget){var e_2,_a,allContainersFromDropTarget=this.getAllContainersFromDropTarget(dropTarget),mouseOverTarget=!1;try{for(var allContainersFromDropTarget_1=__values$3(allContainersFromDropTarget),allContainersFromDropTarget_1_1=allContainersFromDropTarget_1.next();!allContainersFromDropTarget_1_1.done;allContainersFromDropTarget_1_1=allContainersFromDropTarget_1.next()){var currentContainers=allContainersFromDropTarget_1_1.value;if(this.allContainersIntersect(mouseEvent,currentContainers)){mouseOverTarget=!0;break}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{allContainersFromDropTarget_1_1&&!allContainersFromDropTarget_1_1.done&&(_a=allContainersFromDropTarget_1.return)&&_a.call(allContainersFromDropTarget_1)}finally{if(e_2)throw e_2.error}}return!(dropTarget.targetContainsSource&&!dropTarget.getContainer().contains(this.dragSource.eElement))&&(mouseOverTarget&&dropTarget.isInterestedIn(this.dragSource.type,this.dragSource.eElement))},DragAndDropService2.prototype.findCurrentDropTarget=function(mouseEvent,validDropTargets){var e_3,_a,e_4,_b,len=validDropTargets.length;if(0===len)return null;if(1===len)return validDropTargets[0];var elementStack=this.gridOptionsService.getRootNode().elementsFromPoint(mouseEvent.clientX,mouseEvent.clientY);try{for(var elementStack_1=__values$3(elementStack),elementStack_1_1=elementStack_1.next();!elementStack_1_1.done;elementStack_1_1=elementStack_1.next()){var el=elementStack_1_1.value;try{for(var validDropTargets_1=(e_4=void 0,__values$3(validDropTargets)),validDropTargets_1_1=validDropTargets_1.next();!validDropTargets_1_1.done;validDropTargets_1_1=validDropTargets_1.next()){var dropTarget=validDropTargets_1_1.value;if(-1!==flatten(this.getAllContainersFromDropTarget(dropTarget)).indexOf(el))return dropTarget}}catch(e_4_1){e_4={error:e_4_1}}finally{try{validDropTargets_1_1&&!validDropTargets_1_1.done&&(_b=validDropTargets_1.return)&&_b.call(validDropTargets_1)}finally{if(e_4)throw e_4.error}}}}catch(e_3_1){e_3={error:e_3_1}}finally{try{elementStack_1_1&&!elementStack_1_1.done&&(_a=elementStack_1.return)&&_a.call(elementStack_1)}finally{if(e_3)throw e_3.error}}return null},DragAndDropService2.prototype.enterDragTargetIfExists=function(dropTarget,mouseEvent,hDirection,vDirection,fromNudge){if(dropTarget){if(dropTarget.onDragEnter){var dragEnterEvent=this.createDropTargetEvent(dropTarget,mouseEvent,hDirection,vDirection,fromNudge);dropTarget.onDragEnter(dragEnterEvent)}this.setGhostIcon(dropTarget.getIconName?dropTarget.getIconName():null)}},DragAndDropService2.prototype.leaveLastTargetIfExists=function(mouseEvent,hDirection,vDirection,fromNudge){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){var dragLeaveEvent=this.createDropTargetEvent(this.lastDropTarget,mouseEvent,hDirection,vDirection,fromNudge);this.lastDropTarget.onDragLeave(dragLeaveEvent)}this.setGhostIcon(null)}},DragAndDropService2.prototype.addDropTarget=function(dropTarget){this.dropTargets.push(dropTarget)},DragAndDropService2.prototype.removeDropTarget=function(dropTarget){this.dropTargets=this.dropTargets.filter(function(target){return target.getContainer()!==dropTarget.getContainer()})},DragAndDropService2.prototype.hasExternalDropZones=function(){return this.dropTargets.some(function(zones){return zones.external})},DragAndDropService2.prototype.findExternalZone=function(params){return this.dropTargets.filter(function(target){return target.external}).find(function(zone){return zone.getContainer()===params.getContainer()})||null},DragAndDropService2.prototype.getHorizontalDirection=function(event){var clientX=this.eventLastTime&&this.eventLastTime.clientX,eClientX=event.clientX;return clientX===eClientX?null:clientX>eClientX?HorizontalDirection.Left:HorizontalDirection.Right},DragAndDropService2.prototype.getVerticalDirection=function(event){var clientY=this.eventLastTime&&this.eventLastTime.clientY,eClientY=event.clientY;return clientY===eClientY?null:clientY>eClientY?VerticalDirection.Up:VerticalDirection.Down},DragAndDropService2.prototype.createDropTargetEvent=function(dropTarget,event,hDirection,vDirection,fromNudge){var dropZoneTarget=dropTarget.getContainer(),rect=dropZoneTarget.getBoundingClientRect(),api=this.gridApi,columnApi=this.columnApi,dragItem=this.dragItem,dragSource=this.dragSource;return{event,x:event.clientX-rect.left,y:event.clientY-rect.top,vDirection,hDirection,dragSource,fromNudge,dragItem,api,columnApi,dropZoneTarget}},DragAndDropService2.prototype.positionGhost=function(event){var ghost=this.eGhost;if(ghost){var ghostHeight=ghost.getBoundingClientRect().height,browserWidth=getBodyWidth()-2,browserHeight=getBodyHeight()-2,top=event.pageY-ghostHeight/2,left=event.pageX-10,eDocument=this.gridOptionsService.getDocument(),win=eDocument.defaultView||window,windowScrollY=win.pageYOffset||eDocument.documentElement.scrollTop,windowScrollX=win.pageXOffset||eDocument.documentElement.scrollLeft;browserWidth>0&&left+ghost.clientWidth>browserWidth+windowScrollX&&(left=browserWidth+windowScrollX-ghost.clientWidth),left<0&&(left=0),browserHeight>0&&top+ghost.clientHeight>browserHeight+windowScrollY&&(top=browserHeight+windowScrollY-ghost.clientHeight),top<0&&(top=0),ghost.style.left=left+"px",ghost.style.top=top+"px"}},DragAndDropService2.prototype.removeGhost=function(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null},DragAndDropService2.prototype.createGhost=function(){this.eGhost=loadTemplate(DragAndDropService_1.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);var theme=this.environment.getTheme().theme;theme&&this.eGhost.classList.add(theme),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);var eText=this.eGhost.querySelector(".ag-dnd-ghost-label"),dragItemName=this.dragSource.dragItemName;isFunction(dragItemName)&&(dragItemName=dragItemName()),eText.innerHTML=escapeString(dragItemName)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";var eDocument=this.gridOptionsService.getDocument(),targetEl=null;try{targetEl=eDocument.fullscreenElement}catch{}finally{if(!targetEl){var rootNode=this.gridOptionsService.getRootNode(),body=rootNode.querySelector("body");targetEl=body||(rootNode instanceof ShadowRoot?rootNode:null==rootNode?void 0:rootNode.documentElement)}}this.eGhostParent=targetEl,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")},DragAndDropService2.prototype.setGhostIcon=function(iconName,shake){void 0===shake&&(shake=!1),clearElement(this.eGhostIcon);var eIcon=null;switch(iconName||(iconName=this.dragSource.defaultIconName||DragAndDropService_1.ICON_NOT_ALLOWED),iconName){case DragAndDropService_1.ICON_PINNED:eIcon=this.ePinnedIcon;break;case DragAndDropService_1.ICON_MOVE:eIcon=this.eMoveIcon;break;case DragAndDropService_1.ICON_LEFT:eIcon=this.eLeftIcon;break;case DragAndDropService_1.ICON_RIGHT:eIcon=this.eRightIcon;break;case DragAndDropService_1.ICON_GROUP:eIcon=this.eGroupIcon;break;case DragAndDropService_1.ICON_AGGREGATE:eIcon=this.eAggregateIcon;break;case DragAndDropService_1.ICON_PIVOT:eIcon=this.ePivotIcon;break;case DragAndDropService_1.ICON_NOT_ALLOWED:eIcon=this.eDropNotAllowedIcon;break;case DragAndDropService_1.ICON_HIDE:eIcon=this.eHideIcon}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",shake),(eIcon!==this.eHideIcon||!this.gridOptionsService.is("suppressDragLeaveHidesColumns"))&&eIcon&&this.eGhostIcon.appendChild(eIcon)},DragAndDropService2.ICON_PINNED="pinned",DragAndDropService2.ICON_MOVE="move",DragAndDropService2.ICON_LEFT="left",DragAndDropService2.ICON_RIGHT="right",DragAndDropService2.ICON_GROUP="group",DragAndDropService2.ICON_AGGREGATE="aggregate",DragAndDropService2.ICON_PIVOT="pivot",DragAndDropService2.ICON_NOT_ALLOWED="notAllowed",DragAndDropService2.ICON_HIDE="hide",DragAndDropService2.GHOST_TEMPLATE='<div class="ag-dnd-ghost ag-unselectable">\n            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n            <div class="ag-dnd-ghost-label"></div>\n        </div>',__decorate$20([Autowired("dragService")],DragAndDropService2.prototype,"dragService",void 0),__decorate$20([Autowired("mouseEventService")],DragAndDropService2.prototype,"mouseEventService",void 0),__decorate$20([Autowired("columnApi")],DragAndDropService2.prototype,"columnApi",void 0),__decorate$20([Autowired("gridApi")],DragAndDropService2.prototype,"gridApi",void 0),__decorate$20([PostConstruct],DragAndDropService2.prototype,"init",null),__decorate$20([PreDestroy],DragAndDropService2.prototype,"clearDragSourceParamsList",null),DragAndDropService2=DragAndDropService_1=__decorate$20([Bean("dragAndDropService")],DragAndDropService2)}(BeanStub),__extends$2f=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1$=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowDragComp=function(_super){function RowDragComp2(cellValueFn,rowNode,column,customGui,dragStartPixels,suppressVisibilityChange){var _this=_super.call(this)||this;return _this.cellValueFn=cellValueFn,_this.rowNode=rowNode,_this.column=column,_this.customGui=customGui,_this.dragStartPixels=dragStartPixels,_this.suppressVisibilityChange=suppressVisibilityChange,_this.dragSource=null,_this}return __extends$2f(RowDragComp2,_super),__name(RowDragComp2,"RowDragComp"),RowDragComp2.prototype.isCustomGui=function(){return null!=this.customGui},RowDragComp2.prototype.postConstruct=function(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(createIconNoSpan("rowDrag",this.beans.gridOptionsService,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){var strategy=this.beans.gridOptionsService.is("rowDragManaged")?new ManagedVisibilityStrategy(this,this.beans,this.rowNode,this.column):new NonManagedVisibilityStrategy(this,this.beans,this.rowNode,this.column);this.createManagedBean(strategy,this.beans.context)}},RowDragComp2.prototype.setDragElement=function(dragElement,dragStartPixels){this.setTemplateFromElement(dragElement),this.addDragSource(dragStartPixels)},RowDragComp2.prototype.getSelectedNodes=function(){if(!this.beans.gridOptionsService.is("rowDragMultiRow"))return[this.rowNode];var selection=this.beans.selectionService.getSelectedNodes();return-1!==selection.indexOf(this.rowNode)?selection:[this.rowNode]},RowDragComp2.prototype.checkCompatibility=function(){var managed=this.beans.gridOptionsService.is("rowDragManaged");this.beans.gridOptionsService.isTreeData()&&managed&&doOnce(function(){return console.warn("AG Grid: If using row drag with tree data, you cannot have rowDragManaged=true")},"RowDragComp.managedAndTreeData")},RowDragComp2.prototype.getDragItem=function(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}},RowDragComp2.prototype.getRowDragText=function(column){if(column){var colDef=column.getColDef();if(colDef.rowDragText)return colDef.rowDragText}return this.gridOptionsService.get("rowDragText")},RowDragComp2.prototype.addDragSource=function(dragStartPixels){var _this=this;void 0===dragStartPixels&&(dragStartPixels=4),this.dragSource&&this.removeDragSource();var rowDragText=this.getRowDragText(this.column),translate=this.localeService.getLocaleTextFunc();this.dragSource={type:DragSourceType.RowDrag,eElement:this.getGui(),dragItemName:function(){var _a,dragItem=_this.getDragItem(),dragItemCount=(null===(_a=dragItem.rowNodes)||void 0===_a?void 0:_a.length)||1;return rowDragText?rowDragText(dragItem,dragItemCount):1===dragItemCount?_this.cellValueFn():dragItemCount+" "+translate("rowDragRows","rows")},getDragItem:function(){return _this.getDragItem()},dragStartPixels,dragSourceDomDataKey:this.beans.gridOptionsService.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)},RowDragComp2.prototype.removeDragSource=function(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null},__decorate$1$([Autowired("beans")],RowDragComp2.prototype,"beans",void 0),__decorate$1$([PostConstruct],RowDragComp2.prototype,"postConstruct",null),__decorate$1$([PreDestroy],RowDragComp2.prototype,"removeDragSource",null),RowDragComp2}(Component),VisibilityStrategy=function(_super){function VisibilityStrategy2(parent,rowNode,column){var _this=_super.call(this)||this;return _this.parent=parent,_this.rowNode=rowNode,_this.column=column,_this}return __extends$2f(VisibilityStrategy2,_super),__name(VisibilityStrategy2,"VisibilityStrategy"),VisibilityStrategy2.prototype.setDisplayedOrVisible=function(neverDisplayed){var displayedOptions={skipAriaHidden:!0};if(neverDisplayed)this.parent.setDisplayed(!1,displayedOptions);else{var shown=!0,isShownSometimes=!1;this.column&&(shown=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),isShownSometimes=isFunction(this.column.getColDef().rowDrag)),isShownSometimes?(this.parent.setDisplayed(!0,displayedOptions),this.parent.setVisible(shown,displayedOptions)):(this.parent.setDisplayed(shown,displayedOptions),this.parent.setVisible(!0,displayedOptions))}},VisibilityStrategy2}(BeanStub),NonManagedVisibilityStrategy=function(_super){function NonManagedVisibilityStrategy2(parent,beans,rowNode,column){var _this=_super.call(this,parent,rowNode,column)||this;return _this.beans=beans,_this}return __extends$2f(NonManagedVisibilityStrategy2,_super),__name(NonManagedVisibilityStrategy2,"NonManagedVisibilityStrategy"),NonManagedVisibilityStrategy2.prototype.postConstruct=function(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()},NonManagedVisibilityStrategy2.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},NonManagedVisibilityStrategy2.prototype.workOutVisibility=function(){var neverDisplayed=this.beans.gridOptionsService.is("suppressRowDrag");this.setDisplayedOrVisible(neverDisplayed)},__decorate$1$([PostConstruct],NonManagedVisibilityStrategy2.prototype,"postConstruct",null),NonManagedVisibilityStrategy2}(VisibilityStrategy),ManagedVisibilityStrategy=function(_super){function ManagedVisibilityStrategy2(parent,beans,rowNode,column){var _this=_super.call(this,parent,rowNode,column)||this;return _this.beans=beans,_this}return __extends$2f(ManagedVisibilityStrategy2,_super),__name(ManagedVisibilityStrategy2,"ManagedVisibilityStrategy"),ManagedVisibilityStrategy2.prototype.postConstruct=function(){this.addManagedListener(this.beans.eventService,Events.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,Events.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()},ManagedVisibilityStrategy2.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},ManagedVisibilityStrategy2.prototype.workOutVisibility=function(){var rowDragFeature=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),shouldPreventRowMove=rowDragFeature&&rowDragFeature.shouldPreventRowMove(),suppressRowDrag=this.beans.gridOptionsService.is("suppressRowDrag"),hasExternalDropZones=this.beans.dragAndDropService.hasExternalDropZones(),neverDisplayed=shouldPreventRowMove&&!hasExternalDropZones||suppressRowDrag;this.setDisplayedOrVisible(neverDisplayed)},__decorate$1$([PostConstruct],ManagedVisibilityStrategy2.prototype,"postConstruct",null),ManagedVisibilityStrategy2}(VisibilityStrategy),__extends$2e=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$b=function(){return __assign$b=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$b.apply(this,arguments)},__decorate$1_=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GroupCellRendererCtrl=function(_super){function GroupCellRendererCtrl2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2e(GroupCellRendererCtrl2,_super),__name(GroupCellRendererCtrl2,"GroupCellRendererCtrl"),GroupCellRendererCtrl2.prototype.init=function(comp,eGui,eCheckbox,eExpanded,eContracted,compClass,params){this.params=params,this.eGui=eGui,this.eCheckbox=eCheckbox,this.eExpanded=eExpanded,this.eContracted=eContracted,this.comp=comp,this.compClass=compClass;var topLevelFooter=this.isTopLevelFooter(),embeddedRowMismatch=this.isEmbeddedRowMismatch(),isNullValueAndNotMaster=null==params.value&&!params.node.master,skipCell=!1;if(this.gridOptionsService.is("groupIncludeFooter")&&this.gridOptionsService.is("groupHideOpenParents")){var node=params.node;if(node.footer)skipCell=(params.colDef&&params.colDef.showRowGroup)!==(node.rowGroupColumn&&node.rowGroupColumn.getColId())}this.cellIsBlank=!topLevelFooter&&(embeddedRowMismatch||isNullValueAndNotMaster&&!params.node.master||skipCell),!this.cellIsBlank&&(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),this.addFullWidthRowDraggerIfNeeded(),this.addExpandAndContract(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded())},GroupCellRendererCtrl2.prototype.destroy=function(){_super.prototype.destroy.call(this),this.expandListener=null},GroupCellRendererCtrl2.prototype.refreshAriaExpanded=function(){var _a=this.params,node=_a.node,eParentOfValue=_a.eParentOfValue;if(this.expandListener&&(this.expandListener=this.expandListener()),this.isExpandable()){var listener=__name(function(){setAriaExpanded(eParentOfValue,!!node.expanded)},"listener");this.expandListener=this.addManagedListener(node,RowNode.EVENT_EXPANDED_CHANGED,listener)||null,listener()}else removeAriaExpanded(eParentOfValue)},GroupCellRendererCtrl2.prototype.isTopLevelFooter=function(){if(!this.gridOptionsService.is("groupIncludeTotalFooter")||null!=this.params.value||-1!=this.params.node.level)return!1;var colDef=this.params.colDef;if(null==colDef||!0===colDef.showRowGroup)return!0;var rowGroupCols=this.columnModel.getRowGroupColumns();return!rowGroupCols||0===rowGroupCols.length||rowGroupCols[0].getId()===colDef.showRowGroup},GroupCellRendererCtrl2.prototype.isEmbeddedRowMismatch=function(){if(!this.params.fullWidth||!this.gridOptionsService.is("embedFullWidthRows"))return!1;var pinnedLeftCell="left"===this.params.pinned,pinnedRightCell="right"===this.params.pinned,bodyCell=!pinnedLeftCell&&!pinnedRightCell;return this.gridOptionsService.is("enableRtl")?this.columnModel.isPinningLeft()?!pinnedRightCell:!bodyCell:this.columnModel.isPinningLeft()?!pinnedLeftCell:!bodyCell},GroupCellRendererCtrl2.prototype.findDisplayedGroupNode=function(){var column=this.params.column,rowNode=this.params.node;if(this.showingValueForOpenedParent)for(var pointer=rowNode.parent;null!=pointer;){if(pointer.rowGroupColumn&&column.isRowGroupDisplayed(pointer.rowGroupColumn.getId())){this.displayedGroupNode=pointer;break}pointer=pointer.parent}missing(this.displayedGroupNode)&&(this.displayedGroupNode=rowNode)},GroupCellRendererCtrl2.prototype.setupShowingValueForOpenedParent=function(){var rowNode=this.params.node,column=this.params.column;if(this.gridOptionsService.is("groupHideOpenParents"))if(rowNode.groupData){if(null!=rowNode.rowGroupColumn){var keyOfGroupingColumn=rowNode.rowGroupColumn.getId();if(column.isRowGroupDisplayed(keyOfGroupingColumn))return void(this.showingValueForOpenedParent=!1)}var valPresent=null!=rowNode.groupData[column.getId()];this.showingValueForOpenedParent=valPresent}else this.showingValueForOpenedParent=!1;else this.showingValueForOpenedParent=!1},GroupCellRendererCtrl2.prototype.addValueElement=function(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())},GroupCellRendererCtrl2.prototype.addGroupValue=function(){var paramsAdjusted=this.adjustParamsWithDetailsFromRelatedColumn(),innerCompDetails=this.getInnerCompDetails(paramsAdjusted),valueFormatted=paramsAdjusted.valueFormatted,value=paramsAdjusted.value,valueWhenNoRenderer=valueFormatted;if(null==valueWhenNoRenderer)if(""===value&&this.params.node.group){valueWhenNoRenderer=this.localeService.getLocaleTextFunc()("blanks","(Blanks)")}else valueWhenNoRenderer=value;this.comp.setInnerRenderer(innerCompDetails,valueWhenNoRenderer)},GroupCellRendererCtrl2.prototype.adjustParamsWithDetailsFromRelatedColumn=function(){var relatedColumn=this.displayedGroupNode.rowGroupColumn,column=this.params.column;if(!relatedColumn)return this.params;if(null!=column&&!column.isRowGroupDisplayed(relatedColumn.getId()))return this.params;var params=this.params,_a=this.params,value=_a.value,node=_a.node,valueFormatted=this.valueFormatterService.formatValue(relatedColumn,node,value);return __assign$b(__assign$b({},params),{valueFormatted})},GroupCellRendererCtrl2.prototype.addFooterValue=function(){var footerValueGetter=this.params.footerValueGetter,footerValue="";if(footerValueGetter){var paramsClone=cloneObject(this.params);paramsClone.value=this.params.value,"function"==typeof footerValueGetter?footerValue=footerValueGetter(paramsClone):"string"==typeof footerValueGetter?footerValue=this.expressionService.evaluate(footerValueGetter,paramsClone):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else footerValue="Total "+(null!=this.params.value?this.params.value:"");var innerCompDetails=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(innerCompDetails,footerValue)},GroupCellRendererCtrl2.prototype.getInnerCompDetails=function(params){var _this=this;if(params.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptionsService.get("groupRowRendererParams"),params);var innerCompDetails=this.userComponentFactory.getInnerRendererDetails(params,params),isGroupRowRenderer=__name(function(details){return details&&details.componentClass==_this.compClass},"isGroupRowRenderer");if(innerCompDetails&&!isGroupRowRenderer(innerCompDetails))return innerCompDetails;var relatedColumn=this.displayedGroupNode.rowGroupColumn,relatedColDef=relatedColumn?relatedColumn.getColDef():void 0;if(relatedColDef){var relatedCompDetails=this.userComponentFactory.getCellRendererDetails(relatedColDef,params);if(relatedCompDetails&&!isGroupRowRenderer(relatedCompDetails))return relatedCompDetails;if(isGroupRowRenderer(relatedCompDetails)&&relatedColDef.cellRendererParams&&relatedColDef.cellRendererParams.innerRenderer)return this.userComponentFactory.getInnerRendererDetails(relatedColDef.cellRendererParams,params)}},GroupCellRendererCtrl2.prototype.addChildCount=function(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())},GroupCellRendererCtrl2.prototype.updateChildCount=function(){var allChildrenCount=this.displayedGroupNode.allChildrenCount,countString=this.isShowRowGroupForThisRow()&&null!=allChildrenCount&&allChildrenCount>=0?"("+allChildrenCount+")":"";this.comp.setChildCount(countString)},GroupCellRendererCtrl2.prototype.isShowRowGroupForThisRow=function(){if(this.gridOptionsService.isTreeData())return!0;var rowGroupColumn=this.displayedGroupNode.rowGroupColumn;if(!rowGroupColumn)return!1;var column=this.params.column;return null==column||column.isRowGroupDisplayed(rowGroupColumn.getId())},GroupCellRendererCtrl2.prototype.addExpandAndContract=function(){var params=this.params,eExpandedIcon=createIconNoSpan("groupExpanded",this.gridOptionsService,null),eContractedIcon=createIconNoSpan("groupContracted",this.gridOptionsService,null);eExpandedIcon&&this.eExpanded.appendChild(eExpandedIcon),eContractedIcon&&this.eContracted.appendChild(eContractedIcon);var eGroupCell=params.eGridCell;!this.gridOptionsService.is("enableGroupEdit")&&this.isExpandable()&&!params.suppressDoubleClickExpand&&this.addManagedListener(eGroupCell,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(eGroupCell,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(params.node,RowNode.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();var expandableChangedListener=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED,expandableChangedListener),this.addManagedListener(this.displayedGroupNode,RowNode.EVENT_MASTER_CHANGED,expandableChangedListener),this.addManagedListener(this.displayedGroupNode,RowNode.EVENT_GROUP_CHANGED,expandableChangedListener),this.addManagedListener(this.displayedGroupNode,RowNode.EVENT_HAS_CHILDREN_CHANGED,expandableChangedListener)},GroupCellRendererCtrl2.prototype.onExpandClicked=function(mouseEvent){isStopPropagationForAgGrid(mouseEvent)||(stopPropagationForAgGrid(mouseEvent),this.onExpandOrContract(mouseEvent))},GroupCellRendererCtrl2.prototype.onExpandOrContract=function(e){var rowNode=this.displayedGroupNode,nextExpandState=!rowNode.expanded;!nextExpandState&&rowNode.sticky&&this.scrollToStickyNode(rowNode),rowNode.setExpanded(nextExpandState,e)},GroupCellRendererCtrl2.prototype.scrollToStickyNode=function(rowNode){this.ctrlsService.getGridBodyCtrl().getScrollFeature().setVerticalScrollPosition(rowNode.rowTop-rowNode.stickyRowTop)},GroupCellRendererCtrl2.prototype.isExpandable=function(){if(this.showingValueForOpenedParent)return!0;var rowNode=this.displayedGroupNode,reducedLeafNode=this.columnModel.isPivotMode()&&rowNode.leafGroup;if(!(rowNode.isExpandable()&&!rowNode.footer&&!reducedLeafNode))return!1;var column=this.params.column;return null==column||"string"!=typeof column.getColDef().showRowGroup||this.isShowRowGroupForThisRow()},GroupCellRendererCtrl2.prototype.showExpandAndContractIcons=function(){var params=this.params,displayedGroup=this.displayedGroupNode,columnModel=this.columnModel,node=params.node,isExpandable=this.isExpandable();if(isExpandable){var expanded=!!this.showingValueForOpenedParent||node.expanded;this.comp.setExpandedDisplayed(expanded),this.comp.setContractedDisplayed(!expanded)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);var pivotMode=columnModel.isPivotMode(),pivotModeAndLeafGroup=pivotMode&&displayedGroup.leafGroup,addExpandableCss=isExpandable&&!pivotModeAndLeafGroup,isTotalFooterNode=node.footer&&-1===node.level;this.comp.addOrRemoveCssClass("ag-cell-expandable",addExpandableCss),this.comp.addOrRemoveCssClass("ag-row-group",addExpandableCss),pivotMode?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",pivotModeAndLeafGroup):isTotalFooterNode||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!addExpandableCss)},GroupCellRendererCtrl2.prototype.onRowNodeIsExpandableChanged=function(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()},GroupCellRendererCtrl2.prototype.setupIndent=function(){var node=this.params.node;this.params.suppressPadding||(this.addManagedListener(node,RowNode.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())},GroupCellRendererCtrl2.prototype.setIndent=function(){if(!this.gridOptionsService.is("groupHideOpenParents")){var params=this.params,rowNode=params.node,fullWithRow=!!params.colDef,treeData=this.gridOptionsService.isTreeData(),paddingCount=!fullWithRow||treeData||!0===params.colDef.showRowGroup?rowNode.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+paddingCount,this.comp.addOrRemoveCssClass(this.indentClass,!0)}},GroupCellRendererCtrl2.prototype.addFullWidthRowDraggerIfNeeded=function(){var _this=this;if(this.params.fullWidth&&this.params.rowDrag){var rowDragComp=new RowDragComp(function(){return _this.params.value},this.params.node);this.createManagedBean(rowDragComp,this.context),this.eGui.insertAdjacentElement("afterbegin",rowDragComp.getGui())}},GroupCellRendererCtrl2.prototype.isUserWantsSelected=function(){var paramsCheckbox=this.params.checkbox;return"function"==typeof paramsCheckbox||!0===paramsCheckbox},GroupCellRendererCtrl2.prototype.addCheckboxIfNeeded=function(){var _this=this,rowNode=this.displayedGroupNode,checkboxNeeded=this.isUserWantsSelected()&&!rowNode.footer&&!rowNode.rowPinned&&!rowNode.detail;if(checkboxNeeded){var cbSelectionComponent_1=new CheckboxSelectionComponent;this.getContext().createBean(cbSelectionComponent_1),cbSelectionComponent_1.init({rowNode,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(cbSelectionComponent_1.getGui()),this.addDestroyFunc(function(){return _this.getContext().destroyBean(cbSelectionComponent_1)})}this.comp.setCheckboxVisible(checkboxNeeded)},GroupCellRendererCtrl2.prototype.onKeyDown=function(event){event.key!==KeyCode.ENTER||this.params.suppressEnterExpand||(this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(event))},GroupCellRendererCtrl2.prototype.onCellDblClicked=function(mouseEvent){isStopPropagationForAgGrid(mouseEvent)||(isElementInEventPath(this.eExpanded,mouseEvent)||isElementInEventPath(this.eContracted,mouseEvent)||this.onExpandOrContract(mouseEvent))},__decorate$1_([Autowired("expressionService")],GroupCellRendererCtrl2.prototype,"expressionService",void 0),__decorate$1_([Autowired("valueFormatterService")],GroupCellRendererCtrl2.prototype,"valueFormatterService",void 0),__decorate$1_([Autowired("columnModel")],GroupCellRendererCtrl2.prototype,"columnModel",void 0),__decorate$1_([Autowired("userComponentFactory")],GroupCellRendererCtrl2.prototype,"userComponentFactory",void 0),__decorate$1_([Autowired("ctrlsService")],GroupCellRendererCtrl2.prototype,"ctrlsService",void 0),GroupCellRendererCtrl2}(BeanStub),__extends$2d=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1Z=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GroupCellRenderer=function(_super){function GroupCellRenderer2(){return _super.call(this,GroupCellRenderer2.TEMPLATE)||this}return __extends$2d(GroupCellRenderer2,_super),__name(GroupCellRenderer2,"GroupCellRenderer"),GroupCellRenderer2.prototype.init=function(params){var _this=this,compProxy={setInnerRenderer:function(compDetails,valueToDisplay){return _this.setRenderDetails(compDetails,valueToDisplay)},setChildCount:function(count){return _this.eChildCount.innerHTML=count},addOrRemoveCssClass:function(cssClass,value){return _this.addOrRemoveCssClass(cssClass,value)},setContractedDisplayed:function(expanded){return setDisplayed(_this.eContracted,expanded)},setExpandedDisplayed:function(expanded){return setDisplayed(_this.eExpanded,expanded)},setCheckboxVisible:function(visible){return _this.eCheckbox.classList.toggle("ag-invisible",!visible)}},ctrl=this.createManagedBean(new GroupCellRendererCtrl),fullWidth=!params.colDef,eGui=this.getGui();ctrl.init(compProxy,eGui,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,params),fullWidth&&setAriaRole(eGui,"gridcell")},GroupCellRenderer2.prototype.setRenderDetails=function(compDetails,valueToDisplay){var _this=this;if(compDetails){var componentPromise=compDetails.newAgStackInstance();if(!componentPromise)return;componentPromise.then(function(comp){if(comp){var destroyComp=__name(function(){return _this.context.destroyBean(comp)},"destroyComp");_this.isAlive()?(_this.eValue.appendChild(comp.getGui()),_this.addDestroyFunc(destroyComp)):destroyComp()}})}else this.eValue.innerText=valueToDisplay},GroupCellRenderer2.prototype.destroy=function(){this.getContext().destroyBean(this.innerCellRenderer),_super.prototype.destroy.call(this)},GroupCellRenderer2.prototype.refresh=function(){return!1},GroupCellRenderer2.TEMPLATE='<span class="ag-cell-wrapper">\n            <span class="ag-group-expanded" ref="eExpanded"></span>\n            <span class="ag-group-contracted" ref="eContracted"></span>\n            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>\n            <span class="ag-group-value" ref="eValue"></span>\n            <span class="ag-group-child-count" ref="eChildCount"></span>\n        </span>',__decorate$1Z([RefSelector("eExpanded")],GroupCellRenderer2.prototype,"eExpanded",void 0),__decorate$1Z([RefSelector("eContracted")],GroupCellRenderer2.prototype,"eContracted",void 0),__decorate$1Z([RefSelector("eCheckbox")],GroupCellRenderer2.prototype,"eCheckbox",void 0),__decorate$1Z([RefSelector("eValue")],GroupCellRenderer2.prototype,"eValue",void 0),__decorate$1Z([RefSelector("eChildCount")],GroupCellRenderer2.prototype,"eChildCount",void 0),GroupCellRenderer2}(Component),__extends$2c=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1Y=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},LoadingCellRenderer=function(_super){function LoadingCellRenderer2(){return _super.call(this,LoadingCellRenderer2.TEMPLATE)||this}return __extends$2c(LoadingCellRenderer2,_super),__name(LoadingCellRenderer2,"LoadingCellRenderer"),LoadingCellRenderer2.prototype.init=function(params){params.node.failedLoad?this.setupFailed():this.setupLoading()},LoadingCellRenderer2.prototype.setupFailed=function(){var localeTextFunc=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=localeTextFunc("loadingError","ERR")},LoadingCellRenderer2.prototype.setupLoading=function(){var eLoadingIcon=createIconNoSpan("groupLoading",this.gridOptionsService,null);eLoadingIcon&&this.eLoadingIcon.appendChild(eLoadingIcon);var localeTextFunc=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=localeTextFunc("loadingOoo","Loading")},LoadingCellRenderer2.prototype.refresh=function(params){return!1},LoadingCellRenderer2.prototype.destroy=function(){_super.prototype.destroy.call(this)},LoadingCellRenderer2.TEMPLATE='<div class="ag-loading">\n            <span class="ag-loading-icon" ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" ref="eLoadingText"></span>\n        </div>',__decorate$1Y([RefSelector("eLoadingIcon")],LoadingCellRenderer2.prototype,"eLoadingIcon",void 0),__decorate$1Y([RefSelector("eLoadingText")],LoadingCellRenderer2.prototype,"eLoadingText",void 0),LoadingCellRenderer2}(Component),__extends$2b=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),LoadingOverlayComponent$1=function(_super){function LoadingOverlayComponent2(){return _super.call(this)||this}return __extends$2b(LoadingOverlayComponent2,_super),__name(LoadingOverlayComponent2,"LoadingOverlayComponent"),LoadingOverlayComponent2.prototype.destroy=function(){_super.prototype.destroy.call(this)},LoadingOverlayComponent2.prototype.init=function(params){var _a,template=null!==(_a=this.gridOptionsService.get("overlayLoadingTemplate"))&&void 0!==_a?_a:LoadingOverlayComponent2.DEFAULT_LOADING_OVERLAY_TEMPLATE,localeTextFunc=this.localeService.getLocaleTextFunc(),localisedTemplate=template.replace("[LOADING...]",localeTextFunc("loadingOoo","Loading..."));this.setTemplate(localisedTemplate)},LoadingOverlayComponent2.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span class="ag-overlay-loading-center">[LOADING...]</span>',LoadingOverlayComponent2}(Component),__extends$2a=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),NoRowsOverlayComponent$1=function(_super){function NoRowsOverlayComponent2(){return _super.call(this)||this}return __extends$2a(NoRowsOverlayComponent2,_super),__name(NoRowsOverlayComponent2,"NoRowsOverlayComponent"),NoRowsOverlayComponent2.prototype.destroy=function(){_super.prototype.destroy.call(this)},NoRowsOverlayComponent2.prototype.init=function(params){var _a,template=null!==(_a=this.gridOptionsService.get("overlayNoRowsTemplate"))&&void 0!==_a?_a:NoRowsOverlayComponent2.DEFAULT_NO_ROWS_TEMPLATE,localeTextFunc=this.localeService.getLocaleTextFunc(),localisedTemplate=template.replace("[NO_ROWS_TO_SHOW]",localeTextFunc("noRowsToShow","No Rows To Show"));this.setTemplate(localisedTemplate)},NoRowsOverlayComponent2.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center">[NO_ROWS_TO_SHOW]</span>',NoRowsOverlayComponent2}(Component),__extends$29=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),TooltipComponent$1=function(_super){function TooltipComponent2(){return _super.call(this,'<div class="ag-tooltip"></div>')||this}return __extends$29(TooltipComponent2,_super),__name(TooltipComponent2,"TooltipComponent"),TooltipComponent2.prototype.init=function(params){var value=params.value;this.getGui().innerHTML=escapeString(value)},TooltipComponent2}(PopupComponent),__extends$28=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1X=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},UserComponentRegistry=function(_super){function UserComponentRegistry2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.agGridDefaults={agDateInput:DefaultDateComponent,agColumnHeader:HeaderComp,agColumnGroupHeader:HeaderGroupComp,agSortIndicator:SortIndicatorComp,agTextColumnFloatingFilter:TextFloatingFilter,agNumberColumnFloatingFilter:NumberFloatingFilter,agDateColumnFloatingFilter:DateFloatingFilter,agReadOnlyFloatingFilter:ReadOnlyFloatingFilter,agAnimateShowChangeCellRenderer:AnimateShowChangeCellRenderer,agAnimateSlideCellRenderer:AnimateSlideCellRenderer,agGroupCellRenderer:GroupCellRenderer,agGroupRowRenderer:GroupCellRenderer,agLoadingCellRenderer:LoadingCellRenderer,agCellEditor:TextCellEditor,agTextCellEditor:TextCellEditor,agSelectCellEditor:SelectCellEditor,agLargeTextCellEditor:LargeTextCellEditor,agTextColumnFilter:TextFilter,agNumberColumnFilter:NumberFilter,agDateColumnFilter:DateFilter,agLoadingOverlay:LoadingOverlayComponent$1,agNoRowsOverlay:NoRowsOverlayComponent$1,agTooltipComponent:TooltipComponent$1},_this.enterpriseAgDefaultCompsModule={agSetColumnFilter:ModuleNames.SetFilterModule,agSetColumnFloatingFilter:ModuleNames.SetFilterModule,agMultiColumnFilter:ModuleNames.MultiFilterModule,agMultiColumnFloatingFilter:ModuleNames.MultiFilterModule,agGroupColumnFilter:ModuleNames.RowGroupingModule,agGroupColumnFloatingFilter:ModuleNames.RowGroupingModule,agRichSelect:ModuleNames.RichSelectModule,agRichSelectCellEditor:ModuleNames.RichSelectModule,agDetailCellRenderer:ModuleNames.MasterDetailModule,agSparklineCellRenderer:ModuleNames.SparklinesModule},_this.deprecatedAgGridDefaults={agPopupTextCellEditor:'AG Grid: Since v27.1 The agPopupTextCellEditor is deprecated. Instead use { cellEditor: "agTextCellEditor", cellEditorPopup: true }',agPopupSelectCellEditor:'AG Grid: Since v27.1 the agPopupSelectCellEditor is deprecated. Instead use { cellEditor: "agSelectCellEditor", cellEditorPopup: true }'},_this.jsComps={},_this.fwComps={},_this}return __extends$28(UserComponentRegistry2,_super),__name(UserComponentRegistry2,"UserComponentRegistry"),UserComponentRegistry2.prototype.init=function(){var _this=this;null!=this.gridOptions.components&&iterateObject(this.gridOptions.components,function(key,component){return _this.registerJsComponent(key,component)}),null!=this.gridOptions.frameworkComponents&&iterateObject(this.gridOptions.frameworkComponents,function(key,component){return _this.registerFwComponent(key,component)})},UserComponentRegistry2.prototype.registerDefaultComponent=function(name,component){this.agGridDefaults[name]?console.error("Trying to overwrite a default component. You should call registerComponent"):this.agGridDefaults[name]=component},UserComponentRegistry2.prototype.registerJsComponent=function(name,component){this.fwComps[name]?console.error("Trying to register a component that you have already registered for frameworks: "+name):this.jsComps[name]=component},UserComponentRegistry2.prototype.registerFwComponent=function(name,component){doOnce(function(){return console.warn("AG Grid: As of v27, registering components via grid property frameworkComponents is deprecated. Instead register both JavaScript AND Framework Components via the components property.")},"UserComponentRegistry.frameworkComponentsDeprecated"),this.fwComps[name]=component},UserComponentRegistry2.prototype.retrieve=function(name){var _this=this,createResult=__name(function(component,componentFromFramework){return{componentFromFramework,component}},"createResult"),registeredViaFrameworkComp=this.getFrameworkOverrides().frameworkComponent(name,this.gridOptions.components);if(null!=registeredViaFrameworkComp)return createResult(registeredViaFrameworkComp,!0);var frameworkComponent=this.fwComps[name];if(frameworkComponent)return createResult(frameworkComponent,!0);var jsComponent=this.jsComps[name];if(jsComponent)return createResult(jsComponent,this.getFrameworkOverrides().isFrameworkComponent(jsComponent));var defaultComponent=this.agGridDefaults[name];if(defaultComponent)return createResult(defaultComponent,!1);var moduleForComponent=this.enterpriseAgDefaultCompsModule[name];return moduleForComponent?ModuleRegistry.assertRegistered(moduleForComponent,"AG Grid component ["+name+"]"):this.deprecatedAgGridDefaults[name]?doOnce(function(){return console.warn(_this.deprecatedAgGridDefaults[name])},name):doOnce(function(){return console.warn("AG Grid: Looking for component ["+name+"] but it wasn't found. Have you registered the component? See https://ag-grid.com/javascript-data-grid/components/")},"MissingComp"+name),null},__decorate$1X([Autowired("gridOptions")],UserComponentRegistry2.prototype,"gridOptions",void 0),__decorate$1X([PostConstruct],UserComponentRegistry2.prototype,"init",null),UserComponentRegistry2=__decorate$1X([Bean("userComponentRegistry")],UserComponentRegistry2)}(BeanStub),DateComponent={propertyName:"dateComponent",cellRenderer:!1},HeaderComponent={propertyName:"headerComponent",cellRenderer:!1},HeaderGroupComponent={propertyName:"headerGroupComponent",cellRenderer:!1},CellRendererComponent={propertyName:"cellRenderer",cellRenderer:!0},CellEditorComponent={propertyName:"cellEditor",cellRenderer:!1},InnerRendererComponent={propertyName:"innerRenderer",cellRenderer:!0},LoadingOverlayComponent={propertyName:"loadingOverlayComponent",cellRenderer:!1},NoRowsOverlayComponent={propertyName:"noRowsOverlayComponent",cellRenderer:!1},TooltipComponent={propertyName:"tooltipComponent",cellRenderer:!1},FilterComponent={propertyName:"filter",cellRenderer:!1},FloatingFilterComponent={propertyName:"floatingFilterComponent",cellRenderer:!1},ToolPanelComponent={propertyName:"toolPanel",cellRenderer:!1},StatusPanelComponent={propertyName:"statusPanel",cellRenderer:!1},FullWidth={propertyName:"fullWidthCellRenderer",cellRenderer:!0},FullWidthLoading={propertyName:"loadingCellRenderer",cellRenderer:!0},FullWidthGroup={propertyName:"groupRowRenderer",cellRenderer:!0},FullWidthDetail={propertyName:"detailCellRenderer",cellRenderer:!0},FloatingFilterMapper=function(){function FloatingFilterMapper2(){}return __name(FloatingFilterMapper2,"FloatingFilterMapper"),FloatingFilterMapper2.getFloatingFilterType=function(filterType){return this.filterToFloatingFilterMapping[filterType]},FloatingFilterMapper2.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"},FloatingFilterMapper2}(),__extends$27=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1W=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},UserComponentFactory=function(_super){function UserComponentFactory2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$27(UserComponentFactory2,_super),__name(UserComponentFactory2,"UserComponentFactory"),UserComponentFactory2.prototype.getHeaderCompDetails=function(colDef,params){return this.getCompDetails(colDef,HeaderComponent,"agColumnHeader",params)},UserComponentFactory2.prototype.getHeaderGroupCompDetails=function(params){var colGroupDef=params.columnGroup.getColGroupDef();return this.getCompDetails(colGroupDef,HeaderGroupComponent,"agColumnGroupHeader",params)},UserComponentFactory2.prototype.getFullWidthCellRendererDetails=function(params){return this.getCompDetails(this.gridOptions,FullWidth,null,params,!0)},UserComponentFactory2.prototype.getFullWidthLoadingCellRendererDetails=function(params){return this.getCompDetails(this.gridOptions,FullWidthLoading,"agLoadingCellRenderer",params,!0)},UserComponentFactory2.prototype.getFullWidthGroupCellRendererDetails=function(params){return this.getCompDetails(this.gridOptions,FullWidthGroup,"agGroupRowRenderer",params,!0)},UserComponentFactory2.prototype.getFullWidthDetailCellRendererDetails=function(params){return this.getCompDetails(this.gridOptions,FullWidthDetail,"agDetailCellRenderer",params,!0)},UserComponentFactory2.prototype.getInnerRendererDetails=function(def,params){return this.getCompDetails(def,InnerRendererComponent,null,params)},UserComponentFactory2.prototype.getFullWidthGroupRowInnerCellRenderer=function(def,params){return this.getCompDetails(def,InnerRendererComponent,null,params)},UserComponentFactory2.prototype.getCellRendererDetails=function(def,params){return this.getCompDetails(def,CellRendererComponent,null,params)},UserComponentFactory2.prototype.getCellEditorDetails=function(def,params){return this.getCompDetails(def,CellEditorComponent,"agCellEditor",params,!0)},UserComponentFactory2.prototype.getFilterDetails=function(def,params,defaultFilter){return this.getCompDetails(def,FilterComponent,defaultFilter,params,!0)},UserComponentFactory2.prototype.getDateCompDetails=function(params){return this.getCompDetails(this.gridOptions,DateComponent,"agDateInput",params,!0)},UserComponentFactory2.prototype.getLoadingOverlayCompDetails=function(params){return this.getCompDetails(this.gridOptions,LoadingOverlayComponent,"agLoadingOverlay",params,!0)},UserComponentFactory2.prototype.getNoRowsOverlayCompDetails=function(params){return this.getCompDetails(this.gridOptions,NoRowsOverlayComponent,"agNoRowsOverlay",params,!0)},UserComponentFactory2.prototype.getTooltipCompDetails=function(params){return this.getCompDetails(params.colDef,TooltipComponent,"agTooltipComponent",params,!0)},UserComponentFactory2.prototype.getSetFilterCellRendererDetails=function(def,params){return this.getCompDetails(def,CellRendererComponent,null,params)},UserComponentFactory2.prototype.getFloatingFilterCompDetails=function(def,params,defaultFloatingFilter){return this.getCompDetails(def,FloatingFilterComponent,defaultFloatingFilter,params)},UserComponentFactory2.prototype.getToolPanelCompDetails=function(toolPanelDef,params){return this.getCompDetails(toolPanelDef,ToolPanelComponent,null,params,!0)},UserComponentFactory2.prototype.getStatusPanelCompDetails=function(def,params){return this.getCompDetails(def,StatusPanelComponent,null,params,!0)},UserComponentFactory2.prototype.getCompDetails=function(defObject,type,defaultName,params,mandatory){var _this=this;void 0===mandatory&&(mandatory=!1);var propertyName=type.propertyName,cellRenderer=type.cellRenderer,_a=this.getCompKeys(defObject,type,params),compName=_a.compName,jsComp=_a.jsComp,fwComp=_a.fwComp,paramsFromSelector=_a.paramsFromSelector,popupFromSelector=_a.popupFromSelector,popupPositionFromSelector=_a.popupPositionFromSelector,lookupFromRegistry=__name(function(key){var item=_this.userComponentRegistry.retrieve(key);item&&(jsComp=item.componentFromFramework?void 0:item.component,fwComp=item.componentFromFramework?item.component:void 0)},"lookupFromRegistry");if(null!=compName&&lookupFromRegistry(compName),null==jsComp&&null==fwComp&&null!=defaultName&&lookupFromRegistry(defaultName),jsComp&&cellRenderer&&!this.agComponentUtils.doesImplementIComponent(jsComp)&&(jsComp=this.agComponentUtils.adaptFunction(propertyName,jsComp)),jsComp||fwComp){var paramsMerged=this.mergeParamsWithApplicationProvidedParams(defObject,type,params,paramsFromSelector),componentFromFramework=null==jsComp,componentClass=jsComp||fwComp;return{componentFromFramework,componentClass,params:paramsMerged,type,popupFromSelector,popupPositionFromSelector,newAgStackInstance:function(){return _this.newAgStackInstance(componentClass,componentFromFramework,paramsMerged,type)}}}mandatory&&console.error("AG Grid: Could not find component "+compName+", did you forget to configure this component?")},UserComponentFactory2.prototype.getCompKeys=function(defObject,type,params){var compName,jsComp,fwComp,paramsFromSelector,popupFromSelector,popupPositionFromSelector,_this=this,propertyName=type.propertyName;if(defObject){var defObjectAny=defObject,selectorFunc=defObjectAny[propertyName+"Selector"],selectorRes=selectorFunc?selectorFunc(params):null,assignComp=__name(function(providedJsComp,providedFwComp){var xxxFrameworkDeprecatedWarn=__name(function(){var warningMessage="AG Grid: As of v27, the property "+propertyName+"Framework is deprecated. The property "+propertyName+" can now be used for JavaScript AND Framework Components.";doOnce(function(){return console.warn(warningMessage)},"UserComponentFactory."+propertyName+"FrameworkDeprecated")},"xxxFrameworkDeprecatedWarn");if("string"==typeof providedJsComp)compName=providedJsComp;else if("string"==typeof providedFwComp)xxxFrameworkDeprecatedWarn(),compName=providedFwComp;else if(null!=providedJsComp&&!0!==providedJsComp){_this.getFrameworkOverrides().isFrameworkComponent(providedJsComp)?fwComp=providedJsComp:jsComp=providedJsComp}else null!=providedFwComp&&(xxxFrameworkDeprecatedWarn(),fwComp=providedFwComp)},"assignComp");if(selectorRes){if(null!=selectorRes.frameworkComponent){var warningMessage_1="AG Grid: As of v27, the return for "+propertyName+"Selector has attributes [component, params] only. The attribute frameworkComponent is deprecated. You should now return back Framework Components using the 'component' attribute and the grid works out if it's a framework component or not.";doOnce(function(){return console.warn(warningMessage_1)},"UserComponentFactory."+propertyName+"FrameworkSelectorDeprecated"),assignComp(selectorRes.frameworkComponent,void 0)}else assignComp(selectorRes.component,void 0);paramsFromSelector=selectorRes.params,popupFromSelector=selectorRes.popup,popupPositionFromSelector=selectorRes.popupPosition}else assignComp(defObjectAny[propertyName],defObjectAny[propertyName+"Framework"])}return{compName,jsComp,fwComp,paramsFromSelector,popupFromSelector,popupPositionFromSelector}},UserComponentFactory2.prototype.newAgStackInstance=function(ComponentClass,componentFromFramework,params,type){var instance,propertyName=type.propertyName;if(!componentFromFramework)instance=new ComponentClass;else{var thisComponentConfig=this.componentMetadataProvider.retrieve(propertyName);instance=this.frameworkComponentWrapper.wrap(ComponentClass,thisComponentConfig.mandatoryMethodList,thisComponentConfig.optionalMethodList,type)}var deferredInit=this.initComponent(instance,params);return null==deferredInit?AgPromise.resolve(instance):deferredInit.then(function(){return instance})},UserComponentFactory2.prototype.mergeParamsWithApplicationProvidedParams=function(defObject,type,paramsFromGrid,paramsFromSelector){void 0===paramsFromSelector&&(paramsFromSelector=null);var params={context:this.gridOptionsService.context,columnApi:this.gridOptionsService.columnApi,api:this.gridOptionsService.api};mergeDeep(params,paramsFromGrid);var userParams=defObject&&defObject[type.propertyName+"Params"];"function"==typeof userParams?mergeDeep(params,userParams(paramsFromGrid)):"object"==typeof userParams&&mergeDeep(params,userParams);return mergeDeep(params,paramsFromSelector),params},UserComponentFactory2.prototype.initComponent=function(component,params){if(this.context.createBean(component),null!=component.init)return component.init(params)},UserComponentFactory2.prototype.getDefaultFloatingFilterType=function(def){if(null==def)return null;var defaultFloatingFilterType=null,_a=this.getCompKeys(def,FilterComponent),compName=_a.compName,jsComp=_a.jsComp,fwComp=_a.fwComp;compName?defaultFloatingFilterType=FloatingFilterMapper.getFloatingFilterType(compName):null==jsComp&&null==fwComp&&!0===def.filter&&(defaultFloatingFilterType=ModuleRegistry.isRegistered(ModuleNames.SetFilterModule)?"agSetColumnFloatingFilter":"agTextColumnFloatingFilter");return defaultFloatingFilterType},__decorate$1W([Autowired("gridOptions")],UserComponentFactory2.prototype,"gridOptions",void 0),__decorate$1W([Autowired("agComponentUtils")],UserComponentFactory2.prototype,"agComponentUtils",void 0),__decorate$1W([Autowired("componentMetadataProvider")],UserComponentFactory2.prototype,"componentMetadataProvider",void 0),__decorate$1W([Autowired("userComponentRegistry")],UserComponentFactory2.prototype,"userComponentRegistry",void 0),__decorate$1W([Optional("frameworkComponentWrapper")],UserComponentFactory2.prototype,"frameworkComponentWrapper",void 0),UserComponentFactory2=__decorate$1W([Bean("userComponentFactory")],UserComponentFactory2)}(BeanStub);(ExcelFactoryMode2=ExcelFactoryMode||(ExcelFactoryMode={}))[ExcelFactoryMode2.SINGLE_SHEET=0]="SINGLE_SHEET",ExcelFactoryMode2[ExcelFactoryMode2.MULTI_SHEET=1]="MULTI_SHEET";var RowHighlightPosition,RowHighlightPosition2,ClientSideRowModelSteps,ClientSideRowModelSteps2,__extends$26=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1V=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},DragService=function(_super){function DragService2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.dragEndFunctions=[],_this.dragSources=[],_this}return __extends$26(DragService2,_super),__name(DragService2,"DragService"),DragService2.prototype.init=function(){this.logger=this.loggerFactory.create("DragService")},DragService2.prototype.removeAllListeners=function(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0},DragService2.prototype.removeListener=function(dragSourceAndListener){var element=dragSourceAndListener.dragSource.eElement,mouseDownListener=dragSourceAndListener.mouseDownListener;if(element.removeEventListener("mousedown",mouseDownListener),dragSourceAndListener.touchEnabled){var touchStartListener=dragSourceAndListener.touchStartListener;element.removeEventListener("touchstart",touchStartListener,{passive:!0})}},DragService2.prototype.removeDragSource=function(params){var dragSourceAndListener=this.dragSources.find(function(item){return item.dragSource===params});dragSourceAndListener&&(this.removeListener(dragSourceAndListener),removeFromArray(this.dragSources,dragSourceAndListener))},DragService2.prototype.isDragging=function(){return this.dragging},DragService2.prototype.addDragSource=function(params,includeTouch){var _this=this;void 0===includeTouch&&(includeTouch=!1);var mouseListener=this.onMouseDown.bind(this,params);params.eElement.addEventListener("mousedown",mouseListener);var touchListener=null,suppressTouch=this.gridOptionsService.is("suppressTouch");includeTouch&&!suppressTouch&&(touchListener=__name(function(touchEvent){isFocusableFormField(touchEvent.target)||(touchEvent.cancelable&&(touchEvent.preventDefault(),touchEvent.stopPropagation()),_this.onTouchStart(params,touchEvent))},"touchListener"),params.eElement.addEventListener("touchstart",touchListener,{passive:!1})),this.dragSources.push({dragSource:params,mouseDownListener:mouseListener,touchStartListener:touchListener,touchEnabled:includeTouch})},DragService2.prototype.onTouchStart=function(params,touchEvent){var _this=this;this.currentDragParams=params,this.dragging=!1;var touch=touchEvent.touches[0];this.touchLastTime=touch,this.touchStart=touch;var touchMoveEvent=__name(function(e){return _this.onTouchMove(e,params.eElement)},"touchMoveEvent"),touchEndEvent=__name(function(e){return _this.onTouchUp(e,params.eElement)},"touchEndEvent"),documentTouchMove=__name(function(e){e.cancelable&&e.preventDefault()},"documentTouchMove"),target=touchEvent.target,events=[{target:document,type:"touchmove",listener:documentTouchMove,options:{passive:!1}},{target,type:"touchmove",listener:touchMoveEvent,options:{passive:!0}},{target,type:"touchend",listener:touchEndEvent,options:{passive:!0}},{target,type:"touchcancel",listener:touchEndEvent,options:{passive:!0}}];this.addTemporaryEvents(events),0===params.dragStartPixels&&this.onCommonMove(touch,this.touchStart,params.eElement)},DragService2.prototype.onMouseDown=function(params,mouseEvent){var _this=this,e=mouseEvent;if(!(params.skipMouseEvent&&params.skipMouseEvent(mouseEvent)||e._alreadyProcessedByDragService||(e._alreadyProcessedByDragService=!0,0!==mouseEvent.button))){this.currentDragParams=params,this.dragging=!1,this.mouseStartEvent=mouseEvent;var eDocument=this.gridOptionsService.getDocument(),events=[{target:eDocument,type:"mousemove",listener:__name(function(event){return _this.onMouseMove(event,params.eElement)},"mouseMoveEvent")},{target:eDocument,type:"mouseup",listener:__name(function(event){return _this.onMouseUp(event,params.eElement)},"mouseUpEvent")},{target:eDocument,type:"contextmenu",listener:__name(function(event){return event.preventDefault()},"contextEvent")}];this.addTemporaryEvents(events),0===params.dragStartPixels&&this.onMouseMove(mouseEvent,params.eElement)}},DragService2.prototype.addTemporaryEvents=function(events){events.forEach(function(currentEvent){var target=currentEvent.target,type=currentEvent.type,listener=currentEvent.listener,options=currentEvent.options;target.addEventListener(type,listener,options)}),this.dragEndFunctions.push(function(){events.forEach(function(currentEvent){var target=currentEvent.target,type=currentEvent.type,listener=currentEvent.listener,options=currentEvent.options;target.removeEventListener(type,listener,options)})})},DragService2.prototype.isEventNearStartEvent=function(currentEvent,startEvent){var dragStartPixels=this.currentDragParams.dragStartPixels;return areEventsNear(currentEvent,startEvent,exists(dragStartPixels)?dragStartPixels:4)},DragService2.prototype.getFirstActiveTouch=function(touchList){for(var i=0;i<touchList.length;i++)if(touchList[i].identifier===this.touchStart.identifier)return touchList[i];return null},DragService2.prototype.onCommonMove=function(currentEvent,startEvent,el){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(currentEvent,startEvent))return;this.dragging=!0;var event_1={type:Events.EVENT_DRAG_STARTED,target:el};this.eventService.dispatchEvent(event_1),this.currentDragParams.onDragStart(startEvent),this.currentDragParams.onDragging(startEvent)}this.currentDragParams.onDragging(currentEvent)},DragService2.prototype.onTouchMove=function(touchEvent,el){var touch=this.getFirstActiveTouch(touchEvent.touches);touch&&this.onCommonMove(touch,this.touchStart,el)},DragService2.prototype.onMouseMove=function(mouseEvent,el){(this.gridOptionsService.is("enableCellTextSelection")||isBrowserSafari())&&"mousemove"===mouseEvent.type&&mouseEvent.cancelable&&this.mouseEventService.isEventFromThisGrid(mouseEvent)&&!this.isOverFormFieldElement(mouseEvent)&&mouseEvent.preventDefault(),this.onCommonMove(mouseEvent,this.mouseStartEvent,el)},DragService2.prototype.isOverFormFieldElement=function(mouseEvent){var el=mouseEvent.target,tagName=null==el?void 0:el.tagName.toLocaleLowerCase();return!(null==tagName||!tagName.match("^a$|textarea|input|select|button"))},DragService2.prototype.onTouchUp=function(touchEvent,el){var touch=this.getFirstActiveTouch(touchEvent.changedTouches);touch||(touch=this.touchLastTime),this.onUpCommon(touch,el)},DragService2.prototype.onMouseUp=function(mouseEvent,el){this.onUpCommon(mouseEvent,el)},DragService2.prototype.onUpCommon=function(eventOrTouch,el){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(eventOrTouch);var event_2={type:Events.EVENT_DRAG_STOPPED,target:el};this.eventService.dispatchEvent(event_2)}this.mouseStartEvent=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(function(func){return func()}),this.dragEndFunctions.length=0},__decorate$1V([Autowired("loggerFactory")],DragService2.prototype,"loggerFactory",void 0),__decorate$1V([Autowired("mouseEventService")],DragService2.prototype,"mouseEventService",void 0),__decorate$1V([PostConstruct],DragService2.prototype,"init",null),__decorate$1V([PreDestroy],DragService2.prototype,"removeAllListeners",null),DragService2=__decorate$1V([Bean("dragService")],DragService2)}(BeanStub);(RowHighlightPosition2=RowHighlightPosition||(RowHighlightPosition={}))[RowHighlightPosition2.Above=0]="Above",RowHighlightPosition2[RowHighlightPosition2.Below=1]="Below",(ClientSideRowModelSteps2=ClientSideRowModelSteps||(ClientSideRowModelSteps={})).EVERYTHING="group",ClientSideRowModelSteps2.FILTER="filter",ClientSideRowModelSteps2.SORT="sort",ClientSideRowModelSteps2.MAP="map",ClientSideRowModelSteps2.AGGREGATE="aggregate",ClientSideRowModelSteps2.FILTER_AGGREGATES="filter_aggregates",ClientSideRowModelSteps2.PIVOT="pivot",ClientSideRowModelSteps2.NOTHING="nothing";var __decorate$1U=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};function unwrapUserComp(comp){var compAsAny=comp;return null!=compAsAny&&null!=compAsAny.getFrameworkComponentInstance?compAsAny.getFrameworkComponentInstance():comp}__name(unwrapUserComp,"unwrapUserComp");var LayoutCssClasses,LayoutCssClasses2,GridApi=function(){function GridApi2(){this.detailGridInfoMap={},this.destroyCalled=!1}return __name(GridApi2,"GridApi"),GridApi2.prototype.registerOverlayWrapperComp=function(overlayWrapperComp){this.overlayWrapperComp=overlayWrapperComp},GridApi2.prototype.registerSideBarComp=function(sideBarComp){this.sideBarComp=sideBarComp},GridApi2.prototype.init=function(){var _this=this;switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel}this.ctrlsService.whenReady(function(){_this.gridBodyCtrl=_this.ctrlsService.getGridBodyCtrl()})},GridApi2.prototype.__getAlignedGridService=function(){return this.alignedGridsService},GridApi2.prototype.__getContext=function(){return this.context},GridApi2.prototype.getSetterMethod=function(key){return"set"+key.charAt(0).toUpperCase()+key.substring(1)},GridApi2.prototype.__setProperty=function(propertyName,value){this.gridOptionsService.set(propertyName,value);var setterName=this.getSetterMethod(propertyName);this[setterName]&&this[setterName](value)},GridApi2.prototype.addDetailGridInfo=function(id,gridInfo){this.detailGridInfoMap[id]=gridInfo},GridApi2.prototype.removeDetailGridInfo=function(id){this.detailGridInfoMap[id]=void 0},GridApi2.prototype.getDetailGridInfo=function(id){return this.detailGridInfoMap[id]},GridApi2.prototype.forEachDetailGridInfo=function(callback){var index=0;iterateObject(this.detailGridInfoMap,function(id,gridInfo){exists(gridInfo)&&(callback(gridInfo,index),index++)})},GridApi2.prototype.getDataAsCsv=function(params){if(ModuleRegistry.assertRegistered(ModuleNames.CsvExportModule,"api.getDataAsCsv"))return this.csvCreator.getDataAsCsv(params)},GridApi2.prototype.exportDataAsCsv=function(params){ModuleRegistry.assertRegistered(ModuleNames.CsvExportModule,"api.exportDataAsCSv")&&this.csvCreator.exportDataAsCsv(params)},GridApi2.prototype.getExcelExportMode=function(params){var baseParams=this.gridOptionsService.get("defaultExcelExportParams");return Object.assign({exportMode:"xlsx"},baseParams,params).exportMode},GridApi2.prototype.assertNotExcelMultiSheet=function(method,params){if(!ModuleRegistry.assertRegistered(ModuleNames.ExcelExportModule,"api."+method))return!1;var exportMode=this.getExcelExportMode(params);return this.excelCreator.getFactoryMode(exportMode)!==ExcelFactoryMode.MULTI_SHEET||(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1)},GridApi2.prototype.getDataAsExcel=function(params){if(this.assertNotExcelMultiSheet("getDataAsExcel",params))return this.excelCreator.getDataAsExcel(params)},GridApi2.prototype.exportDataAsExcel=function(params){this.assertNotExcelMultiSheet("exportDataAsExcel",params)&&this.excelCreator.exportDataAsExcel(params)},GridApi2.prototype.getSheetDataForExcel=function(params){if(ModuleRegistry.assertRegistered(ModuleNames.ExcelExportModule,"api.getSheetDataForExcel")){var exportMode=this.getExcelExportMode(params);return this.excelCreator.setFactoryMode(ExcelFactoryMode.MULTI_SHEET,exportMode),this.excelCreator.getSheetDataForExcel(params)}},GridApi2.prototype.getMultipleSheetsAsExcel=function(params){if(ModuleRegistry.assertRegistered(ModuleNames.ExcelExportModule,"api.getMultipleSheetsAsExcel"))return this.excelCreator.getMultipleSheetsAsExcel(params)},GridApi2.prototype.exportMultipleSheetsAsExcel=function(params){if(ModuleRegistry.assertRegistered(ModuleNames.ExcelExportModule,"api.exportMultipleSheetsAsExcel"))return this.excelCreator.exportMultipleSheetsAsExcel(params)},GridApi2.prototype.setGridAriaProperty=function(property,value){if(property){var eGrid=this.ctrlsService.getGridBodyCtrl().getGui(),ariaProperty="aria-"+property;null===value?eGrid.removeAttribute(ariaProperty):eGrid.setAttribute(ariaProperty,value)}},GridApi2.prototype.logMissingRowModel=function(apiMethod){for(var requiredRowModels=[],_i=1;_i<arguments.length;_i++)requiredRowModels[_i-1]=arguments[_i];console.error("AG Grid: api."+apiMethod+" can only be called when gridOptions.rowModelType is "+requiredRowModels.join(" or "))},GridApi2.prototype.setServerSideDatasource=function(datasource){this.serverSideRowModel?this.serverSideRowModel.setDatasource(datasource):this.logMissingRowModel("setServerSideDatasource","serverSide")},GridApi2.prototype.setCacheBlockSize=function(blockSize){this.serverSideRowModel?(this.gridOptionsService.set("cacheBlockSize",blockSize),this.serverSideRowModel.resetRootStore()):this.logMissingRowModel("setCacheBlockSize","serverSide")},GridApi2.prototype.setDatasource=function(datasource){this.gridOptionsService.isRowModelType("infinite")?this.rowModel.setDatasource(datasource):this.logMissingRowModel("setDatasource","infinite")},GridApi2.prototype.setViewportDatasource=function(viewportDatasource){this.gridOptionsService.isRowModelType("viewport")?this.rowModel.setViewportDatasource(viewportDatasource):this.logMissingRowModel("setViewportDatasource","viewport")},GridApi2.prototype.setRowData=function(rowData){null==this.immutableService?this.logMissingRowModel("setRowData","clientSide"):this.immutableService.isActive()?this.immutableService.setRowData(rowData):(this.selectionService.reset(),this.clientSideRowModel.setRowData(rowData))},GridApi2.prototype.setPinnedTopRowData=function(rows){this.pinnedRowModel.setPinnedTopRowData(rows)},GridApi2.prototype.setPinnedBottomRowData=function(rows){this.pinnedRowModel.setPinnedBottomRowData(rows)},GridApi2.prototype.getPinnedTopRowCount=function(){return this.pinnedRowModel.getPinnedTopRowCount()},GridApi2.prototype.getPinnedBottomRowCount=function(){return this.pinnedRowModel.getPinnedBottomRowCount()},GridApi2.prototype.getPinnedTopRow=function(index){return this.pinnedRowModel.getPinnedTopRow(index)},GridApi2.prototype.getPinnedBottomRow=function(index){return this.pinnedRowModel.getPinnedBottomRow(index)},GridApi2.prototype.setColumnDefs=function(colDefs,source){void 0===source&&(source="api"),this.columnModel.setColumnDefs(colDefs,source),this.gridOptionsService.set("columnDefs",colDefs,!0,{source})},GridApi2.prototype.setAutoGroupColumnDef=function(colDef,source){void 0===source&&(source="api"),this.gridOptionsService.set("autoGroupColumnDef",colDef,!0,{source})},GridApi2.prototype.setDefaultColDef=function(colDef,source){void 0===source&&(source="api"),this.gridOptionsService.set("defaultColDef",colDef,!0,{source})},GridApi2.prototype.setColumnTypes=function(columnTypes,source){void 0===source&&(source="api"),this.gridOptionsService.set("columnTypes",columnTypes,!0,{source})},GridApi2.prototype.expireValueCache=function(){this.valueCache.expire()},GridApi2.prototype.getVerticalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()},GridApi2.prototype.getHorizontalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()},GridApi2.prototype.setAlwaysShowHorizontalScroll=function(show){this.gridOptionsService.set("alwaysShowHorizontalScroll",show)},GridApi2.prototype.setAlwaysShowVerticalScroll=function(show){this.gridOptionsService.set("alwaysShowVerticalScroll",show)},GridApi2.prototype.refreshCells=function(params){void 0===params&&(params={}),this.rowRenderer.refreshCells(params)},GridApi2.prototype.flashCells=function(params){void 0===params&&(params={}),this.rowRenderer.flashCells(params)},GridApi2.prototype.redrawRows=function(params){void 0===params&&(params={});var rowNodes=params?params.rowNodes:void 0;this.rowRenderer.redrawRows(rowNodes)},GridApi2.prototype.setFunctionsReadOnly=function(readOnly){this.gridOptionsService.set("functionsReadOnly",readOnly)},GridApi2.prototype.refreshHeader=function(){this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(c){return c.refresh()})},GridApi2.prototype.isAnyFilterPresent=function(){return this.filterManager.isAnyFilterPresent()},GridApi2.prototype.isColumnFilterPresent=function(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()},GridApi2.prototype.isQuickFilterPresent=function(){return this.filterManager.isQuickFilterPresent()},GridApi2.prototype.getModel=function(){return this.rowModel},GridApi2.prototype.setRowNodeExpanded=function(rowNode,expanded,expandParents){rowNode&&(expandParents&&rowNode.parent&&-1!==rowNode.parent.level&&this.setRowNodeExpanded(rowNode.parent,expanded,expandParents),rowNode.setExpanded(expanded))},GridApi2.prototype.onGroupExpandedOrCollapsed=function(){missing(this.clientSideRowModel)?this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide"):this.clientSideRowModel.refreshModel({step:ClientSideRowModelSteps.MAP})},GridApi2.prototype.refreshClientSideRowModel=function(step){missing(this.clientSideRowModel)?this.logMissingRowModel("refreshClientSideRowModel","clientSide"):this.clientSideRowModel.refreshModel(step)},GridApi2.prototype.isAnimationFrameQueueEmpty=function(){return this.animationFrameService.isQueueEmpty()},GridApi2.prototype.flushAllAnimationFrames=function(){this.animationFrameService.flushAllFrames()},GridApi2.prototype.getRowNode=function(id){return this.rowModel.getRowNode(id)},GridApi2.prototype.getSizesForCurrentTheme=function(){return{rowHeight:this.gridOptionsService.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}},GridApi2.prototype.expandAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!0):this.serverSideRowModel?this.serverSideRowModel.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")},GridApi2.prototype.collapseAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!1):this.serverSideRowModel?this.serverSideRowModel.expandAll(!1):this.logMissingRowModel("expandAll","clientSide","serverSide")},GridApi2.prototype.addRenderedRowListener=function(eventName,rowIndex,callback){this.rowRenderer.addRenderedRowListener(eventName,rowIndex,callback)},GridApi2.prototype.getQuickFilter=function(){return this.gridOptionsService.get("quickFilterText")},GridApi2.prototype.setQuickFilter=function(newFilter){this.gridOptionsService.set("quickFilterText",newFilter)},GridApi2.prototype.setExcludeHiddenColumnsFromQuickFilter=function(value){this.gridOptionsService.set("excludeHiddenColumnsFromQuickFilter",value)},GridApi2.prototype.selectAll=function(source){void 0===source&&(source="apiSelectAll"),this.selectionService.selectAllRowNodes({source})},GridApi2.prototype.deselectAll=function(source){void 0===source&&(source="apiSelectAll"),this.selectionService.deselectAllRowNodes({source})},GridApi2.prototype.selectAllFiltered=function(source){void 0===source&&(source="apiSelectAllFiltered"),this.selectionService.selectAllRowNodes({source,justFiltered:!0})},GridApi2.prototype.deselectAllFiltered=function(source){void 0===source&&(source="apiSelectAllFiltered"),this.selectionService.deselectAllRowNodes({source,justFiltered:!0})},GridApi2.prototype.selectAllOnCurrentPage=function(source){void 0===source&&(source="apiSelectAllCurrentPage"),this.selectionService.selectAllRowNodes({source,justCurrentPage:!0})},GridApi2.prototype.deselectAllOnCurrentPage=function(source){void 0===source&&(source="apiSelectAllCurrentPage"),this.selectionService.deselectAllRowNodes({source,justCurrentPage:!0})},GridApi2.prototype.sizeColumnsToFit=function(params){this.gridBodyCtrl.sizeColumnsToFit(params)},GridApi2.prototype.showLoadingOverlay=function(){this.overlayWrapperComp.showLoadingOverlay()},GridApi2.prototype.showNoRowsOverlay=function(){this.overlayWrapperComp.showNoRowsOverlay()},GridApi2.prototype.hideOverlay=function(){this.overlayWrapperComp.hideOverlay()},GridApi2.prototype.getSelectedNodes=function(){return this.selectionService.getSelectedNodes()},GridApi2.prototype.getSelectedRows=function(){return this.selectionService.getSelectedRows()},GridApi2.prototype.getBestCostNodeSelection=function(){if(!missing(this.clientSideRowModel))return this.selectionService.getBestCostNodeSelection();this.logMissingRowModel("getBestCostNodeSelection","clientSide")},GridApi2.prototype.getRenderedNodes=function(){return this.rowRenderer.getRenderedNodes()},GridApi2.prototype.ensureColumnVisible=function(key,position){void 0===position&&(position="auto"),this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(key,position)},GridApi2.prototype.ensureIndexVisible=function(index,position){this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(index,position)},GridApi2.prototype.ensureNodeVisible=function(nodeSelector,position){void 0===position&&(position=null),this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(nodeSelector,position)},GridApi2.prototype.forEachLeafNode=function(callback){missing(this.clientSideRowModel)?this.logMissingRowModel("forEachLeafNode","clientSide"):this.clientSideRowModel.forEachLeafNode(callback)},GridApi2.prototype.forEachNode=function(callback,includeFooterNodes){this.rowModel.forEachNode(callback,includeFooterNodes)},GridApi2.prototype.forEachNodeAfterFilter=function(callback){missing(this.clientSideRowModel)?this.logMissingRowModel("forEachNodeAfterFilter","clientSide"):this.clientSideRowModel.forEachNodeAfterFilter(callback)},GridApi2.prototype.forEachNodeAfterFilterAndSort=function(callback){missing(this.clientSideRowModel)?this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide"):this.clientSideRowModel.forEachNodeAfterFilterAndSort(callback)},GridApi2.prototype.getFilterInstance=function(key,callback){var res=this.getFilterInstanceImpl(key,function(instance){if(callback){var unwrapped2=unwrapUserComp(instance);callback(unwrapped2)}});return unwrapUserComp(res)},GridApi2.prototype.getFilterInstanceImpl=function(key,callback){var column=this.columnModel.getPrimaryColumn(key);if(column){var filterPromise=this.filterManager.getFilterComponent(column,"NO_UI"),currentValue=filterPromise&&filterPromise.resolveNow(null,function(filterComp){return filterComp});return currentValue?setTimeout(callback,0,currentValue):filterPromise&&filterPromise.then(function(comp){callback(comp)}),currentValue}},GridApi2.prototype.destroyFilter=function(key){var column=this.columnModel.getPrimaryColumn(key);if(column)return this.filterManager.destroyFilter(column,"filterDestroyed")},GridApi2.prototype.getStatusPanel=function(key){if(ModuleRegistry.assertRegistered(ModuleNames.StatusBarModule,"api.getStatusPanel"))return unwrapUserComp(this.statusBarService.getStatusPanel(key))},GridApi2.prototype.getColumnDef=function(key){var column=this.columnModel.getPrimaryColumn(key);return column?column.getColDef():null},GridApi2.prototype.getColumnDefs=function(){return this.columnModel.getColumnDefs()},GridApi2.prototype.onFilterChanged=function(){this.filterManager.onFilterChanged()},GridApi2.prototype.onSortChanged=function(){this.sortController.onSortChanged("api")},GridApi2.prototype.setFilterModel=function(model){this.filterManager.setFilterModel(model)},GridApi2.prototype.getFilterModel=function(){return this.filterManager.getFilterModel()},GridApi2.prototype.getFocusedCell=function(){return this.focusService.getFocusedCell()},GridApi2.prototype.clearFocusedCell=function(){return this.focusService.clearFocusedCell()},GridApi2.prototype.setFocusedCell=function(rowIndex,colKey,rowPinned){this.focusService.setFocusedCell({rowIndex,column:colKey,rowPinned,forceBrowserFocus:!0})},GridApi2.prototype.setSuppressRowDrag=function(value){this.gridOptionsService.set("suppressRowDrag",value)},GridApi2.prototype.setSuppressMoveWhenRowDragging=function(value){this.gridOptionsService.set("suppressMoveWhenRowDragging",value)},GridApi2.prototype.setSuppressRowClickSelection=function(value){this.gridOptionsService.set("suppressRowClickSelection",value)},GridApi2.prototype.addRowDropZone=function(params){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(params)},GridApi2.prototype.removeRowDropZone=function(params){var activeDropTarget=this.dragAndDropService.findExternalZone(params);activeDropTarget&&this.dragAndDropService.removeDropTarget(activeDropTarget)},GridApi2.prototype.getRowDropZoneParams=function(events){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(events)},GridApi2.prototype.setHeaderHeight=function(headerHeight){this.gridOptionsService.set("headerHeight",headerHeight)},GridApi2.prototype.setDomLayout=function(domLayout){this.gridOptionsService.set("domLayout",domLayout)},GridApi2.prototype.setEnableCellTextSelection=function(selectable){this.gridBodyCtrl.setCellTextSelection(selectable)},GridApi2.prototype.setFillHandleDirection=function(direction){this.gridOptionsService.set("fillHandleDirection",direction)},GridApi2.prototype.setGroupHeaderHeight=function(headerHeight){this.gridOptionsService.set("groupHeaderHeight",headerHeight)},GridApi2.prototype.setFloatingFiltersHeight=function(headerHeight){this.gridOptionsService.set("floatingFiltersHeight",headerHeight)},GridApi2.prototype.setPivotHeaderHeight=function(headerHeight){this.gridOptionsService.set("pivotHeaderHeight",headerHeight)},GridApi2.prototype.setPivotGroupHeaderHeight=function(headerHeight){this.gridOptionsService.set("pivotGroupHeaderHeight",headerHeight)},GridApi2.prototype.setPivotMode=function(pivotMode){this.columnModel.setPivotMode(pivotMode)},GridApi2.prototype.setAnimateRows=function(animateRows){this.gridOptionsService.set("animateRows",animateRows)},GridApi2.prototype.setIsExternalFilterPresent=function(isExternalFilterPresentFunc){this.gridOptionsService.set("isExternalFilterPresent",isExternalFilterPresentFunc)},GridApi2.prototype.setDoesExternalFilterPass=function(doesExternalFilterPassFunc){this.gridOptionsService.set("doesExternalFilterPass",doesExternalFilterPassFunc)},GridApi2.prototype.setNavigateToNextCell=function(navigateToNextCellFunc){this.gridOptionsService.set("navigateToNextCell",navigateToNextCellFunc)},GridApi2.prototype.setTabToNextCell=function(tabToNextCellFunc){this.gridOptionsService.set("tabToNextCell",tabToNextCellFunc)},GridApi2.prototype.setTabToNextHeader=function(tabToNextHeaderFunc){this.gridOptionsService.set("tabToNextHeader",tabToNextHeaderFunc)},GridApi2.prototype.setNavigateToNextHeader=function(navigateToNextHeaderFunc){this.gridOptionsService.set("navigateToNextHeader",navigateToNextHeaderFunc)},GridApi2.prototype.setRowGroupPanelShow=function(rowGroupPanelShow){this.gridOptionsService.set("rowGroupPanelShow",rowGroupPanelShow)},GridApi2.prototype.setGroupRowAggNodes=function(groupRowAggNodesFunc){logDeprecation("27.2","setGroupRowAggNodes","setGetGroupRowAgg"),this.gridOptionsService.set("groupRowAggNodes",groupRowAggNodesFunc)},GridApi2.prototype.setGetGroupRowAgg=function(getGroupRowAggFunc){this.gridOptionsService.set("getGroupRowAgg",getGroupRowAggFunc)},GridApi2.prototype.setGetBusinessKeyForNode=function(getBusinessKeyForNodeFunc){this.gridOptionsService.set("getBusinessKeyForNode",getBusinessKeyForNodeFunc)},GridApi2.prototype.setGetChildCount=function(getChildCountFunc){this.gridOptionsService.set("getChildCount",getChildCountFunc)},GridApi2.prototype.setProcessRowPostCreate=function(processRowPostCreateFunc){this.gridOptionsService.set("processRowPostCreate",processRowPostCreateFunc)},GridApi2.prototype.setGetRowNodeId=function(getRowNodeIdFunc){logDeprecation("27.1","setGetRowNodeId","setGetRowId"),this.gridOptionsService.set("getRowNodeId",getRowNodeIdFunc)},GridApi2.prototype.setGetRowId=function(getRowIdFunc){this.gridOptionsService.set("getRowId",getRowIdFunc)},GridApi2.prototype.setGetRowClass=function(rowClassFunc){this.gridOptionsService.set("getRowClass",rowClassFunc)},GridApi2.prototype.setIsFullWidthCell=function(isFullWidthCellFunc){logDeprecation("27.2","setIsFullWidthCell","setIsFullWidthRow"),this.gridOptionsService.set("isFullWidthCell",isFullWidthCellFunc)},GridApi2.prototype.setIsFullWidthRow=function(isFullWidthRowFunc){this.gridOptionsService.set("isFullWidthRow",isFullWidthRowFunc)},GridApi2.prototype.setIsRowSelectable=function(isRowSelectableFunc){this.gridOptionsService.set("isRowSelectable",isRowSelectableFunc)},GridApi2.prototype.setIsRowMaster=function(isRowMasterFunc){this.gridOptionsService.set("isRowMaster",isRowMasterFunc)},GridApi2.prototype.setPostSort=function(postSortFunc){logDeprecation("27.2","setPostSort","setPostSortRows"),this.gridOptionsService.set("postSort",postSortFunc)},GridApi2.prototype.setPostSortRows=function(postSortRowsFunc){this.gridOptionsService.set("postSortRows",postSortRowsFunc)},GridApi2.prototype.setGetDocument=function(getDocumentFunc){this.gridOptionsService.set("getDocument",getDocumentFunc)},GridApi2.prototype.setGetContextMenuItems=function(getContextMenuItemsFunc){this.gridOptionsService.set("getContextMenuItems",getContextMenuItemsFunc)},GridApi2.prototype.setGetMainMenuItems=function(getMainMenuItemsFunc){this.gridOptionsService.set("getMainMenuItems",getMainMenuItemsFunc)},GridApi2.prototype.setProcessCellForClipboard=function(processCellForClipboardFunc){this.gridOptionsService.set("processCellForClipboard",processCellForClipboardFunc)},GridApi2.prototype.setSendToClipboard=function(sendToClipboardFunc){this.gridOptionsService.set("sendToClipboard",sendToClipboardFunc)},GridApi2.prototype.setProcessCellFromClipboard=function(processCellFromClipboardFunc){this.gridOptionsService.set("processCellFromClipboard",processCellFromClipboardFunc)},GridApi2.prototype.setProcessSecondaryColDef=function(processSecondaryColDefFunc){logDeprecation("28.0","setProcessSecondaryColDef","setProcessPivotResultColDef"),this.setProcessPivotResultColDef(processSecondaryColDefFunc)},GridApi2.prototype.setProcessSecondaryColGroupDef=function(processSecondaryColGroupDefFunc){logDeprecation("28.0","setProcessSecondaryColGroupDef","setProcessPivotResultColGroupDef"),this.setProcessPivotResultColGroupDef(processSecondaryColGroupDefFunc)},GridApi2.prototype.setProcessPivotResultColDef=function(processPivotResultColDefFunc){this.gridOptionsService.set("processPivotResultColDef",processPivotResultColDefFunc)},GridApi2.prototype.setProcessPivotResultColGroupDef=function(processPivotResultColGroupDefFunc){this.gridOptionsService.set("processPivotResultColGroupDef",processPivotResultColGroupDefFunc)},GridApi2.prototype.setPostProcessPopup=function(postProcessPopupFunc){this.gridOptionsService.set("postProcessPopup",postProcessPopupFunc)},GridApi2.prototype.setDefaultGroupOrderComparator=function(defaultGroupOrderComparatorFunc){logDeprecation("27.2","setDefaultGroupOrderComparator","setInitialGroupOrderComparator"),this.gridOptionsService.set("defaultGroupOrderComparator",defaultGroupOrderComparatorFunc)},GridApi2.prototype.setInitialGroupOrderComparator=function(initialGroupOrderComparatorFunc){this.gridOptionsService.set("initialGroupOrderComparator",initialGroupOrderComparatorFunc)},GridApi2.prototype.setGetChartToolbarItems=function(getChartToolbarItemsFunc){this.gridOptionsService.set("getChartToolbarItems",getChartToolbarItemsFunc)},GridApi2.prototype.setPaginationNumberFormatter=function(paginationNumberFormatterFunc){this.gridOptionsService.set("paginationNumberFormatter",paginationNumberFormatterFunc)},GridApi2.prototype.setGetServerSideStoreParams=function(getServerSideStoreParamsFunc){logDeprecation("28.0","setGetServerSideStoreParams","setGetServerSideGroupLevelParams"),this.setGetServerSideGroupLevelParams(getServerSideStoreParamsFunc)},GridApi2.prototype.setGetServerSideGroupLevelParams=function(getServerSideGroupLevelParamsFunc){this.gridOptionsService.set("getServerSideGroupLevelParams",getServerSideGroupLevelParamsFunc)},GridApi2.prototype.setIsServerSideGroupOpenByDefault=function(isServerSideGroupOpenByDefaultFunc){this.gridOptionsService.set("isServerSideGroupOpenByDefault",isServerSideGroupOpenByDefaultFunc)},GridApi2.prototype.setIsApplyServerSideTransaction=function(isApplyServerSideTransactionFunc){this.gridOptionsService.set("isApplyServerSideTransaction",isApplyServerSideTransactionFunc)},GridApi2.prototype.setIsServerSideGroup=function(isServerSideGroupFunc){this.gridOptionsService.set("isServerSideGroup",isServerSideGroupFunc)},GridApi2.prototype.setGetServerSideGroupKey=function(getServerSideGroupKeyFunc){this.gridOptionsService.set("getServerSideGroupKey",getServerSideGroupKeyFunc)},GridApi2.prototype.setGetRowStyle=function(rowStyleFunc){this.gridOptionsService.set("getRowStyle",rowStyleFunc)},GridApi2.prototype.setGetRowHeight=function(rowHeightFunc){this.gridOptionsService.set("getRowHeight",rowHeightFunc)},GridApi2.prototype.assertSideBarLoaded=function(apiMethod){return ModuleRegistry.assertRegistered(ModuleNames.SideBarModule,"api."+apiMethod)},GridApi2.prototype.isSideBarVisible=function(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarComp.isDisplayed()},GridApi2.prototype.setSideBarVisible=function(show){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarComp.setDisplayed(show)},GridApi2.prototype.setSideBarPosition=function(position){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarComp.setSideBarPosition(position)},GridApi2.prototype.openToolPanel=function(key){this.assertSideBarLoaded("openToolPanel")&&this.sideBarComp.openToolPanel(key,"api")},GridApi2.prototype.closeToolPanel=function(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarComp.close("api")},GridApi2.prototype.getOpenedToolPanel=function(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarComp.openedItem():null},GridApi2.prototype.refreshToolPanel=function(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarComp.refresh()},GridApi2.prototype.isToolPanelShowing=function(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarComp.isToolPanelShowing()},GridApi2.prototype.getToolPanelInstance=function(id){if(this.assertSideBarLoaded("getToolPanelInstance"))return unwrapUserComp(this.sideBarComp.getToolPanelInstance(id))},GridApi2.prototype.getSideBar=function(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarComp.getDef()},GridApi2.prototype.setSideBar=function(def){this.gridOptionsService.set("sideBar",def)},GridApi2.prototype.setSuppressClipboardPaste=function(value){this.gridOptionsService.set("suppressClipboardPaste",value)},GridApi2.prototype.resetRowHeights=function(){if(exists(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive())return void console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");this.clientSideRowModel.resetRowHeights()}},GridApi2.prototype.setGroupRemoveSingleChildren=function(value){this.gridOptionsService.set("groupRemoveSingleChildren",value)},GridApi2.prototype.setGroupRemoveLowestSingleChildren=function(value){this.gridOptionsService.set("groupRemoveLowestSingleChildren",value)},GridApi2.prototype.setGroupDisplayType=function(value){this.gridOptionsService.set("groupDisplayType",value)},GridApi2.prototype.setRowClass=function(className){this.gridOptionsService.set("rowClass",className)},GridApi2.prototype.setDeltaSort=function(enable){this.gridOptionsService.set("deltaSort",enable)},GridApi2.prototype.setRowCount=function(rowCount,maxRowFound){if(this.serverSideRowModel)return this.columnModel.isRowGroupEmpty()?void this.serverSideRowModel.setRowCount(rowCount,maxRowFound):void console.error("AG Grid: setRowCount cannot be used while using row grouping.");this.infiniteRowModel?this.infiniteRowModel.setRowCount(rowCount,maxRowFound):this.logMissingRowModel("setRowCount","infinite","serverSide")},GridApi2.prototype.onRowHeightChanged=function(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()},GridApi2.prototype.getValue=function(colKey,rowNode){var column=this.columnModel.getPrimaryColumn(colKey);return missing(column)&&(column=this.columnModel.getGridColumn(colKey)),missing(column)?null:this.valueService.getValue(column,rowNode)},GridApi2.prototype.addEventListener=function(eventType,listener){var async=this.gridOptionsService.useAsyncEvents();this.eventService.addEventListener(eventType,listener,async)},GridApi2.prototype.addGlobalListener=function(listener){var async=this.gridOptionsService.useAsyncEvents();this.eventService.addGlobalListener(listener,async)},GridApi2.prototype.removeEventListener=function(eventType,listener){var async=this.gridOptionsService.useAsyncEvents();this.eventService.removeEventListener(eventType,listener,async)},GridApi2.prototype.removeGlobalListener=function(listener){var async=this.gridOptionsService.useAsyncEvents();this.eventService.removeGlobalListener(listener,async)},GridApi2.prototype.dispatchEvent=function(event){this.eventService.dispatchEvent(event)},GridApi2.prototype.destroy=function(){if(!this.destroyCalled){this.destroyCalled=!0;var gridCtrl=this.ctrlsService.getGridCtrl();gridCtrl&&gridCtrl.destroyGridUi(),this.context.destroy()}},GridApi2.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(removeAllReferences.bind(window,this,"Grid API"),100)},GridApi2.prototype.warnIfDestroyed=function(methodName){return this.destroyCalled&&console.warn("AG Grid: Grid API method "+methodName+" was called on a grid that was destroyed."),this.destroyCalled},GridApi2.prototype.resetQuickFilter=function(){this.warnIfDestroyed("resetQuickFilter")||this.filterManager.resetQuickFilterCache()},GridApi2.prototype.getCellRanges=function(){return this.rangeService?this.rangeService.getCellRanges():(ModuleRegistry.assertRegistered(ModuleNames.RangeSelectionModule,"api.getCellRanges"),null)},GridApi2.prototype.addCellRange=function(params){this.rangeService?this.rangeService.addCellRange(params):ModuleRegistry.assertRegistered(ModuleNames.RangeSelectionModule,"api.addCellRange")},GridApi2.prototype.clearRangeSelection=function(){this.rangeService&&this.rangeService.removeAllCellRanges(),ModuleRegistry.assertRegistered(ModuleNames.RangeSelectionModule,"gridApi.clearRangeSelection")},GridApi2.prototype.undoCellEditing=function(){this.undoRedoService.undo("api")},GridApi2.prototype.redoCellEditing=function(){this.undoRedoService.redo("api")},GridApi2.prototype.getCurrentUndoSize=function(){return this.undoRedoService.getCurrentUndoStackSize()},GridApi2.prototype.getCurrentRedoSize=function(){return this.undoRedoService.getCurrentRedoStackSize()},GridApi2.prototype.getChartModels=function(){if(ModuleRegistry.assertRegistered(ModuleNames.GridChartsModule,"api.getChartModels"))return this.chartService.getChartModels()},GridApi2.prototype.getChartRef=function(chartId){if(ModuleRegistry.assertRegistered(ModuleNames.GridChartsModule,"api.getChartRef"))return this.chartService.getChartRef(chartId)},GridApi2.prototype.getChartImageDataURL=function(params){if(ModuleRegistry.assertRegistered(ModuleNames.GridChartsModule,"api.getChartImageDataURL"))return this.chartService.getChartImageDataURL(params)},GridApi2.prototype.downloadChart=function(params){if(ModuleRegistry.assertRegistered(ModuleNames.GridChartsModule,"api.downloadChart"))return this.chartService.downloadChart(params)},GridApi2.prototype.openChartToolPanel=function(params){if(ModuleRegistry.assertRegistered(ModuleNames.GridChartsModule,"api.openChartToolPanel"))return this.chartService.openChartToolPanel(params)},GridApi2.prototype.closeChartToolPanel=function(params){if(ModuleRegistry.assertRegistered(ModuleNames.GridChartsModule,"api.closeChartToolPanel"))return this.chartService.closeChartToolPanel(params.chartId)},GridApi2.prototype.createRangeChart=function(params){if(ModuleRegistry.assertRegistered(ModuleNames.GridChartsModule,"api.createRangeChart"))return this.chartService.createRangeChart(params)},GridApi2.prototype.createCrossFilterChart=function(params){if(ModuleRegistry.assertRegistered(ModuleNames.GridChartsModule,"api.createCrossFilterChart"))return this.chartService.createCrossFilterChart(params)},GridApi2.prototype.restoreChart=function(chartModel,chartContainer){if(ModuleRegistry.assertRegistered(ModuleNames.GridChartsModule,"api.restoreChart"))return this.chartService.restoreChart(chartModel,chartContainer)},GridApi2.prototype.createPivotChart=function(params){if(ModuleRegistry.assertRegistered(ModuleNames.GridChartsModule,"api.createPivotChart"))return this.chartService.createPivotChart(params)},GridApi2.prototype.copyToClipboard=function(params){ModuleRegistry.assertRegistered(ModuleNames.ClipboardModule,"api.copyToClipboard")&&this.clipboardService.copyToClipboard(params)},GridApi2.prototype.cutToClipboard=function(params){ModuleRegistry.assertRegistered(ModuleNames.ClipboardModule,"api.cutToClipboard")&&this.clipboardService.cutToClipboard(params)},GridApi2.prototype.copySelectedRowsToClipboard=function(params){ModuleRegistry.assertRegistered(ModuleNames.ClipboardModule,"api.copySelectedRowsToClipboard")&&this.clipboardService.copySelectedRowsToClipboard(params)},GridApi2.prototype.copySelectedRangeToClipboard=function(params){ModuleRegistry.assertRegistered(ModuleNames.ClipboardModule,"api.copySelectedRangeToClipboard")&&this.clipboardService.copySelectedRangeToClipboard(params)},GridApi2.prototype.copySelectedRangeDown=function(){ModuleRegistry.assertRegistered(ModuleNames.ClipboardModule,"api.copySelectedRangeDown")&&this.clipboardService.copyRangeDown()},GridApi2.prototype.showColumnMenuAfterButtonClick=function(colKey,buttonElement){var column=this.columnModel.getGridColumn(colKey);this.menuFactory.showMenuAfterButtonClick(column,buttonElement,"columnMenu")},GridApi2.prototype.showColumnMenuAfterMouseClick=function(colKey,mouseEvent){var column=this.columnModel.getGridColumn(colKey);column||(column=this.columnModel.getPrimaryColumn(colKey)),column?this.menuFactory.showMenuAfterMouseEvent(column,mouseEvent):console.error("AG Grid: column '"+colKey+"' not found")},GridApi2.prototype.hidePopupMenu=function(){this.contextMenuFactory&&this.contextMenuFactory.hideActiveMenu(),this.menuFactory.hideActiveMenu()},GridApi2.prototype.setPopupParent=function(ePopupParent){this.gridOptionsService.set("popupParent",ePopupParent)},GridApi2.prototype.tabToNextCell=function(event){return this.navigationService.tabToNextCell(!1,event)},GridApi2.prototype.tabToPreviousCell=function(event){return this.navigationService.tabToNextCell(!0,event)},GridApi2.prototype.getCellRendererInstances=function(params){return void 0===params&&(params={}),this.rowRenderer.getCellRendererInstances(params).map(unwrapUserComp)},GridApi2.prototype.getCellEditorInstances=function(params){return void 0===params&&(params={}),this.rowRenderer.getCellEditorInstances(params).map(unwrapUserComp)},GridApi2.prototype.getEditingCells=function(){return this.rowRenderer.getEditingCells()},GridApi2.prototype.stopEditing=function(cancel){void 0===cancel&&(cancel=!1),this.rowRenderer.stopEditing(cancel)},GridApi2.prototype.startEditingCell=function(params){var column=this.columnModel.getGridColumn(params.colKey);if(column){var cellPosition={rowIndex:params.rowIndex,rowPinned:params.rowPinned||null,column};null==params.rowPinned&&this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(params.rowIndex);var cell=this.navigationService.getCellByPosition(cellPosition);cell&&cell.startRowOrCellEdit(params.key,params.charPress)}else console.warn("AG Grid: no column found for "+params.colKey)},GridApi2.prototype.addAggFunc=function(key,aggFunc){this.aggFuncService&&this.aggFuncService.addAggFunc(key,aggFunc)},GridApi2.prototype.addAggFuncs=function(aggFuncs){this.aggFuncService&&this.aggFuncService.addAggFuncs(aggFuncs)},GridApi2.prototype.clearAggFuncs=function(){this.aggFuncService&&this.aggFuncService.clear()},GridApi2.prototype.applyServerSideTransaction=function(transaction){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransaction(transaction);this.logMissingRowModel("applyServerSideTransaction","serverSide")},GridApi2.prototype.applyServerSideTransactionAsync=function(transaction,callback){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransactionAsync(transaction,callback);this.logMissingRowModel("applyServerSideTransactionAsync","serverSide")},GridApi2.prototype.retryServerSideLoads=function(){this.serverSideRowModel?this.serverSideRowModel.retryLoads():this.logMissingRowModel("retryServerSideLoads","serverSide")},GridApi2.prototype.flushServerSideAsyncTransactions=function(){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.flushAsyncTransactions();this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide")},GridApi2.prototype.applyTransaction=function(rowDataTransaction){if(this.clientSideRowModel){var res=this.clientSideRowModel.updateRowData(rowDataTransaction);return this.rowRenderer.refreshFullWidthRows(res.update),this.gridOptionsService.is("suppressChangeDetection")||this.rowRenderer.refreshCells(),res}this.logMissingRowModel("applyTransaction","clientSide")},GridApi2.prototype.applyTransactionAsync=function(rowDataTransaction,callback){this.clientSideRowModel?this.clientSideRowModel.batchUpdateRowData(rowDataTransaction,callback):this.logMissingRowModel("applyTransactionAsync","clientSide")},GridApi2.prototype.flushAsyncTransactions=function(){this.clientSideRowModel?this.clientSideRowModel.flushAsyncTransactions():this.logMissingRowModel("flushAsyncTransactions","clientSide")},GridApi2.prototype.setSuppressModelUpdateAfterUpdateTransaction=function(value){this.gridOptionsService.set("suppressModelUpdateAfterUpdateTransaction",value)},GridApi2.prototype.refreshInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")},GridApi2.prototype.purgeInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")},GridApi2.prototype.refreshServerSide=function(params){this.serverSideRowModel?this.serverSideRowModel.refreshStore(params):this.logMissingRowModel("refreshServerSide","serverSide")},GridApi2.prototype.refreshServerSideStore=function(params){return logDeprecation("28.0","refreshServerSideStore","refreshServerSide"),this.refreshServerSide(params)},GridApi2.prototype.getServerSideStoreState=function(){return logDeprecation("28.0","getServerSideStoreState","getServerSideGroupLevelState"),this.getServerSideGroupLevelState()},GridApi2.prototype.getServerSideGroupLevelState=function(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])},GridApi2.prototype.getInfiniteRowCount=function(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")},GridApi2.prototype.isLastRowIndexKnown=function(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")},GridApi2.prototype.getCacheBlockState=function(){return this.rowNodeBlockLoader.getBlockState()},GridApi2.prototype.getFirstDisplayedRow=function(){return this.rowRenderer.getFirstVirtualRenderedRow()},GridApi2.prototype.getLastDisplayedRow=function(){return this.rowRenderer.getLastVirtualRenderedRow()},GridApi2.prototype.getDisplayedRowAtIndex=function(index){return this.rowModel.getRow(index)},GridApi2.prototype.getDisplayedRowCount=function(){return this.rowModel.getRowCount()},GridApi2.prototype.setPagination=function(value){this.gridOptionsService.set("pagination",value)},GridApi2.prototype.paginationIsLastPageFound=function(){return this.paginationProxy.isLastPageFound()},GridApi2.prototype.paginationGetPageSize=function(){return this.paginationProxy.getPageSize()},GridApi2.prototype.paginationSetPageSize=function(size){this.gridOptionsService.set("paginationPageSize",size)},GridApi2.prototype.paginationGetCurrentPage=function(){return this.paginationProxy.getCurrentPage()},GridApi2.prototype.paginationGetTotalPages=function(){return this.paginationProxy.getTotalPages()},GridApi2.prototype.paginationGetRowCount=function(){return this.paginationProxy.getMasterRowCount()},GridApi2.prototype.paginationGoToNextPage=function(){this.paginationProxy.goToNextPage()},GridApi2.prototype.paginationGoToPreviousPage=function(){this.paginationProxy.goToPreviousPage()},GridApi2.prototype.paginationGoToFirstPage=function(){this.paginationProxy.goToFirstPage()},GridApi2.prototype.paginationGoToLastPage=function(){this.paginationProxy.goToLastPage()},GridApi2.prototype.paginationGoToPage=function(page){this.paginationProxy.goToPage(page)},__decorate$1U([Optional("immutableService")],GridApi2.prototype,"immutableService",void 0),__decorate$1U([Optional("csvCreator")],GridApi2.prototype,"csvCreator",void 0),__decorate$1U([Optional("excelCreator")],GridApi2.prototype,"excelCreator",void 0),__decorate$1U([Autowired("rowRenderer")],GridApi2.prototype,"rowRenderer",void 0),__decorate$1U([Autowired("navigationService")],GridApi2.prototype,"navigationService",void 0),__decorate$1U([Autowired("filterManager")],GridApi2.prototype,"filterManager",void 0),__decorate$1U([Autowired("columnModel")],GridApi2.prototype,"columnModel",void 0),__decorate$1U([Autowired("selectionService")],GridApi2.prototype,"selectionService",void 0),__decorate$1U([Autowired("gridOptionsService")],GridApi2.prototype,"gridOptionsService",void 0),__decorate$1U([Autowired("valueService")],GridApi2.prototype,"valueService",void 0),__decorate$1U([Autowired("alignedGridsService")],GridApi2.prototype,"alignedGridsService",void 0),__decorate$1U([Autowired("eventService")],GridApi2.prototype,"eventService",void 0),__decorate$1U([Autowired("pinnedRowModel")],GridApi2.prototype,"pinnedRowModel",void 0),__decorate$1U([Autowired("context")],GridApi2.prototype,"context",void 0),__decorate$1U([Autowired("rowModel")],GridApi2.prototype,"rowModel",void 0),__decorate$1U([Autowired("sortController")],GridApi2.prototype,"sortController",void 0),__decorate$1U([Autowired("paginationProxy")],GridApi2.prototype,"paginationProxy",void 0),__decorate$1U([Autowired("focusService")],GridApi2.prototype,"focusService",void 0),__decorate$1U([Autowired("dragAndDropService")],GridApi2.prototype,"dragAndDropService",void 0),__decorate$1U([Optional("rangeService")],GridApi2.prototype,"rangeService",void 0),__decorate$1U([Optional("clipboardService")],GridApi2.prototype,"clipboardService",void 0),__decorate$1U([Optional("aggFuncService")],GridApi2.prototype,"aggFuncService",void 0),__decorate$1U([Autowired("menuFactory")],GridApi2.prototype,"menuFactory",void 0),__decorate$1U([Optional("contextMenuFactory")],GridApi2.prototype,"contextMenuFactory",void 0),__decorate$1U([Autowired("valueCache")],GridApi2.prototype,"valueCache",void 0),__decorate$1U([Autowired("animationFrameService")],GridApi2.prototype,"animationFrameService",void 0),__decorate$1U([Optional("statusBarService")],GridApi2.prototype,"statusBarService",void 0),__decorate$1U([Optional("chartService")],GridApi2.prototype,"chartService",void 0),__decorate$1U([Optional("undoRedoService")],GridApi2.prototype,"undoRedoService",void 0),__decorate$1U([Optional("rowNodeBlockLoader")],GridApi2.prototype,"rowNodeBlockLoader",void 0),__decorate$1U([Optional("ssrmTransactionManager")],GridApi2.prototype,"serverSideTransactionManager",void 0),__decorate$1U([Autowired("ctrlsService")],GridApi2.prototype,"ctrlsService",void 0),__decorate$1U([PostConstruct],GridApi2.prototype,"init",null),__decorate$1U([PreDestroy],GridApi2.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),GridApi2=__decorate$1U([Bean("gridApi")],GridApi2)}(),__extends$25=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$a=function(){return __assign$a=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$a.apply(this,arguments)},__decorate$1T=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FilterManager=function(_super){function FilterManager2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.allColumnFilters=new Map,_this.activeAggregateFilters=[],_this.activeColumnFilters=[],_this.quickFilter=null,_this.quickFilterParts=null,_this.processingFilterChange=!1,_this}var FilterManager_1;return __extends$25(FilterManager2,_super),__name(FilterManager2,"FilterManager"),FilterManager_1=FilterManager2,FilterManager2.prototype.init=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_GRID_COLUMNS_CHANGED,function(){return _this.onColumnsChanged()}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VALUE_CHANGED,function(){return _this.refreshFiltersForAggregations()}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_CHANGED,function(){return _this.refreshFiltersForAggregations()}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){return _this.refreshFiltersForAggregations()}),this.addManagedPropertyListener("quickFilterText",function(e){return _this.setQuickFilter(e.currentValue)}),this.addManagedPropertyListener("excludeHiddenColumnsFromQuickFilter",function(){return _this.onExcludeHiddenColumnsFromQuickFilterChanged()}),this.quickFilter=this.parseQuickFilter(this.gridOptionsService.get("quickFilterText")),this.setQuickFilterParts(),this.allowShowChangeAfterFilter=this.gridOptionsService.is("allowShowChangeAfterFilter"),this.externalFilterPresent=this.isExternalFilterPresentCallback()},FilterManager2.prototype.isExternalFilterPresentCallback=function(){var isFilterPresent=this.gridOptionsService.getCallback("isExternalFilterPresent");return"function"==typeof isFilterPresent&&isFilterPresent({})},FilterManager2.prototype.doesExternalFilterPass=function(node){var doesFilterPass=this.gridOptionsService.get("doesExternalFilterPass");return"function"==typeof doesFilterPass&&doesFilterPass(node)},FilterManager2.prototype.setQuickFilterParts=function(){this.quickFilterParts=this.quickFilter?this.quickFilter.split(" "):null},FilterManager2.prototype.setFilterModel=function(model){var _this=this,allPromises=[],previousModel=this.getFilterModel();if(model){var modelKeys_1=convertToSet(Object.keys(model));this.allColumnFilters.forEach(function(filterWrapper,colId){var newModel=model[colId];allPromises.push(_this.setModelOnFilterWrapper(filterWrapper.filterPromise,newModel)),modelKeys_1.delete(colId)}),modelKeys_1.forEach(function(colId){var column=_this.columnModel.getPrimaryColumn(colId)||_this.columnModel.getGridColumn(colId);if(column)if(column.isFilterAllowed()){var filterWrapper=_this.getOrCreateFilterWrapper(column,"NO_UI");filterWrapper?allPromises.push(_this.setModelOnFilterWrapper(filterWrapper.filterPromise,model[colId])):console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+colId)}else console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+colId);else console.warn("AG Grid: setFilterModel() - no column found for colId: "+colId)})}else this.allColumnFilters.forEach(function(filterWrapper){allPromises.push(_this.setModelOnFilterWrapper(filterWrapper.filterPromise,null))});AgPromise.all(allPromises).then(function(){var currentModel=_this.getFilterModel(),columns=[];_this.allColumnFilters.forEach(function(filterWrapper,colId){var before=previousModel?previousModel[colId]:null,after=currentModel?currentModel[colId]:null;_.jsonEquals(before,after)||columns.push(filterWrapper.column)}),columns.length>0&&_this.onFilterChanged({columns})})},FilterManager2.prototype.setModelOnFilterWrapper=function(filterPromise,newModel){return new AgPromise(function(resolve){filterPromise.then(function(filter){"function"!=typeof filter.setModel&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),resolve()),(filter.setModel(newModel)||AgPromise.resolve()).then(function(){return resolve()})})})},FilterManager2.prototype.getFilterModel=function(){var result={};return this.allColumnFilters.forEach(function(filterWrapper,key){var filter=filterWrapper.filterPromise.resolveNow(null,function(promiseFilter){return promiseFilter});if(null==filter)return null;if("function"==typeof filter.getModel){var model=filter.getModel();exists(model)&&(result[key]=model)}else console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel")}),result},FilterManager2.prototype.isColumnFilterPresent=function(){return this.activeColumnFilters.length>0},FilterManager2.prototype.isAggregateFilterPresent=function(){return!!this.activeAggregateFilters.length},FilterManager2.prototype.isExternalFilterPresent=function(){return this.externalFilterPresent},FilterManager2.prototype.doAggregateFiltersPass=function(node,filterToSkip){return this.doColumnFiltersPass(node,filterToSkip,!0)},FilterManager2.prototype.updateActiveFilters=function(){var _this=this;this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;var isFilterActive=__name(function(filter){return!!filter&&(filter.isFilterActive?filter.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1))},"isFilterActive"),groupFilterEnabled=!!this.gridOptionsService.getGroupAggFiltering(),isAggFilter=__name(function(column){if(!column.isPrimary())return!0;var isShowingPrimaryColumns=!_this.columnModel.isPivotActive();return!(!column.isValueActive()||!isShowingPrimaryColumns)&&(!!_this.columnModel.isPivotMode()||groupFilterEnabled)},"isAggFilter");this.allColumnFilters.forEach(function(filterWrapper){if(filterWrapper.filterPromise.resolveNow(!1,isFilterActive)){var filterComp=filterWrapper.filterPromise.resolveNow(null,function(filter){return filter});isAggFilter(filterWrapper.column)?_this.activeAggregateFilters.push(filterComp):_this.activeColumnFilters.push(filterComp)}})},FilterManager2.prototype.updateFilterFlagInColumns=function(source,additionalEventAttributes){this.allColumnFilters.forEach(function(filterWrapper){var isFilterActive=filterWrapper.filterPromise.resolveNow(!1,function(filter){return filter.isFilterActive()});filterWrapper.column.setFilterActive(isFilterActive,source,additionalEventAttributes)})},FilterManager2.prototype.isAnyFilterPresent=function(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()},FilterManager2.prototype.doColumnFiltersPass=function(node,filterToSkip,targetAggregates){for(var data=node.data,aggData=node.aggData,targetedFilters=targetAggregates?this.activeAggregateFilters:this.activeColumnFilters,targetedData=targetAggregates?aggData:data,i=0;i<targetedFilters.length;i++){var filter=targetedFilters[i];if(null!=filter&&filter!==filterToSkip){if("function"!=typeof filter.doesFilterPass)throw new Error("Filter is missing method doesFilterPass");if(!filter.doesFilterPass({node,data:targetedData}))return!1}}return!0},FilterManager2.prototype.parseQuickFilter=function(newFilter){return exists(newFilter)?this.gridOptionsService.isRowModelType("clientSide")?newFilter.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null},FilterManager2.prototype.setQuickFilter=function(newFilter){if(null==newFilter||"string"==typeof newFilter){var parsedFilter=this.parseQuickFilter(newFilter);this.quickFilter!==parsedFilter&&(this.quickFilter=parsedFilter,this.setQuickFilterParts(),this.onFilterChanged())}else console.warn("AG Grid - setQuickFilter() only supports string inputs, received: "+typeof newFilter)},FilterManager2.prototype.resetQuickFilterCache=function(){this.rowModel.forEachNode(function(node){return node.quickFilterAggregateText=null})},FilterManager2.prototype.onExcludeHiddenColumnsFromQuickFilterChanged=function(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.onFilterChanged()},FilterManager2.prototype.refreshFiltersForAggregations=function(){this.gridOptionsService.getGroupAggFiltering()&&this.onFilterChanged()},FilterManager2.prototype.callOnFilterChangedOutsideRenderCycle=function(params){var _this=this;void 0===params&&(params={});var action=__name(function(){return _this.onFilterChanged(params)},"action");this.rowRenderer.isRefreshInProgress()?setTimeout(action,0):action()},FilterManager2.prototype.onFilterChanged=function(params){void 0===params&&(params={});var filterInstance=params.filterInstance,additionalEventAttributes=params.additionalEventAttributes,columns=params.columns;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",additionalEventAttributes),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach(function(filterWrapper){filterWrapper.filterPromise&&filterWrapper.filterPromise.then(function(filter){filter&&filter!==filterInstance&&filter.onAnyFilterChanged&&filter.onAnyFilterChanged()})});var filterChangedEvent={type:Events.EVENT_FILTER_CHANGED,columns:columns||[]};additionalEventAttributes&&mergeDeep(filterChangedEvent,additionalEventAttributes),this.processingFilterChange=!0,this.eventService.dispatchEvent(filterChangedEvent),this.processingFilterChange=!1},FilterManager2.prototype.isSuppressFlashingCellsBecauseFiltering=function(){return!this.allowShowChangeAfterFilter&&this.processingFilterChange},FilterManager2.prototype.isQuickFilterPresent=function(){return null!==this.quickFilter},FilterManager2.prototype.doesRowPassOtherFilters=function(filterToSkip,node){return this.doesRowPassFilter({rowNode:node,filterInstanceToSkip:filterToSkip})},FilterManager2.prototype.doesRowPassQuickFilterNoCache=function(node,filterPart){var _this=this;return this.columnModel.getAllColumnsForQuickFilter().some(function(column){var part=_this.getQuickFilterTextForColumn(column,node);return exists(part)&&part.indexOf(filterPart)>=0})},FilterManager2.prototype.doesRowPassQuickFilterCache=function(node,filterPart){return node.quickFilterAggregateText||this.aggregateRowForQuickFilter(node),node.quickFilterAggregateText.indexOf(filterPart)>=0},FilterManager2.prototype.doesRowPassQuickFilter=function(node){var _this=this,usingCache=this.gridOptionsService.is("cacheQuickFilter");return this.quickFilterParts.every(function(part){return usingCache?_this.doesRowPassQuickFilterCache(node,part):_this.doesRowPassQuickFilterNoCache(node,part)})},FilterManager2.prototype.doesRowPassAggregateFilters=function(params){return!(this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(params.rowNode,params.filterInstanceToSkip))},FilterManager2.prototype.doesRowPassFilter=function(params){return!(this.isQuickFilterPresent()&&!this.doesRowPassQuickFilter(params.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(params.rowNode)||this.isColumnFilterPresent()&&!this.doColumnFiltersPass(params.rowNode,params.filterInstanceToSkip))},FilterManager2.prototype.getQuickFilterTextForColumn=function(column,node){var value=this.valueService.getValue(column,node,!0),colDef=column.getColDef();if(colDef.getQuickFilterText){var params={value,node,data:node.data,column,colDef,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};value=colDef.getQuickFilterText(params)}return exists(value)?value.toString().toUpperCase():null},FilterManager2.prototype.aggregateRowForQuickFilter=function(node){var _this=this,stringParts=[];this.columnModel.getAllColumnsForQuickFilter().forEach(function(column){var part=_this.getQuickFilterTextForColumn(column,node);exists(part)&&stringParts.push(part)}),node.quickFilterAggregateText=stringParts.join(FilterManager_1.QUICK_FILTER_SEPARATOR)},FilterManager2.prototype.onNewRowsLoaded=function(source){this.allColumnFilters.forEach(function(filterWrapper){filterWrapper.filterPromise.then(function(filter){filter.onNewRowsLoaded&&filter.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(source,{afterDataChange:!0}),this.updateActiveFilters()},FilterManager2.prototype.createValueGetter=function(column){var _this=this;return function(_a){var node=_a.node;return _this.valueService.getValue(column,node,!0)}},FilterManager2.prototype.getFilterComponent=function(column,source,createIfDoesNotExist){var _a;if(void 0===createIfDoesNotExist&&(createIfDoesNotExist=!0),createIfDoesNotExist)return(null===(_a=this.getOrCreateFilterWrapper(column,source))||void 0===_a?void 0:_a.filterPromise)||null;var filterWrapper=this.cachedFilter(column);return filterWrapper?filterWrapper.filterPromise:null},FilterManager2.prototype.isFilterActive=function(column){var filterWrapper=this.cachedFilter(column);return!!filterWrapper&&filterWrapper.filterPromise.resolveNow(!1,function(filter){return filter.isFilterActive()})},FilterManager2.prototype.getOrCreateFilterWrapper=function(column,source){if(!column.isFilterAllowed())return null;var filterWrapper=this.cachedFilter(column);return filterWrapper?"NO_UI"!==source&&this.putIntoGui(filterWrapper,source):(filterWrapper=this.createFilterWrapper(column,source),this.allColumnFilters.set(column.getColId(),filterWrapper)),filterWrapper},FilterManager2.prototype.cachedFilter=function(column){return this.allColumnFilters.get(column.getColId())},FilterManager2.prototype.createFilterInstance=function(column){var filterInstance,_this=this,defaultFilter=ModuleRegistry.isRegistered(ModuleNames.SetFilterModule)?"agSetColumnFilter":"agTextColumnFilter",colDef=column.getColDef(),params=__assign$a(__assign$a({},this.createFilterParams(column,colDef)),{filterModifiedCallback:function(){var event={type:Events.EVENT_FILTER_MODIFIED,column,filterInstance};_this.eventService.dispatchEvent(event)},filterChangedCallback:function(additionalEventAttributes){var params2={filterInstance,additionalEventAttributes,columns:[column]};_this.callOnFilterChangedOutsideRenderCycle(params2)},doesRowPassOtherFilter:function(node){return _this.doesRowPassOtherFilters(filterInstance,node)}}),compDetails=this.userComponentFactory.getFilterDetails(colDef,params,defaultFilter);if(!compDetails)return null;var componentPromise=compDetails.newAgStackInstance();return componentPromise&&componentPromise.then(function(r){return filterInstance=r}),componentPromise},FilterManager2.prototype.createFilterParams=function(column,colDef){return{column,colDef:cloneObject(colDef),rowModel:this.rowModel,filterChangedCallback:function(){},filterModifiedCallback:function(){},valueGetter:this.createValueGetter(column),doesRowPassOtherFilter:function(){return!0},api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}},FilterManager2.prototype.createFilterWrapper=function(column,source){var filterWrapper={column,filterPromise:null,compiledElement:null,guiPromise:AgPromise.resolve(null)};return filterWrapper.filterPromise=this.createFilterInstance(column),filterWrapper.filterPromise&&this.putIntoGui(filterWrapper,source),filterWrapper},FilterManager2.prototype.putIntoGui=function(filterWrapper,source){var _this=this,eFilterGui=document.createElement("div");eFilterGui.className="ag-filter",filterWrapper.guiPromise=new AgPromise(function(resolve){filterWrapper.filterPromise.then(function(filter){var guiFromFilter=filter.getGui();exists(guiFromFilter)||console.warn("AG Grid: getGui method from filter returned "+guiFromFilter+", it should be a DOM element or an HTML template string."),"string"==typeof guiFromFilter&&(guiFromFilter=loadTemplate(guiFromFilter)),eFilterGui.appendChild(guiFromFilter),resolve(eFilterGui);var event={type:Events.EVENT_FILTER_OPENED,column:filterWrapper.column,source,eGui:eFilterGui};_this.eventService.dispatchEvent(event)})})},FilterManager2.prototype.onColumnsChanged=function(){var _this=this,columns=[];this.allColumnFilters.forEach(function(wrapper,colId){!(wrapper.column.isPrimary()?_this.columnModel.getPrimaryColumn(colId):_this.columnModel.getGridColumn(colId))&&(columns.push(wrapper.column),_this.disposeFilterWrapper(wrapper,"filterDestroyed"))}),columns.length>0?this.onFilterChanged({columns}):this.updateDependantFilters()},FilterManager2.prototype.updateDependantFilters=function(){var _this=this,groupColumns=this.columnModel.getGroupAutoColumns();null==groupColumns||groupColumns.forEach(function(groupColumn){"agGroupColumnFilter"===groupColumn.getColDef().filter&&_this.getOrCreateFilterWrapper(groupColumn,"NO_UI")})},FilterManager2.prototype.isFilterAllowed=function(column){var _a,_b;if(!column.isFilterAllowed())return!1;var filterWrapper=this.allColumnFilters.get(column.getColId());return null===(_b=null===(_a=null==filterWrapper?void 0:filterWrapper.filterPromise)||void 0===_a?void 0:_a.resolveNow(!0,function(filter){var _a2,_b2;return"function"!=typeof(null===(_a2=filter)||void 0===_a2?void 0:_a2.isFilterAllowed)||(null===(_b2=filter)||void 0===_b2?void 0:_b2.isFilterAllowed())}))||void 0===_b||_b},FilterManager2.prototype.getFloatingFilterCompDetails=function(column,showParentFilter){var _this=this,colDef=column.getColDef(),filterParams=this.createFilterParams(column,colDef),finalFilterParams=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(colDef,FilterComponent,filterParams),defaultFloatingFilterType=this.userComponentFactory.getDefaultFloatingFilterType(colDef);null==defaultFloatingFilterType&&(defaultFloatingFilterType="agReadOnlyFloatingFilter");var params={column,filterParams:finalFilterParams,currentParentModel:function(){return _this.getCurrentFloatingFilterParentModel(column)},parentFilterInstance:__name(function(callback){var filterComponent=_this.getFilterComponent(column,"NO_UI");null!=filterComponent&&filterComponent.then(function(instance){callback(unwrapUserComp(instance))})},"parentFilterInstance"),showParentFilter,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(colDef,params,defaultFloatingFilterType)},FilterManager2.prototype.getCurrentFloatingFilterParentModel=function(column){var filterComponent=this.getFilterComponent(column,"NO_UI",!1);return filterComponent?filterComponent.resolveNow(null,function(filter){return filter&&filter.getModel()}):null},FilterManager2.prototype.destroyFilter=function(column,source){void 0===source&&(source="api");var filterWrapper=this.allColumnFilters.get(column.getColId());filterWrapper&&(this.disposeFilterWrapper(filterWrapper,source),this.onFilterChanged({columns:[column]}))},FilterManager2.prototype.disposeFilterWrapper=function(filterWrapper,source){var _this=this;filterWrapper.filterPromise.then(function(filter){(filter.setModel(null)||AgPromise.resolve()).then(function(){_this.getContext().destroyBean(filter),_this.allColumnFilters.delete(filterWrapper.column.getColId()),filterWrapper.column.setFilterActive(!1,source)})})},FilterManager2.prototype.destroy=function(){var _this=this;_super.prototype.destroy.call(this),this.allColumnFilters.forEach(function(filterWrapper){return _this.disposeFilterWrapper(filterWrapper,"filterDestroyed")})},FilterManager2.QUICK_FILTER_SEPARATOR="\n",__decorate$1T([Autowired("valueService")],FilterManager2.prototype,"valueService",void 0),__decorate$1T([Autowired("columnModel")],FilterManager2.prototype,"columnModel",void 0),__decorate$1T([Autowired("rowModel")],FilterManager2.prototype,"rowModel",void 0),__decorate$1T([Autowired("userComponentFactory")],FilterManager2.prototype,"userComponentFactory",void 0),__decorate$1T([Autowired("rowRenderer")],FilterManager2.prototype,"rowRenderer",void 0),__decorate$1T([PostConstruct],FilterManager2.prototype,"init",null),__decorate$1T([PreDestroy],FilterManager2.prototype,"destroy",null),FilterManager2=FilterManager_1=__decorate$1T([Bean("filterManager")],FilterManager2)}(BeanStub),__extends$24=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AbstractHeaderCellComp=function(_super){function AbstractHeaderCellComp2(template,ctrl){var _this=_super.call(this,template)||this;return _this.ctrl=ctrl,_this}return __extends$24(AbstractHeaderCellComp2,_super),__name(AbstractHeaderCellComp2,"AbstractHeaderCellComp"),AbstractHeaderCellComp2.prototype.getCtrl=function(){return this.ctrl},AbstractHeaderCellComp2}(Component),__extends$23=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1S=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderFilterCellComp=function(_super){function HeaderFilterCellComp2(ctrl){return _super.call(this,HeaderFilterCellComp2.TEMPLATE,ctrl)||this}return __extends$23(HeaderFilterCellComp2,_super),__name(HeaderFilterCellComp2,"HeaderFilterCellComp"),HeaderFilterCellComp2.prototype.postConstruct=function(){var _this=this,eGui=this.getGui(),compProxy={addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},addOrRemoveBodyCssClass:function(cssClassName,on){return _this.eFloatingFilterBody.classList.toggle(cssClassName,on)},setButtonWrapperDisplayed:function(displayed){return setDisplayed(_this.eButtonWrapper,displayed)},setCompDetails:function(compDetails){return _this.setCompDetails(compDetails)},getFloatingFilterComp:function(){return _this.compPromise},setWidth:function(width){return eGui.style.width=width},setMenuIcon:function(eIcon){return _this.eButtonShowMainFilter.appendChild(eIcon)}};this.ctrl.setComp(compProxy,eGui,this.eButtonShowMainFilter,this.eFloatingFilterBody)},HeaderFilterCellComp2.prototype.setCompDetails=function(compDetails){var _this=this;this.compPromise=compDetails.newAgStackInstance(),this.compPromise.then(function(comp){return _this.afterCompCreated(comp)})},HeaderFilterCellComp2.prototype.afterCompCreated=function(comp){var _this=this;comp&&(this.addDestroyFunc(function(){return _this.context.destroyBean(comp)}),this.isAlive()&&(this.eFloatingFilterBody.appendChild(comp.getGui()),comp.afterGuiAttached&&comp.afterGuiAttached()))},HeaderFilterCellComp2.TEMPLATE='<div class="ag-header-cell ag-floating-filter" role="gridcell" tabindex="-1">\n            <div ref="eFloatingFilterBody" role="presentation"></div>\n            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">\n                <button type="button" aria-label="Open Filter Menu" class="ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>\n            </div>\n        </div>',__decorate$1S([RefSelector("eFloatingFilterBody")],HeaderFilterCellComp2.prototype,"eFloatingFilterBody",void 0),__decorate$1S([RefSelector("eButtonWrapper")],HeaderFilterCellComp2.prototype,"eButtonWrapper",void 0),__decorate$1S([RefSelector("eButtonShowMainFilter")],HeaderFilterCellComp2.prototype,"eButtonShowMainFilter",void 0),__decorate$1S([PostConstruct],HeaderFilterCellComp2.prototype,"postConstruct",null),HeaderFilterCellComp2}(AbstractHeaderCellComp),__extends$22=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();(LayoutCssClasses2=LayoutCssClasses||(LayoutCssClasses={})).AUTO_HEIGHT="ag-layout-auto-height",LayoutCssClasses2.NORMAL="ag-layout-normal",LayoutCssClasses2.PRINT="ag-layout-print";var RowAnimationCssClasses,RowAnimationCssClasses2,LayoutFeature=function(_super){function LayoutFeature2(view){var _this=_super.call(this)||this;return _this.view=view,_this}return __extends$22(LayoutFeature2,_super),__name(LayoutFeature2,"LayoutFeature"),LayoutFeature2.prototype.postConstruct=function(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()},LayoutFeature2.prototype.updateLayoutClasses=function(){var domLayout=this.getDomLayout(),params={autoHeight:"autoHeight"===domLayout,normal:"normal"===domLayout,print:"print"===domLayout},cssClass=params.autoHeight?LayoutCssClasses.AUTO_HEIGHT:params.print?LayoutCssClasses.PRINT:LayoutCssClasses.NORMAL;this.view.updateLayoutClasses(cssClass,params)},LayoutFeature2.prototype.getDomLayout=function(){var _a,domLayout=null!==(_a=this.gridOptionsService.get("domLayout"))&&void 0!==_a?_a:"normal";return-1===["normal","print","autoHeight"].indexOf(domLayout)?(doOnce(function(){return console.warn("AG Grid: "+domLayout+" is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.")},"warn about dom layout values"),"normal"):domLayout},function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PostConstruct],LayoutFeature2.prototype,"postConstruct",null),LayoutFeature2}(BeanStub),__extends$21=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$9=function(){return __assign$9=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$9.apply(this,arguments)},__decorate$1Q=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GridBodyScrollFeature=function(_super){function GridBodyScrollFeature2(eBodyViewport){var _this=_super.call(this)||this;return _this.scrollLeft=-1,_this.nextScrollTop=-1,_this.scrollTop=-1,_this.eBodyViewport=eBodyViewport,_this.resetLastHScrollDebounced=debounce(function(){return _this.eLastHScroll=null},500),_this.resetLastVScrollDebounced=debounce(function(){return _this.eLastVScroll=null},500),_this}return __extends$21(GridBodyScrollFeature2,_super),__name(GridBodyScrollFeature2,"GridBodyScrollFeature"),GridBodyScrollFeature2.prototype.postConstruct=function(){var _this=this;this.enableRtl=this.gridOptionsService.is("enableRtl"),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(function(p){_this.centerRowContainerCtrl=p.centerRowContainerCtrl,_this.onDisplayedColumnsWidthChanged(),_this.addScrollListener()})},GridBodyScrollFeature2.prototype.addScrollListener=function(){var fakeHScroll=this.ctrlsService.getFakeHScrollComp(),fakeVScroll=this.ctrlsService.getFakeVScrollComp();this.addManagedListener(this.centerRowContainerCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),this.addManagedListener(fakeHScroll.getViewport(),"scroll",this.onFakeHScroll.bind(this));var isDebounce=this.gridOptionsService.is("debounceVerticalScrollbar"),onVScroll=isDebounce?debounce(this.onVScroll.bind(this),100):this.onVScroll.bind(this),onFakeVScroll=isDebounce?debounce(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",onVScroll),this.addManagedListener(fakeVScroll.getViewport(),"scroll",onFakeVScroll)},GridBodyScrollFeature2.prototype.onDisplayedColumnsWidthChanged=function(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()},GridBodyScrollFeature2.prototype.horizontallyScrollHeaderCenterAndFloatingCenter=function(scrollLeft){if(!(null==this.centerRowContainerCtrl)){void 0===scrollLeft&&(scrollLeft=this.centerRowContainerCtrl.getCenterViewportScrollLeft());var offset=this.enableRtl?scrollLeft:-scrollLeft,topCenterContainer=this.ctrlsService.getTopCenterRowContainerCtrl(),stickyTopCenterContainer=this.ctrlsService.getStickyTopCenterRowContainerCtrl(),bottomCenterContainer=this.ctrlsService.getBottomCenterRowContainerCtrl(),fakeHScroll=this.ctrlsService.getFakeHScrollComp();this.ctrlsService.getHeaderRowContainerCtrl().setHorizontalScroll(offset),bottomCenterContainer.setContainerTranslateX(offset),topCenterContainer.setContainerTranslateX(offset),stickyTopCenterContainer.setContainerTranslateX(offset);var centerViewport=this.centerRowContainerCtrl.getViewportElement();setScrollLeft(this.eLastHScroll===centerViewport?fakeHScroll.getViewport():this.centerRowContainerCtrl.getViewportElement(),Math.abs(scrollLeft),this.enableRtl)}},GridBodyScrollFeature2.prototype.isControllingHScroll=function(eDiv){return this.eLastHScroll?eDiv===this.eLastHScroll:(this.eLastHScroll=eDiv,!0)},GridBodyScrollFeature2.prototype.isControllingVScroll=function(eDiv){return this.eLastVScroll?eDiv===this.eLastVScroll:(this.eLastVScroll=eDiv,!0)},GridBodyScrollFeature2.prototype.onFakeHScroll=function(){var fakeHScrollViewport=this.ctrlsService.getFakeHScrollComp().getViewport();this.isControllingHScroll(fakeHScrollViewport)&&this.onHScrollCommon(fakeHScrollViewport)},GridBodyScrollFeature2.prototype.onHScroll=function(){var centerContainerViewport=this.centerRowContainerCtrl.getViewportElement();this.isControllingHScroll(centerContainerViewport)&&this.onHScrollCommon(centerContainerViewport)},GridBodyScrollFeature2.prototype.onHScrollCommon=function(eSource){var scrollLeft=this.centerRowContainerCtrl.getViewportElement().scrollLeft;this.shouldBlockScrollUpdate("horizontal",scrollLeft,!0)||(this.doHorizontalScroll(Math.round(getScrollLeft(eSource,this.enableRtl))),this.resetLastHScrollDebounced())},GridBodyScrollFeature2.prototype.onFakeVScroll=function(){var fakeVScrollViewport=this.ctrlsService.getFakeVScrollComp().getViewport();this.isControllingVScroll(fakeVScrollViewport)&&this.onVScrollCommon(fakeVScrollViewport)},GridBodyScrollFeature2.prototype.onVScroll=function(){this.isControllingVScroll(this.eBodyViewport)&&this.onVScrollCommon(this.eBodyViewport)},GridBodyScrollFeature2.prototype.onVScrollCommon=function(eSource){var scrollTop=eSource.scrollTop;if(!this.shouldBlockScrollUpdate("vertical",scrollTop,!0)){if(this.animationFrameService.setScrollTop(scrollTop),this.nextScrollTop=scrollTop,eSource===this.eBodyViewport)this.ctrlsService.getFakeVScrollComp().getViewport().scrollTop=scrollTop;else this.eBodyViewport.scrollTop=scrollTop;this.gridOptionsService.is("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced()}},GridBodyScrollFeature2.prototype.doHorizontalScroll=function(scrollLeft){var fakeScrollLeft=getScrollLeft(this.ctrlsService.getFakeHScrollComp().getViewport(),this.enableRtl);this.scrollLeft===scrollLeft&&scrollLeft===fakeScrollLeft||(this.scrollLeft=scrollLeft,this.fireScrollEvent("horizontal"),this.horizontallyScrollHeaderCenterAndFloatingCenter(scrollLeft),this.onHorizontalViewportChanged())},GridBodyScrollFeature2.prototype.fireScrollEvent=function(direction){var _this=this,bodyScrollEvent={type:Events.EVENT_BODY_SCROLL,direction,left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(bodyScrollEvent),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(function(){var bodyScrollEndEvent=__assign$9(__assign$9({},bodyScrollEvent),{type:Events.EVENT_BODY_SCROLL_END});_this.eventService.dispatchEvent(bodyScrollEndEvent)},100)},GridBodyScrollFeature2.prototype.shouldBlockScrollUpdate=function(direction,scrollTo,touchOnly){if(void 0===touchOnly&&(touchOnly=!1),touchOnly&&!isIOSUserAgent())return!1;if("vertical"===direction){var clientHeight=getInnerHeight(this.eBodyViewport),scrollHeight=this.eBodyViewport.scrollHeight;if(scrollTo<0||scrollTo+clientHeight>scrollHeight)return!0}if("horizontal"===direction){var clientWidth=this.centerRowContainerCtrl.getCenterWidth(),scrollWidth=this.centerRowContainerCtrl.getViewportElement().scrollWidth;if(this.enableRtl&&isRtlNegativeScroll()){if(scrollTo>0)return!0}else if(scrollTo<0)return!0;if(Math.abs(scrollTo)+clientWidth>scrollWidth)return!0}return!1},GridBodyScrollFeature2.prototype.redrawRowsAfterScroll=function(){this.fireScrollEvent("vertical")},GridBodyScrollFeature2.prototype.onHorizontalViewportChanged=function(){this.centerRowContainerCtrl.onHorizontalViewportChanged()},GridBodyScrollFeature2.prototype.checkScrollLeft=function(){this.scrollLeft!==this.centerRowContainerCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(this.centerRowContainerCtrl.getViewportElement())},GridBodyScrollFeature2.prototype.scrollGridIfNeeded=function(){var frameNeeded=this.scrollTop!=this.nextScrollTop;return frameNeeded&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),frameNeeded},GridBodyScrollFeature2.prototype.setHorizontalScrollPosition=function(hScrollPosition){var maxScrollLeft=this.centerRowContainerCtrl.getViewportElement().scrollWidth-this.centerRowContainerCtrl.getCenterWidth();this.shouldBlockScrollUpdate("horizontal",hScrollPosition)&&(hScrollPosition=this.enableRtl&&isRtlNegativeScroll()?hScrollPosition>0?0:maxScrollLeft:Math.min(Math.max(hScrollPosition,0),maxScrollLeft)),setScrollLeft(this.centerRowContainerCtrl.getViewportElement(),Math.abs(hScrollPosition),this.enableRtl),this.doHorizontalScroll(hScrollPosition)},GridBodyScrollFeature2.prototype.setVerticalScrollPosition=function(vScrollPosition){this.eBodyViewport.scrollTop=vScrollPosition},GridBodyScrollFeature2.prototype.getVScrollPosition=function(){return{top:this.eBodyViewport.scrollTop,bottom:this.eBodyViewport.scrollTop+this.eBodyViewport.offsetHeight}},GridBodyScrollFeature2.prototype.getHScrollPosition=function(){return this.centerRowContainerCtrl.getHScrollPosition()},GridBodyScrollFeature2.prototype.isHorizontalScrollShowing=function(){return this.centerRowContainerCtrl.isHorizontalScrollShowing()},GridBodyScrollFeature2.prototype.scrollHorizontally=function(pixels){var oldScrollPosition=this.centerRowContainerCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(oldScrollPosition+pixels),this.centerRowContainerCtrl.getViewportElement().scrollLeft-oldScrollPosition},GridBodyScrollFeature2.prototype.scrollToTop=function(){this.eBodyViewport.scrollTop=0},GridBodyScrollFeature2.prototype.ensureNodeVisible=function(comparator,position){void 0===position&&(position=null);for(var rowCount=this.rowModel.getRowCount(),indexToSelect=-1,i=0;i<rowCount;i++){var node=this.rowModel.getRow(i);if("function"==typeof comparator){if(node&&comparator(node)){indexToSelect=i;break}}else if(comparator===node||comparator===node.data){indexToSelect=i;break}}indexToSelect>=0&&this.ensureIndexVisible(indexToSelect,position)},GridBodyScrollFeature2.prototype.ensureIndexVisible=function(index,position){if(!this.gridOptionsService.isDomLayout("print")){var rowCount=this.paginationProxy.getRowCount();if("number"!=typeof index||index<0||index>=rowCount)return void console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+index);this.gridOptionsService.is("pagination")&&!this.gridOptionsService.is("suppressPaginationPanel")||this.paginationProxy.goToPageWithIndex(index);var rowGotShiftedDuringOperation,stickyTopHeight=this.ctrlsService.getGridBodyCtrl().getStickyTopHeight(),rowNode=this.paginationProxy.getRow(index);do{var startingRowTop=rowNode.rowTop,startingRowHeight=rowNode.rowHeight,paginationOffset=this.paginationProxy.getPixelOffset(),rowTopPixel=rowNode.rowTop-paginationOffset,rowBottomPixel=rowTopPixel+rowNode.rowHeight,scrollPosition=this.getVScrollPosition(),heightOffset=this.heightScaler.getDivStretchOffset(),vScrollTop=scrollPosition.top+heightOffset,vScrollBottom=scrollPosition.bottom+heightOffset,viewportHeight=vScrollBottom-vScrollTop,pxTop=this.heightScaler.getScrollPositionForPixel(rowTopPixel),pxBottom=this.heightScaler.getScrollPositionForPixel(rowBottomPixel-viewportHeight),pxMiddle=Math.min((pxTop+pxBottom)/2,rowTopPixel),newScrollPosition=null;"top"===position?newScrollPosition=pxTop:"bottom"===position?newScrollPosition=pxBottom:"middle"===position?newScrollPosition=pxMiddle:vScrollTop+stickyTopHeight>rowTopPixel?newScrollPosition=pxTop-stickyTopHeight:vScrollBottom<rowBottomPixel&&(newScrollPosition=pxBottom),null!==newScrollPosition&&(this.eBodyViewport.scrollTop=newScrollPosition,this.rowRenderer.redrawAfterScroll()),rowGotShiftedDuringOperation=startingRowTop!==rowNode.rowTop||startingRowHeight!==rowNode.rowHeight}while(rowGotShiftedDuringOperation);this.animationFrameService.flushAllFrames()}},GridBodyScrollFeature2.prototype.ensureColumnVisible=function(key,position){void 0===position&&(position="auto");var column=this.columnModel.getGridColumn(key);if(column&&!column.isPinned()&&this.columnModel.isColumnDisplayed(column)){var newHorizontalScroll=this.getPositionedHorizontalScroll(column,position);null!==newHorizontalScroll&&this.centerRowContainerCtrl.setCenterViewportScrollLeft(newHorizontalScroll),this.centerRowContainerCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()}},GridBodyScrollFeature2.prototype.getPositionedHorizontalScroll=function(column,position){var _a=this.isColumnOutsideViewport(column),columnBeforeStart=_a.columnBeforeStart,columnAfterEnd=_a.columnAfterEnd,viewportTooSmallForColumn=this.centerRowContainerCtrl.getCenterWidth()<column.getActualWidth(),viewportWidth=this.centerRowContainerCtrl.getCenterWidth(),isRtl=this.enableRtl,alignColToStart=(isRtl?columnBeforeStart:columnAfterEnd)||viewportTooSmallForColumn,alignColToEnd=isRtl?columnAfterEnd:columnBeforeStart;"auto"!==position&&(alignColToStart="start"===position,alignColToEnd="end"===position);var isMiddle="middle"===position;if(alignColToStart||alignColToEnd||isMiddle){var _b=this.getColumnBounds(column),colLeft=_b.colLeft,colMiddle=_b.colMiddle,colRight=_b.colRight;return isMiddle?colMiddle-viewportWidth/2:alignColToStart?isRtl?colRight:colLeft:isRtl?colLeft-viewportWidth:colRight-viewportWidth}return null},GridBodyScrollFeature2.prototype.isColumnOutsideViewport=function(column){var _a=this.getViewportBounds(),viewportStart=_a.start,viewportEnd=_a.end,_b=this.getColumnBounds(column),colLeft=_b.colLeft,colRight=_b.colRight,isRtl=this.enableRtl;return{columnBeforeStart:isRtl?viewportStart>colRight:viewportEnd<colRight,columnAfterEnd:isRtl?viewportEnd<colLeft:viewportStart>colLeft}},GridBodyScrollFeature2.prototype.getColumnBounds=function(column){var isRtl=this.enableRtl,bodyWidth=this.columnModel.getBodyContainerWidth(),colWidth=column.getActualWidth(),colLeft=column.getLeft(),multiplier=isRtl?-1:1,colLeftPixel=isRtl?bodyWidth-colLeft:colLeft;return{colLeft:colLeftPixel,colMiddle:colLeftPixel+colWidth/2*multiplier,colRight:colLeftPixel+colWidth*multiplier}},GridBodyScrollFeature2.prototype.getViewportBounds=function(){var viewportWidth=this.centerRowContainerCtrl.getCenterWidth(),scrollPosition=this.centerRowContainerCtrl.getCenterViewportScrollLeft();return{start:scrollPosition,end:viewportWidth+scrollPosition,width:viewportWidth}},__decorate$1Q([Autowired("ctrlsService")],GridBodyScrollFeature2.prototype,"ctrlsService",void 0),__decorate$1Q([Autowired("animationFrameService")],GridBodyScrollFeature2.prototype,"animationFrameService",void 0),__decorate$1Q([Autowired("paginationProxy")],GridBodyScrollFeature2.prototype,"paginationProxy",void 0),__decorate$1Q([Autowired("rowModel")],GridBodyScrollFeature2.prototype,"rowModel",void 0),__decorate$1Q([Autowired("rowContainerHeightService")],GridBodyScrollFeature2.prototype,"heightScaler",void 0),__decorate$1Q([Autowired("rowRenderer")],GridBodyScrollFeature2.prototype,"rowRenderer",void 0),__decorate$1Q([Autowired("columnModel")],GridBodyScrollFeature2.prototype,"columnModel",void 0),__decorate$1Q([PostConstruct],GridBodyScrollFeature2.prototype,"postConstruct",null),GridBodyScrollFeature2}(BeanStub),AutoScrollService=function(){function AutoScrollService2(params){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=params.scrollContainer,this.scrollHorizontally=-1!==params.scrollAxis.indexOf("x"),this.scrollVertically=-1!==params.scrollAxis.indexOf("y"),this.scrollByTick=null!=params.scrollByTick?params.scrollByTick:20,params.onScrollCallback&&(this.onScrollCallback=params.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=params.getVerticalPosition,this.setVerticalPosition=params.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=params.getHorizontalPosition,this.setHorizontalPosition=params.setHorizontalPosition),this.shouldSkipVerticalScroll=params.shouldSkipVerticalScroll||function(){return!1},this.shouldSkipHorizontalScroll=params.shouldSkipHorizontalScroll||function(){return!1}}return __name(AutoScrollService2,"AutoScrollService"),AutoScrollService2.prototype.check=function(mouseEvent,forceSkipVerticalScroll){void 0===forceSkipVerticalScroll&&(forceSkipVerticalScroll=!1);var skipVerticalScroll=forceSkipVerticalScroll||this.shouldSkipVerticalScroll();if(!skipVerticalScroll||!this.shouldSkipHorizontalScroll()){var rect=this.scrollContainer.getBoundingClientRect(),scrollTick=this.scrollByTick;this.tickLeft=mouseEvent.clientX<rect.left+scrollTick,this.tickRight=mouseEvent.clientX>rect.right-scrollTick,this.tickUp=mouseEvent.clientY<rect.top+scrollTick&&!skipVerticalScroll,this.tickDown=mouseEvent.clientY>rect.bottom-scrollTick&&!skipVerticalScroll,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}},AutoScrollService2.prototype.ensureTickingStarted=function(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)},AutoScrollService2.prototype.doTick=function(){var tickAmount;if(this.tickCount++,tickAmount=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){var vScrollPosition=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(vScrollPosition-tickAmount),this.tickDown&&this.setVerticalPosition(vScrollPosition+tickAmount)}if(this.scrollHorizontally){var hScrollPosition=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(hScrollPosition-tickAmount),this.tickRight&&this.setHorizontalPosition(hScrollPosition+tickAmount)}this.onScrollCallback&&this.onScrollCallback()},AutoScrollService2.prototype.ensureCleared=function(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)},AutoScrollService2}(),__extends$20=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$8=function(){return __assign$8=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$8.apply(this,arguments)},__decorate$1P=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$k=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},RowDragFeature=function(_super){function RowDragFeature2(eContainer){var _this=_super.call(this)||this;return _this.isMultiRowDrag=!1,_this.isGridSorted=!1,_this.isGridFiltered=!1,_this.isRowGroupActive=!1,_this.eContainer=eContainer,_this}return __extends$20(RowDragFeature2,_super),__name(RowDragFeature2,"RowDragFeature"),RowDragFeature2.prototype.postConstruct=function(){var _this=this;this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel);var refreshStatus=__name(function(){_this.onSortChanged(),_this.onFilterChanged(),_this.onRowGroupChanged()},"refreshStatus");this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,function(){refreshStatus()}),refreshStatus(),this.ctrlsService.whenReady(function(){var gridBodyCon=_this.ctrlsService.getGridBodyCtrl();_this.autoScrollService=new AutoScrollService({scrollContainer:gridBodyCon.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:function(){return gridBodyCon.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(position){return gridBodyCon.getScrollFeature().setVerticalScrollPosition(position)},onScrollCallback:function(){_this.onDragging(_this.lastDraggingEvent)}})})},RowDragFeature2.prototype.onSortChanged=function(){this.isGridSorted=this.sortController.isSortActive()},RowDragFeature2.prototype.onFilterChanged=function(){this.isGridFiltered=this.filterManager.isAnyFilterPresent()},RowDragFeature2.prototype.onRowGroupChanged=function(){var rowGroups=this.columnModel.getRowGroupColumns();this.isRowGroupActive=!missingOrEmpty(rowGroups)},RowDragFeature2.prototype.getContainer=function(){return this.eContainer},RowDragFeature2.prototype.isInterestedIn=function(type){return type===DragSourceType.RowDrag},RowDragFeature2.prototype.getIconName=function(){return this.gridOptionsService.is("rowDragManaged")&&this.shouldPreventRowMove()?DragAndDropService.ICON_NOT_ALLOWED:DragAndDropService.ICON_MOVE},RowDragFeature2.prototype.shouldPreventRowMove=function(){return this.isGridSorted||this.isGridFiltered||this.isRowGroupActive},RowDragFeature2.prototype.getRowNodes=function(draggingEvent){var _this=this;if(!this.isFromThisGrid(draggingEvent))return draggingEvent.dragItem.rowNodes||[];var isRowDragMultiRow=this.gridOptionsService.is("rowDragMultiRow"),selectedNodes=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$k(arguments[i]));return ar}(this.selectionService.getSelectedNodes()).sort(function(a,b){return null==a.rowIndex||null==b.rowIndex?0:_this.getRowIndexNumber(a)-_this.getRowIndexNumber(b)}),currentNode=draggingEvent.dragItem.rowNode;return isRowDragMultiRow&&-1!==selectedNodes.indexOf(currentNode)?(this.isMultiRowDrag=!0,selectedNodes):(this.isMultiRowDrag=!1,[currentNode])},RowDragFeature2.prototype.onDragEnter=function(draggingEvent){draggingEvent.dragItem.rowNodes=this.getRowNodes(draggingEvent),this.dispatchGridEvent(Events.EVENT_ROW_DRAG_ENTER,draggingEvent),this.getRowNodes(draggingEvent).forEach(function(rowNode){rowNode.setDragging(!0)}),this.onEnterOrDragging(draggingEvent)},RowDragFeature2.prototype.onDragging=function(draggingEvent){this.onEnterOrDragging(draggingEvent)},RowDragFeature2.prototype.isFromThisGrid=function(draggingEvent){return draggingEvent.dragSource.dragSourceDomDataKey===this.gridOptionsService.getDomDataKey()},RowDragFeature2.prototype.isDropZoneWithinThisGrid=function(draggingEvent){var gridGui=this.ctrlsService.getGridBodyCtrl().getGui(),dropZoneTarget=draggingEvent.dropZoneTarget;return!gridGui.contains(dropZoneTarget)},RowDragFeature2.prototype.onEnterOrDragging=function(draggingEvent){this.dispatchGridEvent(Events.EVENT_ROW_DRAG_MOVE,draggingEvent),this.lastDraggingEvent=draggingEvent;var pixel=this.mouseEventService.getNormalisedPosition(draggingEvent).y;this.gridOptionsService.is("rowDragManaged")&&this.doManagedDrag(draggingEvent,pixel),this.autoScrollService.check(draggingEvent.event)},RowDragFeature2.prototype.doManagedDrag=function(draggingEvent,pixel){var isFromThisGrid=this.isFromThisGrid(draggingEvent),managedDrag=this.gridOptionsService.is("rowDragManaged"),rowNodes=draggingEvent.dragItem.rowNodes;managedDrag&&this.shouldPreventRowMove()||(this.gridOptionsService.is("suppressMoveWhenRowDragging")||!isFromThisGrid?this.isDropZoneWithinThisGrid(draggingEvent)||this.clientSideRowModel.highlightRowAtPixel(rowNodes[0],pixel):this.moveRows(rowNodes,pixel))},RowDragFeature2.prototype.getRowIndexNumber=function(rowNode){return parseInt(last(rowNode.getRowIndexString().split("-")),10)},RowDragFeature2.prototype.moveRowAndClearHighlight=function(draggingEvent){var _this=this,lastHighlightedRowNode=this.clientSideRowModel.getLastHighlightedRowNode(),isBelow=lastHighlightedRowNode&&lastHighlightedRowNode.highlighted===RowHighlightPosition.Below,pixel=this.mouseEventService.getNormalisedPosition(draggingEvent).y,rowNodes=draggingEvent.dragItem.rowNodes,increment=isBelow?1:0;if(this.isFromThisGrid(draggingEvent))rowNodes.forEach(function(rowNode){rowNode.rowTop<pixel&&(increment-=1)}),this.moveRows(rowNodes,pixel,increment);else{var getRowIdFunc_1=this.gridOptionsService.getRowIdFunc(),addIndex=this.clientSideRowModel.getRowIndexAtPixel(pixel)+1;this.clientSideRowModel.getHighlightPosition(pixel)===RowHighlightPosition.Above&&addIndex--,this.clientSideRowModel.updateRowData({add:rowNodes.map(function(node){return node.data}).filter(function(data){return!_this.clientSideRowModel.getRowNode(getRowIdFunc_1?getRowIdFunc_1({data,level:0}):data.id)}),addIndex})}this.clearRowHighlight()},RowDragFeature2.prototype.clearRowHighlight=function(){this.clientSideRowModel.highlightRowAtPixel(null)},RowDragFeature2.prototype.moveRows=function(rowNodes,pixel,increment){void 0===increment&&(increment=0),this.clientSideRowModel.ensureRowsAtPixel(rowNodes,pixel,increment)&&(this.focusService.clearFocusedCell(),this.rangeService&&this.rangeService.removeAllCellRanges())},RowDragFeature2.prototype.addRowDropZone=function(params){var _this=this;if(params.getContainer())if(this.dragAndDropService.findExternalZone(params))console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");else{var processedParams={getContainer:params.getContainer};params.fromGrid?(params.fromGrid=void 0,processedParams=params):(params.onDragEnter&&(processedParams.onDragEnter=function(e){params.onDragEnter(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_ENTER,e))}),params.onDragLeave&&(processedParams.onDragLeave=function(e){params.onDragLeave(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_LEAVE,e))}),params.onDragging&&(processedParams.onDragging=function(e){params.onDragging(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_MOVE,e))}),params.onDragStop&&(processedParams.onDragStop=function(e){params.onDragStop(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_END,e))})),this.dragAndDropService.addDropTarget(__assign$8({isInterestedIn:function(type){return type===DragSourceType.RowDrag},getIconName:function(){return DragAndDropService.ICON_MOVE},external:!0},processedParams))}else doOnce(function(){return console.warn("AG Grid: addRowDropZone - A container target needs to be provided")},"add-drop-zone-empty-target")},RowDragFeature2.prototype.getRowDropZone=function(events){var _this=this,getContainer=this.getContainer.bind(this),onDragEnter=this.onDragEnter.bind(this),onDragLeave=this.onDragLeave.bind(this),onDragging=this.onDragging.bind(this),onDragStop=this.onDragStop.bind(this);return events?{getContainer,onDragEnter:events.onDragEnter?function(e){onDragEnter(e),events.onDragEnter(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_ENTER,e))}:onDragEnter,onDragLeave:events.onDragLeave?function(e){onDragLeave(e),events.onDragLeave(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_LEAVE,e))}:onDragLeave,onDragging:events.onDragging?function(e){onDragging(e),events.onDragging(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_MOVE,e))}:onDragging,onDragStop:events.onDragStop?function(e){onDragStop(e),events.onDragStop(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_END,e))}:onDragStop,fromGrid:!0}:{getContainer,onDragEnter,onDragLeave,onDragging,onDragStop,fromGrid:!0}},RowDragFeature2.prototype.draggingToRowDragEvent=function(type,draggingEvent){var overNode,vDirectionString,yNormalised=this.mouseEventService.getNormalisedPosition(draggingEvent).y,overIndex=-1;switch(yNormalised>this.paginationProxy.getCurrentPageHeight()||(overIndex=this.rowModel.getRowIndexAtPixel(yNormalised),overNode=this.rowModel.getRow(overIndex)),draggingEvent.vDirection){case VerticalDirection.Down:vDirectionString="down";break;case VerticalDirection.Up:vDirectionString="up";break;default:vDirectionString=null}return{type,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,event:draggingEvent.event,node:draggingEvent.dragItem.rowNode,nodes:draggingEvent.dragItem.rowNodes,overIndex,overNode,y:yNormalised,vDirection:vDirectionString}},RowDragFeature2.prototype.dispatchGridEvent=function(type,draggingEvent){var event=this.draggingToRowDragEvent(type,draggingEvent);this.eventService.dispatchEvent(event)},RowDragFeature2.prototype.onDragLeave=function(draggingEvent){this.dispatchGridEvent(Events.EVENT_ROW_DRAG_LEAVE,draggingEvent),this.stopDragging(draggingEvent),this.gridOptionsService.is("rowDragManaged")&&this.clearRowHighlight(),this.isFromThisGrid(draggingEvent)&&(this.isMultiRowDrag=!1)},RowDragFeature2.prototype.onDragStop=function(draggingEvent){this.dispatchGridEvent(Events.EVENT_ROW_DRAG_END,draggingEvent),this.stopDragging(draggingEvent),this.gridOptionsService.is("rowDragManaged")&&(this.gridOptionsService.is("suppressMoveWhenRowDragging")||!this.isFromThisGrid(draggingEvent))&&!this.isDropZoneWithinThisGrid(draggingEvent)&&this.moveRowAndClearHighlight(draggingEvent)},RowDragFeature2.prototype.stopDragging=function(draggingEvent){this.autoScrollService.ensureCleared(),this.getRowNodes(draggingEvent).forEach(function(rowNode){rowNode.setDragging(!1)})},__decorate$1P([Autowired("dragAndDropService")],RowDragFeature2.prototype,"dragAndDropService",void 0),__decorate$1P([Autowired("rowModel")],RowDragFeature2.prototype,"rowModel",void 0),__decorate$1P([Autowired("paginationProxy")],RowDragFeature2.prototype,"paginationProxy",void 0),__decorate$1P([Autowired("columnModel")],RowDragFeature2.prototype,"columnModel",void 0),__decorate$1P([Autowired("focusService")],RowDragFeature2.prototype,"focusService",void 0),__decorate$1P([Autowired("sortController")],RowDragFeature2.prototype,"sortController",void 0),__decorate$1P([Autowired("filterManager")],RowDragFeature2.prototype,"filterManager",void 0),__decorate$1P([Autowired("selectionService")],RowDragFeature2.prototype,"selectionService",void 0),__decorate$1P([Autowired("mouseEventService")],RowDragFeature2.prototype,"mouseEventService",void 0),__decorate$1P([Autowired("ctrlsService")],RowDragFeature2.prototype,"ctrlsService",void 0),__decorate$1P([Optional("rangeService")],RowDragFeature2.prototype,"rangeService",void 0),__decorate$1P([PostConstruct],RowDragFeature2.prototype,"postConstruct",null),RowDragFeature2}(BeanStub),__extends$1$=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1O=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};(RowAnimationCssClasses2=RowAnimationCssClasses||(RowAnimationCssClasses={})).ANIMATION_ON="ag-row-animation",RowAnimationCssClasses2.ANIMATION_OFF="ag-row-no-animation";var SelectionHandleType,SelectionHandleType2,CellRangeType,CellRangeType2,GridBodyCtrl=function(_super){function GridBodyCtrl2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.stickyTopHeight=0,_this}return __extends$1$(GridBodyCtrl2,_super),__name(GridBodyCtrl2,"GridBodyCtrl"),GridBodyCtrl2.prototype.getScrollFeature=function(){return this.bodyScrollFeature},GridBodyCtrl2.prototype.getBodyViewportElement=function(){return this.eBodyViewport},GridBodyCtrl2.prototype.setComp=function(comp,eGridBody,eBodyViewport,eTop,eBottom,eStickyTop){this.comp=comp,this.eGridBody=eGridBody,this.eBodyViewport=eBodyViewport,this.eTop=eTop,this.eBottom=eBottom,this.eStickyTop=eStickyTop,this.setCellTextSelection(this.gridOptionsService.is("enableCellTextSelection")),this.createManagedBean(new LayoutFeature(this.comp)),this.bodyScrollFeature=this.createManagedBean(new GridBodyScrollFeature(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([eTop,eBodyViewport,eBottom,eStickyTop]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.ctrlsService.registerGridBodyCtrl(this)},GridBodyCtrl2.prototype.getComp=function(){return this.comp},GridBodyCtrl2.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,Events.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))},GridBodyCtrl2.prototype.addFocusListeners=function(elements){var _this=this;elements.forEach(function(element){_this.addManagedListener(element,"focusin",function(e){var isFocusedElementNested=isElementChildOfClass(e.target,"ag-root",element);element.classList.toggle("ag-has-focus",!isFocusedElementNested)}),_this.addManagedListener(element,"focusout",function(e){var target=e.target,relatedTarget=e.relatedTarget,gridContainRelatedTarget=element.contains(relatedTarget),isNestedRelatedTarget=isElementChildOfClass(relatedTarget,"ag-root",element);isElementChildOfClass(target,"ag-root",element)||(!gridContainRelatedTarget||isNestedRelatedTarget)&&element.classList.remove("ag-has-focus")})})},GridBodyCtrl2.prototype.setColumnMovingCss=function(moving){this.comp.setColumnMovingCss(moving?"ag-column-moving":null,moving)},GridBodyCtrl2.prototype.setCellTextSelection=function(selectable){void 0===selectable&&(selectable=!1);var cssClass=selectable?"ag-selectable":null;this.comp.setCellSelectableCss(cssClass,selectable)},GridBodyCtrl2.prototype.onScrollVisibilityChanged=function(){var visible=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(visible),this.setStickyTopWidth(visible);var width="calc(100% + "+((visible&&this.gridOptionsService.getScrollbarWidth()||0)+(isInvisibleScrollbar()?16:0))+"px)";this.comp.setBodyViewportWidth(width)},GridBodyCtrl2.prototype.onGridColumnsChanged=function(){var columns=this.columnModel.getAllGridColumns();this.comp.setColumnCount(columns?columns.length:0)},GridBodyCtrl2.prototype.disableBrowserDragging=function(){this.addManagedListener(this.eGridBody,"dragstart",function(event){if(event.target instanceof HTMLImageElement)return event.preventDefault(),!1})},GridBodyCtrl2.prototype.addStopEditingWhenGridLosesFocus=function(){var _this=this;if(this.gridOptionsService.is("stopEditingWhenCellsLoseFocus")){var focusOutListener=__name(function(event){var elementWithFocus=event.relatedTarget;if(null!==getTabIndex(elementWithFocus)){var clickInsideGrid=viewports.some(function(viewport){return viewport.contains(elementWithFocus)})&&_this.mouseEventService.isElementInThisGrid(elementWithFocus);if(!clickInsideGrid){var popupService=_this.popupService;clickInsideGrid=popupService.getActivePopups().some(function(popup){return popup.contains(elementWithFocus)})||popupService.isElementWithinCustomPopup(elementWithFocus)}clickInsideGrid||_this.rowRenderer.stopEditing()}else _this.rowRenderer.stopEditing()},"focusOutListener"),viewports=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop];viewports.forEach(function(viewport){return _this.addManagedListener(viewport,"focusout",focusOutListener)})}},GridBodyCtrl2.prototype.updateRowCount=function(){var headerCount=this.headerNavigationService.getHeaderRowCount(),rowCount=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,total=-1===rowCount?-1:headerCount+rowCount;this.comp.setRowCount(total)},GridBodyCtrl2.prototype.registerBodyViewportResizeListener=function(listener){this.comp.registerBodyViewportResizeListener(listener)},GridBodyCtrl2.prototype.setVerticalScrollPaddingVisible=function(visible){var overflowY=visible?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(overflowY)},GridBodyCtrl2.prototype.isVerticalScrollShowing=function(){var show=this.gridOptionsService.is("alwaysShowVerticalScroll"),cssClass=show?"ag-force-vertical-scroll":null,allowVerticalScroll=this.gridOptionsService.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(cssClass,show),show||allowVerticalScroll&&isVerticalScrollShowing(this.eBodyViewport)},GridBodyCtrl2.prototype.setupRowAnimationCssClass=function(){var _this=this,listener=__name(function(){var animateRows=_this.gridOptionsService.isAnimateRows()&&!_this.rowContainerHeightService.isStretching(),animateRowsCssClass=animateRows?RowAnimationCssClasses.ANIMATION_ON:RowAnimationCssClasses.ANIMATION_OFF;_this.comp.setRowAnimationCssOnBodyViewport(animateRowsCssClass,animateRows)},"listener");listener(),this.addManagedListener(this.eventService,Events.EVENT_HEIGHT_SCALE_CHANGED,listener),this.addManagedPropertyListener("animateRows",listener)},GridBodyCtrl2.prototype.getGridBodyElement=function(){return this.eGridBody},GridBodyCtrl2.prototype.addBodyViewportListener=function(){var _this=this,listener=__name(function(mouseEvent,touch,touchEvent){if(mouseEvent||touchEvent){if(_this.gridOptionsService.is("preventDefaultOnContextMenu"))(mouseEvent||touchEvent).preventDefault();var target=(mouseEvent||touch).target;(target===_this.eBodyViewport||target===_this.ctrlsService.getCenterRowContainerCtrl().getViewportElement())&&_this.contextMenuFactory&&(mouseEvent?_this.contextMenuFactory.onContextMenu(mouseEvent,null,null,null,null,_this.eGridBody):touchEvent&&_this.contextMenuFactory.onContextMenu(null,touchEvent,null,null,null,_this.eGridBody))}},"listener");this.addManagedListener(this.eBodyViewport,"contextmenu",listener),this.mockContextMenuForIPad(listener),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyTopWheel.bind(this))},GridBodyCtrl2.prototype.mockContextMenuForIPad=function(listener){if(isIOSUserAgent()){var touchListener=new TouchListener(this.eBodyViewport),longTapListener=__name(function(event){listener(void 0,event.touchStart,event.touchEvent)},"longTapListener");this.addManagedListener(touchListener,TouchListener.EVENT_LONG_TAP,longTapListener),this.addDestroyFunc(function(){return touchListener.destroy()})}},GridBodyCtrl2.prototype.onBodyViewportWheel=function(e){this.gridOptionsService.is("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()},GridBodyCtrl2.prototype.onStickyTopWheel=function(e){e.preventDefault(),e.offsetY&&this.scrollVertically(e.deltaY)},GridBodyCtrl2.prototype.getGui=function(){return this.eGridBody},GridBodyCtrl2.prototype.scrollVertically=function(pixels){var oldScrollPosition=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(oldScrollPosition+pixels),this.eBodyViewport.scrollTop-oldScrollPosition},GridBodyCtrl2.prototype.addRowDragListener=function(){this.rowDragFeature=this.createManagedBean(new RowDragFeature(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)},GridBodyCtrl2.prototype.getRowDragFeature=function(){return this.rowDragFeature},GridBodyCtrl2.prototype.onPinnedRowDataChanged=function(){this.setFloatingHeights()},GridBodyCtrl2.prototype.setFloatingHeights=function(){var pinnedRowModel=this.pinnedRowModel,floatingTopHeight=pinnedRowModel.getPinnedTopTotalHeight();floatingTopHeight&&(floatingTopHeight+=1);var floatingBottomHeight=pinnedRowModel.getPinnedBottomTotalHeight();floatingBottomHeight&&(floatingBottomHeight+=1),this.comp.setTopHeight(floatingTopHeight),this.comp.setBottomHeight(floatingBottomHeight),this.comp.setTopDisplay(floatingTopHeight?"inherit":"none"),this.comp.setBottomDisplay(floatingBottomHeight?"inherit":"none"),this.setStickyTopOffsetTop()},GridBodyCtrl2.prototype.setStickyTopHeight=function(height){void 0===height&&(height=0),this.comp.setStickyTopHeight(height+"px"),this.stickyTopHeight=height},GridBodyCtrl2.prototype.getStickyTopHeight=function(){return this.stickyTopHeight},GridBodyCtrl2.prototype.setStickyTopWidth=function(vScrollVisible){if(vScrollVisible){var scrollbarWidth=this.gridOptionsService.getScrollbarWidth();this.comp.setStickyTopWidth("calc(100% - "+scrollbarWidth+"px)")}else this.comp.setStickyTopWidth("100%")},GridBodyCtrl2.prototype.onHeaderHeightChanged=function(){this.setStickyTopOffsetTop()},GridBodyCtrl2.prototype.setStickyTopOffsetTop=function(){var headerHeight=this.ctrlsService.getGridHeaderCtrl().getHeaderHeight(),pinnedTopHeight=this.pinnedRowModel.getPinnedTopTotalHeight(),height=0;headerHeight>0&&(height+=headerHeight+1),pinnedTopHeight>0&&(height+=pinnedTopHeight+1),this.comp.setStickyTopTop(height+"px")},GridBodyCtrl2.prototype.sizeColumnsToFit=function(params,nextTimeout){var _this=this,scrollWidthToRemove=this.isVerticalScrollShowing()?this.gridOptionsService.getScrollbarWidth():0,availableWidth=getInnerWidth(this.eGridBody)-scrollWidthToRemove;availableWidth>0?this.columnModel.sizeColumnsToFit(availableWidth,"sizeColumnsToFit",!1,params):void 0===nextTimeout?window.setTimeout(function(){_this.sizeColumnsToFit(params,100)},0):100===nextTimeout?window.setTimeout(function(){_this.sizeColumnsToFit(params,500)},100):500===nextTimeout?window.setTimeout(function(){_this.sizeColumnsToFit(params,-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")},GridBodyCtrl2.prototype.addScrollEventListener=function(listener){this.eBodyViewport.addEventListener("scroll",listener,{passive:!0})},GridBodyCtrl2.prototype.removeScrollEventListener=function(listener){this.eBodyViewport.removeEventListener("scroll",listener)},__decorate$1O([Autowired("rowContainerHeightService")],GridBodyCtrl2.prototype,"rowContainerHeightService",void 0),__decorate$1O([Autowired("ctrlsService")],GridBodyCtrl2.prototype,"ctrlsService",void 0),__decorate$1O([Autowired("columnModel")],GridBodyCtrl2.prototype,"columnModel",void 0),__decorate$1O([Autowired("scrollVisibleService")],GridBodyCtrl2.prototype,"scrollVisibleService",void 0),__decorate$1O([Optional("contextMenuFactory")],GridBodyCtrl2.prototype,"contextMenuFactory",void 0),__decorate$1O([Autowired("headerNavigationService")],GridBodyCtrl2.prototype,"headerNavigationService",void 0),__decorate$1O([Autowired("dragAndDropService")],GridBodyCtrl2.prototype,"dragAndDropService",void 0),__decorate$1O([Autowired("pinnedRowModel")],GridBodyCtrl2.prototype,"pinnedRowModel",void 0),__decorate$1O([Autowired("rowRenderer")],GridBodyCtrl2.prototype,"rowRenderer",void 0),__decorate$1O([Autowired("popupService")],GridBodyCtrl2.prototype,"popupService",void 0),__decorate$1O([Autowired("mouseEventService")],GridBodyCtrl2.prototype,"mouseEventService",void 0),__decorate$1O([Autowired("rowModel")],GridBodyCtrl2.prototype,"rowModel",void 0),GridBodyCtrl2}(BeanStub);(SelectionHandleType2=SelectionHandleType||(SelectionHandleType={}))[SelectionHandleType2.FILL=0]="FILL",SelectionHandleType2[SelectionHandleType2.RANGE=1]="RANGE",(CellRangeType2=CellRangeType||(CellRangeType={}))[CellRangeType2.VALUE=0]="VALUE",CellRangeType2[CellRangeType2.DIMENSION=1]="DIMENSION";var RowType$1,RowType2,CellRangeFeature=function(){function CellRangeFeature2(beans,ctrl){this.beans=beans,this.cellCtrl=ctrl}return __name(CellRangeFeature2,"CellRangeFeature"),CellRangeFeature2.prototype.setComp=function(cellComp,eGui){this.cellComp=cellComp,this.eGui=eGui,this.onRangeSelectionChanged()},CellRangeFeature2.prototype.onRangeSelectionChanged=function(){this.cellComp&&(this.rangeCount=this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass("ag-cell-range-selected",0!==this.rangeCount),this.cellComp.addOrRemoveCssClass("ag-cell-range-selected-1",1===this.rangeCount),this.cellComp.addOrRemoveCssClass("ag-cell-range-selected-2",2===this.rangeCount),this.cellComp.addOrRemoveCssClass("ag-cell-range-selected-3",3===this.rangeCount),this.cellComp.addOrRemoveCssClass("ag-cell-range-selected-4",this.rangeCount>=4),this.cellComp.addOrRemoveCssClass("ag-cell-range-chart",this.hasChartRange),setAriaSelected(this.eGui,this.rangeCount>0||void 0),this.cellComp.addOrRemoveCssClass("ag-cell-range-single-cell",this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())},CellRangeFeature2.prototype.updateRangeBorders=function(){var rangeBorders=this.getRangeBorders(),isSingleCell=this.isSingleCell(),isTop=!isSingleCell&&rangeBorders.top,isRight=!isSingleCell&&rangeBorders.right,isBottom=!isSingleCell&&rangeBorders.bottom,isLeft=!isSingleCell&&rangeBorders.left;this.cellComp.addOrRemoveCssClass("ag-cell-range-top",isTop),this.cellComp.addOrRemoveCssClass("ag-cell-range-right",isRight),this.cellComp.addOrRemoveCssClass("ag-cell-range-bottom",isBottom),this.cellComp.addOrRemoveCssClass("ag-cell-range-left",isLeft)},CellRangeFeature2.prototype.isSingleCell=function(){var rangeService=this.beans.rangeService;return 1===this.rangeCount&&rangeService&&!rangeService.isMoreThanOneCell()},CellRangeFeature2.prototype.getHasChartRange=function(){var rangeService=this.beans.rangeService;if(!this.rangeCount||!rangeService)return!1;var cellRanges=rangeService.getCellRanges();return cellRanges.length>0&&cellRanges.every(function(range){return includes([CellRangeType.DIMENSION,CellRangeType.VALUE],range.type)})},CellRangeFeature2.prototype.updateRangeBordersIfRangeCount=function(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())},CellRangeFeature2.prototype.getRangeBorders=function(){var leftCol,rightCol,_this=this,isRtl=this.beans.gridOptionsService.is("enableRtl"),top=!1,right=!1,bottom=!1,left=!1,thisCol=this.cellCtrl.getCellPosition().column,_a=this.beans,rangeService=_a.rangeService,columnModel=_a.columnModel;isRtl?(leftCol=columnModel.getDisplayedColAfter(thisCol),rightCol=columnModel.getDisplayedColBefore(thisCol)):(leftCol=columnModel.getDisplayedColBefore(thisCol),rightCol=columnModel.getDisplayedColAfter(thisCol));var ranges=rangeService.getCellRanges().filter(function(range2){return rangeService.isCellInSpecificRange(_this.cellCtrl.getCellPosition(),range2)});leftCol||(left=!0),rightCol||(right=!0);for(var i=0;i<ranges.length&&!(top&&right&&bottom&&left);i++){var range=ranges[i],startRow=rangeService.getRangeStartRow(range),endRow=rangeService.getRangeEndRow(range);!top&&this.beans.rowPositionUtils.sameRow(startRow,this.cellCtrl.getCellPosition())&&(top=!0),!bottom&&this.beans.rowPositionUtils.sameRow(endRow,this.cellCtrl.getCellPosition())&&(bottom=!0),!left&&leftCol&&range.columns.indexOf(leftCol)<0&&(left=!0),!right&&rightCol&&range.columns.indexOf(rightCol)<0&&(right=!0)}return{top,right,bottom,left}},CellRangeFeature2.prototype.refreshHandle=function(){if(this.beans.rangeService){var shouldHaveSelectionHandle=this.shouldHaveSelectionHandle();this.selectionHandle&&!shouldHaveSelectionHandle&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),shouldHaveSelectionHandle&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass("ag-cell-range-handle",!!this.selectionHandle)}},CellRangeFeature2.prototype.shouldHaveSelectionHandle=function(){var _a=this.beans,gridOptionsService=_a.gridOptionsService,rangeService=_a.rangeService,cellRanges=rangeService.getCellRanges(),rangesLen=cellRanges.length;if(this.rangeCount<1||rangesLen<1)return!1;var cellRange=last(cellRanges),cellPosition=this.cellCtrl.getCellPosition(),isFillHandleAvailable=gridOptionsService.is("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),isRangeHandleAvailable=gridOptionsService.is("enableRangeHandle"),handleIsAvailable=1===rangesLen&&!this.cellCtrl.isEditing()&&(isFillHandleAvailable||isRangeHandleAvailable);if(this.hasChartRange){var isCategoryCell=cellRanges[0].type===CellRangeType.DIMENSION&&rangeService.isCellInSpecificRange(cellPosition,cellRanges[0]);this.cellComp.addOrRemoveCssClass("ag-cell-range-chart-category",isCategoryCell),handleIsAvailable=cellRange.type===CellRangeType.VALUE}return handleIsAvailable&&null!=cellRange.endRow&&rangeService.isContiguousRange(cellRange)&&rangeService.isBottomRightCell(cellRange,cellPosition)},CellRangeFeature2.prototype.addSelectionHandle=function(){var _a=this.beans,gridOptionsService=_a.gridOptionsService,cellRangeType=last(_a.rangeService.getCellRanges()).type,type=gridOptionsService.is("enableFillHandle")&&missing(cellRangeType)?SelectionHandleType.FILL:SelectionHandleType.RANGE;this.selectionHandle&&this.selectionHandle.getType()!==type&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.beans.selectionHandleFactory.createSelectionHandle(type)),this.selectionHandle.refresh(this.cellCtrl)},CellRangeFeature2.prototype.destroy=function(){this.beans.context.destroyBean(this.selectionHandle)},CellRangeFeature2}(),__extends$1_=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellPositionFeature=function(_super){function CellPositionFeature2(ctrl,beans){var _this=_super.call(this)||this;return _this.cellCtrl=ctrl,_this.beans=beans,_this.column=ctrl.getColumn(),_this.rowNode=ctrl.getRowNode(),_this.setupColSpan(),_this.setupRowSpan(),_this}return __extends$1_(CellPositionFeature2,_super),__name(CellPositionFeature2,"CellPositionFeature"),CellPositionFeature2.prototype.setupRowSpan=function(){this.rowSpan=this.column.getRowSpan(this.rowNode)},CellPositionFeature2.prototype.setComp=function(eGui){this.eGui=eGui,this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()},CellPositionFeature2.prototype.onDisplayColumnsChanged=function(){var colsSpanning=this.getColSpanningList();areEqual(this.colsSpanning,colsSpanning)||(this.colsSpanning=colsSpanning,this.onWidthChanged(),this.onLeftChanged())},CellPositionFeature2.prototype.setupColSpan=function(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))},CellPositionFeature2.prototype.onWidthChanged=function(){if(this.eGui){var width=this.getCellWidth();this.eGui.style.width=width+"px"}},CellPositionFeature2.prototype.getCellWidth=function(){return this.colsSpanning?this.colsSpanning.reduce(function(width,col){return width+col.getActualWidth()},0):this.column.getActualWidth()},CellPositionFeature2.prototype.getColSpanningList=function(){var colSpan=this.column.getColSpan(this.rowNode),colsSpanning=[];if(1===colSpan)colsSpanning.push(this.column);else for(var pointer=this.column,pinned=this.column.getPinned(),i=0;pointer&&i<colSpan&&(colsSpanning.push(pointer),(pointer=this.beans.columnModel.getDisplayedColAfter(pointer))&&!missing(pointer)&&pinned===pointer.getPinned());i++);return colsSpanning},CellPositionFeature2.prototype.onLeftChanged=function(){if(this.eGui){var left=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=left+"px"}},CellPositionFeature2.prototype.getCellLeft=function(){return(this.beans.gridOptionsService.is("enableRtl")&&this.colsSpanning?last(this.colsSpanning):this.column).getLeft()},CellPositionFeature2.prototype.modifyLeftForPrintLayout=function(leftPosition){if(!this.cellCtrl.isPrintLayout()||"left"===this.column.getPinned())return leftPosition;var leftWidth=this.beans.columnModel.getDisplayedColumnsLeftWidth();return"right"===this.column.getPinned()?leftWidth+this.beans.columnModel.getBodyContainerWidth()+(leftPosition||0):leftWidth+(leftPosition||0)},CellPositionFeature2.prototype.applyRowSpan=function(){if(1!==this.rowSpan){var totalRowHeight=this.beans.gridOptionsService.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height=totalRowHeight+"px",this.eGui.style.zIndex="1"}},CellPositionFeature2.prototype.destroy=function(){_super.prototype.destroy.call(this)},CellPositionFeature2}(BeanStub),__extends$1Z=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellCustomStyleFeature=function(_super){function CellCustomStyleFeature2(ctrl,beans){var _this=_super.call(this)||this;return _this.staticClasses=[],_this.cellCtrl=ctrl,_this.beans=beans,_this.column=ctrl.getColumn(),_this.rowNode=ctrl.getRowNode(),_this}return __extends$1Z(CellCustomStyleFeature2,_super),__name(CellCustomStyleFeature2,"CellCustomStyleFeature"),CellCustomStyleFeature2.prototype.setComp=function(comp){this.cellComp=comp,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()},CellCustomStyleFeature2.prototype.applyCellClassRules=function(){var _this=this,colDef=this.column.getColDef(),cellClassParams={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef,column:this.column,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};this.beans.stylingService.processClassRules(colDef.cellClassRules,cellClassParams,function(className){return _this.cellComp.addOrRemoveCssClass(className,!0)},function(className){return _this.cellComp.addOrRemoveCssClass(className,!1)})},CellCustomStyleFeature2.prototype.applyUserStyles=function(){var colDef=this.column.getColDef();if(colDef.cellStyle){var styles;if("function"==typeof colDef.cellStyle){var cellStyleParams={column:this.column,value:this.cellCtrl.getValue(),colDef,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};styles=(0,colDef.cellStyle)(cellStyleParams)}else styles=colDef.cellStyle;styles&&this.cellComp.setUserStyles(styles)}},CellCustomStyleFeature2.prototype.applyClassesFromColDef=function(){var _this=this,colDef=this.column.getColDef(),cellClassParams={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};this.staticClasses.length&&this.staticClasses.forEach(function(className){return _this.cellComp.addOrRemoveCssClass(className,!1)}),this.staticClasses=this.beans.stylingService.getStaticCellClasses(colDef,cellClassParams),this.staticClasses.length&&this.staticClasses.forEach(function(className){return _this.cellComp.addOrRemoveCssClass(className,!0)})},CellCustomStyleFeature2.prototype.destroy=function(){_super.prototype.destroy.call(this)},CellCustomStyleFeature2}(BeanStub),__extends$1Y=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),TooltipFeature=function(_super){function TooltipFeature2(ctrl,beans){var _this=_super.call(this)||this;return _this.ctrl=ctrl,_this.beans=beans,_this}return __extends$1Y(TooltipFeature2,_super),__name(TooltipFeature2,"TooltipFeature"),TooltipFeature2.prototype.setComp=function(comp){this.comp=comp,this.setupTooltip()},TooltipFeature2.prototype.setupTooltip=function(){this.browserTooltips=this.beans.gridOptionsService.is("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?this.comp.setTitle(null!=this.tooltip?this.tooltip:void 0):this.createTooltipFeatureIfNeeded()},TooltipFeature2.prototype.updateTooltipText=function(){this.tooltip=this.ctrl.getTooltipValue()},TooltipFeature2.prototype.createTooltipFeatureIfNeeded=function(){var _this=this;if(null==this.genericTooltipFeature){var parent={getTooltipParams:function(){return _this.getTooltipParams()},getGui:function(){return _this.ctrl.getGui()}};this.genericTooltipFeature=this.createManagedBean(new CustomTooltipFeature(parent),this.beans.context)}},TooltipFeature2.prototype.refreshToolTip=function(){this.updateTooltipText(),this.browserTooltips&&this.comp.setTitle(null!=this.tooltip?this.tooltip:void 0)},TooltipFeature2.prototype.getTooltipParams=function(){var ctrl=this.ctrl,column=ctrl.getColumn?ctrl.getColumn():void 0,colDef=ctrl.getColDef?ctrl.getColDef():void 0,rowNode=ctrl.getRowNode?ctrl.getRowNode():void 0;return{location:ctrl.getLocation(),colDef,column,rowIndex:ctrl.getRowIndex?ctrl.getRowIndex():void 0,node:rowNode,data:rowNode?rowNode.data:void 0,value:this.getTooltipText(),valueFormatted:ctrl.getValueFormatted?ctrl.getValueFormatted():void 0}},TooltipFeature2.prototype.getTooltipText=function(){return this.tooltip},TooltipFeature2.prototype.destroy=function(){_super.prototype.destroy.call(this)},TooltipFeature2}(BeanStub),__decorate$1N=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},Beans=function(){function Beans2(){}return __name(Beans2,"Beans"),Beans2.prototype.postConstruct=function(){this.doingMasterDetail=this.gridOptionsService.isMasterDetail(),this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gridOptionsService.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)},__decorate$1N([Autowired("resizeObserverService")],Beans2.prototype,"resizeObserverService",void 0),__decorate$1N([Autowired("paginationProxy")],Beans2.prototype,"paginationProxy",void 0),__decorate$1N([Autowired("context")],Beans2.prototype,"context",void 0),__decorate$1N([Autowired("columnApi")],Beans2.prototype,"columnApi",void 0),__decorate$1N([Autowired("gridApi")],Beans2.prototype,"gridApi",void 0),__decorate$1N([Autowired("gridOptionsService")],Beans2.prototype,"gridOptionsService",void 0),__decorate$1N([Autowired("expressionService")],Beans2.prototype,"expressionService",void 0),__decorate$1N([Autowired("environment")],Beans2.prototype,"environment",void 0),__decorate$1N([Autowired("rowRenderer")],Beans2.prototype,"rowRenderer",void 0),__decorate$1N([Autowired("templateService")],Beans2.prototype,"templateService",void 0),__decorate$1N([Autowired("valueService")],Beans2.prototype,"valueService",void 0),__decorate$1N([Autowired("eventService")],Beans2.prototype,"eventService",void 0),__decorate$1N([Autowired("columnModel")],Beans2.prototype,"columnModel",void 0),__decorate$1N([Autowired("headerNavigationService")],Beans2.prototype,"headerNavigationService",void 0),__decorate$1N([Autowired("navigationService")],Beans2.prototype,"navigationService",void 0),__decorate$1N([Autowired("columnAnimationService")],Beans2.prototype,"columnAnimationService",void 0),__decorate$1N([Optional("rangeService")],Beans2.prototype,"rangeService",void 0),__decorate$1N([Autowired("focusService")],Beans2.prototype,"focusService",void 0),__decorate$1N([Optional("contextMenuFactory")],Beans2.prototype,"contextMenuFactory",void 0),__decorate$1N([Autowired("popupService")],Beans2.prototype,"popupService",void 0),__decorate$1N([Autowired("valueFormatterService")],Beans2.prototype,"valueFormatterService",void 0),__decorate$1N([Autowired("stylingService")],Beans2.prototype,"stylingService",void 0),__decorate$1N([Autowired("columnHoverService")],Beans2.prototype,"columnHoverService",void 0),__decorate$1N([Autowired("userComponentFactory")],Beans2.prototype,"userComponentFactory",void 0),__decorate$1N([Autowired("userComponentRegistry")],Beans2.prototype,"userComponentRegistry",void 0),__decorate$1N([Autowired("animationFrameService")],Beans2.prototype,"animationFrameService",void 0),__decorate$1N([Autowired("dragService")],Beans2.prototype,"dragService",void 0),__decorate$1N([Autowired("dragAndDropService")],Beans2.prototype,"dragAndDropService",void 0),__decorate$1N([Autowired("sortController")],Beans2.prototype,"sortController",void 0),__decorate$1N([Autowired("filterManager")],Beans2.prototype,"filterManager",void 0),__decorate$1N([Autowired("rowContainerHeightService")],Beans2.prototype,"rowContainerHeightService",void 0),__decorate$1N([Autowired("frameworkOverrides")],Beans2.prototype,"frameworkOverrides",void 0),__decorate$1N([Autowired("cellPositionUtils")],Beans2.prototype,"cellPositionUtils",void 0),__decorate$1N([Autowired("rowPositionUtils")],Beans2.prototype,"rowPositionUtils",void 0),__decorate$1N([Autowired("selectionService")],Beans2.prototype,"selectionService",void 0),__decorate$1N([Optional("selectionHandleFactory")],Beans2.prototype,"selectionHandleFactory",void 0),__decorate$1N([Autowired("rowCssClassCalculator")],Beans2.prototype,"rowCssClassCalculator",void 0),__decorate$1N([Autowired("rowModel")],Beans2.prototype,"rowModel",void 0),__decorate$1N([Autowired("ctrlsService")],Beans2.prototype,"ctrlsService",void 0),__decorate$1N([Autowired("ctrlsFactory")],Beans2.prototype,"ctrlsFactory",void 0),__decorate$1N([Autowired("agStackComponentsRegistry")],Beans2.prototype,"agStackComponentsRegistry",void 0),__decorate$1N([Autowired("valueCache")],Beans2.prototype,"valueCache",void 0),__decorate$1N([Autowired("rowNodeEventThrottle")],Beans2.prototype,"rowNodeEventThrottle",void 0),__decorate$1N([Autowired("localeService")],Beans2.prototype,"localeService",void 0),__decorate$1N([PostConstruct],Beans2.prototype,"postConstruct",null),Beans2=__decorate$1N([Bean("beans")],Beans2)}(),__extends$1X=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellMouseListenerFeature=function(_super){function CellMouseListenerFeature2(ctrl,beans,column){var _this=_super.call(this)||this;return _this.cellCtrl=ctrl,_this.beans=beans,_this.column=column,_this}return __extends$1X(CellMouseListenerFeature2,_super),__name(CellMouseListenerFeature2,"CellMouseListenerFeature"),CellMouseListenerFeature2.prototype.onMouseEvent=function(eventName,mouseEvent){if(!isStopPropagationForAgGrid(mouseEvent))switch(eventName){case"click":this.onCellClicked(mouseEvent);break;case"mousedown":case"touchstart":this.onMouseDown(mouseEvent);break;case"dblclick":this.onCellDoubleClicked(mouseEvent);break;case"mouseout":this.onMouseOut(mouseEvent);break;case"mouseover":this.onMouseOver(mouseEvent)}},CellMouseListenerFeature2.prototype.onCellClicked=function(mouseEvent){if(this.isDoubleClickOnIPad())return this.onCellDoubleClicked(mouseEvent),void mouseEvent.preventDefault();var _a=this.beans,eventService=_a.eventService,rangeService=_a.rangeService,gridOptionsService=_a.gridOptionsService,multiKeyPressed=mouseEvent.ctrlKey||mouseEvent.metaKey;rangeService&&multiKeyPressed&&rangeService.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&rangeService.intersectLastRange(!0);var cellClickedEvent=this.cellCtrl.createEvent(mouseEvent,Events.EVENT_CELL_CLICKED);eventService.dispatchEvent(cellClickedEvent);var colDef=this.column.getColDef();colDef.onCellClicked&&window.setTimeout(function(){return colDef.onCellClicked(cellClickedEvent)},0),(gridOptionsService.is("singleClickEdit")||colDef.singleClickEdit)&&!gridOptionsService.is("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit()},CellMouseListenerFeature2.prototype.isDoubleClickOnIPad=function(){if(!isIOSUserAgent()||isEventSupported("dblclick"))return!1;var nowMillis=(new Date).getTime(),res=nowMillis-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=nowMillis,res},CellMouseListenerFeature2.prototype.onCellDoubleClicked=function(mouseEvent){var colDef=this.column.getColDef(),cellDoubleClickedEvent=this.cellCtrl.createEvent(mouseEvent,Events.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(cellDoubleClickedEvent),"function"==typeof colDef.onCellDoubleClicked&&window.setTimeout(function(){return colDef.onCellDoubleClicked(cellDoubleClickedEvent)},0),!this.beans.gridOptionsService.is("singleClickEdit")&&!this.beans.gridOptionsService.is("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit(null,null,mouseEvent)},CellMouseListenerFeature2.prototype.onMouseDown=function(mouseEvent){var ctrlKey=mouseEvent.ctrlKey,metaKey=mouseEvent.metaKey,shiftKey=mouseEvent.shiftKey,target=mouseEvent.target,_a=this.beans,eventService=_a.eventService,rangeService=_a.rangeService;if(!this.isRightClickInExistingRange(mouseEvent)){var ranges=rangeService&&0!=rangeService.getCellRanges().length;if(!shiftKey||!ranges){var forceBrowserFocus=isBrowserSafari()&&!this.cellCtrl.isEditing()&&!isFocusableFormField(target);this.cellCtrl.focusCell(forceBrowserFocus)}if(shiftKey&&ranges&&mouseEvent.preventDefault(),!this.containsWidget(target)){if(rangeService){var thisCell=this.cellCtrl.getCellPosition();if(shiftKey)rangeService.extendLatestRangeToCell(thisCell);else{var ctrlKeyPressed=ctrlKey||metaKey;rangeService.setRangeToCell(thisCell,ctrlKeyPressed)}}eventService.dispatchEvent(this.cellCtrl.createEvent(mouseEvent,Events.EVENT_CELL_MOUSE_DOWN))}}},CellMouseListenerFeature2.prototype.isRightClickInExistingRange=function(mouseEvent){var rangeService=this.beans.rangeService;if(rangeService&&(rangeService.isCellInAnyRange(this.cellCtrl.getCellPosition())&&2===mouseEvent.button))return!0;return!1},CellMouseListenerFeature2.prototype.containsWidget=function(target){return isElementChildOfClass(target,"ag-selection-checkbox",3)},CellMouseListenerFeature2.prototype.onMouseOut=function(mouseEvent){if(!this.mouseStayingInsideCell(mouseEvent)){var cellMouseOutEvent=this.cellCtrl.createEvent(mouseEvent,Events.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(cellMouseOutEvent),this.beans.columnHoverService.clearMouseOver()}},CellMouseListenerFeature2.prototype.onMouseOver=function(mouseEvent){if(!this.mouseStayingInsideCell(mouseEvent)){var cellMouseOverEvent=this.cellCtrl.createEvent(mouseEvent,Events.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(cellMouseOverEvent),this.beans.columnHoverService.setMouseOver([this.column])}},CellMouseListenerFeature2.prototype.mouseStayingInsideCell=function(e){if(!e.target||!e.relatedTarget)return!1;var eGui=this.cellCtrl.getGui(),cellContainsTarget=eGui.contains(e.target),cellContainsRelatedTarget=eGui.contains(e.relatedTarget);return cellContainsTarget&&cellContainsRelatedTarget},CellMouseListenerFeature2.prototype.destroy=function(){},CellMouseListenerFeature2}(Beans),__extends$1W=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellKeyboardListenerFeature=function(_super){function CellKeyboardListenerFeature2(ctrl,beans,column,rowNode,rowCtrl){var _this=_super.call(this)||this;return _this.cellCtrl=ctrl,_this.beans=beans,_this.rowNode=rowNode,_this.rowCtrl=rowCtrl,_this}return __extends$1W(CellKeyboardListenerFeature2,_super),__name(CellKeyboardListenerFeature2,"CellKeyboardListenerFeature"),CellKeyboardListenerFeature2.prototype.setComp=function(eGui){this.eGui=eGui},CellKeyboardListenerFeature2.prototype.onKeyDown=function(event){var key=event.key;switch(key){case KeyCode.ENTER:this.onEnterKeyDown(event);break;case KeyCode.F2:this.onF2KeyDown(event);break;case KeyCode.ESCAPE:this.onEscapeKeyDown(event);break;case KeyCode.TAB:this.onTabKeyDown(event);break;case KeyCode.BACKSPACE:case KeyCode.DELETE:this.onBackspaceOrDeleteKeyPressed(key,event);break;case KeyCode.DOWN:case KeyCode.UP:case KeyCode.RIGHT:case KeyCode.LEFT:this.onNavigationKeyPressed(event,key)}},CellKeyboardListenerFeature2.prototype.onNavigationKeyPressed=function(event,key){this.cellCtrl.isEditing()||(event.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(event):this.beans.navigationService.navigateToNextCell(event,key,this.cellCtrl.getCellPosition(),!0),event.preventDefault())},CellKeyboardListenerFeature2.prototype.onShiftRangeSelect=function(event){if(this.beans.rangeService){var endCell=this.beans.rangeService.extendLatestRangeInDirection(event);endCell&&this.beans.navigationService.ensureCellVisible(endCell)}},CellKeyboardListenerFeature2.prototype.onTabKeyDown=function(event){this.beans.navigationService.onTabKeyDown(this.cellCtrl,event)},CellKeyboardListenerFeature2.prototype.onBackspaceOrDeleteKeyPressed=function(key,event){var cellCtrl=this.cellCtrl,beans=this.beans,rowNode=this.rowNode,gridOptionsService=beans.gridOptionsService,rangeService=beans.rangeService,eventService=beans.eventService;cellCtrl.isEditing()||(eventService.dispatchEvent({type:Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),isDeleteKey(key,gridOptionsService.is("enableCellEditingOnBackspace"))?rangeService&&gridOptionsService.isEnableRangeSelection()?rangeService.clearCellRangeCellValues():cellCtrl.isCellEditable()&&rowNode.setDataValue(cellCtrl.getColumn(),null,"cellClear"):cellCtrl.startRowOrCellEdit(key,void 0,event),eventService.dispatchEvent({type:Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_END}))},CellKeyboardListenerFeature2.prototype.onEnterKeyDown=function(e){this.cellCtrl.isEditing()||this.rowCtrl.isEditing()?this.cellCtrl.stopEditingAndFocus():this.beans.gridOptionsService.is("enterMovesDown")?this.beans.navigationService.navigateToNextCell(null,KeyCode.DOWN,this.cellCtrl.getCellPosition(),!1):(this.cellCtrl.startRowOrCellEdit(KeyCode.ENTER,void 0,e),this.cellCtrl.isEditing()&&e.preventDefault())},CellKeyboardListenerFeature2.prototype.onF2KeyDown=function(event){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(KeyCode.F2,void 0,event)},CellKeyboardListenerFeature2.prototype.onEscapeKeyDown=function(event){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))},CellKeyboardListenerFeature2.prototype.onKeyPress=function(event){if(!(event.target!==this.eGui)&&!this.cellCtrl.isEditing()){var pressedChar=String.fromCharCode(event.charCode);" "===pressedChar?this.onSpaceKeyPressed(event):isEventFromPrintableCharacter(event)&&(this.cellCtrl.startRowOrCellEdit(null,pressedChar,event),event.preventDefault())}},CellKeyboardListenerFeature2.prototype.onSpaceKeyPressed=function(event){var gridOptionsService=this.beans.gridOptionsService;if(!this.cellCtrl.isEditing()&&gridOptionsService.isRowSelection()){var currentSelection=this.rowNode.isSelected(),newSelection=!currentSelection;if(newSelection||!gridOptionsService.is("suppressRowDeselection")){var groupSelectsFiltered=this.beans.gridOptionsService.is("groupSelectsFiltered"),updatedCount=this.rowNode.setSelectedParams({newValue:newSelection,rangeSelect:event.shiftKey,groupSelectsFiltered,event,source:"spacePressed"});void 0===currentSelection&&0===updatedCount&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:event.shiftKey,groupSelectsFiltered,event,source:"spacePressed"})}}event.preventDefault()},CellKeyboardListenerFeature2.prototype.destroy=function(){_super.prototype.destroy.call(this)},CellKeyboardListenerFeature2}(BeanStub),__extends$1V=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),DndSourceComp=function(_super){function DndSourceComp2(rowNode,column,beans,eCell){var _this=_super.call(this,'<div class="ag-drag-handle ag-row-drag" draggable="true"></div>')||this;return _this.rowNode=rowNode,_this.column=column,_this.beans=beans,_this.eCell=eCell,_this}return __extends$1V(DndSourceComp2,_super),__name(DndSourceComp2,"DndSourceComp"),DndSourceComp2.prototype.postConstruct=function(){this.getGui().appendChild(createIconNoSpan("rowDrag",this.beans.gridOptionsService,null)),this.addGuiEventListener("mousedown",function(e){e.stopPropagation()}),this.addDragSource(),this.checkVisibility()},DndSourceComp2.prototype.addDragSource=function(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))},DndSourceComp2.prototype.onDragStart=function(dragEvent){var _this=this,providedOnRowDrag=this.column.getColDef().dndSourceOnRowDrag;dragEvent.dataTransfer.setDragImage(this.eCell,0,0);var defaultOnRowDrag=__name(function(){try{var jsonData=JSON.stringify(_this.rowNode.data);dragEvent.dataTransfer.setData("application/json",jsonData),dragEvent.dataTransfer.setData("text/plain",jsonData)}catch{}},"defaultOnRowDrag");providedOnRowDrag?providedOnRowDrag({rowNode:this.rowNode,dragEvent,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}):defaultOnRowDrag()},DndSourceComp2.prototype.checkVisibility=function(){var visible=this.column.isDndSource(this.rowNode);this.setDisplayed(visible)},function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PostConstruct],DndSourceComp2.prototype,"postConstruct",null),DndSourceComp2}(Component),__extends$1U=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$7=function(){return __assign$7=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$7.apply(this,arguments)},instanceIdSequence$3=0,CellCtrl=function(_super){function CellCtrl2(column,rowNode,beans,rowCtrl){var _this=_super.call(this)||this;return _this.cellRangeFeature=null,_this.cellPositionFeature=null,_this.cellCustomStyleFeature=null,_this.tooltipFeature=null,_this.cellMouseListenerFeature=null,_this.cellKeyboardListenerFeature=null,_this.suppressRefreshCell=!1,_this.onCellCompAttachedFuncs=[],_this.column=column,_this.rowNode=rowNode,_this.beans=beans,_this.rowCtrl=rowCtrl,_this.instanceId=column.getId()+"-"+instanceIdSequence$3++,_this.createCellPosition(),_this.addFeatures(),_this}return __extends$1U(CellCtrl2,_super),__name(CellCtrl2,"CellCtrl"),CellCtrl2.prototype.addFeatures=function(){var _this=this;this.cellPositionFeature=new CellPositionFeature(this,this.beans),this.addDestroyFunc(function(){var _a;null===(_a=_this.cellPositionFeature)||void 0===_a||_a.destroy(),_this.cellPositionFeature=null}),this.cellCustomStyleFeature=new CellCustomStyleFeature(this,this.beans),this.addDestroyFunc(function(){var _a;null===(_a=_this.cellCustomStyleFeature)||void 0===_a||_a.destroy(),_this.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new CellMouseListenerFeature(this,this.beans,this.column),this.addDestroyFunc(function(){var _a;null===(_a=_this.cellMouseListenerFeature)||void 0===_a||_a.destroy(),_this.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new CellKeyboardListenerFeature(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(function(){var _a;null===(_a=_this.cellKeyboardListenerFeature)||void 0===_a||_a.destroy(),_this.cellKeyboardListenerFeature=null}),this.beans.rangeService&&this.beans.gridOptionsService.isEnableRangeSelection()&&(this.cellRangeFeature=new CellRangeFeature(this.beans,this),this.addDestroyFunc(function(){var _a;null===(_a=_this.cellRangeFeature)||void 0===_a||_a.destroy(),_this.cellRangeFeature=null})),this.addTooltipFeature()},CellCtrl2.prototype.addTooltipFeature=function(){var _this=this,tooltipCtrl={getColumn:function(){return _this.column},getColDef:function(){return _this.column.getColDef()},getRowIndex:function(){return _this.cellPosition.rowIndex},getRowNode:function(){return _this.rowNode},getGui:function(){return _this.getGui()},getLocation:function(){return"cell"},getTooltipValue:__name(function(){var colDef=_this.column.getColDef(),data=_this.rowNode.data;if(colDef.tooltipField&&exists(data))return getValueUsingField(data,colDef.tooltipField,_this.column.isTooltipFieldContainsDots());var valueGetter=colDef.tooltipValueGetter;return valueGetter?valueGetter({location:"cell",api:_this.beans.gridOptionsService.api,columnApi:_this.beans.gridOptionsService.columnApi,context:_this.beans.gridOptionsService.context,colDef:_this.column.getColDef(),column:_this.column,rowIndex:_this.cellPosition.rowIndex,node:_this.rowNode,data:_this.rowNode.data,value:_this.value,valueFormatted:_this.valueFormatted}):null},"getTooltipValue"),getValueFormatted:function(){return _this.valueFormatted}};this.tooltipFeature=new TooltipFeature(tooltipCtrl,this.beans),this.addDestroyFunc(function(){var _a;null===(_a=_this.tooltipFeature)||void 0===_a||_a.destroy(),_this.tooltipFeature=null})},CellCtrl2.prototype.setComp=function(comp,eGui,eCellWrapper,printLayout,startEditing){var _a,_b,_c,_d;this.cellComp=comp,this.eGui=eGui,this.printLayout=printLayout,this.updateAndFormatValue(!0),this.addDomData(),this.onCellFocused(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),eCellWrapper&&this.setupAutoHeight(eCellWrapper),this.setAriaColIndex(),this.beans.gridOptionsService.is("suppressCellFocus")||this.cellComp.setTabIndex(-1);var colIdSanitised=escapeString(this.column.getId());this.cellComp.setColId(colIdSanitised),this.cellComp.setRole("gridcell"),null===(_a=this.cellPositionFeature)||void 0===_a||_a.setComp(eGui),null===(_b=this.cellCustomStyleFeature)||void 0===_b||_b.setComp(comp),null===(_c=this.tooltipFeature)||void 0===_c||_c.setComp(comp),null===(_d=this.cellKeyboardListenerFeature)||void 0===_d||_d.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(comp,eGui),startEditing&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(function(func){return func()}),this.onCellCompAttachedFuncs=[])},CellCtrl2.prototype.setupAutoHeight=function(eCellWrapper){var _this=this;if(this.column.isAutoHeight()){var eParentCell=eCellWrapper.parentElement,minRowHeight=this.beans.gridOptionsService.getRowHeightForNode(this.rowNode).height,measureHeight=__name(function(timesCalled){if(!_this.editing&&_this.isAlive()){var _a=getElementSize(eParentCell),paddingTop=_a.paddingTop,paddingBottom=_a.paddingBottom,autoHeight=eCellWrapper.offsetHeight+paddingTop+paddingBottom;if(timesCalled<5){var doc=_this.beans.gridOptionsService.getDocument();if(!doc||!doc.contains(eCellWrapper)||0==autoHeight)return void _this.beans.frameworkOverrides.setTimeout(function(){return measureHeight(timesCalled+1)},0)}var newHeight=Math.max(autoHeight,minRowHeight);_this.rowNode.setRowAutoHeight(newHeight,_this.column)}},"measureHeight"),listener=__name(function(){return measureHeight(0)},"listener");listener();var destroyResizeObserver=this.beans.resizeObserverService.observeResize(eCellWrapper,listener);this.addDestroyFunc(function(){destroyResizeObserver(),_this.rowNode.setRowAutoHeight(void 0,_this.column)})}},CellCtrl2.prototype.getInstanceId=function(){return this.instanceId},CellCtrl2.prototype.showValue=function(forceNewCellRendererInstance){void 0===forceNewCellRendererInstance&&(forceNewCellRendererInstance=!1);var valueToDisplay=null!=this.valueFormatted?this.valueFormatted:this.value,params=this.createCellRendererParams(),compDetails=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),params);this.cellComp.setRenderDetails(compDetails,valueToDisplay,forceNewCellRendererInstance),this.refreshHandle()},CellCtrl2.prototype.setupControlComps=function(){var colDef=this.column.getColDef();this.includeSelection=this.isIncludeControl(colDef.checkboxSelection),this.includeRowDrag=this.isIncludeControl(colDef.rowDrag),this.includeDndSource=this.isIncludeControl(colDef.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)},CellCtrl2.prototype.isForceWrapper=function(){return this.beans.gridOptionsService.is("enableCellTextSelection")||this.column.isAutoHeight()},CellCtrl2.prototype.isIncludeControl=function(value){return!(null!=this.rowNode.rowPinned)&&("function"==typeof value||!0===value)},CellCtrl2.prototype.refreshShouldDestroy=function(){var colDef=this.column.getColDef(),selectionChanged=this.includeSelection!=this.isIncludeControl(colDef.checkboxSelection),rowDragChanged=this.includeRowDrag!=this.isIncludeControl(colDef.rowDrag),dndSourceChanged=this.includeDndSource!=this.isIncludeControl(colDef.dndSource);return selectionChanged||rowDragChanged||dndSourceChanged},CellCtrl2.prototype.startEditing=function(key,charPress,cellStartedEdit,event){var _this=this;if(void 0===key&&(key=null),void 0===charPress&&(charPress=null),void 0===cellStartedEdit&&(cellStartedEdit=!1),void 0===event&&(event=null),this.isCellEditable()&&!this.editing){if(!this.cellComp)return void this.onCellCompAttachedFuncs.push(function(){_this.startEditing(key,charPress,cellStartedEdit,event)});var editorParams=this.createCellEditorParams(key,charPress,cellStartedEdit),colDef=this.column.getColDef(),compDetails=this.beans.userComponentFactory.getCellEditorDetails(colDef,editorParams),popup=null!=(null==compDetails?void 0:compDetails.popupFromSelector)?compDetails.popupFromSelector:!!colDef.cellEditorPopup,position=null!=(null==compDetails?void 0:compDetails.popupPositionFromSelector)?compDetails.popupPositionFromSelector:colDef.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(compDetails,popup,position);var e=this.createEvent(event,Events.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(e)}},CellCtrl2.prototype.setEditing=function(editing){this.editing!==editing&&(this.editing=editing,this.refreshHandle())},CellCtrl2.prototype.stopRowOrCellEdit=function(cancel){void 0===cancel&&(cancel=!1),"fullRow"===this.beans.gridOptionsService.get("editType")?this.rowCtrl.stopRowEditing(cancel):this.stopEditing(cancel)},CellCtrl2.prototype.onPopupEditorClosed=function(){this.isEditing()&&this.stopEditingAndFocus()},CellCtrl2.prototype.takeValueFromCellEditor=function(cancel){var noValueResult={newValueExists:!1};if(cancel)return noValueResult;var cellEditor=this.cellComp.getCellEditor();return cellEditor?cellEditor.isCancelAfterEnd&&cellEditor.isCancelAfterEnd()?noValueResult:{newValue:cellEditor.getValue(),newValueExists:!0}:noValueResult},CellCtrl2.prototype.saveNewValue=function(oldValue,newValue){if(newValue===oldValue)return!1;this.suppressRefreshCell=!0;var valueChanged=this.rowNode.setDataValue(this.column,newValue,"edit");return this.suppressRefreshCell=!1,valueChanged},CellCtrl2.prototype.stopEditing=function(cancel){if(void 0===cancel&&(cancel=!1),!this.editing)return!1;var _a=this.takeValueFromCellEditor(cancel),newValue=_a.newValue,newValueExists=_a.newValueExists,oldValue=this.getValueFromValueService(),valueChanged=!1;return newValueExists&&(valueChanged=this.saveNewValue(oldValue,newValue)),this.setEditing(!1),this.cellComp.setEditDetails(),this.updateAndFormatValue(),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(oldValue,newValue,!cancel&&!!valueChanged),valueChanged},CellCtrl2.prototype.dispatchEditingStoppedEvent=function(oldValue,newValue,valueChanged){var editingStoppedEvent=__assign$7(__assign$7({},this.createEvent(null,Events.EVENT_CELL_EDITING_STOPPED)),{oldValue,newValue,valueChanged});this.beans.eventService.dispatchEvent(editingStoppedEvent)},CellCtrl2.prototype.createCellEditorParams=function(key,charPress,cellStartedEdit){return{value:this.getValueFromValueService(),eventKey:key,charPress,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,api:this.beans.gridOptionsService.api,cellStartedEdit,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)}},CellCtrl2.prototype.createCellRendererParams=function(){var _this=this;return{value:this.value,valueFormatted:this.valueFormatted,getValue:this.getValueFromValueService.bind(this),setValue:function(value){return _this.beans.valueService.setValue(_this.rowNode,_this.column,value)},formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:function(rowDraggerElement,dragStartPixels,value,suppressVisibilityChange){return _this.registerRowDragger(rowDraggerElement,dragStartPixels,suppressVisibilityChange)}}},CellCtrl2.prototype.parseValue=function(newValue){var colDef=this.column.getColDef(),params={node:this.rowNode,data:this.rowNode.data,oldValue:this.getValue(),newValue,colDef,column:this.column,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context},valueParser=colDef.valueParser;return exists(valueParser)?"function"==typeof valueParser?valueParser(params):this.beans.expressionService.evaluate(valueParser,params):newValue},CellCtrl2.prototype.setFocusOutOnEditor=function(){if(this.editing){var cellEditor=this.cellComp.getCellEditor();cellEditor&&cellEditor.focusOut&&cellEditor.focusOut()}},CellCtrl2.prototype.setFocusInOnEditor=function(){if(this.editing){var cellEditor=this.cellComp.getCellEditor();cellEditor&&cellEditor.focusIn?cellEditor.focusIn():this.focusCell(!0)}},CellCtrl2.prototype.onCellChanged=function(event){this.cellComp&&(event.column===this.column&&this.refreshCell({}))},CellCtrl2.prototype.refreshCell=function(params){var _a,_b,_c;if(!this.suppressRefreshCell&&!this.editing&&this.cellComp){var colDef=this.column.getColDef(),newData=null!=params&&!!params.newData,suppressFlash=null!=params&&!!params.suppressFlash||!!colDef.suppressCellFlash,noValueProvided=null==colDef.field&&null==colDef.valueGetter&&null==colDef.showRowGroup,forceRefresh=params&&params.forceRefresh||noValueProvided||newData,valuesDifferent=this.updateAndFormatValue();if(forceRefresh||valuesDifferent){this.showValue(newData);var processingFilterChange=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!suppressFlash&&!processingFilterChange&&(this.beans.gridOptionsService.is("enableCellChangeFlash")||colDef.enableCellChangeFlash)&&this.flashCell(),null===(_a=this.cellCustomStyleFeature)||void 0===_a||_a.applyUserStyles(),null===(_b=this.cellCustomStyleFeature)||void 0===_b||_b.applyClassesFromColDef()}this.refreshToolTip(),null===(_c=this.cellCustomStyleFeature)||void 0===_c||_c.applyCellClassRules()}},CellCtrl2.prototype.stopEditingAndFocus=function(suppressNavigateAfterEdit){void 0===suppressNavigateAfterEdit&&(suppressNavigateAfterEdit=!1),this.stopRowOrCellEdit(),this.focusCell(!0),suppressNavigateAfterEdit||this.navigateAfterEdit()},CellCtrl2.prototype.navigateAfterEdit=function(){"fullRow"===this.beans.gridOptionsService.get("editType")||this.beans.gridOptionsService.is("enterMovesDownAfterEdit")&&this.beans.navigationService.navigateToNextCell(null,KeyCode.DOWN,this.getCellPosition(),!1)},CellCtrl2.prototype.flashCell=function(delays){var flashDelay=delays&&delays.flashDelay,fadeDelay=delays&&delays.fadeDelay;this.animateCell("data-changed",flashDelay,fadeDelay)},CellCtrl2.prototype.animateCell=function(cssName,flashDelay,fadeDelay){var _a,_b,_this=this,fullName="ag-cell-"+cssName,animationFullName="ag-cell-"+cssName+"-animation",gridOptionsService=this.beans.gridOptionsService;flashDelay||(flashDelay=null!==(_a=gridOptionsService.getNum("cellFlashDelay"))&&void 0!==_a?_a:500),exists(fadeDelay)||(fadeDelay=null!==(_b=gridOptionsService.getNum("cellFadeDelay"))&&void 0!==_b?_b:1e3),this.cellComp.addOrRemoveCssClass(fullName,!0),this.cellComp.addOrRemoveCssClass(animationFullName,!1),window.setTimeout(function(){_this.isAlive()&&(_this.cellComp.addOrRemoveCssClass(fullName,!1),_this.cellComp.addOrRemoveCssClass(animationFullName,!0),_this.eGui.style.transition="background-color "+fadeDelay+"ms",window.setTimeout(function(){_this.isAlive()&&(_this.cellComp.addOrRemoveCssClass(animationFullName,!1),_this.eGui.style.transition="")},fadeDelay))},flashDelay)},CellCtrl2.prototype.onFlashCells=function(event){if(this.cellComp){var cellId=this.beans.cellPositionUtils.createId(this.getCellPosition());event.cells[cellId]&&this.animateCell("highlight")}},CellCtrl2.prototype.isCellEditable=function(){return this.column.isCellEditable(this.rowNode)},CellCtrl2.prototype.isSuppressFillHandle=function(){return this.column.isSuppressFillHandle()},CellCtrl2.prototype.formatValue=function(value){return this.callValueFormatter(value)??value},CellCtrl2.prototype.callValueFormatter=function(value){return this.beans.valueFormatterService.formatValue(this.column,this.rowNode,value)},CellCtrl2.prototype.updateAndFormatValue=function(force){void 0===force&&(force=!1);var oldValue=this.value,oldValueFormatted=this.valueFormatted;return this.value=this.getValueFromValueService(),this.valueFormatted=this.callValueFormatter(this.value),!!force||(!this.valuesAreEqual(oldValue,this.value)||this.valueFormatted!=oldValueFormatted)},CellCtrl2.prototype.valuesAreEqual=function(val1,val2){var colDef=this.column.getColDef();return colDef.equals?colDef.equals(val1,val2):val1===val2},CellCtrl2.prototype.getComp=function(){return this.cellComp},CellCtrl2.prototype.getValueFromValueService=function(){var lockedClosedGroup=this.rowNode.leafGroup&&this.beans.columnModel.isPivotMode(),isOpenGroup=this.rowNode.group&&this.rowNode.expanded&&!this.rowNode.footer&&!lockedClosedGroup,groupFootersEnabled=this.beans.gridOptionsService.is("groupIncludeFooter"),groupAlwaysShowAggData=this.beans.gridOptionsService.is("groupSuppressBlankHeader"),ignoreAggData=isOpenGroup&&groupFootersEnabled&&!groupAlwaysShowAggData;return this.beans.valueService.getValue(this.column,this.rowNode,!1,ignoreAggData)},CellCtrl2.prototype.getValue=function(){return this.value},CellCtrl2.prototype.getValueFormatted=function(){return this.valueFormatted},CellCtrl2.prototype.addDomData=function(){var _this=this,element=this.getGui();this.beans.gridOptionsService.setDomData(element,CellCtrl2.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(function(){return _this.beans.gridOptionsService.setDomData(element,CellCtrl2.DOM_DATA_KEY_CELL_CTRL,null)})},CellCtrl2.prototype.createEvent=function(domEvent,eventType){return{type:eventType,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),context:this.beans.gridOptionsService.context,api:this.beans.gridApi,columnApi:this.beans.columnApi,rowPinned:this.rowNode.rowPinned,event:domEvent,rowIndex:this.rowNode.rowIndex}},CellCtrl2.prototype.onKeyPress=function(event){var _a;null===(_a=this.cellKeyboardListenerFeature)||void 0===_a||_a.onKeyPress(event)},CellCtrl2.prototype.onKeyDown=function(event){var _a;null===(_a=this.cellKeyboardListenerFeature)||void 0===_a||_a.onKeyDown(event)},CellCtrl2.prototype.onMouseEvent=function(eventName,mouseEvent){var _a;null===(_a=this.cellMouseListenerFeature)||void 0===_a||_a.onMouseEvent(eventName,mouseEvent)},CellCtrl2.prototype.getGui=function(){return this.eGui},CellCtrl2.prototype.refreshToolTip=function(){var _a;null===(_a=this.tooltipFeature)||void 0===_a||_a.refreshToolTip()},CellCtrl2.prototype.getColSpanningList=function(){return this.cellPositionFeature.getColSpanningList()},CellCtrl2.prototype.onLeftChanged=function(){var _a;this.cellComp&&(null===(_a=this.cellPositionFeature)||void 0===_a||_a.onLeftChanged())},CellCtrl2.prototype.onDisplayedColumnsChanged=function(){this.eGui&&this.setAriaColIndex()},CellCtrl2.prototype.setAriaColIndex=function(){var colIdx=this.beans.columnModel.getAriaColumnIndex(this.column);setAriaColIndex(this.getGui(),colIdx)},CellCtrl2.prototype.isSuppressNavigable=function(){return this.column.isSuppressNavigable(this.rowNode)},CellCtrl2.prototype.onWidthChanged=function(){var _a;return null===(_a=this.cellPositionFeature)||void 0===_a?void 0:_a.onWidthChanged()},CellCtrl2.prototype.getColumn=function(){return this.column},CellCtrl2.prototype.getRowNode=function(){return this.rowNode},CellCtrl2.prototype.getBeans=function(){return this.beans},CellCtrl2.prototype.isPrintLayout=function(){return this.printLayout},CellCtrl2.prototype.appendChild=function(htmlElement){this.eGui.appendChild(htmlElement)},CellCtrl2.prototype.refreshHandle=function(){this.cellRangeFeature&&this.cellRangeFeature.refreshHandle()},CellCtrl2.prototype.getCellPosition=function(){return this.cellPosition},CellCtrl2.prototype.isEditing=function(){return this.editing},CellCtrl2.prototype.startRowOrCellEdit=function(key,charPress,event){void 0===event&&(event=null),this.cellComp&&("fullRow"===this.beans.gridOptionsService.get("editType")?this.rowCtrl.startRowEditing(key,charPress,this):this.startEditing(key,charPress,!0,event))},CellCtrl2.prototype.getRowCtrl=function(){return this.rowCtrl},CellCtrl2.prototype.getRowPosition=function(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}},CellCtrl2.prototype.updateRangeBordersIfRangeCount=function(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()},CellCtrl2.prototype.onRangeSelectionChanged=function(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},CellCtrl2.prototype.isRangeSelectionEnabled=function(){return null!=this.cellRangeFeature},CellCtrl2.prototype.focusCell=function(forceBrowserFocus){void 0===forceBrowserFocus&&(forceBrowserFocus=!1),this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus})},CellCtrl2.prototype.onRowIndexChanged=function(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},CellCtrl2.prototype.onFirstRightPinnedChanged=function(){if(this.cellComp){var firstRightPinned=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass("ag-cell-first-right-pinned",firstRightPinned)}},CellCtrl2.prototype.onLastLeftPinnedChanged=function(){if(this.cellComp){var lastLeftPinned=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass("ag-cell-last-left-pinned",lastLeftPinned)}},CellCtrl2.prototype.onCellFocused=function(event){if(this.cellComp&&!this.beans.gridOptionsService.is("suppressCellFocus")){var cellFocused=this.beans.focusService.isCellFocused(this.cellPosition);if(this.cellComp.addOrRemoveCssClass("ag-cell-focus",cellFocused),cellFocused&&event&&event.forceBrowserFocus)this.cellComp.getFocusableElement().focus({preventScroll:!!event.preventScrollOnBrowserFocus});var fullRowEdit="fullRow"===this.beans.gridOptionsService.get("editType");!cellFocused&&!fullRowEdit&&this.editing&&this.stopRowOrCellEdit()}},CellCtrl2.prototype.createCellPosition=function(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:makeNull(this.rowNode.rowPinned),column:this.column}},CellCtrl2.prototype.applyStaticCssClasses=function(){this.cellComp.addOrRemoveCssClass("ag-cell",!0),this.cellComp.addOrRemoveCssClass("ag-cell-not-inline-editing",!0);var autoHeight=1==this.column.isAutoHeight();this.cellComp.addOrRemoveCssClass("ag-cell-auto-height",autoHeight),this.cellComp.addOrRemoveCssClass("ag-cell-normal-height",!autoHeight)},CellCtrl2.prototype.onColumnHover=function(){if(this.cellComp&&this.beans.gridOptionsService.is("columnHoverHighlight")){var isHovered=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass("ag-column-hover",isHovered)}},CellCtrl2.prototype.onColDefChanged=function(){this.cellComp&&(this.setWrapText(),this.editing||this.refreshCell({forceRefresh:!0,suppressFlash:!0}))},CellCtrl2.prototype.setWrapText=function(){var value=1==this.column.getColDef().wrapText;this.cellComp.addOrRemoveCssClass("ag-cell-wrap-text",value)},CellCtrl2.prototype.dispatchCellContextMenuEvent=function(event){var colDef=this.column.getColDef(),cellContextMenuEvent=this.createEvent(event,Events.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(cellContextMenuEvent),colDef.onCellContextMenu&&window.setTimeout(function(){return colDef.onCellContextMenu(cellContextMenuEvent)},0)},CellCtrl2.prototype.getCellRenderer=function(){return this.cellComp?this.cellComp.getCellRenderer():null},CellCtrl2.prototype.getCellEditor=function(){return this.cellComp?this.cellComp.getCellEditor():null},CellCtrl2.prototype.destroy=function(){this.onCellCompAttachedFuncs=[],_super.prototype.destroy.call(this)},CellCtrl2.prototype.createSelectionCheckbox=function(){var cbSelectionComponent=new CheckboxSelectionComponent;return this.beans.context.createBean(cbSelectionComponent),cbSelectionComponent.init({rowNode:this.rowNode,column:this.column}),cbSelectionComponent},CellCtrl2.prototype.createDndSource=function(){var dndSourceComp=new DndSourceComp(this.rowNode,this.column,this.beans,this.eGui);return this.beans.context.createBean(dndSourceComp),dndSourceComp},CellCtrl2.prototype.registerRowDragger=function(customElement,dragStartPixels,suppressVisibilityChange){var _this=this;if(this.customRowDragComp)this.customRowDragComp.setDragElement(customElement,dragStartPixels);else{var newComp=this.createRowDragComp(customElement,dragStartPixels,suppressVisibilityChange);newComp&&(this.customRowDragComp=newComp,this.addDestroyFunc(function(){_this.beans.context.destroyBean(newComp),_this.customRowDragComp=null}))}},CellCtrl2.prototype.createRowDragComp=function(customElement,dragStartPixels,suppressVisibilityChange){var _this=this,pagination=this.beans.gridOptionsService.is("pagination"),rowDragManaged=this.beans.gridOptionsService.is("rowDragManaged"),clientSideRowModelActive=this.beans.gridOptionsService.isRowModelType("clientSide");if(rowDragManaged){if(!clientSideRowModelActive)return void doOnce(function(){return console.warn("AG Grid: managed row dragging is only allowed in the Client Side Row Model")},"CellComp.addRowDragging");if(pagination)return void doOnce(function(){return console.warn("AG Grid: managed row dragging is not possible when doing pagination")},"CellComp.addRowDragging")}var rowDragComp=new RowDragComp(function(){return _this.value},this.rowNode,this.column,customElement,dragStartPixels,suppressVisibilityChange);return this.beans.context.createBean(rowDragComp),rowDragComp},CellCtrl2.DOM_DATA_KEY_CELL_CTRL="cellCtrl",CellCtrl2}(BeanStub),__extends$1T=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__read$j=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};(RowType2=RowType$1||(RowType$1={})).Normal="Normal",RowType2.FullWidth="FullWidth",RowType2.FullWidthLoading="FullWidthLoading",RowType2.FullWidthGroup="FullWidthGroup",RowType2.FullWidthDetail="FullWidthDetail";var RowContainerName,RowContainerName2,RowContainerType,RowContainerType2,instanceIdSequence$2=0,RowCtrl=function(_super){function RowCtrl2(rowNode,beans,animateIn,useAnimationFrameForCreate,printLayout){var _this=_super.call(this)||this;return _this.allRowGuis=[],_this.active=!0,_this.centerCellCtrls={list:[],map:{}},_this.leftCellCtrls={list:[],map:{}},_this.rightCellCtrls={list:[],map:{}},_this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},_this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},_this.lastMouseDownOnDragger=!1,_this.updateColumnListsPending=!1,_this.businessKeySanitised=null,_this.beans=beans,_this.rowNode=rowNode,_this.paginationPage=_this.beans.paginationProxy.getCurrentPage(),_this.useAnimationFrameForCreate=useAnimationFrameForCreate,_this.printLayout=printLayout,_this.instanceId=rowNode.id+"-"+instanceIdSequence$2++,_this.setAnimateFlags(animateIn),_this.initRowBusinessKey(),_this.rowFocused=_this.beans.focusService.isRowFocused(_this.rowNode.rowIndex,_this.rowNode.rowPinned),_this.rowLevel=_this.beans.rowCssClassCalculator.calculateRowLevel(_this.rowNode),_this.setRowType(),_this.addListeners(),_this}return __extends$1T(RowCtrl2,_super),__name(RowCtrl2,"RowCtrl"),RowCtrl2.prototype.initRowBusinessKey=function(){var businessKeyForNodeFunc=this.beans.gridOptionsService.get("getBusinessKeyForNode");if("function"==typeof businessKeyForNodeFunc){var businessKey=businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=escapeString(businessKey)}},RowCtrl2.prototype.isSticky=function(){return this.rowNode.sticky},RowCtrl2.prototype.getBeans=function(){return this.beans},RowCtrl2.prototype.getInstanceId=function(){return this.instanceId},RowCtrl2.prototype.setComp=function(rowComp,element,containerType){var gui={rowComp,element,containerType};this.allRowGuis.push(gui),containerType===RowContainerType.LEFT?this.leftGui=gui:containerType===RowContainerType.RIGHT?this.rightGui=gui:containerType===RowContainerType.FULL_WIDTH?this.fullWidthGui=gui:this.centerGui=gui,this.initialiseRowComp(gui),"FullWidthLoading"!==this.rowType&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()},RowCtrl2.prototype.unsetComp=function(containerType){this.allRowGuis=this.allRowGuis.filter(function(rowGui){return rowGui.containerType!==containerType}),containerType===RowContainerType.LEFT?this.leftGui=void 0:containerType===RowContainerType.RIGHT?this.rightGui=void 0:containerType===RowContainerType.FULL_WIDTH&&(this.fullWidthGui=void 0)},RowCtrl2.prototype.isCacheable=function(){return this.rowType===RowType$1.FullWidthDetail&&this.beans.gridOptionsService.is("keepDetailRows")},RowCtrl2.prototype.setCached=function(cached){var displayValue=cached?"none":"";this.allRowGuis.forEach(function(rg){return rg.element.style.display=displayValue})},RowCtrl2.prototype.initialiseRowComp=function(gui){var _this=this,gos=this.beans.gridOptionsService;this.onRowHeightChanged(gui),this.updateRowIndexes(gui),this.setFocusedClasses(gui),this.setStylesFromGridOptions(gui),gos.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(gui),this.updateColumnLists(!this.useAnimationFrameForCreate);var comp=gui.rowComp;comp.setRole("row"),this.getInitialRowClasses(gui.containerType).forEach(function(name){return comp.addOrRemoveCssClass(name,!0)}),this.executeSlideAndFadeAnimations(gui),this.rowNode.group&&setAriaExpanded(gui.element,1==this.rowNode.expanded);var rowIdSanitised=escapeString(this.rowNode.id);null!=rowIdSanitised&&comp.setRowId(rowIdSanitised),null!=this.businessKeySanitised&&comp.setRowBusinessKey(this.businessKeySanitised),this.isFullWidth()&&!this.beans.gridOptionsService.is("suppressCellFocus")&&comp.setTabIndex(-1),gos.setDomData(gui.element,RowCtrl2.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(function(){return gos.setDomData(gui.element,RowCtrl2.DOM_DATA_KEY_ROW_CTRL,null)}),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,gui.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(gui.element),this.isFullWidth()&&this.setupFullWidth(gui),gos.is("rowDragEntireRow")&&this.addRowDraggerToRow(gui),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(function(){_this.isAlive()&&gui.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()},RowCtrl2.prototype.executeSlideAndFadeAnimations=function(gui){var _this=this,containerType=gui.containerType;this.slideInAnimation[containerType]&&(executeNextVMTurn(function(){_this.onTopChanged()}),this.slideInAnimation[containerType]=!1),this.fadeInAnimation[containerType]&&(executeNextVMTurn(function(){gui.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[containerType]=!1)},RowCtrl2.prototype.addRowDraggerToRow=function(gui){if(this.beans.gridOptionsService.isEnableRangeSelection())doOnce(function(){console.warn("AG Grid: Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`")},"rowDragAndRangeSelectionEnabled");else{var translate=this.beans.localeService.getLocaleTextFunc(),rowDragComp=new RowDragComp(function(){return"1 "+translate("rowDragRow","row")},this.rowNode,void 0,gui.element,void 0,!0);this.createManagedBean(rowDragComp,this.beans.context)}},RowCtrl2.prototype.setupFullWidth=function(gui){var pinned=this.getPinnedForContainer(gui.containerType),params=this.createFullWidthParams(gui.element,pinned);if(this.rowType!=RowType$1.FullWidthDetail||ModuleRegistry.assertRegistered(ModuleNames.MasterDetailModule,"cell renderer 'agDetailCellRenderer' (for master detail)")){var compDetails;switch(this.rowType){case RowType$1.FullWidthDetail:compDetails=this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(params);break;case RowType$1.FullWidthGroup:compDetails=this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(params);break;case RowType$1.FullWidthLoading:compDetails=this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(params);break;default:compDetails=this.beans.userComponentFactory.getFullWidthCellRendererDetails(params)}gui.rowComp.showFullWidth(compDetails)}},RowCtrl2.prototype.isPrintLayout=function(){return this.printLayout},RowCtrl2.prototype.getFullWidthCellRenderer=function(){var _a,_b;return null===(_b=null===(_a=this.fullWidthGui)||void 0===_a?void 0:_a.rowComp)||void 0===_b?void 0:_b.getFullWidthCellRenderer()},RowCtrl2.prototype.getCellElement=function(column){var cellCtrl=this.getCellCtrl(column);return cellCtrl?cellCtrl.getGui():null},RowCtrl2.prototype.executeProcessRowPostCreateFunc=function(){var _a,func=this.beans.gridOptionsService.getCallback("processRowPostCreate");func&&this.areAllContainersReady()&&func({eRow:null===(_a=this.centerGui)||void 0===_a?void 0:_a.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})},RowCtrl2.prototype.areAllContainersReady=function(){var isLeftReady=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),isCenterReady=!!this.centerGui,isRightReady=!!this.rightGui||!this.beans.columnModel.isPinningRight();return isLeftReady&&isCenterReady&&isRightReady},RowCtrl2.prototype.setRowType=function(){var isStub=this.rowNode.stub,isFullWidthCell=this.rowNode.isFullWidthCell(),isDetailCell=this.beans.doingMasterDetail&&this.rowNode.detail,pivotMode=this.beans.columnModel.isPivotMode(),isFullWidthGroup=!!this.rowNode.group&&!this.rowNode.footer&&this.beans.gridOptionsService.isGroupUseEntireRow(pivotMode);this.rowType=isStub?RowType$1.FullWidthLoading:isDetailCell?RowType$1.FullWidthDetail:isFullWidthCell?RowType$1.FullWidth:isFullWidthGroup?RowType$1.FullWidthGroup:RowType$1.Normal},RowCtrl2.prototype.updateColumnLists=function(suppressAnimationFrame){var _this=this;if(void 0===suppressAnimationFrame&&(suppressAnimationFrame=!1),!this.isFullWidth()){if(suppressAnimationFrame||this.beans.gridOptionsService.is("suppressAnimationFrame")||this.printLayout)return void this.updateColumnListsImpl();this.updateColumnListsPending||(this.beans.animationFrameService.createTask(function(){_this.active&&_this.updateColumnListsImpl()},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}},RowCtrl2.prototype.createCellCtrls=function(prev,cols,pinned){var _this=this;void 0===pinned&&(pinned=null);var res={list:[],map:{}},addCell=__name(function(colInstanceId,cellCtrl){res.list.push(cellCtrl),res.map[colInstanceId]=cellCtrl},"addCell");return cols.forEach(function(col){var colInstanceId=col.getInstanceId(),cellCtrl=prev.map[colInstanceId];cellCtrl||(cellCtrl=new CellCtrl(col,_this.rowNode,_this.beans,_this)),addCell(colInstanceId,cellCtrl)}),prev.list.forEach(function(prevCellCtrl){if(!(null!=res.map[prevCellCtrl.getColumn().getInstanceId()])){if(!_this.isCellEligibleToBeRemoved(prevCellCtrl,pinned))return void addCell(prevCellCtrl.getColumn().getInstanceId(),prevCellCtrl);prevCellCtrl.destroy()}}),res},RowCtrl2.prototype.updateColumnListsImpl=function(){var _this=this;this.updateColumnListsPending=!1;var columnModel=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,columnModel.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{var centerCols=columnModel.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,centerCols);var leftCols=columnModel.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,leftCols,"left");var rightCols=columnModel.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,rightCols,"right")}this.allRowGuis.forEach(function(item){var cellControls=item.containerType===RowContainerType.LEFT?_this.leftCellCtrls:item.containerType===RowContainerType.RIGHT?_this.rightCellCtrls:_this.centerCellCtrls;item.rowComp.setCellCtrls(cellControls.list)})},RowCtrl2.prototype.isCellEligibleToBeRemoved=function(cellCtrl,nextContainerPinned){if(cellCtrl.getColumn().getPinned()!=nextContainerPinned)return true;var editing=cellCtrl.isEditing(),focused=this.beans.focusService.isCellFocused(cellCtrl.getCellPosition());if(editing||focused){var column_1=cellCtrl.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(column_1)>=0)}return true},RowCtrl2.prototype.setAnimateFlags=function(animateIn){if(!this.isSticky()&&animateIn){var oldRowTopExists=exists(this.rowNode.oldRowTop),pinningLeft=this.beans.columnModel.isPinningLeft(),pinningRight=this.beans.columnModel.isPinningRight();oldRowTopExists?(this.slideInAnimation.center=!0,this.slideInAnimation.left=pinningLeft,this.slideInAnimation.right=pinningRight):(this.fadeInAnimation.center=!0,this.fadeInAnimation.left=pinningLeft,this.fadeInAnimation.right=pinningRight)}},RowCtrl2.prototype.isEditing=function(){return this.editingRow},RowCtrl2.prototype.stopRowEditing=function(cancel){this.stopEditing(cancel)},RowCtrl2.prototype.isFullWidth=function(){return this.rowType!==RowType$1.Normal},RowCtrl2.prototype.getRowType=function(){return this.rowType},RowCtrl2.prototype.refreshFullWidth=function(){var _this=this,tryRefresh=__name(function(gui,pinned){if(!gui)return!0;var cellRenderer=gui.rowComp.getFullWidthCellRenderer();if(!cellRenderer||!cellRenderer.refresh)return!1;var params=_this.createFullWidthParams(gui.element,pinned);return cellRenderer.refresh(params)},"tryRefresh"),fullWidthSuccess=tryRefresh(this.fullWidthGui,null),centerSuccess=tryRefresh(this.centerGui,null),leftSuccess=tryRefresh(this.leftGui,"left"),rightSuccess=tryRefresh(this.rightGui,"right");return fullWidthSuccess&&centerSuccess&&leftSuccess&&rightSuccess},RowCtrl2.prototype.addListeners=function(){var _this=this;this.addManagedListener(this.rowNode,RowNode.EVENT_HEIGHT_CHANGED,function(){return _this.onRowHeightChanged()}),this.addManagedListener(this.rowNode,RowNode.EVENT_ROW_SELECTED,function(){return _this.onRowSelected()}),this.addManagedListener(this.rowNode,RowNode.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,this.onRowNodeCellChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_DRAGGING_CHANGED,this.onRowNodeDraggingChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));var eventService=this.beans.eventService;this.addManagedListener(eventService,Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_CELL_FOCUSED,this.onCellFocused.bind(this)),this.addManagedListener(eventService,Events.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusCleared.bind(this)),this.addManagedListener(eventService,Events.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedListener(eventService,Events.EVENT_COLUMN_MOVED,this.onColumnMoved.bind(this)),this.addListenersForCellComps()},RowCtrl2.prototype.onColumnMoved=function(){this.updateColumnLists()},RowCtrl2.prototype.addListenersForCellComps=function(){var _this=this;this.addManagedListener(this.rowNode,RowNode.EVENT_ROW_INDEX_CHANGED,function(){_this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.onRowIndexChanged()})}),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,function(event){_this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.onCellChanged(event)})})},RowCtrl2.prototype.onRowNodeDataChanged=function(event){this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.refreshCell({suppressFlash:!event.update,newData:!event.update})}),this.onRowSelected(),this.postProcessCss()},RowCtrl2.prototype.onRowNodeCellChanged=function(){this.postProcessCss()},RowCtrl2.prototype.postProcessCss=function(){this.setStylesFromGridOptions(),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()},RowCtrl2.prototype.onRowNodeHighlightChanged=function(){var highlighted=this.rowNode.highlighted;this.allRowGuis.forEach(function(gui){var aboveOn=highlighted===RowHighlightPosition.Above,belowOn=highlighted===RowHighlightPosition.Below;gui.rowComp.addOrRemoveCssClass("ag-row-highlight-above",aboveOn),gui.rowComp.addOrRemoveCssClass("ag-row-highlight-below",belowOn)})},RowCtrl2.prototype.onRowNodeDraggingChanged=function(){this.postProcessRowDragging()},RowCtrl2.prototype.postProcessRowDragging=function(){var dragging=this.rowNode.dragging;this.allRowGuis.forEach(function(gui){return gui.rowComp.addOrRemoveCssClass("ag-row-dragging",dragging)})},RowCtrl2.prototype.updateExpandedCss=function(){var expandable=this.rowNode.isExpandable(),expanded=1==this.rowNode.expanded;this.allRowGuis.forEach(function(gui){gui.rowComp.addOrRemoveCssClass("ag-row-group",expandable),gui.rowComp.addOrRemoveCssClass("ag-row-group-expanded",expandable&&expanded),gui.rowComp.addOrRemoveCssClass("ag-row-group-contracted",expandable&&!expanded),setAriaExpanded(gui.element,expandable&&expanded)})},RowCtrl2.prototype.onDisplayedColumnsChanged=function(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()},RowCtrl2.prototype.onVirtualColumnsChanged=function(){this.updateColumnLists()},RowCtrl2.prototype.getRowPosition=function(){return{rowPinned:makeNull(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}},RowCtrl2.prototype.onKeyboardNavigate=function(keyboardEvent){var currentFullWidthComp=this.allRowGuis.find(function(c){return c.element.contains(keyboardEvent.target)});if((currentFullWidthComp?currentFullWidthComp.element:null)===keyboardEvent.target){var node=this.rowNode,lastFocusedCell=this.beans.focusService.getFocusedCell(),cellPosition={rowIndex:node.rowIndex,rowPinned:node.rowPinned,column:lastFocusedCell&&lastFocusedCell.column};this.beans.navigationService.navigateToNextCell(keyboardEvent,keyboardEvent.key,cellPosition,!0),keyboardEvent.preventDefault()}},RowCtrl2.prototype.onTabKeyDown=function(keyboardEvent){if(!keyboardEvent.defaultPrevented&&!isStopPropagationForAgGrid(keyboardEvent)){var currentFullWidthComp=this.allRowGuis.find(function(c){return c.element.contains(keyboardEvent.target)}),currentFullWidthContainer=currentFullWidthComp?currentFullWidthComp.element:null,isFullWidthContainerFocused=currentFullWidthContainer===keyboardEvent.target,nextEl=null;isFullWidthContainerFocused||(nextEl=this.beans.focusService.findNextFocusableElement(currentFullWidthContainer,!1,keyboardEvent.shiftKey)),(this.isFullWidth()&&isFullWidthContainerFocused||!nextEl)&&this.beans.navigationService.onTabKeyDown(this,keyboardEvent)}},RowCtrl2.prototype.onFullWidthRowFocused=function(event){var _a,node=this.rowNode,isFocused=!!event&&(this.isFullWidth()&&event.rowIndex===node.rowIndex&&event.rowPinned==node.rowPinned),element=this.fullWidthGui?this.fullWidthGui.element:null===(_a=this.centerGui)||void 0===_a?void 0:_a.element;element&&(element.classList.toggle("ag-full-width-focus",isFocused),isFocused&&element.focus({preventScroll:!0}))},RowCtrl2.prototype.refreshCell=function(cellCtrl){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,cellCtrl),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,cellCtrl),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,cellCtrl),this.updateColumnLists()},RowCtrl2.prototype.removeCellCtrl=function(prev,cellCtrlToRemove){var res={list:[],map:{}};return prev.list.forEach(function(cellCtrl){cellCtrl!==cellCtrlToRemove&&(res.list.push(cellCtrl),res.map[cellCtrl.getInstanceId()]=cellCtrl)}),res},RowCtrl2.prototype.onMouseEvent=function(eventName,mouseEvent){switch(eventName){case"dblclick":this.onRowDblClick(mouseEvent);break;case"click":this.onRowClick(mouseEvent);break;case"touchstart":case"mousedown":this.onRowMouseDown(mouseEvent)}},RowCtrl2.prototype.createRowEvent=function(type,domEvent){return{type,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,event:domEvent}},RowCtrl2.prototype.createRowEventWithSource=function(type,domEvent){var event=this.createRowEvent(type,domEvent);return event.source=this,event},RowCtrl2.prototype.onRowDblClick=function(mouseEvent){if(!isStopPropagationForAgGrid(mouseEvent)){var agEvent=this.createRowEventWithSource(Events.EVENT_ROW_DOUBLE_CLICKED,mouseEvent);this.beans.eventService.dispatchEvent(agEvent)}},RowCtrl2.prototype.onRowMouseDown=function(mouseEvent){if(this.lastMouseDownOnDragger=isElementChildOfClass(mouseEvent.target,"ag-row-drag",3),this.isFullWidth()){var node=this.rowNode,columnModel=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:node.rowIndex,column:columnModel.getAllDisplayedColumns()[0],rowPinned:node.rowPinned,forceBrowserFocus:!0})}},RowCtrl2.prototype.onRowClick=function(mouseEvent){if(!(isStopPropagationForAgGrid(mouseEvent)||this.lastMouseDownOnDragger)){var agEvent=this.createRowEventWithSource(Events.EVENT_ROW_CLICKED,mouseEvent);this.beans.eventService.dispatchEvent(agEvent);var multiSelectKeyPressed=mouseEvent.ctrlKey||mouseEvent.metaKey,shiftKeyPressed=mouseEvent.shiftKey;if(!(this.beans.gridOptionsService.is("groupSelectsChildren")&&this.rowNode.group||!this.rowNode.selectable||this.rowNode.rowPinned||!this.beans.gridOptionsService.isRowSelection()||this.beans.gridOptionsService.is("suppressRowClickSelection"))){var multiSelectOnClick=this.beans.gridOptionsService.is("rowMultiSelectWithClick"),rowDeselectionWithCtrl=!this.beans.gridOptionsService.is("suppressRowDeselection"),source="rowClicked";if(this.rowNode.isSelected())multiSelectOnClick?this.rowNode.setSelectedParams({newValue:!1,event:mouseEvent,source}):multiSelectKeyPressed?rowDeselectionWithCtrl&&this.rowNode.setSelectedParams({newValue:!1,event:mouseEvent,source}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!shiftKeyPressed,rangeSelect:shiftKeyPressed,event:mouseEvent,source});else{var clearSelection=!multiSelectOnClick&&!multiSelectKeyPressed;this.rowNode.setSelectedParams({newValue:!0,clearSelection,rangeSelect:shiftKeyPressed,event:mouseEvent,source})}}}},RowCtrl2.prototype.setupDetailRowAutoHeight=function(eDetailGui){var _this=this;if(this.rowType===RowType$1.FullWidthDetail&&this.beans.gridOptionsService.is("detailRowAutoHeight")){var checkRowSizeFunc=__name(function(){var clientHeight=eDetailGui.clientHeight;if(null!=clientHeight&&clientHeight>0){var updateRowHeightFunc=__name(function(){_this.rowNode.setRowHeight(clientHeight),_this.beans.clientSideRowModel?_this.beans.clientSideRowModel.onRowHeightChanged():_this.beans.serverSideRowModel&&_this.beans.serverSideRowModel.onRowHeightChanged()},"updateRowHeightFunc");_this.beans.frameworkOverrides.setTimeout(updateRowHeightFunc,0)}},"checkRowSizeFunc"),resizeObserverDestroyFunc=this.beans.resizeObserverService.observeResize(eDetailGui,checkRowSizeFunc);this.addDestroyFunc(resizeObserverDestroyFunc),checkRowSizeFunc()}},RowCtrl2.prototype.createFullWidthParams=function(eRow,pinned){var _this=this;return{fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,eGridCell:eRow,eParentOfValue:eRow,pinned,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:function(rowDraggerElement,dragStartPixels,value,suppressVisibilityChange){return _this.addFullWidthRowDragging(rowDraggerElement,dragStartPixels,value,suppressVisibilityChange)}}},RowCtrl2.prototype.addFullWidthRowDragging=function(rowDraggerElement,dragStartPixels,value,suppressVisibilityChange){if(void 0===value&&(value=""),this.isFullWidth()){var rowDragComp=new RowDragComp(function(){return value},this.rowNode,void 0,rowDraggerElement,dragStartPixels,suppressVisibilityChange);this.createManagedBean(rowDragComp,this.beans.context)}},RowCtrl2.prototype.onUiLevelChanged=function(){var newLevel=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=newLevel){var classToAdd_1="ag-row-level-"+newLevel,classToRemove_1="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(function(gui){gui.rowComp.addOrRemoveCssClass(classToAdd_1,!0),gui.rowComp.addOrRemoveCssClass(classToRemove_1,!1)})}this.rowLevel=newLevel},RowCtrl2.prototype.isFirstRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()},RowCtrl2.prototype.isLastRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()},RowCtrl2.prototype.onModelUpdated=function(){this.refreshFirstAndLastRowStyles()},RowCtrl2.prototype.refreshFirstAndLastRowStyles=function(){var newFirst=this.isFirstRowOnPage(),newLast=this.isLastRowOnPage();this.firstRowOnPage!==newFirst&&(this.firstRowOnPage=newFirst,this.allRowGuis.forEach(function(gui){return gui.rowComp.addOrRemoveCssClass("ag-row-first",newFirst)})),this.lastRowOnPage!==newLast&&(this.lastRowOnPage=newLast,this.allRowGuis.forEach(function(gui){return gui.rowComp.addOrRemoveCssClass("ag-row-last",newLast)}))},RowCtrl2.prototype.stopEditing=function(cancel){var e_1,_a;if(void 0===cancel&&(cancel=!1),!this.stoppingRowEdit){var cellControls=this.getAllCellCtrls(),isRowEdit=this.editingRow;this.stoppingRowEdit=!0;var fireRowEditEvent=!1;try{for(var cellControls_1=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}(cellControls),cellControls_1_1=cellControls_1.next();!cellControls_1_1.done;cellControls_1_1=cellControls_1.next()){var valueChanged=cellControls_1_1.value.stopEditing(cancel);isRowEdit&&!cancel&&!fireRowEditEvent&&valueChanged&&(fireRowEditEvent=!0)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{cellControls_1_1&&!cellControls_1_1.done&&(_a=cellControls_1.return)&&_a.call(cellControls_1)}finally{if(e_1)throw e_1.error}}if(fireRowEditEvent){var event_1=this.createRowEvent(Events.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(event_1)}isRowEdit&&this.setEditingRow(!1),this.stoppingRowEdit=!1}},RowCtrl2.prototype.setInlineEditingCss=function(editing){this.allRowGuis.forEach(function(gui){gui.rowComp.addOrRemoveCssClass("ag-row-inline-editing",editing),gui.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!editing)})},RowCtrl2.prototype.setEditingRow=function(value){this.editingRow=value,this.allRowGuis.forEach(function(gui){return gui.rowComp.addOrRemoveCssClass("ag-row-editing",value)});var event=value?this.createRowEvent(Events.EVENT_ROW_EDITING_STARTED):this.createRowEvent(Events.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(event)},RowCtrl2.prototype.startRowEditing=function(key,charPress,sourceRenderedCell,event){(void 0===key&&(key=null),void 0===charPress&&(charPress=null),void 0===sourceRenderedCell&&(sourceRenderedCell=null),void 0===event&&(event=null),this.editingRow)||this.getAllCellCtrls().reduce(function(prev,cellCtrl){var cellStartedEdit=cellCtrl===sourceRenderedCell;return cellStartedEdit?cellCtrl.startEditing(key,charPress,cellStartedEdit,event):cellCtrl.startEditing(null,null,cellStartedEdit,event),!!prev||cellCtrl.isEditing()},!1)&&this.setEditingRow(!0)},RowCtrl2.prototype.getAllCellCtrls=function(){var res=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$j(arguments[i]));return ar}(this.centerCellCtrls.list,this.leftCellCtrls.list,this.rightCellCtrls.list);return res},RowCtrl2.prototype.postProcessClassesFromGridOptions=function(){var _this=this,cssClasses=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!cssClasses||!cssClasses.length||cssClasses.forEach(function(classStr){_this.allRowGuis.forEach(function(c){return c.rowComp.addOrRemoveCssClass(classStr,!0)})})},RowCtrl2.prototype.postProcessRowClassRules=function(){var _this=this;this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,function(className){_this.allRowGuis.forEach(function(gui){return gui.rowComp.addOrRemoveCssClass(className,!0)})},function(className){_this.allRowGuis.forEach(function(gui){return gui.rowComp.addOrRemoveCssClass(className,!1)})})},RowCtrl2.prototype.setStylesFromGridOptions=function(gui){var rowStyles=this.processStylesFromGridOptions();this.forEachGui(gui,function(gui2){return gui2.rowComp.setUserStyles(rowStyles)})},RowCtrl2.prototype.getPinnedForContainer=function(rowContainerType){return rowContainerType===RowContainerType.LEFT?"left":rowContainerType===RowContainerType.RIGHT?"right":null},RowCtrl2.prototype.getInitialRowClasses=function(rowContainerType){var pinned=this.getPinnedForContainer(rowContainerType),params={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[rowContainerType],rowIsEven:this.rowNode.rowIndex%2==0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned};return this.beans.rowCssClassCalculator.getInitialRowClasses(params)},RowCtrl2.prototype.processStylesFromGridOptions=function(){var rowStyle=this.beans.gridOptionsService.get("rowStyle");if(!rowStyle||"function"!=typeof rowStyle){var rowStyleFuncResult,rowStyleFunc=this.beans.gridOptionsService.getCallback("getRowStyle");if(rowStyleFunc)rowStyleFuncResult=rowStyleFunc({data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex});return Object.assign({},rowStyle,rowStyleFuncResult)}console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead")},RowCtrl2.prototype.onRowSelected=function(gui){var _this=this,selected=!!this.rowNode.isSelected();this.forEachGui(gui,function(gui2){gui2.rowComp.addOrRemoveCssClass("ag-row-selected",selected),setAriaSelected(gui2.element,!!selected||void 0);var ariaLabel=_this.createAriaLabel();setAriaLabel(gui2.element,ariaLabel??"")})},RowCtrl2.prototype.createAriaLabel=function(){var selected=this.rowNode.isSelected();if(!selected||!this.beans.gridOptionsService.is("suppressRowDeselection"))return this.beans.localeService.getLocaleTextFunc()(selected?"ariaRowDeselect":"ariaRowSelect","Press SPACE to "+(selected?"deselect":"select")+" this row.")},RowCtrl2.prototype.isUseAnimationFrameForCreate=function(){return this.useAnimationFrameForCreate},RowCtrl2.prototype.addHoverFunctionality=function(eRow){var _this=this;this.active&&(this.addManagedListener(eRow,"mouseenter",function(){return _this.rowNode.onMouseEnter()}),this.addManagedListener(eRow,"mouseleave",function(){return _this.rowNode.onMouseLeave()}),this.addManagedListener(this.rowNode,RowNode.EVENT_MOUSE_ENTER,function(){!_this.beans.dragService.isDragging()&&!_this.beans.gridOptionsService.is("suppressRowHoverHighlight")&&eRow.classList.add("ag-row-hover")}),this.addManagedListener(this.rowNode,RowNode.EVENT_MOUSE_LEAVE,function(){eRow.classList.remove("ag-row-hover")}))},RowCtrl2.prototype.roundRowTopToBounds=function(rowTop){var range=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),minPixel=this.applyPaginationOffset(range.top,!0)-100,maxPixel=this.applyPaginationOffset(range.bottom,!0)+100;return Math.min(Math.max(minPixel,rowTop),maxPixel)},RowCtrl2.prototype.getFrameworkOverrides=function(){return this.beans.frameworkOverrides},RowCtrl2.prototype.forEachGui=function(gui,callback){(gui?[gui]:this.allRowGuis).forEach(callback)},RowCtrl2.prototype.onRowHeightChanged=function(gui){if(null!=this.rowNode.rowHeight){var rowHeight=this.rowNode.rowHeight,defaultRowHeight=this.beans.environment.getDefaultRowHeight(),heightFromFunc=this.beans.gridOptionsService.isGetRowHeightFunction()?this.beans.gridOptionsService.getRowHeightForNode(this.rowNode).height:void 0,lineHeight=heightFromFunc?Math.min(defaultRowHeight,heightFromFunc)-2+"px":void 0;this.forEachGui(gui,function(gui2){gui2.element.style.height=rowHeight+"px",lineHeight&&gui2.element.style.setProperty("--ag-line-height",lineHeight)})}},RowCtrl2.prototype.addEventListener=function(eventType,listener){_super.prototype.addEventListener.call(this,eventType,listener)},RowCtrl2.prototype.removeEventListener=function(eventType,listener){_super.prototype.removeEventListener.call(this,eventType,listener)},RowCtrl2.prototype.destroyFirstPass=function(){this.active=!1,this.setupRemoveAnimation();var event=this.createRowEvent(Events.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(event),this.beans.eventService.dispatchEvent(event),_super.prototype.destroy.call(this)},RowCtrl2.prototype.setupRemoveAnimation=function(){if(!this.isSticky())if(null!=this.rowNode.rowTop){var rowTop=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(rowTop)}else this.allRowGuis.forEach(function(gui){return gui.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0)})},RowCtrl2.prototype.destroySecondPass=function(){this.allRowGuis.length=0;var destroyCellCtrls=__name(function(ctrls){return ctrls.list.forEach(function(c){return c.destroy()}),{list:[],map:{}}},"destroyCellCtrls");this.centerCellCtrls=destroyCellCtrls(this.centerCellCtrls),this.leftCellCtrls=destroyCellCtrls(this.leftCellCtrls),this.rightCellCtrls=destroyCellCtrls(this.rightCellCtrls)},RowCtrl2.prototype.setFocusedClasses=function(gui){var _this=this;this.forEachGui(gui,function(gui2){gui2.rowComp.addOrRemoveCssClass("ag-row-focus",_this.rowFocused),gui2.rowComp.addOrRemoveCssClass("ag-row-no-focus",!_this.rowFocused)})},RowCtrl2.prototype.onCellFocused=function(){this.onCellFocusChanged()},RowCtrl2.prototype.onCellFocusCleared=function(){this.onCellFocusChanged()},RowCtrl2.prototype.onCellFocusChanged=function(){var rowFocused=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);rowFocused!==this.rowFocused&&(this.rowFocused=rowFocused,this.setFocusedClasses()),!rowFocused&&this.editingRow&&this.stopEditing(!1)},RowCtrl2.prototype.onPaginationChanged=function(){var currentPage=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==currentPage&&(this.paginationPage=currentPage,this.onTopChanged()),this.refreshFirstAndLastRowStyles()},RowCtrl2.prototype.onTopChanged=function(){this.setRowTop(this.rowNode.rowTop)},RowCtrl2.prototype.onPaginationPixelOffsetChanged=function(){this.onTopChanged()},RowCtrl2.prototype.applyPaginationOffset=function(topPx,reverse){return void 0===reverse&&(reverse=!1),this.rowNode.isRowPinned()?topPx:topPx+this.beans.paginationProxy.getPixelOffset()*(reverse?1:-1)},RowCtrl2.prototype.setRowTop=function(pixels){if(!this.printLayout&&exists(pixels)){var afterPaginationPixels=this.applyPaginationOffset(pixels),topPx=(this.rowNode.isRowPinned()?afterPaginationPixels:this.beans.rowContainerHeightService.getRealPixelPosition(afterPaginationPixels))+"px";this.setRowTopStyle(topPx)}},RowCtrl2.prototype.getInitialRowTop=function(rowContainerType){return this.beans.gridOptionsService.is("suppressRowTransform")?this.getInitialRowTopShared(rowContainerType):void 0},RowCtrl2.prototype.getInitialTransform=function(rowContainerType){return this.beans.gridOptionsService.is("suppressRowTransform")?void 0:"translateY("+this.getInitialRowTopShared(rowContainerType)+")"},RowCtrl2.prototype.getInitialRowTopShared=function(rowContainerType){if(this.printLayout)return"";var rowTop;if(this.isSticky())rowTop=this.rowNode.stickyRowTop;else{var pixels=this.slideInAnimation[rowContainerType]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,afterPaginationPixels=this.applyPaginationOffset(pixels);rowTop=this.rowNode.isRowPinned()?afterPaginationPixels:this.beans.rowContainerHeightService.getRealPixelPosition(afterPaginationPixels)}return rowTop+"px"},RowCtrl2.prototype.setRowTopStyle=function(topPx){var suppressRowTransform=this.beans.gridOptionsService.is("suppressRowTransform");this.allRowGuis.forEach(function(gui){return suppressRowTransform?gui.rowComp.setTop(topPx):gui.rowComp.setTransform("translateY("+topPx+")")})},RowCtrl2.prototype.getRowNode=function(){return this.rowNode},RowCtrl2.prototype.getCellCtrl=function(column){var res=null;return this.getAllCellCtrls().forEach(function(cellCtrl){cellCtrl.getColumn()==column&&(res=cellCtrl)}),null!=res||this.getAllCellCtrls().forEach(function(cellCtrl){cellCtrl.getColSpanningList().indexOf(column)>=0&&(res=cellCtrl)}),res},RowCtrl2.prototype.onRowIndexChanged=function(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())},RowCtrl2.prototype.updateRowIndexes=function(gui){var rowIndexStr=this.rowNode.getRowIndexString(),headerRowCount=this.beans.headerNavigationService.getHeaderRowCount(),rowIsEven=this.rowNode.rowIndex%2==0,ariaRowIndex=headerRowCount+this.rowNode.rowIndex+1;this.forEachGui(gui,function(c){c.rowComp.setRowIndex(rowIndexStr),c.rowComp.addOrRemoveCssClass("ag-row-even",rowIsEven),c.rowComp.addOrRemoveCssClass("ag-row-odd",!rowIsEven),setAriaRowIndex(c.element,ariaRowIndex)})},RowCtrl2.prototype.getPinnedLeftRowElement=function(){return this.leftGui?this.leftGui.element:void 0},RowCtrl2.prototype.getPinnedRightRowElement=function(){return this.rightGui?this.rightGui.element:void 0},RowCtrl2.prototype.getBodyRowElement=function(){return this.centerGui?this.centerGui.element:void 0},RowCtrl2.prototype.getFullWidthRowElement=function(){return this.fullWidthGui?this.fullWidthGui.element:void 0},RowCtrl2.DOM_DATA_KEY_ROW_CTRL="renderedRow",RowCtrl2}(BeanStub),__extends$1S=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1L=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowContainerEventsFeature=function(_super){function RowContainerEventsFeature2(element){var _this=_super.call(this)||this;return _this.element=element,_this}return __extends$1S(RowContainerEventsFeature2,_super),__name(RowContainerEventsFeature2,"RowContainerEventsFeature"),RowContainerEventsFeature2.prototype.postConstruct=function(){this.addMouseListeners(),this.mockContextMenuForIPad(),this.addKeyboardEvents()},RowContainerEventsFeature2.prototype.addKeyboardEvents=function(){var _this=this;["keydown","keypress"].forEach(function(eventName){var listener=_this.processKeyboardEvent.bind(_this,eventName);_this.addManagedListener(_this.element,eventName,listener)})},RowContainerEventsFeature2.prototype.addMouseListeners=function(){var _this=this;["dblclick","contextmenu","mouseover","mouseout","click",isEventSupported("touchstart")?"touchstart":"mousedown"].forEach(function(eventName){var listener=_this.processMouseEvent.bind(_this,eventName);_this.addManagedListener(_this.element,eventName,listener)})},RowContainerEventsFeature2.prototype.processMouseEvent=function(eventName,mouseEvent){if(this.mouseEventService.isEventFromThisGrid(mouseEvent)&&!isStopPropagationForAgGrid(mouseEvent)){var rowComp=this.getRowForEvent(mouseEvent),cellCtrl=this.mouseEventService.getRenderedCellForEvent(mouseEvent);"contextmenu"===eventName?this.handleContextMenuMouseEvent(mouseEvent,null,rowComp,cellCtrl):(cellCtrl&&cellCtrl.onMouseEvent(eventName,mouseEvent),rowComp&&rowComp.onMouseEvent(eventName,mouseEvent))}},RowContainerEventsFeature2.prototype.mockContextMenuForIPad=function(){var _this=this;if(isIOSUserAgent()){var touchListener=new TouchListener(this.element),longTapListener=__name(function(event){var rowComp=_this.getRowForEvent(event.touchEvent),cellComp=_this.mouseEventService.getRenderedCellForEvent(event.touchEvent);_this.handleContextMenuMouseEvent(null,event.touchEvent,rowComp,cellComp)},"longTapListener");this.addManagedListener(touchListener,TouchListener.EVENT_LONG_TAP,longTapListener),this.addDestroyFunc(function(){return touchListener.destroy()})}},RowContainerEventsFeature2.prototype.getRowForEvent=function(event){for(var sourceElement=event.target;sourceElement;){var rowCon=this.gridOptionsService.getDomData(sourceElement,RowCtrl.DOM_DATA_KEY_ROW_CTRL);if(rowCon)return rowCon;sourceElement=sourceElement.parentElement}return null},RowContainerEventsFeature2.prototype.handleContextMenuMouseEvent=function(mouseEvent,touchEvent,rowComp,cellCtrl){var rowNode=rowComp?rowComp.getRowNode():null,column=cellCtrl?cellCtrl.getColumn():null,value=null;if(column){var event_1=mouseEvent||touchEvent;cellCtrl.dispatchCellContextMenuEvent(event_1),value=this.valueService.getValue(column,rowNode)}var gridBodyCon=this.ctrlsService.getGridBodyCtrl(),anchorToElement=cellCtrl?cellCtrl.getGui():gridBodyCon.getGridBodyElement();this.contextMenuFactory&&this.contextMenuFactory.onContextMenu(mouseEvent,touchEvent,rowNode,column,value,anchorToElement)},RowContainerEventsFeature2.prototype.processKeyboardEvent=function(eventName,keyboardEvent){var cellComp=getCtrlForEvent(this.gridOptionsService,keyboardEvent,CellCtrl.DOM_DATA_KEY_CELL_CTRL),rowComp=getCtrlForEvent(this.gridOptionsService,keyboardEvent,RowCtrl.DOM_DATA_KEY_ROW_CTRL);keyboardEvent.defaultPrevented||(cellComp?this.processCellKeyboardEvent(cellComp,eventName,keyboardEvent):rowComp&&rowComp.isFullWidth()&&this.processFullWidthRowKeyboardEvent(rowComp,eventName,keyboardEvent))},RowContainerEventsFeature2.prototype.processCellKeyboardEvent=function(cellCtrl,eventName,keyboardEvent){var rowNode=cellCtrl.getRowNode(),column=cellCtrl.getColumn(),editing=cellCtrl.isEditing();if(!isUserSuppressingKeyboardEvent(this.gridOptionsService,keyboardEvent,rowNode,column,editing))switch(eventName){case"keydown":!editing&&this.navigationService.handlePageScrollingKey(keyboardEvent)||cellCtrl.onKeyDown(keyboardEvent),this.doGridOperations(keyboardEvent,cellCtrl.isEditing());break;case"keypress":cellCtrl.onKeyPress(keyboardEvent)}if("keydown"===eventName){var cellKeyDownEvent=cellCtrl.createEvent(keyboardEvent,Events.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(cellKeyDownEvent)}if("keypress"===eventName){var cellKeyPressEvent=cellCtrl.createEvent(keyboardEvent,Events.EVENT_CELL_KEY_PRESS);this.eventService.dispatchEvent(cellKeyPressEvent)}},RowContainerEventsFeature2.prototype.processFullWidthRowKeyboardEvent=function(rowComp,eventName,keyboardEvent){var rowNode=rowComp.getRowNode(),focusedCell=this.focusService.getFocusedCell(),column=focusedCell&&focusedCell.column;if(!isUserSuppressingKeyboardEvent(this.gridOptionsService,keyboardEvent,rowNode,column,!1)){var key=keyboardEvent.key;if("keydown"===eventName)switch(key){case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:this.navigationService.handlePageScrollingKey(keyboardEvent);break;case KeyCode.UP:case KeyCode.DOWN:rowComp.onKeyboardNavigate(keyboardEvent);break;case KeyCode.TAB:rowComp.onTabKeyDown(keyboardEvent)}}if("keydown"===eventName){var cellKeyDownEvent=rowComp.createRowEvent(Events.EVENT_CELL_KEY_DOWN,keyboardEvent);this.eventService.dispatchEvent(cellKeyDownEvent)}if("keypress"===eventName){var cellKeyPressEvent=rowComp.createRowEvent(Events.EVENT_CELL_KEY_PRESS,keyboardEvent);this.eventService.dispatchEvent(cellKeyPressEvent)}},RowContainerEventsFeature2.prototype.doGridOperations=function(keyboardEvent,editing){if((keyboardEvent.ctrlKey||keyboardEvent.metaKey)&&!editing&&this.mouseEventService.isEventFromThisGrid(keyboardEvent)){var keyCode=normaliseQwertyAzerty(keyboardEvent);if(keyCode===KeyCode.A)return this.onCtrlAndA(keyboardEvent);if(keyCode===KeyCode.C)return this.onCtrlAndC(keyboardEvent);if(keyCode===KeyCode.X)return this.onCtrlAndX(keyboardEvent);if(keyCode===KeyCode.V)return this.onCtrlAndV();if(keyCode===KeyCode.D)return this.onCtrlAndD(keyboardEvent);if(keyCode===KeyCode.Z)return this.onCtrlAndZ(keyboardEvent);if(keyCode===KeyCode.Y)return this.onCtrlAndY()}},RowContainerEventsFeature2.prototype.onCtrlAndA=function(event){var pinnedRowModel=this.pinnedRowModel,paginationProxy=this.paginationProxy,rangeService=this.rangeService;if(rangeService&&paginationProxy.isRowsToRender()){var _b=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}([pinnedRowModel.isEmpty("top"),pinnedRowModel.isEmpty("bottom")],2),floatingStart=_b[0]?null:"top",floatingEnd=void 0,rowEnd=void 0;_b[1]?(floatingEnd=null,rowEnd=this.paginationProxy.getRowCount()-1):(floatingEnd="bottom",rowEnd=pinnedRowModel.getPinnedBottomRowData().length-1);var allDisplayedColumns=this.columnModel.getAllDisplayedColumns();if(missingOrEmpty(allDisplayedColumns))return;rangeService.setCellRange({rowStartIndex:0,rowStartPinned:floatingStart,rowEndIndex:rowEnd,rowEndPinned:floatingEnd,columnStart:allDisplayedColumns[0],columnEnd:last(allDisplayedColumns)})}event.preventDefault()},RowContainerEventsFeature2.prototype.onCtrlAndC=function(event){!this.clipboardService||this.gridOptionsService.is("enableCellTextSelection")||(this.clipboardService.copyToClipboard(),event.preventDefault())},RowContainerEventsFeature2.prototype.onCtrlAndX=function(event){!this.clipboardService||this.gridOptionsService.is("enableCellTextSelection")||(this.clipboardService.cutToClipboard(),event.preventDefault())},RowContainerEventsFeature2.prototype.onCtrlAndV=function(){ModuleRegistry.isRegistered(ModuleNames.ClipboardModule)&&!this.gridOptionsService.is("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()},RowContainerEventsFeature2.prototype.onCtrlAndD=function(event){ModuleRegistry.isRegistered(ModuleNames.ClipboardModule)&&!this.gridOptionsService.is("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),event.preventDefault()},RowContainerEventsFeature2.prototype.onCtrlAndZ=function(event){this.gridOptionsService.is("undoRedoCellEditing")&&(event.preventDefault(),event.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))},RowContainerEventsFeature2.prototype.onCtrlAndY=function(){this.undoRedoService.redo("ui")},__decorate$1L([Autowired("mouseEventService")],RowContainerEventsFeature2.prototype,"mouseEventService",void 0),__decorate$1L([Autowired("valueService")],RowContainerEventsFeature2.prototype,"valueService",void 0),__decorate$1L([Optional("contextMenuFactory")],RowContainerEventsFeature2.prototype,"contextMenuFactory",void 0),__decorate$1L([Autowired("ctrlsService")],RowContainerEventsFeature2.prototype,"ctrlsService",void 0),__decorate$1L([Autowired("navigationService")],RowContainerEventsFeature2.prototype,"navigationService",void 0),__decorate$1L([Autowired("focusService")],RowContainerEventsFeature2.prototype,"focusService",void 0),__decorate$1L([Autowired("undoRedoService")],RowContainerEventsFeature2.prototype,"undoRedoService",void 0),__decorate$1L([Autowired("columnModel")],RowContainerEventsFeature2.prototype,"columnModel",void 0),__decorate$1L([Autowired("paginationProxy")],RowContainerEventsFeature2.prototype,"paginationProxy",void 0),__decorate$1L([Autowired("pinnedRowModel")],RowContainerEventsFeature2.prototype,"pinnedRowModel",void 0),__decorate$1L([Optional("rangeService")],RowContainerEventsFeature2.prototype,"rangeService",void 0),__decorate$1L([Optional("clipboardService")],RowContainerEventsFeature2.prototype,"clipboardService",void 0),__decorate$1L([PostConstruct],RowContainerEventsFeature2.prototype,"postConstruct",null),RowContainerEventsFeature2}(BeanStub),__extends$1R=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1K=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ViewportSizeFeature=function(_super){function ViewportSizeFeature2(centerContainerCtrl){var _this=_super.call(this)||this;return _this.centerContainerCtrl=centerContainerCtrl,_this}return __extends$1R(ViewportSizeFeature2,_super),__name(ViewportSizeFeature2,"ViewportSizeFeature"),ViewportSizeFeature2.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady(function(){_this.gridBodyCtrl=_this.ctrlsService.getGridBodyCtrl(),_this.listenForResize()}),this.addManagedListener(this.eventService,Events.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this))},ViewportSizeFeature2.prototype.listenForResize=function(){var _this=this,listener=__name(function(){return _this.onCenterViewportResized()},"listener");this.centerContainerCtrl.registerViewportResizeListener(listener),this.gridBodyCtrl.registerBodyViewportResizeListener(listener)},ViewportSizeFeature2.prototype.onScrollbarWidthChanged=function(){this.checkViewportAndScrolls()},ViewportSizeFeature2.prototype.onCenterViewportResized=function(){if(this.centerContainerCtrl.isViewportVisible()){this.checkViewportAndScrolls();var newWidth=this.centerContainerCtrl.getCenterWidth();newWidth!==this.centerWidth&&(this.centerWidth=newWidth,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0},ViewportSizeFeature2.prototype.checkViewportAndScrolls=function(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()},ViewportSizeFeature2.prototype.getBodyHeight=function(){return this.bodyHeight},ViewportSizeFeature2.prototype.checkBodyHeight=function(){var bodyHeight=getInnerHeight(this.gridBodyCtrl.getBodyViewportElement());if(this.bodyHeight!==bodyHeight){this.bodyHeight=bodyHeight;var event_1={type:Events.EVENT_BODY_HEIGHT_CHANGED};this.eventService.dispatchEvent(event_1)}},ViewportSizeFeature2.prototype.updateScrollVisibleService=function(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)},ViewportSizeFeature2.prototype.updateScrollVisibleServiceImpl=function(){var params={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(params),this.gridBodyCtrl.setVerticalScrollPaddingVisible(params.verticalScrollShowing)},ViewportSizeFeature2.prototype.isHorizontalScrollShowing=function(){return this.gridOptionsService.is("alwaysShowHorizontalScroll")||this.centerContainerCtrl.isViewportHScrollShowing()},ViewportSizeFeature2.prototype.onHorizontalViewportChanged=function(){var scrollWidth=this.centerContainerCtrl.getCenterWidth(),scrollPosition=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(scrollWidth,scrollPosition)},__decorate$1K([Autowired("ctrlsService")],ViewportSizeFeature2.prototype,"ctrlsService",void 0),__decorate$1K([Autowired("columnModel")],ViewportSizeFeature2.prototype,"columnModel",void 0),__decorate$1K([Autowired("scrollVisibleService")],ViewportSizeFeature2.prototype,"scrollVisibleService",void 0),__decorate$1K([PostConstruct],ViewportSizeFeature2.prototype,"postConstruct",null),ViewportSizeFeature2}(BeanStub),__extends$1Q=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1J=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SetPinnedLeftWidthFeature=function(_super){function SetPinnedLeftWidthFeature2(element){var _this=_super.call(this)||this;return _this.element=element,_this}return __extends$1Q(SetPinnedLeftWidthFeature2,_super),__name(SetPinnedLeftWidthFeature2,"SetPinnedLeftWidthFeature"),SetPinnedLeftWidthFeature2.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))},SetPinnedLeftWidthFeature2.prototype.onPinnedLeftWidthChanged=function(){var leftWidth=this.pinnedWidthService.getPinnedLeftWidth(),displayed=leftWidth>0;setDisplayed(this.element,displayed),setFixedWidth(this.element,leftWidth)},SetPinnedLeftWidthFeature2.prototype.getWidth=function(){return this.pinnedWidthService.getPinnedLeftWidth()},__decorate$1J([Autowired("pinnedWidthService")],SetPinnedLeftWidthFeature2.prototype,"pinnedWidthService",void 0),__decorate$1J([PostConstruct],SetPinnedLeftWidthFeature2.prototype,"postConstruct",null),SetPinnedLeftWidthFeature2}(BeanStub),__extends$1P=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1I=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SetPinnedRightWidthFeature=function(_super){function SetPinnedRightWidthFeature2(element){var _this=_super.call(this)||this;return _this.element=element,_this}return __extends$1P(SetPinnedRightWidthFeature2,_super),__name(SetPinnedRightWidthFeature2,"SetPinnedRightWidthFeature"),SetPinnedRightWidthFeature2.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))},SetPinnedRightWidthFeature2.prototype.onPinnedRightWidthChanged=function(){var rightWidth=this.pinnedWidthService.getPinnedRightWidth(),displayed=rightWidth>0;setDisplayed(this.element,displayed),setFixedWidth(this.element,rightWidth)},SetPinnedRightWidthFeature2.prototype.getWidth=function(){return this.pinnedWidthService.getPinnedRightWidth()},__decorate$1I([Autowired("pinnedWidthService")],SetPinnedRightWidthFeature2.prototype,"pinnedWidthService",void 0),__decorate$1I([PostConstruct],SetPinnedRightWidthFeature2.prototype,"postConstruct",null),SetPinnedRightWidthFeature2}(BeanStub),__extends$1O=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1H=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SetHeightFeature=function(_super){function SetHeightFeature2(eContainer,eWrapper){var _this=_super.call(this)||this;return _this.eContainer=eContainer,_this.eWrapper=eWrapper,_this}return __extends$1O(SetHeightFeature2,_super),__name(SetHeightFeature2,"SetHeightFeature"),SetHeightFeature2.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))},SetHeightFeature2.prototype.onHeightChanged=function(){var height=this.maxDivHeightScaler.getUiContainerHeight(),heightString=null!=height?height+"px":"";this.eContainer.style.height=heightString,this.eWrapper&&(this.eWrapper.style.height=heightString)},__decorate$1H([Autowired("rowContainerHeightService")],SetHeightFeature2.prototype,"maxDivHeightScaler",void 0),__decorate$1H([PostConstruct],SetHeightFeature2.prototype,"postConstruct",null),SetHeightFeature2}(BeanStub),__extends$1N=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1G=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},DragListenerFeature=function(_super){function DragListenerFeature2(eContainer){var _this=_super.call(this)||this;return _this.eContainer=eContainer,_this}return __extends$1N(DragListenerFeature2,_super),__name(DragListenerFeature2,"DragListenerFeature"),DragListenerFeature2.prototype.postConstruct=function(){var _this=this;if(this.gridOptionsService.isEnableRangeSelection()&&!missing(this.rangeService)){var params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)};this.dragService.addDragSource(params),this.addDestroyFunc(function(){return _this.dragService.removeDragSource(params)})}},__decorate$1G([Optional("rangeService")],DragListenerFeature2.prototype,"rangeService",void 0),__decorate$1G([Autowired("dragService")],DragListenerFeature2.prototype,"dragService",void 0),__decorate$1G([PostConstruct],DragListenerFeature2.prototype,"postConstruct",null),DragListenerFeature2}(BeanStub),__extends$1M=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1F=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},CenterWidthFeature=function(_super){function CenterWidthFeature2(callback){var _this=_super.call(this)||this;return _this.callback=callback,_this}return __extends$1M(CenterWidthFeature2,_super),__name(CenterWidthFeature2,"CenterWidthFeature"),CenterWidthFeature2.prototype.postConstruct=function(){var listener=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",listener),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,listener),this.setWidth()},CenterWidthFeature2.prototype.setWidth=function(){var columnModel=this.columnModel,printLayout=this.gridOptionsService.isDomLayout("print"),centerWidth=columnModel.getBodyContainerWidth(),leftWidth=columnModel.getDisplayedColumnsLeftWidth(),rightWidth=columnModel.getDisplayedColumnsRightWidth(),totalWidth=printLayout?centerWidth+leftWidth+rightWidth:centerWidth;this.callback(totalWidth)},__decorate$1F([Autowired("columnModel")],CenterWidthFeature2.prototype,"columnModel",void 0),__decorate$1F([PostConstruct],CenterWidthFeature2.prototype,"postConstruct",null),CenterWidthFeature2}(BeanStub),__extends$1L=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1E=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$h=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};function getRowContainerTypeForName(name){switch(name){case RowContainerName.CENTER:case RowContainerName.TOP_CENTER:case RowContainerName.STICKY_TOP_CENTER:case RowContainerName.BOTTOM_CENTER:return RowContainerType.CENTER;case RowContainerName.LEFT:case RowContainerName.TOP_LEFT:case RowContainerName.STICKY_TOP_LEFT:case RowContainerName.BOTTOM_LEFT:return RowContainerType.LEFT;case RowContainerName.RIGHT:case RowContainerName.TOP_RIGHT:case RowContainerName.STICKY_TOP_RIGHT:case RowContainerName.BOTTOM_RIGHT:return RowContainerType.RIGHT;case RowContainerName.FULL_WIDTH:case RowContainerName.TOP_FULL_WIDTH:case RowContainerName.STICKY_TOP_FULL_WIDTH:case RowContainerName.BOTTOM_FULL_WIDTH:return RowContainerType.FULL_WIDTH;default:throw Error("Invalid Row Container Type")}}(RowContainerName2=RowContainerName||(RowContainerName={})).LEFT="left",RowContainerName2.RIGHT="right",RowContainerName2.CENTER="center",RowContainerName2.FULL_WIDTH="fullWidth",RowContainerName2.TOP_LEFT="topLeft",RowContainerName2.TOP_RIGHT="topRight",RowContainerName2.TOP_CENTER="topCenter",RowContainerName2.TOP_FULL_WIDTH="topFullWidth",RowContainerName2.STICKY_TOP_LEFT="stickyTopLeft",RowContainerName2.STICKY_TOP_RIGHT="stickyTopRight",RowContainerName2.STICKY_TOP_CENTER="stickyTopCenter",RowContainerName2.STICKY_TOP_FULL_WIDTH="stickyTopFullWidth",RowContainerName2.BOTTOM_LEFT="bottomLeft",RowContainerName2.BOTTOM_RIGHT="bottomRight",RowContainerName2.BOTTOM_CENTER="bottomCenter",RowContainerName2.BOTTOM_FULL_WIDTH="bottomFullWidth",(RowContainerType2=RowContainerType||(RowContainerType={})).LEFT="left",RowContainerType2.RIGHT="right",RowContainerType2.CENTER="center",RowContainerType2.FULL_WIDTH="fullWidth",__name(getRowContainerTypeForName,"getRowContainerTypeForName");var ContainerCssClasses=convertToMap([[RowContainerName.CENTER,"ag-center-cols-container"],[RowContainerName.LEFT,"ag-pinned-left-cols-container"],[RowContainerName.RIGHT,"ag-pinned-right-cols-container"],[RowContainerName.FULL_WIDTH,"ag-full-width-container"],[RowContainerName.TOP_CENTER,"ag-floating-top-container"],[RowContainerName.TOP_LEFT,"ag-pinned-left-floating-top"],[RowContainerName.TOP_RIGHT,"ag-pinned-right-floating-top"],[RowContainerName.TOP_FULL_WIDTH,"ag-floating-top-full-width-container"],[RowContainerName.STICKY_TOP_CENTER,"ag-sticky-top-container"],[RowContainerName.STICKY_TOP_LEFT,"ag-pinned-left-sticky-top"],[RowContainerName.STICKY_TOP_RIGHT,"ag-pinned-right-sticky-top"],[RowContainerName.STICKY_TOP_FULL_WIDTH,"ag-sticky-top-full-width-container"],[RowContainerName.BOTTOM_CENTER,"ag-floating-bottom-container"],[RowContainerName.BOTTOM_LEFT,"ag-pinned-left-floating-bottom"],[RowContainerName.BOTTOM_RIGHT,"ag-pinned-right-floating-bottom"],[RowContainerName.BOTTOM_FULL_WIDTH,"ag-floating-bottom-full-width-container"]]),ViewportCssClasses=convertToMap([[RowContainerName.CENTER,"ag-center-cols-viewport"],[RowContainerName.TOP_CENTER,"ag-floating-top-viewport"],[RowContainerName.STICKY_TOP_CENTER,"ag-sticky-top-viewport"],[RowContainerName.BOTTOM_CENTER,"ag-floating-bottom-viewport"]]),WrapperCssClasses=convertToMap([[RowContainerName.CENTER,"ag-center-cols-clipper"]]),RowContainerCtrl=function(_super){function RowContainerCtrl2(name){var _this=_super.call(this)||this;return _this.visible=!0,_this.name=name,_this}return __extends$1L(RowContainerCtrl2,_super),__name(RowContainerCtrl2,"RowContainerCtrl"),RowContainerCtrl2.getRowContainerCssClasses=function(name){return{container:ContainerCssClasses.get(name),viewport:ViewportCssClasses.get(name),wrapper:WrapperCssClasses.get(name)}},RowContainerCtrl2.getPinned=function(name){switch(name){case RowContainerName.BOTTOM_LEFT:case RowContainerName.TOP_LEFT:case RowContainerName.STICKY_TOP_LEFT:case RowContainerName.LEFT:return"left";case RowContainerName.BOTTOM_RIGHT:case RowContainerName.TOP_RIGHT:case RowContainerName.STICKY_TOP_RIGHT:case RowContainerName.RIGHT:return"right";default:return null}},RowContainerCtrl2.prototype.postConstruct=function(){var _this=this;this.enableRtl=this.gridOptionsService.is("enableRtl"),this.embedFullWidthRows=this.gridOptionsService.is("embedFullWidthRows"),this.forContainers([RowContainerName.CENTER],function(){return _this.viewportSizeFeature=_this.createManagedBean(new ViewportSizeFeature(_this))})},RowContainerCtrl2.prototype.registerWithCtrlsService=function(){switch(this.name){case RowContainerName.CENTER:this.ctrlsService.registerCenterRowContainerCtrl(this);break;case RowContainerName.LEFT:this.ctrlsService.registerLeftRowContainerCtrl(this);break;case RowContainerName.RIGHT:this.ctrlsService.registerRightRowContainerCtrl(this);break;case RowContainerName.TOP_CENTER:this.ctrlsService.registerTopCenterRowContainerCtrl(this);break;case RowContainerName.TOP_LEFT:this.ctrlsService.registerTopLeftRowContainerCon(this);break;case RowContainerName.TOP_RIGHT:this.ctrlsService.registerTopRightRowContainerCtrl(this);break;case RowContainerName.STICKY_TOP_CENTER:this.ctrlsService.registerStickyTopCenterRowContainerCtrl(this);break;case RowContainerName.STICKY_TOP_LEFT:this.ctrlsService.registerStickyTopLeftRowContainerCon(this);break;case RowContainerName.STICKY_TOP_RIGHT:this.ctrlsService.registerStickyTopRightRowContainerCtrl(this);break;case RowContainerName.BOTTOM_CENTER:this.ctrlsService.registerBottomCenterRowContainerCtrl(this);break;case RowContainerName.BOTTOM_LEFT:this.ctrlsService.registerBottomLeftRowContainerCtrl(this);break;case RowContainerName.BOTTOM_RIGHT:this.ctrlsService.registerBottomRightRowContainerCtrl(this)}},RowContainerCtrl2.prototype.forContainers=function(names,callback){names.indexOf(this.name)>=0&&callback()},RowContainerCtrl2.prototype.getContainerElement=function(){return this.eContainer},RowContainerCtrl2.prototype.getViewportSizeFeature=function(){return this.viewportSizeFeature},RowContainerCtrl2.prototype.setComp=function(view,eContainer,eViewport,eWrapper){var _this=this;this.comp=view,this.eContainer=eContainer,this.eViewport=eViewport,this.eWrapper=eWrapper,this.createManagedBean(new RowContainerEventsFeature(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();var allTopNoFW=[RowContainerName.TOP_CENTER,RowContainerName.TOP_LEFT,RowContainerName.TOP_RIGHT],allStickyTopNoFW=[RowContainerName.STICKY_TOP_CENTER,RowContainerName.STICKY_TOP_LEFT,RowContainerName.STICKY_TOP_RIGHT],allNoFW=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$h(arguments[i]));return ar}(allTopNoFW,[RowContainerName.BOTTOM_CENTER,RowContainerName.BOTTOM_LEFT,RowContainerName.BOTTOM_RIGHT],[RowContainerName.CENTER,RowContainerName.LEFT,RowContainerName.RIGHT],allStickyTopNoFW),allMiddle=[RowContainerName.CENTER,RowContainerName.LEFT,RowContainerName.RIGHT,RowContainerName.FULL_WIDTH],allCenter=[RowContainerName.CENTER,RowContainerName.TOP_CENTER,RowContainerName.STICKY_TOP_CENTER,RowContainerName.BOTTOM_CENTER],allLeft=[RowContainerName.LEFT,RowContainerName.BOTTOM_LEFT,RowContainerName.TOP_LEFT,RowContainerName.STICKY_TOP_LEFT],allRight=[RowContainerName.RIGHT,RowContainerName.BOTTOM_RIGHT,RowContainerName.TOP_RIGHT,RowContainerName.STICKY_TOP_RIGHT];this.forContainers(allLeft,function(){_this.pinnedWidthFeature=_this.createManagedBean(new SetPinnedLeftWidthFeature(_this.eContainer)),_this.addManagedListener(_this.eventService,Events.EVENT_LEFT_PINNED_WIDTH_CHANGED,function(){return _this.onPinnedWidthChanged()})}),this.forContainers(allRight,function(){_this.pinnedWidthFeature=_this.createManagedBean(new SetPinnedRightWidthFeature(_this.eContainer)),_this.addManagedListener(_this.eventService,Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED,function(){return _this.onPinnedWidthChanged()})}),this.forContainers(allMiddle,function(){return _this.createManagedBean(new SetHeightFeature(_this.eContainer,_this.eWrapper))}),this.forContainers(allNoFW,function(){return _this.createManagedBean(new DragListenerFeature(_this.eContainer))}),this.forContainers(allCenter,function(){return _this.createManagedBean(new CenterWidthFeature(function(width){return _this.comp.setContainerWidth(width+"px")}))}),isInvisibleScrollbar()&&(this.forContainers([RowContainerName.CENTER],function(){var pinnedWidthChangedEvent=_this.enableRtl?Events.EVENT_LEFT_PINNED_WIDTH_CHANGED:Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED;_this.addManagedListener(_this.eventService,pinnedWidthChangedEvent,function(){return _this.refreshPaddingForFakeScrollbar()})}),this.refreshPaddingForFakeScrollbar()),this.addListeners(),this.registerWithCtrlsService()},RowContainerCtrl2.prototype.refreshPaddingForFakeScrollbar=function(){var _a=this,enableRtl=_a.enableRtl,columnModel=_a.columnModel,name=_a.name,eWrapper=_a.eWrapper,eContainer=_a.eContainer,sideToCheck=enableRtl?RowContainerName.LEFT:RowContainerName.RIGHT;this.forContainers([RowContainerName.CENTER,sideToCheck],function(){var pinnedWidth=columnModel.getContainerWidth(sideToCheck),marginSide=enableRtl?"marginLeft":"marginRight";name===RowContainerName.CENTER?eWrapper.style[marginSide]=pinnedWidth?"0px":"16px":eContainer.style[marginSide]=pinnedWidth?"16px":"0px"})},RowContainerCtrl2.prototype.addListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_SCROLL_VISIBILITY_CHANGED,function(){return _this.onScrollVisibilityChanged()}),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,function(){return _this.onDisplayedColumnsChanged()}),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,function(){return _this.onDisplayedColumnsWidthChanged()}),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_ROWS_CHANGED,function(){return _this.onDisplayedRowsChanged()}),this.onScrollVisibilityChanged(),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()},RowContainerCtrl2.prototype.listenOnDomOrder=function(){var _this=this;if([RowContainerName.STICKY_TOP_CENTER,RowContainerName.STICKY_TOP_LEFT,RowContainerName.STICKY_TOP_RIGHT,RowContainerName.STICKY_TOP_FULL_WIDTH].indexOf(this.name)>=0)this.comp.setDomOrder(!0);else{var listener=__name(function(){var isEnsureDomOrder=_this.gridOptionsService.is("ensureDomOrder"),isPrintLayout=_this.gridOptionsService.isDomLayout("print");_this.comp.setDomOrder(isEnsureDomOrder||isPrintLayout)},"listener");this.addManagedPropertyListener("domLayout",listener),listener()}},RowContainerCtrl2.prototype.stopHScrollOnPinnedRows=function(){var _this=this;this.forContainers([RowContainerName.TOP_CENTER,RowContainerName.STICKY_TOP_CENTER,RowContainerName.BOTTOM_CENTER],function(){var resetScrollLeft=__name(function(){return _this.eViewport.scrollLeft=0},"resetScrollLeft");_this.addManagedListener(_this.eViewport,"scroll",resetScrollLeft)})},RowContainerCtrl2.prototype.onDisplayedColumnsChanged=function(){var _this=this;this.forContainers([RowContainerName.CENTER],function(){return _this.onHorizontalViewportChanged()})},RowContainerCtrl2.prototype.onDisplayedColumnsWidthChanged=function(){var _this=this;this.forContainers([RowContainerName.CENTER],function(){return _this.onHorizontalViewportChanged()})},RowContainerCtrl2.prototype.onScrollVisibilityChanged=function(){if(this.name===RowContainerName.CENTER){var scrollbarWidth=this.scrollVisibleService.isHorizontalScrollShowing()&&this.gridOptionsService.getScrollbarWidth()||0,height=0==scrollbarWidth?"100%":"calc(100% + "+scrollbarWidth+"px)";this.comp.setViewportHeight(height)}},RowContainerCtrl2.prototype.addPreventScrollWhileDragging=function(){var _this=this,preventScroll=__name(function(e){_this.dragService.isDragging()&&e.cancelable&&e.preventDefault()},"preventScroll");this.eContainer.addEventListener("touchmove",preventScroll,{passive:!1}),this.addDestroyFunc(function(){return _this.eContainer.removeEventListener("touchmove",preventScroll)})},RowContainerCtrl2.prototype.onHorizontalViewportChanged=function(){var scrollWidth=this.getCenterWidth(),scrollPosition=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(scrollWidth,scrollPosition)},RowContainerCtrl2.prototype.getCenterWidth=function(){return getInnerWidth(this.eViewport)},RowContainerCtrl2.prototype.getCenterViewportScrollLeft=function(){return getScrollLeft(this.eViewport,this.enableRtl)},RowContainerCtrl2.prototype.registerViewportResizeListener=function(listener){var unsubscribeFromResize=this.resizeObserverService.observeResize(this.eViewport,listener);this.addDestroyFunc(function(){return unsubscribeFromResize()})},RowContainerCtrl2.prototype.isViewportVisible=function(){return isVisible(this.eViewport)},RowContainerCtrl2.prototype.isViewportHScrollShowing=function(){return isHorizontalScrollShowing(this.eViewport)},RowContainerCtrl2.prototype.getViewportScrollLeft=function(){return getScrollLeft(this.eViewport,this.enableRtl)},RowContainerCtrl2.prototype.isHorizontalScrollShowing=function(){return this.gridOptionsService.is("alwaysShowHorizontalScroll")||isHorizontalScrollShowing(this.eViewport)},RowContainerCtrl2.prototype.getViewportElement=function(){return this.eViewport},RowContainerCtrl2.prototype.setContainerTranslateX=function(amount){this.eContainer.style.transform="translateX("+amount+"px)"},RowContainerCtrl2.prototype.getHScrollPosition=function(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}},RowContainerCtrl2.prototype.setCenterViewportScrollLeft=function(value){setScrollLeft(this.eViewport,value,this.enableRtl)},RowContainerCtrl2.prototype.isContainerVisible=function(){return!RowContainerCtrl2.getPinned(this.name)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0},RowContainerCtrl2.prototype.onPinnedWidthChanged=function(){var visible=this.isContainerVisible();this.visible!=visible&&(this.visible=visible,this.onDisplayedRowsChanged()),isInvisibleScrollbar()&&this.refreshPaddingForFakeScrollbar()},RowContainerCtrl2.prototype.onDisplayedRowsChanged=function(){var _this=this,fullWithContainer=this.name===RowContainerName.TOP_FULL_WIDTH||this.name===RowContainerName.STICKY_TOP_FULL_WIDTH||this.name===RowContainerName.BOTTOM_FULL_WIDTH||this.name===RowContainerName.FULL_WIDTH,doesRowMatch=__name(function(rowCtrl){var fullWidthRow=rowCtrl.isFullWidth(),printLayout=_this.gridOptionsService.isDomLayout("print"),embedFW=_this.embedFullWidthRows||printLayout;return fullWithContainer?!embedFW&&fullWidthRow:embedFW||!fullWidthRow},"doesRowMatch"),rowsThisContainer=(this.visible?this.getRowCtrls():[]).filter(doesRowMatch);this.comp.setRowCtrls(rowsThisContainer)},RowContainerCtrl2.prototype.getRowCtrls=function(){switch(this.name){case RowContainerName.TOP_CENTER:case RowContainerName.TOP_LEFT:case RowContainerName.TOP_RIGHT:case RowContainerName.TOP_FULL_WIDTH:return this.rowRenderer.getTopRowCtrls();case RowContainerName.STICKY_TOP_CENTER:case RowContainerName.STICKY_TOP_LEFT:case RowContainerName.STICKY_TOP_RIGHT:case RowContainerName.STICKY_TOP_FULL_WIDTH:return this.rowRenderer.getStickyTopRowCtrls();case RowContainerName.BOTTOM_CENTER:case RowContainerName.BOTTOM_LEFT:case RowContainerName.BOTTOM_RIGHT:case RowContainerName.BOTTOM_FULL_WIDTH:return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getRowCtrls()}},__decorate$1E([Autowired("scrollVisibleService")],RowContainerCtrl2.prototype,"scrollVisibleService",void 0),__decorate$1E([Autowired("dragService")],RowContainerCtrl2.prototype,"dragService",void 0),__decorate$1E([Autowired("ctrlsService")],RowContainerCtrl2.prototype,"ctrlsService",void 0),__decorate$1E([Autowired("columnModel")],RowContainerCtrl2.prototype,"columnModel",void 0),__decorate$1E([Autowired("resizeObserverService")],RowContainerCtrl2.prototype,"resizeObserverService",void 0),__decorate$1E([Autowired("rowRenderer")],RowContainerCtrl2.prototype,"rowRenderer",void 0),__decorate$1E([PostConstruct],RowContainerCtrl2.prototype,"postConstruct",null),RowContainerCtrl2}(BeanStub),__extends$1K=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1D=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GRID_BODY_TEMPLATE='<div class="ag-root ag-unselectable" role="treegrid">\n        <ag-header-root ref="gridHeader"></ag-header-root>\n        <div class="ag-floating-top" ref="eTop" role="presentation">\n            <ag-row-container ref="topLeftContainer" name="'+RowContainerName.TOP_LEFT+'"></ag-row-container>\n            <ag-row-container ref="topCenterContainer" name="'+RowContainerName.TOP_CENTER+'"></ag-row-container>\n            <ag-row-container ref="topRightContainer" name="'+RowContainerName.TOP_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="topFullWidthContainer" name="'+RowContainerName.TOP_FULL_WIDTH+'"></ag-row-container>\n        </div>\n        <div class="ag-body" ref="eBody" role="presentation">\n            <div class="ag-body-clipper" ref="eBodyClipper" role="presentation">\n                <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">\n                    <ag-row-container ref="leftContainer" name="'+RowContainerName.LEFT+'"></ag-row-container>\n                    <ag-row-container ref="centerContainer" name="'+RowContainerName.CENTER+'"></ag-row-container>\n                    <ag-row-container ref="rightContainer" name="'+RowContainerName.RIGHT+'"></ag-row-container>\n                    <ag-row-container ref="fullWidthContainer" name="'+RowContainerName.FULL_WIDTH+'"></ag-row-container>\n                </div>\n            </div>\n            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>\n        </div>\n        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">\n            <ag-row-container ref="stickyTopLeftContainer" name="'+RowContainerName.STICKY_TOP_LEFT+'"></ag-row-container>\n            <ag-row-container ref="stickyTopCenterContainer" name="'+RowContainerName.STICKY_TOP_CENTER+'"></ag-row-container>\n            <ag-row-container ref="stickyTopRightContainer" name="'+RowContainerName.STICKY_TOP_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="stickyTopFullWidthContainer" name="'+RowContainerName.STICKY_TOP_FULL_WIDTH+'"></ag-row-container>\n        </div>\n        <div class="ag-floating-bottom" ref="eBottom" role="presentation">\n            <ag-row-container ref="bottomLeftContainer" name="'+RowContainerName.BOTTOM_LEFT+'"></ag-row-container>\n            <ag-row-container ref="bottomCenterContainer" name="'+RowContainerName.BOTTOM_CENTER+'"></ag-row-container>\n            <ag-row-container ref="bottomRightContainer" name="'+RowContainerName.BOTTOM_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="bottomFullWidthContainer" name="'+RowContainerName.BOTTOM_FULL_WIDTH+'"></ag-row-container>\n        </div>\n        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>\n        <ag-overlay-wrapper></ag-overlay-wrapper>\n    </div>',GridBodyComp=function(_super){function GridBodyComp2(){return _super.call(this,GRID_BODY_TEMPLATE)||this}return __extends$1K(GridBodyComp2,_super),__name(GridBodyComp2,"GridBodyComp"),GridBodyComp2.prototype.init=function(){var _this=this,setHeight=__name(function(height,element){var heightString=height+"px";element.style.minHeight=heightString,element.style.height=heightString},"setHeight"),compProxy={setRowAnimationCssOnBodyViewport:function(cssClass,animate){return _this.setRowAnimationCssOnBodyViewport(cssClass,animate)},setColumnCount:function(count){return setAriaColCount(_this.getGui(),count)},setRowCount:function(count){return setAriaRowCount(_this.getGui(),count)},setTopHeight:function(height){return setHeight(height,_this.eTop)},setBottomHeight:function(height){return setHeight(height,_this.eBottom)},setTopDisplay:function(display){return _this.eTop.style.display=display},setBottomDisplay:function(display){return _this.eBottom.style.display=display},setStickyTopHeight:function(height){return _this.eStickyTop.style.height=height},setStickyTopTop:function(top){return _this.eStickyTop.style.top=top},setStickyTopWidth:function(width){return _this.eStickyTop.style.width=width},setColumnMovingCss:function(cssClass,flag){return _this.addOrRemoveCssClass("ag-column-moving",flag)},updateLayoutClasses:function(cssClass,params){[_this.eBodyViewport.classList,_this.eBodyClipper.classList,_this.eBody.classList].forEach(function(classList){classList.toggle(LayoutCssClasses.AUTO_HEIGHT,params.autoHeight),classList.toggle(LayoutCssClasses.NORMAL,params.normal),classList.toggle(LayoutCssClasses.PRINT,params.print)}),_this.addOrRemoveCssClass(LayoutCssClasses.AUTO_HEIGHT,params.autoHeight),_this.addOrRemoveCssClass(LayoutCssClasses.NORMAL,params.normal),_this.addOrRemoveCssClass(LayoutCssClasses.PRINT,params.print)},setAlwaysVerticalScrollClass:function(cssClass,on){return _this.eBodyViewport.classList.toggle("ag-force-vertical-scroll",on)},registerBodyViewportResizeListener:function(listener){var unsubscribeFromResize=_this.resizeObserverService.observeResize(_this.eBodyViewport,listener);_this.addDestroyFunc(function(){return unsubscribeFromResize()})},setPinnedTopBottomOverflowY:function(overflow){return _this.eTop.style.overflowY=_this.eBottom.style.overflowY=overflow},setCellSelectableCss:function(cssClass,selectable){[_this.eTop,_this.eBodyViewport,_this.eBottom].forEach(function(ct){return ct.classList.toggle("ag-selectable",selectable)})},setBodyViewportWidth:function(width){return _this.eBodyViewport.style.width=width}};this.ctrl=this.createManagedBean(new GridBodyCtrl),this.ctrl.setComp(compProxy,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop),(this.rangeService||"multiple"===this.gridOptionsService.get("rowSelection"))&&setAriaMultiSelectable(this.getGui(),!0)},GridBodyComp2.prototype.setRowAnimationCssOnBodyViewport=function(cssClass,animateRows){var bodyViewportClassList=this.eBodyViewport.classList;bodyViewportClassList.toggle(RowAnimationCssClasses.ANIMATION_ON,animateRows),bodyViewportClassList.toggle(RowAnimationCssClasses.ANIMATION_OFF,!animateRows)},GridBodyComp2.prototype.getFloatingTopBottom=function(){return[this.eTop,this.eBottom]},__decorate$1D([Autowired("resizeObserverService")],GridBodyComp2.prototype,"resizeObserverService",void 0),__decorate$1D([Optional("rangeService")],GridBodyComp2.prototype,"rangeService",void 0),__decorate$1D([RefSelector("eBodyViewport")],GridBodyComp2.prototype,"eBodyViewport",void 0),__decorate$1D([RefSelector("eStickyTop")],GridBodyComp2.prototype,"eStickyTop",void 0),__decorate$1D([RefSelector("eTop")],GridBodyComp2.prototype,"eTop",void 0),__decorate$1D([RefSelector("eBottom")],GridBodyComp2.prototype,"eBottom",void 0),__decorate$1D([RefSelector("gridHeader")],GridBodyComp2.prototype,"headerRootComp",void 0),__decorate$1D([RefSelector("eBodyClipper")],GridBodyComp2.prototype,"eBodyClipper",void 0),__decorate$1D([RefSelector("eBody")],GridBodyComp2.prototype,"eBody",void 0),__decorate$1D([PostConstruct],GridBodyComp2.prototype,"init",null),GridBodyComp2}(Component),__extends$1J=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1C=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ScrollVisibleService=function(_super){function ScrollVisibleService2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1J(ScrollVisibleService2,_super),__name(ScrollVisibleService2,"ScrollVisibleService"),ScrollVisibleService2.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))},ScrollVisibleService2.prototype.onDisplayedColumnsChanged=function(){this.update()},ScrollVisibleService2.prototype.onDisplayedColumnsWidthChanged=function(){this.update()},ScrollVisibleService2.prototype.update=function(){this.updateImpl(),setTimeout(this.updateImpl.bind(this),500)},ScrollVisibleService2.prototype.updateImpl=function(){var centerRowCtrl=this.ctrlsService.getCenterRowContainerCtrl();if(centerRowCtrl){var params={horizontalScrollShowing:centerRowCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(params)}},ScrollVisibleService2.prototype.setScrollsVisible=function(params){if(this.horizontalScrollShowing!==params.horizontalScrollShowing||this.verticalScrollShowing!==params.verticalScrollShowing){this.horizontalScrollShowing=params.horizontalScrollShowing,this.verticalScrollShowing=params.verticalScrollShowing;var event_1={type:Events.EVENT_SCROLL_VISIBILITY_CHANGED};this.eventService.dispatchEvent(event_1)}},ScrollVisibleService2.prototype.isHorizontalScrollShowing=function(){return this.horizontalScrollShowing},ScrollVisibleService2.prototype.isVerticalScrollShowing=function(){return this.verticalScrollShowing},__decorate$1C([Autowired("ctrlsService")],ScrollVisibleService2.prototype,"ctrlsService",void 0),__decorate$1C([PostConstruct],ScrollVisibleService2.prototype,"postConstruct",null),ScrollVisibleService2=__decorate$1C([Bean("scrollVisibleService")],ScrollVisibleService2)}(BeanStub),__extends$1I=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1B=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},MouseEventService=function(_super){function MouseEventService2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.gridInstanceId=MouseEventService_1.gridInstanceSequence.next(),_this}var MouseEventService_1;return __extends$1I(MouseEventService2,_super),__name(MouseEventService2,"MouseEventService"),MouseEventService_1=MouseEventService2,MouseEventService2.prototype.stampTopLevelGridCompWithGridInstance=function(eGridDiv){eGridDiv[MouseEventService_1.GRID_DOM_KEY]=this.gridInstanceId},MouseEventService2.prototype.getRenderedCellForEvent=function(event){return getCtrlForEvent(this.gridOptionsService,event,CellCtrl.DOM_DATA_KEY_CELL_CTRL)},MouseEventService2.prototype.isEventFromThisGrid=function(event){return this.isElementInThisGrid(event.target)},MouseEventService2.prototype.isElementInThisGrid=function(element){for(var pointer=element;pointer;){var instanceId=pointer[MouseEventService_1.GRID_DOM_KEY];if(exists(instanceId))return instanceId===this.gridInstanceId;pointer=pointer.parentElement}return!1},MouseEventService2.prototype.getCellPositionForEvent=function(event){var cellComp=this.getRenderedCellForEvent(event);return cellComp?cellComp.getCellPosition():null},MouseEventService2.prototype.getNormalisedPosition=function(event){var x,y,gridPanelHasScrolls=this.gridOptionsService.isDomLayout("normal"),e=event;if(null!=e.clientX||null!=e.clientY?(x=e.clientX,y=e.clientY):(x=e.x,y=e.y),gridPanelHasScrolls){var gridBodyCon=this.ctrlsService.getGridBodyCtrl(),vRange=gridBodyCon.getScrollFeature().getVScrollPosition();x+=gridBodyCon.getScrollFeature().getHScrollPosition().left,y+=vRange.top}return{x,y}},MouseEventService2.gridInstanceSequence=new NumberSequence,MouseEventService2.GRID_DOM_KEY="__ag_grid_instance",__decorate$1B([Autowired("ctrlsService")],MouseEventService2.prototype,"ctrlsService",void 0),MouseEventService2=MouseEventService_1=__decorate$1B([Bean("mouseEventService")],MouseEventService2)}(BeanStub),__extends$1H=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$6=function(){return __assign$6=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$6.apply(this,arguments)},__decorate$1A=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},NavigationService=function(_super){function NavigationService2(){var _this=_super.call(this)||this;return _this.onPageDown=throttle(_this.onPageDown,100),_this.onPageUp=throttle(_this.onPageUp,100),_this}return __extends$1H(NavigationService2,_super),__name(NavigationService2,"NavigationService"),NavigationService2.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady(function(p){_this.gridBodyCon=p.gridBodyCtrl})},NavigationService2.prototype.handlePageScrollingKey=function(event){var key=event.key,alt=event.altKey,ctrl=event.ctrlKey||event.metaKey,rangeServiceShouldHandleShift=!!this.rangeService&&event.shiftKey,currentCell=this.mouseEventService.getCellPositionForEvent(event),processed=!1;switch(key){case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:!ctrl&&!alt&&(this.onHomeOrEndKey(key),processed=!0);break;case KeyCode.LEFT:case KeyCode.RIGHT:case KeyCode.UP:case KeyCode.DOWN:if(!currentCell)return!1;ctrl&&!alt&&!rangeServiceShouldHandleShift&&(this.onCtrlUpDownLeftRight(key,currentCell),processed=!0);break;case KeyCode.PAGE_DOWN:if(!currentCell)return!1;!ctrl&&!alt&&(this.onPageDown(currentCell),processed=!0);break;case KeyCode.PAGE_UP:if(!currentCell)return!1;!ctrl&&!alt&&(this.onPageUp(currentCell),processed=!0)}return processed&&event.preventDefault(),processed},NavigationService2.prototype.navigateTo=function(navigateParams){var scrollIndex=navigateParams.scrollIndex,scrollType=navigateParams.scrollType,scrollColumn=navigateParams.scrollColumn,focusIndex=navigateParams.focusIndex,focusColumn=navigateParams.focusColumn;if(exists(scrollColumn)&&!scrollColumn.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(scrollColumn),exists(scrollIndex)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(scrollIndex,scrollType),navigateParams.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(focusIndex),this.focusService.setFocusedCell({rowIndex:focusIndex,column:focusColumn,rowPinned:null,forceBrowserFocus:!0}),this.rangeService){var cellPosition={rowIndex:focusIndex,rowPinned:null,column:focusColumn};this.rangeService.setRangeToCell(cellPosition)}},NavigationService2.prototype.onPageDown=function(gridCell){var scrollPosition=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),pixelsInOnePage=this.getViewportHeight(),pagingPixelOffset=this.paginationProxy.getPixelOffset(),currentPageBottomPixel=scrollPosition.top+pixelsInOnePage,currentPageBottomRow=this.paginationProxy.getRowIndexAtPixel(currentPageBottomPixel+pagingPixelOffset);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(gridCell,currentPageBottomRow):this.navigateToNextPage(gridCell,currentPageBottomRow)},NavigationService2.prototype.onPageUp=function(gridCell){var scrollPosition=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),pagingPixelOffset=this.paginationProxy.getPixelOffset(),currentPageTopPixel=scrollPosition.top,currentPageTopRow=this.paginationProxy.getRowIndexAtPixel(currentPageTopPixel+pagingPixelOffset);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(gridCell,currentPageTopRow,!0):this.navigateToNextPage(gridCell,currentPageTopRow,!0)},NavigationService2.prototype.navigateToNextPage=function(gridCell,scrollIndex,up){void 0===up&&(up=!1);var scrollType,pixelsInOnePage=this.getViewportHeight(),firstRow=this.paginationProxy.getPageFirstRow(),lastRow=this.paginationProxy.getPageLastRow(),pagingPixelOffset=this.paginationProxy.getPixelOffset(),currentRowNode=this.paginationProxy.getRow(gridCell.rowIndex),rowPixelDiff=up?(null==currentRowNode?void 0:currentRowNode.rowHeight)-pixelsInOnePage-pagingPixelOffset:pixelsInOnePage-pagingPixelOffset,nextCellPixel=(null==currentRowNode?void 0:currentRowNode.rowTop)+rowPixelDiff,focusIndex=this.paginationProxy.getRowIndexAtPixel(nextCellPixel+pagingPixelOffset);if(focusIndex===gridCell.rowIndex){var diff=up?-1:1;scrollIndex=focusIndex=gridCell.rowIndex+diff}up?(scrollType="bottom",focusIndex<firstRow&&(focusIndex=firstRow),scrollIndex<firstRow&&(scrollIndex=firstRow)):(scrollType="top",focusIndex>lastRow&&(focusIndex=lastRow),scrollIndex>lastRow&&(scrollIndex=lastRow)),this.isRowTallerThanView(focusIndex)&&(scrollIndex=focusIndex,scrollType="top"),this.navigateTo({scrollIndex,scrollType,scrollColumn:null,focusIndex,focusColumn:gridCell.column})},NavigationService2.prototype.navigateToNextPageWithAutoHeight=function(gridCell,scrollIndex,up){var _this=this;void 0===up&&(up=!1),this.navigateTo({scrollIndex,scrollType:up?"bottom":"top",scrollColumn:null,focusIndex:scrollIndex,focusColumn:gridCell.column}),setTimeout(function(){var focusIndex=_this.getNextFocusIndexForAutoHeight(gridCell,up);_this.navigateTo({scrollIndex,scrollType:up?"bottom":"top",scrollColumn:null,focusIndex,focusColumn:gridCell.column,isAsync:!0})},50)},NavigationService2.prototype.getNextFocusIndexForAutoHeight=function(gridCell,up){var _a;void 0===up&&(up=!1);for(var step=up?-1:1,pixelsInOnePage=this.getViewportHeight(),lastRowIndex=this.paginationProxy.getPageLastRow(),pixelSum=0,currentIndex=gridCell.rowIndex;currentIndex>=0&&currentIndex<=lastRowIndex;){var currentCell=this.paginationProxy.getRow(currentIndex);if(currentCell){var currentCellHeight=null!==(_a=currentCell.rowHeight)&&void 0!==_a?_a:0;if(pixelSum+currentCellHeight>pixelsInOnePage)break;pixelSum+=currentCellHeight}currentIndex+=step}return Math.max(0,Math.min(currentIndex,lastRowIndex))},NavigationService2.prototype.getViewportHeight=function(){var scrollPosition=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),scrollbarWidth=this.gridOptionsService.getScrollbarWidth(),pixelsInOnePage=scrollPosition.bottom-scrollPosition.top;return this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(pixelsInOnePage-=scrollbarWidth),pixelsInOnePage},NavigationService2.prototype.isRowTallerThanView=function(rowIndex){var rowNode=this.paginationProxy.getRow(rowIndex);if(!rowNode)return!1;var rowHeight=rowNode.rowHeight;return"number"==typeof rowHeight&&rowHeight>this.getViewportHeight()},NavigationService2.prototype.onCtrlUpDownLeftRight=function(key,gridCell){var cellToFocus=this.cellNavigationService.getNextCellToFocus(key,gridCell,!0),rowIndex=cellToFocus.rowIndex,column=cellToFocus.column;this.navigateTo({scrollIndex:rowIndex,scrollType:null,scrollColumn:column,focusIndex:rowIndex,focusColumn:column})},NavigationService2.prototype.onHomeOrEndKey=function(key){var homeKey=key===KeyCode.PAGE_HOME,allColumns=this.columnModel.getAllDisplayedColumns(),columnToSelect=homeKey?allColumns[0]:last(allColumns),scrollIndex=homeKey?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex,scrollType:null,scrollColumn:columnToSelect,focusIndex:scrollIndex,focusColumn:columnToSelect})},NavigationService2.prototype.onTabKeyDown=function(previous,keyboardEvent){var backwards=keyboardEvent.shiftKey;if(this.tabToNextCellCommon(previous,backwards,keyboardEvent))keyboardEvent.preventDefault();else if(backwards){var _a=previous.getRowPosition(),rowIndex=_a.rowIndex;(_a.rowPinned?0===rowIndex:rowIndex===this.paginationProxy.getPageFirstRow())&&(keyboardEvent.preventDefault(),this.focusService.focusLastHeader(keyboardEvent))}else previous instanceof CellCtrl&&previous.focusCell(!0),this.focusService.focusNextGridCoreContainer(backwards)&&keyboardEvent.preventDefault()},NavigationService2.prototype.tabToNextCell=function(backwards,event){var focusedCell=this.focusService.getFocusedCell();if(!focusedCell)return!1;var cellOrRow=this.getCellByPosition(focusedCell);return!!(cellOrRow||(cellOrRow=this.rowRenderer.getRowByPosition(focusedCell),cellOrRow&&cellOrRow.isFullWidth()))&&this.tabToNextCellCommon(cellOrRow,backwards,event)},NavigationService2.prototype.tabToNextCellCommon=function(previous,backwards,event){var editing=previous.isEditing();if(!editing&&previous instanceof CellCtrl){var row=previous.getRowCtrl();row&&(editing=row.isEditing())}return(editing?"fullRow"===this.gridOptionsService.get("editType")?this.moveToNextEditingRow(previous,backwards,event):this.moveToNextEditingCell(previous,backwards,event):this.moveToNextCellNotEditing(previous,backwards))||!!this.focusService.getFocusedHeader()},NavigationService2.prototype.moveToNextEditingCell=function(previousCell,backwards,event){void 0===event&&(event=null);var previousPos=previousCell.getCellPosition();previousCell.getGui().focus(),previousCell.stopEditing();var nextCell=this.findNextCellToFocusOn(previousPos,backwards,!0);return null!=nextCell&&(nextCell.startEditing(null,null,!0,event),nextCell.focusCell(!1),!0)},NavigationService2.prototype.moveToNextEditingRow=function(previousCell,backwards,event){void 0===event&&(event=null);var previousPos=previousCell.getCellPosition(),nextCell=this.findNextCellToFocusOn(previousPos,backwards,!0);if(null==nextCell)return!1;var nextPos=nextCell.getCellPosition(),previousEditable=this.isCellEditable(previousPos),nextEditable=this.isCellEditable(nextPos),rowsMatch=nextPos&&previousPos.rowIndex===nextPos.rowIndex&&previousPos.rowPinned===nextPos.rowPinned;(previousEditable&&previousCell.setFocusOutOnEditor(),rowsMatch)||(previousCell.getRowCtrl().stopEditing(),nextCell.getRowCtrl().startRowEditing(void 0,void 0,void 0,event));return nextEditable?(nextCell.setFocusInOnEditor(),nextCell.focusCell()):nextCell.focusCell(!0),!0},NavigationService2.prototype.moveToNextCellNotEditing=function(previousCell,backwards){var cellPos,displayedColumns=this.columnModel.getAllDisplayedColumns();cellPos=previousCell instanceof RowCtrl?__assign$6(__assign$6({},previousCell.getRowPosition()),{column:backwards?displayedColumns[0]:last(displayedColumns)}):previousCell.getCellPosition();var nextCell=this.findNextCellToFocusOn(cellPos,backwards,!1);if(nextCell instanceof CellCtrl)nextCell.focusCell(!0);else if(nextCell)return this.tryToFocusFullWidthRow(nextCell.getRowPosition(),backwards);return exists(nextCell)},NavigationService2.prototype.findNextCellToFocusOn=function(previousPosition,backwards,startEditing){for(var nextPosition=previousPosition;;){previousPosition!==nextPosition&&(previousPosition=nextPosition),backwards||(nextPosition=this.getLastCellOfColSpan(nextPosition)),nextPosition=this.cellNavigationService.getNextTabbedCell(nextPosition,backwards);var userFunc=this.gridOptionsService.getCallback("tabToNextCell");if(exists(userFunc)){var userCell=userFunc({backwards,editing:startEditing,previousCellPosition:previousPosition,nextCellPosition:nextPosition||null});exists(userCell)?(userCell.floating&&(doOnce(function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),userCell.rowPinned=userCell.floating),nextPosition={rowIndex:userCell.rowIndex,column:userCell.column,rowPinned:userCell.rowPinned}):nextPosition=null}if(!nextPosition)return null;if(nextPosition.rowIndex<0){var headerLen=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:headerLen+nextPosition.rowIndex,column:nextPosition.column}}),null}var fullRowEdit="fullRow"===this.gridOptionsService.get("editType");if(startEditing&&!fullRowEdit)if(!this.isCellEditable(nextPosition))continue;this.ensureCellVisible(nextPosition);var nextCell=this.getCellByPosition(nextPosition);if(!nextCell){var row=this.rowRenderer.getRowByPosition(nextPosition);if(!row||!row.isFullWidth()||startEditing)continue;return row}if(!nextCell.isSuppressNavigable())return this.rangeService&&this.rangeService.setRangeToCell(nextPosition),nextCell}},NavigationService2.prototype.isCellEditable=function(cell){var rowNode=this.lookupRowNodeForCell(cell);return!!rowNode&&cell.column.isCellEditable(rowNode)},NavigationService2.prototype.getCellByPosition=function(cellPosition){var rowCtrl=this.rowRenderer.getRowByPosition(cellPosition);return rowCtrl?rowCtrl.getCellCtrl(cellPosition.column):null},NavigationService2.prototype.lookupRowNodeForCell=function(cell){return"top"===cell.rowPinned?this.pinnedRowModel.getPinnedTopRow(cell.rowIndex):"bottom"===cell.rowPinned?this.pinnedRowModel.getPinnedBottomRow(cell.rowIndex):this.paginationProxy.getRow(cell.rowIndex)},NavigationService2.prototype.navigateToNextCell=function(event,key,currentCell,allowUserOverride){for(var nextCell=currentCell,hitEdgeOfGrid=!1;nextCell&&(nextCell===currentCell||!this.isValidNavigateCell(nextCell));)this.gridOptionsService.is("enableRtl")?key===KeyCode.LEFT&&(nextCell=this.getLastCellOfColSpan(nextCell)):key===KeyCode.RIGHT&&(nextCell=this.getLastCellOfColSpan(nextCell)),hitEdgeOfGrid=missing(nextCell=this.cellNavigationService.getNextCellToFocus(key,nextCell));if(hitEdgeOfGrid&&event&&event.key===KeyCode.UP&&(nextCell={rowIndex:-1,rowPinned:null,column:currentCell.column}),allowUserOverride){var userFunc=this.gridOptionsService.getCallback("navigateToNextCell");if(exists(userFunc)){var userCell=userFunc({key,previousCellPosition:currentCell,nextCellPosition:nextCell||null,event});exists(userCell)?(userCell.floating&&(doOnce(function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),userCell.rowPinned=userCell.floating),nextCell={rowPinned:userCell.rowPinned,rowIndex:userCell.rowIndex,column:userCell.column}):nextCell=null}}if(nextCell){if(nextCell.rowIndex<0){var headerLen=this.headerNavigationService.getHeaderRowCount();return void this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:headerLen+nextCell.rowIndex,column:currentCell.column},event:event||void 0})}var normalisedPosition=this.getNormalisedPosition(nextCell);normalisedPosition?this.focusPosition(normalisedPosition):this.tryToFocusFullWidthRow(nextCell)}},NavigationService2.prototype.getNormalisedPosition=function(cellPosition){this.ensureCellVisible(cellPosition);var cellCtrl=this.getCellByPosition(cellPosition);return cellCtrl?(cellPosition=cellCtrl.getCellPosition(),this.ensureCellVisible(cellPosition),cellPosition):null},NavigationService2.prototype.tryToFocusFullWidthRow=function(position,backwards){void 0===backwards&&(backwards=!1);var displayedColumns=this.columnModel.getAllDisplayedColumns(),rowComp=this.rowRenderer.getRowByPosition(position);if(!rowComp||!rowComp.isFullWidth())return!1;var currentCellFocused=this.focusService.getFocusedCell(),cellPosition={rowIndex:position.rowIndex,rowPinned:position.rowPinned,column:position.column||(backwards?last(displayedColumns):displayedColumns[0])};this.focusPosition(cellPosition);var fromBelow=null!=currentCellFocused&&this.rowPositionUtils.before(cellPosition,currentCellFocused),focusEvent={type:Events.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:cellPosition.rowIndex,rowPinned:cellPosition.rowPinned,column:cellPosition.column,isFullWidthCell:!0,floating:cellPosition.rowPinned,fromBelow};return this.eventService.dispatchEvent(focusEvent),!0},NavigationService2.prototype.focusPosition=function(cellPosition){this.focusService.setFocusedCell({rowIndex:cellPosition.rowIndex,column:cellPosition.column,rowPinned:cellPosition.rowPinned,forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell(cellPosition)},NavigationService2.prototype.isValidNavigateCell=function(cell){return!!this.rowPositionUtils.getRowNode(cell)},NavigationService2.prototype.getLastCellOfColSpan=function(cell){var cellCtrl=this.getCellByPosition(cell);if(!cellCtrl)return cell;var colSpanningList=cellCtrl.getColSpanningList();return 1===colSpanningList.length?cell:{rowIndex:cell.rowIndex,column:last(colSpanningList),rowPinned:cell.rowPinned}},NavigationService2.prototype.ensureCellVisible=function(gridCell){var isGroupStickyEnabled=this.gridOptionsService.is("groupRowsSticky"),rowNode=this.rowModel.getRow(gridCell.rowIndex);!(isGroupStickyEnabled&&(null==rowNode?void 0:rowNode.sticky))&&missing(gridCell.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(gridCell.rowIndex),gridCell.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(gridCell.column)},__decorate$1A([Autowired("mouseEventService")],NavigationService2.prototype,"mouseEventService",void 0),__decorate$1A([Autowired("paginationProxy")],NavigationService2.prototype,"paginationProxy",void 0),__decorate$1A([Autowired("focusService")],NavigationService2.prototype,"focusService",void 0),__decorate$1A([Optional("rangeService")],NavigationService2.prototype,"rangeService",void 0),__decorate$1A([Autowired("columnModel")],NavigationService2.prototype,"columnModel",void 0),__decorate$1A([Autowired("rowModel")],NavigationService2.prototype,"rowModel",void 0),__decorate$1A([Autowired("ctrlsService")],NavigationService2.prototype,"ctrlsService",void 0),__decorate$1A([Autowired("rowRenderer")],NavigationService2.prototype,"rowRenderer",void 0),__decorate$1A([Autowired("headerNavigationService")],NavigationService2.prototype,"headerNavigationService",void 0),__decorate$1A([Autowired("rowPositionUtils")],NavigationService2.prototype,"rowPositionUtils",void 0),__decorate$1A([Autowired("cellNavigationService")],NavigationService2.prototype,"cellNavigationService",void 0),__decorate$1A([Autowired("pinnedRowModel")],NavigationService2.prototype,"pinnedRowModel",void 0),__decorate$1A([PostConstruct],NavigationService2.prototype,"postConstruct",null),NavigationService2=__decorate$1A([Bean("navigationService")],NavigationService2)}(BeanStub),__extends$1G=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),PopupEditorWrapper=function(_super){function PopupEditorWrapper2(params){var _this=_super.call(this,'<div class="ag-popup-editor" tabindex="-1"/>')||this;return _this.params=params,_this}return __extends$1G(PopupEditorWrapper2,_super),__name(PopupEditorWrapper2,"PopupEditorWrapper"),PopupEditorWrapper2.prototype.postConstruct=function(){this.gridOptionsService.setDomData(this.getGui(),PopupEditorWrapper2.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()},PopupEditorWrapper2.prototype.addKeyDownListener=function(){var _this=this,eGui=this.getGui(),params=this.params,listener=__name(function(event){isUserSuppressingKeyboardEvent(_this.gridOptionsService,event,params.node,params.column,!0)||params.onKeyDown(event)},"listener");this.addManagedListener(eGui,"keydown",listener)},PopupEditorWrapper2.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper",function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PostConstruct],PopupEditorWrapper2.prototype,"postConstruct",null),PopupEditorWrapper2}(PopupComponent),__extends$1F=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellComp=function(_super){function CellComp2(beans,cellCtrl,printLayout,eRow,editingRow){var _this=_super.call(this)||this;_this.rendererVersion=0,_this.editorVersion=0,_this.beans=beans,_this.column=cellCtrl.getColumn(),_this.rowNode=cellCtrl.getRowNode(),_this.rowCtrl=cellCtrl.getRowCtrl(),_this.eRow=eRow,_this.setTemplate('<div comp-id="'+_this.getCompId()+'"/>');var eGui=_this.getGui();_this.forceWrapper=cellCtrl.isForceWrapper(),_this.refreshWrapper(!1);var setAttribute=__name(function(name,value,element){var actualElement=element||eGui;null!=value&&""!=value?actualElement.setAttribute(name,value):actualElement.removeAttribute(name)},"setAttribute"),compProxy={addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},setUserStyles:function(styles){return addStylesToElement(eGui,styles)},getFocusableElement:function(){return _this.getFocusableElement()},setTabIndex:function(tabIndex){return setAttribute("tabindex",tabIndex.toString())},setRole:function(role){return setAriaRole(eGui,role)},setColId:function(colId){return setAttribute("col-id",colId)},setTitle:function(title){return setAttribute("title",title)},setIncludeSelection:function(include){return _this.includeSelection=include},setIncludeRowDrag:function(include){return _this.includeRowDrag=include},setIncludeDndSource:function(include){return _this.includeDndSource=include},setRenderDetails:function(compDetails,valueToDisplay,force){return _this.setRenderDetails(compDetails,valueToDisplay,force)},setEditDetails:function(compDetails,popup,position){return _this.setEditDetails(compDetails,popup,position)},getCellEditor:function(){return _this.cellEditor||null},getCellRenderer:function(){return _this.cellRenderer||null},getParentOfValue:function(){return _this.getParentOfValue()}};return _this.cellCtrl=cellCtrl,cellCtrl.setComp(compProxy,_this.getGui(),_this.eCellWrapper,printLayout,editingRow),_this}return __extends$1F(CellComp2,_super),__name(CellComp2,"CellComp"),CellComp2.prototype.getParentOfValue=function(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()},CellComp2.prototype.setRenderDetails=function(compDetails,valueToDisplay,forceNewCellRendererInstance){if(!(this.cellEditor&&!this.cellEditorPopupWrapper)){this.firstRender=null==this.firstRender;var controlWrapperChanged=this.refreshWrapper(!1);if(this.refreshEditStyles(!1),compDetails)!(forceNewCellRendererInstance||controlWrapperChanged)&&this.refreshCellRenderer(compDetails)||(this.destroyRenderer(),this.createCellRendererInstance(compDetails));else this.destroyRenderer(),this.insertValueWithoutCellRenderer(valueToDisplay)}},CellComp2.prototype.setEditDetails=function(compDetails,popup,position){compDetails?this.createCellEditorInstance(compDetails,popup,position):this.destroyEditor()},CellComp2.prototype.removeControls=function(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)},CellComp2.prototype.refreshWrapper=function(editing){var providingControls=this.includeRowDrag||this.includeDndSource||this.includeSelection,usingWrapper=providingControls||this.forceWrapper,putWrapperIn=usingWrapper&&null==this.eCellWrapper;putWrapperIn&&(this.eCellWrapper=loadTemplate('<div class="ag-cell-wrapper" role="presentation" aria-hidden="true"></div>'),this.getGui().appendChild(this.eCellWrapper));var takeWrapperOut=!usingWrapper&&null!=this.eCellWrapper;takeWrapperOut&&(removeFromParent(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!usingWrapper);var usingCellValue=!editing&&usingWrapper,putCellValueIn=usingCellValue&&null==this.eCellValue;putCellValueIn&&(this.eCellValue=loadTemplate('<span class="ag-cell-value" role="presentation"></span>'),this.eCellWrapper.appendChild(this.eCellValue));var takeCellValueOut=!usingCellValue&&null!=this.eCellValue;takeCellValueOut&&(removeFromParent(this.eCellValue),this.eCellValue=void 0);var templateChanged=putWrapperIn||takeWrapperOut||putCellValueIn||takeCellValueOut;return templateChanged&&this.removeControls(),editing||(providingControls&&this.addControls(),usingWrapper&&this.refreshAriaProperties()),templateChanged},CellComp2.prototype.addControls=function(){this.includeRowDrag&&null==this.rowDraggingComp&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&null==this.dndSourceComp&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&null==this.checkboxSelectionComp&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))},CellComp2.prototype.refreshAriaProperties=function(){var id=this.eCellValue.id="cell-"+this.getCompId(),describedByIds=[];this.includeSelection&&this.checkboxSelectionComp&&describedByIds.push(this.checkboxSelectionComp.getCheckboxId()),describedByIds.push(id),setAriaDescribedBy(this.getGui(),describedByIds.join(" "))},CellComp2.prototype.createCellEditorInstance=function(compDetails,popup,position){var _this=this,versionCopy=this.editorVersion,cellEditorPromise=compDetails.newAgStackInstance();if(cellEditorPromise){var params=compDetails.params;cellEditorPromise.then(function(c){return _this.afterCellEditorCreated(versionCopy,c,params,popup,position)}),missing(this.cellEditor)&&params.cellStartedEdit&&this.cellCtrl.focusCell(!0)}},CellComp2.prototype.insertValueWithoutCellRenderer=function(valueToDisplay){var eParent=this.getParentOfValue();clearElement(eParent);var escapedValue=null!=valueToDisplay?escapeString(valueToDisplay):null;null!=escapedValue&&(eParent.innerHTML=escapedValue)},CellComp2.prototype.destroyEditorAndRenderer=function(){this.destroyRenderer(),this.destroyEditor()},CellComp2.prototype.destroyRenderer=function(){var context=this.beans.context;this.cellRenderer=context.destroyBean(this.cellRenderer),removeFromParent(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++},CellComp2.prototype.destroyEditor=function(){var context=this.beans.context;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=context.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=context.destroyBean(this.cellEditorPopupWrapper),removeFromParent(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++},CellComp2.prototype.refreshCellRenderer=function(compClassAndParams){if(null==this.cellRenderer||null==this.cellRenderer.refresh||this.cellRendererClass!==compClassAndParams.componentClass)return!1;var result=this.cellRenderer.refresh(compClassAndParams.params);return!0===result||void 0===result},CellComp2.prototype.createCellRendererInstance=function(compDetails){var _this=this,useTaskService=!this.beans.gridOptionsService.is("suppressAnimationFrame"),displayComponentVersionCopy=this.rendererVersion,componentClass=compDetails.componentClass,createCellRendererFunc=__name(function(){if(!(_this.rendererVersion!==displayComponentVersionCopy||!_this.isAlive())){var componentPromise=compDetails.newAgStackInstance(),callback=_this.afterCellRendererCreated.bind(_this,displayComponentVersionCopy,componentClass);componentPromise&&componentPromise.then(callback)}},"createCellRendererFunc");useTaskService&&this.firstRender?this.beans.animationFrameService.createTask(createCellRendererFunc,this.rowNode.rowIndex,"createTasksP2"):createCellRendererFunc()},CellComp2.prototype.getCtrl=function(){return this.cellCtrl},CellComp2.prototype.getRowCtrl=function(){return this.rowCtrl},CellComp2.prototype.getCellRenderer=function(){return this.cellRenderer},CellComp2.prototype.getCellEditor=function(){return this.cellEditor},CellComp2.prototype.afterCellRendererCreated=function(cellRendererVersion,cellRendererClass,cellRenderer){if(!this.isAlive()||cellRendererVersion!==this.rendererVersion)this.beans.context.destroyBean(cellRenderer);else if(this.cellRenderer=cellRenderer,this.cellRendererClass=cellRendererClass,this.cellRendererGui=this.cellRenderer.getGui(),null!=this.cellRendererGui){var eParent=this.getParentOfValue();clearElement(eParent),eParent.appendChild(this.cellRendererGui)}},CellComp2.prototype.afterCellEditorCreated=function(requestVersion,cellEditor,params,popup,position){if(requestVersion!==this.editorVersion)this.beans.context.destroyBean(cellEditor);else{if(cellEditor.isCancelBeforeStart&&cellEditor.isCancelBeforeStart())return this.beans.context.destroyBean(cellEditor),void this.cellCtrl.stopEditing(!0);if(!cellEditor.getGui)return console.warn("AG Grid: cellEditor for column "+this.column.getId()+" is missing getGui() method"),void this.beans.context.destroyBean(cellEditor);this.cellEditor=cellEditor,this.cellEditorGui=cellEditor.getGui();var cellEditorInPopup=popup||void 0!==cellEditor.isPopup&&cellEditor.isPopup();cellEditorInPopup?this.addPopupCellEditor(params,position):this.addInCellEditor(),this.refreshEditStyles(!0,cellEditorInPopup),cellEditor.afterGuiAttached&&cellEditor.afterGuiAttached()}},CellComp2.prototype.refreshEditStyles=function(editing,isPopup){var _a;this.addOrRemoveCssClass("ag-cell-inline-editing",editing&&!isPopup),this.addOrRemoveCssClass("ag-cell-popup-editing",editing&&!!isPopup),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!editing||!!isPopup),null===(_a=this.rowCtrl)||void 0===_a||_a.setInlineEditingCss(editing)},CellComp2.prototype.addInCellEditor=function(){var eGui=this.getGui(),eDocument=this.beans.gridOptionsService.getDocument();(eGui.contains(eDocument.activeElement)&&eGui.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui)&&this.getParentOfValue().appendChild(this.cellEditorGui)},CellComp2.prototype.addPopupCellEditor=function(params,position){var _this=this;"fullRow"===this.beans.gridOptionsService.get("editType")&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");var cellEditor=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new PopupEditorWrapper(params));var ePopupGui=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&ePopupGui.appendChild(this.cellEditorGui);var popupService=this.beans.popupService,useModelPopup=this.beans.gridOptionsService.is("stopEditingWhenCellsLoseFocus"),positionToUse=position??(cellEditor.getPopupPosition?cellEditor.getPopupPosition():"over"),isRtl=this.beans.gridOptionsService.is("enableRtl"),positionParams={ePopup:ePopupGui,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:positionToUse,alignSide:isRtl?"right":"left",keepWithinBounds:!0},positionCallback=popupService.positionPopupByComponent.bind(popupService,positionParams),translate=this.beans.localeService.getLocaleTextFunc(),addPopupRes=popupService.addPopup({modal:useModelPopup,eChild:ePopupGui,closeOnEsc:!0,closedCallback:function(){_this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback,ariaLabel:translate("ariaLabelCellEditor","Cell Editor")});addPopupRes&&(this.hideEditorPopup=addPopupRes.hideFunc)},CellComp2.prototype.detach=function(){this.eRow.removeChild(this.getGui())},CellComp2.prototype.destroy=function(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),_super.prototype.destroy.call(this)},CellComp2.prototype.clearParentOfValue=function(){var eGui=this.getGui(),eDocument=this.beans.gridOptionsService.getDocument();eGui.contains(eDocument.activeElement)&&browserSupportsPreventScroll()&&eGui.focus({preventScroll:!0}),clearElement(this.getParentOfValue())},CellComp2}(Component),__extends$1E=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),RowComp=function(_super){function RowComp2(ctrl,beans,containerType){var _this=_super.call(this)||this;_this.cellComps={},_this.beans=beans,_this.rowCtrl=ctrl,_this.setTemplate('<div comp-id="'+_this.getCompId()+'" style="'+_this.getInitialStyle(containerType)+'"/>');var eGui=_this.getGui(),style=eGui.style,compProxy={setDomOrder:function(domOrder){return _this.domOrder=domOrder},setCellCtrls:function(cellCtrls){return _this.setCellCtrls(cellCtrls)},showFullWidth:function(compDetails){return _this.showFullWidth(compDetails)},getFullWidthCellRenderer:function(){return _this.getFullWidthCellRenderer()},addOrRemoveCssClass:function(name,on){return _this.addOrRemoveCssClass(name,on)},setUserStyles:function(styles){return addStylesToElement(eGui,styles)},setTop:function(top){return style.top=top},setTransform:function(transform){return style.transform=transform},setRowIndex:function(rowIndex){return eGui.setAttribute("row-index",rowIndex)},setRole:function(role){return setAriaRole(eGui,role)},setRowId:function(rowId){return eGui.setAttribute("row-id",rowId)},setRowBusinessKey:function(businessKey){return eGui.setAttribute("row-business-key",businessKey)},setTabIndex:function(tabIndex){return eGui.setAttribute("tabindex",tabIndex.toString())}};return ctrl.setComp(compProxy,_this.getGui(),containerType),_this.addDestroyFunc(function(){ctrl.unsetComp(containerType)}),_this}return __extends$1E(RowComp2,_super),__name(RowComp2,"RowComp"),RowComp2.prototype.getInitialStyle=function(containerType){var transform=this.rowCtrl.getInitialTransform(containerType),top=this.rowCtrl.getInitialRowTop(containerType);return transform?"transform: "+transform:"top: "+top},RowComp2.prototype.showFullWidth=function(compDetails){var _this=this,callback=__name(function(cellRenderer){if(_this.isAlive()){var eGui=cellRenderer.getGui();_this.getGui().appendChild(eGui),_this.rowCtrl.setupDetailRowAutoHeight(eGui),_this.setFullWidthRowComp(cellRenderer)}else _this.beans.context.destroyBean(cellRenderer)},"callback"),res=compDetails.newAgStackInstance();res&&res.then(callback)},RowComp2.prototype.setCellCtrls=function(cellCtrls){var _this=this,cellsToRemove=Object.assign({},this.cellComps);cellCtrls.forEach(function(cellCtrl){var key=cellCtrl.getInstanceId();null==_this.cellComps[key]?_this.newCellComp(cellCtrl):cellsToRemove[key]=null});var cellCompsToRemove=getAllValuesInObject(cellsToRemove).filter(function(cellComp){return null!=cellComp});this.destroyCells(cellCompsToRemove),this.ensureDomOrder(cellCtrls)},RowComp2.prototype.ensureDomOrder=function(cellCtrls){var _this=this;if(this.domOrder){var elementsInOrder=[];cellCtrls.forEach(function(cellCtrl){var cellComp=_this.cellComps[cellCtrl.getInstanceId()];cellComp&&elementsInOrder.push(cellComp.getGui())}),setDomChildOrder(this.getGui(),elementsInOrder)}},RowComp2.prototype.newCellComp=function(cellCtrl){var cellComp=new CellComp(this.beans,cellCtrl,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[cellCtrl.getInstanceId()]=cellComp,this.getGui().appendChild(cellComp.getGui())},RowComp2.prototype.destroy=function(){_super.prototype.destroy.call(this),this.destroyAllCells()},RowComp2.prototype.destroyAllCells=function(){var cellsToDestroy=getAllValuesInObject(this.cellComps).filter(function(cp){return null!=cp});this.destroyCells(cellsToDestroy)},RowComp2.prototype.setFullWidthRowComp=function(fullWidthRowComponent){var _this=this;this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=fullWidthRowComponent,this.addDestroyFunc(function(){_this.fullWidthCellRenderer=_this.beans.context.destroyBean(_this.fullWidthCellRenderer)})},RowComp2.prototype.getFullWidthCellRenderer=function(){return this.fullWidthCellRenderer},RowComp2.prototype.destroyCells=function(cellComps){var _this=this;cellComps.forEach(function(cellComp){if(cellComp){var instanceId=cellComp.getCtrl().getInstanceId();_this.cellComps[instanceId]===cellComp&&(cellComp.detach(),cellComp.destroy(),_this.cellComps[instanceId]=null)}})},RowComp2}(Component),__extends$1D=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$5=function(){return __assign$5=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$5.apply(this,arguments)},__decorate$1y=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};function templateFactory(){var name=Component.elementGettingCreated.getAttribute("name"),cssClasses=RowContainerCtrl.getRowContainerCssClasses(name),template1=name===RowContainerName.CENTER,template2=name===RowContainerName.TOP_CENTER||name===RowContainerName.STICKY_TOP_CENTER||name===RowContainerName.BOTTOM_CENTER;return template1?'<div class="'+cssClasses.wrapper+'" ref="eWrapper" role="presentation">\n                <div class="'+cssClasses.viewport+'" ref="eViewport" role="presentation">\n                    <div class="'+cssClasses.container+'" ref="eContainer"></div>\n                </div>\n            </div>':template2?'<div class="'+cssClasses.viewport+'" ref="eViewport" role="presentation">\n                <div class="'+cssClasses.container+'" ref="eContainer"></div>\n            </div>':'<div class="'+cssClasses.container+'" ref="eContainer"></div>'}__name(templateFactory,"templateFactory");var HeaderRowType,HeaderRowType2,RowContainerComp=function(_super){function RowContainerComp2(){var _this=_super.call(this,templateFactory())||this;return _this.rowComps={},_this.name=Component.elementGettingCreated.getAttribute("name"),_this.type=getRowContainerTypeForName(_this.name),_this}return __extends$1D(RowContainerComp2,_super),__name(RowContainerComp2,"RowContainerComp"),RowContainerComp2.prototype.postConstruct=function(){var _this=this,compProxy={setViewportHeight:function(height){return _this.eViewport.style.height=height},setRowCtrls:function(rowCtrls){return _this.setRowCtrls(rowCtrls)},setDomOrder:function(domOrder){_this.domOrder=domOrder},setContainerWidth:function(width){return _this.eContainer.style.width=width}};this.createManagedBean(new RowContainerCtrl(this.name)).setComp(compProxy,this.eContainer,this.eViewport,this.eWrapper)},RowContainerComp2.prototype.preDestroy=function(){this.setRowCtrls([])},RowContainerComp2.prototype.setRowCtrls=function(rowCtrls){var _this=this,oldRows=__assign$5({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;var processRow=__name(function(rowCon){var instanceId=rowCon.getInstanceId(),existingRowComp=oldRows[instanceId];if(existingRowComp)_this.rowComps[instanceId]=existingRowComp,delete oldRows[instanceId],_this.ensureDomOrder(existingRowComp.getGui());else{var rowComp=new RowComp(rowCon,_this.beans,_this.type);_this.rowComps[instanceId]=rowComp,_this.appendRow(rowComp.getGui())}},"processRow");rowCtrls.forEach(processRow),getAllValuesInObject(oldRows).forEach(function(oldRowComp){_this.eContainer.removeChild(oldRowComp.getGui()),oldRowComp.destroy()}),setAriaRole(this.eContainer,rowCtrls.length?"rowgroup":"presentation")},RowContainerComp2.prototype.appendRow=function(element){this.domOrder?insertWithDomOrder(this.eContainer,element,this.lastPlacedElement):this.eContainer.appendChild(element),this.lastPlacedElement=element},RowContainerComp2.prototype.ensureDomOrder=function(eRow){this.domOrder&&(ensureDomOrder(this.eContainer,eRow,this.lastPlacedElement),this.lastPlacedElement=eRow)},__decorate$1y([Autowired("beans")],RowContainerComp2.prototype,"beans",void 0),__decorate$1y([RefSelector("eViewport")],RowContainerComp2.prototype,"eViewport",void 0),__decorate$1y([RefSelector("eContainer")],RowContainerComp2.prototype,"eContainer",void 0),__decorate$1y([RefSelector("eWrapper")],RowContainerComp2.prototype,"eWrapper",void 0),__decorate$1y([PostConstruct],RowContainerComp2.prototype,"postConstruct",null),__decorate$1y([PreDestroy],RowContainerComp2.prototype,"preDestroy",null),RowContainerComp2}(Component),__decorate$1x=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},BodyDropPivotTarget=function(){function BodyDropPivotTarget2(pinned){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=pinned}return __name(BodyDropPivotTarget2,"BodyDropPivotTarget"),BodyDropPivotTarget2.prototype.onDragEnter=function(draggingEvent){var _this=this;if(this.clearColumnsList(),!this.gridOptionsService.is("functionsReadOnly")){var dragColumns=draggingEvent.dragItem.columns;dragColumns&&dragColumns.forEach(function(column){column.isPrimary()&&(column.isAnyFunctionActive()||(column.isAllowValue()?_this.columnsToAggregate.push(column):column.isAllowRowGroup()?_this.columnsToGroup.push(column):column.isAllowPivot()&&_this.columnsToPivot.push(column)))})}},BodyDropPivotTarget2.prototype.getIconName=function(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?DragAndDropService.ICON_PINNED:DragAndDropService.ICON_MOVE:null},BodyDropPivotTarget2.prototype.onDragLeave=function(draggingEvent){this.clearColumnsList()},BodyDropPivotTarget2.prototype.clearColumnsList=function(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0},BodyDropPivotTarget2.prototype.onDragging=function(draggingEvent){},BodyDropPivotTarget2.prototype.onDragStop=function(draggingEvent){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")},__decorate$1x([Autowired("columnModel")],BodyDropPivotTarget2.prototype,"columnModel",void 0),__decorate$1x([Autowired("gridOptionsService")],BodyDropPivotTarget2.prototype,"gridOptionsService",void 0),BodyDropPivotTarget2}(),__decorate$1w=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},MoveColumnFeature=function(){function MoveColumnFeature2(pinned,eContainer){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=pinned,this.eContainer=eContainer,this.centerContainer=!exists(pinned)}return __name(MoveColumnFeature2,"MoveColumnFeature"),MoveColumnFeature2.prototype.init=function(){var _this=this;this.ctrlsService.whenReady(function(){_this.gridBodyCon=_this.ctrlsService.getGridBodyCtrl()})},MoveColumnFeature2.prototype.getIconName=function(){return this.pinned?DragAndDropService.ICON_PINNED:DragAndDropService.ICON_MOVE},MoveColumnFeature2.prototype.onDragEnter=function(draggingEvent){var columns=draggingEvent.dragItem.columns;if(draggingEvent.dragSource.type===DragSourceType.ToolPanel)this.setColumnsVisible(columns,!0,"uiColumnDragged");else{var visibleState_1=draggingEvent.dragItem.visibleState,visibleColumns=(columns||[]).filter(function(column){return visibleState_1[column.getId()]});this.setColumnsVisible(visibleColumns,!0,"uiColumnDragged")}this.setColumnsPinned(columns,this.pinned,"uiColumnDragged"),this.onDragging(draggingEvent,!0,!0)},MoveColumnFeature2.prototype.onDragLeave=function(){this.ensureIntervalCleared(),this.lastMovedInfo=null},MoveColumnFeature2.prototype.setColumnsVisible=function(columns,visible,source){if(void 0===source&&(source="api"),columns){var allowedCols=columns.filter(function(c){return!c.getColDef().lockVisible});this.columnModel.setColumnsVisible(allowedCols,visible,source)}},MoveColumnFeature2.prototype.setColumnsPinned=function(columns,pinned,source){if(void 0===source&&(source="api"),columns){var allowedCols=columns.filter(function(c){return!c.getColDef().lockPinned});this.columnModel.setColumnsPinned(allowedCols,pinned,source)}},MoveColumnFeature2.prototype.onDragStop=function(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null},MoveColumnFeature2.prototype.normaliseX=function(x){this.gridOptionsService.is("enableRtl")&&(x=this.eContainer.clientWidth-x);return this.centerContainer&&(x+=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft()),x},MoveColumnFeature2.prototype.checkCenterForScrolling=function(xAdjustedForScroll){if(this.centerContainer){var firstVisiblePixel=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft(),lastVisiblePixel=firstVisiblePixel+this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();this.gridOptionsService.is("enableRtl")?(this.needToMoveRight=xAdjustedForScroll<firstVisiblePixel+50,this.needToMoveLeft=xAdjustedForScroll>lastVisiblePixel-50):(this.needToMoveLeft=xAdjustedForScroll<firstVisiblePixel+50,this.needToMoveRight=xAdjustedForScroll>lastVisiblePixel-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}},MoveColumnFeature2.prototype.onDragging=function(draggingEvent,fromEnter,fakeEvent,finished){var _a,_this=this;if(void 0===draggingEvent&&(draggingEvent=this.lastDraggingEvent),void 0===fromEnter&&(fromEnter=!1),void 0===fakeEvent&&(fakeEvent=!1),void 0===finished&&(finished=!1),finished){if(this.lastMovedInfo){var _b=this.lastMovedInfo,columns=_b.columns,toIndex=_b.toIndex;this.moveColumns(columns,toIndex,"uiColumnMoved",!0)}}else if(this.lastDraggingEvent=draggingEvent,!missing(draggingEvent.hDirection)){var mouseX=this.normaliseX(draggingEvent.x);fromEnter||this.checkCenterForScrolling(mouseX);var hDirection=this.normaliseDirection(draggingEvent.hDirection),dragSourceType=draggingEvent.dragSource.type,allMovingColumns=(null===(_a=draggingEvent.dragSource.getDragItem().columns)||void 0===_a?void 0:_a.filter(function(col){return!col.getColDef().lockPinned||col.getPinned()==_this.pinned}))||[];this.attemptMoveColumns({dragSourceType,allMovingColumns,hDirection,mouseX,fromEnter,fakeEvent})}},MoveColumnFeature2.prototype.normaliseDirection=function(hDirection){if(!this.gridOptionsService.is("enableRtl"))return hDirection;switch(hDirection){case HorizontalDirection.Left:return HorizontalDirection.Right;case HorizontalDirection.Right:return HorizontalDirection.Left;default:console.error("AG Grid: Unknown direction "+hDirection)}},MoveColumnFeature2.prototype.attemptMoveColumns=function(params){var dragSourceType=params.dragSourceType,hDirection=params.hDirection,mouseX=params.mouseX,fromEnter=params.fromEnter,fakeEvent=params.fakeEvent,draggingLeft=hDirection===HorizontalDirection.Left,draggingRight=hDirection===HorizontalDirection.Right,allMovingColumns=params.allMovingColumns;if(dragSourceType===DragSourceType.HeaderCell){var newCols_1=[];allMovingColumns.forEach(function(col){for(var movingGroup=null,parent=col.getParent();null!=parent&&1===parent.getDisplayedLeafColumns().length;)movingGroup=parent,parent=parent.getParent();null!=movingGroup?movingGroup.getLeafColumns().forEach(function(newCol){newCols_1.includes(newCol)||newCols_1.push(newCol)}):newCols_1.includes(col)||newCols_1.push(col)}),allMovingColumns=newCols_1}var allMovingColumnsOrdered=allMovingColumns.slice();this.columnModel.sortColumnsLikeGridColumns(allMovingColumnsOrdered);var validMoves=this.calculateValidMoves(allMovingColumnsOrdered,draggingRight,mouseX),oldIndex=this.calculateOldIndex(allMovingColumnsOrdered);if(0!==validMoves.length){var firstValidMove=validMoves[0],constrainDirection=null!==oldIndex&&!fromEnter;if(dragSourceType==DragSourceType.HeaderCell&&(constrainDirection=null!==oldIndex),!constrainDirection||fakeEvent||!(draggingLeft&&firstValidMove>=oldIndex||draggingRight&&firstValidMove<=oldIndex)){for(var displayedCols=this.columnModel.getAllDisplayedColumns(),potentialMoves=[],targetOrder=null,i=0;i<validMoves.length;i++){var move=validMoves[i],order=this.columnModel.getProposedColumnOrder(allMovingColumnsOrdered,move);if(this.columnModel.doesOrderPassRules(order)){var displayedOrder=order.filter(function(col){return displayedCols.includes(col)});if(null===targetOrder)targetOrder=displayedOrder;else if(!_.areEqual(displayedOrder,targetOrder))break;var fragCount=this.groupFragCount(order);potentialMoves.push({move,fragCount})}}0!==potentialMoves.length&&(potentialMoves.sort(function(a,b){return a.fragCount-b.fragCount}),this.moveColumns(allMovingColumns,potentialMoves[0].move,"uiColumnMoved",!1))}}},MoveColumnFeature2.prototype.calculateOldIndex=function(movingCols){var gridCols=this.columnModel.getAllGridColumns(),indexes=sortNumerically(movingCols.map(function(col){return gridCols.indexOf(col)})),firstIndex=indexes[0];return last(indexes)-firstIndex!==indexes.length-1?null:firstIndex},MoveColumnFeature2.prototype.moveColumns=function(columns,toIndex,source,finished){this.columnModel.moveColumns(columns,toIndex,source,finished),this.lastMovedInfo=finished?null:{columns,toIndex}},MoveColumnFeature2.prototype.groupFragCount=function(columns){function parents(col){for(var result=[],parent=col.getOriginalParent();null!=parent;)result.push(parent),parent=parent.getOriginalParent();return result}__name(parents,"parents");for(var count=0,_loop_1=__name(function(i2){var _a,a=parents(columns[i2]),b=parents(columns[i2+1]);_a=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}(a.length>b.length?[a,b]:[b,a],2),a=_a[0],b=_a[1],a.forEach(function(parent){-1===b.indexOf(parent)&&count++})},"_loop_1"),i=0;i<columns.length-1;i++)_loop_1(i);return count},MoveColumnFeature2.prototype.calculateValidMoves=function(movingCols,draggingRight,mouseX){if(this.gridOptionsService.is("suppressMovableColumns")||movingCols.some(function(col2){return col2.getColDef().suppressMovable}))return[];var firstValidMove,allDisplayedCols=this.columnModel.getDisplayedColumns(this.pinned),allGridCols=this.columnModel.getAllGridColumns(),movingDisplayedCols=allDisplayedCols.filter(function(col2){return includes(movingCols,col2)}),otherDisplayedCols=allDisplayedCols.filter(function(col2){return!includes(movingCols,col2)}),otherGridCols=allGridCols.filter(function(col2){return!includes(movingCols,col2)}),displayIndex=0,availableWidth=mouseX;if(draggingRight){var widthOfMovingDisplayedCols_1=0;movingDisplayedCols.forEach(function(col2){return widthOfMovingDisplayedCols_1+=col2.getActualWidth()}),availableWidth-=widthOfMovingDisplayedCols_1}if(availableWidth>0){for(var i=0;i<otherDisplayedCols.length;i++){if((availableWidth-=otherDisplayedCols[i].getActualWidth())<0)break;displayIndex++}draggingRight&&displayIndex++}if(displayIndex>0){var leftColumn=otherDisplayedCols[displayIndex-1];firstValidMove=otherGridCols.indexOf(leftColumn)+1}else-1===(firstValidMove=otherGridCols.indexOf(otherDisplayedCols[0]))&&(firstValidMove=0);var validMoves=[firstValidMove],numberComparator=__name(function(a,b){return a-b},"numberComparator");if(draggingRight){for(var pointer=firstValidMove+1,lastIndex=allGridCols.length-1;pointer<=lastIndex;)validMoves.push(pointer),pointer++;validMoves.sort(numberComparator)}else{pointer=firstValidMove,lastIndex=allGridCols.length-1;for(var displacedCol=allGridCols[pointer];pointer<=lastIndex&&this.isColumnHidden(allDisplayedCols,displacedCol);)pointer++,validMoves.push(pointer),displacedCol=allGridCols[pointer];pointer=firstValidMove-1;for(;pointer>=0;)validMoves.push(pointer),pointer--;validMoves.sort(numberComparator).reverse()}return validMoves},MoveColumnFeature2.prototype.isColumnHidden=function(displayedColumns,col){return displayedColumns.indexOf(col)<0},MoveColumnFeature2.prototype.ensureIntervalStarted=function(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_RIGHT,!0))},MoveColumnFeature2.prototype.ensureIntervalCleared=function(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_MOVE))},MoveColumnFeature2.prototype.moveInterval=function(){var pixelsToMove;this.intervalCount++,(pixelsToMove=10+5*this.intervalCount)>100&&(pixelsToMove=100);var pixelsMoved=null,scrollFeature=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?pixelsMoved=scrollFeature.scrollHorizontally(-pixelsToMove):this.needToMoveRight&&(pixelsMoved=scrollFeature.scrollHorizontally(pixelsToMove)),0!==pixelsMoved)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;var columnsThatCanPin=this.lastDraggingEvent.dragItem.columns.filter(function(c){return!c.getColDef().lockPinned});if(columnsThatCanPin.length>0&&(this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_PINNED),this.failedMoveAttempts>7)){var pinType=this.needToMoveLeft?"left":"right";this.setColumnsPinned(columnsThatCanPin,pinType,"uiColumnDragged"),this.dragAndDropService.nudge()}}},__decorate$1w([Autowired("columnModel")],MoveColumnFeature2.prototype,"columnModel",void 0),__decorate$1w([Autowired("dragAndDropService")],MoveColumnFeature2.prototype,"dragAndDropService",void 0),__decorate$1w([Autowired("gridOptionsService")],MoveColumnFeature2.prototype,"gridOptionsService",void 0),__decorate$1w([Autowired("ctrlsService")],MoveColumnFeature2.prototype,"ctrlsService",void 0),__decorate$1w([PostConstruct],MoveColumnFeature2.prototype,"init",null),MoveColumnFeature2}(),__extends$1C=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1v=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},BodyDropTarget=function(_super){function BodyDropTarget2(pinned,eContainer){var _this=_super.call(this)||this;return _this.pinned=pinned,_this.eContainer=eContainer,_this}return __extends$1C(BodyDropTarget2,_super),__name(BodyDropTarget2,"BodyDropTarget"),BodyDropTarget2.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady(function(p){switch(_this.pinned){case"left":_this.eSecondaryContainers=[[p.gridBodyCtrl.getBodyViewportElement(),p.leftRowContainerCtrl.getContainerElement()],[p.bottomLeftRowContainerCtrl.getContainerElement()],[p.topLeftRowContainerCtrl.getContainerElement()]];break;case"right":_this.eSecondaryContainers=[[p.gridBodyCtrl.getBodyViewportElement(),p.rightRowContainerCtrl.getContainerElement()],[p.bottomRightRowContainerCtrl.getContainerElement()],[p.topRightRowContainerCtrl.getContainerElement()]];break;default:_this.eSecondaryContainers=[[p.gridBodyCtrl.getBodyViewportElement(),p.centerRowContainerCtrl.getViewportElement()],[p.bottomCenterRowContainerCtrl.getViewportElement()],[p.topCenterRowContainerCtrl.getViewportElement()]]}})},BodyDropTarget2.prototype.isInterestedIn=function(type){return type===DragSourceType.HeaderCell||type===DragSourceType.ToolPanel&&this.gridOptionsService.is("allowDragFromColumnsToolPanel")},BodyDropTarget2.prototype.getSecondaryContainers=function(){return this.eSecondaryContainers},BodyDropTarget2.prototype.getContainer=function(){return this.eContainer},BodyDropTarget2.prototype.init=function(){this.moveColumnFeature=this.createManagedBean(new MoveColumnFeature(this.pinned,this.eContainer)),this.bodyDropPivotTarget=this.createManagedBean(new BodyDropPivotTarget(this.pinned)),this.dragAndDropService.addDropTarget(this)},BodyDropTarget2.prototype.getIconName=function(){return this.currentDropListener.getIconName()},BodyDropTarget2.prototype.isDropColumnInPivotMode=function(draggingEvent){return this.columnModel.isPivotMode()&&draggingEvent.dragSource.type===DragSourceType.ToolPanel},BodyDropTarget2.prototype.onDragEnter=function(draggingEvent){this.currentDropListener=this.isDropColumnInPivotMode(draggingEvent)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(draggingEvent)},BodyDropTarget2.prototype.onDragLeave=function(params){this.currentDropListener.onDragLeave(params)},BodyDropTarget2.prototype.onDragging=function(params){this.currentDropListener.onDragging(params)},BodyDropTarget2.prototype.onDragStop=function(params){this.currentDropListener.onDragStop(params)},__decorate$1v([Autowired("dragAndDropService")],BodyDropTarget2.prototype,"dragAndDropService",void 0),__decorate$1v([Autowired("columnModel")],BodyDropTarget2.prototype,"columnModel",void 0),__decorate$1v([Autowired("ctrlsService")],BodyDropTarget2.prototype,"ctrlsService",void 0),__decorate$1v([PostConstruct],BodyDropTarget2.prototype,"postConstruct",null),__decorate$1v([PostConstruct],BodyDropTarget2.prototype,"init",null),BodyDropTarget2}(BeanStub),__read$f=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},CssClassApplier=function(){function CssClassApplier2(){}return __name(CssClassApplier2,"CssClassApplier"),CssClassApplier2.getHeaderClassesFromColDef=function(abstractColDef,gridOptionsService,column,columnGroup){return missing(abstractColDef)?[]:this.getColumnClassesFromCollDef(abstractColDef.headerClass,abstractColDef,gridOptionsService,column,columnGroup)},CssClassApplier2.getToolPanelClassesFromColDef=function(abstractColDef,gridOptionsService,column,columnGroup){return missing(abstractColDef)?[]:this.getColumnClassesFromCollDef(abstractColDef.toolPanelClass,abstractColDef,gridOptionsService,column,columnGroup)},CssClassApplier2.getClassParams=function(abstractColDef,gridOptionsService,column,columnGroup){return{colDef:abstractColDef,column,columnGroup,api:gridOptionsService.api,columnApi:gridOptionsService.columnApi,context:gridOptionsService.context}},CssClassApplier2.getColumnClassesFromCollDef=function(classesOrFunc,abstractColDef,gridOptionsService,column,columnGroup){if(missing(classesOrFunc))return[];var classToUse;"function"==typeof classesOrFunc?classToUse=classesOrFunc(this.getClassParams(abstractColDef,gridOptionsService,column,columnGroup)):classToUse=classesOrFunc;return"string"==typeof classToUse?[classToUse]:Array.isArray(classToUse)?function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$f(arguments[i]));return ar}(classToUse):[]},CssClassApplier2}(),__extends$1B=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1u=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderCellComp=function(_super){function HeaderCellComp2(ctrl){var _this=_super.call(this,HeaderCellComp2.TEMPLATE,ctrl)||this;return _this.headerCompVersion=0,_this.column=ctrl.getColumnGroupChild(),_this.pinned=ctrl.getPinned(),_this}return __extends$1B(HeaderCellComp2,_super),__name(HeaderCellComp2,"HeaderCellComp"),HeaderCellComp2.prototype.postConstruct=function(){var _this=this,eGui=this.getGui(),setAttribute=__name(function(name,value,element){var actualElement=element||eGui;null!=value&&""!=value?actualElement.setAttribute(name,value):actualElement.removeAttribute(name)},"setAttribute"),compProxy={setWidth:function(width){return eGui.style.width=width},addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},setColId:function(id){return setAttribute("col-id",id)},setTitle:function(title){return setAttribute("title",title)},setAriaDescription:function(label){return setAriaDescription(eGui,label)},setAriaSort:function(sort){return sort?setAriaSort(eGui,sort):removeAriaSort(eGui)},setUserCompDetails:function(compDetails){return _this.setUserCompDetails(compDetails)},getUserCompInstance:function(){return _this.headerComp}};this.ctrl.setComp(compProxy,this.getGui(),this.eResize,this.eHeaderCompWrapper);var selectAllGui=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",selectAllGui)},HeaderCellComp2.prototype.destroyHeaderComp=function(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)},HeaderCellComp2.prototype.setUserCompDetails=function(compDetails){var _this=this;this.headerCompVersion++;var versionCopy=this.headerCompVersion;compDetails.newAgStackInstance().then(function(comp){return _this.afterCompCreated(versionCopy,comp)})},HeaderCellComp2.prototype.afterCompCreated=function(version,headerComp){version==this.headerCompVersion&&this.isAlive()?(this.destroyHeaderComp(),this.headerComp=headerComp,this.headerCompGui=headerComp.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())):this.destroyBean(headerComp)},HeaderCellComp2.TEMPLATE='<div class="ag-header-cell" role="columnheader" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>\n        </div>',__decorate$1u([RefSelector("eResize")],HeaderCellComp2.prototype,"eResize",void 0),__decorate$1u([RefSelector("eHeaderCompWrapper")],HeaderCellComp2.prototype,"eHeaderCompWrapper",void 0),__decorate$1u([PostConstruct],HeaderCellComp2.prototype,"postConstruct",null),__decorate$1u([PreDestroy],HeaderCellComp2.prototype,"destroyHeaderComp",null),HeaderCellComp2}(AbstractHeaderCellComp),__extends$1A=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1t=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderGroupCellComp=function(_super){function HeaderGroupCellComp2(ctrl){return _super.call(this,HeaderGroupCellComp2.TEMPLATE,ctrl)||this}return __extends$1A(HeaderGroupCellComp2,_super),__name(HeaderGroupCellComp2,"HeaderGroupCellComp"),HeaderGroupCellComp2.prototype.postConstruct=function(){var _this=this,eGui=this.getGui(),setAttribute=__name(function(key,value){return null!=value?eGui.setAttribute(key,value):eGui.removeAttribute(key)},"setAttribute"),compProxy={addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},setResizableDisplayed:function(displayed){return setDisplayed(_this.eResize,displayed)},setWidth:function(width){return eGui.style.width=width},setColId:function(id){return eGui.setAttribute("col-id",id)},setAriaExpanded:function(expanded){return setAttribute("aria-expanded",expanded)},setTitle:function(title){return setAttribute("title",title)},setUserCompDetails:function(details){return _this.setUserCompDetails(details)}};this.ctrl.setComp(compProxy,eGui,this.eResize)},HeaderGroupCellComp2.prototype.setUserCompDetails=function(details){var _this=this;details.newAgStackInstance().then(function(comp){return _this.afterHeaderCompCreated(comp)})},HeaderGroupCellComp2.prototype.afterHeaderCompCreated=function(headerGroupComp){var _this=this,destroyFunc=__name(function(){return _this.destroyBean(headerGroupComp)},"destroyFunc");this.isAlive()?(this.getGui().appendChild(headerGroupComp.getGui()),this.addDestroyFunc(destroyFunc),this.ctrl.setDragSource(headerGroupComp.getGui())):destroyFunc()},HeaderGroupCellComp2.TEMPLATE='<div class="ag-header-group-cell" role="columnheader" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>',__decorate$1t([Autowired("userComponentFactory")],HeaderGroupCellComp2.prototype,"userComponentFactory",void 0),__decorate$1t([RefSelector("eResize")],HeaderGroupCellComp2.prototype,"eResize",void 0),__decorate$1t([PostConstruct],HeaderGroupCellComp2.prototype,"postConstruct",null),HeaderGroupCellComp2}(AbstractHeaderCellComp),__extends$1z=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1s=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};(HeaderRowType2=HeaderRowType||(HeaderRowType={})).COLUMN_GROUP="group",HeaderRowType2.COLUMN="column",HeaderRowType2.FLOATING_FILTER="filter";var HeaderNavigationDirection,HeaderNavigationDirection2,HeaderRowComp=function(_super){function HeaderRowComp2(ctrl){var _this=_super.call(this)||this;_this.headerComps={};var extraClass=ctrl.getType()==HeaderRowType.COLUMN_GROUP?"ag-header-row-column-group":ctrl.getType()==HeaderRowType.FLOATING_FILTER?"ag-header-row-column-filter":"ag-header-row-column";return _this.setTemplate('<div class="ag-header-row '+extraClass+'" role="row"></div>'),_this.ctrl=ctrl,_this}return __extends$1z(HeaderRowComp2,_super),__name(HeaderRowComp2,"HeaderRowComp"),HeaderRowComp2.prototype.init=function(){var _this=this,compProxy={setTransform:function(transform){return _this.getGui().style.transform=transform},setHeight:function(height){return _this.getGui().style.height=height},setTop:function(top){return _this.getGui().style.top=top},setHeaderCtrls:function(ctrls){return _this.setHeaderCtrls(ctrls)},setWidth:function(width){return _this.getGui().style.width=width},setAriaRowIndex:function(rowIndex){return setAriaRowIndex(_this.getGui(),rowIndex)}};this.ctrl.setComp(compProxy)},HeaderRowComp2.prototype.destroyHeaderCtrls=function(){this.setHeaderCtrls([])},HeaderRowComp2.prototype.setHeaderCtrls=function(ctrls){var _this=this;if(this.isAlive()){var oldComps=this.headerComps;this.headerComps={},ctrls.forEach(function(ctrl){var id=ctrl.getInstanceId(),comp=oldComps[id];delete oldComps[id],null==comp&&(comp=_this.createHeaderComp(ctrl),_this.getGui().appendChild(comp.getGui())),_this.headerComps[id]=comp}),iterateObject(oldComps,function(id,comp){_this.getGui().removeChild(comp.getGui()),_this.destroyBean(comp)});var isEnsureDomOrder=this.gridOptionsService.is("ensureDomOrder"),isPrintLayout=this.gridOptionsService.isDomLayout("print");if(isEnsureDomOrder||isPrintLayout){var comps=getAllValuesInObject(this.headerComps);comps.sort(function(a,b){return a.getCtrl().getColumnGroupChild().getLeft()-b.getCtrl().getColumnGroupChild().getLeft()});var elementsInOrder=comps.map(function(c){return c.getGui()});setDomChildOrder(this.getGui(),elementsInOrder)}}},HeaderRowComp2.prototype.createHeaderComp=function(headerCtrl){var result;switch(this.ctrl.getType()){case HeaderRowType.COLUMN_GROUP:result=new HeaderGroupCellComp(headerCtrl);break;case HeaderRowType.FLOATING_FILTER:result=new HeaderFilterCellComp(headerCtrl);break;default:result=new HeaderCellComp(headerCtrl)}return this.createBean(result),result.setParentComponent(this),result},__decorate$1s([PostConstruct],HeaderRowComp2.prototype,"init",null),__decorate$1s([PreDestroy],HeaderRowComp2.prototype,"destroyHeaderCtrls",null),HeaderRowComp2}(Component),__extends$1y=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1r=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},instanceIdSequence$1=0,AbstractHeaderCellCtrl=function(_super){function AbstractHeaderCellCtrl2(columnGroupChild,parentRowCtrl){var _this=_super.call(this)||this;return _this.lastFocusEvent=null,_this.columnGroupChild=columnGroupChild,_this.parentRowCtrl=parentRowCtrl,_this.instanceId=columnGroupChild.getUniqueId()+"-"+instanceIdSequence$1++,_this}return __extends$1y(AbstractHeaderCellCtrl2,_super),__name(AbstractHeaderCellCtrl2,"AbstractHeaderCellCtrl"),AbstractHeaderCellCtrl2.prototype.shouldStopEventPropagation=function(e){var _a=this.focusService.getFocusedHeader(),headerRowIndex=_a.headerRowIndex,column=_a.column;return isUserSuppressingHeaderKeyboardEvent(this.gridOptionsService,e,headerRowIndex,column)},AbstractHeaderCellCtrl2.prototype.getWrapperHasFocus=function(){return this.gridOptionsService.getDocument().activeElement===this.eGui},AbstractHeaderCellCtrl2.prototype.setGui=function(eGui){this.eGui=eGui,this.addDomData()},AbstractHeaderCellCtrl2.prototype.handleKeyDown=function(e){var wrapperHasFocus=this.getWrapperHasFocus();switch(e.key){case KeyCode.PAGE_DOWN:case KeyCode.PAGE_UP:case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:wrapperHasFocus&&e.preventDefault()}},AbstractHeaderCellCtrl2.prototype.addDomData=function(){var _this=this,key=AbstractHeaderCellCtrl2.DOM_DATA_KEY_HEADER_CTRL;this.gridOptionsService.setDomData(this.eGui,key,this),this.addDestroyFunc(function(){return _this.gridOptionsService.setDomData(_this.eGui,key,null)})},AbstractHeaderCellCtrl2.prototype.getGui=function(){return this.eGui},AbstractHeaderCellCtrl2.prototype.focus=function(event){return!!this.eGui&&(this.lastFocusEvent=event||null,this.eGui.focus(),!0)},AbstractHeaderCellCtrl2.prototype.getRowIndex=function(){return this.parentRowCtrl.getRowIndex()},AbstractHeaderCellCtrl2.prototype.getParentRowCtrl=function(){return this.parentRowCtrl},AbstractHeaderCellCtrl2.prototype.getPinned=function(){return this.parentRowCtrl.getPinned()},AbstractHeaderCellCtrl2.prototype.getInstanceId=function(){return this.instanceId},AbstractHeaderCellCtrl2.prototype.getColumnGroupChild=function(){return this.columnGroupChild},AbstractHeaderCellCtrl2.DOM_DATA_KEY_HEADER_CTRL="headerCtrl",__decorate$1r([Autowired("focusService")],AbstractHeaderCellCtrl2.prototype,"focusService",void 0),__decorate$1r([Autowired("beans")],AbstractHeaderCellCtrl2.prototype,"beans",void 0),__decorate$1r([Autowired("userComponentFactory")],AbstractHeaderCellCtrl2.prototype,"userComponentFactory",void 0),AbstractHeaderCellCtrl2}(BeanStub),__extends$1x=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),SetLeftFeature=function(_super){function SetLeftFeature2(columnOrGroup,eCell,beans,colsSpanning){var _this=_super.call(this)||this;return _this.columnOrGroup=columnOrGroup,_this.eCell=eCell,_this.ariaEl=_this.eCell.querySelector("[role=columnheader]")||_this.eCell,_this.colsSpanning=colsSpanning,_this.beans=beans,_this}return __extends$1x(SetLeftFeature2,_super),__name(SetLeftFeature2,"SetLeftFeature"),SetLeftFeature2.prototype.setColsSpanning=function(colsSpanning){this.colsSpanning=colsSpanning,this.onLeftChanged()},SetLeftFeature2.prototype.getColumnOrGroup=function(){return this.beans.gridOptionsService.is("enableRtl")&&this.colsSpanning?last(this.colsSpanning):this.columnOrGroup},SetLeftFeature2.prototype.postConstruct=function(){this.addManagedListener(this.columnOrGroup,Column.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))},SetLeftFeature2.prototype.setLeftFirstTime=function(){var suppressMoveAnimation=this.beans.gridOptionsService.is("suppressColumnMoveAnimation"),oldLeftExists=exists(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&oldLeftExists&&!suppressMoveAnimation?this.animateInLeft():this.onLeftChanged()},SetLeftFeature2.prototype.animateInLeft=function(){var _this=this,colOrGroup=this.getColumnOrGroup(),left=colOrGroup.getLeft(),oldLeft=colOrGroup.getOldLeft(),oldActualLeft=this.modifyLeftForPrintLayout(colOrGroup,oldLeft),actualLeft=this.modifyLeftForPrintLayout(colOrGroup,left);this.setLeft(oldActualLeft),this.actualLeft=actualLeft,this.beans.columnAnimationService.executeNextVMTurn(function(){_this.actualLeft===actualLeft&&_this.setLeft(actualLeft)})},SetLeftFeature2.prototype.onLeftChanged=function(){var colOrGroup=this.getColumnOrGroup(),left=colOrGroup.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(colOrGroup,left),this.setLeft(this.actualLeft)},SetLeftFeature2.prototype.modifyLeftForPrintLayout=function(colOrGroup,leftPosition){if(!this.beans.gridOptionsService.isDomLayout("print")||"left"===colOrGroup.getPinned())return leftPosition;var leftWidth=this.beans.columnModel.getDisplayedColumnsLeftWidth();return"right"===colOrGroup.getPinned()?leftWidth+this.beans.columnModel.getBodyContainerWidth()+leftPosition:leftWidth+leftPosition},SetLeftFeature2.prototype.setLeft=function(value){var indexColumn;if(exists(value)&&(this.eCell.style.left=value+"px"),this.columnOrGroup instanceof Column)indexColumn=this.columnOrGroup;else{var children=this.columnOrGroup.getLeafColumns();if(!children.length)return;children.length>1&&setAriaColSpan(this.ariaEl,children.length),indexColumn=children[0]}var index=this.beans.columnModel.getAriaColumnIndex(indexColumn);setAriaColIndex(this.ariaEl,index)},function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PostConstruct],SetLeftFeature2.prototype,"postConstruct",null),SetLeftFeature2}(BeanStub),__extends$1w=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1p=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HoverFeature=function(_super){function HoverFeature2(columns,element){var _this=_super.call(this)||this;return _this.columns=columns,_this.element=element,_this}return __extends$1w(HoverFeature2,_super),__name(HoverFeature2,"HoverFeature"),HoverFeature2.prototype.postConstruct=function(){this.gridOptionsService.is("columnHoverHighlight")&&this.addMouseHoverListeners()},HoverFeature2.prototype.addMouseHoverListeners=function(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))},HoverFeature2.prototype.onMouseOut=function(){this.columnHoverService.clearMouseOver()},HoverFeature2.prototype.onMouseOver=function(){this.columnHoverService.setMouseOver(this.columns)},__decorate$1p([Autowired("columnHoverService")],HoverFeature2.prototype,"columnHoverService",void 0),__decorate$1p([PostConstruct],HoverFeature2.prototype,"postConstruct",null),HoverFeature2}(BeanStub),__extends$1v=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1o=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderFilterCellCtrl=function(_super){function HeaderFilterCellCtrl2(column,parentRowCtrl){var _this=_super.call(this,column,parentRowCtrl)||this;return _this.column=column,_this}return __extends$1v(HeaderFilterCellCtrl2,_super),__name(HeaderFilterCellCtrl2,"HeaderFilterCellCtrl"),HeaderFilterCellCtrl2.prototype.setComp=function(comp,eGui,eButtonShowMainFilter,eFloatingFilterBody){_super.prototype.setGui.call(this,eGui),this.comp=comp,this.eButtonShowMainFilter=eButtonShowMainFilter,this.eFloatingFilterBody=eFloatingFilterBody;var colDef=this.column.getColDef(),filterExists=!!colDef.filter||!!colDef.filterFramework,floatingFilterExists=!!colDef.floatingFilter;this.active=filterExists&&floatingFilterExists,this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.active&&this.addManagedListener(this.column,Column.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this))},HeaderFilterCellCtrl2.prototype.setupUi=function(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.active){this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton);var eMenuIcon=createIconNoSpan("filter",this.gridOptionsService,this.column);eMenuIcon&&this.eButtonShowMainFilter.appendChild(eMenuIcon)}},HeaderFilterCellCtrl2.prototype.setupFocus=function(){this.createManagedBean(new ManagedFocusFeature(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},HeaderFilterCellCtrl2.prototype.onTabKeyDown=function(e){if(!(this.gridOptionsService.getDocument().activeElement===this.eGui)){var nextFocusableEl=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(nextFocusableEl)return this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),void nextFocusableEl.focus();var nextFocusableColumn=this.findNextColumnWithFloatingFilter(e.shiftKey);nextFocusableColumn&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:nextFocusableColumn},event:e})&&e.preventDefault()}},HeaderFilterCellCtrl2.prototype.findNextColumnWithFloatingFilter=function(backwards){var columModel=this.beans.columnModel,nextCol=this.column;do{if(!(nextCol=backwards?columModel.getDisplayedColBefore(nextCol):columModel.getDisplayedColAfter(nextCol)))break}while(!nextCol.getColDef().filter||!nextCol.getColDef().floatingFilter);return nextCol},HeaderFilterCellCtrl2.prototype.handleKeyDown=function(e){_super.prototype.handleKeyDown.call(this,e);var wrapperHasFocus=this.getWrapperHasFocus();switch(e.key){case KeyCode.UP:case KeyCode.DOWN:wrapperHasFocus||e.preventDefault();case KeyCode.LEFT:case KeyCode.RIGHT:if(wrapperHasFocus)return;e.stopPropagation();case KeyCode.ENTER:wrapperHasFocus&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case KeyCode.ESCAPE:wrapperHasFocus||this.eGui.focus()}},HeaderFilterCellCtrl2.prototype.onFocusIn=function(e){if(!this.eGui.contains(e.relatedTarget)){var notFromHeaderWrapper=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),fromWithinHeader=!!e.relatedTarget&&isElementChildOfClass(e.relatedTarget,"ag-floating-filter");if(notFromHeaderWrapper&&fromWithinHeader&&e.target===this.eGui){var lastFocusEvent=this.lastFocusEvent,fromTab=!(!lastFocusEvent||lastFocusEvent.key!==KeyCode.TAB);if(lastFocusEvent&&fromTab){var shouldFocusLast=lastFocusEvent.shiftKey;this.focusService.focusInto(this.eGui,shouldFocusLast)}}var rowIndex=this.getRowIndex();this.beans.focusService.setFocusedHeader(rowIndex,this.column)}},HeaderFilterCellCtrl2.prototype.setupHover=function(){var _this=this;this.createManagedBean(new HoverFeature([this.column],this.eGui));var listener=__name(function(){if(_this.gridOptionsService.is("columnHoverHighlight")){var hovered=_this.columnHoverService.isHovered(_this.column);_this.comp.addOrRemoveCssClass("ag-column-hover",hovered)}},"listener");this.addManagedListener(this.eventService,Events.EVENT_COLUMN_HOVER_CHANGED,listener),listener()},HeaderFilterCellCtrl2.prototype.setupLeft=function(){var setLeftFeature=new SetLeftFeature(this.column,this.eGui,this.beans);this.createManagedBean(setLeftFeature)},HeaderFilterCellCtrl2.prototype.setupUserComp=function(){var _this=this;if(this.active){var colDef=this.column.getColDef();this.suppressFilterButton=!!colDef.floatingFilterComponentParams&&!!colDef.floatingFilterComponentParams.suppressFilterButton;var compDetails=this.filterManager.getFloatingFilterCompDetails(this.column,function(){return _this.showParentFilter()});compDetails&&this.comp.setCompDetails(compDetails)}},HeaderFilterCellCtrl2.prototype.showParentFilter=function(){var eventSource=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuFactory.showMenuAfterButtonClick(this.column,eventSource,"floatingFilter","filterMenuTab",["filterMenuTab"])},HeaderFilterCellCtrl2.prototype.setupSyncWithFilter=function(){var _this=this;if(this.active){var syncWithFilter=__name(function(filterChangedEvent){var compPromise=_this.comp.getFloatingFilterComp();if(compPromise){var parentModel=_this.filterManager.getCurrentFloatingFilterParentModel(_this.column);compPromise.then(function(comp){comp&&comp.onParentModelChanged(parentModel,filterChangedEvent)})}},"syncWithFilter");this.addManagedListener(this.column,Column.EVENT_FILTER_CHANGED,syncWithFilter),this.filterManager.isFilterActive(this.column)&&syncWithFilter(null)}},HeaderFilterCellCtrl2.prototype.setupWidth=function(){var _this=this,listener=__name(function(){var width=_this.column.getActualWidth()+"px";_this.comp.setWidth(width)},"listener");this.addManagedListener(this.column,Column.EVENT_WIDTH_CHANGED,listener),listener()},HeaderFilterCellCtrl2.prototype.updateFilterButton=function(){!this.suppressFilterButton&&this.comp&&this.comp.setButtonWrapperDisplayed(this.filterManager.isFilterAllowed(this.column))},__decorate$1o([Autowired("filterManager")],HeaderFilterCellCtrl2.prototype,"filterManager",void 0),__decorate$1o([Autowired("columnHoverService")],HeaderFilterCellCtrl2.prototype,"columnHoverService",void 0),__decorate$1o([Autowired("menuFactory")],HeaderFilterCellCtrl2.prototype,"menuFactory",void 0),HeaderFilterCellCtrl2}(AbstractHeaderCellCtrl),__extends$1u=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1n=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ResizeFeature=function(_super){function ResizeFeature2(pinned,column,eResize,comp,ctrl){var _this=_super.call(this)||this;return _this.pinned=pinned,_this.column=column,_this.eResize=eResize,_this.comp=comp,_this.ctrl=ctrl,_this}return __extends$1u(ResizeFeature2,_super),__name(ResizeFeature2,"ResizeFeature"),ResizeFeature2.prototype.postConstruct=function(){var canResize,canAutosize,_this=this,colDef=this.column.getColDef(),destroyResizeFuncs=[],addResize=__name(function(){if(setDisplayed(_this.eResize,canResize),canResize){var finishedWithResizeFunc=_this.horizontalResizeService.addResizeBar({eResizeBar:_this.eResize,onResizeStart:_this.onResizeStart.bind(_this),onResizing:_this.onResizing.bind(_this,!1),onResizeEnd:_this.onResizing.bind(_this,!0)});if(destroyResizeFuncs.push(finishedWithResizeFunc),canAutosize){var skipHeaderOnAutoSize_1=_this.gridOptionsService.is("skipHeaderOnAutoSize"),autoSizeColListener_1=__name(function(){_this.columnModel.autoSizeColumn(_this.column,skipHeaderOnAutoSize_1,"uiColumnResized")},"autoSizeColListener_1");_this.eResize.addEventListener("dblclick",autoSizeColListener_1);var touchListener_1=new TouchListener(_this.eResize);touchListener_1.addEventListener(TouchListener.EVENT_DOUBLE_TAP,autoSizeColListener_1),_this.addDestroyFunc(function(){_this.eResize.removeEventListener("dblclick",autoSizeColListener_1),touchListener_1.removeEventListener(TouchListener.EVENT_DOUBLE_TAP,autoSizeColListener_1),touchListener_1.destroy()})}}},"addResize"),removeResize=__name(function(){destroyResizeFuncs.forEach(function(f){return f()}),destroyResizeFuncs.length=0},"removeResize"),refresh=__name(function(){var resize=_this.column.isResizable(),autoSize=!_this.gridOptionsService.is("suppressAutoSize")&&!colDef.suppressAutoSize;(resize!==canResize||autoSize!==canAutosize)&&(canResize=resize,canAutosize=autoSize,removeResize(),addResize())},"refresh");refresh(),this.addDestroyFunc(removeResize),this.ctrl.addRefreshFunction(refresh)},ResizeFeature2.prototype.onResizing=function(finished,resizeAmount){var resizeAmountNormalised=this.normaliseResizeAmount(resizeAmount),columnWidths=[{key:this.column,newWidth:this.resizeStartWidth+resizeAmountNormalised}];this.columnModel.setColumnWidths(columnWidths,this.resizeWithShiftKey,finished,"uiColumnDragged"),finished&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},ResizeFeature2.prototype.onResizeStart=function(shiftKey){this.resizeStartWidth=this.column.getActualWidth(),this.resizeWithShiftKey=shiftKey,this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},ResizeFeature2.prototype.normaliseResizeAmount=function(dragChange){var result=dragChange,notPinningLeft="left"!==this.pinned,pinningRight="right"===this.pinned;return this.gridOptionsService.is("enableRtl")?notPinningLeft&&(result*=-1):pinningRight&&(result*=-1),result},__decorate$1n([Autowired("horizontalResizeService")],ResizeFeature2.prototype,"horizontalResizeService",void 0),__decorate$1n([Autowired("columnModel")],ResizeFeature2.prototype,"columnModel",void 0),__decorate$1n([PostConstruct],ResizeFeature2.prototype,"postConstruct",null),ResizeFeature2}(BeanStub),__extends$1t=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgCheckbox=function(_super){function AgCheckbox2(config,className,inputType){void 0===className&&(className="ag-checkbox"),void 0===inputType&&(inputType="checkbox");var _this=_super.call(this,config,className,inputType)||this;return _this.labelAlignment="right",_this.selected=!1,_this.readOnly=!1,_this.passive=!1,_this}return __extends$1t(AgCheckbox2,_super),__name(AgCheckbox2,"AgCheckbox"),AgCheckbox2.prototype.addInputListeners=function(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))},AgCheckbox2.prototype.getNextValue=function(){return void 0===this.selected||!this.selected},AgCheckbox2.prototype.setPassive=function(passive){this.passive=passive},AgCheckbox2.prototype.isReadOnly=function(){return this.readOnly},AgCheckbox2.prototype.setReadOnly=function(readOnly){this.eWrapper.classList.toggle("ag-disabled",readOnly),this.eInput.disabled=readOnly,this.readOnly=readOnly},AgCheckbox2.prototype.setDisabled=function(disabled){return this.eWrapper.classList.toggle("ag-disabled",disabled),_super.prototype.setDisabled.call(this,disabled)},AgCheckbox2.prototype.toggle=function(){if(!this.eInput.disabled){var previousValue=this.isSelected(),nextValue=this.getNextValue();this.passive?this.dispatchChange(nextValue,previousValue):this.setValue(nextValue)}},AgCheckbox2.prototype.getValue=function(){return this.isSelected()},AgCheckbox2.prototype.setValue=function(value,silent){return this.refreshSelectedClass(value),this.setSelected(value,silent),this},AgCheckbox2.prototype.setName=function(name){return this.getInputElement().name=name,this},AgCheckbox2.prototype.isSelected=function(){return this.selected},AgCheckbox2.prototype.setSelected=function(selected,silent){this.isSelected()!==selected&&(this.previousValue=this.isSelected(),selected=this.selected="boolean"==typeof selected?selected:void 0,this.eInput.checked=selected,this.eInput.indeterminate=void 0===selected,silent||this.dispatchChange(this.selected,this.previousValue))},AgCheckbox2.prototype.dispatchChange=function(selected,previousValue,event){this.dispatchEvent({type:AgCheckbox2.EVENT_CHANGED,selected,previousValue,event});var input=this.getInputElement(),checkboxChangedEvent={type:Events.EVENT_CHECKBOX_CHANGED,id:input.id,name:input.name,selected,previousValue};this.eventService.dispatchEvent(checkboxChangedEvent)},AgCheckbox2.prototype.onCheckboxClick=function(e){if(!this.passive&&!this.eInput.disabled){var previousValue=this.isSelected(),selected=this.selected=e.target.checked;this.refreshSelectedClass(selected),this.dispatchChange(selected,previousValue,e)}},AgCheckbox2.prototype.refreshSelectedClass=function(value){this.eWrapper.classList.toggle("ag-checked",!0===value),this.eWrapper.classList.toggle("ag-indeterminate",null==value)},AgCheckbox2}(AgAbstractInputField),__extends$1s=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1m=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SelectAllFeature=function(_super){function SelectAllFeature2(column){var _this=_super.call(this)||this;_this.cbSelectAllVisible=!1,_this.processingEventFromCheckbox=!1,_this.column=column;var colDef=column.getColDef();return _this.filteredOnly=!(null==colDef||!colDef.headerCheckboxSelectionFilteredOnly),_this.currentPageOnly=!(null==colDef||!colDef.headerCheckboxSelectionCurrentPageOnly),_this}return __extends$1s(SelectAllFeature2,_super),__name(SelectAllFeature2,"SelectAllFeature"),SelectAllFeature2.prototype.onSpaceKeyPressed=function(e){var checkbox=this.cbSelectAll,eDocument=this.gridOptionsService.getDocument();checkbox.isDisplayed()&&!checkbox.getGui().contains(eDocument.activeElement)&&(e.preventDefault(),checkbox.setValue(!checkbox.getValue()))},SelectAllFeature2.prototype.getCheckboxGui=function(){return this.cbSelectAll.getGui()},SelectAllFeature2.prototype.setComp=function(ctrl){this.headerCellCtrl=ctrl,this.cbSelectAll=this.createManagedBean(new AgCheckbox),this.cbSelectAll.addCssClass("ag-header-select-all"),setAriaRole(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,AgCheckbox.EVENT_CHANGED,this.onCbSelectAll.bind(this)),setAriaHidden(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()},SelectAllFeature2.prototype.showOrHideSelectAll=function(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()},SelectAllFeature2.prototype.onModelChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},SelectAllFeature2.prototype.onSelectionChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},SelectAllFeature2.prototype.getNextCheckboxState=function(selectionCount){return(0!==selectionCount.selected||0!==selectionCount.notSelected)&&(selectionCount.selected>0&&selectionCount.notSelected>0?null:selectionCount.selected>0)},SelectAllFeature2.prototype.updateStateOfCheckbox=function(){if(!this.processingEventFromCheckbox){this.processingEventFromCheckbox=!0;var selectionCount=this.getSelectionCount(),allSelected=this.getNextCheckboxState(selectionCount);this.cbSelectAll.setValue(allSelected),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}},SelectAllFeature2.prototype.refreshSelectAllLabel=function(){if(this.cbSelectAllVisible){var translate=this.localeService.getLocaleTextFunc(),ariaStatus=this.cbSelectAll.getValue()?translate("ariaChecked","checked"):translate("ariaUnchecked","unchecked"),ariaLabel=translate("ariaRowSelectAll","Press Space to toggle all rows selection");this.headerCellCtrl.setAriaDescriptionProperty("selectAll",ariaLabel+" ("+ariaStatus+")"),this.cbSelectAll.setInputAriaLabel(ariaLabel+" ("+ariaStatus+")")}else this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(null);this.headerCellCtrl.refreshAriaDescription()},SelectAllFeature2.prototype.getSelectionCount=function(){var _this=this,selectedCount=0,notSelectedCount=0,callback=__name(function(node){_this.gridOptionsService.is("groupSelectsChildren")&&node.group||(node.isSelected()?selectedCount++:node.selectable&&notSelectedCount++)},"callback");return this.selectionService.getNodesToSelect(this.filteredOnly,this.currentPageOnly).forEach(callback),{notSelected:notSelectedCount,selected:selectedCount}},SelectAllFeature2.prototype.checkRightRowModelType=function(feature){var rowModelType=this.rowModel.getType();return!!("clientSide"===rowModelType)||(console.warn("AG Grid: "+feature+" is only available if using 'clientSide' rowModelType, you are using "+rowModelType+"."),!1)},SelectAllFeature2.prototype.onCbSelectAll=function(){if(!this.processingEventFromCheckbox&&this.cbSelectAllVisible){var value=this.cbSelectAll.getValue(),source="uiSelectAll";this.currentPageOnly?source="uiSelectAllCurrentPage":this.filteredOnly&&(source="uiSelectAllFiltered");var params={source,justFiltered:this.filteredOnly,justCurrentPage:this.currentPageOnly};value?this.selectionService.selectAllRowNodes(params):this.selectionService.deselectAllRowNodes(params)}},SelectAllFeature2.prototype.isCheckboxSelection=function(){var result=this.column.getColDef().headerCheckboxSelection;"function"==typeof result&&(result=result({column:this.column,colDef:this.column.getColDef(),columnApi:this.columnApi,api:this.gridApi,context:this.gridOptionsService.context}));return!!result&&this.checkRightRowModelType("headerCheckboxSelection")},__decorate$1m([Autowired("gridApi")],SelectAllFeature2.prototype,"gridApi",void 0),__decorate$1m([Autowired("columnApi")],SelectAllFeature2.prototype,"columnApi",void 0),__decorate$1m([Autowired("rowModel")],SelectAllFeature2.prototype,"rowModel",void 0),__decorate$1m([Autowired("selectionService")],SelectAllFeature2.prototype,"selectionService",void 0),SelectAllFeature2}(BeanStub),__extends$1r=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1l=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderCellCtrl=function(_super){function HeaderCellCtrl2(column,parentRowCtrl){var _this=_super.call(this,column,parentRowCtrl)||this;return _this.refreshFunctions=[],_this.userHeaderClasses=new Set,_this.ariaDescriptionProperties=new Map,_this.column=column,_this}return __extends$1r(HeaderCellCtrl2,_super),__name(HeaderCellCtrl2,"HeaderCellCtrl"),HeaderCellCtrl2.prototype.setComp=function(comp,eGui,eResize,eHeaderCompWrapper){var _this=this;_super.prototype.setGui.call(this,eGui),this.comp=comp,this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.setupAutoHeight(eHeaderCompWrapper),this.addColumnHoverListener(),this.setupFilterCss(),this.setupColId(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.createManagedBean(new ResizeFeature(this.getPinned(),this.column,eResize,comp,this)),this.createManagedBean(new HoverFeature([this.column],eGui)),this.createManagedBean(new SetLeftFeature(this.column,eGui,this.beans)),this.createManagedBean(new ManagedFocusFeature(eGui,{shouldStopEventPropagation:function(e){return _this.shouldStopEventPropagation(e)},onTabKeyDown:function(){return null},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.column,Column.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this))},HeaderCellCtrl2.prototype.setupUserComp=function(){var compDetails=this.lookupUserCompDetails();this.setCompDetails(compDetails)},HeaderCellCtrl2.prototype.setCompDetails=function(compDetails){this.userCompDetails=compDetails,this.comp.setUserCompDetails(compDetails)},HeaderCellCtrl2.prototype.lookupUserCompDetails=function(){var params=this.createParams(),colDef=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(colDef,params)},HeaderCellCtrl2.prototype.createParams=function(){var _this=this,colDef=this.column.getColDef();return{column:this.column,displayName:this.displayName,enableSorting:colDef.sortable,enableMenu:this.menuEnabled,showColumnMenu:function(source){_this.gridApi.showColumnMenuAfterButtonClick(_this.column,source)},progressSort:function(multiSort){_this.sortController.progressSort(_this.column,!!multiSort,"uiColumnSorted")},setSort:function(sort,multiSort){_this.sortController.setSortForColumn(_this.column,sort,!!multiSort,"uiColumnSorted")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context,eGridHeader:this.getGui()}},HeaderCellCtrl2.prototype.setupSelectAll=function(){this.selectAllFeature=this.createManagedBean(new SelectAllFeature(this.column)),this.selectAllFeature.setComp(this)},HeaderCellCtrl2.prototype.getSelectAllGui=function(){return this.selectAllFeature.getCheckboxGui()},HeaderCellCtrl2.prototype.handleKeyDown=function(e){_super.prototype.handleKeyDown.call(this,e),e.key===KeyCode.SPACE&&this.selectAllFeature.onSpaceKeyPressed(e),e.key===KeyCode.ENTER&&this.onEnterKeyPressed(e)},HeaderCellCtrl2.prototype.onEnterKeyPressed=function(e){var headerComp=this.comp.getUserCompInstance();if(headerComp)if(e.ctrlKey||e.metaKey)this.menuEnabled&&headerComp.showMenu&&(e.preventDefault(),headerComp.showMenu());else if(this.sortable){var multiSort=e.shiftKey;this.sortController.progressSort(this.column,multiSort,"uiColumnSorted")}},HeaderCellCtrl2.prototype.isMenuEnabled=function(){return this.menuEnabled},HeaderCellCtrl2.prototype.onFocusIn=function(e){if(!this.getGui().contains(e.relatedTarget)){var rowIndex=this.getRowIndex();this.focusService.setFocusedHeader(rowIndex,this.column)}this.setActiveHeader(!0)},HeaderCellCtrl2.prototype.onFocusOut=function(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)},HeaderCellCtrl2.prototype.setupTooltip=function(){var _this=this,tooltipCtrl={getColumn:function(){return _this.column},getColDef:function(){return _this.column.getColDef()},getGui:function(){return _this.eGui},getLocation:function(){return"header"},getTooltipValue:function(){return _this.column.getColDef().headerTooltip}},tooltipFeature=this.createManagedBean(new TooltipFeature(tooltipCtrl,this.beans));tooltipFeature.setComp(this.comp),this.refreshFunctions.push(function(){return tooltipFeature.refreshToolTip()})},HeaderCellCtrl2.prototype.setupClassesFromColDef=function(){var _this=this,refreshHeaderClasses=__name(function(){var colDef=_this.column.getColDef(),classes=CssClassApplier.getHeaderClassesFromColDef(colDef,_this.gridOptionsService,_this.column,null),oldClasses=_this.userHeaderClasses;_this.userHeaderClasses=new Set(classes),classes.forEach(function(c){oldClasses.has(c)?oldClasses.delete(c):_this.comp.addOrRemoveCssClass(c,!0)}),oldClasses.forEach(function(c){return _this.comp.addOrRemoveCssClass(c,!1)})},"refreshHeaderClasses");this.refreshFunctions.push(refreshHeaderClasses),refreshHeaderClasses()},HeaderCellCtrl2.prototype.setDragSource=function(eSource){var _this=this;if(this.dragSourceElement=eSource,this.removeDragSource(),eSource&&this.draggable){var hideColumnOnExit=!this.gridOptionsService.is("suppressDragLeaveHidesColumns");this.moveDragSource={type:DragSourceType.HeaderCell,eElement:eSource,defaultIconName:hideColumnOnExit?DragAndDropService.ICON_HIDE:DragAndDropService.ICON_NOT_ALLOWED,getDragItem:function(){return _this.createDragItem()},dragItemName:this.displayName,onDragStarted:function(){return _this.column.setMoving(!0,"uiColumnMoved")},onDragStopped:function(){return _this.column.setMoving(!1,"uiColumnMoved")},onGridEnter:function(dragItem){var _a;if(hideColumnOnExit){var unlockedColumns=(null===(_a=null==dragItem?void 0:dragItem.columns)||void 0===_a?void 0:_a.filter(function(col){return!col.getColDef().lockVisible}))||[];_this.columnModel.setColumnsVisible(unlockedColumns,!0,"uiColumnMoved")}},onGridExit:function(dragItem){var _a;if(hideColumnOnExit){var unlockedColumns=(null===(_a=null==dragItem?void 0:dragItem.columns)||void 0===_a?void 0:_a.filter(function(col){return!col.getColDef().lockVisible}))||[];_this.columnModel.setColumnsVisible(unlockedColumns,!1,"uiColumnMoved")}}},this.dragAndDropService.addDragSource(this.moveDragSource,!0)}},HeaderCellCtrl2.prototype.createDragItem=function(){var visibleState={};return visibleState[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState}},HeaderCellCtrl2.prototype.removeDragSource=function(){this.moveDragSource&&(this.dragAndDropService.removeDragSource(this.moveDragSource),this.moveDragSource=void 0)},HeaderCellCtrl2.prototype.onColDefChanged=function(){this.refresh()},HeaderCellCtrl2.prototype.updateState=function(){var colDef=this.column.getColDef();this.menuEnabled=this.menuFactory.isMenuEnabled(this.column)&&!colDef.suppressMenu,this.sortable=colDef.sortable,this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()},HeaderCellCtrl2.prototype.addRefreshFunction=function(func){this.refreshFunctions.push(func)},HeaderCellCtrl2.prototype.refresh=function(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(function(f){return f()})},HeaderCellCtrl2.prototype.refreshHeaderComp=function(){var newCompDetails=this.lookupUserCompDetails();!!(null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==newCompDetails.componentClass)&&this.attemptHeaderCompRefresh(newCompDetails.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(newCompDetails)},HeaderCellCtrl2.prototype.attemptHeaderCompRefresh=function(params){var headerComp=this.comp.getUserCompInstance();return!(!headerComp||!headerComp.refresh)&&headerComp.refresh(params)},HeaderCellCtrl2.prototype.calculateDisplayName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"header",!0)},HeaderCellCtrl2.prototype.checkDisplayName=function(){this.displayName!==this.calculateDisplayName()&&this.refresh()},HeaderCellCtrl2.prototype.workOutDraggable=function(){var colDef=this.column.getColDef();return!!(!this.gridOptionsService.is("suppressMovableColumns")&&!colDef.suppressMovable&&!colDef.lockPosition)||!!colDef.enableRowGroup||!!colDef.enablePivot},HeaderCellCtrl2.prototype.onColumnRowGroupChanged=function(){this.checkDisplayName()},HeaderCellCtrl2.prototype.onColumnPivotChanged=function(){this.checkDisplayName()},HeaderCellCtrl2.prototype.onColumnValueChanged=function(){this.checkDisplayName()},HeaderCellCtrl2.prototype.setupWidth=function(){var _this=this,listener=__name(function(){var columnWidth=_this.column.getActualWidth();_this.comp.setWidth(columnWidth+"px")},"listener");this.addManagedListener(this.column,Column.EVENT_WIDTH_CHANGED,listener),listener()},HeaderCellCtrl2.prototype.setupMovingCss=function(){var _this=this,listener=__name(function(){_this.comp.addOrRemoveCssClass("ag-header-cell-moving",_this.column.isMoving())},"listener");this.addManagedListener(this.column,Column.EVENT_MOVING_CHANGED,listener),listener()},HeaderCellCtrl2.prototype.setupMenuClass=function(){var _this=this,listener=__name(function(){_this.comp.addOrRemoveCssClass("ag-column-menu-visible",_this.column.isMenuVisible())},"listener");this.addManagedListener(this.column,Column.EVENT_MENU_VISIBLE_CHANGED,listener),listener()},HeaderCellCtrl2.prototype.setupSortableClass=function(){var _this=this,updateSortableCssClass=__name(function(){_this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!_this.sortable)},"updateSortableCssClass");updateSortableCssClass(),this.addRefreshFunction(updateSortableCssClass),this.addManagedListener(this.eventService,Column.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))},HeaderCellCtrl2.prototype.setupWrapTextClass=function(){var _this=this,listener=__name(function(){var wrapText=!!_this.column.getColDef().wrapHeaderText;_this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",wrapText)},"listener");listener(),this.addRefreshFunction(listener)},HeaderCellCtrl2.prototype.setupAutoHeight=function(wrapperElement){var stopResizeObserver,_this=this,measureHeight=__name(function(timesCalled){if(_this.isAlive()){var _a=getElementSize(_this.getGui()),paddingTop=_a.paddingTop,paddingBottom=_a.paddingBottom,autoHeight=wrapperElement.offsetHeight+paddingTop+paddingBottom;if(timesCalled<5){var doc=_this.beans.gridOptionsService.getDocument();if(!doc||!doc.contains(wrapperElement)||0==autoHeight)return void _this.beans.frameworkOverrides.setTimeout(function(){return measureHeight(timesCalled+1)},0)}_this.columnModel.setColumnHeaderHeight(_this.column,autoHeight)}},"measureHeight"),isMeasuring=!1,checkMeasuring=__name(function(){var newValue=_this.column.isAutoHeaderHeight();newValue&&!isMeasuring&&startMeasuring(),!newValue&&isMeasuring&&stopMeasuring()},"checkMeasuring"),startMeasuring=__name(function(){isMeasuring=!0,measureHeight(0),_this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),stopResizeObserver=_this.resizeObserverService.observeResize(wrapperElement,function(){return measureHeight(0)})},"startMeasuring"),stopMeasuring=__name(function(){isMeasuring=!1,stopResizeObserver&&stopResizeObserver(),_this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),stopResizeObserver=void 0},"stopMeasuring");checkMeasuring(),this.addDestroyFunc(function(){return stopMeasuring()}),this.addManagedListener(this.column,Column.EVENT_WIDTH_CHANGED,function(){return isMeasuring&&measureHeight(0)}),this.addManagedListener(this.eventService,Column.EVENT_SORT_CHANGED,function(){isMeasuring&&_this.beans.frameworkOverrides.setTimeout(function(){return measureHeight(0)})}),this.addRefreshFunction(checkMeasuring)},HeaderCellCtrl2.prototype.refreshAriaSort=function(){if(this.sortable){var translate=this.localeService.getLocaleTextFunc(),sort=this.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(getAriaSortState(sort)),this.setAriaDescriptionProperty("sort",translate("ariaSortableColumn","Press ENTER to sort."))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)},HeaderCellCtrl2.prototype.refreshAriaMenu=function(){if(this.menuEnabled){var translate=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",translate("ariaMenuColumn","Press CTRL ENTER to open column menu."))}else this.setAriaDescriptionProperty("menu",null)},HeaderCellCtrl2.prototype.setAriaDescriptionProperty=function(property,value){null!=value?this.ariaDescriptionProperties.set(property,value):this.ariaDescriptionProperties.delete(property)},HeaderCellCtrl2.prototype.refreshAriaDescription=function(){var descriptionArray=Array.from(this.ariaDescriptionProperties.values());this.comp.setAriaDescription(descriptionArray.length?descriptionArray.join(" "):void 0)},HeaderCellCtrl2.prototype.refreshAria=function(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaDescription()},HeaderCellCtrl2.prototype.addColumnHoverListener=function(){var _this=this,listener=__name(function(){if(_this.gridOptionsService.is("columnHoverHighlight")){var isHovered=_this.columnHoverService.isHovered(_this.column);_this.comp.addOrRemoveCssClass("ag-column-hover",isHovered)}},"listener");this.addManagedListener(this.eventService,Events.EVENT_COLUMN_HOVER_CHANGED,listener),listener()},HeaderCellCtrl2.prototype.setupFilterCss=function(){var _this=this,listener=__name(function(){_this.comp.addOrRemoveCssClass("ag-header-cell-filtered",_this.column.isFilterActive())},"listener");this.addManagedListener(this.column,Column.EVENT_FILTER_ACTIVE_CHANGED,listener),listener()},HeaderCellCtrl2.prototype.setupColId=function(){this.comp.setColId(this.column.getColId())},HeaderCellCtrl2.prototype.addActiveHeaderMouseListeners=function(){var _this=this,listener=__name(function(e){return _this.setActiveHeader("mouseenter"===e.type)},"listener");this.addManagedListener(this.getGui(),"mouseenter",listener),this.addManagedListener(this.getGui(),"mouseleave",listener)},HeaderCellCtrl2.prototype.setActiveHeader=function(active){this.comp.addOrRemoveCssClass("ag-header-active",active)},__decorate$1l([Autowired("columnModel")],HeaderCellCtrl2.prototype,"columnModel",void 0),__decorate$1l([Autowired("columnHoverService")],HeaderCellCtrl2.prototype,"columnHoverService",void 0),__decorate$1l([Autowired("sortController")],HeaderCellCtrl2.prototype,"sortController",void 0),__decorate$1l([Autowired("menuFactory")],HeaderCellCtrl2.prototype,"menuFactory",void 0),__decorate$1l([Autowired("dragAndDropService")],HeaderCellCtrl2.prototype,"dragAndDropService",void 0),__decorate$1l([Autowired("resizeObserverService")],HeaderCellCtrl2.prototype,"resizeObserverService",void 0),__decorate$1l([Autowired("gridApi")],HeaderCellCtrl2.prototype,"gridApi",void 0),__decorate$1l([Autowired("columnApi")],HeaderCellCtrl2.prototype,"columnApi",void 0),__decorate$1l([PreDestroy],HeaderCellCtrl2.prototype,"removeDragSource",null),HeaderCellCtrl2}(AbstractHeaderCellCtrl),__extends$1q=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1k=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GroupResizeFeature=function(_super){function GroupResizeFeature2(comp,eResize,pinned,columnGroup){var _this=_super.call(this)||this;return _this.eResize=eResize,_this.comp=comp,_this.pinned=pinned,_this.columnGroup=columnGroup,_this}return __extends$1q(GroupResizeFeature2,_super),__name(GroupResizeFeature2,"GroupResizeFeature"),GroupResizeFeature2.prototype.postConstruct=function(){var _this=this;if(this.columnGroup.isResizable()){var finishedWithResizeFunc=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(finishedWithResizeFunc),!this.gridOptionsService.is("suppressAutoSize")){var skipHeaderOnAutoSize_1=this.gridOptionsService.is("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",function(){var keys2=[];_this.columnGroup.getDisplayedLeafColumns().forEach(function(column){column.getColDef().suppressAutoSize||keys2.push(column.getColId())}),keys2.length>0&&_this.columnModel.autoSizeColumns({columns:keys2,skipHeader:skipHeaderOnAutoSize_1,stopAtGroup:_this.columnGroup,source:"uiColumnResized"}),_this.resizeLeafColumnsToFit()})}}else this.comp.setResizableDisplayed(!1)},GroupResizeFeature2.prototype.onResizeStart=function(shiftKey){var _this=this;this.calculateInitialValues();var takeFromGroup=null;if(shiftKey&&(takeFromGroup=this.columnModel.getDisplayedGroupAfter(this.columnGroup)),takeFromGroup){var takeFromLeafCols=takeFromGroup.getDisplayedLeafColumns();this.resizeTakeFromCols=takeFromLeafCols.filter(function(col){return col.isResizable()}),this.resizeTakeFromStartWidth=0,this.resizeTakeFromCols.forEach(function(col){return _this.resizeTakeFromStartWidth+=col.getActualWidth()}),this.resizeTakeFromRatios=[],this.resizeTakeFromCols.forEach(function(col){return _this.resizeTakeFromRatios.push(col.getActualWidth()/_this.resizeTakeFromStartWidth)})}else this.resizeTakeFromCols=null,this.resizeTakeFromStartWidth=null,this.resizeTakeFromRatios=null;this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},GroupResizeFeature2.prototype.onResizing=function(finished,resizeAmount){var resizeAmountNormalised=this.normaliseDragChange(resizeAmount),width=this.resizeStartWidth+resizeAmountNormalised;this.resizeColumns(width,finished)},GroupResizeFeature2.prototype.resizeLeafColumnsToFit=function(){var preferredSize=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup);this.calculateInitialValues(),preferredSize>this.resizeStartWidth&&this.resizeColumns(preferredSize,!0)},GroupResizeFeature2.prototype.resizeColumns=function(totalWidth,finished){void 0===finished&&(finished=!0);var resizeSets=[];if(resizeSets.push({columns:this.resizeCols,ratios:this.resizeRatios,width:totalWidth}),this.resizeTakeFromCols){var diff=totalWidth-this.resizeStartWidth;resizeSets.push({columns:this.resizeTakeFromCols,ratios:this.resizeTakeFromRatios,width:this.resizeTakeFromStartWidth-diff})}this.columnModel.resizeColumnSets({resizeSets,finished,source:"uiColumnDragged"}),finished&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},GroupResizeFeature2.prototype.calculateInitialValues=function(){var _this=this,leafCols=this.columnGroup.getDisplayedLeafColumns();this.resizeCols=leafCols.filter(function(col){return col.isResizable()}),this.resizeStartWidth=0,this.resizeCols.forEach(function(col){return _this.resizeStartWidth+=col.getActualWidth()}),this.resizeRatios=[],this.resizeCols.forEach(function(col){return _this.resizeRatios.push(col.getActualWidth()/_this.resizeStartWidth)})},GroupResizeFeature2.prototype.normaliseDragChange=function(dragChange){var result=dragChange;return this.gridOptionsService.is("enableRtl")?"left"!==this.pinned&&(result*=-1):"right"===this.pinned&&(result*=-1),result},__decorate$1k([Autowired("horizontalResizeService")],GroupResizeFeature2.prototype,"horizontalResizeService",void 0),__decorate$1k([Autowired("autoWidthCalculator")],GroupResizeFeature2.prototype,"autoWidthCalculator",void 0),__decorate$1k([Autowired("columnModel")],GroupResizeFeature2.prototype,"columnModel",void 0),__decorate$1k([PostConstruct],GroupResizeFeature2.prototype,"postConstruct",null),GroupResizeFeature2}(BeanStub),__extends$1p=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),GroupWidthFeature=function(_super){function GroupWidthFeature2(comp,columnGroup){var _this=_super.call(this)||this;return _this.removeChildListenersFuncs=[],_this.columnGroup=columnGroup,_this.comp=comp,_this}return __extends$1p(GroupWidthFeature2,_super),__name(GroupWidthFeature2,"GroupWidthFeature"),GroupWidthFeature2.prototype.postConstruct=function(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,ColumnGroup.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))},GroupWidthFeature2.prototype.addListenersToChildrenColumns=function(){var _this=this;this.removeListenersOnChildrenColumns();var widthChangedListener=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(function(column){column.addEventListener("widthChanged",widthChangedListener),column.addEventListener("visibleChanged",widthChangedListener),_this.removeChildListenersFuncs.push(function(){column.removeEventListener("widthChanged",widthChangedListener),column.removeEventListener("visibleChanged",widthChangedListener)})})},GroupWidthFeature2.prototype.removeListenersOnChildrenColumns=function(){this.removeChildListenersFuncs.forEach(function(func){return func()}),this.removeChildListenersFuncs=[]},GroupWidthFeature2.prototype.onDisplayedChildrenChanged=function(){this.addListenersToChildrenColumns(),this.onWidthChanged()},GroupWidthFeature2.prototype.onWidthChanged=function(){var columnWidth=this.columnGroup.getActualWidth();this.comp.setWidth(columnWidth+"px"),this.comp.addOrRemoveCssClass("ag-hidden",0===columnWidth)},function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PostConstruct],GroupWidthFeature2.prototype,"postConstruct",null),GroupWidthFeature2}(BeanStub),__extends$1o=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1i=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderGroupCellCtrl=function(_super){function HeaderGroupCellCtrl2(columnGroup,parentRowCtrl){var _this=_super.call(this,columnGroup,parentRowCtrl)||this;return _this.columnGroup=columnGroup,_this}return __extends$1o(HeaderGroupCellCtrl2,_super),__name(HeaderGroupCellCtrl2,"HeaderGroupCellCtrl"),HeaderGroupCellCtrl2.prototype.setComp=function(comp,eGui,eResize){_super.prototype.setGui.call(this,eGui),this.comp=comp,this.displayName=this.columnModel.getDisplayNameForColumnGroup(this.columnGroup,"header"),this.addClasses(),this.addAttributes(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.setupUserComp();var pinned=this.getParentRowCtrl().getPinned(),leafCols=this.columnGroup.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new HoverFeature(leafCols,eGui)),this.createManagedBean(new SetLeftFeature(this.columnGroup,eGui,this.beans)),this.createManagedBean(new GroupWidthFeature(comp,this.columnGroup)),this.groupResizeFeature=this.createManagedBean(new GroupResizeFeature(comp,eResize,pinned,this.columnGroup)),this.createManagedBean(new ManagedFocusFeature(eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:function(){},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},HeaderGroupCellCtrl2.prototype.resizeLeafColumnsToFit=function(){this.groupResizeFeature.onResizeStart(!1),this.groupResizeFeature.resizeLeafColumnsToFit()},HeaderGroupCellCtrl2.prototype.setupUserComp=function(){var _this=this,displayName=this.displayName,params={displayName:this.displayName,columnGroup:this.columnGroup,setExpanded:function(expanded){_this.columnModel.setColumnGroupOpened(_this.columnGroup.getProvidedColumnGroup(),expanded,"gridInitializing")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};if(!displayName){for(var columnGroup=this.columnGroup,leafCols=columnGroup.getLeafColumns();columnGroup.getParent()&&columnGroup.getParent().getLeafColumns().length===leafCols.length;)columnGroup=columnGroup.getParent();var colGroupDef=columnGroup.getColGroupDef();colGroupDef&&(displayName=colGroupDef.headerName),displayName||(displayName=leafCols?this.columnModel.getDisplayNameForColumn(leafCols[0],"header",!0):"")}var compDetails=this.userComponentFactory.getHeaderGroupCompDetails(params);this.comp.setUserCompDetails(compDetails)},HeaderGroupCellCtrl2.prototype.setupTooltip=function(){var _this=this,colGroupDef=this.columnGroup.getColGroupDef(),tooltipCtrl={getColumn:function(){return _this.columnGroup},getGui:function(){return _this.eGui},getLocation:function(){return"headerGroup"},getTooltipValue:function(){return colGroupDef&&colGroupDef.headerTooltip}};colGroupDef&&(tooltipCtrl.getColDef=function(){return colGroupDef}),this.createManagedBean(new TooltipFeature(tooltipCtrl,this.beans)).setComp(this.comp)},HeaderGroupCellCtrl2.prototype.setupExpandable=function(){var providedColGroup=this.columnGroup.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(providedColGroup,ProvidedColumnGroup.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(providedColGroup,ProvidedColumnGroup.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))},HeaderGroupCellCtrl2.prototype.refreshExpanded=function(){var column=this.columnGroup;this.expandable=column.isExpandable();var expanded=column.isExpanded();this.expandable?this.comp.setAriaExpanded(expanded?"true":"false"):this.comp.setAriaExpanded(void 0)},HeaderGroupCellCtrl2.prototype.addAttributes=function(){this.comp.setColId(this.columnGroup.getUniqueId())},HeaderGroupCellCtrl2.prototype.addClasses=function(){var _this=this,colGroupDef=this.columnGroup.getColGroupDef(),classes=CssClassApplier.getHeaderClassesFromColDef(colGroupDef,this.gridOptionsService,null,this.columnGroup);classes.push(this.columnGroup.isPadding()?"ag-header-group-cell-no-group":"ag-header-group-cell-with-group"),classes.forEach(function(c){return _this.comp.addOrRemoveCssClass(c,!0)})},HeaderGroupCellCtrl2.prototype.setupMovingCss=function(){var _this=this,leafColumns=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),listener=__name(function(){return _this.comp.addOrRemoveCssClass("ag-header-cell-moving",_this.columnGroup.isMoving())},"listener");leafColumns.forEach(function(col){_this.addManagedListener(col,Column.EVENT_MOVING_CHANGED,listener)}),listener()},HeaderGroupCellCtrl2.prototype.onFocusIn=function(e){if(!this.eGui.contains(e.relatedTarget)){var rowIndex=this.getRowIndex();this.beans.focusService.setFocusedHeader(rowIndex,this.columnGroup)}},HeaderGroupCellCtrl2.prototype.handleKeyDown=function(e){_super.prototype.handleKeyDown.call(this,e);var wrapperHasFocus=this.getWrapperHasFocus();if(this.expandable&&wrapperHasFocus&&e.key===KeyCode.ENTER){var column=this.columnGroup,newExpandedValue=!column.isExpanded();this.columnModel.setColumnGroupOpened(column.getProvidedColumnGroup(),newExpandedValue,"uiColumnExpanded")}},HeaderGroupCellCtrl2.prototype.setDragSource=function(eHeaderGroup){var _this=this;if(!this.isSuppressMoving()){var allLeafColumns=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),hideColumnOnExit=!this.gridOptionsService.is("suppressDragLeaveHidesColumns"),dragSource={type:DragSourceType.HeaderCell,eElement:eHeaderGroup,defaultIconName:hideColumnOnExit?DragAndDropService.ICON_HIDE:DragAndDropService.ICON_NOT_ALLOWED,dragItemName:this.displayName,getDragItem:this.getDragItemForGroup.bind(this),onDragStarted:function(){return allLeafColumns.forEach(function(col){return col.setMoving(!0,"uiColumnDragged")})},onDragStopped:function(){return allLeafColumns.forEach(function(col){return col.setMoving(!1,"uiColumnDragged")})},onGridEnter:function(dragItem){var _a;if(hideColumnOnExit){var unlockedColumns=(null===(_a=null==dragItem?void 0:dragItem.columns)||void 0===_a?void 0:_a.filter(function(col){return!col.getColDef().lockVisible}))||[];_this.columnModel.setColumnsVisible(unlockedColumns,!0,"uiColumnMoved")}},onGridExit:function(dragItem){var _a;if(hideColumnOnExit){var unlockedColumns=(null===(_a=null==dragItem?void 0:dragItem.columns)||void 0===_a?void 0:_a.filter(function(col){return!col.getColDef().lockVisible}))||[];_this.columnModel.setColumnsVisible(unlockedColumns,!1,"uiColumnMoved")}}};this.dragAndDropService.addDragSource(dragSource,!0),this.addDestroyFunc(function(){return _this.dragAndDropService.removeDragSource(dragSource)})}},HeaderGroupCellCtrl2.prototype.getDragItemForGroup=function(){var allColumnsOriginalOrder=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),visibleState={};allColumnsOriginalOrder.forEach(function(column){return visibleState[column.getId()]=column.isVisible()});var allColumnsCurrentOrder=[];return this.columnModel.getAllDisplayedColumns().forEach(function(column){allColumnsOriginalOrder.indexOf(column)>=0&&(allColumnsCurrentOrder.push(column),removeFromArray(allColumnsOriginalOrder,column))}),allColumnsOriginalOrder.forEach(function(column){return allColumnsCurrentOrder.push(column)}),{columns:allColumnsCurrentOrder,visibleState}},HeaderGroupCellCtrl2.prototype.isSuppressMoving=function(){var childSuppressesMoving=!1;return this.columnGroup.getLeafColumns().forEach(function(column){(column.getColDef().suppressMovable||column.getColDef().lockPosition)&&(childSuppressesMoving=!0)}),childSuppressesMoving||this.gridOptionsService.is("suppressMovableColumns")},__decorate$1i([Autowired("columnModel")],HeaderGroupCellCtrl2.prototype,"columnModel",void 0),__decorate$1i([Autowired("dragAndDropService")],HeaderGroupCellCtrl2.prototype,"dragAndDropService",void 0),__decorate$1i([Autowired("gridApi")],HeaderGroupCellCtrl2.prototype,"gridApi",void 0),__decorate$1i([Autowired("columnApi")],HeaderGroupCellCtrl2.prototype,"columnApi",void 0),HeaderGroupCellCtrl2}(AbstractHeaderCellCtrl),__extends$1n=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1h=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},instanceIdSequence=0,HeaderRowCtrl=function(_super){function HeaderRowCtrl2(rowIndex,pinned,type){var _this=_super.call(this)||this;return _this.instanceId=instanceIdSequence++,_this.headerCellCtrls={},_this.rowIndex=rowIndex,_this.pinned=pinned,_this.type=type,_this}return __extends$1n(HeaderRowCtrl2,_super),__name(HeaderRowCtrl2,"HeaderRowCtrl"),HeaderRowCtrl2.prototype.getInstanceId=function(){return this.instanceId},HeaderRowCtrl2.prototype.setComp=function(comp){this.comp=comp,this.onRowHeightChanged(),this.onVirtualColumnsChanged(),this.setWidth(),this.addEventListeners(),isBrowserSafari()&&this.comp.setTransform("translateZ(0)"),comp.setAriaRowIndex(this.rowIndex+1)},HeaderRowCtrl2.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,Events.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))},HeaderRowCtrl2.prototype.getHeaderCellCtrl=function(column){return values(this.headerCellCtrls).find(function(cellCtrl){return cellCtrl.getColumnGroupChild()===column})},HeaderRowCtrl2.prototype.onDisplayedColumnsChanged=function(){this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()},HeaderRowCtrl2.prototype.getType=function(){return this.type},HeaderRowCtrl2.prototype.onColumnResized=function(){this.setWidth()},HeaderRowCtrl2.prototype.setWidth=function(){var width=this.getWidthForRow();this.comp.setWidth(width+"px")},HeaderRowCtrl2.prototype.getWidthForRow=function(){return this.gridOptionsService.isDomLayout("print")?null!=this.pinned?0:this.columnModel.getContainerWidth("right")+this.columnModel.getContainerWidth("left")+this.columnModel.getContainerWidth(null):this.columnModel.getContainerWidth(this.pinned)},HeaderRowCtrl2.prototype.onRowHeightChanged=function(){var headerRowCount=this.columnModel.getHeaderRowCount(),sizes=[],numberOfFloating=0;this.columnModel.hasFloatingFilters()&&(headerRowCount++,numberOfFloating=1);for(var groupHeight=this.columnModel.getColumnGroupHeaderRowHeight(),headerHeight=this.columnModel.getColumnHeaderRowHeight(),numberOfGroups=headerRowCount-(1+numberOfFloating),i=0;i<numberOfGroups;i++)sizes.push(groupHeight);sizes.push(headerHeight);for(i=0;i<numberOfFloating;i++)sizes.push(this.columnModel.getFloatingFiltersHeight());var topOffset=0;for(i=0;i<this.rowIndex;i++)topOffset+=sizes[i];var thisRowHeight=sizes[this.rowIndex]+"px";this.comp.setTop(topOffset+"px"),this.comp.setHeight(thisRowHeight)},HeaderRowCtrl2.prototype.getPinned=function(){return this.pinned},HeaderRowCtrl2.prototype.getRowIndex=function(){return this.rowIndex},HeaderRowCtrl2.prototype.onVirtualColumnsChanged=function(){var _this=this,oldCtrls=this.headerCellCtrls;this.headerCellCtrls={},this.getColumnsInViewport().forEach(function(child){if(!child.isEmptyGroup()){var idOfChild=child.getUniqueId(),headerCtrl=oldCtrls[idOfChild];if(delete oldCtrls[idOfChild],headerCtrl&&headerCtrl.getColumnGroupChild()!=child&&(_this.destroyBean(headerCtrl),headerCtrl=void 0),null==headerCtrl)switch(_this.type){case HeaderRowType.FLOATING_FILTER:headerCtrl=_this.createBean(new HeaderFilterCellCtrl(child,_this));break;case HeaderRowType.COLUMN_GROUP:headerCtrl=_this.createBean(new HeaderGroupCellCtrl(child,_this));break;default:headerCtrl=_this.createBean(new HeaderCellCtrl(child,_this))}_this.headerCellCtrls[idOfChild]=headerCtrl}});var isFocusedAndDisplayed=__name(function(ctrl){return!!_this.focusService.isHeaderWrapperFocused(ctrl)&&_this.columnModel.isDisplayed(ctrl.getColumnGroupChild())},"isFocusedAndDisplayed");iterateObject(oldCtrls,function(id,oldCtrl){isFocusedAndDisplayed(oldCtrl)?_this.headerCellCtrls[id]=oldCtrl:_this.destroyBean(oldCtrl)});var ctrlsToDisplay=getAllValuesInObject(this.headerCellCtrls);this.comp.setHeaderCtrls(ctrlsToDisplay)},HeaderRowCtrl2.prototype.destroyCtrls=function(){var _this=this;iterateObject(this.headerCellCtrls,function(key,ctrl){_this.destroyBean(ctrl)}),this.headerCellCtrls={}},HeaderRowCtrl2.prototype.getColumnsInViewport=function(){return this.gridOptionsService.isDomLayout("print")?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()},HeaderRowCtrl2.prototype.getColumnsInViewportPrintLayout=function(){var _this=this;if(null!=this.pinned)return[];var viewportColumns=[],actualDepth=this.getActualDepth();return["left",null,"right"].forEach(function(pinned){var items=_this.columnModel.getVirtualHeaderGroupRow(pinned,actualDepth);viewportColumns=viewportColumns.concat(items)}),viewportColumns},HeaderRowCtrl2.prototype.getActualDepth=function(){return this.type==HeaderRowType.FLOATING_FILTER?this.rowIndex-1:this.rowIndex},HeaderRowCtrl2.prototype.getColumnsInViewportNormalLayout=function(){return this.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())},HeaderRowCtrl2.prototype.focusHeader=function(column,event){var ctrl=getAllValuesInObject(this.headerCellCtrls).find(function(ctrl2){return ctrl2.getColumnGroupChild()==column});return!!ctrl&&(ctrl.focus(event),!0)},__decorate$1h([Autowired("columnModel")],HeaderRowCtrl2.prototype,"columnModel",void 0),__decorate$1h([Autowired("focusService")],HeaderRowCtrl2.prototype,"focusService",void 0),__decorate$1h([PreDestroy],HeaderRowCtrl2.prototype,"destroyCtrls",null),HeaderRowCtrl2}(BeanStub),__extends$1m=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1g=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$e=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},HeaderRowContainerCtrl=function(_super){function HeaderRowContainerCtrl2(pinned){var _this=_super.call(this)||this;return _this.hidden=!1,_this.groupsRowCtrls=[],_this.pinned=pinned,_this}return __extends$1m(HeaderRowContainerCtrl2,_super),__name(HeaderRowContainerCtrl2,"HeaderRowContainerCtrl"),HeaderRowContainerCtrl2.prototype.setComp=function(comp,eGui){this.comp=comp,this.eViewport=eGui,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,Events.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eViewport,"scroll",this.resetScrollLeft.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()},HeaderRowContainerCtrl2.prototype.setupDragAndDrop=function(dropContainer){var bodyDropTarget=new BodyDropTarget(this.pinned,dropContainer);this.createManagedBean(bodyDropTarget)},HeaderRowContainerCtrl2.prototype.refresh=function(keepColumns){var _this=this;void 0===keepColumns&&(keepColumns=!1);var sequence=new NumberSequence,focusedHeaderPosition=this.focusService.getFocusHeaderToUseAfterRefresh(),refreshColumnGroups=__name(function(){var groupRowCount=_this.columnModel.getHeaderRowCount()-1;_this.groupsRowCtrls=_this.destroyBeans(_this.groupsRowCtrls);for(var i=0;i<groupRowCount;i++){var ctrl=_this.createBean(new HeaderRowCtrl(sequence.next(),_this.pinned,HeaderRowType.COLUMN_GROUP));_this.groupsRowCtrls.push(ctrl)}},"refreshColumnGroups"),refreshColumns=__name(function(){var rowIndex=sequence.next(),needNewInstance=!(_this.hidden||null!=_this.columnsRowCtrl&&keepColumns&&_this.columnsRowCtrl.getRowIndex()===rowIndex);(needNewInstance||_this.hidden)&&(_this.columnsRowCtrl=_this.destroyBean(_this.columnsRowCtrl)),needNewInstance&&(_this.columnsRowCtrl=_this.createBean(new HeaderRowCtrl(rowIndex,_this.pinned,HeaderRowType.COLUMN)))},"refreshColumns"),refreshFilters=__name(function(){var includeFloatingFilter=_this.columnModel.hasFloatingFilters()&&!_this.hidden,destroyPreviousComp=__name(function(){_this.filtersRowCtrl=_this.destroyBean(_this.filtersRowCtrl)},"destroyPreviousComp");if(includeFloatingFilter){var rowIndex=sequence.next();if(_this.filtersRowCtrl){var rowIndexMismatch=_this.filtersRowCtrl.getRowIndex()!==rowIndex;(!keepColumns||rowIndexMismatch)&&destroyPreviousComp()}_this.filtersRowCtrl||(_this.filtersRowCtrl=_this.createBean(new HeaderRowCtrl(rowIndex,_this.pinned,HeaderRowType.FLOATING_FILTER)))}else destroyPreviousComp()},"refreshFilters");refreshColumnGroups(),refreshColumns(),refreshFilters();var allCtrls=this.getAllCtrls();this.comp.setCtrls(allCtrls),this.restoreFocusOnHeader(focusedHeaderPosition)},HeaderRowContainerCtrl2.prototype.restoreFocusOnHeader=function(position){null==position||position.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:position})},HeaderRowContainerCtrl2.prototype.getAllCtrls=function(){var res=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$e(arguments[i]));return ar}(this.groupsRowCtrls);return this.columnsRowCtrl&&res.push(this.columnsRowCtrl),this.filtersRowCtrl&&res.push(this.filtersRowCtrl),res},HeaderRowContainerCtrl2.prototype.onGridColumnsChanged=function(){this.refresh(!0)},HeaderRowContainerCtrl2.prototype.setupCenterWidth=function(){var _this=this;null==this.pinned&&this.createManagedBean(new CenterWidthFeature(function(width){return _this.comp.setCenterWidth(width+"px")}))},HeaderRowContainerCtrl2.prototype.setHorizontalScroll=function(offset){this.comp.setContainerTransform("translateX("+offset+"px)")},HeaderRowContainerCtrl2.prototype.resetScrollLeft=function(){this.eViewport.scrollLeft=0},HeaderRowContainerCtrl2.prototype.setupPinnedWidth=function(){var _this=this;if(null!=this.pinned){var pinningLeft="left"===this.pinned,pinningRight="right"===this.pinned;this.hidden=!0;var listener=__name(function(){var width=pinningLeft?_this.pinnedWidthService.getPinnedLeftWidth():_this.pinnedWidthService.getPinnedRightWidth();if(null!=width){var hidden=0==width,hiddenChanged=_this.hidden!==hidden,isRtl=_this.gridOptionsService.is("enableRtl"),scrollbarWidth=_this.gridOptionsService.getScrollbarWidth(),widthWithPadding=_this.scrollVisibleService.isVerticalScrollShowing()&&(isRtl&&pinningLeft||!isRtl&&pinningRight)?width+scrollbarWidth:width;_this.comp.setPinnedContainerWidth(widthWithPadding+"px"),_this.comp.setDisplayed(!hidden),hiddenChanged&&(_this.hidden=hidden,_this.refresh())}},"listener");this.addManagedListener(this.eventService,Events.EVENT_LEFT_PINNED_WIDTH_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_SCROLL_VISIBILITY_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_SCROLLBAR_WIDTH_CHANGED,listener)}},HeaderRowContainerCtrl2.prototype.getHeaderCtrlForColumn=function(column){if(column instanceof Column)return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(column):void 0;if(0!==this.groupsRowCtrls.length)for(var i=0;i<this.groupsRowCtrls.length;i++){var ctrl=this.groupsRowCtrls[i].getHeaderCellCtrl(column);if(ctrl)return ctrl}},HeaderRowContainerCtrl2.prototype.getHtmlElementForColumnHeader=function(column){var cellCtrl=this.getHeaderCtrlForColumn(column);return cellCtrl?cellCtrl.getGui():null},HeaderRowContainerCtrl2.prototype.getRowType=function(rowIndex){var ctrl=this.getAllCtrls()[rowIndex];return ctrl?ctrl.getType():void 0},HeaderRowContainerCtrl2.prototype.focusHeader=function(rowIndex,column,event){var ctrl=this.getAllCtrls()[rowIndex];return!!ctrl&&ctrl.focusHeader(column,event)},HeaderRowContainerCtrl2.prototype.getRowCount=function(){return this.getAllCtrls().length},__decorate$1g([Autowired("ctrlsService")],HeaderRowContainerCtrl2.prototype,"ctrlsService",void 0),__decorate$1g([Autowired("scrollVisibleService")],HeaderRowContainerCtrl2.prototype,"scrollVisibleService",void 0),__decorate$1g([Autowired("pinnedWidthService")],HeaderRowContainerCtrl2.prototype,"pinnedWidthService",void 0),__decorate$1g([Autowired("columnModel")],HeaderRowContainerCtrl2.prototype,"columnModel",void 0),__decorate$1g([Autowired("focusService")],HeaderRowContainerCtrl2.prototype,"focusService",void 0),HeaderRowContainerCtrl2}(BeanStub),__extends$1l=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1f=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderRowContainerComp=function(_super){function HeaderRowContainerComp2(pinned){var _this=_super.call(this)||this;return _this.headerRowComps={},_this.rowCompsList=[],_this.pinned=pinned,_this}return __extends$1l(HeaderRowContainerComp2,_super),__name(HeaderRowContainerComp2,"HeaderRowContainerComp"),HeaderRowContainerComp2.prototype.init=function(){var _this=this;this.selectAndSetTemplate();var compProxy={setDisplayed:function(displayed){return _this.setDisplayed(displayed)},setCtrls:function(ctrls){return _this.setCtrls(ctrls)},setCenterWidth:function(width){return _this.eCenterContainer.style.width=width},setContainerTransform:function(transform){return _this.eCenterContainer.style.transform=transform},setPinnedContainerWidth:function(width){var eGui=_this.getGui();eGui.style.width=width,eGui.style.maxWidth=width,eGui.style.minWidth=width}};this.createManagedBean(new HeaderRowContainerCtrl(this.pinned)).setComp(compProxy,this.getGui())},HeaderRowContainerComp2.prototype.selectAndSetTemplate=function(){var pinnedLeft="left"==this.pinned,pinnedRight="right"==this.pinned,template=pinnedLeft?HeaderRowContainerComp2.PINNED_LEFT_TEMPLATE:pinnedRight?HeaderRowContainerComp2.PINNED_RIGHT_TEMPLATE:HeaderRowContainerComp2.CENTER_TEMPLATE;this.setTemplate(template),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()},HeaderRowContainerComp2.prototype.destroyRowComps=function(){this.setCtrls([])},HeaderRowContainerComp2.prototype.destroyRowComp=function(rowComp){this.destroyBean(rowComp),this.eRowContainer.removeChild(rowComp.getGui())},HeaderRowContainerComp2.prototype.setCtrls=function(ctrls){var _this=this,oldRowComps=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];var prevGui,appendEnsuringDomOrder=__name(function(rowComp){var eGui=rowComp.getGui();eGui.parentElement!=_this.eRowContainer&&_this.eRowContainer.appendChild(eGui),prevGui&&ensureDomOrder(_this.eRowContainer,eGui,prevGui),prevGui=eGui},"appendEnsuringDomOrder");ctrls.forEach(function(ctrl){var ctrlId=ctrl.getInstanceId(),existingComp=oldRowComps[ctrlId];delete oldRowComps[ctrlId];var rowComp=existingComp||_this.createBean(new HeaderRowComp(ctrl));_this.headerRowComps[ctrlId]=rowComp,_this.rowCompsList.push(rowComp),appendEnsuringDomOrder(rowComp)}),getAllValuesInObject(oldRowComps).forEach(function(c){return _this.destroyRowComp(c)})},HeaderRowContainerComp2.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="presentation"></div>',HeaderRowContainerComp2.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="presentation"></div>',HeaderRowContainerComp2.CENTER_TEMPLATE='<div class="ag-header-viewport" role="presentation">\n            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>\n        </div>',__decorate$1f([RefSelector("eCenterContainer")],HeaderRowContainerComp2.prototype,"eCenterContainer",void 0),__decorate$1f([PostConstruct],HeaderRowContainerComp2.prototype,"init",null),__decorate$1f([PreDestroy],HeaderRowContainerComp2.prototype,"destroyRowComps",null),HeaderRowContainerComp2}(Component),__extends$1k=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1e=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};(HeaderNavigationDirection2=HeaderNavigationDirection||(HeaderNavigationDirection={}))[HeaderNavigationDirection2.UP=0]="UP",HeaderNavigationDirection2[HeaderNavigationDirection2.DOWN=1]="DOWN",HeaderNavigationDirection2[HeaderNavigationDirection2.LEFT=2]="LEFT",HeaderNavigationDirection2[HeaderNavigationDirection2.RIGHT=3]="RIGHT";var ServerSideTransactionResultStatus,ServerSideTransactionResultStatus2,HeaderNavigationService=function(_super){function HeaderNavigationService2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1k(HeaderNavigationService2,_super),__name(HeaderNavigationService2,"HeaderNavigationService"),HeaderNavigationService2.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady(function(p){_this.gridBodyCon=p.gridBodyCtrl})},HeaderNavigationService2.prototype.getHeaderRowCount=function(){var centerHeaderContainer=this.ctrlsService.getHeaderRowContainerCtrl();return centerHeaderContainer?centerHeaderContainer.getRowCount():0},HeaderNavigationService2.prototype.getHeaderRowType=function(rowIndex){var centerHeaderContainer=this.ctrlsService.getHeaderRowContainerCtrl();if(centerHeaderContainer)return centerHeaderContainer.getRowType(rowIndex)},HeaderNavigationService2.prototype.navigateVertically=function(direction,fromHeader,event){if(fromHeader||(fromHeader=this.focusService.getFocusedHeader()),!fromHeader)return!1;var headerRowIndex=fromHeader.headerRowIndex,column=fromHeader.column,rowLen=this.getHeaderRowCount(),isUp=direction===HeaderNavigationDirection.UP,nextRow=isUp?headerRowIndex-1:headerRowIndex+1,nextFocusColumn=null,skipColumn=!1;nextRow<0&&(nextRow=0,nextFocusColumn=column,skipColumn=!0),nextRow>=rowLen&&(nextRow=-1);var currentRowType=this.getHeaderRowType(headerRowIndex);if(!skipColumn){if(currentRowType===HeaderRowType.COLUMN_GROUP){var currentColumn=column;nextFocusColumn=isUp?column.getParent():currentColumn.getDisplayedChildren()[0]}else if(currentRowType===HeaderRowType.FLOATING_FILTER)nextFocusColumn=column;else{currentColumn=column;nextFocusColumn=isUp?currentColumn.getParent():currentColumn}if(!nextFocusColumn)return!1}return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:nextRow,column:nextFocusColumn},allowUserOverride:!0,event})},HeaderNavigationService2.prototype.navigateHorizontally=function(direction,fromTab,event){void 0===fromTab&&(fromTab=!1);var nextHeader,normalisedDirection,focusedHeader=this.focusService.getFocusedHeader();return direction===HeaderNavigationDirection.LEFT!==this.gridOptionsService.is("enableRtl")?(normalisedDirection="Before",nextHeader=this.headerPositionUtils.findHeader(focusedHeader,normalisedDirection)):(normalisedDirection="After",nextHeader=this.headerPositionUtils.findHeader(focusedHeader,normalisedDirection)),nextHeader||!fromTab?this.focusService.focusHeaderPosition({headerPosition:nextHeader,direction:normalisedDirection,fromTab,allowUserOverride:!0,event}):this.focusNextHeaderRow(focusedHeader,normalisedDirection,event)},HeaderNavigationService2.prototype.focusNextHeaderRow=function(focusedHeader,direction,event){var nextRowIndex,currentIndex=focusedHeader.headerRowIndex,nextPosition=null;return"Before"===direction?currentIndex>0&&(nextRowIndex=currentIndex-1,nextPosition=this.headerPositionUtils.findColAtEdgeForHeaderRow(nextRowIndex,"end")):(nextRowIndex=currentIndex+1,nextPosition=this.headerPositionUtils.findColAtEdgeForHeaderRow(nextRowIndex,"start")),this.focusService.focusHeaderPosition({headerPosition:nextPosition,direction,fromTab:!0,allowUserOverride:!0,event})},HeaderNavigationService2.prototype.scrollToColumn=function(column,direction){if(void 0===direction&&(direction="After"),!column.getPinned()){var columnToScrollTo;if(column instanceof ColumnGroup){var columns=column.getDisplayedLeafColumns();columnToScrollTo="Before"===direction?last(columns):columns[0]}else columnToScrollTo=column;this.gridBodyCon.getScrollFeature().ensureColumnVisible(columnToScrollTo)}},__decorate$1e([Autowired("focusService")],HeaderNavigationService2.prototype,"focusService",void 0),__decorate$1e([Autowired("headerPositionUtils")],HeaderNavigationService2.prototype,"headerPositionUtils",void 0),__decorate$1e([Autowired("animationFrameService")],HeaderNavigationService2.prototype,"animationFrameService",void 0),__decorate$1e([Autowired("ctrlsService")],HeaderNavigationService2.prototype,"ctrlsService",void 0),__decorate$1e([PostConstruct],HeaderNavigationService2.prototype,"postConstruct",null),HeaderNavigationService2=__decorate$1e([Bean("headerNavigationService")],HeaderNavigationService2)}(BeanStub),__extends$1j=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1d=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GridHeaderCtrl=function(_super){function GridHeaderCtrl2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1j(GridHeaderCtrl2,_super),__name(GridHeaderCtrl2,"GridHeaderCtrl"),GridHeaderCtrl2.prototype.setComp=function(comp,eGui,eFocusableElement){this.comp=comp,this.eGui=eGui,this.createManagedBean(new ManagedFocusFeature(eFocusableElement,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight(),this.ctrlsService.registerGridHeaderCtrl(this)},GridHeaderCtrl2.prototype.setupHeaderHeight=function(){var listener=this.setHeaderHeight.bind(this);listener(),this.addManagedPropertyListener("headerHeight",listener),this.addManagedPropertyListener("pivotHeaderHeight",listener),this.addManagedPropertyListener("groupHeaderHeight",listener),this.addManagedPropertyListener("pivotGroupHeaderHeight",listener),this.addManagedPropertyListener("floatingFiltersHeight",listener),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_GRID_STYLES_CHANGED,listener)},GridHeaderCtrl2.prototype.getHeaderHeight=function(){return this.headerHeight},GridHeaderCtrl2.prototype.setHeaderHeight=function(){var totalHeaderHeight,columnModel=this.columnModel,numberOfFloating=0,headerRowCount=columnModel.getHeaderRowCount();columnModel.hasFloatingFilters()&&(headerRowCount++,numberOfFloating=1);var groupHeight=this.columnModel.getColumnGroupHeaderRowHeight(),headerHeight=this.columnModel.getColumnHeaderRowHeight(),numberOfGroups=headerRowCount-(1+numberOfFloating);if(totalHeaderHeight=numberOfFloating*columnModel.getFloatingFiltersHeight(),totalHeaderHeight+=numberOfGroups*groupHeight,totalHeaderHeight+=headerHeight,this.headerHeight!==totalHeaderHeight){this.headerHeight=totalHeaderHeight;var px=totalHeaderHeight+1+"px";this.comp.setHeightAndMinHeight(px),this.eventService.dispatchEvent({type:Events.EVENT_HEADER_HEIGHT_CHANGED})}},GridHeaderCtrl2.prototype.onPivotModeChanged=function(){var pivotMode=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",pivotMode),this.comp.addOrRemoveCssClass("ag-pivot-off",!pivotMode)},GridHeaderCtrl2.prototype.onTabKeyDown=function(e){var isRtl=this.gridOptionsService.is("enableRtl"),direction=e.shiftKey!==isRtl?HeaderNavigationDirection.LEFT:HeaderNavigationDirection.RIGHT;(this.headerNavigationService.navigateHorizontally(direction,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()},GridHeaderCtrl2.prototype.handleKeyDown=function(e){var direction=null;switch(e.key){case KeyCode.LEFT:direction=HeaderNavigationDirection.LEFT;case KeyCode.RIGHT:exists(direction)||(direction=HeaderNavigationDirection.RIGHT),this.headerNavigationService.navigateHorizontally(direction,!1,e);break;case KeyCode.UP:direction=HeaderNavigationDirection.UP;case KeyCode.DOWN:exists(direction)||(direction=HeaderNavigationDirection.DOWN),this.headerNavigationService.navigateVertically(direction,null,e)&&e.preventDefault();break;default:return}},GridHeaderCtrl2.prototype.onFocusOut=function(e){var eDocument=this.gridOptionsService.getDocument(),relatedTarget=e.relatedTarget;!relatedTarget&&this.eGui.contains(eDocument.activeElement)||this.eGui.contains(relatedTarget)||this.focusService.clearFocusedHeader()},__decorate$1d([Autowired("headerNavigationService")],GridHeaderCtrl2.prototype,"headerNavigationService",void 0),__decorate$1d([Autowired("focusService")],GridHeaderCtrl2.prototype,"focusService",void 0),__decorate$1d([Autowired("columnModel")],GridHeaderCtrl2.prototype,"columnModel",void 0),__decorate$1d([Autowired("ctrlsService")],GridHeaderCtrl2.prototype,"ctrlsService",void 0),GridHeaderCtrl2}(BeanStub),__extends$1i=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),GridHeaderComp=function(_super){function GridHeaderComp2(){return _super.call(this,GridHeaderComp2.TEMPLATE)||this}return __extends$1i(GridHeaderComp2,_super),__name(GridHeaderComp2,"GridHeaderComp"),GridHeaderComp2.prototype.postConstruct=function(){var _this=this,compProxy={addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},setHeightAndMinHeight:function(height){_this.getGui().style.height=height,_this.getGui().style.minHeight=height}};this.createManagedBean(new GridHeaderCtrl).setComp(compProxy,this.getGui(),this.getFocusableElement());var addContainer=__name(function(container){_this.createManagedBean(container),_this.appendChild(container)},"addContainer");addContainer(new HeaderRowContainerComp("left")),addContainer(new HeaderRowContainerComp(null)),addContainer(new HeaderRowContainerComp("right"))},GridHeaderComp2.TEMPLATE='<div class="ag-header" role="presentation"/>',function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PostConstruct],GridHeaderComp2.prototype,"postConstruct",null),GridHeaderComp2}(Component),__extends$1h=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1b=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HorizontalResizeService=function(_super){function HorizontalResizeService2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1h(HorizontalResizeService2,_super),__name(HorizontalResizeService2,"HorizontalResizeService"),HorizontalResizeService2.prototype.addResizeBar=function(params){var _this=this,dragSource={dragStartPixels:params.dragStartPixels||0,eElement:params.eResizeBar,onDragStart:this.onDragStart.bind(this,params),onDragStop:this.onDragStop.bind(this,params),onDragging:this.onDragging.bind(this,params)};return this.dragService.addDragSource(dragSource,!0),__name(function(){return _this.dragService.removeDragSource(dragSource)},"finishedWithResizeFunc")},HorizontalResizeService2.prototype.onDragStart=function(params,mouseEvent){this.dragStartX=mouseEvent.clientX,this.setResizeIcons();var shiftKey=mouseEvent instanceof MouseEvent&&!0===mouseEvent.shiftKey;params.onResizeStart(shiftKey)},HorizontalResizeService2.prototype.setResizeIcons=function(){var ctrl=this.ctrlsService.getGridCtrl();ctrl.setResizeCursor(!0),ctrl.disableUserSelect(!0)},HorizontalResizeService2.prototype.onDragStop=function(params,mouseEvent){params.onResizeEnd(this.resizeAmount),this.resetIcons()},HorizontalResizeService2.prototype.resetIcons=function(){var ctrl=this.ctrlsService.getGridCtrl();ctrl.setResizeCursor(!1),ctrl.disableUserSelect(!1)},HorizontalResizeService2.prototype.onDragging=function(params,mouseEvent){this.resizeAmount=mouseEvent.clientX-this.dragStartX,params.onResizing(this.resizeAmount)},__decorate$1b([Autowired("dragService")],HorizontalResizeService2.prototype,"dragService",void 0),__decorate$1b([Autowired("ctrlsService")],HorizontalResizeService2.prototype,"ctrlsService",void 0),HorizontalResizeService2=__decorate$1b([Bean("horizontalResizeService")],HorizontalResizeService2)}(BeanStub),__extends$1g=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1a=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},StandardMenuFactory=function(_super){function StandardMenuFactory2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1g(StandardMenuFactory2,_super),__name(StandardMenuFactory2,"StandardMenuFactory"),StandardMenuFactory2.prototype.hideActiveMenu=function(){this.hidePopup&&this.hidePopup()},StandardMenuFactory2.prototype.showMenuAfterMouseEvent=function(column,mouseEvent){var _this=this;this.showPopup(column,function(eMenu){_this.popupService.positionPopupUnderMouseEvent({column,type:"columnMenu",mouseEvent,ePopup:eMenu})},mouseEvent.target)},StandardMenuFactory2.prototype.showMenuAfterButtonClick=function(column,eventSource,containerType){var _this=this;this.showPopup(column,function(eMenu){_this.popupService.positionPopupByComponent({type:containerType,eventSource,ePopup:eMenu,keepWithinBounds:!0,position:"under",column})},eventSource)},StandardMenuFactory2.prototype.showPopup=function(column,positionCallback,eventSource){var _this=this,filterWrapper=this.filterManager.getOrCreateFilterWrapper(column,"COLUMN_MENU");if(!filterWrapper)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");var eMenu=document.createElement("div");setAriaRole(eMenu,"presentation"),eMenu.classList.add("ag-menu"),this.tabListener=this.addManagedListener(eMenu,"keydown",function(e){return _this.trapFocusWithin(e,eMenu)}),filterWrapper.guiPromise.then(function(gui){return eMenu.appendChild(gui)});var hidePopup,afterGuiDetached=__name(function(){var _a;return null===(_a=filterWrapper.filterPromise)||void 0===_a?void 0:_a.then(function(filter){var _a2;return null===(_a2=null==filter?void 0:filter.afterGuiDetached)||void 0===_a2?void 0:_a2.call(filter)})},"afterGuiDetached"),anchorToElement=eventSource||this.ctrlsService.getGridBodyCtrl().getGui(),closedCallback=__name(function(e){column.setMenuVisible(!1,"contextMenu");var isKeyboardEvent=e instanceof KeyboardEvent;if(_this.tabListener&&(_this.tabListener=_this.tabListener()),isKeyboardEvent&&eventSource&&isVisible(eventSource)){var focusableEl=_this.focusService.findTabbableParent(eventSource);focusableEl&&focusableEl.focus()}afterGuiDetached()},"closedCallback"),translate=this.localeService.getLocaleTextFunc(),addPopupRes=this.popupService.addPopup({modal:!0,eChild:eMenu,closeOnEsc:!0,closedCallback,positionCallback:function(){return positionCallback(eMenu)},anchorToElement,ariaLabel:translate("ariaLabelColumnMenu","Column Menu")});addPopupRes&&(this.hidePopup=hidePopup=addPopupRes.hideFunc),filterWrapper.filterPromise.then(function(filter){positionCallback(eMenu),filter.afterGuiAttached&&filter.afterGuiAttached({container:"columnMenu",hidePopup})}),column.setMenuVisible(!0,"contextMenu")},StandardMenuFactory2.prototype.trapFocusWithin=function(e,menu){e.key!==KeyCode.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(menu,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(menu,e.shiftKey))},StandardMenuFactory2.prototype.isMenuEnabled=function(column){return column.isFilterAllowed()},__decorate$1a([Autowired("filterManager")],StandardMenuFactory2.prototype,"filterManager",void 0),__decorate$1a([Autowired("popupService")],StandardMenuFactory2.prototype,"popupService",void 0),__decorate$1a([Autowired("focusService")],StandardMenuFactory2.prototype,"focusService",void 0),__decorate$1a([Autowired("ctrlsService")],StandardMenuFactory2.prototype,"ctrlsService",void 0),StandardMenuFactory2=__decorate$1a([Bean("menuFactory")],StandardMenuFactory2)}(BeanStub),__extends$1f=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$19=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__extends$1e=(function(_super){function TabbedLayout2(params){var _this=_super.call(this,TabbedLayout2.getTemplate(params.cssClass))||this;return _this.items=[],_this.tabbedItemScrollMap=new Map,_this.params=params,params.items&&params.items.forEach(function(item){return _this.addItem(item)}),_this}__extends$1f(TabbedLayout2,_super),__name(TabbedLayout2,"TabbedLayout"),TabbedLayout2.prototype.postConstruct=function(){var _this=this;this.createManagedBean(new ManagedFocusFeature(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)})),this.addDestroyFunc(function(){var _a,_b,_c;return null===(_c=null===(_b=null===(_a=_this.activeItem)||void 0===_a?void 0:_a.tabbedItem)||void 0===_b?void 0:_b.afterDetachedCallback)||void 0===_c?void 0:_c.call(_b)})},TabbedLayout2.getTemplate=function(cssClass){return'<div class="ag-tabs '+cssClass+'">\n            <div ref="eHeader" role="tablist" class="ag-tabs-header '+(cssClass?cssClass+"-header":"")+'"></div>\n            <div ref="eBody" role="presentation" class="ag-tabs-body '+(cssClass?cssClass+"-body":"")+'"></div>\n        </div>'},TabbedLayout2.prototype.handleKeyDown=function(e){var eDocument=this.gridOptionsService.getDocument();switch(e.key){case KeyCode.RIGHT:case KeyCode.LEFT:if(!this.eHeader.contains(eDocument.activeElement))return;var isRightKey=e.key===KeyCode.RIGHT,isRtl=this.gridOptionsService.is("enableRtl"),currentPosition=this.items.indexOf(this.activeItem),nextPosition=isRightKey!==isRtl?Math.min(currentPosition+1,this.items.length-1):Math.max(currentPosition-1,0);if(currentPosition===nextPosition)return;e.preventDefault();var nextItem=this.items[nextPosition];this.showItemWrapper(nextItem),nextItem.eHeaderButton.focus();break;case KeyCode.UP:case KeyCode.DOWN:e.stopPropagation()}},TabbedLayout2.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented){var focusService=this.focusService,eHeader=this.eHeader,eBody=this.eBody,activeItem=this.activeItem,activeElement=this.gridOptionsService.getDocument().activeElement,target=e.target;if(e.preventDefault(),eHeader.contains(activeElement))return void focusService.focusInto(eBody,e.shiftKey);var nextEl=null;focusService.isTargetUnderManagedComponent(eBody,target)&&(e.shiftKey&&(nextEl=this.focusService.findFocusableElementBeforeTabGuard(eBody,target)),nextEl||(nextEl=activeItem.eHeaderButton)),!nextEl&&eBody.contains(activeElement)&&((nextEl=focusService.findNextFocusableElement(eBody,!1,e.shiftKey))||(nextEl=activeItem.eHeaderButton)),nextEl&&nextEl.focus()}},TabbedLayout2.prototype.setAfterAttachedParams=function(params){this.afterAttachedParams=params},TabbedLayout2.prototype.showFirstItem=function(){this.items.length>0&&this.showItemWrapper(this.items[0])},TabbedLayout2.prototype.addItem=function(item){var eHeaderButton=document.createElement("span");setAriaRole(eHeaderButton,"tab"),eHeaderButton.setAttribute("tabIndex","-1"),eHeaderButton.appendChild(item.title),eHeaderButton.classList.add("ag-tab"),this.eHeader.appendChild(eHeaderButton),setAriaLabel(eHeaderButton,item.titleLabel);var wrapper={tabbedItem:item,eHeaderButton};this.items.push(wrapper),eHeaderButton.addEventListener("click",this.showItemWrapper.bind(this,wrapper))},TabbedLayout2.prototype.showItem=function(tabbedItem){var itemWrapper=this.items.find(function(wrapper){return wrapper.tabbedItem===tabbedItem});itemWrapper&&this.showItemWrapper(itemWrapper)},TabbedLayout2.prototype.showItemWrapper=function(wrapper){var _a,_b,_this=this,tabbedItem=wrapper.tabbedItem,eHeaderButton=wrapper.eHeaderButton;this.params.onItemClicked&&this.params.onItemClicked({item:tabbedItem}),this.activeItem!==wrapper?(this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),clearElement(this.eBody),tabbedItem.bodyPromise.then(function(body){_this.eBody.appendChild(body);var onlyUnmanaged=!_this.focusService.isKeyboardMode();if(_this.focusService.focusInto(_this.eBody,!1,onlyUnmanaged),tabbedItem.afterAttachedCallback&&tabbedItem.afterAttachedCallback(_this.afterAttachedParams),_this.params.keepScrollPosition){var scrollableContainer_1=tabbedItem.getScrollableContainer&&tabbedItem.getScrollableContainer()||body;_this.lastScrollListener=_this.addManagedListener(scrollableContainer_1,"scroll",function(){_this.tabbedItemScrollMap.set(tabbedItem.name,scrollableContainer_1.scrollTop)});var scrollPosition_1=_this.tabbedItemScrollMap.get(tabbedItem.name);void 0!==scrollPosition_1&&setTimeout(function(){scrollableContainer_1.scrollTop=scrollPosition_1},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),null===(_b=(_a=this.activeItem.tabbedItem).afterDetachedCallback)||void 0===_b||_b.call(_a)),eHeaderButton.classList.add("ag-tab-selected"),this.activeItem=wrapper):callIfPresent(this.params.onActiveItemClicked)},__decorate$19([Autowired("focusService")],TabbedLayout2.prototype,"focusService",void 0),__decorate$19([RefSelector("eHeader")],TabbedLayout2.prototype,"eHeader",void 0),__decorate$19([RefSelector("eBody")],TabbedLayout2.prototype,"eBody",void 0),__decorate$19([PostConstruct],TabbedLayout2.prototype,"postConstruct",null)}(Component),function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}()),ResizeObserverService=function(_super){function ResizeObserverService2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.polyfillFunctions=[],_this}return __extends$1e(ResizeObserverService2,_super),__name(ResizeObserverService2,"ResizeObserverService"),ResizeObserverService2.prototype.observeResize=function(element,callback){var _this=this,win=this.gridOptionsService.getDocument().defaultView||window,debouncedCallback=debounce(callback,50),useBrowserResizeObserver=__name(function(){var resizeObserver=new win.ResizeObserver(debouncedCallback);return resizeObserver.observe(element),function(){return resizeObserver.disconnect()}},"useBrowserResizeObserver"),usePolyfill=__name(function(){var widthLastTime=offsetWidth(element),heightLastTime=offsetHeight(element),running=!0,periodicallyCheckWidthAndHeight=__name(function(){if(running){var newWidth=offsetWidth(element),newHeight=offsetHeight(element);(newWidth!==widthLastTime||newHeight!==heightLastTime)&&(widthLastTime=newWidth,heightLastTime=newHeight,callback()),_this.doNextPolyfillTurn(periodicallyCheckWidthAndHeight)}},"periodicallyCheckWidthAndHeight");return periodicallyCheckWidthAndHeight(),function(){return running=!1}},"usePolyfill"),suppressResize=this.gridOptionsService.is("suppressBrowserResizeObserver");return!!win.ResizeObserver&&!suppressResize?useBrowserResizeObserver():usePolyfill()},ResizeObserverService2.prototype.doNextPolyfillTurn=function(func){this.polyfillFunctions.push(func),this.schedulePolyfill()},ResizeObserverService2.prototype.schedulePolyfill=function(){var _this=this;if(!this.polyfillScheduled){var executeAllFuncs=__name(function(){var funcs=_this.polyfillFunctions;_this.polyfillScheduled=!1,_this.polyfillFunctions=[],funcs.forEach(function(f){return f()})},"executeAllFuncs");this.polyfillScheduled=!0,this.getFrameworkOverrides().setTimeout(executeAllFuncs,50)}},ResizeObserverService2=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean("resizeObserverService")],ResizeObserverService2),ResizeObserverService2}(BeanStub),__extends$1d=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$17=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AnimationFrameService=function(_super){function AnimationFrameService2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.createTasksP1={list:[],sorted:!1},_this.createTasksP2={list:[],sorted:!1},_this.destroyTasks=[],_this.ticking=!1,_this.scrollGoingDown=!0,_this.lastScrollTop=0,_this.taskCount=0,_this.cancelledTasks=new Set,_this}return __extends$1d(AnimationFrameService2,_super),__name(AnimationFrameService2,"AnimationFrameService"),AnimationFrameService2.prototype.setScrollTop=function(scrollTop){this.scrollGoingDown=scrollTop>this.lastScrollTop,this.lastScrollTop=scrollTop},AnimationFrameService2.prototype.init=function(){this.useAnimationFrame=!this.gridOptionsService.is("suppressAnimationFrame")},AnimationFrameService2.prototype.isOn=function(){return this.useAnimationFrame},AnimationFrameService2.prototype.verifyAnimationFrameOn=function(methodName){!1===this.useAnimationFrame&&console.warn("AG Grid: AnimationFrameService."+methodName+" called but animation frames are off")},AnimationFrameService2.prototype.createTask=function(task,index,list){this.verifyAnimationFrameOn(list);var taskItem={task,index,createOrder:++this.taskCount};this.addTaskToList(this[list],taskItem),this.schedule()},AnimationFrameService2.prototype.cancelTask=function(task){this.cancelledTasks.add(task)},AnimationFrameService2.prototype.addTaskToList=function(taskList,task){taskList.list.push(task),taskList.sorted=!1},AnimationFrameService2.prototype.sortTaskList=function(taskList){if(!taskList.sorted){var sortDirection=this.scrollGoingDown?1:-1;taskList.list.sort(function(a,b){return a.index!==b.index?sortDirection*(b.index-a.index):b.createOrder-a.createOrder}),taskList.sorted=!0}},AnimationFrameService2.prototype.addDestroyTask=function(task){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(task),this.schedule()},AnimationFrameService2.prototype.executeFrame=function(millis){this.verifyAnimationFrameOn("executeFrame");for(var p1TaskList=this.createTasksP1,p1Tasks=p1TaskList.list,p2TaskList=this.createTasksP2,p2Tasks=p2TaskList.list,destroyTasks=this.destroyTasks,frameStart=(new Date).getTime(),duration=(new Date).getTime()-frameStart,noMaxMillis=millis<=0,gridBodyCon=this.ctrlsService.getGridBodyCtrl();noMaxMillis||duration<millis;){if(!gridBodyCon.getScrollFeature().scrollGridIfNeeded()){var task=void 0;if(p1Tasks.length)this.sortTaskList(p1TaskList),task=p1Tasks.pop().task;else if(p2Tasks.length)this.sortTaskList(p2TaskList),task=p2Tasks.pop().task;else{if(!destroyTasks.length){this.cancelledTasks.clear();break}task=destroyTasks.pop()}this.cancelledTasks.has(task)||task()}duration=(new Date).getTime()-frameStart}p1Tasks.length||p2Tasks.length||destroyTasks.length?this.requestFrame():this.stopTicking()},AnimationFrameService2.prototype.stopTicking=function(){this.ticking=!1},AnimationFrameService2.prototype.flushAllFrames=function(){this.useAnimationFrame&&this.executeFrame(-1)},AnimationFrameService2.prototype.schedule=function(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))},AnimationFrameService2.prototype.requestFrame=function(){var callback=this.executeFrame.bind(this,60),win=this.gridOptionsService.getDocument().defaultView||window;win.requestAnimationFrame?win.requestAnimationFrame(callback):win.webkitRequestAnimationFrame?win.webkitRequestAnimationFrame(callback):win.setTimeout(callback,0)},AnimationFrameService2.prototype.isQueueEmpty=function(){return!this.ticking},AnimationFrameService2.prototype.debounce=function(func){var _this=this,pending=!1;return function(){_this.isOn()?pending||(pending=!0,_this.addDestroyTask(function(){pending=!1,func()})):_this.getFrameworkOverrides().setTimeout(func,0)}},__decorate$17([Autowired("ctrlsService")],AnimationFrameService2.prototype,"ctrlsService",void 0),__decorate$17([PostConstruct],AnimationFrameService2.prototype,"init",null),AnimationFrameService2=__decorate$17([Bean("animationFrameService")],AnimationFrameService2)}(BeanStub),__extends$1c=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$16=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PositionableFeature=function(_super){function PositionableFeature2(element,config){var _this=_super.call(this)||this;return _this.element=element,_this.dragStartPosition={x:0,y:0},_this.position={x:0,y:0},_this.lastSize={width:-1,height:-1},_this.positioned=!1,_this.resizersAdded=!1,_this.resizeListeners=[],_this.boundaryEl=null,_this.isResizing=!1,_this.isMoving=!1,_this.resizable={},_this.movable=!1,_this.currentResizer=null,_this.config=Object.assign({},{popup:!1},config),_this}return __extends$1c(PositionableFeature2,_super),__name(PositionableFeature2,"PositionableFeature"),PositionableFeature2.prototype.center=function(){var _a=this.offsetParent,clientHeight=_a.clientHeight,x=_a.clientWidth/2-this.getWidth()/2,y=clientHeight/2-this.getHeight()/2;this.offsetElement(x,y)},PositionableFeature2.prototype.initialisePosition=function(){var _a=this.config,centered=_a.centered,forcePopupParentAsOffsetParent=_a.forcePopupParentAsOffsetParent,minWidth=_a.minWidth,width=_a.width,minHeight=_a.minHeight,height=_a.height,x=_a.x,y=_a.y;this.offsetParent||this.setOffsetParent();var computedMinHeight=0,computedMinWidth=0,isVisible2=!!this.element.offsetParent;if(isVisible2){var boundaryEl=this.findBoundaryElement(),offsetParentComputedStyles=window.getComputedStyle(boundaryEl);if(null!=offsetParentComputedStyles.minWidth){var paddingWidth=boundaryEl.offsetWidth-this.element.offsetWidth;computedMinWidth=parseInt(offsetParentComputedStyles.minWidth,10)-paddingWidth}if(null!=offsetParentComputedStyles.minHeight){var paddingHeight=boundaryEl.offsetHeight-this.element.offsetHeight;computedMinHeight=parseInt(offsetParentComputedStyles.minHeight,10)-paddingHeight}}if(this.minHeight=minHeight||computedMinHeight,this.minWidth=minWidth||computedMinWidth,width&&this.setWidth(width),height&&this.setHeight(height),(!width||!height)&&this.refreshSize(),centered)this.center();else if(x||y)this.offsetElement(x,y);else if(isVisible2&&forcePopupParentAsOffsetParent&&this.boundaryEl){var top_1=parseFloat(this.boundaryEl.style.top),left=parseFloat(this.boundaryEl.style.left);this.offsetElement(isNaN(left)?0:left,isNaN(top_1)?0:top_1)}this.positioned=!!this.offsetParent},PositionableFeature2.prototype.isPositioned=function(){return this.positioned},PositionableFeature2.prototype.getPosition=function(){return this.position},PositionableFeature2.prototype.setMovable=function(movable,moveElement){if(this.config.popup&&movable!==this.movable){this.movable=movable;var params=this.moveElementDragListener||{eElement:moveElement,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};movable?(this.dragService.addDragSource(params),this.moveElementDragListener=params):(this.dragService.removeDragSource(params),this.moveElementDragListener=void 0)}},PositionableFeature2.prototype.setResizable=function(resizable){var _this=this;if(this.clearResizeListeners(),resizable?this.addResizers():this.removeResizers(),"boolean"==typeof resizable){if(!1===resizable)return;resizable={topLeft:resizable,top:resizable,topRight:resizable,right:resizable,bottomRight:resizable,bottom:resizable,bottomLeft:resizable,left:resizable}}Object.keys(resizable).forEach(function(side){var isSideResizable=!!resizable[side],resizerEl=_this.getResizerElement(side),params={dragStartPixels:0,eElement:resizerEl,onDragStart:function(e){return _this.onResizeStart(e,side)},onDragging:_this.onResize.bind(_this),onDragStop:function(e){return _this.onResizeEnd(e,side)}};(isSideResizable||!_this.isAlive()&&!isSideResizable)&&(isSideResizable?(_this.dragService.addDragSource(params),_this.resizeListeners.push(params),resizerEl.style.pointerEvents="all"):resizerEl.style.pointerEvents="none",_this.resizable[side]=isSideResizable)})},PositionableFeature2.prototype.removeSizeFromEl=function(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")},PositionableFeature2.prototype.restoreLastSize=function(){this.element.style.flex="0 0 auto";var _a=this.lastSize,height=_a.height,width=_a.width;-1!==width&&(this.element.style.width=width+"px"),-1!==height&&(this.element.style.height=height+"px")},PositionableFeature2.prototype.getHeight=function(){return this.element.offsetHeight},PositionableFeature2.prototype.setHeight=function(height){var popup=this.config.popup,eGui=this.element,isPercent=!1;if("string"==typeof height&&-1!==height.indexOf("%"))setFixedHeight(eGui,height),height=getAbsoluteHeight(eGui),isPercent=!0;else if(this.positioned){var elRect=this.element.getBoundingClientRect(),parentRect=this.offsetParent.getBoundingClientRect();height=Math.max(this.minHeight,height);var clientHeight=this.offsetParent.clientHeight,yPosition=popup?this.position.y:elRect.top,parentTop=popup?0:parentRect.top;clientHeight&&height+yPosition>clientHeight+parentTop&&(height=clientHeight-yPosition)}this.getHeight()!==height&&(isPercent?(eGui.style.maxHeight="unset",eGui.style.minHeight="unset"):popup?setFixedHeight(eGui,height):(eGui.style.height=height+"px",eGui.style.flex="0 0 auto",this.lastSize.height="number"==typeof height?height:parseFloat(height)))},PositionableFeature2.prototype.getWidth=function(){return this.element.offsetWidth},PositionableFeature2.prototype.setWidth=function(width){var eGui=this.element,popup=this.config.popup,isPercent=!1;if("string"==typeof width&&-1!==width.indexOf("%"))setFixedWidth(eGui,width),width=getAbsoluteWidth(eGui),isPercent=!0;else if(this.positioned){width=Math.max(this.minWidth,width);var clientWidth=this.offsetParent.clientWidth,xPosition=popup?this.position.x:this.element.getBoundingClientRect().left;clientWidth&&width+xPosition>clientWidth&&(width=clientWidth-xPosition)}this.getWidth()!==width&&(isPercent?(eGui.style.maxWidth="unset",eGui.style.minWidth="unset"):this.config.popup?setFixedWidth(eGui,width):(eGui.style.width=width+"px",eGui.style.flex=" unset",this.lastSize.width="number"==typeof width?width:parseFloat(width)))},PositionableFeature2.prototype.offsetElement=function(x,y){void 0===x&&(x=0),void 0===y&&(y=0);var ePopup=this.config.forcePopupParentAsOffsetParent?this.boundaryEl:this.element;this.popupService.positionPopup({ePopup,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:function(){return{x,y}}}),this.setPosition(parseFloat(ePopup.style.left),parseFloat(ePopup.style.top))},PositionableFeature2.prototype.setPosition=function(x,y){this.position.x=x,this.position.y=y},PositionableFeature2.prototype.updateDragStartPosition=function(x,y){this.dragStartPosition={x,y}},PositionableFeature2.prototype.calculateMouseMovement=function(params){var e=params.e,isLeft=params.isLeft,isTop=params.isTop,anywhereWithin=params.anywhereWithin,topBuffer=params.topBuffer,xDiff=e.clientX-this.dragStartPosition.x,yDiff=e.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(e,!!isLeft,!!anywhereWithin,xDiff)?0:xDiff,movementY:this.shouldSkipY(e,!!isTop,topBuffer,yDiff)?0:yDiff}},PositionableFeature2.prototype.shouldSkipX=function(e,isLeft,anywhereWithin,diff){var elRect=this.element.getBoundingClientRect(),parentRect=this.offsetParent.getBoundingClientRect(),boundaryElRect=this.boundaryEl.getBoundingClientRect(),xPosition=this.config.popup?this.position.x:elRect.left,skipX=xPosition<=0&&parentRect.left>=e.clientX||parentRect.right<=e.clientX&&parentRect.right<=boundaryElRect.right;return!!skipX||(skipX=isLeft?diff<0&&e.clientX>xPosition+parentRect.left||diff>0&&e.clientX<xPosition+parentRect.left:anywhereWithin?diff<0&&e.clientX>boundaryElRect.right||diff>0&&e.clientX<xPosition+parentRect.left:diff<0&&e.clientX>boundaryElRect.right||diff>0&&e.clientX<boundaryElRect.right)},PositionableFeature2.prototype.shouldSkipY=function(e,isTop,topBuffer,diff){void 0===topBuffer&&(topBuffer=0);var elRect=this.element.getBoundingClientRect(),parentRect=this.offsetParent.getBoundingClientRect(),boundaryElRect=this.boundaryEl.getBoundingClientRect(),yPosition=this.config.popup?this.position.y:elRect.top,skipY=yPosition<=0&&parentRect.top>=e.clientY||parentRect.bottom<=e.clientY&&parentRect.bottom<=boundaryElRect.bottom;return!!skipY||(skipY=isTop?diff<0&&e.clientY>yPosition+parentRect.top+topBuffer||diff>0&&e.clientY<yPosition+parentRect.top:diff<0&&e.clientY>boundaryElRect.bottom||diff>0&&e.clientY<boundaryElRect.bottom)},PositionableFeature2.prototype.createResizeMap=function(){var eGui=this.element;this.resizerMap={topLeft:{element:eGui.querySelector("[ref=eTopLeftResizer]")},top:{element:eGui.querySelector("[ref=eTopResizer]")},topRight:{element:eGui.querySelector("[ref=eTopRightResizer]")},right:{element:eGui.querySelector("[ref=eRightResizer]")},bottomRight:{element:eGui.querySelector("[ref=eBottomRightResizer]")},bottom:{element:eGui.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:eGui.querySelector("[ref=eBottomLeftResizer]")},left:{element:eGui.querySelector("[ref=eLeftResizer]")}}},PositionableFeature2.prototype.addResizers=function(){if(!this.resizersAdded){var eGui=this.element;if(eGui){var resizers=(new DOMParser).parseFromString('<div class="ag-resizer-wrapper">\n        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>\n        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>\n        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>\n        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>\n        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>\n        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>\n        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>\n        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>\n    </div>',"text/html").body;eGui.appendChild(resizers.firstChild),this.createResizeMap(),this.resizersAdded=!0}}},PositionableFeature2.prototype.removeResizers=function(){this.resizerMap=void 0;var resizerEl=this.element.querySelector(".ag-resizer-wrapper");resizerEl&&this.element.removeChild(resizerEl),this.resizersAdded=!1},PositionableFeature2.prototype.getResizerElement=function(side){return this.resizerMap[side].element},PositionableFeature2.prototype.onResizeStart=function(e,side){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!side.match(/top/i),isRight:!!side.match(/right/i),isBottom:!!side.match(/bottom/i),isLeft:!!side.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[side].element.classList.add("ag-active");var _a=this.config,popup=_a.popup,forcePopupParentAsOffsetParent=_a.forcePopupParentAsOffsetParent;!popup&&!forcePopupParentAsOffsetParent&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)},PositionableFeature2.prototype.getSiblings=function(){var parent=this.element.parentElement;return parent?Array.prototype.slice.call(parent.children).filter(function(el){return!el.classList.contains("ag-hidden")}):null},PositionableFeature2.prototype.getMinSizeOfSiblings=function(){for(var siblings=this.getSiblings()||[],height=0,width=0,i=0;i<siblings.length;i++){var currentEl=siblings[i],isFlex=!!currentEl.style.flex&&"0 0 auto"!==currentEl.style.flex;if(currentEl!==this.element){var nextHeight=this.minHeight||0,nextWidth=this.minWidth||0;if(isFlex){var computedStyle=window.getComputedStyle(currentEl);computedStyle.minHeight&&(nextHeight=parseInt(computedStyle.minHeight,10)),computedStyle.minWidth&&(nextWidth=parseInt(computedStyle.minWidth,10))}else nextHeight=currentEl.offsetHeight,nextWidth=currentEl.offsetWidth;height+=nextHeight,width+=nextWidth}}return{height,width}},PositionableFeature2.prototype.applySizeToSiblings=function(vertical){var containerToFlex=null,siblings=this.getSiblings();if(siblings){for(var i=0;i<siblings.length;i++){var el=siblings[i];el!==containerToFlex&&(vertical?el.style.height=el.offsetHeight+"px":el.style.width=el.offsetWidth+"px",el.style.flex="0 0 auto",el===this.element&&(containerToFlex=siblings[i+1]))}containerToFlex&&(containerToFlex.style.removeProperty("height"),containerToFlex.style.removeProperty("min-height"),containerToFlex.style.removeProperty("max-height"),containerToFlex.style.flex="1 1 auto")}},PositionableFeature2.prototype.isResizable=function(){return Object.values(this.resizable).some(function(value){return value})},PositionableFeature2.prototype.onResize=function(e){if(this.isResizing&&this.currentResizer){var _a=this.config,popup=_a.popup,forcePopupParentAsOffsetParent=_a.forcePopupParentAsOffsetParent,_b=this.currentResizer,isTop=_b.isTop,isRight=_b.isRight,isBottom=_b.isBottom,isLeft=_b.isLeft,isHorizontal=isRight||isLeft,isVertical=isBottom||isTop,_c=this.calculateMouseMovement({e,isLeft,isTop}),movementX=_c.movementX,movementY=_c.movementY,xPosition=this.position.x,yPosition=this.position.y,offsetLeft=0,offsetTop=0;if(isHorizontal&&movementX){var direction=isLeft?-1:1,oldWidth=this.getWidth(),newWidth=oldWidth+movementX*direction,skipWidth=!1;isLeft&&((xPosition+(offsetLeft=oldWidth-newWidth)<=0||newWidth<=this.minWidth)&&(skipWidth=!0,offsetLeft=0)),skipWidth||this.setWidth(newWidth)}if(isVertical&&movementY){direction=isTop?-1:1;var oldHeight=this.getHeight(),newHeight=oldHeight+movementY*direction,skipHeight=!1;isTop?(yPosition+(offsetTop=oldHeight-newHeight)<=0||newHeight<=this.minHeight)&&(skipHeight=!0,offsetTop=0):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&oldHeight<newHeight&&this.getMinSizeOfSiblings().height+newHeight>this.element.parentElement.offsetHeight&&(skipHeight=!0),skipHeight||this.setHeight(newHeight)}this.updateDragStartPosition(e.clientX,e.clientY),((popup||forcePopupParentAsOffsetParent)&&offsetLeft||offsetTop)&&this.offsetElement(xPosition+offsetLeft,yPosition+offsetTop)}},PositionableFeature2.prototype.onResizeEnd=function(e,side){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;var params={type:"resize",api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi};this.element.classList.remove("ag-resizing"),this.resizerMap[side].element.classList.remove("ag-active"),this.dispatchEvent(params)},PositionableFeature2.prototype.refreshSize=function(){var eGui=this.element;this.config.popup&&(this.config.width||this.setWidth(eGui.offsetWidth),this.config.height||this.setHeight(eGui.offsetHeight))},PositionableFeature2.prototype.onMoveStart=function(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)},PositionableFeature2.prototype.onMove=function(e){if(this.isMoving){var topBuffer,_a=this.position,x=_a.x,y=_a.y;this.config.calculateTopBuffer&&(topBuffer=this.config.calculateTopBuffer());var _b=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer}),movementX=_b.movementX,movementY=_b.movementY;this.offsetElement(x+movementX,y+movementY),this.updateDragStartPosition(e.clientX,e.clientY)}},PositionableFeature2.prototype.onMoveEnd=function(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")},PositionableFeature2.prototype.setOffsetParent=function(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent},PositionableFeature2.prototype.findBoundaryElement=function(){for(var el=this.element;el;){if("static"!==window.getComputedStyle(el).position)return el;el=el.parentElement}return this.element},PositionableFeature2.prototype.clearResizeListeners=function(){for(;this.resizeListeners.length;){var params=this.resizeListeners.pop();this.dragService.removeDragSource(params)}},PositionableFeature2.prototype.destroy=function(){_super.prototype.destroy.call(this),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.clearResizeListeners(),this.removeResizers()},__decorate$16([Autowired("popupService")],PositionableFeature2.prototype,"popupService",void 0),__decorate$16([Autowired("dragService")],PositionableFeature2.prototype,"dragService",void 0),PositionableFeature2}(BeanStub),__extends$1b=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$15=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AutoWidthCalculator=function(_super){function AutoWidthCalculator2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1b(AutoWidthCalculator2,_super),__name(AutoWidthCalculator2,"AutoWidthCalculator"),AutoWidthCalculator2.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady(function(p){_this.centerRowContainerCtrl=p.centerRowContainerCtrl})},AutoWidthCalculator2.prototype.getPreferredWidthForColumn=function(column,skipHeader){var eHeaderCell=this.getHeaderCellForColumn(column);if(!eHeaderCell)return-1;var elements=this.rowRenderer.getAllCellsForColumn(column);return skipHeader||elements.push(eHeaderCell),this.addElementsToContainerAndGetWidth(elements)},AutoWidthCalculator2.prototype.getPreferredWidthForColumnGroup=function(columnGroup){var eHeaderCell=this.getHeaderCellForColumn(columnGroup);return eHeaderCell?this.addElementsToContainerAndGetWidth([eHeaderCell]):-1},AutoWidthCalculator2.prototype.addElementsToContainerAndGetWidth=function(elements){var _this=this,eDummyContainer=document.createElement("form");eDummyContainer.style.position="fixed";var eBodyContainer=this.centerRowContainerCtrl.getContainerElement();eBodyContainer.appendChild(eDummyContainer),elements.forEach(function(el){return _this.cloneItemIntoDummy(el,eDummyContainer)});var dummyContainerWidth=eDummyContainer.offsetWidth;return eBodyContainer.removeChild(eDummyContainer),dummyContainerWidth+this.getAutoSizePadding()},AutoWidthCalculator2.prototype.getAutoSizePadding=function(){var value=this.gridOptionsService.getNum("autoSizePadding");return null!=value&&value>=0?value:20},AutoWidthCalculator2.prototype.getHeaderCellForColumn=function(column){var element=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(container){var res=container.getHtmlElementForColumnHeader(column);null!=res&&(element=res)}),element},AutoWidthCalculator2.prototype.cloneItemIntoDummy=function(eCell,eDummyContainer){var eCellClone=eCell.cloneNode(!0);eCellClone.style.width="",eCellClone.style.position="static",eCellClone.style.left="";var eCloneParent=document.createElement("div"),eCloneParentClassList=eCloneParent.classList;["ag-header-cell","ag-header-group-cell"].some(function(cls){return eCellClone.classList.contains(cls)})?(eCloneParentClassList.add("ag-header","ag-header-row"),eCloneParent.style.position="static"):eCloneParentClassList.add("ag-row");for(var pointer=eCell.parentElement;pointer;){if(["ag-header-row","ag-row"].some(function(cls){return pointer.classList.contains(cls)})){for(var i=0;i<pointer.classList.length;i++){var item=pointer.classList[i];"ag-row-position-absolute"!=item&&eCloneParentClassList.add(item)}break}pointer=pointer.parentElement}eCloneParent.appendChild(eCellClone),eDummyContainer.appendChild(eCloneParent)},__decorate$15([Autowired("rowRenderer")],AutoWidthCalculator2.prototype,"rowRenderer",void 0),__decorate$15([Autowired("ctrlsService")],AutoWidthCalculator2.prototype,"ctrlsService",void 0),__decorate$15([Autowired("rowCssClassCalculator")],AutoWidthCalculator2.prototype,"rowCssClassCalculator",void 0),__decorate$15([PostConstruct],AutoWidthCalculator2.prototype,"postConstruct",null),AutoWidthCalculator2=__decorate$15([Bean("autoWidthCalculator")],AutoWidthCalculator2)}(BeanStub),__extends$1a=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$14=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$d=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},StickyRowFeature=function(_super){function StickyRowFeature2(createRowCon,destroyRowCtrls){var _this=_super.call(this)||this;return _this.createRowCon=createRowCon,_this.destroyRowCtrls=destroyRowCtrls,_this.stickyRowCtrls=[],_this.containerHeight=0,_this}return __extends$1a(StickyRowFeature2,_super),__name(StickyRowFeature2,"StickyRowFeature"),StickyRowFeature2.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady(function(params){_this.gridBodyCtrl=params.gridBodyCtrl})},StickyRowFeature2.prototype.getStickyRowCtrls=function(){return this.stickyRowCtrls},StickyRowFeature2.prototype.checkStickyRows=function(){var height=0;if(this.gridOptionsService.is("groupRowsSticky")){for(var stickyRows=[],firstPixel=this.rowRenderer.getFirstVisibleVerticalPixel(),addStickyRow=__name(function(stickyRow){stickyRows.push(stickyRow);for(var lastAncester=stickyRow;lastAncester.expanded;)lastAncester=last(lastAncester.childrenAfterSort);var lastChildBottom=lastAncester.rowTop+lastAncester.rowHeight,stickRowBottom=firstPixel+height+stickyRow.rowHeight;stickyRow.stickyRowTop=lastChildBottom<stickRowBottom?height+(lastChildBottom-stickRowBottom):height,height=0,stickyRows.forEach(function(rowNode){var thisRowLastPx=rowNode.stickyRowTop+rowNode.rowHeight;height<thisRowLastPx&&(height=thisRowLastPx)})},"addStickyRow");;){var firstPixelAfterStickyRows=firstPixel+height,firstIndex=this.rowModel.getRowIndexAtPixel(firstPixelAfterStickyRows),firstRow=this.rowModel.getRow(firstIndex);if(null==firstRow||firstRow.level<0)break;for(var parents=[],p=firstRow.parent;p.level>=0;)parents.push(p),p=p.parent;var firstMissingParent=parents.reverse().find(function(parent){return stickyRows.indexOf(parent)<0&&parent.displayed});if(firstMissingParent)addStickyRow(firstMissingParent);else{if(!(firstRow.group&&firstRow.expanded&&!firstRow.footer&&firstRow.rowTop<firstPixelAfterStickyRows))break;addStickyRow(firstRow)}}this.refreshNodesAndContainerHeight(stickyRows,height)}else this.refreshNodesAndContainerHeight([],height)},StickyRowFeature2.prototype.refreshNodesAndContainerHeight=function(allStickyNodes,height){var e_1,_a,_b,_this=this,removedCtrls=this.stickyRowCtrls.filter(function(ctrl2){return-1===allStickyNodes.indexOf(ctrl2.getRowNode())}),addedNodes=allStickyNodes.filter(function(rowNode){return-1===_this.stickyRowCtrls.findIndex(function(ctrl2){return ctrl2.getRowNode()===rowNode})}),ctrlsToDestroy={};removedCtrls.forEach(function(removedCtrl){ctrlsToDestroy[removedCtrl.getRowNode().id]=removedCtrl,_this.stickyRowCtrls=_this.stickyRowCtrls.filter(function(ctrl2){return ctrl2!==removedCtrl})});try{for(var _c=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.values(ctrlsToDestroy)),_d=_c.next();!_d.done;_d=_c.next()){_d.value.getRowNode().sticky=!1}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_1)throw e_1.error}}this.destroyRowCtrls(ctrlsToDestroy,!1);var newCtrls=addedNodes.map(function(rowNode){return rowNode.sticky=!0,_this.createRowCon(rowNode,!1,!1)});(_b=this.stickyRowCtrls).push.apply(_b,function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$d(arguments[i]));return ar}(newCtrls)),this.stickyRowCtrls.forEach(function(ctrl2){return ctrl2.setRowTop(ctrl2.getRowNode().stickyRowTop)}),this.stickyRowCtrls.sort(function(a,b){return b.getRowNode().rowIndex-a.getRowNode().rowIndex}),this.containerHeight!==height&&(this.containerHeight=height,this.gridBodyCtrl.setStickyTopHeight(height))},__decorate$14([Autowired("rowModel")],StickyRowFeature2.prototype,"rowModel",void 0),__decorate$14([Autowired("rowRenderer")],StickyRowFeature2.prototype,"rowRenderer",void 0),__decorate$14([Autowired("ctrlsService")],StickyRowFeature2.prototype,"ctrlsService",void 0),__decorate$14([PostConstruct],StickyRowFeature2.prototype,"postConstruct",null),StickyRowFeature2}(BeanStub),__extends$19=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$13=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$c=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$b=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$c(arguments[i]));return ar},RowRenderer=function(_super){function RowRenderer2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.destroyFuncsForColumnListeners=[],_this.rowCtrlsByRowIndex={},_this.zombieRowCtrls={},_this.allRowCtrls=[],_this.topRowCtrls=[],_this.bottomRowCtrls=[],_this.refreshInProgress=!1,_this.dataFirstRenderedFired=!1,_this}return __extends$19(RowRenderer2,_super),__name(RowRenderer2,"RowRenderer"),RowRenderer2.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady(function(){_this.gridBodyCtrl=_this.ctrlsService.getGridBodyCtrl(),_this.initialise()})},RowRenderer2.prototype.initialise=function(){this.addManagedListener(this.eventService,Events.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_BODY_HEIGHT_CHANGED,this.redrawAfterScroll.bind(this)),this.addManagedPropertyListener("domLayout",this.onDomLayoutChanged.bind(this)),this.addManagedPropertyListener("rowClass",this.redrawRows.bind(this)),this.gridOptionsService.is("groupRowsSticky")&&("clientSide"!=this.rowModel.getType()?doOnce(function(){return console.warn("AG Grid: The feature Sticky Row Groups only works with the Client Side Row Model")},"rowRenderer.stickyWorksWithCsrmOnly"):this.gridOptionsService.isTreeData()?doOnce(function(){return console.warn("AG Grid: The feature Sticky Row Groups does not work with Tree Data.")},"rowRenderer.stickyDoesNotWorkWithTreeData"):this.stickyRowFeature=this.createManagedBean(new StickyRowFeature(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this)))),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gridOptionsService.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gridOptionsService.is("embedFullWidthRows"),this.redrawAfterModelUpdate()},RowRenderer2.prototype.initialiseCache=function(){if(this.gridOptionsService.is("keepDetailRows")){var count=this.getKeepDetailRowsCount()??3;this.cachedRowCtrls=new RowCtrlCache(count)}},RowRenderer2.prototype.getKeepDetailRowsCount=function(){var keepDetailRowsCount=this.gridOptionsService.getNum("keepDetailRowsCount");return exists(keepDetailRowsCount)&&keepDetailRowsCount>0?keepDetailRowsCount:10},RowRenderer2.prototype.getRowCtrls=function(){return this.allRowCtrls},RowRenderer2.prototype.getStickyTopRowCtrls=function(){return this.stickyRowFeature?this.stickyRowFeature.getStickyRowCtrls():[]},RowRenderer2.prototype.updateAllRowCtrls=function(){var liveList=getAllValuesInObject(this.rowCtrlsByRowIndex),isEnsureDomOrder=this.gridOptionsService.is("ensureDomOrder"),isPrintLayout=this.gridOptionsService.isDomLayout("print");(isEnsureDomOrder||isPrintLayout)&&liveList.sort(function(a,b){return a.getRowNode().rowIndex-b.getRowNode.rowIndex});var zombieList=getAllValuesInObject(this.zombieRowCtrls),cachedList=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];this.allRowCtrls=__spread$b(liveList,zombieList,cachedList)},RowRenderer2.prototype.onCellFocusChanged=function(event){this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.onCellFocused(event)}),this.getFullWidthRowCtrls().forEach(function(rowCtrl){return rowCtrl.onFullWidthRowFocused(event)})},RowRenderer2.prototype.registerCellEventListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_CELL_FOCUSED,function(event){_this.onCellFocusChanged(event)}),this.addManagedListener(this.eventService,Events.EVENT_CELL_FOCUS_CLEARED,function(){_this.onCellFocusChanged()}),this.addManagedListener(this.eventService,Events.EVENT_FLASH_CELLS,function(event){_this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.onFlashCells(event)})}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_HOVER_CHANGED,function(){_this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.onColumnHover()})}),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,function(){_this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.onDisplayedColumnsChanged()})}),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,function(){_this.printLayout&&_this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.onLeftChanged()})}),this.gridOptionsService.isEnableRangeSelection()&&(this.addManagedListener(this.eventService,Events.EVENT_RANGE_SELECTION_CHANGED,function(){_this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.onRangeSelectionChanged()})}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,function(){_this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.updateRangeBordersIfRangeCount()})}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PINNED,function(){_this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.updateRangeBordersIfRangeCount()})}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VISIBLE,function(){_this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.updateRangeBordersIfRangeCount()})})),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,Events.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))},RowRenderer2.prototype.removeGridColumnListeners=function(){this.destroyFuncsForColumnListeners.forEach(function(func){return func()}),this.destroyFuncsForColumnListeners.length=0},RowRenderer2.prototype.refreshListenersToColumnsForCellComps=function(){var _this=this;this.removeGridColumnListeners();var cols=this.columnModel.getAllGridColumns();cols&&cols.forEach(function(col){var forEachCellWithThisCol=__name(function(callback){_this.getAllCellCtrls().forEach(function(cellCtrl){cellCtrl.getColumn()===col&&callback(cellCtrl)})},"forEachCellWithThisCol"),leftChangedListener=__name(function(){forEachCellWithThisCol(function(cellCtrl){return cellCtrl.onLeftChanged()})},"leftChangedListener"),widthChangedListener=__name(function(){forEachCellWithThisCol(function(cellCtrl){return cellCtrl.onWidthChanged()})},"widthChangedListener"),firstRightPinnedChangedListener=__name(function(){forEachCellWithThisCol(function(cellCtrl){return cellCtrl.onFirstRightPinnedChanged()})},"firstRightPinnedChangedListener"),lastLeftPinnedChangedListener=__name(function(){forEachCellWithThisCol(function(cellCtrl){return cellCtrl.onLastLeftPinnedChanged()})},"lastLeftPinnedChangedListener"),colDefChangedListener=__name(function(){forEachCellWithThisCol(function(cellCtrl){return cellCtrl.onColDefChanged()})},"colDefChangedListener");col.addEventListener("leftChanged",leftChangedListener),col.addEventListener("widthChanged",widthChangedListener),col.addEventListener("firstRightPinnedChanged",firstRightPinnedChangedListener),col.addEventListener("lastLeftPinnedChanged",lastLeftPinnedChangedListener),col.addEventListener("colDefChanged",colDefChangedListener),_this.destroyFuncsForColumnListeners.push(function(){col.removeEventListener("leftChanged",leftChangedListener),col.removeEventListener("widthChanged",widthChangedListener),col.removeEventListener("firstRightPinnedChanged",firstRightPinnedChangedListener),col.removeEventListener("lastLeftPinnedChanged",lastLeftPinnedChangedListener),col.removeEventListener("colDefChanged",colDefChangedListener)})})},RowRenderer2.prototype.onDomLayoutChanged=function(){var printLayout=this.gridOptionsService.isDomLayout("print"),embedFullWidthRows=printLayout||this.gridOptionsService.is("embedFullWidthRows"),destroyRows=embedFullWidthRows!==this.embedFullWidthRows||this.printLayout!==printLayout;this.printLayout=printLayout,this.embedFullWidthRows=embedFullWidthRows,destroyRows&&this.redrawAfterModelUpdate({domLayoutChanged:!0})},RowRenderer2.prototype.datasourceChanged=function(){this.firstRenderedRow=0,this.lastRenderedRow=-1;var rowIndexesToRemove=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(rowIndexesToRemove)},RowRenderer2.prototype.onPageLoaded=function(event){var params={recycleRows:event.keepRenderedRows,animate:event.animate,newData:event.newData,newPage:event.newPage,onlyBody:!0};this.redrawAfterModelUpdate(params)},RowRenderer2.prototype.getAllCellsForColumn=function(column){var res=[];return this.getAllRowCtrls().forEach(function(rowCtrl){var eCell=rowCtrl.getCellElement(column);eCell&&res.push(eCell)}),res},RowRenderer2.prototype.refreshFloatingRowComps=function(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())},RowRenderer2.prototype.getTopRowCtrls=function(){return this.topRowCtrls},RowRenderer2.prototype.getBottomRowCtrls=function(){return this.bottomRowCtrls},RowRenderer2.prototype.refreshFloatingRows=function(rowComps,rowNodes){var _this=this;rowComps.forEach(function(row){row.destroyFirstPass(),row.destroySecondPass()}),rowComps.length=0,rowNodes&&rowNodes.forEach(function(rowNode){var rowCtrl=new RowCtrl(rowNode,_this.beans,!1,!1,_this.printLayout);rowComps.push(rowCtrl)})},RowRenderer2.prototype.onPinnedRowDataChanged=function(){this.redrawAfterModelUpdate({recycleRows:!0})},RowRenderer2.prototype.getRenderedIndexesForRowNodes=function(rowNodes){var result=[];return missing(rowNodes)||iterateObject(this.rowCtrlsByRowIndex,function(index,renderedRow){var rowNode=renderedRow.getRowNode();rowNodes.indexOf(rowNode)>=0&&result.push(index)}),result},RowRenderer2.prototype.redrawRows=function(rowNodes){var partialRefresh=null!=rowNodes&&rowNodes.length>0;if(partialRefresh){var indexesToRemove=this.getRenderedIndexesForRowNodes(rowNodes);this.removeRowCtrls(indexesToRemove)}this.redrawAfterModelUpdate({recycleRows:partialRefresh})},RowRenderer2.prototype.getCellToRestoreFocusToAfterRefresh=function(params){var focusedCell=null!=params&&params.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(null==focusedCell)return null;var activeElement=this.gridOptionsService.getDocument().activeElement,cellDomData=this.gridOptionsService.getDomData(activeElement,CellCtrl.DOM_DATA_KEY_CELL_CTRL),rowDomData=this.gridOptionsService.getDomData(activeElement,RowCtrl.DOM_DATA_KEY_ROW_CTRL);return cellDomData||rowDomData?focusedCell:null},RowRenderer2.prototype.redrawAfterModelUpdate=function(params){void 0===params&&(params={}),this.getLockOnRefresh();var focusedCell=this.getCellToRestoreFocusToAfterRefresh(params);this.updateContainerHeights(),this.scrollToTopIfNewData(params);var recycleRows=!params.domLayoutChanged&&!!params.recycleRows,animate=params.animate&&this.gridOptionsService.isAnimateRows(),rowsToRecycle=recycleRows?this.recycleRows():null;recycleRows||this.removeAllRowComps(),this.redraw(rowsToRecycle,animate),this.gridBodyCtrl.updateRowCount(),params.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),null!=focusedCell&&this.restoreFocusedCell(focusedCell),this.releaseLockOnRefresh()},RowRenderer2.prototype.scrollToTopIfNewData=function(params){var scrollToTop=params.newData||params.newPage,suppressScrollToTop=this.gridOptionsService.is("suppressScrollOnNewData");scrollToTop&&!suppressScrollToTop&&this.gridBodyCtrl.getScrollFeature().scrollToTop()},RowRenderer2.prototype.updateContainerHeights=function(){if(this.printLayout)this.rowContainerHeightService.setModelHeight(null);else{var containerHeight=this.paginationProxy.getCurrentPageHeight();0===containerHeight&&(containerHeight=1),this.rowContainerHeightService.setModelHeight(containerHeight)}},RowRenderer2.prototype.getLockOnRefresh=function(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0},RowRenderer2.prototype.releaseLockOnRefresh=function(){this.refreshInProgress=!1},RowRenderer2.prototype.isRefreshInProgress=function(){return this.refreshInProgress},RowRenderer2.prototype.restoreFocusedCell=function(cellPosition){cellPosition&&this.onCellFocusChanged({rowIndex:cellPosition.rowIndex,column:cellPosition.column,rowPinned:cellPosition.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,api:this.beans.gridApi,columnApi:this.beans.columnApi,context:this.beans.context,type:"mock"})},RowRenderer2.prototype.stopEditing=function(cancel){void 0===cancel&&(cancel=!1),this.getAllRowCtrls().forEach(function(rowCtrl){rowCtrl.stopEditing(cancel)})},RowRenderer2.prototype.getAllCellCtrls=function(){var res=[];return this.getAllRowCtrls().forEach(function(rowCtrl){return res=res.concat(rowCtrl.getAllCellCtrls())}),res},RowRenderer2.prototype.getAllRowCtrls=function(){var _this=this,stickyRowCtrls=this.stickyRowFeature&&this.stickyRowFeature.getStickyRowCtrls()||[],res=__spread$b(this.topRowCtrls,this.bottomRowCtrls,stickyRowCtrls);return Object.keys(this.rowCtrlsByRowIndex).forEach(function(key){return res.push(_this.rowCtrlsByRowIndex[key])}),res},RowRenderer2.prototype.addRenderedRowListener=function(eventName,rowIndex,callback){var rowComp=this.rowCtrlsByRowIndex[rowIndex];rowComp&&rowComp.addEventListener(eventName,callback)},RowRenderer2.prototype.flashCells=function(params){void 0===params&&(params={});var flashDelay=params.flashDelay,fadeDelay=params.fadeDelay;this.getCellCtrls(params.rowNodes,params.columns).forEach(function(cellCtrl){return cellCtrl.flashCell({flashDelay,fadeDelay})})},RowRenderer2.prototype.refreshCells=function(params){void 0===params&&(params={});var refreshCellParams={forceRefresh:params.force,newData:!1,suppressFlash:params.suppressFlash};this.getCellCtrls(params.rowNodes,params.columns).forEach(function(cellCtrl){if(cellCtrl.refreshShouldDestroy()){var rowCtrl=cellCtrl.getRowCtrl();rowCtrl&&rowCtrl.refreshCell(cellCtrl)}else cellCtrl.refreshCell(refreshCellParams)}),this.getFullWidthRowCtrls(params.rowNodes).forEach(function(fullWidthRowCtrl){fullWidthRowCtrl.refreshFullWidth()})},RowRenderer2.prototype.getCellRendererInstances=function(params){var _a,_this=this,cellRenderers=this.getCellCtrls(params.rowNodes,params.columns).map(function(cellCtrl){return cellCtrl.getCellRenderer()}).filter(function(renderer){return null!=renderer});if(null!==(_a=params.columns)&&void 0!==_a&&_a.length)return cellRenderers;var fullWidthRenderers=[],rowIdMap=this.mapRowNodes(params.rowNodes);return this.getAllRowCtrls().forEach(function(rowCtrl){if((!rowIdMap||_this.isRowInMap(rowCtrl.getRowNode(),rowIdMap))&&rowCtrl.isFullWidth()){var fullWidthRenderer=rowCtrl.getFullWidthCellRenderer();fullWidthRenderer&&fullWidthRenderers.push(fullWidthRenderer)}}),__spread$b(fullWidthRenderers,cellRenderers)},RowRenderer2.prototype.getCellEditorInstances=function(params){var res=[];return this.getCellCtrls(params.rowNodes,params.columns).forEach(function(cellCtrl){var cellEditor=cellCtrl.getCellEditor();cellEditor&&res.push(cellEditor)}),res},RowRenderer2.prototype.getEditingCells=function(){var res=[];return this.getAllCellCtrls().forEach(function(cellCtrl){if(cellCtrl.isEditing()){var cellPosition=cellCtrl.getCellPosition();res.push(cellPosition)}}),res},RowRenderer2.prototype.mapRowNodes=function(rowNodes){if(rowNodes){var res={top:{},bottom:{},normal:{}};return rowNodes.forEach(function(rowNode){var id=rowNode.id;"top"===rowNode.rowPinned?res.top[id]=rowNode:"bottom"===rowNode.rowPinned?res.bottom[id]=rowNode:res.normal[id]=rowNode}),res}},RowRenderer2.prototype.isRowInMap=function(rowNode,rowIdsMap){var id=rowNode.id,floating=rowNode.rowPinned;return"bottom"===floating?null!=rowIdsMap.bottom[id]:"top"===floating?null!=rowIdsMap.top[id]:null!=rowIdsMap.normal[id]},RowRenderer2.prototype.getCellCtrls=function(rowNodes,columns){var colIdsMap,_this=this,rowIdsMap=this.mapRowNodes(rowNodes),res=[];exists(columns)&&(colIdsMap={},columns.forEach(function(colKey){var column=_this.columnModel.getGridColumn(colKey);exists(column)&&(colIdsMap[column.getId()]=!0)}));var processRow=__name(function(rowCtrl){var rowNode=rowCtrl.getRowNode();null!=rowIdsMap&&!_this.isRowInMap(rowNode,rowIdsMap)||rowCtrl.getAllCellCtrls().forEach(function(cellCtrl){var colId=cellCtrl.getColumn().getId();colIdsMap&&!colIdsMap[colId]||res.push(cellCtrl)})},"processRow");return this.getAllRowCtrls().forEach(function(row){return processRow(row)}),res},RowRenderer2.prototype.destroy=function(){this.removeAllRowComps(),_super.prototype.destroy.call(this)},RowRenderer2.prototype.removeAllRowComps=function(){var rowIndexesToRemove=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(rowIndexesToRemove)},RowRenderer2.prototype.recycleRows=function(){var stubNodeIndexes=[];iterateObject(this.rowCtrlsByRowIndex,function(index,rowComp){null==rowComp.getRowNode().id&&stubNodeIndexes.push(index)}),this.removeRowCtrls(stubNodeIndexes);var ctrlsByIdMap={};return iterateObject(this.rowCtrlsByRowIndex,function(index,rowComp){var rowNode=rowComp.getRowNode();ctrlsByIdMap[rowNode.id]=rowComp}),this.rowCtrlsByRowIndex={},ctrlsByIdMap},RowRenderer2.prototype.removeRowCtrls=function(rowsToRemove){var _this=this;rowsToRemove.forEach(function(indexToRemove){var rowCtrl=_this.rowCtrlsByRowIndex[indexToRemove];rowCtrl&&(rowCtrl.destroyFirstPass(),rowCtrl.destroySecondPass()),delete _this.rowCtrlsByRowIndex[indexToRemove]})},RowRenderer2.prototype.onBodyScroll=function(e){"vertical"===e.direction&&this.redrawAfterScroll()},RowRenderer2.prototype.redrawAfterScroll=function(){var cellFocused;if(this.stickyRowFeature&&browserSupportsPreventScroll()&&(cellFocused=this.getCellToRestoreFocusToAfterRefresh()||void 0),this.getLockOnRefresh(),this.redraw(null,!1,!0),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(),null!=cellFocused){var newFocusedCell=this.getCellToRestoreFocusToAfterRefresh();null!=cellFocused&&null==newFocusedCell&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(cellFocused))}},RowRenderer2.prototype.removeRowCompsNotToDraw=function(indexesToDraw){var indexesToDrawMap={};indexesToDraw.forEach(function(index){return indexesToDrawMap[index]=!0});var indexesNotToDraw=Object.keys(this.rowCtrlsByRowIndex).filter(function(index){return!indexesToDrawMap[index]});this.removeRowCtrls(indexesNotToDraw)},RowRenderer2.prototype.calculateIndexesToDraw=function(rowsToRecycle){var _this=this,indexesToDraw=createArrayOfNumbers(this.firstRenderedRow,this.lastRenderedRow),checkRowToDraw=__name(function(indexStr,rowComp){var index=rowComp.getRowNode().rowIndex;null!=index&&(index<_this.firstRenderedRow||index>_this.lastRenderedRow)&&_this.doNotUnVirtualiseRow(rowComp)&&indexesToDraw.push(index)},"checkRowToDraw");return iterateObject(this.rowCtrlsByRowIndex,checkRowToDraw),iterateObject(rowsToRecycle,checkRowToDraw),indexesToDraw.sort(function(a,b){return a-b}),indexesToDraw=indexesToDraw.filter(function(index){var rowNode=_this.paginationProxy.getRow(index);return rowNode&&!rowNode.sticky})},RowRenderer2.prototype.redraw=function(rowsToRecycle,animate,afterScroll){var _this=this;void 0===animate&&(animate=!1),void 0===afterScroll&&(afterScroll=!1),this.rowContainerHeightService.updateOffset(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows();var indexesToDraw=this.calculateIndexesToDraw(rowsToRecycle);(this.removeRowCompsNotToDraw(indexesToDraw),this.printLayout&&(animate=!1),indexesToDraw.forEach(function(rowIndex){exists(_this.createOrUpdateRowCtrl(rowIndex,rowsToRecycle,animate,afterScroll))}),rowsToRecycle)&&(afterScroll&&!this.gridOptionsService.is("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(function(){_this.destroyRowCtrls(rowsToRecycle,animate),_this.updateAllRowCtrls(),_this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(rowsToRecycle,animate));this.updateAllRowCtrls()},RowRenderer2.prototype.dispatchDisplayedRowsChanged=function(){var event={type:Events.EVENT_DISPLAYED_ROWS_CHANGED};this.eventService.dispatchEvent(event)},RowRenderer2.prototype.onDisplayedColumnsChanged=function(){var pinningLeft=this.columnModel.isPinningLeft(),pinningRight=this.columnModel.isPinningRight();(this.pinningLeft!==pinningLeft||pinningRight!==this.pinningRight)&&(this.pinningLeft=pinningLeft,this.pinningRight=pinningRight,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())},RowRenderer2.prototype.redrawFullWidthEmbeddedRows=function(){var rowsToRemove=[];this.getFullWidthRowCtrls().forEach(function(fullWidthCtrl){var rowIndex=fullWidthCtrl.getRowNode().rowIndex;rowsToRemove.push(rowIndex.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(rowsToRemove),this.redrawAfterScroll()},RowRenderer2.prototype.getFullWidthRowCtrls=function(rowNodes){var _this=this,rowNodesMap=this.mapRowNodes(rowNodes);return getAllValuesInObject(this.rowCtrlsByRowIndex).filter(function(rowCtrl){if(!rowCtrl.isFullWidth())return!1;var rowNode=rowCtrl.getRowNode();return!(null!=rowNodesMap&&!_this.isRowInMap(rowNode,rowNodesMap))})},RowRenderer2.prototype.refreshFullWidthRows=function(rowNodesToRefresh){var rowsToRemove=[],selectivelyRefreshing=!!rowNodesToRefresh,idsToRefresh=selectivelyRefreshing?{}:void 0;selectivelyRefreshing&&idsToRefresh&&rowNodesToRefresh.forEach(function(r){return idsToRefresh[r.id]=!0}),this.getFullWidthRowCtrls().forEach(function(fullWidthRowCtrl){var rowNode=fullWidthRowCtrl.getRowNode();if(selectivelyRefreshing&&idsToRefresh){var parentId=rowNode.level>0&&rowNode.parent?rowNode.parent.id:void 0;if(!idsToRefresh[rowNode.id]&&!idsToRefresh[parentId])return}if(!fullWidthRowCtrl.refreshFullWidth()){var rowIndex=fullWidthRowCtrl.getRowNode().rowIndex;rowsToRemove.push(rowIndex.toString())}}),this.removeRowCtrls(rowsToRemove),this.redrawAfterScroll()},RowRenderer2.prototype.createOrUpdateRowCtrl=function(rowIndex,rowsToRecycle,animate,afterScroll){var rowNode,rowCtrl=this.rowCtrlsByRowIndex[rowIndex];if(rowCtrl||exists(rowNode=this.paginationProxy.getRow(rowIndex))&&exists(rowsToRecycle)&&rowsToRecycle[rowNode.id]&&rowNode.alreadyRendered&&(rowCtrl=rowsToRecycle[rowNode.id],rowsToRecycle[rowNode.id]=null),!rowCtrl){if(rowNode||(rowNode=this.paginationProxy.getRow(rowIndex)),!exists(rowNode))return;rowCtrl=this.createRowCon(rowNode,animate,afterScroll)}return rowNode&&(rowNode.alreadyRendered=!0),this.rowCtrlsByRowIndex[rowIndex]=rowCtrl,rowCtrl},RowRenderer2.prototype.destroyRowCtrls=function(rowCtrlsMap,animate){var _this=this,executeInAWhileFuncs=[];iterateObject(rowCtrlsMap,function(nodeId,rowCtrl){if(rowCtrl){if(_this.cachedRowCtrls&&rowCtrl.isCacheable())return void _this.cachedRowCtrls.addRow(rowCtrl);rowCtrl.destroyFirstPass(),animate?(_this.zombieRowCtrls[rowCtrl.getInstanceId()]=rowCtrl,executeInAWhileFuncs.push(function(){rowCtrl.destroySecondPass(),delete _this.zombieRowCtrls[rowCtrl.getInstanceId()]})):rowCtrl.destroySecondPass()}}),animate&&(executeInAWhileFuncs.push(function(){_this.updateAllRowCtrls(),_this.dispatchDisplayedRowsChanged()}),executeInAWhile(executeInAWhileFuncs))},RowRenderer2.prototype.getRowBuffer=function(){var rowBuffer=this.gridOptionsService.getNum("rowBuffer");return"number"==typeof rowBuffer?rowBuffer<0&&(doOnce(function(){return console.warn("AG Grid: rowBuffer should not be negative")},"warn rowBuffer negative"),rowBuffer=0,this.gridOptionsService.set("rowBuffer",0)):rowBuffer=10,rowBuffer},RowRenderer2.prototype.getRowBufferInPixels=function(){return this.getRowBuffer()*this.gridOptionsService.getRowHeightAsNumber()},RowRenderer2.prototype.workOutFirstAndLastRowsToRender=function(){var newFirst,newLast;if(this.paginationProxy.isRowsToRender())if(this.printLayout)newFirst=this.paginationProxy.getPageFirstRow(),newLast=this.paginationProxy.getPageLastRow();else{var bufferPixels=this.getRowBufferInPixels(),gridBodyCtrl=this.ctrlsService.getGridBodyCtrl(),suppressRowVirtualisation=this.gridOptionsService.is("suppressRowVirtualisation"),rowHeightsChanged=!1,firstPixel=void 0,lastPixel=void 0;do{var paginationOffset=this.paginationProxy.getPixelOffset(),_a=this.paginationProxy.getCurrentPagePixelRange(),pageFirstPixel=_a.pageFirstPixel,pageLastPixel=_a.pageLastPixel,divStretchOffset=this.rowContainerHeightService.getDivStretchOffset(),bodyVRange=gridBodyCtrl.getScrollFeature().getVScrollPosition(),bodyTopPixel=bodyVRange.top,bodyBottomPixel=bodyVRange.bottom;suppressRowVirtualisation?(firstPixel=pageFirstPixel+divStretchOffset,lastPixel=pageLastPixel+divStretchOffset):(firstPixel=Math.max(bodyTopPixel+paginationOffset-bufferPixels,pageFirstPixel)+divStretchOffset,lastPixel=Math.min(bodyBottomPixel+paginationOffset+bufferPixels,pageLastPixel)+divStretchOffset),this.firstVisibleVPixel=Math.max(bodyTopPixel+paginationOffset,pageFirstPixel)+divStretchOffset,rowHeightsChanged=this.ensureAllRowsInRangeHaveHeightsCalculated(firstPixel,lastPixel)}while(rowHeightsChanged);var firstRowIndex=this.paginationProxy.getRowIndexAtPixel(firstPixel),lastRowIndex=this.paginationProxy.getRowIndexAtPixel(lastPixel),pageFirstRow=this.paginationProxy.getPageFirstRow(),pageLastRow=this.paginationProxy.getPageLastRow();firstRowIndex<pageFirstRow&&(firstRowIndex=pageFirstRow),lastRowIndex>pageLastRow&&(lastRowIndex=pageLastRow),newFirst=firstRowIndex,newLast=lastRowIndex}else newFirst=0,newLast=-1;var rowLayoutNormal=this.gridOptionsService.isDomLayout("normal"),suppressRowCountRestriction=this.gridOptionsService.is("suppressMaxRenderedRowRestriction"),rowBufferMaxSize=Math.max(this.getRowBuffer(),500);rowLayoutNormal&&!suppressRowCountRestriction&&newLast-newFirst>rowBufferMaxSize&&(newLast=newFirst+rowBufferMaxSize);var firstDiffers=newFirst!==this.firstRenderedRow,lastDiffers=newLast!==this.lastRenderedRow;if(firstDiffers||lastDiffers){this.firstRenderedRow=newFirst,this.lastRenderedRow=newLast;var event_1={type:Events.EVENT_VIEWPORT_CHANGED,firstRow:newFirst,lastRow:newLast};this.eventService.dispatchEvent(event_1)}},RowRenderer2.prototype.dispatchFirstDataRenderedEvent=function(){var _this=this;if(!this.dataFirstRenderedFired){this.dataFirstRenderedFired=!0;var event={type:Events.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(function(){_this.beans.eventService.dispatchEvent(event)})}},RowRenderer2.prototype.ensureAllRowsInRangeHaveHeightsCalculated=function(topPixel,bottomPixel){var res=this.paginationProxy.ensureRowHeightsValid(topPixel,bottomPixel,-1,-1);return res&&this.updateContainerHeights(),res},RowRenderer2.prototype.getFirstVisibleVerticalPixel=function(){return this.firstVisibleVPixel},RowRenderer2.prototype.getFirstVirtualRenderedRow=function(){return this.firstRenderedRow},RowRenderer2.prototype.getLastVirtualRenderedRow=function(){return this.lastRenderedRow},RowRenderer2.prototype.doNotUnVirtualiseRow=function(rowComp){var rowNode=rowComp.getRowNode(),rowHasFocus=this.focusService.isRowNodeFocused(rowNode),rowIsEditing=rowComp.isEditing(),rowIsDetail=rowNode.detail;return!!(rowHasFocus||rowIsEditing||rowIsDetail)&&!!this.paginationProxy.isRowPresent(rowNode)},RowRenderer2.prototype.createRowCon=function(rowNode,animate,afterScroll){var rowCtrlFromCache=this.cachedRowCtrls?this.cachedRowCtrls.getRow(rowNode):null;if(rowCtrlFromCache)return rowCtrlFromCache;var suppressAnimationFrame=this.gridOptionsService.is("suppressAnimationFrame"),useAnimationFrameForCreate=afterScroll&&!suppressAnimationFrame&&!this.printLayout;return new RowCtrl(rowNode,this.beans,animate,useAnimationFrameForCreate,this.printLayout)},RowRenderer2.prototype.getRenderedNodes=function(){var renderedRows=this.rowCtrlsByRowIndex;return Object.keys(renderedRows).map(function(key){return renderedRows[key].getRowNode()})},RowRenderer2.prototype.getRowByPosition=function(rowPosition){var rowCtrl,rowIndex=rowPosition.rowIndex;switch(rowPosition.rowPinned){case"top":rowCtrl=this.topRowCtrls[rowIndex];break;case"bottom":rowCtrl=this.bottomRowCtrls[rowIndex];break;default:(rowCtrl=this.rowCtrlsByRowIndex[rowIndex])||(rowCtrl=this.getStickyTopRowCtrls().find(function(ctrl){return ctrl.getRowNode().rowIndex===rowIndex})||null)}return rowCtrl},RowRenderer2.prototype.getRowNode=function(gridRow){switch(gridRow.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[gridRow.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[gridRow.rowIndex];default:return this.rowModel.getRow(gridRow.rowIndex)}},RowRenderer2.prototype.isRangeInRenderedViewport=function(startIndex,endIndex){if(null==startIndex||null==endIndex)return!1;var blockAfterViewport=startIndex>this.lastRenderedRow;return!(endIndex<this.firstRenderedRow)&&!blockAfterViewport},__decorate$13([Autowired("animationFrameService")],RowRenderer2.prototype,"animationFrameService",void 0),__decorate$13([Autowired("paginationProxy")],RowRenderer2.prototype,"paginationProxy",void 0),__decorate$13([Autowired("columnModel")],RowRenderer2.prototype,"columnModel",void 0),__decorate$13([Autowired("pinnedRowModel")],RowRenderer2.prototype,"pinnedRowModel",void 0),__decorate$13([Autowired("rowModel")],RowRenderer2.prototype,"rowModel",void 0),__decorate$13([Autowired("focusService")],RowRenderer2.prototype,"focusService",void 0),__decorate$13([Autowired("beans")],RowRenderer2.prototype,"beans",void 0),__decorate$13([Autowired("rowContainerHeightService")],RowRenderer2.prototype,"rowContainerHeightService",void 0),__decorate$13([Autowired("ctrlsService")],RowRenderer2.prototype,"ctrlsService",void 0),__decorate$13([PostConstruct],RowRenderer2.prototype,"postConstruct",null),RowRenderer2=__decorate$13([Bean("rowRenderer")],RowRenderer2)}(BeanStub),RowCtrlCache=function(){function RowCtrlCache2(maxCount){this.entriesMap={},this.entriesList=[],this.maxCount=maxCount}return __name(RowCtrlCache2,"RowCtrlCache"),RowCtrlCache2.prototype.addRow=function(rowCtrl){if(this.entriesMap[rowCtrl.getRowNode().id]=rowCtrl,this.entriesList.push(rowCtrl),rowCtrl.setCached(!0),this.entriesList.length>this.maxCount){var rowCtrlToDestroy=this.entriesList[0];rowCtrlToDestroy.destroyFirstPass(),rowCtrlToDestroy.destroySecondPass(),this.removeFromCache(rowCtrlToDestroy)}},RowCtrlCache2.prototype.getRow=function(rowNode){if(null==rowNode||null==rowNode.id)return null;var res=this.entriesMap[rowNode.id];return res?(this.removeFromCache(res),res.setCached(!1),res.getRowNode()!=rowNode?null:res):null},RowCtrlCache2.prototype.removeFromCache=function(rowCtrl){var rowNodeId=rowCtrl.getRowNode().id;delete this.entriesMap[rowNodeId],removeFromArray(this.entriesList,rowCtrl)},RowCtrlCache2.prototype.getEntries=function(){return this.entriesList},RowCtrlCache2}(),__extends$18=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$12=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ValueFormatterService=function(_super){function ValueFormatterService2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$18(ValueFormatterService2,_super),__name(ValueFormatterService2,"ValueFormatterService"),ValueFormatterService2.prototype.formatValue=function(column,node,value,suppliedFormatter,useFormatterFromColumn){void 0===useFormatterFromColumn&&(useFormatterFromColumn=!0);var formatter,result=null,colDef=column.getColDef();if(suppliedFormatter?formatter=suppliedFormatter:useFormatterFromColumn&&(formatter=colDef.valueFormatter),formatter){var params={value,node,data:node?node.data:null,colDef,column,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};result="function"==typeof formatter?formatter(params):this.expressionService.evaluate(formatter,params)}else if(colDef.refData)return colDef.refData[value]||"";return null==result&&Array.isArray(value)&&(result=value.join(", ")),result},__decorate$12([Autowired("expressionService")],ValueFormatterService2.prototype,"expressionService",void 0),ValueFormatterService2=__decorate$12([Bean("valueFormatterService")],ValueFormatterService2)}(BeanStub),__extends$17=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$11=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PinnedRowModel=function(_super){function PinnedRowModel2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$17(PinnedRowModel2,_super),__name(PinnedRowModel2,"PinnedRowModel"),PinnedRowModel2.prototype.init=function(){this.setPinnedTopRowData(this.gridOptionsService.get("pinnedTopRowData")),this.setPinnedBottomRowData(this.gridOptionsService.get("pinnedBottomRowData"))},PinnedRowModel2.prototype.isEmpty=function(floating){return missingOrEmpty("top"===floating?this.pinnedTopRows:this.pinnedBottomRows)},PinnedRowModel2.prototype.isRowsToRender=function(floating){return!this.isEmpty(floating)},PinnedRowModel2.prototype.getRowAtPixel=function(pixel,floating){var rows="top"===floating?this.pinnedTopRows:this.pinnedBottomRows;if(missingOrEmpty(rows))return 0;for(var i=0;i<rows.length;i++){var rowNode=rows[i];if(rowNode.rowTop+rowNode.rowHeight-1>=pixel)return i}return rows.length-1},PinnedRowModel2.prototype.setPinnedTopRowData=function(rowData){this.pinnedTopRows=this.createNodesFromData(rowData,!0);var event={type:Events.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(event)},PinnedRowModel2.prototype.setPinnedBottomRowData=function(rowData){this.pinnedBottomRows=this.createNodesFromData(rowData,!1);var event={type:Events.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(event)},PinnedRowModel2.prototype.createNodesFromData=function(allData,isTop){var _this=this,rowNodes=[];if(allData){var nextRowTop_1=0;allData.forEach(function(dataItem,index){var rowNode=new RowNode(_this.beans);rowNode.data=dataItem;var idPrefix=isTop?RowNode.ID_PREFIX_TOP_PINNED:RowNode.ID_PREFIX_BOTTOM_PINNED;rowNode.id=idPrefix+index,rowNode.rowPinned=isTop?"top":"bottom",rowNode.setRowTop(nextRowTop_1),rowNode.setRowHeight(_this.gridOptionsService.getRowHeightForNode(rowNode).height),rowNode.setRowIndex(index),nextRowTop_1+=rowNode.rowHeight,rowNodes.push(rowNode)})}return rowNodes},PinnedRowModel2.prototype.getPinnedTopRowData=function(){return this.pinnedTopRows},PinnedRowModel2.prototype.getPinnedBottomRowData=function(){return this.pinnedBottomRows},PinnedRowModel2.prototype.getPinnedTopTotalHeight=function(){return this.getTotalHeight(this.pinnedTopRows)},PinnedRowModel2.prototype.getPinnedTopRowCount=function(){return this.pinnedTopRows?this.pinnedTopRows.length:0},PinnedRowModel2.prototype.getPinnedBottomRowCount=function(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0},PinnedRowModel2.prototype.getPinnedTopRow=function(index){return this.pinnedTopRows[index]},PinnedRowModel2.prototype.getPinnedBottomRow=function(index){return this.pinnedBottomRows[index]},PinnedRowModel2.prototype.forEachPinnedTopRow=function(callback){missingOrEmpty(this.pinnedTopRows)||this.pinnedTopRows.forEach(callback)},PinnedRowModel2.prototype.forEachPinnedBottomRow=function(callback){missingOrEmpty(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(callback)},PinnedRowModel2.prototype.getPinnedBottomTotalHeight=function(){return this.getTotalHeight(this.pinnedBottomRows)},PinnedRowModel2.prototype.getTotalHeight=function(rowNodes){if(!rowNodes||0===rowNodes.length)return 0;var lastNode=last(rowNodes);return lastNode.rowTop+lastNode.rowHeight},__decorate$11([Autowired("beans")],PinnedRowModel2.prototype,"beans",void 0),__decorate$11([PostConstruct],PinnedRowModel2.prototype,"init",null),PinnedRowModel2=__decorate$11([Bean("pinnedRowModel")],PinnedRowModel2)}(BeanStub);(ServerSideTransactionResultStatus2=ServerSideTransactionResultStatus||(ServerSideTransactionResultStatus={})).Applied="Applied",ServerSideTransactionResultStatus2.StoreNotFound="StoreNotFound",ServerSideTransactionResultStatus2.StoreLoading="StoreLoading",ServerSideTransactionResultStatus2.StoreWaitingToLoad="StoreWaitingToLoad",ServerSideTransactionResultStatus2.StoreLoadingFailed="StoreLoadingFailed",ServerSideTransactionResultStatus2.StoreWrongType="StoreWrongType",ServerSideTransactionResultStatus2.Cancelled="Cancelled";var TabGuardClassNames,TabGuardClassNames2,ChangedPath=function(){function ChangedPath2(keepingColumns,rootNode){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=keepingColumns,this.pathRoot={rowNode:rootNode,children:null},this.mapToItems[rootNode.id]=this.pathRoot}return __name(ChangedPath2,"ChangedPath"),ChangedPath2.prototype.setInactive=function(){this.active=!1},ChangedPath2.prototype.isActive=function(){return this.active},ChangedPath2.prototype.depthFirstSearchChangedPath=function(pathItem,callback){if(pathItem.children)for(var i=0;i<pathItem.children.length;i++)this.depthFirstSearchChangedPath(pathItem.children[i],callback);callback(pathItem.rowNode)},ChangedPath2.prototype.depthFirstSearchEverything=function(rowNode,callback,traverseEverything){if(rowNode.childrenAfterGroup)for(var i=0;i<rowNode.childrenAfterGroup.length;i++){var childNode=rowNode.childrenAfterGroup[i];childNode.childrenAfterGroup?this.depthFirstSearchEverything(rowNode.childrenAfterGroup[i],callback,traverseEverything):traverseEverything&&callback(childNode)}callback(rowNode)},ChangedPath2.prototype.forEachChangedNodeDepthFirst=function(callback,traverseLeafNodes,includeUnchangedNodes){void 0===traverseLeafNodes&&(traverseLeafNodes=!1),void 0===includeUnchangedNodes&&(includeUnchangedNodes=!1),this.active&&!includeUnchangedNodes?this.depthFirstSearchChangedPath(this.pathRoot,callback):this.depthFirstSearchEverything(this.pathRoot.rowNode,callback,traverseLeafNodes)},ChangedPath2.prototype.executeFromRootNode=function(callback){callback(this.pathRoot.rowNode)},ChangedPath2.prototype.createPathItems=function(rowNode){for(var pointer=rowNode,newEntryCount=0;!this.mapToItems[pointer.id];){var newEntry={rowNode:pointer,children:null};this.mapToItems[pointer.id]=newEntry,newEntryCount++,pointer=pointer.parent}return newEntryCount},ChangedPath2.prototype.populateColumnsMap=function(rowNode,columns){var _this=this;if(this.keepingColumns&&columns)for(var pointer=rowNode;pointer;)this.nodeIdsToColumns[pointer.id]||(this.nodeIdsToColumns[pointer.id]={}),columns.forEach(function(col){return _this.nodeIdsToColumns[pointer.id][col.getId()]=!0}),pointer=pointer.parent},ChangedPath2.prototype.linkPathItems=function(rowNode,newEntryCount){for(var pointer=rowNode,i=0;i<newEntryCount;i++){var thisItem=this.mapToItems[pointer.id],parentItem=this.mapToItems[pointer.parent.id];parentItem.children||(parentItem.children=[]),parentItem.children.push(thisItem),pointer=pointer.parent}},ChangedPath2.prototype.addParentNode=function(rowNode,columns){if(rowNode&&!rowNode.isRowPinned()){var newEntryCount=this.createPathItems(rowNode);this.linkPathItems(rowNode,newEntryCount),this.populateColumnsMap(rowNode,columns)}},ChangedPath2.prototype.canSkip=function(rowNode){return this.active&&!this.mapToItems[rowNode.id]},ChangedPath2.prototype.getValueColumnsForNode=function(rowNode,valueColumns){if(!this.keepingColumns)return valueColumns;var colsForThisNode=this.nodeIdsToColumns[rowNode.id];return valueColumns.filter(function(col){return colsForThisNode[col.getId()]})},ChangedPath2.prototype.getNotValueColumnsForNode=function(rowNode,valueColumns){if(!this.keepingColumns)return null;var colsForThisNode=this.nodeIdsToColumns[rowNode.id];return valueColumns.filter(function(col){return!colsForThisNode[col.getId()]})},ChangedPath2}(),__extends$16=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),RowNodeBlock=function(_super){function RowNodeBlock2(id){var _this=_super.call(this)||this;return _this.state=RowNodeBlock2.STATE_WAITING_TO_LOAD,_this.version=0,_this.id=id,_this}return __extends$16(RowNodeBlock2,_super),__name(RowNodeBlock2,"RowNodeBlock"),RowNodeBlock2.prototype.getId=function(){return this.id},RowNodeBlock2.prototype.load=function(){this.state=RowNodeBlock2.STATE_LOADING,this.loadFromDatasource()},RowNodeBlock2.prototype.getVersion=function(){return this.version},RowNodeBlock2.prototype.setStateWaitingToLoad=function(){this.version++,this.state=RowNodeBlock2.STATE_WAITING_TO_LOAD},RowNodeBlock2.prototype.getState=function(){return this.state},RowNodeBlock2.prototype.pageLoadFailed=function(version){this.isRequestMostRecentAndLive(version)&&(this.state=RowNodeBlock2.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)},RowNodeBlock2.prototype.success=function(version,params){this.successCommon(version,params)},RowNodeBlock2.prototype.pageLoaded=function(version,rows,lastRow){this.successCommon(version,{rowData:rows,rowCount:lastRow})},RowNodeBlock2.prototype.isRequestMostRecentAndLive=function(version){var thisIsMostRecentRequest=version===this.version,weAreNotDestroyed=this.isAlive();return thisIsMostRecentRequest&&weAreNotDestroyed},RowNodeBlock2.prototype.successCommon=function(version,params){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(version)&&(this.state=RowNodeBlock2.STATE_LOADED,this.processServerResult(params))},RowNodeBlock2.prototype.dispatchLoadCompleted=function(success){void 0===success&&(success=!0);var event={type:RowNodeBlock2.EVENT_LOAD_COMPLETE,success,block:this};this.dispatchEvent(event)},RowNodeBlock2.EVENT_LOAD_COMPLETE="loadComplete",RowNodeBlock2.STATE_WAITING_TO_LOAD="needsLoading",RowNodeBlock2.STATE_LOADING="loading",RowNodeBlock2.STATE_LOADED="loaded",RowNodeBlock2.STATE_FAILED="failed",RowNodeBlock2}(BeanStub),__extends$15=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$10=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowNodeBlockLoader=function(_super){function RowNodeBlockLoader2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.activeBlockLoadsCount=0,_this.blocks=[],_this.active=!0,_this}var RowNodeBlockLoader_1,paramIndex,decorator;return __extends$15(RowNodeBlockLoader2,_super),__name(RowNodeBlockLoader2,"RowNodeBlockLoader"),RowNodeBlockLoader_1=RowNodeBlockLoader2,RowNodeBlockLoader2.prototype.postConstruct=function(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();var blockLoadDebounceMillis=this.gridOptionsService.getNum("blockLoadDebounceMillis");blockLoadDebounceMillis&&blockLoadDebounceMillis>0&&(this.checkBlockToLoadDebounce=_.debounce(this.performCheckBlocksToLoad.bind(this),blockLoadDebounceMillis))},RowNodeBlockLoader2.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("RowNodeBlockLoader")},RowNodeBlockLoader2.prototype.getMaxConcurrentDatasourceRequests=function(){var res=this.gridOptionsService.getNum("maxConcurrentDatasourceRequests");return null==res?2:res<=0?void 0:res},RowNodeBlockLoader2.prototype.addBlock=function(block){this.blocks.push(block),block.addEventListener(RowNodeBlock.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()},RowNodeBlockLoader2.prototype.removeBlock=function(block){_.removeFromArray(this.blocks,block)},RowNodeBlockLoader2.prototype.destroy=function(){_super.prototype.destroy.call(this),this.active=!1},RowNodeBlockLoader2.prototype.loadComplete=function(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:RowNodeBlockLoader_1.BLOCK_LOADED_EVENT}),0==this.activeBlockLoadsCount&&this.dispatchEvent({type:RowNodeBlockLoader_1.BLOCK_LOADER_FINISHED_EVENT})},RowNodeBlockLoader2.prototype.checkBlockToLoad=function(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()},RowNodeBlockLoader2.prototype.performCheckBlocksToLoad=function(){if(this.active){if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)return void this.logger.log("checkBlockToLoad: max loads exceeded");var loadAvailability=this.getAvailableLoadingCount(),blocksToLoad=this.blocks.filter(function(block){return block.getState()===RowNodeBlock.STATE_WAITING_TO_LOAD}).slice(0,loadAvailability);this.registerLoads(blocksToLoad.length),blocksToLoad.forEach(function(block){return block.load()}),this.printCacheStatus()}},RowNodeBlockLoader2.prototype.getBlockState=function(){if(this.gridOptionsService.isRowModelType("serverSide"))return this.rowModel.getBlockStates();var result={};return this.blocks.forEach(function(block){var _a=block.getBlockStateJson(),id=_a.id,state=_a.state;result[id]=state}),result},RowNodeBlockLoader2.prototype.printCacheStatus=function(){this.logger.isLogging()&&this.logger.log("printCacheStatus: activePageLoadsCount = "+this.activeBlockLoadsCount+", blocks = "+JSON.stringify(this.getBlockState()))},RowNodeBlockLoader2.prototype.isLoading=function(){return this.activeBlockLoadsCount>0},RowNodeBlockLoader2.prototype.registerLoads=function(count){this.activeBlockLoadsCount+=count},RowNodeBlockLoader2.prototype.getAvailableLoadingCount=function(){return void 0!==this.maxConcurrentRequests?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0},RowNodeBlockLoader2.BLOCK_LOADED_EVENT="blockLoaded",RowNodeBlockLoader2.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished",__decorate$10([Autowired("rowModel")],RowNodeBlockLoader2.prototype,"rowModel",void 0),__decorate$10([PostConstruct],RowNodeBlockLoader2.prototype,"postConstruct",null),__decorate$10([(paramIndex=0,decorator=Qualifier("loggerFactory"),function(target,key){decorator(target,key,paramIndex)})],RowNodeBlockLoader2.prototype,"setBeans",null),RowNodeBlockLoader2=RowNodeBlockLoader_1=__decorate$10([Bean("rowNodeBlockLoader")],RowNodeBlockLoader2)}(BeanStub),__extends$14=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$$=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PaginationProxy=function(_super){function PaginationProxy2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.currentPage=0,_this.topDisplayedRowIndex=0,_this.bottomDisplayedRowIndex=0,_this.pixelOffset=0,_this.masterRowCount=0,_this}return __extends$14(PaginationProxy2,_super),__name(PaginationProxy2,"PaginationProxy"),PaginationProxy2.prototype.postConstruct=function(){this.active=this.gridOptionsService.is("pagination"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationPageSizeChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPaginationPageSizeChanged.bind(this)),this.onModelUpdated()},PaginationProxy2.prototype.ensureRowHeightsValid=function(startPixel,endPixel,startLimitIndex,endLimitIndex){var res=this.rowModel.ensureRowHeightsValid(startPixel,endPixel,this.getPageFirstRow(),this.getPageLastRow());return res&&this.calculatePages(),res},PaginationProxy2.prototype.isPaginateChildRows=function(){return!!(this.gridOptionsService.is("groupRemoveSingleChildren")||this.gridOptionsService.is("groupRemoveLowestSingleChildren"))||this.gridOptionsService.is("paginateChildRows")},PaginationProxy2.prototype.onModelUpdated=function(modelUpdatedEvent){this.calculatePages();var paginationChangedEvent={type:Events.EVENT_PAGINATION_CHANGED,animate:!!modelUpdatedEvent&&modelUpdatedEvent.animate,newData:!!modelUpdatedEvent&&modelUpdatedEvent.newData,newPage:!!modelUpdatedEvent&&modelUpdatedEvent.newPage,keepRenderedRows:!!modelUpdatedEvent&&modelUpdatedEvent.keepRenderedRows};this.eventService.dispatchEvent(paginationChangedEvent)},PaginationProxy2.prototype.onPaginationPageSizeChanged=function(){this.active=this.gridOptionsService.is("pagination"),this.calculatePages();var paginationChangedEvent={type:Events.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,keepRenderedRows:!0};this.eventService.dispatchEvent(paginationChangedEvent)},PaginationProxy2.prototype.goToPage=function(page){if(this.active&&this.currentPage!==page&&"number"==typeof this.currentPage){this.currentPage=page;var event={type:Events.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0};this.onModelUpdated(event)}},PaginationProxy2.prototype.getPixelOffset=function(){return this.pixelOffset},PaginationProxy2.prototype.getRow=function(index){return this.rowModel.getRow(index)},PaginationProxy2.prototype.getRowNode=function(id){return this.rowModel.getRowNode(id)},PaginationProxy2.prototype.getRowIndexAtPixel=function(pixel){return this.rowModel.getRowIndexAtPixel(pixel)},PaginationProxy2.prototype.getCurrentPageHeight=function(){return missing(this.topRowBounds)||missing(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)},PaginationProxy2.prototype.getCurrentPagePixelRange=function(){return{pageFirstPixel:this.topRowBounds?this.topRowBounds.rowTop:0,pageLastPixel:this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0}},PaginationProxy2.prototype.isRowPresent=function(rowNode){return!!this.rowModel.isRowPresent(rowNode)&&(rowNode.rowIndex>=this.topDisplayedRowIndex&&rowNode.rowIndex<=this.bottomDisplayedRowIndex)},PaginationProxy2.prototype.isEmpty=function(){return this.rowModel.isEmpty()},PaginationProxy2.prototype.isRowsToRender=function(){return this.rowModel.isRowsToRender()},PaginationProxy2.prototype.getNodesInRangeForSelection=function(firstInRange,lastInRange){return this.rowModel.getNodesInRangeForSelection(firstInRange,lastInRange)},PaginationProxy2.prototype.forEachNode=function(callback){return this.rowModel.forEachNode(callback)},PaginationProxy2.prototype.forEachNodeOnPage=function(callback){for(var firstRow=this.getPageFirstRow(),lastRow=this.getPageLastRow(),i=firstRow;i<=lastRow;i++){var node=this.getRow(i);node&&callback(node)}},PaginationProxy2.prototype.getType=function(){return this.rowModel.getType()},PaginationProxy2.prototype.getRowBounds=function(index){var res=this.rowModel.getRowBounds(index);return res.rowIndex=index,res},PaginationProxy2.prototype.getPageFirstRow=function(){return this.topRowBounds?this.topRowBounds.rowIndex:-1},PaginationProxy2.prototype.getPageLastRow=function(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1},PaginationProxy2.prototype.getRowCount=function(){return this.rowModel.getRowCount()},PaginationProxy2.prototype.getPageForIndex=function(index){return Math.floor(index/this.pageSize)},PaginationProxy2.prototype.goToPageWithIndex=function(index){if(this.active){var pageNumber=this.getPageForIndex(index);this.goToPage(pageNumber)}},PaginationProxy2.prototype.isRowInPage=function(row){return!this.active||this.getPageForIndex(row.rowIndex)===this.currentPage},PaginationProxy2.prototype.isLastPageFound=function(){return this.rowModel.isLastRowIndexKnown()},PaginationProxy2.prototype.getCurrentPage=function(){return this.currentPage},PaginationProxy2.prototype.goToNextPage=function(){this.goToPage(this.currentPage+1)},PaginationProxy2.prototype.goToPreviousPage=function(){this.goToPage(this.currentPage-1)},PaginationProxy2.prototype.goToFirstPage=function(){this.goToPage(0)},PaginationProxy2.prototype.goToLastPage=function(){var rowCount=this.rowModel.getRowCount(),lastPage=Math.floor(rowCount/this.pageSize);this.goToPage(lastPage)},PaginationProxy2.prototype.getPageSize=function(){return this.pageSize},PaginationProxy2.prototype.getTotalPages=function(){return this.totalPages},PaginationProxy2.prototype.setPageSize=function(){this.pageSize=this.gridOptionsService.getNum("paginationPageSize"),(null==this.pageSize||this.pageSize<1)&&(this.pageSize=100)},PaginationProxy2.prototype.calculatePages=function(){this.active?(this.setPageSize(),this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly()):this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(exists(this.topRowBounds)?this.topRowBounds.rowTop:0)},PaginationProxy2.prototype.setPixelOffset=function(value){this.pixelOffset!==value&&(this.pixelOffset=value,this.eventService.dispatchEvent({type:Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))},PaginationProxy2.prototype.setZeroRows=function(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0},PaginationProxy2.prototype.adjustCurrentPageIfInvalid=function(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)},PaginationProxy2.prototype.calculatePagesMasterRowsOnly=function(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0)this.setZeroRows();else{var masterLastRowIndex=this.masterRowCount-1;this.totalPages=Math.floor(masterLastRowIndex/this.pageSize)+1,this.adjustCurrentPageIfInvalid();var masterPageStartIndex=this.pageSize*this.currentPage,masterPageEndIndex=this.pageSize*(this.currentPage+1)-1;if(masterPageEndIndex>masterLastRowIndex&&(masterPageEndIndex=masterLastRowIndex),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(masterPageStartIndex),masterPageEndIndex===masterLastRowIndex)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{var firstIndexNotToShow=this.rowModel.getTopLevelRowDisplayedIndex(masterPageEndIndex+1);this.bottomDisplayedRowIndex=firstIndexNotToShow-1}}},PaginationProxy2.prototype.getMasterRowCount=function(){return this.masterRowCount},PaginationProxy2.prototype.calculatePagesAllRows=function(){if(this.masterRowCount=this.rowModel.getRowCount(),0!==this.masterRowCount){var maxRowIndex=this.masterRowCount-1;this.totalPages=Math.floor(maxRowIndex/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>maxRowIndex&&(this.bottomDisplayedRowIndex=maxRowIndex)}else this.setZeroRows()},PaginationProxy2.prototype.calculatedPagesNotActive=function(){this.pageSize=this.rowModel.getRowCount(),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1},__decorate$$([Autowired("rowModel")],PaginationProxy2.prototype,"rowModel",void 0),__decorate$$([PostConstruct],PaginationProxy2.prototype,"postConstruct",null),PaginationProxy2=__decorate$$([Bean("paginationProxy")],PaginationProxy2)}(BeanStub),__extends$13=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$_=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},StylingService=function(_super){function StylingService2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$13(StylingService2,_super),__name(StylingService2,"StylingService"),StylingService2.prototype.processAllCellClasses=function(colDef,params,onApplicableClass,onNotApplicableClass){this.processClassRules(colDef.cellClassRules,params,onApplicableClass,onNotApplicableClass),this.processStaticCellClasses(colDef,params,onApplicableClass)},StylingService2.prototype.processClassRules=function(classRules,params,onApplicableClass,onNotApplicableClass){if(null!=classRules){for(var classNames=Object.keys(classRules),classesToApply={},classesToRemove={},_loop_1=__name(function(i2){var resultOfRule,className=classNames[i2],rule=classRules[className];"string"==typeof rule?resultOfRule=this_1.expressionService.evaluate(rule,params):"function"==typeof rule&&(resultOfRule=rule(params)),className.split(" ").forEach(function(singleClass){null==singleClass||""==singleClass.trim()||(resultOfRule?classesToApply[singleClass]=!0:classesToRemove[singleClass]=!0)})},"_loop_1"),this_1=this,i=0;i<classNames.length;i++)_loop_1(i);onNotApplicableClass&&Object.keys(classesToRemove).forEach(onNotApplicableClass),Object.keys(classesToApply).forEach(onApplicableClass)}},StylingService2.prototype.getStaticCellClasses=function(colDef,params){var classOrClasses,cellClass=colDef.cellClass;if(!cellClass)return[];"function"==typeof cellClass?classOrClasses=cellClass(params):classOrClasses=cellClass;return"string"==typeof classOrClasses&&(classOrClasses=[classOrClasses]),classOrClasses||[]},StylingService2.prototype.processStaticCellClasses=function(colDef,params,onApplicableClass){this.getStaticCellClasses(colDef,params).forEach(function(cssClassItem){onApplicableClass(cssClassItem)})},__decorate$_([Autowired("expressionService")],StylingService2.prototype,"expressionService",void 0),StylingService2=__decorate$_([Bean("stylingService")],StylingService2)}(BeanStub),__extends$12=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgRadioButton=function(_super){function AgRadioButton2(config){return _super.call(this,config,"ag-radio-button","radio")||this}return __extends$12(AgRadioButton2,_super),__name(AgRadioButton2,"AgRadioButton"),AgRadioButton2.prototype.isSelected=function(){return this.eInput.checked},AgRadioButton2.prototype.toggle=function(){this.eInput.disabled||this.isSelected()||this.setValue(!0)},AgRadioButton2.prototype.addInputListeners=function(){_super.prototype.addInputListeners.call(this),this.addManagedListener(this.eventService,Events.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))},AgRadioButton2.prototype.onChange=function(event){event.selected&&event.name&&this.eInput.name&&this.eInput.name===event.name&&event.id&&this.eInput.id!==event.id&&this.setValue(!1,!0)},AgRadioButton2}(AgCheckbox),__extends$11=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgToggleButton=function(_super){function AgToggleButton2(config){return _super.call(this,config,"ag-toggle-button")||this}return __extends$11(AgToggleButton2,_super),__name(AgToggleButton2,"AgToggleButton"),AgToggleButton2.prototype.setValue=function(value,silent){return _super.prototype.setValue.call(this,value,silent),this.addOrRemoveCssClass("ag-selected",this.getValue()),this},AgToggleButton2}(AgCheckbox),__extends$10=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgInputTextField=function(_super){function AgInputTextField2(config,className,inputType){return void 0===className&&(className="ag-text-field"),void 0===inputType&&(inputType="text"),_super.call(this,config,className,inputType)||this}return __extends$10(AgInputTextField2,_super),__name(AgInputTextField2,"AgInputTextField"),AgInputTextField2.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this),this.config.allowedCharPattern&&this.preventDisallowedCharacters()},AgInputTextField2.prototype.setValue=function(value,silent){var ret=_super.prototype.setValue.call(this,value,silent);return this.eInput.value!==value&&(this.eInput.value=exists(value)?value:""),ret},AgInputTextField2.prototype.preventDisallowedCharacters=function(){var pattern=new RegExp("["+this.config.allowedCharPattern+"]"),preventDisallowedCharacters=__name(function(event){event.key&&!pattern.test(event.key)&&event.preventDefault()},"preventDisallowedCharacters");this.addManagedListener(this.eInput,"keypress",preventDisallowedCharacters),this.addManagedListener(this.eInput,"paste",function(e){var _a,text=null===(_a=e.clipboardData)||void 0===_a?void 0:_a.getData("text");text&&text.split("").some(function(c){return!pattern.test(c)})&&e.preventDefault()})},AgInputTextField2}(AgAbstractInputField),__extends$$=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgInputTextArea=function(_super){function AgInputTextArea2(config){return _super.call(this,config,"ag-text-area",null,"textarea")||this}return __extends$$(AgInputTextArea2,_super),__name(AgInputTextArea2,"AgInputTextArea"),AgInputTextArea2.prototype.setValue=function(value,silent){var ret=_super.prototype.setValue.call(this,value,silent);return this.eInput.value=value,ret},AgInputTextArea2.prototype.setCols=function(cols){return this.eInput.cols=cols,this},AgInputTextArea2.prototype.setRows=function(rows){return this.eInput.rows=rows,this},AgInputTextArea2}(AgAbstractInputField),__extends$_=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgInputNumberField=function(_super){function AgInputNumberField2(config){return _super.call(this,config,"ag-number-field","number")||this}return __extends$_(AgInputNumberField2,_super),__name(AgInputNumberField2,"AgInputNumberField"),AgInputNumberField2.prototype.postConstruct=function(){var _this=this;_super.prototype.postConstruct.call(this),this.addManagedListener(this.eInput,"blur",function(){var floatedValue=parseFloat(_this.eInput.value),value=isNaN(floatedValue)?"":_this.normalizeValue(floatedValue.toString());_this.value!==value&&_this.setValue(value)}),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any"},AgInputNumberField2.prototype.onWheel=function(e){document.activeElement===this.eInput&&e.preventDefault()},AgInputNumberField2.prototype.normalizeValue=function(value){if(""===value)return"";this.precision&&(value=this.adjustPrecision(value));var val=parseFloat(value);return null!=this.min&&val<this.min?value=this.min.toString():null!=this.max&&val>this.max&&(value=this.max.toString()),value},AgInputNumberField2.prototype.adjustPrecision=function(value){if(this.precision){var floatString=parseFloat(value).toFixed(this.precision);value=parseFloat(floatString).toString()}return value},AgInputNumberField2.prototype.setMin=function(min){return this.min===min||(this.min=min,addOrRemoveAttribute(this.eInput,"min",min)),this},AgInputNumberField2.prototype.setMax=function(max){return this.max===max||(this.max=max,addOrRemoveAttribute(this.eInput,"max",max)),this},AgInputNumberField2.prototype.setPrecision=function(precision){return this.precision=precision,this},AgInputNumberField2.prototype.setStep=function(step){return this.step===step||(this.step=step,addOrRemoveAttribute(this.eInput,"step",step)),this},AgInputNumberField2.prototype.setValue=function(value,silent){return(value=this.adjustPrecision(value))!=this.normalizeValue(value)?this:_super.prototype.setValue.call(this,value,silent)},AgInputNumberField2}(AgInputTextField),__extends$Z=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgInputRange=function(_super){function AgInputRange2(config){return _super.call(this,config,"ag-range-field","range")||this}return __extends$Z(AgInputRange2,_super),__name(AgInputRange2,"AgInputRange"),AgInputRange2.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this);var _a=this.config,min=_a.min,max=_a.max,step=_a.step;null!=min&&this.setMinValue(min),null!=max&&this.setMaxValue(max),this.setStep(step||1)},AgInputRange2.prototype.addInputListeners=function(){var _this=this;this.addManagedListener(this.eInput,"input",function(e){var value=e.target.value;_this.setValue(value)})},AgInputRange2.prototype.setMinValue=function(value){return this.min=value,this.eInput.setAttribute("min",value.toString()),this},AgInputRange2.prototype.setMaxValue=function(value){return this.max=value,this.eInput.setAttribute("max",value.toString()),this},AgInputRange2.prototype.setStep=function(value){return this.eInput.setAttribute("step",value.toString()),this},AgInputRange2.prototype.setValue=function(value,silent){null!=this.min&&(value=Math.max(parseFloat(value),this.min).toString()),null!=this.max&&(value=Math.min(parseFloat(value),this.max).toString());var ret=_super.prototype.setValue.call(this,value,silent);return this.eInput.value=value,ret},AgInputRange2}(AgAbstractInputField),__extends$Y=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$Z=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgSlider=function(_super){function AgSlider2(config){var _this=_super.call(this,config,AgSlider2.TEMPLATE)||this;return _this.labelAlignment="top",_this}return __extends$Y(AgSlider2,_super),__name(AgSlider2,"AgSlider"),AgSlider2.prototype.init=function(){this.eSlider.addCssClass("ag-slider-field")},AgSlider2.prototype.onValueChange=function(callbackFn){var _this=this,eventChanged=AgAbstractField.EVENT_CHANGED;return this.addManagedListener(this.eText,eventChanged,function(){var textValue=parseFloat(_this.eText.getValue());_this.eSlider.setValue(textValue.toString(),!0),callbackFn(textValue||0)}),this.addManagedListener(this.eSlider,eventChanged,function(){var sliderValue=_this.eSlider.getValue();_this.eText.setValue(sliderValue,!0),callbackFn(parseFloat(sliderValue))}),this},AgSlider2.prototype.setSliderWidth=function(width){return this.eSlider.setWidth(width),this},AgSlider2.prototype.setTextFieldWidth=function(width){return this.eText.setWidth(width),this},AgSlider2.prototype.setMinValue=function(minValue){return this.eSlider.setMinValue(minValue),this.eText.setMin(minValue),this},AgSlider2.prototype.setMaxValue=function(maxValue){return this.eSlider.setMaxValue(maxValue),this.eText.setMax(maxValue),this},AgSlider2.prototype.getValue=function(){return this.eText.getValue()},AgSlider2.prototype.setValue=function(value){return this.getValue()===value||(this.eText.setValue(value,!0),this.eSlider.setValue(value,!0),this.dispatchEvent({type:AgAbstractField.EVENT_CHANGED})),this},AgSlider2.prototype.setStep=function(step){return this.eSlider.setStep(step),this.eText.setStep(step),this},AgSlider2.TEMPLATE='<div class="ag-slider">\n            <label ref="eLabel"></label>\n            <div class="ag-wrapper ag-slider-wrapper">\n                <ag-input-range ref="eSlider"></ag-input-range>\n                <ag-input-number-field ref="eText"></ag-input-number-field>\n            </div>\n        </div>',__decorate$Z([RefSelector("eLabel")],AgSlider2.prototype,"eLabel",void 0),__decorate$Z([RefSelector("eSlider")],AgSlider2.prototype,"eSlider",void 0),__decorate$Z([RefSelector("eText")],AgSlider2.prototype,"eText",void 0),__decorate$Z([PostConstruct],AgSlider2.prototype,"init",null),AgSlider2}(AgAbstractLabel),__extends$X=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$Y=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgGroupComponent=function(_super){function AgGroupComponent2(params){void 0===params&&(params={});var _this=_super.call(this,AgGroupComponent2.getTemplate(params))||this;_this.suppressEnabledCheckbox=!0,_this.suppressOpenCloseIcons=!1;var title=params.title,enabled=params.enabled,items=params.items,suppressEnabledCheckbox=params.suppressEnabledCheckbox,suppressOpenCloseIcons=params.suppressOpenCloseIcons;return _this.title=title,_this.cssIdentifier=params.cssIdentifier||"default",_this.enabled=enabled??!0,_this.items=items||[],_this.alignItems=params.alignItems||"center",null!=suppressEnabledCheckbox&&(_this.suppressEnabledCheckbox=suppressEnabledCheckbox),null!=suppressOpenCloseIcons&&(_this.suppressOpenCloseIcons=suppressOpenCloseIcons),_this}return __extends$X(AgGroupComponent2,_super),__name(AgGroupComponent2,"AgGroupComponent"),AgGroupComponent2.getTemplate=function(params){var cssIdentifier=params.cssIdentifier||"default";return'<div class="ag-group ag-'+cssIdentifier+'-group" role="presentation">\n            <div class="ag-group-title-bar ag-'+cssIdentifier+'-group-title-bar ag-unselectable" ref="eTitleBar" role="button">\n                <span class="ag-group-title-bar-icon ag-'+cssIdentifier+'-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>\n                <span class="ag-group-title-bar-icon ag-'+cssIdentifier+'-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>\n                <span ref="eTitle" class="ag-group-title ag-'+cssIdentifier+'-group-title"></span>\n            </div>\n            <div ref="eToolbar" class="ag-group-toolbar ag-'+cssIdentifier+'-group-toolbar">\n                <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>\n            </div>\n            <div ref="eContainer" class="ag-group-container ag-group-container-'+(params.direction||"vertical")+" ag-"+cssIdentifier+'-group-container"></div>\n        </div>'},AgGroupComponent2.prototype.postConstruct=function(){if(this.items.length){var initialItems=this.items;this.items=[],this.addItems(initialItems)}var localeTextFunc=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(localeTextFunc("enabled","Enabled")),this.title&&this.setTitle(this.title),this.enabled&&this.setEnabled(this.enabled),this.setAlignItems(this.alignItems),this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract(),this.refreshAriaStatus(),this.refreshChildDisplay()},AgGroupComponent2.prototype.setupExpandContract=function(){var _this=this;this.eGroupClosedIcon.appendChild(createIcon("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(createIcon("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.eTitleBar,"click",function(){return _this.toggleGroupExpand()}),this.addManagedListener(this.eTitleBar,"keydown",function(e){switch(e.key){case KeyCode.ENTER:case KeyCode.SPACE:e.preventDefault(),_this.toggleGroupExpand();break;case KeyCode.RIGHT:case KeyCode.LEFT:e.preventDefault(),_this.toggleGroupExpand(e.key===KeyCode.RIGHT)}})},AgGroupComponent2.prototype.refreshAriaStatus=function(){this.suppressOpenCloseIcons||setAriaExpanded(this.eTitleBar,this.expanded)},AgGroupComponent2.prototype.refreshChildDisplay=function(){var showIcon=!this.suppressOpenCloseIcons;setDisplayed(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),setDisplayed(this.eGroupOpenedIcon,showIcon&&this.expanded),setDisplayed(this.eGroupClosedIcon,showIcon&&!this.expanded)},AgGroupComponent2.prototype.isExpanded=function(){return this.expanded},AgGroupComponent2.prototype.setAlignItems=function(alignment){this.alignItems!==alignment&&this.removeCssClass("ag-group-item-alignment-"+this.alignItems),this.alignItems=alignment;var newCls="ag-group-item-alignment-"+this.alignItems;return this.addCssClass(newCls),this},AgGroupComponent2.prototype.toggleGroupExpand=function(expanded){return this.suppressOpenCloseIcons?(this.expanded=!0,this.refreshChildDisplay(),setDisplayed(this.eContainer,!0),this):(expanded=expanded??!this.expanded,this.expanded===expanded||(this.expanded=expanded,this.refreshAriaStatus(),this.refreshChildDisplay(),setDisplayed(this.eContainer,expanded),this.dispatchEvent({type:this.expanded?AgGroupComponent2.EVENT_EXPANDED:AgGroupComponent2.EVENT_COLLAPSED})),this)},AgGroupComponent2.prototype.addItems=function(items){var _this=this;items.forEach(function(item){return _this.addItem(item)})},AgGroupComponent2.prototype.addItem=function(item){var container=this.eContainer,el=item instanceof Component?item.getGui():item;el.classList.add("ag-group-item","ag-"+this.cssIdentifier+"-group-item"),container.appendChild(el),this.items.push(el)},AgGroupComponent2.prototype.hideItem=function(hide,index){setDisplayed(this.items[index],!hide)},AgGroupComponent2.prototype.setTitle=function(title){return this.eTitle.innerText=title,this},AgGroupComponent2.prototype.addCssClassToTitleBar=function(cssClass){this.eTitleBar.classList.add(cssClass)},AgGroupComponent2.prototype.setEnabled=function(enabled,skipToggle){return this.enabled=enabled,this.refreshDisabledStyles(),this.toggleGroupExpand(enabled),skipToggle||this.cbGroupEnabled.setValue(enabled),this},AgGroupComponent2.prototype.isEnabled=function(){return this.enabled},AgGroupComponent2.prototype.onEnableChange=function(callbackFn){var _this=this;return this.cbGroupEnabled.onValueChange(function(newSelection){_this.setEnabled(newSelection,!0),callbackFn(newSelection)}),this},AgGroupComponent2.prototype.hideEnabledCheckbox=function(hide){return this.suppressEnabledCheckbox=hide,this.refreshChildDisplay(),this.refreshDisabledStyles(),this},AgGroupComponent2.prototype.hideOpenCloseIcons=function(hide){return this.suppressOpenCloseIcons=hide,hide&&this.toggleGroupExpand(!0),this},AgGroupComponent2.prototype.refreshDisabledStyles=function(){this.addOrRemoveCssClass("ag-disabled",!this.enabled),this.suppressEnabledCheckbox&&!this.enabled?(this.eTitleBar.classList.add("ag-disabled-group-title-bar"),this.eTitleBar.removeAttribute("tabindex")):(this.eTitleBar.classList.remove("ag-disabled-group-title-bar"),this.eTitleBar.setAttribute("tabindex","0")),this.eContainer.classList.toggle("ag-disabled-group-container",!this.enabled)},AgGroupComponent2.EVENT_EXPANDED="expanded",AgGroupComponent2.EVENT_COLLAPSED="collapsed",__decorate$Y([RefSelector("eTitleBar")],AgGroupComponent2.prototype,"eTitleBar",void 0),__decorate$Y([RefSelector("eGroupOpenedIcon")],AgGroupComponent2.prototype,"eGroupOpenedIcon",void 0),__decorate$Y([RefSelector("eGroupClosedIcon")],AgGroupComponent2.prototype,"eGroupClosedIcon",void 0),__decorate$Y([RefSelector("eToolbar")],AgGroupComponent2.prototype,"eToolbar",void 0),__decorate$Y([RefSelector("cbGroupEnabled")],AgGroupComponent2.prototype,"cbGroupEnabled",void 0),__decorate$Y([RefSelector("eTitle")],AgGroupComponent2.prototype,"eTitle",void 0),__decorate$Y([RefSelector("eContainer")],AgGroupComponent2.prototype,"eContainer",void 0),__decorate$Y([PostConstruct],AgGroupComponent2.prototype,"postConstruct",null),AgGroupComponent2}(Component),__extends$W=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$X=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};(TabGuardClassNames2=TabGuardClassNames||(TabGuardClassNames={})).TAB_GUARD="ag-tab-guard",TabGuardClassNames2.TAB_GUARD_TOP="ag-tab-guard-top",TabGuardClassNames2.TAB_GUARD_BOTTOM="ag-tab-guard-bottom";var DIRECTION,DIRECTION2,TabGuardCtrl=function(_super){function TabGuardCtrl2(params){var _this=_super.call(this)||this;_this.skipTabGuardFocus=!1;var comp=params.comp,eTopGuard=params.eTopGuard,eBottomGuard=params.eBottomGuard,focusInnerElement=params.focusInnerElement,onFocusIn=params.onFocusIn,onFocusOut=params.onFocusOut,shouldStopEventPropagation=params.shouldStopEventPropagation,onTabKeyDown=params.onTabKeyDown,handleKeyDown=params.handleKeyDown,eFocusableElement=params.eFocusableElement;return _this.comp=comp,_this.eTopGuard=eTopGuard,_this.eBottomGuard=eBottomGuard,_this.providedFocusInnerElement=focusInnerElement,_this.eFocusableElement=eFocusableElement,_this.providedFocusIn=onFocusIn,_this.providedFocusOut=onFocusOut,_this.providedShouldStopEventPropagation=shouldStopEventPropagation,_this.providedOnTabKeyDown=onTabKeyDown,_this.providedHandleKeyDown=handleKeyDown,_this}return __extends$W(TabGuardCtrl2,_super),__name(TabGuardCtrl2,"TabGuardCtrl"),TabGuardCtrl2.prototype.postConstruct=function(){var _this=this;this.createManagedBean(new ManagedFocusFeature(this.eFocusableElement,{shouldStopEventPropagation:function(){return _this.shouldStopEventPropagation()},onTabKeyDown:function(e){return _this.onTabKeyDown(e)},handleKeyDown:function(e){return _this.handleKeyDown(e)},onFocusIn:function(e){return _this.onFocusIn(e)},onFocusOut:function(e){return _this.onFocusOut(e)}})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(function(guard){return _this.addManagedListener(guard,"focus",_this.onFocus.bind(_this))})},TabGuardCtrl2.prototype.handleKeyDown=function(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)},TabGuardCtrl2.prototype.tabGuardsAreActive=function(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")},TabGuardCtrl2.prototype.shouldStopEventPropagation=function(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()},TabGuardCtrl2.prototype.activateTabGuards=function(){this.comp.setTabIndex(this.getGridTabIndex())},TabGuardCtrl2.prototype.deactivateTabGuards=function(){this.comp.setTabIndex()},TabGuardCtrl2.prototype.onFocus=function(e){if(this.skipTabGuardFocus)this.skipTabGuardFocus=!1;else{var fromBottom=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(fromBottom):this.focusInnerElement(fromBottom)}},TabGuardCtrl2.prototype.onFocusIn=function(e){this.providedFocusIn&&this.providedFocusIn(e)||this.deactivateTabGuards()},TabGuardCtrl2.prototype.onFocusOut=function(e){this.providedFocusOut&&this.providedFocusOut(e)||this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards()},TabGuardCtrl2.prototype.onTabKeyDown=function(e){var _this=this;if(this.providedOnTabKeyDown)this.providedOnTabKeyDown(e);else if(!e.defaultPrevented){var tabGuardsAreActive=this.tabGuardsAreActive();tabGuardsAreActive&&this.deactivateTabGuards();var nextRoot=this.getNextFocusableElement(e.shiftKey);tabGuardsAreActive&&setTimeout(function(){return _this.activateTabGuards()},0),nextRoot&&(nextRoot.focus(),e.preventDefault())}},TabGuardCtrl2.prototype.getGridTabIndex=function(){return(this.gridOptionsService.getNum("tabIndex")||0).toString()},TabGuardCtrl2.prototype.focusInnerElement=function(fromBottom){void 0===fromBottom&&(fromBottom=!1);var focusable=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(focusable.splice(0,1),focusable.splice(focusable.length-1,1)),focusable.length&&focusable[fromBottom?focusable.length-1:0].focus()},TabGuardCtrl2.prototype.getNextFocusableElement=function(backwards){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,backwards)},TabGuardCtrl2.prototype.forceFocusOutOfContainer=function(up){void 0===up&&(up=!1);var tabGuardToFocus=up?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,tabGuardToFocus.focus()},__decorate$X([Autowired("focusService")],TabGuardCtrl2.prototype,"focusService",void 0),__decorate$X([PostConstruct],TabGuardCtrl2.prototype,"postConstruct",null),TabGuardCtrl2}(BeanStub),__extends$V=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__read$b=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},TabGuardComp=function(_super){function TabGuardComp2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$V(TabGuardComp2,_super),__name(TabGuardComp2,"TabGuardComp"),TabGuardComp2.prototype.initialiseTabGuard=function(params){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();var tabGuards=[this.eTopGuard,this.eBottomGuard],compProxy={setTabIndex:function(tabIndex){tabGuards.forEach(function(tabGuard){return null!=tabIndex?tabGuard.setAttribute("tabIndex",tabIndex):tabGuard.removeAttribute("tabIndex")})}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new TabGuardCtrl({comp:compProxy,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:params.onFocusIn,onFocusOut:params.onFocusOut,focusInnerElement:params.focusInnerElement,handleKeyDown:params.handleKeyDown,onTabKeyDown:params.onTabKeyDown,shouldStopEventPropagation:params.shouldStopEventPropagation}))},TabGuardComp2.prototype.createTabGuard=function(side){var tabGuard=document.createElement("div"),cls="top"===side?TabGuardClassNames.TAB_GUARD_TOP:TabGuardClassNames.TAB_GUARD_BOTTOM;return tabGuard.classList.add(TabGuardClassNames.TAB_GUARD,cls),setAriaRole(tabGuard,"presentation"),tabGuard},TabGuardComp2.prototype.addTabGuards=function(topTabGuard,bottomTabGuard){this.eFocusableElement.insertAdjacentElement("afterbegin",topTabGuard),this.eFocusableElement.insertAdjacentElement("beforeend",bottomTabGuard)},TabGuardComp2.prototype.removeAllChildrenExceptTabGuards=function(){var tabGuards=[this.eTopGuard,this.eBottomGuard];clearElement(this.getFocusableElement()),this.addTabGuards.apply(this,function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$b(arguments[i]));return ar}(tabGuards))},TabGuardComp2.prototype.forceFocusOutOfContainer=function(up){void 0===up&&(up=!1),this.tabGuardCtrl.forceFocusOutOfContainer(up)},TabGuardComp2.prototype.appendChild=function(newChild,container){isNodeOrElement(newChild)||(newChild=newChild.getGui());var bottomTabGuard=this.eBottomGuard;bottomTabGuard?bottomTabGuard.insertAdjacentElement("beforebegin",newChild):_super.prototype.appendChild.call(this,newChild,container)},TabGuardComp2}(Component),__extends$U=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$4=function(){return __assign$4=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$4.apply(this,arguments)},__decorate$W=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgMenuList=function(_super){function AgMenuList2(level){void 0===level&&(level=1);var _this=_super.call(this,'<div class="ag-menu-list" role="tree"></div>')||this;return _this.level=level,_this.menuItems=[],_this}return __extends$U(AgMenuList2,_super),__name(AgMenuList2,"AgMenuList"),AgMenuList2.prototype.postConstruct=function(){var _this=this;this.initialiseTabGuard({onTabKeyDown:function(e){return _this.onTabKeyDown(e)},handleKeyDown:function(e){return _this.handleKeyDown(e)}})},AgMenuList2.prototype.onTabKeyDown=function(e){var parent=this.getParentComponent(),parentGui=parent&&parent.getGui();parentGui&&parentGui.classList.contains("ag-focus-managed")||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)},AgMenuList2.prototype.handleKeyDown=function(e){switch(e.key){case KeyCode.UP:case KeyCode.RIGHT:case KeyCode.DOWN:case KeyCode.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case KeyCode.ESCAPE:var topMenu=this.findTopMenu();topMenu&&this.focusService.focusInto(topMenu.getGui())}},AgMenuList2.prototype.clearActiveItem=function(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)},AgMenuList2.prototype.addMenuItems=function(menuItems){var _this=this;null!=menuItems&&menuItems.forEach(function(menuItemOrString){"separator"===menuItemOrString?_this.addSeparator():"string"==typeof menuItemOrString?console.warn("AG Grid: unrecognised menu item "+menuItemOrString):_this.addItem(menuItemOrString)})},AgMenuList2.prototype.addItem=function(menuItemDef){var _this=this,menuItem=this.createManagedBean(new AgMenuItemComponent(__assign$4(__assign$4({},menuItemDef),{isAnotherSubMenuOpen:function(){return _this.menuItems.some(function(m){return m.isSubMenuOpen()})}})));menuItem.setParentComponent(this),setAriaLevel(menuItem.getGui(),this.level),this.menuItems.push(menuItem),this.appendChild(menuItem.getGui()),this.addManagedListener(menuItem,AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,function(event){_this.dispatchEvent(event)}),this.addManagedListener(menuItem,AgMenuItemComponent.EVENT_MENU_ITEM_ACTIVATED,function(event){_this.activeMenuItem&&_this.activeMenuItem!==event.menuItem&&_this.activeMenuItem.deactivate(),_this.activeMenuItem=event.menuItem})},AgMenuList2.prototype.activateFirstItem=function(){var item=this.menuItems.filter(function(currentItem){return!currentItem.isDisabled()})[0];item&&item.activate()},AgMenuList2.prototype.addSeparator=function(){this.appendChild(loadTemplate('\n            <div class="ag-menu-separator" aria-hidden="true">\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n            </div>'))},AgMenuList2.prototype.findTopMenu=function(){var parent=this.getParentComponent();if(!parent&&this instanceof AgMenuList2)return this;for(;;){var nextParent=parent&&parent.getParentComponent&&parent.getParentComponent();if(!nextParent||!(nextParent instanceof AgMenuList2||nextParent instanceof AgMenuItemComponent))break;parent=nextParent}return parent instanceof AgMenuList2?parent:void 0},AgMenuList2.prototype.handleNavKey=function(key){switch(key){case KeyCode.UP:case KeyCode.DOWN:var nextItem=this.findNextItem(key===KeyCode.UP);return void(nextItem&&nextItem!==this.activeMenuItem&&nextItem.activate())}key===(this.gridOptionsService.is("enableRtl")?KeyCode.RIGHT:KeyCode.LEFT)?this.closeIfIsChild():this.openChild()},AgMenuList2.prototype.closeIfIsChild=function(e){var parentItem=this.getParentComponent();parentItem&&parentItem instanceof AgMenuItemComponent&&(e&&e.preventDefault(),parentItem.closeSubMenu(),parentItem.getGui().focus())},AgMenuList2.prototype.openChild=function(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)},AgMenuList2.prototype.findNextItem=function(up){var items=this.menuItems.filter(function(item2){return!item2.isDisabled()});if(items.length){if(!this.activeMenuItem)return up?last(items):items[0];up&&items.reverse();for(var nextItem,foundCurrent=!1,i=0;i<items.length;i++){var item=items[i];if(foundCurrent){nextItem=item;break}item===this.activeMenuItem&&(foundCurrent=!0)}return nextItem||this.activeMenuItem}},AgMenuList2.prototype.destroy=function(){this.clearActiveItem(),_super.prototype.destroy.call(this)},__decorate$W([Autowired("focusService")],AgMenuList2.prototype,"focusService",void 0),__decorate$W([PostConstruct],AgMenuList2.prototype,"postConstruct",null),AgMenuList2}(TabGuardComp),__extends$T=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgMenuPanel=function(_super){function AgMenuPanel2(wrappedComponent){var _this=_super.call(this)||this;return _this.wrappedComponent=wrappedComponent,_this.setTemplateFromElement(wrappedComponent.getGui()),_this}return __extends$T(AgMenuPanel2,_super),__name(AgMenuPanel2,"AgMenuPanel"),AgMenuPanel2.prototype.postConstruct=function(){var _this=this;this.initialiseTabGuard({onTabKeyDown:function(e){return _this.onTabKeyDown(e)},handleKeyDown:function(e){return _this.handleKeyDown(e)}})},AgMenuPanel2.prototype.handleKeyDown=function(e){e.key===KeyCode.ESCAPE&&this.closePanel()},AgMenuPanel2.prototype.onTabKeyDown=function(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())},AgMenuPanel2.prototype.closePanel=function(){var menuItem=this.parentComponent;menuItem.closeSubMenu(),setTimeout(function(){return menuItem.getGui().focus()},0)},function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PostConstruct],AgMenuPanel2.prototype,"postConstruct",null),AgMenuPanel2}(TabGuardComp),__extends$S=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$U=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgMenuItemComponent=function(_super){function AgMenuItemComponent2(params){var _this=_super.call(this)||this;return _this.params=params,_this.isActive=!1,_this.subMenuIsOpen=!1,_this.setTemplate('<div class="'+_this.getClassName()+'" tabindex="-1" role="treeitem"></div>'),_this}return __extends$S(AgMenuItemComponent2,_super),__name(AgMenuItemComponent2,"AgMenuItemComponent"),AgMenuItemComponent2.prototype.init=function(){var _this=this;this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu(),this.addTooltip();var eGui=this.getGui();this.params.disabled?(this.addCssClass(this.getClassName("disabled")),setAriaDisabled(eGui,!0)):(this.addGuiEventListener("click",function(e){return _this.onItemSelected(e)}),this.addGuiEventListener("keydown",function(e){(e.key===KeyCode.ENTER||e.key===KeyCode.SPACE)&&(e.preventDefault(),_this.onItemSelected(e))}),this.addGuiEventListener("mousedown",function(e){e.stopPropagation(),e.preventDefault()}),this.addGuiEventListener("mouseenter",function(){return _this.onMouseEnter()}),this.addGuiEventListener("mouseleave",function(){return _this.onMouseLeave()})),this.params.cssClasses&&this.params.cssClasses.forEach(function(it){return _this.addCssClass(it)})},AgMenuItemComponent2.prototype.isDisabled=function(){return!!this.params.disabled},AgMenuItemComponent2.prototype.openSubMenu=function(activateFirstItem){var _this=this;if(void 0===activateFirstItem&&(activateFirstItem=!1),this.closeSubMenu(),this.params.subMenu){var destroySubMenu,ePopup=loadTemplate('<div class="ag-menu" role="presentation"></div>');if(this.params.subMenu instanceof Array){var currentLevel=getAriaLevel(this.getGui()),nextLevel=isNaN(currentLevel)?1:currentLevel+1,childMenu_1=this.createBean(new AgMenuList(nextLevel));childMenu_1.setParentComponent(this),childMenu_1.addMenuItems(this.params.subMenu),ePopup.appendChild(childMenu_1.getGui()),this.addManagedListener(childMenu_1,AgMenuItemComponent2.EVENT_MENU_ITEM_SELECTED,function(e){return _this.dispatchEvent(e)}),childMenu_1.addGuiEventListener("mouseenter",function(){return _this.cancelDeactivate()}),destroySubMenu=__name(function(){return _this.destroyBean(childMenu_1)},"destroySubMenu"),activateFirstItem&&setTimeout(function(){return childMenu_1.activateFirstItem()},0)}else{var subMenu_1=this.params.subMenu,menuPanel=this.createBean(new AgMenuPanel(subMenu_1));menuPanel.setParentComponent(this);var subMenuGui_1=menuPanel.getGui(),mouseEnterListener_1=__name(function(){return _this.cancelDeactivate()},"mouseEnterListener_1");subMenuGui_1.addEventListener("mouseenter",mouseEnterListener_1),destroySubMenu=__name(function(){return subMenuGui_1.removeEventListener("mouseenter",mouseEnterListener_1)},"destroySubMenu"),ePopup.appendChild(subMenuGui_1),subMenu_1.afterGuiAttached&&setTimeout(function(){return subMenu_1.afterGuiAttached()},0)}var eGui=this.getGui(),positionCallback=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:eGui,ePopup}),translate=this.localeService.getLocaleTextFunc(),addPopupRes=this.popupService.addPopup({modal:!0,eChild:ePopup,positionCallback,anchorToElement:eGui,ariaLabel:translate("ariaLabelSubMenu","SubMenu")});this.subMenuIsOpen=!0,setAriaExpanded(eGui,!0),this.hideSubMenu=function(){addPopupRes&&addPopupRes.hideFunc(),_this.subMenuIsOpen=!1,setAriaExpanded(eGui,!1),destroySubMenu()}}},AgMenuItemComponent2.prototype.closeSubMenu=function(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,setAriaExpanded(this.getGui(),!1))},AgMenuItemComponent2.prototype.isSubMenuOpen=function(){return this.subMenuIsOpen},AgMenuItemComponent2.prototype.activate=function(openSubMenu){var _this=this;this.cancelActivate(),!this.params.disabled&&(this.isActive=!0,this.addCssClass(this.getClassName("active")),this.getGui().focus(),openSubMenu&&this.params.subMenu&&window.setTimeout(function(){_this.isAlive()&&_this.isActive&&_this.openSubMenu()},300),this.onItemActivated())},AgMenuItemComponent2.prototype.deactivate=function(){this.cancelDeactivate(),this.removeCssClass(this.getClassName("active")),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()},AgMenuItemComponent2.prototype.addIcon=function(){if(this.params.checked||this.params.icon||!this.params.isCompact){var icon=loadTemplate('<span ref="eIcon" class="'+this.getClassName("part")+" "+this.getClassName("icon")+'" role="presentation"></span>');this.params.checked?icon.appendChild(createIconNoSpan("check",this.gridOptionsService)):this.params.icon&&(isNodeOrElement(this.params.icon)?icon.appendChild(this.params.icon):"string"==typeof this.params.icon?icon.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(icon)}},AgMenuItemComponent2.prototype.addName=function(){if(this.params.name||!this.params.isCompact){var name=loadTemplate('<span ref="eName" class="'+this.getClassName("part")+" "+this.getClassName("text")+'">'+(this.params.name||"")+"</span>");this.getGui().appendChild(name)}},AgMenuItemComponent2.prototype.addTooltip=function(){this.params.tooltip&&(this.tooltip=this.params.tooltip,this.gridOptionsService.is("enableBrowserTooltips")?this.getGui().setAttribute("title",this.tooltip):this.createManagedBean(new CustomTooltipFeature(this)))},AgMenuItemComponent2.prototype.getTooltipParams=function(){return{location:"menu",value:this.tooltip}},AgMenuItemComponent2.prototype.addShortcut=function(){if(this.params.shortcut||!this.params.isCompact){var shortcut=loadTemplate('<span ref="eShortcut" class="'+this.getClassName("part")+" "+this.getClassName("shortcut")+'">'+(this.params.shortcut||"")+"</span>");this.getGui().appendChild(shortcut)}},AgMenuItemComponent2.prototype.addSubMenu=function(){if(this.params.subMenu||!this.params.isCompact){var pointer=loadTemplate('<span ref="ePopupPointer" class="'+this.getClassName("part")+" "+this.getClassName("popup-pointer")+'"></span>'),eGui=this.getGui();if(this.params.subMenu){var iconName=this.gridOptionsService.is("enableRtl")?"smallLeft":"smallRight";setAriaExpanded(eGui,!1),pointer.appendChild(createIconNoSpan(iconName,this.gridOptionsService))}eGui.appendChild(pointer)}},AgMenuItemComponent2.prototype.onItemSelected=function(event){if(this.params.action?this.params.action():this.openSubMenu(event&&"keydown"===event.type),!this.params.subMenu||this.params.action){var e={type:AgMenuItemComponent2.EVENT_MENU_ITEM_SELECTED,action:this.params.action,checked:this.params.checked,cssClasses:this.params.cssClasses,disabled:this.params.disabled,icon:this.params.icon,name:this.params.name,shortcut:this.params.shortcut,subMenu:this.params.subMenu,tooltip:this.params.tooltip,event};this.dispatchEvent(e)}},AgMenuItemComponent2.prototype.onItemActivated=function(){var event={type:AgMenuItemComponent2.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(event)},AgMenuItemComponent2.prototype.cancelActivate=function(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)},AgMenuItemComponent2.prototype.cancelDeactivate=function(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)},AgMenuItemComponent2.prototype.onMouseEnter=function(){var _this=this;this.cancelDeactivate(),this.params.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(function(){return _this.activate(!0)},AgMenuItemComponent2.ACTIVATION_DELAY):this.activate(!0)},AgMenuItemComponent2.prototype.onMouseLeave=function(){var _this=this;this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(function(){return _this.deactivate()},AgMenuItemComponent2.ACTIVATION_DELAY):this.deactivate()},AgMenuItemComponent2.prototype.getClassName=function(suffix){var prefix=this.params.isCompact?"ag-compact-menu-option":"ag-menu-option";return suffix?prefix+"-"+suffix:prefix},AgMenuItemComponent2.EVENT_MENU_ITEM_SELECTED="menuItemSelected",AgMenuItemComponent2.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated",AgMenuItemComponent2.ACTIVATION_DELAY=80,__decorate$U([Autowired("popupService")],AgMenuItemComponent2.prototype,"popupService",void 0),__decorate$U([PostConstruct],AgMenuItemComponent2.prototype,"init",null),AgMenuItemComponent2}(Component),__extends$R=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$T=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgPanel=function(_super){function AgPanel2(config){var _this=_super.call(this,AgPanel2.getTemplate(config))||this;return _this.closable=!0,_this.config=config,_this}return __extends$R(AgPanel2,_super),__name(AgPanel2,"AgPanel"),AgPanel2.getTemplate=function(config){var cssIdentifier=config&&config.cssIdentifier||"default";return'<div class="ag-panel ag-'+cssIdentifier+'-panel" tabindex="-1">\n            <div ref="eTitleBar" class="ag-panel-title-bar ag-'+cssIdentifier+'-panel-title-bar ag-unselectable">\n                <span ref="eTitle" class="ag-panel-title-bar-title ag-'+cssIdentifier+'-panel-title-bar-title"></span>\n                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-'+cssIdentifier+'-panel-title-bar-buttons"></div>\n            </div>\n            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-'+cssIdentifier+'-panel-content-wrapper"></div>\n        </div>'},AgPanel2.prototype.postConstruct=function(){var _this=this,_a=this.config,component=_a.component,closable=_a.closable,hideTitleBar=_a.hideTitleBar,title=_a.title,_b=_a.minWidth,minWidth=void 0===_b?250:_b,width=_a.width,_c=_a.minHeight,minHeight=void 0===_c?250:_c,height=_a.height,centered=_a.centered,popup=_a.popup,x=_a.x,y=_a.y;this.positionableFeature=new PositionableFeature(this.getGui(),{minWidth,width,minHeight,height,centered,x,y,popup,calculateTopBuffer:function(){return _this.positionableFeature.getHeight()-_this.getBodyHeight()}}),this.createManagedBean(this.positionableFeature);var eGui=this.getGui();component&&this.setBodyComponent(component),hideTitleBar?setDisplayed(this.eTitleBar,!1):(title&&this.setTitle(title),this.setClosable(closable??this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",function(e){var eDocument=_this.gridOptionsService.getDocument();if(eGui.contains(e.relatedTarget)||eGui.contains(eDocument.activeElement)||_this.eTitleBarButtons.contains(e.target))e.preventDefault();else{var focusEl=_this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");focusEl&&focusEl.focus()}}),(!popup||!this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")},AgPanel2.prototype.renderComponent=function(){var _this=this,eGui=this.getGui();eGui.focus(),this.close=function(){eGui.parentElement.removeChild(eGui),_this.destroy()}},AgPanel2.prototype.getHeight=function(){return this.positionableFeature.getHeight()},AgPanel2.prototype.setHeight=function(height){this.positionableFeature.setHeight(height)},AgPanel2.prototype.getWidth=function(){return this.positionableFeature.getWidth()},AgPanel2.prototype.setWidth=function(width){this.positionableFeature.setWidth(width)},AgPanel2.prototype.setClosable=function(closable){if(closable!==this.closable&&(this.closable=closable),closable){var closeButtonComp=this.closeButtonComp=new Component(AgPanel2.CLOSE_BTN_TEMPLATE);this.getContext().createBean(closeButtonComp);var eGui=closeButtonComp.getGui(),child=createIconNoSpan("close",this.gridOptionsService);child.classList.add("ag-panel-title-bar-button-icon"),eGui.appendChild(child),this.addTitleBarButton(closeButtonComp),closeButtonComp.addManagedListener(eGui,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){(eGui=this.closeButtonComp.getGui()).parentElement.removeChild(eGui),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}},AgPanel2.prototype.setBodyComponent=function(bodyComponent){bodyComponent.setParentComponent(this),this.eContentWrapper.appendChild(bodyComponent.getGui())},AgPanel2.prototype.addTitleBarButton=function(button,position){var eTitleBarButtons=this.eTitleBarButtons,buttons=eTitleBarButtons.children,len=buttons.length;null==position&&(position=len),position=Math.max(0,Math.min(position,len)),button.addCssClass("ag-panel-title-bar-button");var eGui=button.getGui();0===position?eTitleBarButtons.insertAdjacentElement("afterbegin",eGui):position===len?eTitleBarButtons.insertAdjacentElement("beforeend",eGui):buttons[position-1].insertAdjacentElement("afterend",eGui),button.setParentComponent(this)},AgPanel2.prototype.getBodyHeight=function(){return getInnerHeight(this.eContentWrapper)},AgPanel2.prototype.getBodyWidth=function(){return getInnerWidth(this.eContentWrapper)},AgPanel2.prototype.setTitle=function(title){this.eTitle.innerText=title},AgPanel2.prototype.onBtClose=function(){this.close()},AgPanel2.prototype.destroy=function(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));var eGui=this.getGui();eGui&&eGui.offsetParent&&this.close(),_super.prototype.destroy.call(this)},AgPanel2.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>',__decorate$T([RefSelector("eContentWrapper")],AgPanel2.prototype,"eContentWrapper",void 0),__decorate$T([RefSelector("eTitleBar")],AgPanel2.prototype,"eTitleBar",void 0),__decorate$T([RefSelector("eTitleBarButtons")],AgPanel2.prototype,"eTitleBarButtons",void 0),__decorate$T([RefSelector("eTitle")],AgPanel2.prototype,"eTitle",void 0),__decorate$T([PostConstruct],AgPanel2.prototype,"postConstruct",null),AgPanel2}(Component),__extends$Q=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$3=function(){return __assign$3=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$3.apply(this,arguments)},AgDialog=function(_super){function AgDialog2(config){var _this=_super.call(this,__assign$3(__assign$3({},config),{popup:!0}))||this;return _this.isMaximizable=!1,_this.isMaximized=!1,_this.maximizeListeners=[],_this.resizeListenerDestroy=null,_this.lastPosition={x:0,y:0,width:0,height:0},_this}return __extends$Q(AgDialog2,_super),__name(AgDialog2,"AgDialog"),AgDialog2.prototype.postConstruct=function(){var _this=this,eGui=this.getGui(),_a=this.config,movable=_a.movable,resizable=_a.resizable,maximizable=_a.maximizable;this.addCssClass("ag-dialog"),_super.prototype.postConstruct.call(this),this.addManagedListener(eGui,"focusin",function(e){eGui.contains(e.relatedTarget)||_this.popupService.bringPopupToFront(eGui)}),movable&&this.setMovable(movable),maximizable&&this.setMaximizable(maximizable),resizable&&this.setResizable(resizable)},AgDialog2.prototype.renderComponent=function(){var eGui=this.getGui(),_a=this.config,alwaysOnTop=_a.alwaysOnTop,modal=_a.modal,title=_a.title,translate=this.localeService.getLocaleTextFunc(),addPopupRes=this.popupService.addPopup({modal,eChild:eGui,closeOnEsc:!0,closedCallback:this.destroy.bind(this),alwaysOnTop,ariaLabel:title||translate("ariaLabelDialog","Dialog")});addPopupRes&&(this.close=addPopupRes.hideFunc)},AgDialog2.prototype.toggleMaximize=function(){var position=this.positionableFeature.getPosition();if(this.isMaximized){var _a=this.lastPosition,x=_a.x,y=_a.y,width=_a.width,height=_a.height;this.setWidth(width),this.setHeight(height),this.positionableFeature.offsetElement(x,y)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=position.x,this.lastPosition.y=position.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()},AgDialog2.prototype.refreshMaximizeIcon=function(){setDisplayed(this.maximizeIcon,!this.isMaximized),setDisplayed(this.minimizeIcon,this.isMaximized)},AgDialog2.prototype.clearMaximizebleListeners=function(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(function(destroyListener){return destroyListener()}),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)},AgDialog2.prototype.destroy=function(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),_super.prototype.destroy.call(this)},AgDialog2.prototype.setResizable=function(resizable){this.positionableFeature.setResizable(resizable)},AgDialog2.prototype.setMovable=function(movable){this.positionableFeature.setMovable(movable,this.eTitleBar)},AgDialog2.prototype.setMaximizable=function(maximizable){var _this=this;if(!maximizable)return this.clearMaximizebleListeners(),void(this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0));var eTitleBar=this.eTitleBar;if(eTitleBar&&maximizable!==this.isMaximizable){var maximizeButtonComp=this.maximizeButtonComp=this.createBean(new Component('<div class="ag-dialog-button"></span>')),eGui=maximizeButtonComp.getGui();eGui.appendChild(this.maximizeIcon=createIconNoSpan("maximize",this.gridOptionsService)),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),eGui.appendChild(this.minimizeIcon=createIconNoSpan("minimize",this.gridOptionsService)),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),setDisplayed(this.minimizeIcon,!1),maximizeButtonComp.addManagedListener(eGui,"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(maximizeButtonComp,0),this.maximizeListeners.push(this.addManagedListener(eTitleBar,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",function(){_this.isMaximized=!1,_this.refreshMaximizeIcon()})}},function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([Autowired("popupService")],AgDialog2.prototype,"popupService",void 0),AgDialog2}(AgPanel),__extends$P=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$2=function(){return __assign$2=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$2.apply(this,arguments)},__decorate$R=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$a=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},FocusService=function(_super){function FocusService2(){return null!==_super&&_super.apply(this,arguments)||this}var FocusService_1;return __extends$P(FocusService2,_super),__name(FocusService2,"FocusService"),FocusService_1=FocusService2,FocusService2.addKeyboardModeEvents=function(doc,controller){var docControllers=FocusService_1.instancesMonitored.get(doc);docControllers&&docControllers.length>0?-1===docControllers.indexOf(controller)&&docControllers.push(controller):(FocusService_1.instancesMonitored.set(doc,[controller]),doc.addEventListener("keydown",FocusService_1.toggleKeyboardMode),doc.addEventListener("mousedown",FocusService_1.toggleKeyboardMode))},FocusService2.removeKeyboardModeEvents=function(doc,controller){var docControllers=FocusService_1.instancesMonitored.get(doc),newControllers=[];docControllers&&docControllers.length&&(newControllers=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$a(arguments[i]));return ar}(docControllers).filter(function(currentGridCore){return currentGridCore!==controller}),FocusService_1.instancesMonitored.set(doc,newControllers)),0===newControllers.length&&(doc.removeEventListener("keydown",FocusService_1.toggleKeyboardMode),doc.removeEventListener("mousedown",FocusService_1.toggleKeyboardMode))},FocusService2.toggleKeyboardMode=function(event){var isKeyboardActive=FocusService_1.keyboardModeActive,isKeyboardEvent="keydown"===event.type;if(!(isKeyboardEvent&&(event.ctrlKey||event.metaKey||event.altKey)||isKeyboardActive&&isKeyboardEvent||!isKeyboardActive&&!isKeyboardEvent)){FocusService_1.keyboardModeActive=isKeyboardEvent;var doc=event.target.ownerDocument;if(doc){var controllersForDoc=FocusService_1.instancesMonitored.get(doc);controllersForDoc&&controllersForDoc.forEach(function(controller){controller.dispatchEvent({type:isKeyboardEvent?Events.EVENT_KEYBOARD_FOCUS:Events.EVENT_MOUSE_FOCUS})})}}},FocusService2.prototype.init=function(){var _this=this,clearFocusedCellListener=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,clearFocusedCellListener),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_GROUP_OPENED,clearFocusedCellListener),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,clearFocusedCellListener),this.ctrlsService.whenReady(function(p){_this.gridCtrl=p.gridCtrl;var doc=_this.gridOptionsService.getDocument();FocusService_1.addKeyboardModeEvents(doc,_this.gridCtrl),_this.addDestroyFunc(function(){return _this.unregisterGridCompController(_this.gridCtrl)})})},FocusService2.prototype.unregisterGridCompController=function(gridCompController){var doc=this.gridOptionsService.getDocument();FocusService_1.removeKeyboardModeEvents(doc,gridCompController)},FocusService2.prototype.onColumnEverythingChanged=function(){if(this.focusedCellPosition){var col=this.focusedCellPosition.column,colFromColumnModel=this.columnModel.getGridColumn(col.getId());col!==colFromColumnModel&&this.clearFocusedCell()}},FocusService2.prototype.isKeyboardMode=function(){return FocusService_1.keyboardModeActive},FocusService2.prototype.getFocusCellToUseAfterRefresh=function(){var eDocument=this.gridOptionsService.getDocument();return this.gridOptionsService.is("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(eDocument.activeElement,RowCtrl.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition},FocusService2.prototype.getFocusHeaderToUseAfterRefresh=function(){var eDocument=this.gridOptionsService.getDocument();return this.gridOptionsService.is("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(eDocument.activeElement,AbstractHeaderCellCtrl.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition},FocusService2.prototype.isDomDataMissingInHierarchy=function(eBrowserCell,key){for(var ePointer=eBrowserCell;ePointer;){if(this.gridOptionsService.getDomData(ePointer,key))return!1;ePointer=ePointer.parentNode}return!0},FocusService2.prototype.getFocusedCell=function(){return this.focusedCellPosition},FocusService2.prototype.getFocusEventParams=function(){var _a=this.focusedCellPosition,rowIndex=_a.rowIndex,rowPinned=_a.rowPinned,params={rowIndex,rowPinned,column:_a.column,isFullWidthCell:!1},rowCtrl=this.rowRenderer.getRowByPosition({rowIndex,rowPinned});return rowCtrl&&(params.isFullWidthCell=rowCtrl.isFullWidth()),params},FocusService2.prototype.clearFocusedCell=function(){if(null!=this.focusedCellPosition){var event=__assign$2({type:Events.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(event)}},FocusService2.prototype.setFocusedCell=function(params){var column=params.column,rowIndex=params.rowIndex,rowPinned=params.rowPinned,_a=params.forceBrowserFocus,forceBrowserFocus=void 0!==_a&&_a,_b=params.preventScrollOnBrowserFocus,preventScrollOnBrowserFocus=void 0!==_b&&_b,gridColumn=this.columnModel.getGridColumn(column);if(gridColumn){this.focusedCellPosition=gridColumn?{rowIndex,rowPinned:makeNull(rowPinned),column:gridColumn}:null;var event=__assign$2(__assign$2({type:Events.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus,preventScrollOnBrowserFocus,floating:null});this.eventService.dispatchEvent(event)}else this.focusedCellPosition=null},FocusService2.prototype.isCellFocused=function(cellPosition){return null!=this.focusedCellPosition&&(this.focusedCellPosition.column===cellPosition.column&&this.isRowFocused(cellPosition.rowIndex,cellPosition.rowPinned))},FocusService2.prototype.isRowNodeFocused=function(rowNode){return this.isRowFocused(rowNode.rowIndex,rowNode.rowPinned)},FocusService2.prototype.isHeaderWrapperFocused=function(headerCtrl){if(null==this.focusedHeaderPosition)return!1;var column=headerCtrl.getColumnGroupChild(),headerRowIndex=headerCtrl.getRowIndex(),pinned=headerCtrl.getPinned(),_a=this.focusedHeaderPosition,focusedColumn=_a.column,focusedHeaderRowIndex=_a.headerRowIndex;return column===focusedColumn&&headerRowIndex===focusedHeaderRowIndex&&pinned==focusedColumn.getPinned()},FocusService2.prototype.clearFocusedHeader=function(){this.focusedHeaderPosition=null},FocusService2.prototype.getFocusedHeader=function(){return this.focusedHeaderPosition},FocusService2.prototype.setFocusedHeader=function(headerRowIndex,column){this.focusedHeaderPosition={headerRowIndex,column}},FocusService2.prototype.focusHeaderPosition=function(params){var direction=params.direction,fromTab=params.fromTab,allowUserOverride=params.allowUserOverride,event=params.event,headerPosition=params.headerPosition;if(allowUserOverride){var userFunc,currentPosition=this.getFocusedHeader(),headerRowCount=this.headerNavigationService.getHeaderRowCount();if(fromTab){if(userFunc=this.gridOptionsService.getCallback("tabToNextHeader"))headerPosition=userFunc({backwards:"Before"===direction,previousHeaderPosition:currentPosition,nextHeaderPosition:headerPosition,headerRowCount})}else if((userFunc=this.gridOptionsService.getCallback("navigateToNextHeader"))&&event)headerPosition=userFunc({key:event.key,previousHeaderPosition:currentPosition,nextHeaderPosition:headerPosition,headerRowCount,event})}return!!headerPosition&&(-1===headerPosition.headerRowIndex?this.focusGridView(headerPosition.column):(this.headerNavigationService.scrollToColumn(headerPosition.column,direction),this.ctrlsService.getHeaderRowContainerCtrl(headerPosition.column.getPinned()).focusHeader(headerPosition.headerRowIndex,headerPosition.column,event)))},FocusService2.prototype.focusFirstHeader=function(){var firstColumn=this.columnModel.getAllDisplayedColumns()[0];return!!firstColumn&&(firstColumn.getParent()&&(firstColumn=this.columnModel.getColumnGroupAtLevel(firstColumn,0)),this.focusHeaderPosition({headerPosition:{headerRowIndex:0,column:firstColumn}}))},FocusService2.prototype.focusLastHeader=function(event){var headerRowIndex=this.headerNavigationService.getHeaderRowCount()-1,column=last(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex,column},event})},FocusService2.prototype.isAnyCellFocused=function(){return!!this.focusedCellPosition},FocusService2.prototype.isRowFocused=function(rowIndex,floating){return null!=this.focusedCellPosition&&(this.focusedCellPosition.rowIndex===rowIndex&&this.focusedCellPosition.rowPinned===makeNull(floating))},FocusService2.prototype.findFocusableElements=function(rootNode,exclude,onlyUnmanaged){void 0===onlyUnmanaged&&(onlyUnmanaged=!1);var excludeString=FOCUSABLE_EXCLUDE;exclude&&(excludeString+=", "+exclude),onlyUnmanaged&&(excludeString+=', [tabindex="-1"]');var nodes=Array.prototype.slice.apply(rootNode.querySelectorAll("[tabindex], input, select, button, textarea, [href]")),excludeNodes=Array.prototype.slice.apply(rootNode.querySelectorAll(excludeString));return excludeNodes.length?__name(function(a,b){return a.filter(function(element){return-1===b.indexOf(element)})},"diff")(nodes,excludeNodes):nodes},FocusService2.prototype.focusInto=function(rootNode,up,onlyUnmanaged){void 0===up&&(up=!1),void 0===onlyUnmanaged&&(onlyUnmanaged=!1);var focusableElements=this.findFocusableElements(rootNode,null,onlyUnmanaged),toFocus=up?last(focusableElements):focusableElements[0];return!!toFocus&&(toFocus.focus(),!0)},FocusService2.prototype.findFocusableElementBeforeTabGuard=function(rootNode,referenceElement){if(!referenceElement)return null;var focusableElements=this.findFocusableElements(rootNode),referenceIndex=focusableElements.indexOf(referenceElement);if(-1===referenceIndex)return null;for(var lastTabGuardIndex=-1,i=referenceIndex-1;i>=0;i--)if(focusableElements[i].classList.contains(TabGuardClassNames.TAB_GUARD_TOP)){lastTabGuardIndex=i;break}return lastTabGuardIndex<=0?null:focusableElements[lastTabGuardIndex-1]},FocusService2.prototype.findNextFocusableElement=function(rootNode,onlyManaged,backwards){void 0===rootNode&&(rootNode=this.eGridDiv);var focusable=this.findFocusableElements(rootNode,onlyManaged?':not([tabindex="-1"])':null),activeEl=this.gridOptionsService.getDocument().activeElement,nextIndex=(onlyManaged?focusable.findIndex(function(el){return el.contains(activeEl)}):focusable.indexOf(activeEl))+(backwards?-1:1);return nextIndex<0||nextIndex>=focusable.length?null:focusable[nextIndex]},FocusService2.prototype.isTargetUnderManagedComponent=function(rootNode,target){if(!target)return!1;var managedContainers=rootNode.querySelectorAll("."+ManagedFocusFeature.FOCUS_MANAGED_CLASS);if(!managedContainers.length)return!1;for(var i=0;i<managedContainers.length;i++)if(managedContainers[i].contains(target))return!0;return!1},FocusService2.prototype.findTabbableParent=function(node,limit){void 0===limit&&(limit=5);for(var counter=0;node&&null===getTabIndex(node)&&++counter<=limit;)node=node.parentElement;return null===getTabIndex(node)?null:node},FocusService2.prototype.focusGridView=function(column,backwards){if(this.gridOptionsService.is("suppressCellFocus"))return backwards?this.focusLastHeader():this.focusNextGridCoreContainer(!1);var nextRow=backwards?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!nextRow)return!1;var rowIndex=nextRow.rowIndex,rowPinned=nextRow.rowPinned,focusedHeader=this.getFocusedHeader();if(!column&&focusedHeader&&(column=focusedHeader.column),null==rowIndex||!column)return!1;if(this.navigationService.ensureCellVisible({rowIndex,column,rowPinned}),this.setFocusedCell({rowIndex,column,rowPinned:makeNull(rowPinned),forceBrowserFocus:!0}),this.rangeService){var cellPosition={rowIndex,rowPinned,column};this.rangeService.setRangeToCell(cellPosition)}return!0},FocusService2.prototype.focusNextGridCoreContainer=function(backwards){return!!this.gridCtrl.focusNextInnerContainer(backwards)||(!backwards&&!this.gridCtrl.isDetailGrid()&&this.gridCtrl.forceFocusOutOfContainer(),!1)},FocusService2.AG_KEYBOARD_FOCUS="ag-keyboard-focus",FocusService2.keyboardModeActive=!1,FocusService2.instancesMonitored=new Map,__decorate$R([Autowired("eGridDiv")],FocusService2.prototype,"eGridDiv",void 0),__decorate$R([Autowired("columnModel")],FocusService2.prototype,"columnModel",void 0),__decorate$R([Autowired("headerNavigationService")],FocusService2.prototype,"headerNavigationService",void 0),__decorate$R([Autowired("rowRenderer")],FocusService2.prototype,"rowRenderer",void 0),__decorate$R([Autowired("rowPositionUtils")],FocusService2.prototype,"rowPositionUtils",void 0),__decorate$R([Optional("rangeService")],FocusService2.prototype,"rangeService",void 0),__decorate$R([Autowired("navigationService")],FocusService2.prototype,"navigationService",void 0),__decorate$R([Autowired("ctrlsService")],FocusService2.prototype,"ctrlsService",void 0),__decorate$R([PostConstruct],FocusService2.prototype,"init",null),FocusService2=FocusService_1=__decorate$R([Bean("focusService")],FocusService2)}(BeanStub),__extends$O=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$Q=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$9=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};(DIRECTION2=DIRECTION||(DIRECTION={}))[DIRECTION2.vertical=0]="vertical",DIRECTION2[DIRECTION2.horizontal=1]="horizontal";var LoadingType,LoadingType2,instanceIdSeq=0,PopupService=function(_super){function PopupService2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.popupList=[],_this}var PopupService_1;return __extends$O(PopupService2,_super),__name(PopupService2,"PopupService"),PopupService_1=PopupService2,PopupService2.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady(function(p){_this.gridCtrl=p.gridCtrl,_this.addManagedListener(_this.gridCtrl,Events.EVENT_KEYBOARD_FOCUS,function(){_this.popupList.forEach(function(popup){return popup.element.classList.add(FocusService.AG_KEYBOARD_FOCUS)})}),_this.addManagedListener(_this.gridCtrl,Events.EVENT_MOUSE_FOCUS,function(){_this.popupList.forEach(function(popup){return popup.element.classList.remove(FocusService.AG_KEYBOARD_FOCUS)})})})},PopupService2.prototype.getPopupParent=function(){return this.gridOptionsService.get("popupParent")||this.gridCtrl.getGui()},PopupService2.prototype.positionPopupForMenu=function(params){var sourceRect=params.eventSource.getBoundingClientRect(),parentRect=this.getParentRect(),y=this.keepXYWithinBounds(params.ePopup,sourceRect.top-parentRect.top,DIRECTION.vertical),minWidth=params.ePopup.clientWidth>0?params.ePopup.clientWidth:200;params.ePopup.style.minWidth=minWidth+"px";var x,maxX=parentRect.right-parentRect.left-minWidth;function xRightPosition(){return sourceRect.right-parentRect.left-2}function xLeftPosition(){return sourceRect.left-parentRect.left-minWidth}this.gridOptionsService.is("enableRtl")?((x=xLeftPosition())<0&&(x=xRightPosition()),x>maxX&&(x=0)):((x=xRightPosition())>maxX&&(x=xLeftPosition()),x<0&&(x=0)),params.ePopup.style.left=x+"px",params.ePopup.style.top=y+"px",__name(xRightPosition,"xRightPosition"),__name(xLeftPosition,"xLeftPosition")},PopupService2.prototype.positionPopupUnderMouseEvent=function(params){var _this=this,ePopup=params.ePopup,nudgeX=params.nudgeX,nudgeY=params.nudgeY,skipObserver=params.skipObserver;this.positionPopup({ePopup,nudgeX,nudgeY,keepWithinBounds:!0,skipObserver,updatePosition:function(){return _this.calculatePointerAlign(params.mouseEvent)},postProcessCallback:function(){return _this.callPostProcessPopup(params.type,params.ePopup,null,params.mouseEvent,params.column,params.rowNode)}})},PopupService2.prototype.calculatePointerAlign=function(e){var parentRect=this.getParentRect();return{x:e.clientX-parentRect.left,y:e.clientY-parentRect.top}},PopupService2.prototype.positionPopupByComponent=function(params){var _this=this,sourceRect=params.eventSource.getBoundingClientRect(),alignSide=params.alignSide||"left",position=params.position||"over",parentRect=this.getParentRect(),updatePosition=__name(function(){var x=sourceRect.left-parentRect.left;return"right"===alignSide&&(x-=params.ePopup.offsetWidth-sourceRect.width),{x,y:"over"===position?sourceRect.top-parentRect.top:sourceRect.top-parentRect.top+sourceRect.height}},"updatePosition");this.positionPopup({ePopup:params.ePopup,nudgeX:params.nudgeX,nudgeY:params.nudgeY,keepWithinBounds:params.keepWithinBounds,updatePosition,postProcessCallback:function(){return _this.callPostProcessPopup(params.type,params.ePopup,params.eventSource,null,params.column,params.rowNode)}})},PopupService2.prototype.callPostProcessPopup=function(type,ePopup,eventSource,mouseEvent,column,rowNode){var callback=this.gridOptionsService.getCallback("postProcessPopup");callback&&callback({column,rowNode,ePopup,type,eventSource,mouseEvent})},PopupService2.prototype.positionPopup=function(params){var _this=this,ePopup=params.ePopup,keepWithinBounds=params.keepWithinBounds,nudgeX=params.nudgeX,nudgeY=params.nudgeY,skipObserver=params.skipObserver,updatePosition=params.updatePosition,lastSize={width:0,height:0},updatePopupPosition=__name(function(fromResizeObserver){void 0===fromResizeObserver&&(fromResizeObserver=!1);var _a=updatePosition(),x=_a.x,y=_a.y;fromResizeObserver&&ePopup.clientWidth===lastSize.width&&ePopup.clientHeight===lastSize.height||(lastSize.width=ePopup.clientWidth,lastSize.height=ePopup.clientHeight,nudgeX&&(x+=nudgeX),nudgeY&&(y+=nudgeY),keepWithinBounds&&(x=_this.keepXYWithinBounds(ePopup,x,DIRECTION.horizontal),y=_this.keepXYWithinBounds(ePopup,y,DIRECTION.vertical)),ePopup.style.left=x+"px",ePopup.style.top=y+"px",params.postProcessCallback&&params.postProcessCallback())},"updatePopupPosition");if(updatePopupPosition(),!skipObserver){var resizeObserverDestroyFunc_1=this.resizeObserverService.observeResize(ePopup,function(){return updatePopupPosition(!0)});setTimeout(function(){return resizeObserverDestroyFunc_1()},PopupService_1.WAIT_FOR_POPUP_CONTENT_RESIZE)}},PopupService2.prototype.getActivePopups=function(){return this.popupList.map(function(popup){return popup.element})},PopupService2.prototype.getPopupList=function(){return this.popupList},PopupService2.prototype.getParentRect=function(){var eDocument=this.gridOptionsService.getDocument(),popupParent=this.getPopupParent();popupParent===eDocument.body?popupParent=eDocument.documentElement:"static"===getComputedStyle(popupParent).position&&(popupParent=popupParent.offsetParent);var style=getComputedStyle(popupParent),bounds=popupParent.getBoundingClientRect();return{top:bounds.top+parseFloat(style.borderTopWidth)||0,left:bounds.left+parseFloat(style.borderLeftWidth)||0,right:bounds.right+parseFloat(style.borderRightWidth)||0,bottom:bounds.bottom+parseFloat(style.borderBottomWidth)||0}},PopupService2.prototype.keepXYWithinBounds=function(ePopup,position,direction){var isVertical=direction===DIRECTION.vertical,sizeProperty=isVertical?"clientHeight":"clientWidth",anchorProperty=isVertical?"top":"left",offsetProperty=isVertical?"offsetHeight":"offsetWidth",scrollPositionProperty=isVertical?"scrollTop":"scrollLeft",eDocument=this.gridOptionsService.getDocument(),docElement=eDocument.documentElement,popupParent=this.getPopupParent(),parentRect=popupParent.getBoundingClientRect(),documentRect=eDocument.documentElement.getBoundingClientRect(),isBody=popupParent===eDocument.body,offsetSize=ePopup[offsetProperty],sizeOfParent=isBody?(isVertical?getAbsoluteHeight:getAbsoluteWidth)(docElement)+docElement[scrollPositionProperty]:popupParent[sizeProperty];isBody&&(sizeOfParent-=Math.abs(documentRect[anchorProperty]-parentRect[anchorProperty]));var max=sizeOfParent-offsetSize;return Math.min(Math.max(position,0),Math.abs(max))},PopupService2.prototype.keepPopupPositionedRelativeTo=function(params){var _this=this,eParent=this.getPopupParent(),parentRect=eParent.getBoundingClientRect(),sourceRect=params.element.getBoundingClientRect(),initialDiffTop=parentRect.top-sourceRect.top,initialDiffLeft=parentRect.left-sourceRect.left,lastDiffTop=initialDiffTop,lastDiffLeft=initialDiffLeft,topPx=params.ePopup.style.top,top=parseInt(topPx.substring(0,topPx.length-1),10),leftPx=params.ePopup.style.left,left=parseInt(leftPx.substring(0,leftPx.length-1),10);return new AgPromise(function(resolve){_this.getFrameworkOverrides().setInterval(function(){var pRect=eParent.getBoundingClientRect(),sRect=params.element.getBoundingClientRect();if(0==sRect.top&&0==sRect.left&&0==sRect.height&&0==sRect.width)params.hidePopup();else{var currentDiffTop=pRect.top-sRect.top;if(currentDiffTop!=lastDiffTop){var newTop=_this.keepXYWithinBounds(params.ePopup,top+initialDiffTop-currentDiffTop,DIRECTION.vertical);params.ePopup.style.top=newTop+"px"}lastDiffTop=currentDiffTop;var currentDiffLeft=pRect.left-sRect.left;if(currentDiffLeft!=lastDiffLeft){var newLeft=_this.keepXYWithinBounds(params.ePopup,left+initialDiffLeft-currentDiffLeft,DIRECTION.horizontal);params.ePopup.style.left=newLeft+"px"}lastDiffLeft=currentDiffLeft}},200).then(function(intervalId){resolve(__name(function(){null!=intervalId&&window.clearInterval(intervalId)},"result"))})})},PopupService2.prototype.addPopup=function(params){var _a,_this=this,modal=params.modal,eChild=params.eChild,closeOnEsc=params.closeOnEsc,closedCallback=params.closedCallback,click=params.click,alwaysOnTop=params.alwaysOnTop,afterGuiAttached=params.afterGuiAttached,positionCallback=params.positionCallback,anchorToElement=params.anchorToElement,ariaLabel=params.ariaLabel,eDocument=this.gridOptionsService.getDocument(),destroyPositionTracker=new AgPromise(function(resolve){return resolve(function(){})});if(!eDocument)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:function(){},stopAnchoringPromise:destroyPositionTracker};var pos=this.popupList.findIndex(function(popup2){return popup2.element===eChild});if(-1!==pos){var popup=this.popupList[pos];return{hideFunc:popup.hideFunc,stopAnchoringPromise:popup.stopAnchoringPromise}}var ePopupParent=this.getPopupParent();null==eChild.style.top&&(eChild.style.top="0px"),null==eChild.style.left&&(eChild.style.left="0px");var eWrapper=document.createElement("div"),allThemes=this.environment.getTheme().allThemes;allThemes.length&&(_a=eWrapper.classList).add.apply(_a,function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$9(arguments[i]));return ar}(allThemes)),eWrapper.classList.add("ag-popup"),eChild.classList.add(this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),eChild.hasAttribute("role")||setAriaRole(eChild,"dialog"),setAriaLabel(eChild,ariaLabel),this.focusService.isKeyboardMode()&&eChild.classList.add(FocusService.AG_KEYBOARD_FOCUS),eWrapper.appendChild(eChild),ePopupParent.appendChild(eWrapper),alwaysOnTop?this.setAlwaysOnTop(eWrapper,!0):this.bringPopupToFront(eWrapper);var popupHidden=!1,hidePopupOnKeyboardEvent=__name(function(event){eWrapper.contains(eDocument.activeElement)&&(event.key===KeyCode.ESCAPE&&hidePopup({keyboardEvent:event}))},"hidePopupOnKeyboardEvent"),hidePopupOnMouseEvent=__name(function(event){return hidePopup({mouseEvent:event})},"hidePopupOnMouseEvent"),hidePopupOnTouchEvent=__name(function(event){return hidePopup({touchEvent:event})},"hidePopupOnTouchEvent"),hidePopup=__name(function(popupParams){void 0===popupParams&&(popupParams={});var mouseEvent=popupParams.mouseEvent,touchEvent=popupParams.touchEvent,keyboardEvent=popupParams.keyboardEvent;_this.isEventFromCurrentPopup({mouseEvent,touchEvent},eChild)||_this.isEventSameChainAsOriginalEvent({originalMouseEvent:click,mouseEvent,touchEvent})||popupHidden||(popupHidden=!0,ePopupParent.removeChild(eWrapper),eDocument.removeEventListener("keydown",hidePopupOnKeyboardEvent),eDocument.removeEventListener("mousedown",hidePopupOnMouseEvent),eDocument.removeEventListener("touchstart",hidePopupOnTouchEvent),eDocument.removeEventListener("contextmenu",hidePopupOnMouseEvent),_this.eventService.removeEventListener(Events.EVENT_DRAG_STARTED,hidePopupOnMouseEvent),closedCallback&&closedCallback(mouseEvent||touchEvent||keyboardEvent),_this.popupList=_this.popupList.filter(function(popup2){return popup2.element!==eChild}),destroyPositionTracker&&destroyPositionTracker.then(function(destroyFunc){return destroyFunc&&destroyFunc()}))},"hidePopup");return afterGuiAttached&&afterGuiAttached({hidePopup}),window.setTimeout(function(){closeOnEsc&&eDocument.addEventListener("keydown",hidePopupOnKeyboardEvent),modal&&(eDocument.addEventListener("mousedown",hidePopupOnMouseEvent),_this.eventService.addEventListener(Events.EVENT_DRAG_STARTED,hidePopupOnMouseEvent),eDocument.addEventListener("touchstart",hidePopupOnTouchEvent),eDocument.addEventListener("contextmenu",hidePopupOnMouseEvent))},0),positionCallback&&positionCallback(),anchorToElement&&(destroyPositionTracker=this.keepPopupPositionedRelativeTo({element:anchorToElement,ePopup:eChild,hidePopup})),this.popupList.push({element:eChild,wrapper:eWrapper,hideFunc:hidePopup,stopAnchoringPromise:destroyPositionTracker,instanceId:instanceIdSeq++,isAnchored:!!anchorToElement}),{hideFunc:hidePopup,stopAnchoringPromise:destroyPositionTracker}},PopupService2.prototype.hasAnchoredPopup=function(){return this.popupList.some(function(popup){return popup.isAnchored})},PopupService2.prototype.isEventFromCurrentPopup=function(params,target){var mouseEvent=params.mouseEvent,touchEvent=params.touchEvent,event=mouseEvent||touchEvent;if(!event)return!1;var indexOfThisChild=this.popupList.findIndex(function(popup2){return popup2.element===target});if(-1===indexOfThisChild)return!1;for(var i=indexOfThisChild;i<this.popupList.length;i++){if(isElementInEventPath(this.popupList[i].element,event))return!0}return this.isElementWithinCustomPopup(event.target)},PopupService2.prototype.isElementWithinCustomPopup=function(el){for(var eDocument=this.gridOptionsService.getDocument();el&&el!==eDocument.body;){if(el.classList.contains("ag-custom-component-popup")||null===el.parentElement)return!0;el=el.parentElement}return!1},PopupService2.prototype.isEventSameChainAsOriginalEvent=function(params){var originalMouseEvent=params.originalMouseEvent,mouseEvent=params.mouseEvent,touchEvent=params.touchEvent,mouseEventOrTouch=null;if(mouseEvent?mouseEventOrTouch=mouseEvent:touchEvent&&(mouseEventOrTouch=touchEvent.touches[0]),mouseEventOrTouch&&originalMouseEvent){var screenX_1=mouseEvent?mouseEvent.screenX:0,screenY_1=mouseEvent?mouseEvent.screenY:0,xMatch=Math.abs(originalMouseEvent.screenX-screenX_1)<5,yMatch=Math.abs(originalMouseEvent.screenY-screenY_1)<5;if(xMatch&&yMatch)return!0}return!1},PopupService2.prototype.getWrapper=function(ePopup){for(;!ePopup.classList.contains("ag-popup")&&ePopup.parentElement;)ePopup=ePopup.parentElement;return ePopup.classList.contains("ag-popup")?ePopup:null},PopupService2.prototype.setAlwaysOnTop=function(ePopup,alwaysOnTop){var eWrapper=this.getWrapper(ePopup);eWrapper&&(eWrapper.classList.toggle("ag-always-on-top",!!alwaysOnTop),alwaysOnTop&&this.bringPopupToFront(eWrapper))},PopupService2.prototype.bringPopupToFront=function(ePopup){var parent=this.getPopupParent(),popupList=Array.prototype.slice.call(parent.querySelectorAll(".ag-popup")),popupLen=popupList.length,alwaysOnTopList=Array.prototype.slice.call(parent.querySelectorAll(".ag-popup.ag-always-on-top")),onTopLength=alwaysOnTopList.length,eWrapper=this.getWrapper(ePopup);if(eWrapper&&!(popupLen<=1)&&parent.contains(ePopup)){var pos=popupList.indexOf(eWrapper),innerEls=eWrapper.querySelectorAll("div"),innerElsScrollMap=[];if(innerEls.forEach(function(el){0!==el.scrollTop&&innerElsScrollMap.push([el,el.scrollTop])}),onTopLength)eWrapper.classList.contains("ag-always-on-top")?pos!==popupLen-1&&last(alwaysOnTopList).insertAdjacentElement("afterend",eWrapper):pos!==popupLen-onTopLength-1&&alwaysOnTopList[0].insertAdjacentElement("beforebegin",eWrapper);else pos!==popupLen-1&&last(popupList).insertAdjacentElement("afterend",eWrapper);for(;innerElsScrollMap.length;){var currentEl=innerElsScrollMap.pop();currentEl[0].scrollTop=currentEl[1]}var params={type:"popupToFront",api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,eWrapper};this.eventService.dispatchEvent(params)}},PopupService2.WAIT_FOR_POPUP_CONTENT_RESIZE=200,__decorate$Q([Autowired("focusService")],PopupService2.prototype,"focusService",void 0),__decorate$Q([Autowired("ctrlsService")],PopupService2.prototype,"ctrlsService",void 0),__decorate$Q([Autowired("resizeObserverService")],PopupService2.prototype,"resizeObserverService",void 0),__decorate$Q([PostConstruct],PopupService2.prototype,"postConstruct",null),PopupService2=PopupService_1=__decorate$Q([Bean("popupService")],PopupService2)}(BeanStub),__extends$N=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$P=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},OUTSIDE_ANGULAR_EVENTS=(function(_super){function VirtualList2(cssIdentifier,ariaRole,listName){void 0===cssIdentifier&&(cssIdentifier="default"),void 0===ariaRole&&(ariaRole="listbox");var _this=_super.call(this,VirtualList2.getTemplate(cssIdentifier))||this;return _this.cssIdentifier=cssIdentifier,_this.ariaRole=ariaRole,_this.listName=listName,_this.renderedRows=new Map,_this.rowHeight=20,_this}__extends$N(VirtualList2,_super),__name(VirtualList2,"VirtualList"),VirtualList2.prototype.postConstruct=function(){var _this=this;this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:function(e){return _this.onFocusIn(e)},onFocusOut:function(e){return _this.onFocusOut(e)},focusInnerElement:function(fromBottom){return _this.focusInnerElement(fromBottom)},onTabKeyDown:function(e){return _this.onTabKeyDown(e)},handleKeyDown:function(e){return _this.handleKeyDown(e)}}),this.setAriaProperties(),this.addManagedListener(this.eventService,Events.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))},VirtualList2.prototype.onGridStylesChanged=function(){this.rowHeight=this.getItemHeight(),this.refresh()},VirtualList2.prototype.setAriaProperties=function(){var listName=this.localeService.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),ariaEl=this.eContainer;setAriaRole(ariaEl,this.ariaRole),setAriaLabel(ariaEl,listName)},VirtualList2.prototype.addResizeObserver=function(){var _this=this,listener=__name(function(){return _this.drawVirtualRows()},"listener"),destroyObserver=this.resizeObserverService.observeResize(this.getGui(),listener);this.addDestroyFunc(destroyObserver)},VirtualList2.prototype.focusInnerElement=function(fromBottom){this.focusRow(fromBottom?this.model.getRowCount()-1:0)},VirtualList2.prototype.onFocusIn=function(e){var target=e.target;return target.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=getAriaPosInSet(target)-1),!1},VirtualList2.prototype.onFocusOut=function(e){return this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null),!1},VirtualList2.prototype.handleKeyDown=function(e){switch(e.key){case KeyCode.UP:case KeyCode.DOWN:this.navigate(e.key===KeyCode.UP)&&e.preventDefault()}},VirtualList2.prototype.onTabKeyDown=function(e){this.navigate(e.shiftKey)?e.preventDefault():this.forceFocusOutOfContainer(e.shiftKey)},VirtualList2.prototype.navigate=function(up){if(null==this.lastFocusedRowIndex)return!1;var nextRow=this.lastFocusedRowIndex+(up?-1:1);return!(nextRow<0||nextRow>=this.model.getRowCount())&&(this.focusRow(nextRow),!0)},VirtualList2.prototype.getLastFocusedRow=function(){return this.lastFocusedRowIndex},VirtualList2.prototype.focusRow=function(rowNumber){var _this=this;this.ensureIndexVisible(rowNumber),window.setTimeout(function(){if(_this.isAlive()){var renderedRow=_this.renderedRows.get(rowNumber);renderedRow&&renderedRow.eDiv.focus()}},10)},VirtualList2.prototype.getComponentAt=function(rowIndex){var comp=this.renderedRows.get(rowIndex);return comp&&comp.rowComponent},VirtualList2.prototype.forEachRenderedRow=function(func){this.renderedRows.forEach(function(value,key){return func(value.rowComponent,key)})},VirtualList2.getTemplate=function(cssIdentifier){return'\n            <div class="ag-virtual-list-viewport ag-'+cssIdentifier+'-virtual-list-viewport" role="presentation">\n                <div class="ag-virtual-list-container ag-'+cssIdentifier+'-virtual-list-container" ref="eContainer"></div>\n            </div>'},VirtualList2.prototype.getItemHeight=function(){return this.environment.getListItemHeight()},VirtualList2.prototype.ensureIndexVisible=function(index){var lastRow=this.model.getRowCount();if("number"!=typeof index||index<0||index>=lastRow)console.warn("AG Grid: invalid row index for ensureIndexVisible: "+index);else{var rowTopPixel=index*this.rowHeight,rowBottomPixel=rowTopPixel+this.rowHeight,eGui=this.getGui(),viewportTopPixel=eGui.scrollTop,viewportHeight=eGui.offsetHeight,viewportScrolledBeforeRow=viewportTopPixel+viewportHeight<rowBottomPixel;if(viewportTopPixel>rowTopPixel)eGui.scrollTop=rowTopPixel;else if(viewportScrolledBeforeRow){var newScrollPosition=rowBottomPixel-viewportHeight;eGui.scrollTop=newScrollPosition}}},VirtualList2.prototype.setComponentCreator=function(componentCreator){this.componentCreator=componentCreator},VirtualList2.prototype.setComponentUpdater=function(componentUpdater){this.componentUpdater=componentUpdater},VirtualList2.prototype.getRowHeight=function(){return this.rowHeight},VirtualList2.prototype.getScrollTop=function(){return this.getGui().scrollTop},VirtualList2.prototype.setRowHeight=function(rowHeight){this.rowHeight=rowHeight,this.refresh()},VirtualList2.prototype.refresh=function(softRefresh){var _this=this;if(null!=this.model&&this.isAlive()){var rowCount=this.model.getRowCount();this.eContainer.style.height=rowCount*this.rowHeight+"px",waitUntil(function(){return _this.eContainer.clientHeight>=rowCount*_this.rowHeight},function(){_this.isAlive()&&(_this.canSoftRefresh(softRefresh)?_this.drawVirtualRows(!0):(_this.clearVirtualRows(),_this.drawVirtualRows()))})}},VirtualList2.prototype.canSoftRefresh=function(softRefresh){return!!(softRefresh&&this.renderedRows.size&&"function"==typeof this.model.areRowsEqual&&this.componentUpdater)},VirtualList2.prototype.clearVirtualRows=function(){var _this=this;this.renderedRows.forEach(function(_2,rowIndex){return _this.removeRow(rowIndex)})},VirtualList2.prototype.drawVirtualRows=function(softRefresh){if(this.isAlive()){var gui=this.getGui(),topPixel=gui.scrollTop,bottomPixel=topPixel+gui.offsetHeight,firstRow=Math.floor(topPixel/this.rowHeight),lastRow=Math.floor(bottomPixel/this.rowHeight);this.ensureRowsRendered(firstRow,lastRow,softRefresh)}},VirtualList2.prototype.ensureRowsRendered=function(start,finish,softRefresh){var _this=this;this.renderedRows.forEach(function(_2,rowIndex2){(rowIndex2<start||rowIndex2>finish)&&rowIndex2!==_this.lastFocusedRowIndex&&_this.removeRow(rowIndex2)}),softRefresh&&this.refreshRows();for(var rowIndex=start;rowIndex<=finish;rowIndex++)this.renderedRows.has(rowIndex)||rowIndex<this.model.getRowCount()&&this.insertRow(rowIndex)},VirtualList2.prototype.insertRow=function(rowIndex){var _this=this,value=this.model.getRow(rowIndex),eDiv=document.createElement("div");if(eDiv.classList.add("ag-virtual-list-item","ag-"+this.cssIdentifier+"-virtual-list-item"),setAriaRole(eDiv,"tree"===this.ariaRole?"treeitem":"option"),setAriaSetSize(eDiv,this.model.getRowCount()),setAriaPosInSet(eDiv,rowIndex+1),eDiv.setAttribute("tabindex","-1"),"function"==typeof this.model.isRowSelected){var isSelected=this.model.isRowSelected(rowIndex);setAriaSelected(eDiv,!!isSelected),setAriaChecked(eDiv,isSelected)}eDiv.style.height=this.rowHeight+"px",eDiv.style.top=this.rowHeight*rowIndex+"px";var rowComponent=this.componentCreator(value,eDiv);rowComponent.addGuiEventListener("focusin",function(){return _this.lastFocusedRowIndex=rowIndex}),eDiv.appendChild(rowComponent.getGui()),this.renderedRows.has(rowIndex-1)?this.renderedRows.get(rowIndex-1).eDiv.insertAdjacentElement("afterend",eDiv):this.renderedRows.has(rowIndex+1)?this.renderedRows.get(rowIndex+1).eDiv.insertAdjacentElement("beforebegin",eDiv):this.eContainer.appendChild(eDiv),this.renderedRows.set(rowIndex,{rowComponent,eDiv,value})},VirtualList2.prototype.removeRow=function(rowIndex){var component=this.renderedRows.get(rowIndex);this.eContainer.removeChild(component.eDiv),this.destroyBean(component.rowComponent),this.renderedRows.delete(rowIndex)},VirtualList2.prototype.refreshRows=function(){var _this=this,rowCount=this.model.getRowCount();this.renderedRows.forEach(function(row,rowIndex){var _a,_b;if(rowIndex>=rowCount)_this.removeRow(rowIndex);else{var newValue=_this.model.getRow(rowIndex);null!==(_b=(_a=_this.model).areRowsEqual)&&void 0!==_b&&_b.call(_a,row.value,newValue)?_this.componentUpdater(newValue,row.rowComponent):_this.removeRow(rowIndex)}})},VirtualList2.prototype.addScrollListener=function(){var _this=this;this.addGuiEventListener("scroll",function(){return _this.drawVirtualRows()},{passive:!0})},VirtualList2.prototype.setModel=function(model){this.model=model},VirtualList2.prototype.destroy=function(){this.isAlive()&&(this.clearVirtualRows(),_super.prototype.destroy.call(this))},__decorate$P([Autowired("resizeObserverService")],VirtualList2.prototype,"resizeObserverService",void 0),__decorate$P([RefSelector("eContainer")],VirtualList2.prototype,"eContainer",void 0),__decorate$P([PostConstruct],VirtualList2.prototype,"postConstruct",null)}(TabGuardComp),["mouseover","mouseout","mouseenter","mouseleave"]),PASSIVE_EVENTS=["touchstart","touchend","touchmove","touchcancel"],VanillaFrameworkOverrides=function(){function VanillaFrameworkOverrides2(){this.isOutsideAngular=function(eventType){return includes(OUTSIDE_ANGULAR_EVENTS,eventType)}}return __name(VanillaFrameworkOverrides2,"VanillaFrameworkOverrides"),VanillaFrameworkOverrides2.prototype.setTimeout=function(action,timeout){window.setTimeout(action,timeout)},VanillaFrameworkOverrides2.prototype.setInterval=function(action,timeout){return new AgPromise(function(resolve){resolve(window.setInterval(action,timeout))})},VanillaFrameworkOverrides2.prototype.addEventListener=function(element,type,listener,useCapture){var isPassive=includes(PASSIVE_EVENTS,type);element.addEventListener(type,listener,{capture:!!useCapture,passive:isPassive})},VanillaFrameworkOverrides2.prototype.dispatchEvent=function(eventType,listener,global2){listener()},VanillaFrameworkOverrides2.prototype.frameworkComponent=function(name){return null},VanillaFrameworkOverrides2.prototype.isFrameworkComponent=function(comp){return!1},VanillaFrameworkOverrides2}(),__extends$M=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$O=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$8=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},CellNavigationService=function(_super){function CellNavigationService2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$M(CellNavigationService2,_super),__name(CellNavigationService2,"CellNavigationService"),CellNavigationService2.prototype.getNextCellToFocus=function(key,focusedCell,ctrlPressed){return void 0===ctrlPressed&&(ctrlPressed=!1),ctrlPressed?this.getNextCellToFocusWithCtrlPressed(key,focusedCell):this.getNextCellToFocusWithoutCtrlPressed(key,focusedCell)},CellNavigationService2.prototype.getNextCellToFocusWithCtrlPressed=function(key,focusedCell){var column,rowIndex,upKey=key===KeyCode.UP,downKey=key===KeyCode.DOWN,leftKey=key===KeyCode.LEFT;if(upKey||downKey)rowIndex=upKey?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),column=focusedCell.column;else{var allColumns=this.columnModel.getAllDisplayedColumns(),isRtl=this.gridOptionsService.is("enableRtl");rowIndex=focusedCell.rowIndex,column=leftKey!==isRtl?allColumns[0]:last(allColumns)}return{rowIndex,rowPinned:null,column}},CellNavigationService2.prototype.getNextCellToFocusWithoutCtrlPressed=function(key,focusedCell){for(var pointer=focusedCell,finished=!1;!finished;){switch(key){case KeyCode.UP:pointer=this.getCellAbove(pointer);break;case KeyCode.DOWN:pointer=this.getCellBelow(pointer);break;case KeyCode.RIGHT:pointer=this.gridOptionsService.is("enableRtl")?this.getCellToLeft(pointer):this.getCellToRight(pointer);break;case KeyCode.LEFT:pointer=this.gridOptionsService.is("enableRtl")?this.getCellToRight(pointer):this.getCellToLeft(pointer);break;default:pointer=null,console.warn("AG Grid: unknown key for navigation "+key)}finished=!pointer||this.isCellGoodToFocusOn(pointer)}return pointer},CellNavigationService2.prototype.isCellGoodToFocusOn=function(gridCell){var rowNode,column=gridCell.column;switch(gridCell.rowPinned){case"top":rowNode=this.pinnedRowModel.getPinnedTopRow(gridCell.rowIndex);break;case"bottom":rowNode=this.pinnedRowModel.getPinnedBottomRow(gridCell.rowIndex);break;default:rowNode=this.rowModel.getRow(gridCell.rowIndex)}return!!rowNode&&!column.isSuppressNavigable(rowNode)},CellNavigationService2.prototype.getCellToLeft=function(lastCell){if(!lastCell)return null;var colToLeft=this.columnModel.getDisplayedColBefore(lastCell.column);return colToLeft?{rowIndex:lastCell.rowIndex,column:colToLeft,rowPinned:lastCell.rowPinned}:null},CellNavigationService2.prototype.getCellToRight=function(lastCell){if(!lastCell)return null;var colToRight=this.columnModel.getDisplayedColAfter(lastCell.column);return colToRight?{rowIndex:lastCell.rowIndex,column:colToRight,rowPinned:lastCell.rowPinned}:null},CellNavigationService2.prototype.getRowBelow=function(rowPosition){var index=rowPosition.rowIndex,pinned=rowPosition.rowPinned;if(this.isLastRowInContainer(rowPosition))switch(pinned){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}var rowNode=this.rowModel.getRow(rowPosition.rowIndex);return this.getNextStickyPosition(rowNode)||{rowIndex:index+1,rowPinned:pinned}},CellNavigationService2.prototype.getNextStickyPosition=function(rowNode,up){if(this.gridOptionsService.is("groupRowsSticky")&&rowNode&&rowNode.sticky){var stickyRowCtrls=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$8(arguments[i]));return ar}(this.rowRenderer.getStickyTopRowCtrls()).sort(function(a,b){return a.getRowNode().rowIndex-b.getRowNode().rowIndex}),diff=up?-1:1,idx=stickyRowCtrls.findIndex(function(ctrl){return ctrl.getRowNode().rowIndex===rowNode.rowIndex}),nextCtrl=stickyRowCtrls[idx+diff];if(nextCtrl)return{rowIndex:nextCtrl.getRowNode().rowIndex,rowPinned:null}}},CellNavigationService2.prototype.getCellBelow=function(lastCell){if(!lastCell)return null;var rowBelow=this.getRowBelow(lastCell);return rowBelow?{rowIndex:rowBelow.rowIndex,column:lastCell.column,rowPinned:rowBelow.rowPinned}:null},CellNavigationService2.prototype.isLastRowInContainer=function(rowPosition){var pinned=rowPosition.rowPinned,index=rowPosition.rowIndex;return"top"===pinned?this.pinnedRowModel.getPinnedTopRowData().length-1<=index:"bottom"===pinned?this.pinnedRowModel.getPinnedBottomRowData().length-1<=index:this.paginationProxy.getPageLastRow()<=index},CellNavigationService2.prototype.getRowAbove=function(rowPosition){var index=rowPosition.rowIndex,pinned=rowPosition.rowPinned;if(pinned?0===index:index===this.paginationProxy.getPageFirstRow())return"top"===pinned?null:pinned&&this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;var rowNode=this.rowModel.getRow(rowPosition.rowIndex);return this.getNextStickyPosition(rowNode,!0)||{rowIndex:index-1,rowPinned:pinned}},CellNavigationService2.prototype.getCellAbove=function(lastCell){if(!lastCell)return null;var rowAbove=this.getRowAbove({rowIndex:lastCell.rowIndex,rowPinned:lastCell.rowPinned});return rowAbove?{rowIndex:rowAbove.rowIndex,column:lastCell.column,rowPinned:rowAbove.rowPinned}:null},CellNavigationService2.prototype.getLastBodyCell=function(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}},CellNavigationService2.prototype.getLastFloatingTopRow=function(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:"top"}},CellNavigationService2.prototype.getNextTabbedCell=function(gridCell,backwards){return backwards?this.getNextTabbedCellBackwards(gridCell):this.getNextTabbedCellForwards(gridCell)},CellNavigationService2.prototype.getNextTabbedCellForwards=function(gridCell){var displayedColumns=this.columnModel.getAllDisplayedColumns(),newRowIndex=gridCell.rowIndex,newFloating=gridCell.rowPinned,newColumn=this.columnModel.getDisplayedColAfter(gridCell.column);if(!newColumn){newColumn=displayedColumns[0];var rowBelow=this.getRowBelow(gridCell);if(missing(rowBelow)||!rowBelow.rowPinned&&!this.paginationProxy.isRowInPage(rowBelow))return null;newRowIndex=rowBelow?rowBelow.rowIndex:null,newFloating=rowBelow?rowBelow.rowPinned:null}return{rowIndex:newRowIndex,column:newColumn,rowPinned:newFloating}},CellNavigationService2.prototype.getNextTabbedCellBackwards=function(gridCell){var displayedColumns=this.columnModel.getAllDisplayedColumns(),newRowIndex=gridCell.rowIndex,newFloating=gridCell.rowPinned,newColumn=this.columnModel.getDisplayedColBefore(gridCell.column);if(!newColumn){newColumn=last(displayedColumns);var rowAbove=this.getRowAbove({rowIndex:gridCell.rowIndex,rowPinned:gridCell.rowPinned});if(missing(rowAbove)||!rowAbove.rowPinned&&!this.paginationProxy.isRowInPage(rowAbove))return null;newRowIndex=rowAbove?rowAbove.rowIndex:null,newFloating=rowAbove?rowAbove.rowPinned:null}return{rowIndex:newRowIndex,column:newColumn,rowPinned:newFloating}},__decorate$O([Autowired("columnModel")],CellNavigationService2.prototype,"columnModel",void 0),__decorate$O([Autowired("rowModel")],CellNavigationService2.prototype,"rowModel",void 0),__decorate$O([Autowired("rowRenderer")],CellNavigationService2.prototype,"rowRenderer",void 0),__decorate$O([Autowired("pinnedRowModel")],CellNavigationService2.prototype,"pinnedRowModel",void 0),__decorate$O([Autowired("paginationProxy")],CellNavigationService2.prototype,"paginationProxy",void 0),CellNavigationService2=__decorate$O([Bean("cellNavigationService")],CellNavigationService2)}(BeanStub),__extends$L=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$N=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AlignedGridsService=function(_super){function AlignedGridsService2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.consuming=!1,_this}return __extends$L(AlignedGridsService2,_super),__name(AlignedGridsService2,"AlignedGridsService"),AlignedGridsService2.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("AlignedGridsService")},AlignedGridsService2.prototype.init=function(){this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))},AlignedGridsService2.prototype.fireEvent=function(callback){if(!this.consuming){var otherGrids=this.gridOptionsService.get("alignedGrids");otherGrids&&otherGrids.forEach(function(otherGridOptions){if(otherGridOptions.api){var alignedGridService=otherGridOptions.api.__getAlignedGridService();callback(alignedGridService)}})}},AlignedGridsService2.prototype.onEvent=function(callback){this.consuming=!0,callback(),this.consuming=!1},AlignedGridsService2.prototype.fireColumnEvent=function(event){this.fireEvent(function(alignedGridsService){alignedGridsService.onColumnEvent(event)})},AlignedGridsService2.prototype.fireScrollEvent=function(event){"horizontal"===event.direction&&this.fireEvent(function(alignedGridsService){alignedGridsService.onScrollEvent(event)})},AlignedGridsService2.prototype.onScrollEvent=function(event){var _this=this;this.onEvent(function(){_this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(event.left)})},AlignedGridsService2.prototype.getMasterColumns=function(event){var result=[];return event.columns?event.columns.forEach(function(column){result.push(column)}):event.column&&result.push(event.column),result},AlignedGridsService2.prototype.getColumnIds=function(event){var result=[];return event.columns?event.columns.forEach(function(column){result.push(column.getColId())}):event.column&&result.push(event.column.getColId()),result},AlignedGridsService2.prototype.onColumnEvent=function(event){var _this=this;this.onEvent(function(){switch(event.type){case Events.EVENT_COLUMN_MOVED:case Events.EVENT_COLUMN_VISIBLE:case Events.EVENT_COLUMN_PINNED:case Events.EVENT_COLUMN_RESIZED:var colEvent=event;_this.processColumnEvent(colEvent);break;case Events.EVENT_COLUMN_GROUP_OPENED:var groupOpenedEvent=event;_this.processGroupOpenedEvent(groupOpenedEvent);break;case Events.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.")}})},AlignedGridsService2.prototype.processGroupOpenedEvent=function(groupOpenedEvent){var masterColumnGroup=groupOpenedEvent.columnGroup,otherColumnGroup=null;if(masterColumnGroup){var groupId=masterColumnGroup.getGroupId();otherColumnGroup=this.columnModel.getProvidedColumnGroup(groupId)}masterColumnGroup&&!otherColumnGroup||(this.logger.log("onColumnEvent-> processing "+groupOpenedEvent+" expanded = "+masterColumnGroup.isExpanded()),this.columnModel.setColumnGroupOpened(otherColumnGroup,masterColumnGroup.isExpanded(),"alignedGridChanged"))},AlignedGridsService2.prototype.processColumnEvent=function(colEvent){var _a,_this=this,masterColumn=colEvent.column,otherColumn=null;if(masterColumn&&(otherColumn=this.columnModel.getPrimaryColumn(masterColumn.getColId())),!masterColumn||otherColumn){var masterColumns=this.getMasterColumns(colEvent);switch(colEvent.type){case Events.EVENT_COLUMN_MOVED:var movedEvent=colEvent,destColState=colEvent.columnApi.getColumnState().map(function(s){return{colId:s.colId}});this.columnModel.applyColumnState({state:destColState,applyOrder:!0},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+colEvent.type+" toIndex = "+movedEvent.toIndex);break;case Events.EVENT_COLUMN_VISIBLE:var visibleEvent=colEvent;destColState=colEvent.columnApi.getColumnState().map(function(s){return{colId:s.colId,hide:s.hide}});this.columnModel.applyColumnState({state:destColState},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+colEvent.type+" visible = "+visibleEvent.visible);break;case Events.EVENT_COLUMN_PINNED:var pinnedEvent=colEvent;destColState=colEvent.columnApi.getColumnState().map(function(s){return{colId:s.colId,pinned:s.pinned}});this.columnModel.applyColumnState({state:destColState},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+colEvent.type+" pinned = "+pinnedEvent.pinned);break;case Events.EVENT_COLUMN_RESIZED:var resizedEvent=colEvent,columnWidths_1={};masterColumns.forEach(function(column){_this.logger.log("onColumnEvent-> processing "+colEvent.type+" actualWidth = "+column.getActualWidth()),columnWidths_1[column.getId()]={key:column.getColId(),newWidth:column.getActualWidth()}}),null===(_a=resizedEvent.flexColumns)||void 0===_a||_a.forEach(function(col){columnWidths_1[col.getId()]&&delete columnWidths_1[col.getId()]}),this.columnModel.setColumnWidths(Object.values(columnWidths_1),!1,resizedEvent.finished,"alignedGridChanged")}var isVerticalScrollShowing2=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing(),alignedGrids=this.gridOptionsService.get("alignedGrids");alignedGrids&&alignedGrids.forEach(function(grid){grid.api&&grid.api.setAlwaysShowVerticalScroll(isVerticalScrollShowing2)})}},__decorate$N([Autowired("columnModel")],AlignedGridsService2.prototype,"columnModel",void 0),__decorate$N([Autowired("ctrlsService")],AlignedGridsService2.prototype,"ctrlsService",void 0),__decorate$N([(paramIndex=0,decorator=Qualifier("loggerFactory"),function(target,key){decorator(target,key,paramIndex)})],AlignedGridsService2.prototype,"setBeans",null),__decorate$N([PostConstruct],AlignedGridsService2.prototype,"init",null),AlignedGridsService2=__decorate$N([Bean("alignedGridsService")],AlignedGridsService2);var paramIndex,decorator}(BeanStub),__extends$K=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$M=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SelectionService=function(_super){function SelectionService2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$K(SelectionService2,_super),__name(SelectionService2,"SelectionService"),SelectionService2.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("selectionService"),this.reset()},SelectionService2.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsService.is("groupSelectsChildren"),this.addManagedListener(this.eventService,Events.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))},SelectionService2.prototype.setLastSelectedNode=function(rowNode){this.lastSelectedNode=rowNode},SelectionService2.prototype.getLastSelectedNode=function(){return this.lastSelectedNode},SelectionService2.prototype.getSelectedNodes=function(){var selectedNodes=[];return iterateObject(this.selectedNodes,function(key,rowNode){rowNode&&selectedNodes.push(rowNode)}),selectedNodes},SelectionService2.prototype.getSelectedRows=function(){var selectedRows=[];return iterateObject(this.selectedNodes,function(key,rowNode){rowNode&&rowNode.data&&selectedRows.push(rowNode.data)}),selectedRows},SelectionService2.prototype.removeGroupsFromSelection=function(){var _this=this;iterateObject(this.selectedNodes,function(key,rowNode){rowNode&&rowNode.group&&(_this.selectedNodes[rowNode.id]=void 0)})},SelectionService2.prototype.updateGroupsFromChildrenSelections=function(source,changedPath){if(!this.gridOptionsService.is("groupSelectsChildren")||"clientSide"!==this.rowModel.getType())return!1;var rootNode=this.rowModel.getRootNode();changedPath||(changedPath=new ChangedPath(!0,rootNode)).setInactive();var selectionChanged=!1;return changedPath.forEachChangedNodeDepthFirst(function(rowNode){if(rowNode!==rootNode){var selected=rowNode.calculateSelectedFromChildren();selectionChanged=rowNode.selectThisNode(null!==selected&&selected,void 0,source)||selectionChanged}}),selectionChanged},SelectionService2.prototype.getNodeForIdIfSelected=function(id){return this.selectedNodes[id]},SelectionService2.prototype.clearOtherNodes=function(rowNodeToKeepSelected,source){var _this=this,groupsToRefresh={},updatedCount=0;return iterateObject(this.selectedNodes,function(key,otherRowNode){if(otherRowNode&&otherRowNode.id!==rowNodeToKeepSelected.id){var rowNode=_this.selectedNodes[otherRowNode.id];updatedCount+=rowNode.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source}),_this.groupSelectsChildren&&otherRowNode.parent&&(groupsToRefresh[otherRowNode.parent.id]=otherRowNode.parent)}}),iterateObject(groupsToRefresh,function(key,group){var selected=group.calculateSelectedFromChildren();group.selectThisNode(null!==selected&&selected,void 0,source)}),updatedCount},SelectionService2.prototype.onRowSelected=function(event){var rowNode=event.node;this.groupSelectsChildren&&rowNode.group||(rowNode.isSelected()?this.selectedNodes[rowNode.id]=rowNode:this.selectedNodes[rowNode.id]=void 0)},SelectionService2.prototype.syncInRowNode=function(rowNode,oldNode){this.syncInOldRowNode(rowNode,oldNode),this.syncInNewRowNode(rowNode)},SelectionService2.prototype.syncInOldRowNode=function(rowNode,oldNode){if(exists(oldNode)&&rowNode.id!==oldNode.id&&oldNode){var id=oldNode.id;this.selectedNodes[id]==rowNode&&(this.selectedNodes[oldNode.id]=oldNode)}},SelectionService2.prototype.syncInNewRowNode=function(rowNode){exists(this.selectedNodes[rowNode.id])?(rowNode.setSelectedInitialValue(!0),this.selectedNodes[rowNode.id]=rowNode):rowNode.setSelectedInitialValue(!1)},SelectionService2.prototype.reset=function(){this.logger.log("reset"),this.selectedNodes={},this.lastSelectedNode=null},SelectionService2.prototype.getBestCostNodeSelection=function(){if("clientSide"===this.rowModel.getType()){var topLevelNodes=this.rowModel.getTopLevelNodes();if(null!==topLevelNodes){var result=[];return __name(traverse,"traverse"),traverse(topLevelNodes),result}}function traverse(nodes){for(var i=0,l=nodes.length;i<l;i++){var node=nodes[i];if(node.isSelected())result.push(node);else{var maybeGroup=node;maybeGroup.group&&maybeGroup.children&&traverse(maybeGroup.children)}}}},SelectionService2.prototype.setRowModel=function(rowModel){this.rowModel=rowModel},SelectionService2.prototype.isEmpty=function(){var count=0;return iterateObject(this.selectedNodes,function(nodeId,rowNode){rowNode&&count++}),0===count},SelectionService2.prototype.deselectAllRowNodes=function(params){var callback=__name(function(rowNode){return rowNode.selectThisNode(!1,void 0,source)},"callback"),rowModelClientSide="clientSide"===this.rowModel.getType(),source=params.source,justFiltered=params.justFiltered,justCurrentPage=params.justCurrentPage;if(justCurrentPage||justFiltered){if(!rowModelClientSide)return void console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");this.getNodesToSelect(justFiltered,justCurrentPage).forEach(callback)}else iterateObject(this.selectedNodes,function(id,rowNode){rowNode&&callback(rowNode)}),this.reset();rowModelClientSide&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(source);var event={type:Events.EVENT_SELECTION_CHANGED,source};this.eventService.dispatchEvent(event)},SelectionService2.prototype.getNodesToSelect=function(justFiltered,justCurrentPage){var _this=this;if(void 0===justFiltered&&(justFiltered=!1),void 0===justCurrentPage&&(justCurrentPage=!1),"clientSide"!==this.rowModel.getType())throw new Error("selectAll only available when rowModelType='clientSide', ie not "+this.rowModel.getType());var nodes=[];if(justCurrentPage)return this.paginationProxy.forEachNodeOnPage(function(node){if(node.group)if(node.expanded)_this.groupSelectsChildren||nodes.push(node);else{var recursivelyAddChildren_1=__name(function(child){var _a;nodes.push(child),null!==(_a=child.childrenAfterFilter)&&void 0!==_a&&_a.length&&child.childrenAfterFilter.forEach(recursivelyAddChildren_1)},"recursivelyAddChildren_1");recursivelyAddChildren_1(node)}else nodes.push(node)}),nodes;var clientSideRowModel=this.rowModel;return justFiltered?(clientSideRowModel.forEachNodeAfterFilter(function(node){nodes.push(node)}),nodes):(clientSideRowModel.forEachNode(function(node){nodes.push(node)}),nodes)},SelectionService2.prototype.selectAllRowNodes=function(params){if("clientSide"!==this.rowModel.getType())throw new Error("selectAll only available when rowModelType='clientSide', ie not "+this.rowModel.getType());var source=params.source,justFiltered=params.justFiltered,justCurrentPage=params.justCurrentPage,callback=__name(function(rowNode){return rowNode.selectThisNode(!0,void 0,source)},"callback");this.getNodesToSelect(justFiltered,justCurrentPage).forEach(callback),"clientSide"===this.rowModel.getType()&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(source);var event={type:Events.EVENT_SELECTION_CHANGED,source};this.eventService.dispatchEvent(event)},__decorate$M([Autowired("rowModel")],SelectionService2.prototype,"rowModel",void 0),__decorate$M([Autowired("paginationProxy")],SelectionService2.prototype,"paginationProxy",void 0),__decorate$M([(paramIndex=0,decorator=Qualifier("loggerFactory"),function(target,key){decorator(target,key,paramIndex)})],SelectionService2.prototype,"setBeans",null),__decorate$M([PostConstruct],SelectionService2.prototype,"init",null),SelectionService2=__decorate$M([Bean("selectionService")],SelectionService2);var paramIndex,decorator}(BeanStub),__decorate$L=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ColumnApi=function(){function ColumnApi2(){}return __name(ColumnApi2,"ColumnApi"),ColumnApi2.prototype.sizeColumnsToFit=function(gridWidth){typeof gridWidth>"u"&&console.error("AG Grid: missing parameter to columnApi.sizeColumnsToFit(gridWidth)"),this.columnModel.sizeColumnsToFit(gridWidth,"api")},ColumnApi2.prototype.setColumnGroupOpened=function(group,newValue){this.columnModel.setColumnGroupOpened(group,newValue,"api")},ColumnApi2.prototype.getColumnGroup=function(name,instanceId){return this.columnModel.getColumnGroup(name,instanceId)},ColumnApi2.prototype.getProvidedColumnGroup=function(name){return this.columnModel.getProvidedColumnGroup(name)},ColumnApi2.prototype.getDisplayNameForColumn=function(column,location){return this.columnModel.getDisplayNameForColumn(column,location)||""},ColumnApi2.prototype.getDisplayNameForColumnGroup=function(columnGroup,location){return this.columnModel.getDisplayNameForColumnGroup(columnGroup,location)||""},ColumnApi2.prototype.getColumn=function(key){return this.columnModel.getPrimaryColumn(key)},ColumnApi2.prototype.getColumns=function(){return this.columnModel.getAllPrimaryColumns()},ColumnApi2.prototype.applyColumnState=function(params){return this.columnModel.applyColumnState(params,"api")},ColumnApi2.prototype.getColumnState=function(){return this.columnModel.getColumnState()},ColumnApi2.prototype.resetColumnState=function(){this.columnModel.resetColumnState("api")},ColumnApi2.prototype.getColumnGroupState=function(){return this.columnModel.getColumnGroupState()},ColumnApi2.prototype.setColumnGroupState=function(stateItems){this.columnModel.setColumnGroupState(stateItems,"api")},ColumnApi2.prototype.resetColumnGroupState=function(){this.columnModel.resetColumnGroupState("api")},ColumnApi2.prototype.isPinning=function(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()},ColumnApi2.prototype.isPinningLeft=function(){return this.columnModel.isPinningLeft()},ColumnApi2.prototype.isPinningRight=function(){return this.columnModel.isPinningRight()},ColumnApi2.prototype.getDisplayedColAfter=function(col){return this.columnModel.getDisplayedColAfter(col)},ColumnApi2.prototype.getDisplayedColBefore=function(col){return this.columnModel.getDisplayedColBefore(col)},ColumnApi2.prototype.setColumnVisible=function(key,visible){this.columnModel.setColumnVisible(key,visible,"api")},ColumnApi2.prototype.setColumnsVisible=function(keys2,visible){this.columnModel.setColumnsVisible(keys2,visible,"api")},ColumnApi2.prototype.setColumnPinned=function(key,pinned){this.columnModel.setColumnPinned(key,pinned,"api")},ColumnApi2.prototype.setColumnsPinned=function(keys2,pinned){this.columnModel.setColumnsPinned(keys2,pinned,"api")},ColumnApi2.prototype.getAllGridColumns=function(){return this.columnModel.getAllGridColumns()},ColumnApi2.prototype.getDisplayedLeftColumns=function(){return this.columnModel.getDisplayedLeftColumns()},ColumnApi2.prototype.getDisplayedCenterColumns=function(){return this.columnModel.getDisplayedCenterColumns()},ColumnApi2.prototype.getDisplayedRightColumns=function(){return this.columnModel.getDisplayedRightColumns()},ColumnApi2.prototype.getAllDisplayedColumns=function(){return this.columnModel.getAllDisplayedColumns()},ColumnApi2.prototype.getAllDisplayedVirtualColumns=function(){return this.columnModel.getViewportColumns()},ColumnApi2.prototype.moveColumn=function(key,toIndex){this.columnModel.moveColumn(key,toIndex,"api")},ColumnApi2.prototype.moveColumnByIndex=function(fromIndex,toIndex){this.columnModel.moveColumnByIndex(fromIndex,toIndex,"api")},ColumnApi2.prototype.moveColumns=function(columnsToMoveKeys,toIndex){this.columnModel.moveColumns(columnsToMoveKeys,toIndex,"api")},ColumnApi2.prototype.moveRowGroupColumn=function(fromIndex,toIndex){this.columnModel.moveRowGroupColumn(fromIndex,toIndex)},ColumnApi2.prototype.setColumnAggFunc=function(key,aggFunc){this.columnModel.setColumnAggFunc(key,aggFunc)},ColumnApi2.prototype.setColumnWidth=function(key,newWidth,finished,source){void 0===finished&&(finished=!0),this.columnModel.setColumnWidths([{key,newWidth}],!1,finished,source)},ColumnApi2.prototype.setColumnWidths=function(columnWidths,finished,source){void 0===finished&&(finished=!0),this.columnModel.setColumnWidths(columnWidths,!1,finished,source)},ColumnApi2.prototype.setPivotMode=function(pivotMode){this.columnModel.setPivotMode(pivotMode)},ColumnApi2.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},ColumnApi2.prototype.getPivotResultColumn=function(pivotKeys,valueColKey){return this.columnModel.getSecondaryPivotColumn(pivotKeys,valueColKey)},ColumnApi2.prototype.setValueColumns=function(colKeys){this.columnModel.setValueColumns(colKeys,"api")},ColumnApi2.prototype.getValueColumns=function(){return this.columnModel.getValueColumns()},ColumnApi2.prototype.removeValueColumn=function(colKey){this.columnModel.removeValueColumn(colKey,"api")},ColumnApi2.prototype.removeValueColumns=function(colKeys){this.columnModel.removeValueColumns(colKeys,"api")},ColumnApi2.prototype.addValueColumn=function(colKey){this.columnModel.addValueColumn(colKey,"api")},ColumnApi2.prototype.addValueColumns=function(colKeys){this.columnModel.addValueColumns(colKeys,"api")},ColumnApi2.prototype.setRowGroupColumns=function(colKeys){this.columnModel.setRowGroupColumns(colKeys,"api")},ColumnApi2.prototype.removeRowGroupColumn=function(colKey){this.columnModel.removeRowGroupColumn(colKey,"api")},ColumnApi2.prototype.removeRowGroupColumns=function(colKeys){this.columnModel.removeRowGroupColumns(colKeys,"api")},ColumnApi2.prototype.addRowGroupColumn=function(colKey){this.columnModel.addRowGroupColumn(colKey,"api")},ColumnApi2.prototype.addRowGroupColumns=function(colKeys){this.columnModel.addRowGroupColumns(colKeys,"api")},ColumnApi2.prototype.getRowGroupColumns=function(){return this.columnModel.getRowGroupColumns()},ColumnApi2.prototype.setPivotColumns=function(colKeys){this.columnModel.setPivotColumns(colKeys,"api")},ColumnApi2.prototype.removePivotColumn=function(colKey){this.columnModel.removePivotColumn(colKey,"api")},ColumnApi2.prototype.removePivotColumns=function(colKeys){this.columnModel.removePivotColumns(colKeys,"api")},ColumnApi2.prototype.addPivotColumn=function(colKey){this.columnModel.addPivotColumn(colKey,"api")},ColumnApi2.prototype.addPivotColumns=function(colKeys){this.columnModel.addPivotColumns(colKeys,"api")},ColumnApi2.prototype.getPivotColumns=function(){return this.columnModel.getPivotColumns()},ColumnApi2.prototype.getLeftDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeLeft()},ColumnApi2.prototype.getCenterDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeCentre()},ColumnApi2.prototype.getRightDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeRight()},ColumnApi2.prototype.getAllDisplayedColumnGroups=function(){return this.columnModel.getAllDisplayedTrees()},ColumnApi2.prototype.autoSizeColumn=function(key,skipHeader){return this.columnModel.autoSizeColumn(key,skipHeader,"api")},ColumnApi2.prototype.autoSizeColumns=function(keys2,skipHeader){this.columnModel.autoSizeColumns({columns:keys2,skipHeader})},ColumnApi2.prototype.autoSizeAllColumns=function(skipHeader){this.columnModel.autoSizeAllColumns(skipHeader,"api")},ColumnApi2.prototype.setPivotResultColumns=function(colDefs){this.columnModel.setSecondaryColumns(colDefs,"api")},ColumnApi2.prototype.getPivotResultColumns=function(){return this.columnModel.getSecondaryColumns()},ColumnApi2.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(_.removeAllReferences.bind(window,this,"Column API"),100)},ColumnApi2.prototype.getAllColumns=function(){return logDeprecation("28.0","getAllColumns","getColumns"),this.getColumns()},ColumnApi2.prototype.getOriginalColumnGroup=function(name){return logDeprecation("27.0","getOriginalColumnGroup","getProvidedColumnGroup"),this.columnModel.getProvidedColumnGroup(name)},ColumnApi2.prototype.getPrimaryColumns=function(){return logDeprecation("28.0","getPrimaryColumns","getColumns"),this.getColumns()},ColumnApi2.prototype.getSecondaryColumns=function(){return logDeprecation("28.0","getSecondaryColumns","getPivotResultColumns"),this.getPivotResultColumns()},ColumnApi2.prototype.setSecondaryColumns=function(colDefs){logDeprecation("28.0","setSecondaryColumns","setPivotResultColumns"),this.setPivotResultColumns(colDefs)},ColumnApi2.prototype.getSecondaryPivotColumn=function(pivotKeys,valueColKey){return logDeprecation("28.0","getSecondaryPivotColumn","getPivotResultColumn"),this.getPivotResultColumn(pivotKeys,valueColKey)},__decorate$L([Autowired("columnModel")],ColumnApi2.prototype,"columnModel",void 0),__decorate$L([PreDestroy],ColumnApi2.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),ColumnApi2=__decorate$L([Bean("columnApi")],ColumnApi2)}(),__extends$J=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$K=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ValueService=function(_super){function ValueService2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.initialised=!1,_this}return __extends$J(ValueService2,_super),__name(ValueService2,"ValueService"),ValueService2.prototype.init=function(){var _this=this;this.cellExpressions=this.gridOptionsService.is("enableCellExpressions"),this.isTreeData=this.gridOptionsService.is("treeData"),this.initialised=!0,this.eventService.addEventListener(Events.EVENT_CELL_VALUE_CHANGED,function(event){return _this.callColumnCellValueChangedHandler(event)},this.gridOptionsService.useAsyncEvents()),this.addManagedPropertyListener("treeData",function(propChange){return _this.isTreeData=propChange.currentValue})},ValueService2.prototype.getValue=function(column,rowNode,forFilter,ignoreAggData){if(void 0===forFilter&&(forFilter=!1),void 0===ignoreAggData&&(ignoreAggData=!1),this.initialised||this.init(),rowNode){var result,colDef=column.getColDef(),field=colDef.field,colId=column.getColId(),data=rowNode.data,groupDataExists=rowNode.groupData&&void 0!==rowNode.groupData[colId],aggDataExists=!ignoreAggData&&rowNode.aggData&&void 0!==rowNode.aggData[colId];if(forFilter&&colDef.filterValueGetter?result=this.executeFilterValueGetter(colDef.filterValueGetter,data,column,rowNode):this.isTreeData&&aggDataExists?result=rowNode.aggData[colId]:this.isTreeData&&colDef.valueGetter?result=this.executeValueGetter(colDef.valueGetter,data,column,rowNode):this.isTreeData&&field&&data?result=getValueUsingField(data,field,column.isFieldContainsDots()):groupDataExists?result=rowNode.groupData[colId]:aggDataExists?result=rowNode.aggData[colId]:colDef.valueGetter?result=this.executeValueGetter(colDef.valueGetter,data,column,rowNode):field&&data&&(result=getValueUsingField(data,field,column.isFieldContainsDots())),this.cellExpressions&&"string"==typeof result&&0===result.indexOf("=")){var cellValueGetter=result.substring(1);result=this.executeValueGetter(cellValueGetter,data,column,rowNode)}if(null==result){var openedGroup=this.getOpenedGroup(rowNode,column);if(null!=openedGroup)return openedGroup}return result}},ValueService2.prototype.getOpenedGroup=function(rowNode,column){if(this.gridOptionsService.is("showOpenedGroup")&&column.getColDef().showRowGroup)for(var showRowGroup=column.getColDef().showRowGroup,pointer=rowNode.parent;null!=pointer;){if(pointer.rowGroupColumn&&(!0===showRowGroup||showRowGroup===pointer.rowGroupColumn.getColId()))return pointer.key;pointer=pointer.parent}},ValueService2.prototype.setValue=function(rowNode,colKey,newValue,eventSource){var column=this.columnModel.getPrimaryColumn(colKey);if(!rowNode||!column)return!1;missing(rowNode.data)&&(rowNode.data={});var _a=column.getColDef(),field=_a.field,valueSetter=_a.valueSetter;if(missing(field)&&missing(valueSetter))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;var valueWasDifferent,params={node:rowNode,data:rowNode.data,oldValue:this.getValue(column,rowNode),newValue,colDef:column.getColDef(),column,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};if(params.newValue=newValue,void 0===(valueWasDifferent=exists(valueSetter)?"function"==typeof valueSetter?valueSetter(params):this.expressionService.evaluate(valueSetter,params):this.setValueUsingField(rowNode.data,field,newValue,column.isFieldContainsDots()))&&(valueWasDifferent=!0),!valueWasDifferent)return!1;rowNode.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),params.newValue=this.getValue(column,rowNode);var event={type:Events.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:rowNode.rowIndex,rowPinned:rowNode.rowPinned,column:params.column,api:params.api,columnApi:params.columnApi,colDef:params.colDef,context:params.context,data:rowNode.data,node:rowNode,oldValue:params.oldValue,newValue:params.newValue,value:params.newValue,source:eventSource};return this.eventService.dispatchEvent(event),!0},ValueService2.prototype.callColumnCellValueChangedHandler=function(event){var onCellValueChanged=event.colDef.onCellValueChanged;"function"==typeof onCellValueChanged&&onCellValueChanged({node:event.node,data:event.data,oldValue:event.oldValue,newValue:event.newValue,colDef:event.colDef,column:event.column,api:event.api,columnApi:event.columnApi,context:event.context})},ValueService2.prototype.setValueUsingField=function(data,field,newValue,isFieldContainsDots){if(!field)return!1;var valuesAreSame=!1;if(isFieldContainsDots)for(var fieldPieces=field.split("."),currentObject=data;fieldPieces.length>0&&currentObject;){var fieldPiece=fieldPieces.shift();0===fieldPieces.length?(valuesAreSame=currentObject[fieldPiece]==newValue)||(currentObject[fieldPiece]=newValue):currentObject=currentObject[fieldPiece]}else(valuesAreSame=data[field]==newValue)||(data[field]=newValue);return!valuesAreSame},ValueService2.prototype.executeFilterValueGetter=function(valueGetter,data,column,rowNode){var params={data,node:rowNode,column,colDef:column.getColDef(),api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,getValue:this.getValueCallback.bind(this,rowNode)};return"function"==typeof valueGetter?valueGetter(params):this.expressionService.evaluate(valueGetter,params)},ValueService2.prototype.executeValueGetter=function(valueGetter,data,column,rowNode){var colId=column.getColId(),valueFromCache=this.valueCache.getValue(rowNode,colId);if(void 0!==valueFromCache)return valueFromCache;var result,params={data,node:rowNode,column,colDef:column.getColDef(),api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,getValue:this.getValueCallback.bind(this,rowNode)};return result="function"==typeof valueGetter?valueGetter(params):this.expressionService.evaluate(valueGetter,params),this.valueCache.setValue(rowNode,colId,result),result},ValueService2.prototype.getValueCallback=function(node,field){var otherColumn=this.columnModel.getPrimaryColumn(field);return otherColumn?this.getValue(otherColumn,node):null},ValueService2.prototype.getKeyForNode=function(col,rowNode){var value=this.getValue(col,rowNode),keyCreator=col.getColDef().keyCreator,result=value;keyCreator&&(result=keyCreator({value,colDef:col.getColDef(),column:col,node:rowNode,data:rowNode.data,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}));return"string"==typeof result||null==result||"[object Object]"===(result=String(result))&&doOnce(function(){console.warn("AG Grid: a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")},"getKeyForNode - warn about [object,object]"),result},__decorate$K([Autowired("expressionService")],ValueService2.prototype,"expressionService",void 0),__decorate$K([Autowired("columnModel")],ValueService2.prototype,"columnModel",void 0),__decorate$K([Autowired("valueCache")],ValueService2.prototype,"valueCache",void 0),__decorate$K([PostConstruct],ValueService2.prototype,"init",null),ValueService2=__decorate$K([Bean("valueService")],ValueService2)}(BeanStub),__extends$I=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$J=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ExpressionService=function(_super){function ExpressionService2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.expressionToFunctionCache={},_this}return __extends$I(ExpressionService2,_super),__name(ExpressionService2,"ExpressionService"),ExpressionService2.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("ExpressionService")},ExpressionService2.prototype.evaluate=function(expression,params){if("string"==typeof expression)return this.evaluateExpression(expression,params);console.error("AG Grid: value should be either a string or a function",expression)},ExpressionService2.prototype.evaluateExpression=function(expression,params){try{return this.createExpressionFunction(expression)(params.value,params.context,params.oldValue,params.newValue,params.value,params.node,params.data,params.colDef,params.rowIndex,params.api,params.columnApi,params.getValue,params.column,params.columnGroup)}catch(e){return console.log("Processing of the expression failed"),console.log("Expression = "+expression),console.log("Params =",params),console.log("Exception = "+e),null}},ExpressionService2.prototype.createExpressionFunction=function(expression){if(this.expressionToFunctionCache[expression])return this.expressionToFunctionCache[expression];var functionBody=this.createFunctionBody(expression),theFunction=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",functionBody);return this.expressionToFunctionCache[expression]=theFunction,theFunction},ExpressionService2.prototype.createFunctionBody=function(expression){return expression.indexOf("return")>=0?expression:"return "+expression+";"},__decorate$J([(paramIndex=0,decorator=Qualifier("loggerFactory"),function(target,key){decorator(target,key,paramIndex)})],ExpressionService2.prototype,"setBeans",null),ExpressionService2=__decorate$J([Bean("expressionService")],ExpressionService2);var paramIndex,decorator}(BeanStub),__extends$H=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),TemplateService=function(_super){function TemplateService2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.templateCache={},_this.waitingCallbacks={},_this}return __extends$H(TemplateService2,_super),__name(TemplateService2,"TemplateService"),TemplateService2.prototype.getTemplate=function(url,callback){var templateFromCache=this.templateCache[url];if(templateFromCache)return templateFromCache;var callbackList=this.waitingCallbacks[url],that=this;if(!callbackList){callbackList=[],this.waitingCallbacks[url]=callbackList;var client=new XMLHttpRequest;client.onload=function(){that.handleHttpResult(this,url)},client.open("GET",url),client.send()}return callback&&callbackList.push(callback),null},TemplateService2.prototype.handleHttpResult=function(httpResult,url){if(200===httpResult.status&&null!==httpResult.response){this.templateCache[url]=httpResult.response||httpResult.responseText;for(var callbacks=this.waitingCallbacks[url],i=0;i<callbacks.length;i++){(0,callbacks[i])()}}else console.warn("AG Grid: Unable to get template error "+httpResult.status+" - "+url)},TemplateService2=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean("templateService")],TemplateService2),TemplateService2}(BeanStub),__extends$G=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$H=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},LoggerFactory=function(_super){function LoggerFactory2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$G(LoggerFactory2,_super),__name(LoggerFactory2,"LoggerFactory"),LoggerFactory2.prototype.setBeans=function(gridOptionsService){this.logging=gridOptionsService.is("debug")},LoggerFactory2.prototype.create=function(name){return new Logger(name,this.isLogging.bind(this))},LoggerFactory2.prototype.isLogging=function(){return this.logging},__decorate$H([(paramIndex=0,decorator=Qualifier("gridOptionsService"),function(target,key){decorator(target,key,paramIndex)})],LoggerFactory2.prototype,"setBeans",null),LoggerFactory2=__decorate$H([Bean("loggerFactory")],LoggerFactory2);var paramIndex,decorator}(BeanStub),Logger=function(){function Logger2(name,isLoggingFunc){this.name=name,this.isLoggingFunc=isLoggingFunc}return __name(Logger2,"Logger"),Logger2.prototype.isLogging=function(){return this.isLoggingFunc()},Logger2.prototype.log=function(message){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+message)},Logger2}(),__extends$F=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$G=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GridCtrl=function(_super){function GridCtrl2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$F(GridCtrl2,_super),__name(GridCtrl2,"GridCtrl"),GridCtrl2.prototype.setComp=function(view,eGridDiv,eGui){var _this=this;this.view=view,this.eGridHostDiv=eGridDiv,this.eGui=eGui,this.dragAndDropService.addDropTarget({getContainer:function(){return _this.eGui},isInterestedIn:function(type){return type===DragSourceType.HeaderCell||type===DragSourceType.ToolPanel},getIconName:function(){return DragAndDropService.ICON_NOT_ALLOWED}}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(eGridDiv),this.createManagedBean(new LayoutFeature(this.view)),this.addRtlSupport(),this.addManagedListener(this,Events.EVENT_KEYBOARD_FOCUS,function(){_this.view.addOrRemoveKeyboardFocusClass(!0)}),this.addManagedListener(this,Events.EVENT_MOUSE_FOCUS,function(){_this.view.addOrRemoveKeyboardFocusClass(!1)});var unsubscribeFromResize=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(function(){return unsubscribeFromResize()}),this.ctrlsService.registerGridCtrl(this)},GridCtrl2.prototype.isDetailGrid=function(){var _a,el=this.focusService.findTabbableParent(this.getGui());return(null===(_a=null==el?void 0:el.getAttribute("row-id"))||void 0===_a?void 0:_a.startsWith("detail"))||!1},GridCtrl2.prototype.showDropZones=function(){return ModuleRegistry.isRegistered(ModuleNames.RowGroupingModule)},GridCtrl2.prototype.showSideBar=function(){return ModuleRegistry.isRegistered(ModuleNames.SideBarModule)},GridCtrl2.prototype.showStatusBar=function(){return ModuleRegistry.isRegistered(ModuleNames.StatusBarModule)},GridCtrl2.prototype.showWatermark=function(){return ModuleRegistry.isRegistered(ModuleNames.EnterpriseCoreModule)},GridCtrl2.prototype.onGridSizeChanged=function(){var event={type:Events.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(event)},GridCtrl2.prototype.addRtlSupport=function(){var cssClass=this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(cssClass)},GridCtrl2.prototype.destroyGridUi=function(){this.view.destroyGridUi()},GridCtrl2.prototype.getGui=function(){return this.eGui},GridCtrl2.prototype.setResizeCursor=function(on){this.view.setCursor(on?"ew-resize":null)},GridCtrl2.prototype.disableUserSelect=function(on){this.view.setUserSelect(on?"none":null)},GridCtrl2.prototype.focusNextInnerContainer=function(backwards){var eDocument=this.gridOptionsService.getDocument(),focusableContainers=this.view.getFocusableContainers(),nextIdx=focusableContainers.findIndex(function(container){return container.contains(eDocument.activeElement)})+(backwards?-1:1);return!(nextIdx<=0||nextIdx>=focusableContainers.length)&&this.focusService.focusInto(focusableContainers[nextIdx])},GridCtrl2.prototype.focusInnerElement=function(fromBottom){var focusableContainers=this.view.getFocusableContainers();if(fromBottom){if(focusableContainers.length>1)return this.focusService.focusInto(last(focusableContainers),!0);var lastColumn=last(this.columnModel.getAllDisplayedColumns());if(this.focusService.focusGridView(lastColumn,!0))return!0}return this.focusService.focusFirstHeader()},GridCtrl2.prototype.forceFocusOutOfContainer=function(up){void 0===up&&(up=!1),this.view.forceFocusOutOfContainer(up)},__decorate$G([Autowired("focusService")],GridCtrl2.prototype,"focusService",void 0),__decorate$G([Autowired("resizeObserverService")],GridCtrl2.prototype,"resizeObserverService",void 0),__decorate$G([Autowired("columnModel")],GridCtrl2.prototype,"columnModel",void 0),__decorate$G([Autowired("ctrlsService")],GridCtrl2.prototype,"ctrlsService",void 0),__decorate$G([Autowired("mouseEventService")],GridCtrl2.prototype,"mouseEventService",void 0),__decorate$G([Autowired("dragAndDropService")],GridCtrl2.prototype,"dragAndDropService",void 0),GridCtrl2}(BeanStub),__extends$E=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$F=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GridComp=function(_super){function GridComp2(eGridDiv){var _this=_super.call(this)||this;return _this.eGridDiv=eGridDiv,_this}return __extends$E(GridComp2,_super),__name(GridComp2,"GridComp"),GridComp2.prototype.postConstruct=function(){var _this=this;this.logger=this.loggerFactory.create("GridComp");var compProxy={destroyGridUi:function(){return _this.destroyBean(_this)},setRtlClass:function(cssClass){return _this.addCssClass(cssClass)},addOrRemoveKeyboardFocusClass:function(addOrRemove){return _this.addOrRemoveCssClass(FocusService.AG_KEYBOARD_FOCUS,addOrRemove)},forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:function(value){_this.getGui().style.userSelect=value??"",_this.getGui().style.webkitUserSelect=value??""},setCursor:function(value){_this.getGui().style.cursor=value??""}};this.ctrl=this.createManagedBean(new GridCtrl);var template=this.createTemplate();this.setTemplate(template),this.ctrl.setComp(compProxy,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:function(){},focusInnerElement:function(fromBottom){return _this.ctrl.focusInnerElement(fromBottom)}})},GridComp2.prototype.insertGridIntoDom=function(){var _this=this,eGui=this.getGui();this.eGridDiv.appendChild(eGui),this.addDestroyFunc(function(){_this.eGridDiv.removeChild(eGui),_this.logger.log("Grid removed from DOM")})},GridComp2.prototype.updateLayoutClasses=function(cssClass,params){var eRootWrapperBodyClassList=this.eRootWrapperBody.classList;eRootWrapperBodyClassList.toggle(LayoutCssClasses.AUTO_HEIGHT,params.autoHeight),eRootWrapperBodyClassList.toggle(LayoutCssClasses.NORMAL,params.normal),eRootWrapperBodyClassList.toggle(LayoutCssClasses.PRINT,params.print),this.addOrRemoveCssClass(LayoutCssClasses.AUTO_HEIGHT,params.autoHeight),this.addOrRemoveCssClass(LayoutCssClasses.NORMAL,params.normal),this.addOrRemoveCssClass(LayoutCssClasses.PRINT,params.print)},GridComp2.prototype.createTemplate=function(){return'<div class="ag-root-wrapper" role="presentation">\n                '+(this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"")+'\n                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">\n                    <ag-grid-body ref="gridBody"></ag-grid-body>\n                    '+(this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"")+"\n                </div>\n                "+(this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"")+"\n                <ag-pagination></ag-pagination>\n                "+(this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"")+"\n            </div>"},GridComp2.prototype.getFocusableElement=function(){return this.eRootWrapperBody},GridComp2.prototype.getFocusableContainers=function(){var focusableContainers=[this.gridBodyComp.getGui()];return this.sideBarComp&&focusableContainers.push(this.sideBarComp.getGui()),focusableContainers.filter(function(el){return isVisible(el)})},__decorate$F([Autowired("loggerFactory")],GridComp2.prototype,"loggerFactory",void 0),__decorate$F([RefSelector("gridBody")],GridComp2.prototype,"gridBodyComp",void 0),__decorate$F([RefSelector("sideBar")],GridComp2.prototype,"sideBarComp",void 0),__decorate$F([RefSelector("rootWrapperBody")],GridComp2.prototype,"eRootWrapperBody",void 0),__decorate$F([PostConstruct],GridComp2.prototype,"postConstruct",null),GridComp2}(TabGuardComp),__extends$D=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$E=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$7=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$6=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$7(arguments[i]));return ar},SortController=function(_super){function SortController2(){return null!==_super&&_super.apply(this,arguments)||this}var SortController_1;return __extends$D(SortController2,_super),__name(SortController2,"SortController"),SortController_1=SortController2,SortController2.prototype.progressSort=function(column,multiSort,source){var nextDirection=this.getNextSortDirection(column);this.setSortForColumn(column,nextDirection,multiSort,source)},SortController2.prototype.setSortForColumn=function(column,sort,multiSort,source){"asc"!==sort&&"desc"!==sort&&(sort=null);var columnsToUpdate=[column];if(this.gridOptionsService.isColumnsSortingCoupledToGroup()&&column.getColDef().showRowGroup){column.getColDef().field||(columnsToUpdate=[]);var rowGroupColumns=this.columnModel.getSourceColumnsForGroupColumn(column),sortableRowGroupColumns=null==rowGroupColumns?void 0:rowGroupColumns.filter(function(col){return col.getColDef().sortable});sortableRowGroupColumns&&(columnsToUpdate=__spread$6(columnsToUpdate,sortableRowGroupColumns))}columnsToUpdate.forEach(function(col){return col.setSort(sort,source)}),(multiSort||this.gridOptionsService.is("alwaysMultiSort"))&&!this.gridOptionsService.is("suppressMultiSort")||this.clearSortBarTheseColumns(columnsToUpdate,source),this.updateSortIndex(column),this.dispatchSortChangedEvents(source)},SortController2.prototype.updateSortIndex=function(lastColToChange){var isCoupled=this.gridOptionsService.isColumnsSortingCoupledToGroup(),groupParent=this.columnModel.getGroupDisplayColumnForGroup(lastColToChange.getId()),lastSortIndexCol=isCoupled&&groupParent||lastColToChange,allSortedCols=this.getIndexableColumnsOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(col){return col.setSortIndex(null)});var allSortedColsWithoutChanges=allSortedCols.filter(function(col){return col!==lastSortIndexCol});(lastSortIndexCol.getSort()?__spread$6(allSortedColsWithoutChanges,[lastSortIndexCol]):allSortedColsWithoutChanges).forEach(function(col,idx){return col.setSortIndex(idx)})},SortController2.prototype.onSortChanged=function(source){this.dispatchSortChangedEvents(source)},SortController2.prototype.isSortActive=function(){var sortedCols=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(function(column){return!!column.getSort()});return sortedCols&&sortedCols.length>0},SortController2.prototype.dispatchSortChangedEvents=function(source){var event={type:Events.EVENT_SORT_CHANGED,source};this.eventService.dispatchEvent(event)},SortController2.prototype.clearSortBarTheseColumns=function(columnsToSkip,source){this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(columnToClear){columnsToSkip.includes(columnToClear)||columnToClear.setSort(void 0,source)})},SortController2.prototype.getNextSortDirection=function(column){var sortingOrder;if(sortingOrder=column.getColDef().sortingOrder?column.getColDef().sortingOrder:this.gridOptionsService.get("sortingOrder")?this.gridOptionsService.get("sortingOrder"):SortController_1.DEFAULT_SORTING_ORDER,!Array.isArray(sortingOrder)||sortingOrder.length<=0)return console.warn("AG Grid: sortingOrder must be an array with at least one element, currently it's "+sortingOrder),null;var currentSort=column.getColDef().field?column.getSort():this.getDisplaySortForColumn(column),result=sortingOrder[0];if("mixed"!==currentSort){var currentIndex=sortingOrder.indexOf(currentSort),notInArray=currentIndex<0,lastItemInArray=currentIndex==sortingOrder.length-1;result=notInArray||lastItemInArray?sortingOrder[0]:sortingOrder[currentIndex+1]}return SortController_1.DEFAULT_SORTING_ORDER.indexOf(result)<0?(console.warn("AG Grid: invalid sort type "+result),null):result},SortController2.prototype.getColumnsOrderedForSort=function(){var allColumnsIncludingAuto=this.columnModel.getPrimaryAndSecondaryAndAutoColumns(),allColsIndexes={};return allColumnsIncludingAuto.forEach(function(col,index){return allColsIndexes[col.getId()]=index}),allColumnsIncludingAuto.sort(function(a,b){var iA=a.getSortIndex(),iB=b.getSortIndex();return null!=iA&&null!=iB?iA-iB:null==iA&&null==iB?allColsIndexes[a.getId()]>allColsIndexes[b.getId()]?1:-1:null==iB?-1:1}),allColumnsIncludingAuto},SortController2.prototype.getIndexableColumnsOrdered=function(){var _this=this;return this.gridOptionsService.isColumnsSortingCoupledToGroup()?this.getColumnsOrderedForSort().filter(function(col){if(col.getColDef().showRowGroup){if(col.getColDef().field&&col.getSort())return!0;var sourceCols=_this.columnModel.getSourceColumnsForGroupColumn(col);return null==sourceCols?void 0:sourceCols.some(function(col2){return!!col2.getSort()})}return!!col.getSort()}):this.getColumnsWithSortingOrdered()},SortController2.prototype.getColumnsWithSortingOrdered=function(){return this.getColumnsOrderedForSort().filter(function(column){return!!column.getSort()})},SortController2.prototype.getSortModel=function(){return this.getColumnsWithSortingOrdered().map(function(column){return{sort:column.getSort(),colId:column.getId()}})},SortController2.prototype.getSortOptions=function(){return this.getColumnsWithSortingOrdered().map(function(column){return{sort:column.getSort(),column}})},SortController2.prototype.canColumnDisplayMixedSort=function(column){var isColumnSortCouplingActive=this.gridOptionsService.isColumnsSortingCoupledToGroup(),isGroupDisplayColumn=!!column.getColDef().showRowGroup;return isColumnSortCouplingActive&&isGroupDisplayColumn},SortController2.prototype.getDisplaySortForColumn=function(column){var linkedColumns=this.columnModel.getSourceColumnsForGroupColumn(column);if(!this.canColumnDisplayMixedSort(column)||null==linkedColumns||!linkedColumns.length)return column.getSort();var sortableColumns=!!column.getColDef().field?__spread$6([column],linkedColumns):linkedColumns,firstSort=sortableColumns[0].getSort();return sortableColumns.every(function(col){return col.getSort()==firstSort})?firstSort:"mixed"},SortController2.prototype.getDisplaySortIndexForColumn=function(column){var _this=this;if(!this.gridOptionsService.isColumnsSortingCoupledToGroup())return this.getColumnsWithSortingOrdered().indexOf(column);var displayColumn=this.columnModel.getGroupDisplayColumnForGroup(column.getId());return displayColumn?column.getSort()?this.getDisplaySortIndexForColumn(displayColumn):null:this.getIndexableColumnsOrdered().filter(function(col){return!_this.columnModel.getGroupDisplayColumnForGroup(col.getId())}).indexOf(column)},SortController2.DEFAULT_SORTING_ORDER=["asc","desc",null],__decorate$E([Autowired("columnModel")],SortController2.prototype,"columnModel",void 0),SortController2=SortController_1=__decorate$E([Bean("sortController")],SortController2)}(BeanStub),__extends$C=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),ColumnHoverService=function(_super){function ColumnHoverService2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$C(ColumnHoverService2,_super),__name(ColumnHoverService2,"ColumnHoverService"),ColumnHoverService2.prototype.setMouseOver=function(columns){this.selectedColumns=columns;var event={type:Events.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(event)},ColumnHoverService2.prototype.clearMouseOver=function(){this.selectedColumns=null;var event={type:Events.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(event)},ColumnHoverService2.prototype.isHovered=function(column){return!!this.selectedColumns&&this.selectedColumns.indexOf(column)>=0},ColumnHoverService2=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean("columnHoverService")],ColumnHoverService2),ColumnHoverService2}(BeanStub),__extends$B=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$C=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ColumnAnimationService=function(_super){function ColumnAnimationService2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.executeNextFuncs=[],_this.executeLaterFuncs=[],_this.active=!1,_this.animationThreadCount=0,_this}return __extends$B(ColumnAnimationService2,_super),__name(ColumnAnimationService2,"ColumnAnimationService"),ColumnAnimationService2.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady(function(p){return _this.gridBodyCtrl=p.gridBodyCtrl})},ColumnAnimationService2.prototype.isActive=function(){return this.active},ColumnAnimationService2.prototype.start=function(){this.active||this.gridOptionsService.is("suppressColumnMoveAnimation")||this.gridOptionsService.is("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)},ColumnAnimationService2.prototype.finish=function(){this.active&&(this.flush(),this.active=!1)},ColumnAnimationService2.prototype.executeNextVMTurn=function(func){this.active?this.executeNextFuncs.push(func):func()},ColumnAnimationService2.prototype.executeLaterVMTurn=function(func){this.active?this.executeLaterFuncs.push(func):func()},ColumnAnimationService2.prototype.ensureAnimationCssClassPresent=function(){var _this=this;this.animationThreadCount++;var animationThreadCountCopy=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(function(){_this.animationThreadCount===animationThreadCountCopy&&_this.gridBodyCtrl.setColumnMovingCss(!1)})},ColumnAnimationService2.prototype.flush=function(){var nowFuncs=this.executeNextFuncs;this.executeNextFuncs=[];var waitFuncs=this.executeLaterFuncs;this.executeLaterFuncs=[],(0!==nowFuncs.length||0!==waitFuncs.length)&&(window.setTimeout(function(){return nowFuncs.forEach(function(func){return func()})},0),window.setTimeout(function(){return waitFuncs.forEach(function(func){return func()})},300))},__decorate$C([Autowired("ctrlsService")],ColumnAnimationService2.prototype,"ctrlsService",void 0),__decorate$C([PostConstruct],ColumnAnimationService2.prototype,"postConstruct",null),ColumnAnimationService2=__decorate$C([Bean("columnAnimationService")],ColumnAnimationService2)}(BeanStub),__extends$A=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$B=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PaginationAutoPageSizeService=function(_super){function PaginationAutoPageSizeService2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$A(PaginationAutoPageSizeService2,_super),__name(PaginationAutoPageSizeService2,"PaginationAutoPageSizeService"),PaginationAutoPageSizeService2.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady(function(p){_this.centerRowContainerCon=p.centerRowContainerCtrl,_this.addManagedListener(_this.eventService,Events.EVENT_BODY_HEIGHT_CHANGED,_this.onBodyHeightChanged.bind(_this)),_this.addManagedListener(_this.eventService,Events.EVENT_SCROLL_VISIBILITY_CHANGED,_this.onScrollVisibilityChanged.bind(_this)),_this.checkPageSize()})},PaginationAutoPageSizeService2.prototype.notActive=function(){return!this.gridOptionsService.is("paginationAutoPageSize")},PaginationAutoPageSizeService2.prototype.onScrollVisibilityChanged=function(){this.checkPageSize()},PaginationAutoPageSizeService2.prototype.onBodyHeightChanged=function(){this.checkPageSize()},PaginationAutoPageSizeService2.prototype.checkPageSize=function(){if(!this.notActive()){var rowHeight=this.gridOptionsService.getRowHeightAsNumber(),bodyHeight=this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();if(bodyHeight>0){var newPageSize=Math.floor(bodyHeight/rowHeight);this.gridOptionsService.set("paginationPageSize",newPageSize)}}},__decorate$B([Autowired("ctrlsService")],PaginationAutoPageSizeService2.prototype,"ctrlsService",void 0),__decorate$B([PostConstruct],PaginationAutoPageSizeService2.prototype,"postConstruct",null),PaginationAutoPageSizeService2=__decorate$B([Bean("paginationAutoPageSizeService")],PaginationAutoPageSizeService2)}(BeanStub),__extends$z=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$A=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ValueCache=function(_super){function ValueCache2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.cacheVersion=0,_this}return __extends$z(ValueCache2,_super),__name(ValueCache2,"ValueCache"),ValueCache2.prototype.init=function(){this.active=this.gridOptionsService.is("valueCache"),this.neverExpires=this.gridOptionsService.is("valueCacheNeverExpires")},ValueCache2.prototype.onDataChanged=function(){this.neverExpires||this.expire()},ValueCache2.prototype.expire=function(){this.cacheVersion++},ValueCache2.prototype.setValue=function(rowNode,colId,value){this.active&&(rowNode.__cacheVersion!==this.cacheVersion&&(rowNode.__cacheVersion=this.cacheVersion,rowNode.__cacheData={}),rowNode.__cacheData[colId]=value)},ValueCache2.prototype.getValue=function(rowNode,colId){if(this.active&&rowNode.__cacheVersion===this.cacheVersion)return rowNode.__cacheData[colId]},__decorate$A([PostConstruct],ValueCache2.prototype,"init",null),ValueCache2=__decorate$A([Bean("valueCache")],ValueCache2)}(BeanStub),__extends$y=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$z=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ChangeDetectionService=function(_super){function ChangeDetectionService2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$y(ChangeDetectionService2,_super),__name(ChangeDetectionService2,"ChangeDetectionService"),ChangeDetectionService2.prototype.init=function(){"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,Events.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))},ChangeDetectionService2.prototype.onCellValueChanged=function(event){"paste"!==event.source&&this.doChangeDetection(event.node,event.column)},ChangeDetectionService2.prototype.doChangeDetection=function(rowNode,column){if(!this.gridOptionsService.is("suppressChangeDetection")){if(this.clientSideRowModel&&!rowNode.isRowPinned()){var onlyChangedColumns=this.gridOptionsService.is("aggregateOnlyChangedColumns"),changedPath=new ChangedPath(onlyChangedColumns,this.clientSideRowModel.getRootNode());changedPath.addParentNode(rowNode.parent,[column]),this.clientSideRowModel.doAggregate(changedPath)}this.rowRenderer.refreshCells()}},__decorate$z([Autowired("rowModel")],ChangeDetectionService2.prototype,"rowModel",void 0),__decorate$z([Autowired("rowRenderer")],ChangeDetectionService2.prototype,"rowRenderer",void 0),__decorate$z([PostConstruct],ChangeDetectionService2.prototype,"init",null),ChangeDetectionService2=__decorate$z([Bean("changeDetectionService")],ChangeDetectionService2)}(BeanStub),__extends$x=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$y=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgComponentUtils=function(_super){function AgComponentUtils2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$x(AgComponentUtils2,_super),__name(AgComponentUtils2,"AgComponentUtils"),AgComponentUtils2.prototype.adaptFunction=function(propertyName,jsCompFunc){var metadata=this.componentMetadataProvider.retrieve(propertyName);return metadata&&metadata.functionAdapter?metadata.functionAdapter(jsCompFunc):null},AgComponentUtils2.prototype.adaptCellRendererFunction=function(callback){return function(){function Adapter2(){}return __name(Adapter2,"Adapter"),Adapter2.prototype.refresh=function(params){return!1},Adapter2.prototype.getGui=function(){return this.eGui},Adapter2.prototype.init=function(params){var callbackResult=callback(params),type=typeof callbackResult;this.eGui="string"!==type&&"number"!==type&&"boolean"!==type?null!=callbackResult?callbackResult:loadTemplate("<span></span>"):loadTemplate("<span>"+callbackResult+"</span>")},Adapter2}()},AgComponentUtils2.prototype.doesImplementIComponent=function(candidate){return!!candidate&&(candidate.prototype&&"getGui"in candidate.prototype)},__decorate$y([Autowired("componentMetadataProvider")],AgComponentUtils2.prototype,"componentMetadataProvider",void 0),AgComponentUtils2=__decorate$y([Bean("agComponentUtils")],AgComponentUtils2)}(BeanStub),__extends$w=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$x=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ComponentMetadataProvider=function(_super){function ComponentMetadataProvider2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$w(ComponentMetadataProvider2,_super),__name(ComponentMetadataProvider2,"ComponentMetadataProvider"),ComponentMetadataProvider2.prototype.postConstruct=function(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"]},floatingFilterWrapperComponent:{mandatoryMethodList:[],optionalMethodList:[]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},filterComponent:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]}}},ComponentMetadataProvider2.prototype.retrieve=function(name){return this.componentMetaData[name]},__decorate$x([Autowired("agComponentUtils")],ComponentMetadataProvider2.prototype,"agComponentUtils",void 0),__decorate$x([PostConstruct],ComponentMetadataProvider2.prototype,"postConstruct",null),ComponentMetadataProvider2=__decorate$x([Bean("componentMetadataProvider")],ComponentMetadataProvider2)}(BeanStub),__extends$v=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$w=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$6=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},HARD_CODED_SIZES={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:20,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:56,headerCellMinWidth:48,listItemHeight:32,rowHeight:48,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:32,headerCellMinWidth:24,listItemHeight:24,rowHeight:28,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:48,headerCellMinWidth:36,listItemHeight:24,rowHeight:42,chartMenuPanelWidth:240}},SASS_PROPERTY_BUILDER={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},Environment=function(_super){function Environment2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.calculatedSizes={},_this}return __extends$v(Environment2,_super),__name(Environment2,"Environment"),Environment2.prototype.postConstruct=function(){var _a,_this=this,el=null!==(_a=this.getTheme().el)&&void 0!==_a?_a:this.eGridDiv;this.mutationObserver=new MutationObserver(function(){_this.calculatedSizes={},_this.fireGridStylesChangedEvent()}),this.mutationObserver.observe(el||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})},Environment2.prototype.fireGridStylesChangedEvent=function(){var event={type:Events.EVENT_GRID_STYLES_CHANGED};this.eventService.dispatchEvent(event)},Environment2.prototype.getSassVariable=function(key){var _a=this.getTheme(),themeFamily=_a.themeFamily,el=_a.el;if(themeFamily&&0===themeFamily.indexOf("ag-theme"))return this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[themeFamily]||(this.calculatedSizes[themeFamily]={}),this.calculatedSizes[themeFamily][key]??(this.calculatedSizes[themeFamily][key]=this.calculateValueForSassProperty(key,themeFamily,el),this.calculatedSizes[themeFamily][key])},Environment2.prototype.calculateValueForSassProperty=function(property,theme,themeElement){var _a,useTheme="ag-theme-"+(theme.match("material")?"material":theme.match("balham")?"balham":theme.match("alpine")?"alpine":"custom"),defaultValue=HARD_CODED_SIZES[useTheme][property],eDocument=this.gridOptionsService.getDocument();if(themeElement||(themeElement=this.eGridDiv),!SASS_PROPERTY_BUILDER[property])return defaultValue;var classList=SASS_PROPERTY_BUILDER[property],div=eDocument.createElement("div"),classesFromThemeElement=Array.from(themeElement.classList);(_a=div.classList).add.apply(_a,function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$6(arguments[i]));return ar}([theme],classesFromThemeElement)),div.style.position="absolute";var el=classList.reduce(function(prevEl,currentClass){var currentDiv=eDocument.createElement("div");return currentDiv.style.position="static",currentDiv.classList.add(currentClass),prevEl.appendChild(currentDiv),currentDiv},div),calculatedValue=0;if(eDocument.body){eDocument.body.appendChild(div);var sizeName=-1!==property.toLowerCase().indexOf("height")?"height":"width";calculatedValue=parseInt(window.getComputedStyle(el)[sizeName],10),eDocument.body.removeChild(div)}return calculatedValue||defaultValue},Environment2.prototype.isThemeDark=function(){var theme=this.getTheme().theme;return!!theme&&theme.indexOf("dark")>=0},Environment2.prototype.chartMenuPanelWidth=function(){return this.getSassVariable("chartMenuPanelWidth")},Environment2.prototype.getTheme=function(){for(var reg=/\bag-(material|(?:theme-([\w\-]*)))\b/g,el=this.eGridDiv,themeMatch=null,allThemes=[];el;){if(themeMatch=reg.exec(el.className)){var matched=el.className.match(reg);matched&&(allThemes=matched);break}el=el.parentElement||void 0}if(!themeMatch)return{allThemes};var theme=themeMatch[0];return{theme,el,themeFamily:theme.replace(/-dark$/,""),allThemes}},Environment2.prototype.getFromTheme=function(defaultValue,sassVariableName){var _a;return null!==(_a=this.getSassVariable(sassVariableName))&&void 0!==_a?_a:defaultValue},Environment2.prototype.getDefaultRowHeight=function(){return this.getFromTheme(25,"rowHeight")},Environment2.prototype.getListItemHeight=function(){return this.getFromTheme(20,"listItemHeight")},Environment2.prototype.setRowHeightVariable=function(height){var newRowHeight=height+"px";this.eGridDiv.style.getPropertyValue("--ag-line-height").trim()!=newRowHeight&&this.eGridDiv.style.setProperty("--ag-line-height",newRowHeight)},Environment2.prototype.getMinColWidth=function(){var measuredMin=this.getFromTheme(null,"headerCellMinWidth");return exists(measuredMin)?Math.max(measuredMin,10):10},Environment2.prototype.destroy=function(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),_super.prototype.destroy.call(this)},__decorate$w([Autowired("eGridDiv")],Environment2.prototype,"eGridDiv",void 0),__decorate$w([PostConstruct],Environment2.prototype,"postConstruct",null),Environment2=__decorate$w([Bean("environment")],Environment2)}(BeanStub),__extends$u=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$v=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowContainerHeightService=function(_super){function RowContainerHeightService2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.scrollY=0,_this.uiBodyHeight=0,_this}return __extends$u(RowContainerHeightService2,_super),__name(RowContainerHeightService2,"RowContainerHeightService"),RowContainerHeightService2.prototype.agWire=function(loggerFactory){this.logger=loggerFactory.create("RowContainerHeightService")},RowContainerHeightService2.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=getMaxDivHeight(),this.logger.log("maxDivHeight = "+this.maxDivHeight)},RowContainerHeightService2.prototype.isStretching=function(){return this.stretching},RowContainerHeightService2.prototype.getDivStretchOffset=function(){return this.divStretchOffset},RowContainerHeightService2.prototype.updateOffset=function(){if(this.stretching){var newScrollY=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,newBodyHeight=this.getUiBodyHeight();(newScrollY!==this.scrollY||newBodyHeight!==this.uiBodyHeight)&&(this.scrollY=newScrollY,this.uiBodyHeight=newBodyHeight,this.calculateOffset())}},RowContainerHeightService2.prototype.calculateOffset=function(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;var scrollPercent=this.scrollY/this.maxScrollY,divStretchOffset=scrollPercent*this.pixelsToShave;this.logger.log("Div Stretch Offset = "+divStretchOffset+" ("+this.pixelsToShave+" * "+scrollPercent+")"),this.setDivStretchOffset(divStretchOffset)},RowContainerHeightService2.prototype.setUiContainerHeight=function(height){height!==this.uiContainerHeight&&(this.uiContainerHeight=height,this.eventService.dispatchEvent({type:Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))},RowContainerHeightService2.prototype.clearOffset=function(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)},RowContainerHeightService2.prototype.setDivStretchOffset=function(newOffset){var newOffsetFloor="number"==typeof newOffset?Math.floor(newOffset):null;this.divStretchOffset!==newOffsetFloor&&(this.divStretchOffset=newOffsetFloor,this.eventService.dispatchEvent({type:Events.EVENT_HEIGHT_SCALE_CHANGED}))},RowContainerHeightService2.prototype.setModelHeight=function(modelHeight){this.modelHeight=modelHeight,this.stretching=null!=modelHeight&&this.maxDivHeight>0&&modelHeight>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()},RowContainerHeightService2.prototype.getUiContainerHeight=function(){return this.uiContainerHeight},RowContainerHeightService2.prototype.getRealPixelPosition=function(modelPixel){return modelPixel-this.divStretchOffset},RowContainerHeightService2.prototype.getUiBodyHeight=function(){var pos=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return pos.bottom-pos.top},RowContainerHeightService2.prototype.getScrollPositionForPixel=function(rowTop){if(this.pixelsToShave<=0)return rowTop;var scrollPercent=rowTop/(this.modelHeight-this.getUiBodyHeight());return this.maxScrollY*scrollPercent},__decorate$v([Autowired("ctrlsService")],RowContainerHeightService2.prototype,"ctrlsService",void 0),__decorate$v([(paramIndex=0,decorator=Qualifier("loggerFactory"),function(target,key){decorator(target,key,paramIndex)})],RowContainerHeightService2.prototype,"agWire",null),__decorate$v([PostConstruct],RowContainerHeightService2.prototype,"postConstruct",null),RowContainerHeightService2=__decorate$v([Bean("rowContainerHeightService")],RowContainerHeightService2);var paramIndex,decorator}(BeanStub),__extends$t=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$u=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SelectableService=function(_super){function SelectableService2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$t(SelectableService2,_super),__name(SelectableService2,"SelectableService"),SelectableService2.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsService.is("groupSelectsChildren"),this.isRowSelectableFunc=this.gridOptionsService.get("isRowSelectable")},SelectableService2.prototype.updateSelectableAfterGrouping=function(rowNode){if(this.isRowSelectableFunc){var nextChildrenFunc=__name(function(node){return node.childrenAfterGroup},"nextChildrenFunc");this.recurseDown(rowNode.childrenAfterGroup,nextChildrenFunc)}},SelectableService2.prototype.recurseDown=function(children,nextChildrenFunc){var _this=this;children&&children.forEach(function(child){if(child.group){var rowSelectable;if(child.hasChildren()&&_this.recurseDown(nextChildrenFunc(child),nextChildrenFunc),_this.groupSelectsChildren)rowSelectable=exists((nextChildrenFunc(child)||[]).find(function(rowNode){return!0===rowNode.selectable}));else rowSelectable=!!_this.isRowSelectableFunc&&_this.isRowSelectableFunc(child);child.setRowSelectable(rowSelectable)}})},__decorate$u([PostConstruct],SelectableService2.prototype,"init",null),SelectableService2=__decorate$u([Bean("selectableService")],SelectableService2)}(BeanStub),__extends$s=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$t=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PaginationComp=function(_super){function PaginationComp2(){var _this=_super.call(this)||this;return _this.previousAndFirstButtonsDisabled=!1,_this.nextButtonDisabled=!1,_this.lastButtonDisabled=!1,_this.areListenersSetup=!1,_this}return __extends$s(PaginationComp2,_super),__name(PaginationComp2,"PaginationComp"),PaginationComp2.prototype.postConstruct=function(){var isRtl=this.gridOptionsService.is("enableRtl");this.setTemplate(this.getTemplate()),this.btFirst.insertAdjacentElement("afterbegin",createIconNoSpan(isRtl?"last":"first",this.gridOptionsService)),this.btPrevious.insertAdjacentElement("afterbegin",createIconNoSpan(isRtl?"next":"previous",this.gridOptionsService)),this.btNext.insertAdjacentElement("afterbegin",createIconNoSpan(isRtl?"previous":"next",this.gridOptionsService)),this.btLast.insertAdjacentElement("afterbegin",createIconNoSpan(isRtl?"first":"last",this.gridOptionsService)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.onPaginationChanged()},PaginationComp2.prototype.onPaginationChanged=function(){var paginationPanelEnabled=this.gridOptionsService.is("pagination")&&!this.gridOptionsService.is("suppressPaginationPanel");this.setDisplayed(paginationPanelEnabled),paginationPanelEnabled&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels())},PaginationComp2.prototype.setupListeners=function(){var _this=this;this.areListenersSetup||(this.addManagedListener(this.eventService,Events.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(function(item){var el=item.el,fn=item.fn;_this.addManagedListener(el,"click",fn),_this.addManagedListener(el,"keydown",function(e){(e.key===KeyCode.ENTER||e.key===KeyCode.SPACE)&&(e.preventDefault(),fn())})}),this.areListenersSetup=!0)},PaginationComp2.prototype.onBtFirst=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()},PaginationComp2.prototype.setCurrentPageLabel=function(){var pagesExist=this.paginationProxy.getTotalPages()>0,currentPage=this.paginationProxy.getCurrentPage(),toDisplay=pagesExist?currentPage+1:0;this.lbCurrent.innerHTML=this.formatNumber(toDisplay)},PaginationComp2.prototype.formatNumber=function(value){var userFunc=this.gridOptionsService.getCallback("paginationNumberFormatter");if(userFunc)return userFunc({value});var localeTextFunc=this.localeService.getLocaleTextFunc();return formatNumberCommas(value,localeTextFunc("thousandSeparator",","),localeTextFunc("decimalSeparator","."))},PaginationComp2.prototype.getTemplate=function(){var localeTextFunc=this.localeService.getLocaleTextFunc(),strPage=localeTextFunc("page","Page"),strTo=localeTextFunc("to","to"),strOf=localeTextFunc("of","of"),strFirst=localeTextFunc("firstPage","First Page"),strPrevious=localeTextFunc("previousPage","Previous Page"),strNext=localeTextFunc("nextPage","Next Page"),strLast=localeTextFunc("lastPage","Last Page"),compId=this.getCompId();return'<div class="ag-paging-panel ag-unselectable" id="ag-'+compId+'">\n                <span class="ag-paging-row-summary-panel" role="status">\n                    <span id="ag-'+compId+'-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-'+compId+'-to">'+strTo+'</span>\n                    <span id="ag-'+compId+'-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-'+compId+'-of">'+strOf+'</span>\n                    <span id="ag-'+compId+'-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div ref="btFirst" class="ag-paging-button" role="button" aria-label="'+strFirst+'"></div>\n                    <div ref="btPrevious" class="ag-paging-button" role="button" aria-label="'+strPrevious+'"></div>\n                    <span class="ag-paging-description" role="status">\n                        <span id="ag-'+compId+'-start-page">'+strPage+'</span>\n                        <span id="ag-'+compId+'-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-'+compId+'-of-page">'+strOf+'</span>\n                        <span id="ag-'+compId+'-of-page-number" ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div ref="btNext" class="ag-paging-button" role="button" aria-label="'+strNext+'"></div>\n                    <div ref="btLast" class="ag-paging-button" role="button" aria-label="'+strLast+'"></div>\n                </span>\n            </div>'},PaginationComp2.prototype.onBtNext=function(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()},PaginationComp2.prototype.onBtPrevious=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()},PaginationComp2.prototype.onBtLast=function(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()},PaginationComp2.prototype.enableOrDisableButtons=function(){var currentPage=this.paginationProxy.getCurrentPage(),maxRowFound=this.paginationProxy.isLastPageFound(),totalPages=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=0===currentPage,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);var zeroPagesToDisplay=this.isZeroPagesToDisplay(),onLastPage=maxRowFound&&currentPage===totalPages-1;this.nextButtonDisabled=onLastPage||zeroPagesToDisplay,this.lastButtonDisabled=!maxRowFound||zeroPagesToDisplay||currentPage===totalPages-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)},PaginationComp2.prototype.toggleButtonDisabled=function(button,disabled){setAriaDisabled(button,disabled),button.classList.toggle("ag-disabled",disabled),disabled?button.removeAttribute("tabindex"):button.setAttribute("tabindex","0")},PaginationComp2.prototype.updateRowLabels=function(){var startRow,endRow,currentPage=this.paginationProxy.getCurrentPage(),pageSize=this.paginationProxy.getPageSize(),maxRowFound=this.paginationProxy.isLastPageFound(),rowCount=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;this.isZeroPagesToDisplay()?startRow=endRow=0:(endRow=(startRow=pageSize*currentPage+1)+pageSize-1,maxRowFound&&endRow>rowCount&&(endRow=rowCount)),this.lbFirstRowOnPage.innerHTML=this.formatNumber(startRow),this.rowNodeBlockLoader.isLoading()?this.lbLastRowOnPage.innerHTML="?":this.lbLastRowOnPage.innerHTML=this.formatNumber(endRow)},PaginationComp2.prototype.isZeroPagesToDisplay=function(){var maxRowFound=this.paginationProxy.isLastPageFound(),totalPages=this.paginationProxy.getTotalPages();return maxRowFound&&0===totalPages},PaginationComp2.prototype.setTotalLabels=function(){var lastPageFound=this.paginationProxy.isLastPageFound(),totalPages=this.paginationProxy.getTotalPages(),rowCount=lastPageFound?this.paginationProxy.getMasterRowCount():null;if(1===rowCount){var firstRow=this.paginationProxy.getRow(0);if(firstRow&&firstRow.group&&!(firstRow.groupData||firstRow.aggData))return void this.setTotalLabelsToZero()}if(lastPageFound)this.lbTotal.innerHTML=this.formatNumber(totalPages),this.lbRecordCount.innerHTML=this.formatNumber(rowCount);else{var moreText=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=moreText,this.lbRecordCount.innerHTML=moreText}},PaginationComp2.prototype.setTotalLabelsToZero=function(){this.lbFirstRowOnPage.innerHTML=this.formatNumber(0),this.lbCurrent.innerHTML=this.formatNumber(0),this.lbLastRowOnPage.innerHTML=this.formatNumber(0),this.lbTotal.innerHTML=this.formatNumber(0),this.lbRecordCount.innerHTML=this.formatNumber(0)},__decorate$t([Autowired("paginationProxy")],PaginationComp2.prototype,"paginationProxy",void 0),__decorate$t([Autowired("rowNodeBlockLoader")],PaginationComp2.prototype,"rowNodeBlockLoader",void 0),__decorate$t([RefSelector("btFirst")],PaginationComp2.prototype,"btFirst",void 0),__decorate$t([RefSelector("btPrevious")],PaginationComp2.prototype,"btPrevious",void 0),__decorate$t([RefSelector("btNext")],PaginationComp2.prototype,"btNext",void 0),__decorate$t([RefSelector("btLast")],PaginationComp2.prototype,"btLast",void 0),__decorate$t([RefSelector("lbRecordCount")],PaginationComp2.prototype,"lbRecordCount",void 0),__decorate$t([RefSelector("lbFirstRowOnPage")],PaginationComp2.prototype,"lbFirstRowOnPage",void 0),__decorate$t([RefSelector("lbLastRowOnPage")],PaginationComp2.prototype,"lbLastRowOnPage",void 0),__decorate$t([RefSelector("lbCurrent")],PaginationComp2.prototype,"lbCurrent",void 0),__decorate$t([RefSelector("lbTotal")],PaginationComp2.prototype,"lbTotal",void 0),__decorate$t([PostConstruct],PaginationComp2.prototype,"postConstruct",null),PaginationComp2}(Component),__extends$r=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$s=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};(LoadingType2=LoadingType||(LoadingType={}))[LoadingType2.Loading=0]="Loading",LoadingType2[LoadingType2.NoRows=1]="NoRows";var OverlayWrapperComponent=function(_super){function OverlayWrapperComponent2(){var _this=_super.call(this,OverlayWrapperComponent2.TEMPLATE)||this;return _this.inProgress=!1,_this.destroyRequested=!1,_this.manuallyDisplayed=!1,_this}return __extends$r(OverlayWrapperComponent2,_super),__name(OverlayWrapperComponent2,"OverlayWrapperComponent"),OverlayWrapperComponent2.prototype.updateLayoutClasses=function(cssClass,params){var overlayWrapperClassList=this.eOverlayWrapper.classList;overlayWrapperClassList.toggle(LayoutCssClasses.AUTO_HEIGHT,params.autoHeight),overlayWrapperClassList.toggle(LayoutCssClasses.NORMAL,params.normal),overlayWrapperClassList.toggle(LayoutCssClasses.PRINT,params.print)},OverlayWrapperComponent2.prototype.postConstruct=function(){this.createManagedBean(new LayoutFeature(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.addManagedListener(this.eventService,Events.EVENT_ROW_DATA_UPDATED,this.onRowDataUpdated.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.gridOptionsService.isRowModelType("clientSide")&&!this.gridOptionsService.get("rowData")&&this.showLoadingOverlay(),this.gridApi.registerOverlayWrapperComp(this)},OverlayWrapperComponent2.prototype.setWrapperTypeClass=function(loadingType){var overlayWrapperClassList=this.eOverlayWrapper.classList;overlayWrapperClassList.toggle("ag-overlay-loading-wrapper",loadingType===LoadingType.Loading),overlayWrapperClassList.toggle("ag-overlay-no-rows-wrapper",loadingType===LoadingType.NoRows)},OverlayWrapperComponent2.prototype.showLoadingOverlay=function(){if(!this.gridOptionsService.is("suppressLoadingOverlay")){var promise=this.userComponentFactory.getLoadingOverlayCompDetails({}).newAgStackInstance();this.showOverlay(promise,LoadingType.Loading)}},OverlayWrapperComponent2.prototype.showNoRowsOverlay=function(){if(!this.gridOptionsService.is("suppressNoRowsOverlay")){var promise=this.userComponentFactory.getNoRowsOverlayCompDetails({}).newAgStackInstance();this.showOverlay(promise,LoadingType.NoRows)}},OverlayWrapperComponent2.prototype.showOverlay=function(workItem,type){var _this=this;this.inProgress||(this.setWrapperTypeClass(type),this.destroyActiveOverlay(),this.inProgress=!0,workItem&&workItem.then(function(comp){_this.inProgress=!1,_this.eOverlayWrapper.appendChild(comp.getGui()),_this.activeOverlay=comp,_this.destroyRequested&&(_this.destroyRequested=!1,_this.destroyActiveOverlay())}),this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.setDisplayed(!0,{skipAriaHidden:!0}))},OverlayWrapperComponent2.prototype.destroyActiveOverlay=function(){this.inProgress?this.destroyRequested=!0:this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),clearElement(this.eOverlayWrapper))},OverlayWrapperComponent2.prototype.hideOverlay=function(){this.manuallyDisplayed=!1,this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})},OverlayWrapperComponent2.prototype.destroy=function(){this.destroyActiveOverlay(),_super.prototype.destroy.call(this)},OverlayWrapperComponent2.prototype.showOrHideOverlay=function(){var isEmpty=this.paginationProxy.isEmpty(),isSuppressNoRowsOverlay=this.gridOptionsService.is("suppressNoRowsOverlay");isEmpty&&!isSuppressNoRowsOverlay?this.showNoRowsOverlay():this.hideOverlay()},OverlayWrapperComponent2.prototype.onRowDataUpdated=function(){this.showOrHideOverlay()},OverlayWrapperComponent2.prototype.onNewColumnsLoaded=function(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&!this.manuallyDisplayed&&this.hideOverlay()},OverlayWrapperComponent2.TEMPLATE='\n        <div class="ag-overlay" aria-hidden="true">\n            <div class="ag-overlay-panel">\n                <div class="ag-overlay-wrapper" ref="eOverlayWrapper"></div>\n            </div>\n        </div>',__decorate$s([Autowired("userComponentFactory")],OverlayWrapperComponent2.prototype,"userComponentFactory",void 0),__decorate$s([Autowired("paginationProxy")],OverlayWrapperComponent2.prototype,"paginationProxy",void 0),__decorate$s([Autowired("gridApi")],OverlayWrapperComponent2.prototype,"gridApi",void 0),__decorate$s([Autowired("columnModel")],OverlayWrapperComponent2.prototype,"columnModel",void 0),__decorate$s([RefSelector("eOverlayWrapper")],OverlayWrapperComponent2.prototype,"eOverlayWrapper",void 0),__decorate$s([PostConstruct],OverlayWrapperComponent2.prototype,"postConstruct",null),OverlayWrapperComponent2}(Component),__extends$q=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$r=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowPositionUtils=function(_super){function RowPositionUtils2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$q(RowPositionUtils2,_super),__name(RowPositionUtils2,"RowPositionUtils"),RowPositionUtils2.prototype.getFirstRow=function(){var rowPinned,rowIndex=0;return this.pinnedRowModel.getPinnedTopRowCount()?rowPinned="top":this.rowModel.getRowCount()?(rowPinned=null,rowIndex=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(rowPinned="bottom"),void 0===rowPinned?null:{rowIndex,rowPinned}},RowPositionUtils2.prototype.getLastRow=function(){var rowIndex,rowPinned=null,pinnedBottomCount=this.pinnedRowModel.getPinnedBottomRowCount(),pinnedTopCount=this.pinnedRowModel.getPinnedTopRowCount();return pinnedBottomCount?(rowPinned="bottom",rowIndex=pinnedBottomCount-1):this.rowModel.getRowCount()?(rowPinned=null,rowIndex=this.paginationProxy.getPageLastRow()):pinnedTopCount&&(rowPinned="top",rowIndex=pinnedTopCount-1),void 0===rowIndex?null:{rowIndex,rowPinned}},RowPositionUtils2.prototype.getRowNode=function(gridRow){switch(gridRow.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[gridRow.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[gridRow.rowIndex];default:return this.rowModel.getRow(gridRow.rowIndex)}},RowPositionUtils2.prototype.sameRow=function(rowA,rowB){return!rowA&&!rowB||!(rowA&&!rowB||!rowA&&rowB)&&(rowA.rowIndex===rowB.rowIndex&&rowA.rowPinned==rowB.rowPinned)},RowPositionUtils2.prototype.before=function(rowA,rowB){switch(rowA.rowPinned){case"top":if("top"!==rowB.rowPinned)return!0;break;case"bottom":if("bottom"!==rowB.rowPinned)return!1;break;default:if(exists(rowB.rowPinned))return"top"!==rowB.rowPinned}return rowA.rowIndex<rowB.rowIndex},RowPositionUtils2.prototype.rowMax=function(rows){var max,_this=this;return rows.forEach(function(row){(void 0===max||_this.before(max,row))&&(max=row)}),max},RowPositionUtils2.prototype.rowMin=function(rows){var min,_this=this;return rows.forEach(function(row){(void 0===min||_this.before(row,min))&&(min=row)}),min},__decorate$r([Autowired("rowModel")],RowPositionUtils2.prototype,"rowModel",void 0),__decorate$r([Autowired("pinnedRowModel")],RowPositionUtils2.prototype,"pinnedRowModel",void 0),__decorate$r([Autowired("paginationProxy")],RowPositionUtils2.prototype,"paginationProxy",void 0),RowPositionUtils2=__decorate$r([Bean("rowPositionUtils")],RowPositionUtils2)}(BeanStub),__extends$p=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellPositionUtils=function(_super){function CellPositionUtils2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$p(CellPositionUtils2,_super),__name(CellPositionUtils2,"CellPositionUtils"),CellPositionUtils2.prototype.createId=function(cellPosition){var rowIndex=cellPosition.rowIndex,rowPinned=cellPosition.rowPinned,column=cellPosition.column;return this.createIdFromValues({rowIndex,column,rowPinned})},CellPositionUtils2.prototype.createIdFromValues=function(cellPosition){return cellPosition.rowIndex+"."+(cellPosition.rowPinned??"null")+"."+cellPosition.column.getId()},CellPositionUtils2.prototype.equals=function(cellA,cellB){var colsMatch=cellA.column===cellB.column,floatingMatch=cellA.rowPinned===cellB.rowPinned,indexMatch=cellA.rowIndex===cellB.rowIndex;return colsMatch&&floatingMatch&&indexMatch},CellPositionUtils2=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean("cellPositionUtils")],CellPositionUtils2),CellPositionUtils2}(BeanStub),__extends$o=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),UndoRedoAction=function(){function UndoRedoAction2(cellValueChanges){this.cellValueChanges=cellValueChanges}return __name(UndoRedoAction2,"UndoRedoAction"),UndoRedoAction2}(),RangeUndoRedoAction=function(_super){function RangeUndoRedoAction2(cellValueChanges,initialRange,finalRange,ranges){var _this=_super.call(this,cellValueChanges)||this;return _this.initialRange=initialRange,_this.finalRange=finalRange,_this.ranges=ranges,_this}return __extends$o(RangeUndoRedoAction2,_super),__name(RangeUndoRedoAction2,"RangeUndoRedoAction"),RangeUndoRedoAction2}(UndoRedoAction),UndoRedoStack=function(){function UndoRedoStack2(maxStackSize){this.actionStack=[],this.maxStackSize=maxStackSize||UndoRedoStack2.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}return __name(UndoRedoStack2,"UndoRedoStack"),UndoRedoStack2.prototype.pop=function(){return this.actionStack.pop()},UndoRedoStack2.prototype.push=function(item){item.cellValueChanges&&item.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(item))},UndoRedoStack2.prototype.clear=function(){this.actionStack=[]},UndoRedoStack2.prototype.getCurrentStackSize=function(){return this.actionStack.length},UndoRedoStack2.DEFAULT_STACK_SIZE=10,UndoRedoStack2}(),__extends$n=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$1=function(){return __assign$1=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$1.apply(this,arguments)},__decorate$p=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$5=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},UndoRedoService=function(_super){function UndoRedoService2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.cellValueChanges=[],_this.activeCellEdit=null,_this.activeRowEdit=null,_this.isPasting=!1,_this.isRangeInAction=!1,_this.onCellValueChanged=function(event){var eventCell={column:event.column,rowIndex:event.rowIndex,rowPinned:event.rowPinned},isCellEditing=null!==_this.activeCellEdit&&_this.cellPositionUtils.equals(_this.activeCellEdit,eventCell),isRowEditing=null!==_this.activeRowEdit&&_this.rowPositionUtils.sameRow(_this.activeRowEdit,eventCell);if(isCellEditing||isRowEditing||_this.isPasting||_this.isRangeInAction){var rowPinned=event.rowPinned,rowIndex=event.rowIndex,column=event.column,oldValue=event.oldValue,value=event.value,cellValueChange={rowPinned,rowIndex,columnId:column.getColId(),newValue:value,oldValue};_this.cellValueChanges.push(cellValueChange)}},_this.clearStacks=function(){_this.undoStack.clear(),_this.redoStack.clear()},_this}return __extends$n(UndoRedoService2,_super),__name(UndoRedoService2,"UndoRedoService"),UndoRedoService2.prototype.init=function(){var _this=this;if(this.gridOptionsService.is("undoRedoCellEditing")){var undoRedoLimit=this.gridOptionsService.getNum("undoRedoCellEditingLimit");undoRedoLimit<=0||(this.undoStack=new UndoRedoStack(undoRedoLimit),this.redoStack=new UndoRedoStack(undoRedoLimit),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,Events.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,function(e){e.keepUndoRedoStack||_this.clearStacks()}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady(function(){_this.gridBodyCtrl=_this.ctrlsService.getGridBodyCtrl()}))}},UndoRedoService2.prototype.getCurrentUndoStackSize=function(){return this.undoStack?this.undoStack.getCurrentStackSize():0},UndoRedoService2.prototype.getCurrentRedoStackSize=function(){return this.redoStack?this.redoStack.getCurrentStackSize():0},UndoRedoService2.prototype.undo=function(source){var startEvent={type:Events.EVENT_UNDO_STARTED,source};this.eventService.dispatchEvent(startEvent);var operationPerformed=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),endEvent={type:Events.EVENT_UNDO_ENDED,source,operationPerformed};this.eventService.dispatchEvent(endEvent)},UndoRedoService2.prototype.redo=function(source){var startEvent={type:Events.EVENT_REDO_STARTED,source};this.eventService.dispatchEvent(startEvent);var operationPerformed=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),endEvent={type:Events.EVENT_REDO_ENDED,source,operationPerformed};this.eventService.dispatchEvent(endEvent)},UndoRedoService2.prototype.undoRedo=function(undoRedoStack,opposingUndoRedoStack,rangeProperty,cellValueChangeProperty,source){if(!undoRedoStack)return!1;var undoRedoAction=undoRedoStack.pop();return!(!undoRedoAction||!undoRedoAction.cellValueChanges)&&(this.processAction(undoRedoAction,function(cellValueChange){return cellValueChange[cellValueChangeProperty]},source),undoRedoAction instanceof RangeUndoRedoAction?this.processRange(undoRedoAction.ranges||[undoRedoAction[rangeProperty]]):this.processCell(undoRedoAction.cellValueChanges),opposingUndoRedoStack.push(undoRedoAction),!0)},UndoRedoService2.prototype.processAction=function(action,valueExtractor,source){var _this=this;action.cellValueChanges.forEach(function(cellValueChange){var rowIndex=cellValueChange.rowIndex,rowPinned=cellValueChange.rowPinned,columnId=cellValueChange.columnId,rowPosition={rowIndex,rowPinned},currentRow=_this.getRowNode(rowPosition);currentRow.displayed&&currentRow.setDataValue(columnId,valueExtractor(cellValueChange),source)})},UndoRedoService2.prototype.processRange=function(ranges){var lastFocusedCell,_this=this;this.rangeService.removeAllCellRanges(!0),ranges.forEach(function(range,idx){if(range){var startRow=range.startRow,endRow=range.endRow;idx===ranges.length-1&&(lastFocusedCell={rowPinned:startRow.rowPinned,rowIndex:startRow.rowIndex,columnId:range.startColumn.getColId()},_this.setLastFocusedCell(lastFocusedCell));var cellRangeParams={rowStartIndex:startRow.rowIndex,rowStartPinned:startRow.rowPinned,rowEndIndex:endRow.rowIndex,rowEndPinned:endRow.rowPinned,columnStart:range.startColumn,columns:range.columns};_this.rangeService.addCellRange(cellRangeParams)}})},UndoRedoService2.prototype.processCell=function(cellValueChanges){var cellValueChange=cellValueChanges[0],rowPosition={rowIndex:cellValueChange.rowIndex,rowPinned:cellValueChange.rowPinned},row=this.getRowNode(rowPosition),lastFocusedCell={rowPinned:cellValueChange.rowPinned,rowIndex:row.rowIndex,columnId:cellValueChange.columnId};this.setLastFocusedCell(lastFocusedCell,!!this.rangeService)},UndoRedoService2.prototype.setLastFocusedCell=function(lastFocusedCell,setRangeToCell){var rowIndex=lastFocusedCell.rowIndex,columnId=lastFocusedCell.columnId,rowPinned=lastFocusedCell.rowPinned,scrollFeature=this.gridBodyCtrl.getScrollFeature(),column=this.columnModel.getGridColumn(columnId);if(column){scrollFeature.ensureIndexVisible(rowIndex),scrollFeature.ensureColumnVisible(column);var cellPosition={rowIndex,column,rowPinned};this.focusService.setFocusedCell(__assign$1(__assign$1({},cellPosition),{forceBrowserFocus:!0})),setRangeToCell&&this.rangeService.setRangeToCell(cellPosition)}},UndoRedoService2.prototype.addRowEditingListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_ROW_EDITING_STARTED,function(e){_this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}}),this.addManagedListener(this.eventService,Events.EVENT_ROW_EDITING_STOPPED,function(){var action=new UndoRedoAction(_this.cellValueChanges);_this.pushActionsToUndoStack(action),_this.activeRowEdit=null})},UndoRedoService2.prototype.addCellEditingListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_CELL_EDITING_STARTED,function(e){_this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}}),this.addManagedListener(this.eventService,Events.EVENT_CELL_EDITING_STOPPED,function(e){if(_this.activeCellEdit=null,e.valueChanged&&!_this.activeRowEdit&&!_this.isPasting&&!_this.isRangeInAction){var action=new UndoRedoAction(_this.cellValueChanges);_this.pushActionsToUndoStack(action)}})},UndoRedoService2.prototype.addPasteListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_PASTE_START,function(){_this.isPasting=!0}),this.addManagedListener(this.eventService,Events.EVENT_PASTE_END,function(){var action=new UndoRedoAction(_this.cellValueChanges);_this.pushActionsToUndoStack(action),_this.isPasting=!1})},UndoRedoService2.prototype.addFillListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_FILL_START,function(){_this.isRangeInAction=!0}),this.addManagedListener(this.eventService,Events.EVENT_FILL_END,function(event){var action=new RangeUndoRedoAction(_this.cellValueChanges,event.initialRange,event.finalRange);_this.pushActionsToUndoStack(action),_this.isRangeInAction=!1})},UndoRedoService2.prototype.addCellKeyListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,function(){_this.isRangeInAction=!0}),this.addManagedListener(this.eventService,Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,function(){var action;action=_this.rangeService&&_this.gridOptionsService.isEnableRangeSelection()?new RangeUndoRedoAction(_this.cellValueChanges,void 0,void 0,function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$5(arguments[i]));return ar}(_this.rangeService.getCellRanges())):new UndoRedoAction(_this.cellValueChanges),_this.pushActionsToUndoStack(action),_this.isRangeInAction=!1})},UndoRedoService2.prototype.pushActionsToUndoStack=function(action){this.undoStack.push(action),this.cellValueChanges=[],this.redoStack.clear()},UndoRedoService2.prototype.getRowNode=function(gridRow){switch(gridRow.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[gridRow.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[gridRow.rowIndex];default:return this.rowModel.getRow(gridRow.rowIndex)}},__decorate$p([Autowired("focusService")],UndoRedoService2.prototype,"focusService",void 0),__decorate$p([Autowired("ctrlsService")],UndoRedoService2.prototype,"ctrlsService",void 0),__decorate$p([Autowired("rowModel")],UndoRedoService2.prototype,"rowModel",void 0),__decorate$p([Autowired("pinnedRowModel")],UndoRedoService2.prototype,"pinnedRowModel",void 0),__decorate$p([Autowired("cellPositionUtils")],UndoRedoService2.prototype,"cellPositionUtils",void 0),__decorate$p([Autowired("rowPositionUtils")],UndoRedoService2.prototype,"rowPositionUtils",void 0),__decorate$p([Autowired("columnModel")],UndoRedoService2.prototype,"columnModel",void 0),__decorate$p([Optional("rangeService")],UndoRedoService2.prototype,"rangeService",void 0),__decorate$p([PostConstruct],UndoRedoService2.prototype,"init",null),UndoRedoService2=__decorate$p([Bean("undoRedoService")],UndoRedoService2)}(BeanStub),__extends$m=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$o=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderPositionUtils=function(_super){function HeaderPositionUtils2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$m(HeaderPositionUtils2,_super),__name(HeaderPositionUtils2,"HeaderPositionUtils"),HeaderPositionUtils2.prototype.findHeader=function(focusedHeader,direction){var nextColumn,getGroupMethod,getColMethod;if(focusedHeader.column instanceof ColumnGroup?(getGroupMethod="getDisplayedGroup"+direction,nextColumn=this.columnModel[getGroupMethod](focusedHeader.column)):(getColMethod="getDisplayedCol"+direction,nextColumn=this.columnModel[getColMethod](focusedHeader.column)),nextColumn)return{column:nextColumn,headerRowIndex:focusedHeader.headerRowIndex}},HeaderPositionUtils2.prototype.findColAtEdgeForHeaderRow=function(level,position){var displayedColumns=this.columnModel.getAllDisplayedColumns(),column=displayedColumns["start"===position?0:displayedColumns.length-1];if(column){var type=this.ctrlsService.getHeaderRowContainerCtrl(column.getPinned()).getRowType(level);return type==HeaderRowType.COLUMN_GROUP?{headerRowIndex:level,column:this.columnModel.getColumnGroupAtLevel(column,level)}:{headerRowIndex:null==type?-1:level,column}}},__decorate$o([Autowired("columnModel")],HeaderPositionUtils2.prototype,"columnModel",void 0),__decorate$o([Autowired("ctrlsService")],HeaderPositionUtils2.prototype,"ctrlsService",void 0),HeaderPositionUtils2=__decorate$o([Bean("headerPositionUtils")],HeaderPositionUtils2)}(BeanStub),ColumnDefFactory=function(){function ColumnDefFactory2(){}return __name(ColumnDefFactory2,"ColumnDefFactory"),ColumnDefFactory2.prototype.buildColumnDefs=function(cols,rowGroupColumns,pivotColumns){var _this=this,res=[],colGroupDefs={};return cols.forEach(function(col){for(var addToResult=!0,childDef=_this.createDefFromColumn(col,rowGroupColumns,pivotColumns),pointer=col.getOriginalParent();pointer;){var parentDef=null;if(pointer.isPadding())pointer=pointer.getOriginalParent();else{var existingParentDef=colGroupDefs[pointer.getGroupId()];if(existingParentDef){existingParentDef.children.push(childDef),addToResult=!1;break}(parentDef=_this.createDefFromGroup(pointer))&&(parentDef.children=[childDef],colGroupDefs[parentDef.groupId]=parentDef,childDef=parentDef,pointer=pointer.getOriginalParent())}}addToResult&&res.push(childDef)}),res},ColumnDefFactory2.prototype.createDefFromGroup=function(group){var defCloned=deepCloneDefinition(group.getColGroupDef(),["children"]);return defCloned&&(defCloned.groupId=group.getGroupId()),defCloned},ColumnDefFactory2.prototype.createDefFromColumn=function(col,rowGroupColumns,pivotColumns){var colDefCloned=deepCloneDefinition(col.getColDef());return colDefCloned.colId=col.getColId(),colDefCloned.width=col.getActualWidth(),colDefCloned.rowGroup=col.isRowGroupActive(),colDefCloned.rowGroupIndex=col.isRowGroupActive()?rowGroupColumns.indexOf(col):null,colDefCloned.pivot=col.isPivotActive(),colDefCloned.pivotIndex=col.isPivotActive()?pivotColumns.indexOf(col):null,colDefCloned.aggFunc=col.isValueActive()?col.getAggFunc():null,colDefCloned.hide=!col.isVisible()||void 0,colDefCloned.pinned=col.isPinned()?col.getPinned():null,colDefCloned.sort=col.getSort()?col.getSort():null,colDefCloned.sortIndex=null!=col.getSortIndex()?col.getSortIndex():null,colDefCloned},ColumnDefFactory2=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean("columnDefFactory")],ColumnDefFactory2),ColumnDefFactory2}(),__decorate$m=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowCssClassCalculator=function(){function RowCssClassCalculator2(){}return __name(RowCssClassCalculator2,"RowCssClassCalculator"),RowCssClassCalculator2.prototype.getInitialRowClasses=function(params){var classes=[];return exists(params.extraCssClass)&&classes.push(params.extraCssClass),classes.push("ag-row"),classes.push(params.rowFocused?"ag-row-focus":"ag-row-no-focus"),params.fadeRowIn&&classes.push("ag-opacity-zero"),classes.push(params.rowIsEven?"ag-row-even":"ag-row-odd"),params.rowNode.isRowPinned()&&classes.push("ag-row-pinned"),params.rowNode.isSelected()&&classes.push("ag-row-selected"),params.rowNode.footer&&classes.push("ag-row-footer"),classes.push("ag-row-level-"+params.rowLevel),params.rowNode.stub&&classes.push("ag-row-loading"),params.fullWidthRow&&classes.push("ag-full-width-row"),params.expandable&&(classes.push("ag-row-group"),classes.push(params.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),params.rowNode.dragging&&classes.push("ag-row-dragging"),pushAll(classes,this.processClassesFromGridOptions(params.rowNode)),pushAll(classes,this.preProcessRowClassRules(params.rowNode)),classes.push(params.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),params.firstRowOnPage&&classes.push("ag-row-first"),params.lastRowOnPage&&classes.push("ag-row-last"),params.fullWidthRow&&("left"===params.pinned&&classes.push("ag-cell-last-left-pinned"),"right"===params.pinned&&classes.push("ag-cell-first-right-pinned")),classes},RowCssClassCalculator2.prototype.processClassesFromGridOptions=function(rowNode){var res=[],process=__name(function(rowCls){"string"==typeof rowCls?res.push(rowCls):Array.isArray(rowCls)&&rowCls.forEach(function(e){return res.push(e)})},"process"),rowClass=this.gridOptionsService.get("rowClass");if(rowClass){if("function"==typeof rowClass)return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];process(rowClass)}var rowClassFunc=this.gridOptionsService.getCallback("getRowClass");rowClassFunc&&process(rowClassFunc({data:rowNode.data,node:rowNode,rowIndex:rowNode.rowIndex}));return res},RowCssClassCalculator2.prototype.preProcessRowClassRules=function(rowNode){var res=[];return this.processRowClassRules(rowNode,function(className){res.push(className)},function(className){}),res},RowCssClassCalculator2.prototype.processRowClassRules=function(rowNode,onApplicableClass,onNotApplicableClass){var rowClassParams={data:rowNode.data,node:rowNode,rowIndex:rowNode.rowIndex,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};this.stylingService.processClassRules(this.gridOptionsService.get("rowClassRules"),rowClassParams,onApplicableClass,onNotApplicableClass)},RowCssClassCalculator2.prototype.calculateRowLevel=function(rowNode){return rowNode.group?rowNode.level:rowNode.parent?rowNode.parent.level+1:0},__decorate$m([Autowired("stylingService")],RowCssClassCalculator2.prototype,"stylingService",void 0),__decorate$m([Autowired("gridOptionsService")],RowCssClassCalculator2.prototype,"gridOptionsService",void 0),RowCssClassCalculator2=__decorate$m([Bean("rowCssClassCalculator")],RowCssClassCalculator2)}(),__extends$l=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$l=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowNodeSorter=function(_super){function RowNodeSorter2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$l(RowNodeSorter2,_super),__name(RowNodeSorter2,"RowNodeSorter"),RowNodeSorter2.prototype.init=function(){var _this=this;this.isAccentedSort=this.gridOptionsService.is("accentedSort"),this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",function(propChange){return _this.isAccentedSort=propChange.currentValue}),this.addManagedPropertyListener("autoGroupColumnDef",function(){return _this.primaryColumnsSortGroups=_this.gridOptionsService.isColumnsSortingCoupledToGroup()})},RowNodeSorter2.prototype.doFullSort=function(rowNodes,sortOptions){var mapper=__name(function(rowNode,pos){return{currentPos:pos,rowNode}},"mapper"),sortedRowNodes=rowNodes.map(mapper);return sortedRowNodes.sort(this.compareRowNodes.bind(this,sortOptions)),sortedRowNodes.map(function(item){return item.rowNode})},RowNodeSorter2.prototype.compareRowNodes=function(sortOptions,sortedNodeA,sortedNodeB){for(var nodeA=sortedNodeA.rowNode,nodeB=sortedNodeB.rowNode,i=0,len=sortOptions.length;i<len;i++){var sortOption=sortOptions[i],isDescending="desc"===sortOption.sort,valueA=this.getValue(nodeA,sortOption.column),valueB=this.getValue(nodeB,sortOption.column),comparatorResult=void 0,providedComparator=this.getComparator(sortOption,nodeA);if(comparatorResult=providedComparator?providedComparator(valueA,valueB,nodeA,nodeB,isDescending):_.defaultComparator(valueA,valueB,this.isAccentedSort),!isNaN(comparatorResult)&&0!==comparatorResult)return"asc"===sortOption.sort?comparatorResult:-1*comparatorResult}return sortedNodeA.currentPos-sortedNodeB.currentPos},RowNodeSorter2.prototype.getComparator=function(sortOption,rowNode){var column=sortOption.column,comparatorOnCol=column.getColDef().comparator;if(null!=comparatorOnCol)return comparatorOnCol;if(column.getColDef().showRowGroup){var groupLeafField=!rowNode.group&&column.getColDef().field;if(groupLeafField){var primaryColumn=this.columnModel.getPrimaryColumn(groupLeafField);if(primaryColumn)return primaryColumn.getColDef().comparator}}},RowNodeSorter2.prototype.getValue=function(node,column){var _a,_b;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(column,node,!1,!1);if(node.rowGroupColumn===column){if(this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotActive())){if(column.getColDef().keyCreator)return node.key;var leafChild=null===(_a=node.allLeafChildren)||void 0===_a?void 0:_a[0];return leafChild?this.valueService.getValue(column,leafChild,!1,!1):void 0}var displayCol=this.columnModel.getGroupDisplayColumnForGroup(column.getId());return displayCol?null===(_b=node.groupData)||void 0===_b?void 0:_b[displayCol.getId()]:void 0}return node.group&&column.getColDef().showRowGroup?void 0:this.valueService.getValue(column,node,!1,!1)},__decorate$l([Autowired("valueService")],RowNodeSorter2.prototype,"valueService",void 0),__decorate$l([Autowired("columnModel")],RowNodeSorter2.prototype,"columnModel",void 0),__decorate$l([PostConstruct],RowNodeSorter2.prototype,"init",null),RowNodeSorter2=__decorate$l([Bean("rowNodeSorter")],RowNodeSorter2)}(BeanStub),__extends$k=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CtrlsService=function(_super){function CtrlsService2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.ready=!1,_this.readyCallbacks=[],_this}var CtrlsService_1;return __extends$k(CtrlsService2,_super),__name(CtrlsService2,"CtrlsService"),CtrlsService_1=CtrlsService2,CtrlsService2.prototype.checkReady=function(){if(this.ready=null!=this.gridCtrl&&null!=this.gridBodyCtrl&&null!=this.centerRowContainerCtrl&&null!=this.leftRowContainerCtrl&&null!=this.rightRowContainerCtrl&&null!=this.bottomCenterRowContainerCtrl&&null!=this.bottomLeftRowContainerCtrl&&null!=this.bottomRightRowContainerCtrl&&null!=this.topCenterRowContainerCtrl&&null!=this.topLeftRowContainerCtrl&&null!=this.topRightRowContainerCtrl&&null!=this.stickyTopCenterRowContainerCtrl&&null!=this.stickyTopLeftRowContainerCtrl&&null!=this.stickyTopRightRowContainerCtrl&&null!=this.centerHeaderRowContainerCtrl&&null!=this.leftHeaderRowContainerCtrl&&null!=this.rightHeaderRowContainerCtrl&&null!=this.fakeHScrollComp&&null!=this.fakeVScrollComp&&null!=this.gridHeaderCtrl,this.ready){var p_1=this.createReadyParams();this.readyCallbacks.forEach(function(c){return c(p_1)}),this.readyCallbacks.length=0}},CtrlsService2.prototype.whenReady=function(callback){this.ready?callback(this.createReadyParams()):this.readyCallbacks.push(callback)},CtrlsService2.prototype.createReadyParams=function(){return{centerRowContainerCtrl:this.centerRowContainerCtrl,leftRowContainerCtrl:this.leftRowContainerCtrl,rightRowContainerCtrl:this.rightRowContainerCtrl,bottomCenterRowContainerCtrl:this.bottomCenterRowContainerCtrl,bottomLeftRowContainerCtrl:this.bottomLeftRowContainerCtrl,bottomRightRowContainerCtrl:this.bottomRightRowContainerCtrl,topCenterRowContainerCtrl:this.topCenterRowContainerCtrl,topLeftRowContainerCtrl:this.topLeftRowContainerCtrl,topRightRowContainerCtrl:this.topRightRowContainerCtrl,stickyTopCenterRowContainerCtrl:this.stickyTopCenterRowContainerCtrl,stickyTopLeftRowContainerCtrl:this.stickyTopLeftRowContainerCtrl,stickyTopRightRowContainerCtrl:this.stickyTopRightRowContainerCtrl,centerHeaderRowContainerCtrl:this.centerHeaderRowContainerCtrl,leftHeaderRowContainerCtrl:this.leftHeaderRowContainerCtrl,rightHeaderRowContainerCtrl:this.rightHeaderRowContainerCtrl,fakeHScrollComp:this.fakeHScrollComp,fakeVScrollComp:this.fakeVScrollComp,gridBodyCtrl:this.gridBodyCtrl,gridCtrl:this.gridCtrl,gridHeaderCtrl:this.gridHeaderCtrl}},CtrlsService2.prototype.registerFakeHScrollComp=function(comp){this.fakeHScrollComp=comp,this.checkReady()},CtrlsService2.prototype.registerFakeVScrollComp=function(comp){this.fakeVScrollComp=comp,this.checkReady()},CtrlsService2.prototype.registerGridHeaderCtrl=function(gridHeaderCtrl){this.gridHeaderCtrl=gridHeaderCtrl,this.checkReady()},CtrlsService2.prototype.registerCenterRowContainerCtrl=function(ctrl){this.centerRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerLeftRowContainerCtrl=function(ctrl){this.leftRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerRightRowContainerCtrl=function(ctrl){this.rightRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerTopCenterRowContainerCtrl=function(ctrl){this.topCenterRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerTopLeftRowContainerCon=function(ctrl){this.topLeftRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerTopRightRowContainerCtrl=function(ctrl){this.topRightRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerStickyTopCenterRowContainerCtrl=function(ctrl){this.stickyTopCenterRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerStickyTopLeftRowContainerCon=function(ctrl){this.stickyTopLeftRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerStickyTopRightRowContainerCtrl=function(ctrl){this.stickyTopRightRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerBottomCenterRowContainerCtrl=function(ctrl){this.bottomCenterRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerBottomLeftRowContainerCtrl=function(ctrl){this.bottomLeftRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerBottomRightRowContainerCtrl=function(ctrl){this.bottomRightRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerHeaderContainer=function(ctrl,pinned){switch(pinned){case"left":this.leftHeaderRowContainerCtrl=ctrl;break;case"right":this.rightHeaderRowContainerCtrl=ctrl;break;default:this.centerHeaderRowContainerCtrl=ctrl}this.checkReady()},CtrlsService2.prototype.registerGridBodyCtrl=function(ctrl){this.gridBodyCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerGridCtrl=function(ctrl){this.gridCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.getFakeHScrollComp=function(){return this.fakeHScrollComp},CtrlsService2.prototype.getFakeVScrollComp=function(){return this.fakeVScrollComp},CtrlsService2.prototype.getGridHeaderCtrl=function(){return this.gridHeaderCtrl},CtrlsService2.prototype.getGridCtrl=function(){return this.gridCtrl},CtrlsService2.prototype.getCenterRowContainerCtrl=function(){return this.centerRowContainerCtrl},CtrlsService2.prototype.getTopCenterRowContainerCtrl=function(){return this.topCenterRowContainerCtrl},CtrlsService2.prototype.getBottomCenterRowContainerCtrl=function(){return this.bottomCenterRowContainerCtrl},CtrlsService2.prototype.getStickyTopCenterRowContainerCtrl=function(){return this.stickyTopCenterRowContainerCtrl},CtrlsService2.prototype.getGridBodyCtrl=function(){return this.gridBodyCtrl},CtrlsService2.prototype.getHeaderRowContainerCtrls=function(){return[this.leftHeaderRowContainerCtrl,this.rightHeaderRowContainerCtrl,this.centerHeaderRowContainerCtrl]},CtrlsService2.prototype.getHeaderRowContainerCtrl=function(pinned){switch(pinned){case"left":return this.leftHeaderRowContainerCtrl;case"right":return this.rightHeaderRowContainerCtrl;default:return this.centerHeaderRowContainerCtrl}},CtrlsService2.NAME="ctrlsService",CtrlsService2=CtrlsService_1=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean(CtrlsService_1.NAME)],CtrlsService2),CtrlsService2}(BeanStub),__extends$j=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CtrlsFactory=function(_super){function CtrlsFactory2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.registry={},_this}return __extends$j(CtrlsFactory2,_super),__name(CtrlsFactory2,"CtrlsFactory"),CtrlsFactory2.prototype.register=function(meta){this.registry[meta.controllerName]=meta.controllerClass},CtrlsFactory2.prototype.getInstance=function(name){var ControllerClass=this.registry[name];if(null!=ControllerClass)return new ControllerClass},CtrlsFactory2=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean("ctrlsFactory")],CtrlsFactory2),CtrlsFactory2}(BeanStub),__extends$i=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$i=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AbstractFakeScrollComp=function(_super){function AbstractFakeScrollComp2(template,direction){var _this=_super.call(this,template)||this;return _this.direction=direction,_this.hideTimeout=null,_this}return __extends$i(AbstractFakeScrollComp2,_super),__name(AbstractFakeScrollComp2,"AbstractFakeScrollComp"),AbstractFakeScrollComp2.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",isMacOsUserAgent()||isIOSUserAgent())},AbstractFakeScrollComp2.prototype.initialiseInvisibleScrollbar=function(){void 0===this.invisibleScrollbar&&(this.invisibleScrollbar=isInvisibleScrollbar(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))},AbstractFakeScrollComp2.prototype.addActiveListenerToggles=function(){var _this=this,eGui=this.getGui();["mouseenter","mousedown","touchstart"].forEach(function(eventName){return _this.addManagedListener(eGui,eventName,function(){return _this.addOrRemoveCssClass("ag-scrollbar-active",!0)})}),["mouseleave","touchend"].forEach(function(eventName){return _this.addManagedListener(eGui,eventName,function(){return _this.addOrRemoveCssClass("ag-scrollbar-active",!1)})})},AbstractFakeScrollComp2.prototype.onScrollVisibilityChanged=function(){void 0===this.invisibleScrollbar&&this.initialiseInvisibleScrollbar(),this.setScrollVisible()},AbstractFakeScrollComp2.prototype.hideAndShowInvisibleScrollAsNeeded=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_BODY_SCROLL,function(params){params.direction===_this.direction&&(null!==_this.hideTimeout&&(window.clearTimeout(_this.hideTimeout),_this.hideTimeout=null),_this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))}),this.addManagedListener(this.eventService,Events.EVENT_BODY_SCROLL_END,function(){_this.hideTimeout=window.setTimeout(function(){_this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),_this.hideTimeout=null},400)})},AbstractFakeScrollComp2.prototype.getViewport=function(){return this.eViewport},AbstractFakeScrollComp2.prototype.getContainer=function(){return this.eContainer},__decorate$i([RefSelector("eViewport")],AbstractFakeScrollComp2.prototype,"eViewport",void 0),__decorate$i([RefSelector("eContainer")],AbstractFakeScrollComp2.prototype,"eContainer",void 0),__decorate$i([Autowired("scrollVisibleService")],AbstractFakeScrollComp2.prototype,"scrollVisibleService",void 0),__decorate$i([Autowired("ctrlsService")],AbstractFakeScrollComp2.prototype,"ctrlsService",void 0),AbstractFakeScrollComp2}(Component),__extends$h=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$h=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FakeHScrollComp=function(_super){function FakeHScrollComp2(){return _super.call(this,FakeHScrollComp2.TEMPLATE,"horizontal")||this}return __extends$h(FakeHScrollComp2,_super),__name(FakeHScrollComp2,"FakeHScrollComp"),FakeHScrollComp2.prototype.postConstruct=function(){var _this=this;_super.prototype.postConstruct.call(this);var spacerWidthsListener=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,spacerWidthsListener),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,spacerWidthsListener),this.addManagedListener(this.eventService,Events.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",spacerWidthsListener),this.ctrlsService.registerFakeHScrollComp(this),this.createManagedBean(new CenterWidthFeature(function(width){return _this.eContainer.style.width=width+"px"}))},FakeHScrollComp2.prototype.initialiseInvisibleScrollbar=function(){void 0===this.invisibleScrollbar&&(this.enableRtl=this.gridOptionsService.is("enableRtl"),_super.prototype.initialiseInvisibleScrollbar.call(this),this.invisibleScrollbar&&this.refreshCompBottom())},FakeHScrollComp2.prototype.onPinnedRowDataChanged=function(){this.refreshCompBottom()},FakeHScrollComp2.prototype.refreshCompBottom=function(){if(this.invisibleScrollbar){var bottomPinnedHeight=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=bottomPinnedHeight+"px"}},FakeHScrollComp2.prototype.onScrollVisibilityChanged=function(){_super.prototype.onScrollVisibilityChanged.call(this),this.setFakeHScrollSpacerWidths()},FakeHScrollComp2.prototype.setFakeHScrollSpacerWidths=function(){var vScrollShowing=this.scrollVisibleService.isVerticalScrollShowing(),rightSpacing=this.columnModel.getDisplayedColumnsRightWidth(),scrollOnRight=!this.enableRtl&&vScrollShowing,scrollbarWidth=this.gridOptionsService.getScrollbarWidth();scrollOnRight&&(rightSpacing+=scrollbarWidth),setFixedWidth(this.eRightSpacer,rightSpacing),this.eRightSpacer.classList.toggle("ag-scroller-corner",rightSpacing<=scrollbarWidth);var leftSpacing=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&vScrollShowing&&(leftSpacing+=scrollbarWidth),setFixedWidth(this.eLeftSpacer,leftSpacing),this.eLeftSpacer.classList.toggle("ag-scroller-corner",leftSpacing<=scrollbarWidth)},FakeHScrollComp2.prototype.setScrollVisible=function(){var hScrollShowing=this.scrollVisibleService.isHorizontalScrollShowing(),invisibleScrollbar2=this.invisibleScrollbar,isSuppressHorizontalScroll=this.gridOptionsService.is("suppressHorizontalScroll"),scrollbarWidth=hScrollShowing&&this.gridOptionsService.getScrollbarWidth()||0,scrollContainerSize=isSuppressHorizontalScroll?0:0===scrollbarWidth&&invisibleScrollbar2?16:scrollbarWidth;this.addOrRemoveCssClass("ag-scrollbar-invisible",invisibleScrollbar2),setFixedHeight(this.getGui(),scrollContainerSize),setFixedHeight(this.eViewport,scrollContainerSize),setFixedHeight(this.eContainer,scrollContainerSize),this.setDisplayed(hScrollShowing,{skipAriaHidden:!0})},FakeHScrollComp2.TEMPLATE='<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>\n        </div>',__decorate$h([RefSelector("eLeftSpacer")],FakeHScrollComp2.prototype,"eLeftSpacer",void 0),__decorate$h([RefSelector("eRightSpacer")],FakeHScrollComp2.prototype,"eRightSpacer",void 0),__decorate$h([Autowired("columnModel")],FakeHScrollComp2.prototype,"columnModel",void 0),__decorate$h([Autowired("pinnedRowModel")],FakeHScrollComp2.prototype,"pinnedRowModel",void 0),__decorate$h([PostConstruct],FakeHScrollComp2.prototype,"postConstruct",null),FakeHScrollComp2}(AbstractFakeScrollComp),__extends$g=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$g=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PinnedWidthService=function(_super){function PinnedWidthService2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$g(PinnedWidthService2,_super),__name(PinnedWidthService2,"PinnedWidthService"),PinnedWidthService2.prototype.postConstruct=function(){var listener=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,listener),this.addManagedPropertyListener("domLayout",listener)},PinnedWidthService2.prototype.checkContainerWidths=function(){var printLayout=this.gridOptionsService.isDomLayout("print"),newLeftWidth=printLayout?0:this.columnModel.getDisplayedColumnsLeftWidth(),newRightWidth=printLayout?0:this.columnModel.getDisplayedColumnsRightWidth();newLeftWidth!=this.leftWidth&&(this.leftWidth=newLeftWidth,this.eventService.dispatchEvent({type:Events.EVENT_LEFT_PINNED_WIDTH_CHANGED})),newRightWidth!=this.rightWidth&&(this.rightWidth=newRightWidth,this.eventService.dispatchEvent({type:Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))},PinnedWidthService2.prototype.getPinnedRightWidth=function(){return this.rightWidth},PinnedWidthService2.prototype.getPinnedLeftWidth=function(){return this.leftWidth},__decorate$g([Autowired("columnModel")],PinnedWidthService2.prototype,"columnModel",void 0),__decorate$g([PostConstruct],PinnedWidthService2.prototype,"postConstruct",null),PinnedWidthService2=__decorate$g([Bean("pinnedWidthService")],PinnedWidthService2)}(BeanStub),__extends$f=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$f=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowNodeEventThrottle=function(_super){function RowNodeEventThrottle2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.events=[],_this}return __extends$f(RowNodeEventThrottle2,_super),__name(RowNodeEventThrottle2,"RowNodeEventThrottle"),RowNodeEventThrottle2.prototype.postConstruct=function(){"clientSide"==this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel)},RowNodeEventThrottle2.prototype.dispatchExpanded=function(event){var _this=this;if(null!=this.clientSideRowModel){this.events.push(event);var func=__name(function(){_this.clientSideRowModel&&_this.clientSideRowModel.onRowGroupOpened(),_this.events.forEach(function(e){return _this.eventService.dispatchEvent(e)}),_this.events=[]},"func");null==this.dispatchExpandedDebounced&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(func)),this.dispatchExpandedDebounced()}else this.eventService.dispatchEvent(event)},__decorate$f([Autowired("animationFrameService")],RowNodeEventThrottle2.prototype,"animationFrameService",void 0),__decorate$f([Autowired("rowModel")],RowNodeEventThrottle2.prototype,"rowModel",void 0),__decorate$f([PostConstruct],RowNodeEventThrottle2.prototype,"postConstruct",null),RowNodeEventThrottle2=__decorate$f([Bean("rowNodeEventThrottle")],RowNodeEventThrottle2)}(BeanStub),__assign=function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)},__decorate$e=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__param$1=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},__read$4=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};function toNumber(value){return"number"==typeof value?value:"string"==typeof value?parseInt(value,10):void 0}function isTrue(value){return!0===value||"true"===value}__name(toNumber,"toNumber"),__name(isTrue,"isTrue");var BarColumnLabelPlacement,BarColumnLabelPlacement2,GridOptionsService=function(){function GridOptionsService2(){this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new EventService}return __name(GridOptionsService2,"GridOptionsService"),Object.defineProperty(GridOptionsService2.prototype,"context",{get:function(){return this.gridOptions.context},enumerable:!1,configurable:!0}),GridOptionsService2.prototype.agWire=function(gridApi,columnApi){this.gridOptions.api=gridApi,this.gridOptions.columnApi=columnApi,this.api=gridApi,this.columnApi=columnApi},GridOptionsService2.prototype.init=function(){this.gridOptionLookup=new Set(function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$4(arguments[i]));return ar}(ComponentUtil.ALL_PROPERTIES,ComponentUtil.EVENT_CALLBACKS));var async=!this.is("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandler.bind(this),async),this.getScrollbarWidth()},GridOptionsService2.prototype.destroy=function(){this.gridOptions.api=null,this.gridOptions.columnApi=null,this.destroyed=!0},GridOptionsService2.prototype.is=function(property){return isTrue(this.gridOptions[property])},GridOptionsService2.prototype.get=function(property){return this.gridOptions[property]},GridOptionsService2.prototype.getNum=function(property){return toNumber(this.gridOptions[property])},GridOptionsService2.prototype.getCallback=function(property){return this.mergeGridCommonParams(this.gridOptions[property])},GridOptionsService2.prototype.exists=function(property){return exists(this.gridOptions[property])},GridOptionsService2.prototype.mergeGridCommonParams=function(callback){var _this=this;return callback?__name(function(callbackParams){var mergedParams=callbackParams;return mergedParams.api=_this.api,mergedParams.columnApi=_this.columnApi,mergedParams.context=_this.context,callback(mergedParams)},"wrapped"):callback},GridOptionsService2.prototype.set=function(key,newValue,force,eventParams){if(void 0===force&&(force=!1),void 0===eventParams&&(eventParams={}),this.gridOptionLookup.has(key)){var previousValue=this.gridOptions[key];if(force||previousValue!==newValue){this.gridOptions[key]=newValue;var event_1=__assign({type:key,currentValue:newValue,previousValue},eventParams);this.propertyEventService.dispatchEvent(event_1)}}},GridOptionsService2.prototype.addEventListener=function(key,listener){this.propertyEventService.addEventListener(key,listener)},GridOptionsService2.prototype.removeEventListener=function(key,listener){this.propertyEventService.removeEventListener(key,listener)},GridOptionsService2.prototype.globalEventHandler=function(eventName,event){if(!this.destroyed){var callbackMethodName=ComponentUtil.getCallbackForEvent(eventName);"function"==typeof this.gridOptions[callbackMethodName]&&this.gridOptions[callbackMethodName](event)}},GridOptionsService2.prototype.getScrollbarWidth=function(){if(null==this.scrollbarWidth){var scrollbarWidth="number"==typeof this.gridOptions.scrollbarWidth&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:getScrollbarWidth();null!=scrollbarWidth&&(this.scrollbarWidth=scrollbarWidth,this.eventService.dispatchEvent({type:Events.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth},GridOptionsService2.prototype.isRowModelType=function(rowModelType){return this.gridOptions.rowModelType===rowModelType||"clientSide"===rowModelType&&missing(this.gridOptions.rowModelType)},GridOptionsService2.prototype.isDomLayout=function(domLayout){var _a;return(null!==(_a=this.get("domLayout"))&&void 0!==_a?_a:"normal")===domLayout},GridOptionsService2.prototype.isRowSelection=function(){return"single"===this.gridOptions.rowSelection||"multiple"===this.gridOptions.rowSelection},GridOptionsService2.prototype.useAsyncEvents=function(){return!this.is("suppressAsyncEvents")},GridOptionsService2.prototype.isGetRowHeightFunction=function(){return"function"==typeof this.gridOptions.getRowHeight},GridOptionsService2.prototype.getRowHeightForNode=function(rowNode,allowEstimate,defaultRowHeight){if(void 0===allowEstimate&&(allowEstimate=!1),null==defaultRowHeight&&(defaultRowHeight=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(allowEstimate)return{height:defaultRowHeight,estimated:!0};var params={node:rowNode,data:rowNode.data},height=this.getCallback("getRowHeight")(params);if(this.isNumeric(height))return 0===height&&doOnce(function(){return console.warn("AG Grid: The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.")},"invalidRowHeight"),{height:Math.max(1,height),estimated:!1}}return rowNode.detail&&this.is("masterDetail")?this.is("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}:{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:defaultRowHeight,estimated:!1}},GridOptionsService2.prototype.getRowHeightAsNumber=function(){if(!this.gridOptions.rowHeight||missing(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();var rowHeight=this.gridOptions.rowHeight;return rowHeight&&this.isNumeric(rowHeight)?(this.environment.setRowHeightVariable(rowHeight),rowHeight):(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())},GridOptionsService2.prototype.isNumeric=function(value){return!isNaN(value)&&"number"==typeof value&&isFinite(value)},GridOptionsService2.prototype.getDomDataKey=function(){return this.domDataKey},GridOptionsService2.prototype.getDomData=function(element,key){var domData=element[this.getDomDataKey()];return domData?domData[key]:void 0},GridOptionsService2.prototype.setDomData=function(element,key,value){var domDataKey=this.getDomDataKey(),domData=element[domDataKey];missing(domData)&&(domData={},element[domDataKey]=domData),domData[key]=value},GridOptionsService2.prototype.getDocument=function(){var result=null;return this.gridOptions.getDocument&&exists(this.gridOptions.getDocument)?result=this.gridOptions.getDocument():this.eGridDiv&&(result=this.eGridDiv.ownerDocument),result&&exists(result)?result:document},GridOptionsService2.prototype.getRootNode=function(){return this.eGridDiv.getRootNode()},GridOptionsService2.prototype.getRowIdFunc=function(){var getRowId=this.getCallback("getRowId");if(getRowId)return getRowId;var getRowNodeId=this.get("getRowNodeId");return getRowNodeId?function(params){return getRowNodeId(params.data)}:void 0},GridOptionsService2.prototype.getAsyncTransactionWaitMillis=function(){return exists(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50},GridOptionsService2.prototype.isAnimateRows=function(){return!this.is("ensureDomOrder")&&this.is("animateRows")},GridOptionsService2.prototype.isTreeData=function(){return this.is("treeData")&&ModuleRegistry.assertRegistered(ModuleNames.RowGroupingModule,"Tree Data")},GridOptionsService2.prototype.isMasterDetail=function(){return this.is("masterDetail")&&ModuleRegistry.assertRegistered(ModuleNames.MasterDetailModule,"masterDetail")},GridOptionsService2.prototype.isEnableRangeSelection=function(){return this.is("enableRangeSelection")&&ModuleRegistry.isRegistered(ModuleNames.RangeSelectionModule)},GridOptionsService2.prototype.isColumnsSortingCoupledToGroup=function(){var autoGroupColumnDef=this.get("autoGroupColumnDef");return this.isRowModelType("clientSide")&&!(null!=autoGroupColumnDef&&autoGroupColumnDef.comparator)},GridOptionsService2.prototype.getGroupAggFiltering=function(){var userValue=this.gridOptions.groupAggFiltering;return"function"==typeof userValue?this.getCallback("groupAggFiltering"):isTrue(userValue)?function(){return!0}:void 0},GridOptionsService2.prototype.isGroupMultiAutoColumn=function(){return this.gridOptions.groupDisplayType?matchesGroupDisplayType("multipleColumns",this.gridOptions.groupDisplayType):this.is("groupHideOpenParents")},GridOptionsService2.prototype.isGroupUseEntireRow=function(pivotMode){return!pivotMode&&(!!this.gridOptions.groupDisplayType&&matchesGroupDisplayType("groupRows",this.gridOptions.groupDisplayType))},__decorate$e([Autowired("gridOptions")],GridOptionsService2.prototype,"gridOptions",void 0),__decorate$e([Autowired("eventService")],GridOptionsService2.prototype,"eventService",void 0),__decorate$e([Autowired("environment")],GridOptionsService2.prototype,"environment",void 0),__decorate$e([Autowired("eGridDiv")],GridOptionsService2.prototype,"eGridDiv",void 0),__decorate$e([__param$1(0,Qualifier("gridApi")),__param$1(1,Qualifier("columnApi"))],GridOptionsService2.prototype,"agWire",null),__decorate$e([PostConstruct],GridOptionsService2.prototype,"init",null),__decorate$e([PreDestroy],GridOptionsService2.prototype,"destroy",null),GridOptionsService2=__decorate$e([Bean("gridOptionsService")],GridOptionsService2)}(),__extends$e=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),LocaleService=function(_super){function LocaleService2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$e(LocaleService2,_super),__name(LocaleService2,"LocaleService"),LocaleService2.prototype.getLocaleTextFunc=function(){var getLocaleText=this.gridOptionsService.getCallback("getLocaleText");if(getLocaleText)return function(key,defaultValue,variableValues){return getLocaleText({key,defaultValue,variableValues})};var localeTextFunc=this.gridOptionsService.get("localeTextFunc");if(localeTextFunc)return localeTextFunc;var localeText=this.gridOptionsService.get("localeText");return function(key,defaultValue,variableValues){var localisedText=localeText&&localeText[key];if(localisedText&&variableValues&&variableValues.length)for(var found=0;!(found>=variableValues.length);){if(-1===localisedText.indexOf("${variable}"))break;localisedText=localisedText.replace("${variable}",variableValues[found++])}return localisedText??defaultValue}},LocaleService2=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean("localeService")],LocaleService2),LocaleService2}(BeanStub),__extends$d=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),FakeVScrollComp=function(_super){function FakeVScrollComp2(){return _super.call(this,FakeVScrollComp2.TEMPLATE,"vertical")||this}return __extends$d(FakeVScrollComp2,_super),__name(FakeVScrollComp2,"FakeVScrollComp"),FakeVScrollComp2.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this),this.createManagedBean(new SetHeightFeature(this.eContainer)),this.ctrlsService.registerFakeVScrollComp(this)},FakeVScrollComp2.prototype.setScrollVisible=function(){var vScrollShowing=this.scrollVisibleService.isVerticalScrollShowing(),invisibleScrollbar2=this.invisibleScrollbar,scrollbarWidth=vScrollShowing&&this.gridOptionsService.getScrollbarWidth()||0,adjustedScrollbarWidth=0===scrollbarWidth&&invisibleScrollbar2?16:scrollbarWidth;this.addOrRemoveCssClass("ag-scrollbar-invisible",invisibleScrollbar2),setFixedWidth(this.getGui(),adjustedScrollbarWidth),setFixedWidth(this.eViewport,adjustedScrollbarWidth),setFixedWidth(this.eContainer,adjustedScrollbarWidth),this.setDisplayed(vScrollShowing,{skipAriaHidden:!0})},FakeVScrollComp2.TEMPLATE='<div class="ag-body-vertical-scroll" aria-hidden="true">\n            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">\n                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>\n            </div>\n        </div>',function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PostConstruct],FakeVScrollComp2.prototype,"postConstruct",null),FakeVScrollComp2}(AbstractFakeScrollComp),__read$3=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$2=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$3(arguments[i]));return ar},Grid=function(){function Grid2(eGridDiv,gridOptions,params){gridOptions?(this.gridOptions=gridOptions,(new GridCoreCreator).create(eGridDiv,gridOptions,function(context){var gridComp=new GridComp(eGridDiv);context.createBean(gridComp)},void 0,params)):console.error("AG Grid: no gridOptions provided to the grid")}return __name(Grid2,"Grid"),Grid2.prototype.destroy=function(){this.gridOptions&&this.gridOptions.api&&this.gridOptions.api.destroy()},Grid2}(),GridCoreCreator=function(){function GridCoreCreator2(){}return __name(GridCoreCreator2,"GridCoreCreator"),GridCoreCreator2.prototype.create=function(eGridDiv,gridOptions,createUi,acceptChanges,params){var _this=this,debug=!!gridOptions.debug,registeredModules=this.getRegisteredModules(params),beanClasses=this.createBeansList(gridOptions.rowModelType,registeredModules),providedBeanInstances=this.createProvidedBeans(eGridDiv,gridOptions,params);if(beanClasses){var contextParams={providedBeanInstances,beanClasses,debug},logger=new Logger("AG Grid",function(){return gridOptions.debug}),contextLogger=new Logger("Context",function(){return contextParams.debug}),context=new Context(contextParams,contextLogger),beans=context.getBean("beans");this.registerModuleUserComponents(beans,registeredModules),this.registerStackComponents(beans,registeredModules),this.registerControllers(beans,registeredModules),createUi(context),beans.ctrlsService.whenReady(function(){_this.setColumnsAndData(beans),_this.dispatchGridReadyEvent(beans);var isEnterprise=ModuleRegistry.isRegistered(ModuleNames.EnterpriseCoreModule);logger.log("initialised successfully, enterprise = "+isEnterprise)}),acceptChanges&&acceptChanges(context)}},GridCoreCreator2.prototype.registerControllers=function(beans,registeredModules){registeredModules.forEach(function(module){module.controllers&&module.controllers.forEach(function(meta){return beans.ctrlsFactory.register(meta)})})},GridCoreCreator2.prototype.registerStackComponents=function(beans,registeredModules){var agStackComponents=this.createAgStackComponentsList(registeredModules);beans.agStackComponentsRegistry.setupComponents(agStackComponents)},GridCoreCreator2.prototype.getRegisteredModules=function(params){var passedViaConstructor=params?params.modules:null,registered=ModuleRegistry.getRegisteredModules(),allModules=[],mapNames={};function addModule(moduleBased,mod){function addIndividualModule(currentModule){mapNames[currentModule.moduleName]||(mapNames[currentModule.moduleName]=!0,allModules.push(currentModule),ModuleRegistry.register(currentModule,moduleBased))}__name(addIndividualModule,"addIndividualModule"),addIndividualModule(mod),mod.dependantModules&&mod.dependantModules.forEach(addModule.bind(null,moduleBased))}return __name(addModule,"addModule"),passedViaConstructor&&passedViaConstructor.forEach(addModule.bind(null,!0)),registered&&registered.forEach(addModule.bind(null,!ModuleRegistry.isPackageBased())),allModules},GridCoreCreator2.prototype.registerModuleUserComponents=function(beans,registeredModules){this.extractModuleEntity(registeredModules,function(module){return module.userComponents?module.userComponents:[]}).forEach(function(compMeta){beans.userComponentRegistry.registerDefaultComponent(compMeta.componentName,compMeta.componentClass)})},GridCoreCreator2.prototype.createProvidedBeans=function(eGridDiv,gridOptions,params){var frameworkOverrides=params?params.frameworkOverrides:null;missing(frameworkOverrides)&&(frameworkOverrides=new VanillaFrameworkOverrides);var seed={gridOptions,eGridDiv,globalEventListener:params?params.globalEventListener:null,frameworkOverrides};return params&&params.providedBeanInstances&&Object.assign(seed,params.providedBeanInstances),seed},GridCoreCreator2.prototype.createAgStackComponentsList=function(registeredModules){var components=[{componentName:"AgCheckbox",componentClass:AgCheckbox},{componentName:"AgRadioButton",componentClass:AgRadioButton},{componentName:"AgToggleButton",componentClass:AgToggleButton},{componentName:"AgInputTextField",componentClass:AgInputTextField},{componentName:"AgInputTextArea",componentClass:AgInputTextArea},{componentName:"AgInputNumberField",componentClass:AgInputNumberField},{componentName:"AgInputRange",componentClass:AgInputRange},{componentName:"AgSelect",componentClass:AgSelect},{componentName:"AgSlider",componentClass:AgSlider},{componentName:"AgGridBody",componentClass:GridBodyComp},{componentName:"AgHeaderRoot",componentClass:GridHeaderComp},{componentName:"AgSortIndicator",componentClass:SortIndicatorComp},{componentName:"AgPagination",componentClass:PaginationComp},{componentName:"AgOverlayWrapper",componentClass:OverlayWrapperComponent},{componentName:"AgGroupComponent",componentClass:AgGroupComponent},{componentName:"AgPanel",componentClass:AgPanel},{componentName:"AgDialog",componentClass:AgDialog},{componentName:"AgRowContainer",componentClass:RowContainerComp},{componentName:"AgFakeHorizontalScroll",componentClass:FakeHScrollComp},{componentName:"AgFakeVerticalScroll",componentClass:FakeVScrollComp}],moduleAgStackComps=this.extractModuleEntity(registeredModules,function(module){return module.agStackComponents?module.agStackComponents:[]});return components=components.concat(moduleAgStackComps)},GridCoreCreator2.prototype.createBeansList=function(rowModelType,registeredModules){var rowModelClass=this.getRowModelClass(rowModelType,registeredModules);if(rowModelClass){var beans=[rowModelClass,Beans,RowPositionUtils,CellPositionUtils,HeaderPositionUtils,PaginationAutoPageSizeService,GridApi,UserComponentRegistry,AgComponentUtils,ComponentMetadataProvider,ResizeObserverService,UserComponentFactory,RowContainerHeightService,HorizontalResizeService,LocaleService,GridOptionsValidator,PinnedRowModel,DragService,DisplayedGroupCreator,EventService,GridOptionsService,PopupService,SelectionService,FilterManager,ColumnModel,HeaderNavigationService,PaginationProxy,RowRenderer,ExpressionService,ColumnFactory,TemplateService,AlignedGridsService,NavigationService,ValueCache,ValueService,LoggerFactory,ColumnUtils,AutoWidthCalculator,StandardMenuFactory,DragAndDropService,ColumnApi,FocusService,MouseEventService,Environment,CellNavigationService,ValueFormatterService,StylingService,ScrollVisibleService,SortController,ColumnHoverService,ColumnAnimationService,SelectableService,AutoGroupColService,ChangeDetectionService,AnimationFrameService,UndoRedoService,AgStackComponentsRegistry,ColumnDefFactory,RowCssClassCalculator,RowNodeBlockLoader,RowNodeSorter,CtrlsService,PinnedWidthService,RowNodeEventThrottle,CtrlsFactory],moduleBeans=this.extractModuleEntity(registeredModules,function(module){return module.beans?module.beans:[]});beans.push.apply(beans,__spread$2(moduleBeans));var beansNoDuplicates=[];return beans.forEach(function(bean){beansNoDuplicates.indexOf(bean)<0&&beansNoDuplicates.push(bean)}),beansNoDuplicates}},GridCoreCreator2.prototype.extractModuleEntity=function(moduleEntities,extractor){return[].concat.apply([],__spread$2(moduleEntities.map(extractor)))},GridCoreCreator2.prototype.setColumnsAndData=function(beans){var columnDefs=beans.gridOptionsService.get("columnDefs");beans.columnModel.setColumnDefs(columnDefs||[],"gridInitializing"),beans.rowModel.start()},GridCoreCreator2.prototype.dispatchGridReadyEvent=function(beans){var readyEvent={type:Events.EVENT_GRID_READY};beans.eventService.dispatchEvent(readyEvent)},GridCoreCreator2.prototype.getRowModelClass=function(rowModelType,registeredModules){rowModelType||(rowModelType="clientSide");var rowModelClasses={};registeredModules.forEach(function(module){iterateObject(module.rowModels,function(key,value){rowModelClasses[key]=value})});var rowModelClass=rowModelClasses[rowModelType];if(exists(rowModelClass))return rowModelClass;var missingModules={clientSide:ModuleNames.ClientSideRowModelModule,infinite:ModuleNames.InfiniteRowModelModule,serverSide:ModuleNames.ServerSideRowModelModule,viewport:ModuleNames.ViewportRowModelModule};missingModules[rowModelType]?ModuleRegistry.assertRegistered(missingModules[rowModelType],"rowModelType = '"+rowModelType+"'"):console.error("AG Grid: could not find row model for rowModelType = "+rowModelType)},GridCoreCreator2}(),BaseComponentWrapper=function(){function BaseComponentWrapper2(){}return __name(BaseComponentWrapper2,"BaseComponentWrapper"),BaseComponentWrapper2.prototype.wrap=function(OriginalConstructor,mandatoryMethodList,optionalMethodList,componentType){var _this=this;void 0===optionalMethodList&&(optionalMethodList=[]);var wrapper=this.createWrapper(OriginalConstructor,componentType);return mandatoryMethodList.forEach(function(methodName){_this.createMethod(wrapper,methodName,!0)}),optionalMethodList.forEach(function(methodName){_this.createMethod(wrapper,methodName,!1)}),wrapper},BaseComponentWrapper2.prototype.unwrap=function(comp){return comp},BaseComponentWrapper2.prototype.createMethod=function(wrapper,methodName,mandatory){wrapper.addMethod(methodName,this.createMethodProxy(wrapper,methodName,mandatory))},BaseComponentWrapper2.prototype.createMethodProxy=function(wrapper,methodName,mandatory){return function(){return wrapper.hasMethod(methodName)?wrapper.callMethod(methodName,arguments):(mandatory&&console.warn("AG Grid: Framework component is missing the method "+methodName+"()"),null)}},BaseComponentWrapper2}();(BarColumnLabelPlacement2=BarColumnLabelPlacement||(BarColumnLabelPlacement={})).InsideBase="insideBase",BarColumnLabelPlacement2.InsideEnd="insideEnd",BarColumnLabelPlacement2.Center="center",BarColumnLabelPlacement2.OutsideEnd="outsideEnd";var globalObj=typeof global>"u"?{}:global;globalObj.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement,globalObj.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement,globalObj.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement,globalObj.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement,globalObj.Node=typeof Node>"u"?{}:Node,globalObj.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var RecursionType,RecursionType2,__read$2=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread$1=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$2(arguments[i]));return ar},ClientSideNodeManager=function(){function ClientSideNodeManager2(rootNode,gridOptionsService,eventService,columnModel,selectionService,beans){this.nextId=0,this.allNodesMap={},this.rootNode=rootNode,this.gridOptionsService=gridOptionsService,this.eventService=eventService,this.columnModel=columnModel,this.beans=beans,this.selectionService=selectionService,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=ClientSideNodeManager2.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[],this.postConstruct()}return __name(ClientSideNodeManager2,"ClientSideNodeManager"),ClientSideNodeManager2.prototype.postConstruct=function(){this.suppressParentsInRowNodes=this.gridOptionsService.is("suppressParentsInRowNodes"),this.isRowMasterFunc=this.gridOptionsService.get("isRowMaster"),this.doingTreeData=this.gridOptionsService.isTreeData(),this.doingMasterDetail=this.gridOptionsService.isMasterDetail()},ClientSideNodeManager2.prototype.getCopyOfNodesMap=function(){return _.cloneObject(this.allNodesMap)},ClientSideNodeManager2.prototype.getRowNode=function(id){return this.allNodesMap[id]},ClientSideNodeManager2.prototype.setRowData=function(rowData){var _this=this;if("string"!=typeof rowData){var rootNode=this.rootNode,sibling=this.rootNode.sibling;rootNode.childrenAfterFilter=null,rootNode.childrenAfterGroup=null,rootNode.childrenAfterAggFilter=null,rootNode.childrenAfterSort=null,rootNode.childrenMapped=null,rootNode.updateHasChildren(),this.nextId=0,this.allNodesMap={},rowData?rootNode.allLeafChildren=rowData.map(function(dataItem){return _this.createNode(dataItem,_this.rootNode,ClientSideNodeManager2.TOP_LEVEL)}):(rootNode.allLeafChildren=[],rootNode.childrenAfterGroup=[]),sibling&&(sibling.childrenAfterFilter=rootNode.childrenAfterFilter,sibling.childrenAfterGroup=rootNode.childrenAfterGroup,sibling.childrenAfterAggFilter=rootNode.childrenAfterAggFilter,sibling.childrenAfterSort=rootNode.childrenAfterSort,sibling.childrenMapped=rootNode.childrenMapped,sibling.allLeafChildren=rootNode.allLeafChildren)}else console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first")},ClientSideNodeManager2.prototype.updateRowData=function(rowDataTran,rowNodeOrder){var rowNodeTransaction={remove:[],update:[],add:[]},nodesToUnselect=[];return this.executeRemove(rowDataTran,rowNodeTransaction,nodesToUnselect),this.executeUpdate(rowDataTran,rowNodeTransaction,nodesToUnselect),this.executeAdd(rowDataTran,rowNodeTransaction),this.updateSelection(nodesToUnselect,"rowDataChanged"),rowNodeOrder&&_.sortRowNodesByOrder(this.rootNode.allLeafChildren,rowNodeOrder),rowNodeTransaction},ClientSideNodeManager2.prototype.updateSelection=function(nodesToUnselect,source){var selectionChanged=nodesToUnselect.length>0;if(selectionChanged&&nodesToUnselect.forEach(function(rowNode){rowNode.setSelected(!1,!1,!0,source)}),this.selectionService.updateGroupsFromChildrenSelections(source),selectionChanged){var event_1={type:Events.EVENT_SELECTION_CHANGED,source};this.eventService.dispatchEvent(event_1)}},ClientSideNodeManager2.prototype.executeAdd=function(rowDataTran,rowNodeTransaction){var _a,_this=this,add=rowDataTran.add,addIndex=rowDataTran.addIndex;if(!_.missingOrEmpty(add)){var newNodes=add.map(function(item){return _this.createNode(item,_this.rootNode,ClientSideNodeManager2.TOP_LEVEL)});if("number"==typeof addIndex&&addIndex>=0){var allLeafChildren=this.rootNode.allLeafChildren,len=allLeafChildren.length,normalisedAddIndex=addIndex;if(this.doingTreeData&&addIndex>0&&len>0)for(var i=0;i<len;i++)if((null===(_a=allLeafChildren[i])||void 0===_a?void 0:_a.rowIndex)==addIndex-1){normalisedAddIndex=i+1;break}var nodesBeforeIndex=allLeafChildren.slice(0,normalisedAddIndex),nodesAfterIndex=allLeafChildren.slice(normalisedAddIndex,allLeafChildren.length);this.rootNode.allLeafChildren=__spread$1(nodesBeforeIndex,newNodes,nodesAfterIndex)}else this.rootNode.allLeafChildren=__spread$1(this.rootNode.allLeafChildren,newNodes);this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),rowNodeTransaction.add=newNodes}},ClientSideNodeManager2.prototype.executeRemove=function(rowDataTran,rowNodeTransaction,nodesToUnselect){var _this=this,remove=rowDataTran.remove;if(!_.missingOrEmpty(remove)){var rowIdsRemoved={};remove.forEach(function(item){var rowNode=_this.lookupRowNode(item);rowNode&&(rowNode.isSelected()&&nodesToUnselect.push(rowNode),rowNode.clearRowTopAndRowIndex(),rowIdsRemoved[rowNode.id]=!0,delete _this.allNodesMap[rowNode.id],rowNodeTransaction.remove.push(rowNode))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(function(rowNode){return!rowIdsRemoved[rowNode.id]}),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}},ClientSideNodeManager2.prototype.executeUpdate=function(rowDataTran,rowNodeTransaction,nodesToUnselect){var _this=this,update=rowDataTran.update;_.missingOrEmpty(update)||update.forEach(function(item){var rowNode=_this.lookupRowNode(item);rowNode&&(rowNode.updateData(item),!rowNode.selectable&&rowNode.isSelected()&&nodesToUnselect.push(rowNode),_this.setMasterForRow(rowNode,item,ClientSideNodeManager2.TOP_LEVEL,!1),rowNodeTransaction.update.push(rowNode))})},ClientSideNodeManager2.prototype.lookupRowNode=function(data){var rowNode,getRowIdFunc=this.gridOptionsService.getRowIdFunc();if(getRowIdFunc){var id=getRowIdFunc({data,level:0});if(!(rowNode=this.allNodesMap[id]))return console.error("AG Grid: could not find row id="+id+", data item was not found for this id"),null}else if(!(rowNode=this.rootNode.allLeafChildren.find(function(node){return node.data===data})))return console.error("AG Grid: could not find data item as object was not found",data),console.error("Consider using getRowId to help the Grid find matching row data"),null;return rowNode||null},ClientSideNodeManager2.prototype.createNode=function(dataItem,parent,level){var node=new RowNode(this.beans);return node.group=!1,this.setMasterForRow(node,dataItem,level,!0),parent&&!this.suppressParentsInRowNodes&&(node.parent=parent),node.level=level,node.setDataAndId(dataItem,this.nextId.toString()),this.allNodesMap[node.id]&&console.warn("AG Grid: duplicate node id '"+node.id+"' detected from getRowId callback, this could cause issues in your grid."),this.allNodesMap[node.id]=node,this.nextId++,node},ClientSideNodeManager2.prototype.setMasterForRow=function(rowNode,data,level,setExpanded){if(this.doingTreeData)rowNode.setMaster(!1),setExpanded&&(rowNode.expanded=!1);else if(this.doingMasterDetail?this.isRowMasterFunc?rowNode.setMaster(this.isRowMasterFunc(data)):rowNode.setMaster(!0):rowNode.setMaster(!1),setExpanded){var rowGroupColumns=this.columnModel.getRowGroupColumns(),masterRowLevel=level+(rowGroupColumns?rowGroupColumns.length:0);rowNode.expanded=!!rowNode.master&&this.isExpanded(masterRowLevel)}},ClientSideNodeManager2.prototype.isExpanded=function(level){var expandByDefault=this.gridOptionsService.getNum("groupDefaultExpanded");return-1===expandByDefault||level<expandByDefault},ClientSideNodeManager2.TOP_LEVEL=0,ClientSideNodeManager2.ROOT_NODE_ID="ROOT_NODE_ID",ClientSideNodeManager2}(),__extends$c=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$b=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$1=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read$1(arguments[i]));return ar};(RecursionType2=RecursionType||(RecursionType={}))[RecursionType2.Normal=0]="Normal",RecursionType2[RecursionType2.AfterFilter=1]="AfterFilter",RecursionType2[RecursionType2.AfterFilterAndSort=2]="AfterFilterAndSort",RecursionType2[RecursionType2.PivotNodes=3]="PivotNodes";var RowType,ClientSideRowModel=function(_super){function ClientSideRowModel2(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.onRowHeightChanged_debounced=_.debounce(_this.onRowHeightChanged.bind(_this),100),_this.rowsToDisplay=[],_this}return __extends$c(ClientSideRowModel2,_super),__name(ClientSideRowModel2,"ClientSideRowModel"),ClientSideRowModel2.prototype.init=function(){var refreshEverythingFunc=this.refreshModel.bind(this,{step:ClientSideRowModelSteps.EVERYTHING}),animate=!this.gridOptionsService.is("suppressAnimationFrame"),refreshEverythingAfterColsChangedFunc=this.refreshModel.bind(this,{step:ClientSideRowModelSteps.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate});this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,refreshEverythingAfterColsChangedFunc),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,refreshEverythingFunc),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:ClientSideRowModelSteps.PIVOT})),this.addManagedListener(this.eventService,Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,refreshEverythingFunc),this.addManagedListener(this.eventService,Events.EVENT_GRID_STYLES_CHANGED,this.resetRowHeights.bind(this));var refreshMapListener=this.refreshModel.bind(this,{step:ClientSideRowModelSteps.MAP,keepRenderedRows:!0,animate});this.addManagedPropertyListener("groupRemoveSingleChildren",refreshMapListener),this.addManagedPropertyListener("groupRemoveLowestSingleChildren",refreshMapListener),this.rootNode=new RowNode(this.beans),this.nodeManager=new ClientSideNodeManager(this.rootNode,this.gridOptionsService,this.eventService,this.columnModel,this.selectionService,this.beans)},ClientSideRowModel2.prototype.start=function(){var rowData=this.gridOptionsService.get("rowData");rowData&&this.setRowData(rowData)},ClientSideRowModel2.prototype.ensureRowHeightsValid=function(startPixel,endPixel,startLimitIndex,endLimitIndex){var atLeastOneChange,res=!1;do{atLeastOneChange=!1;for(var rowAtStartPixel=this.getRowIndexAtPixel(startPixel),rowAtEndPixel=this.getRowIndexAtPixel(endPixel),firstRow=Math.max(rowAtStartPixel,startLimitIndex),lastRow=Math.min(rowAtEndPixel,endLimitIndex),rowIndex=firstRow;rowIndex<=lastRow;rowIndex++){var rowNode=this.getRow(rowIndex);if(rowNode.rowHeightEstimated){var rowHeight=this.gridOptionsService.getRowHeightForNode(rowNode);rowNode.setRowHeight(rowHeight.height),atLeastOneChange=!0,res=!0}}atLeastOneChange&&this.setRowTopAndRowIndex()}while(atLeastOneChange);return res},ClientSideRowModel2.prototype.setRowTopAndRowIndex=function(){for(var defaultRowHeight=this.environment.getDefaultRowHeight(),nextRowTop=0,displayedRowsMapped=new Set,allowEstimate=this.gridOptionsService.isDomLayout("normal"),i=0;i<this.rowsToDisplay.length;i++){var rowNode=this.rowsToDisplay[i];if(null!=rowNode.id&&displayedRowsMapped.add(rowNode.id),null==rowNode.rowHeight){var rowHeight=this.gridOptionsService.getRowHeightForNode(rowNode,allowEstimate,defaultRowHeight);rowNode.setRowHeight(rowHeight.height,rowHeight.estimated)}rowNode.setRowTop(nextRowTop),rowNode.setRowIndex(i),nextRowTop+=rowNode.rowHeight}return displayedRowsMapped},ClientSideRowModel2.prototype.clearRowTopAndRowIndex=function(changedPath,displayedRowsMapped){var changedPathActive=changedPath.isActive(),clearIfNotDisplayed=__name(function(rowNode){rowNode&&null!=rowNode.id&&!displayedRowsMapped.has(rowNode.id)&&rowNode.clearRowTopAndRowIndex()},"clearIfNotDisplayed"),recurse=__name(function(rowNode){if(clearIfNotDisplayed(rowNode),clearIfNotDisplayed(rowNode.detailNode),clearIfNotDisplayed(rowNode.sibling),rowNode.hasChildren()&&rowNode.childrenAfterGroup){var isRootNode=-1==rowNode.level;changedPathActive&&!isRootNode&&!rowNode.expanded||rowNode.childrenAfterGroup.forEach(recurse)}},"recurse");recurse(this.rootNode)},ClientSideRowModel2.prototype.ensureRowsAtPixel=function(rowNodes,pixel,increment){var _this=this;void 0===increment&&(increment=0);var indexAtPixelNow=this.getRowIndexAtPixel(pixel),rowNodeAtPixelNow=this.getRow(indexAtPixelNow),animate=!this.gridOptionsService.is("suppressAnimationFrame");return rowNodeAtPixelNow!==rowNodes[0]&&(rowNodes.forEach(function(rowNode){_.removeFromArray(_this.rootNode.allLeafChildren,rowNode)}),rowNodes.forEach(function(rowNode,idx){_.insertIntoArray(_this.rootNode.allLeafChildren,rowNode,Math.max(indexAtPixelNow+increment,0)+idx)}),this.refreshModel({step:ClientSideRowModelSteps.EVERYTHING,keepRenderedRows:!0,keepEditingRows:!0,animate}),!0)},ClientSideRowModel2.prototype.highlightRowAtPixel=function(rowNode,pixel){var indexAtPixelNow=null!=pixel?this.getRowIndexAtPixel(pixel):null,rowNodeAtPixelNow=null!=indexAtPixelNow?this.getRow(indexAtPixelNow):null;if(rowNodeAtPixelNow&&rowNode&&rowNodeAtPixelNow!==rowNode&&null!=pixel){var highlight=this.getHighlightPosition(pixel,rowNodeAtPixelNow);this.lastHighlightedRow&&this.lastHighlightedRow!==rowNodeAtPixelNow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),rowNodeAtPixelNow.setHighlighted(highlight),this.lastHighlightedRow=rowNodeAtPixelNow}else this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)},ClientSideRowModel2.prototype.getHighlightPosition=function(pixel,rowNode){if(!rowNode){var index=this.getRowIndexAtPixel(pixel);if(!(rowNode=this.getRow(index||0)))return RowHighlightPosition.Below}return pixel-rowNode.rowTop<rowNode.rowHeight/2?RowHighlightPosition.Above:RowHighlightPosition.Below},ClientSideRowModel2.prototype.getLastHighlightedRowNode=function(){return this.lastHighlightedRow},ClientSideRowModel2.prototype.isLastRowIndexKnown=function(){return!0},ClientSideRowModel2.prototype.getRowCount=function(){return this.rowsToDisplay?this.rowsToDisplay.length:0},ClientSideRowModel2.prototype.getTopLevelRowCount=function(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;var filteredChildren=this.rootNode.childrenAfterAggFilter;return filteredChildren?filteredChildren.length:0},ClientSideRowModel2.prototype.getTopLevelRowDisplayedIndex=function(topLevelIndex){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return topLevelIndex;var rowNode=this.rootNode.childrenAfterSort[topLevelIndex];if(this.gridOptionsService.is("groupHideOpenParents"))for(;rowNode.expanded&&rowNode.childrenAfterSort&&rowNode.childrenAfterSort.length>0;)rowNode=rowNode.childrenAfterSort[0];return rowNode.rowIndex},ClientSideRowModel2.prototype.getRowBounds=function(index){if(_.missing(this.rowsToDisplay))return null;var rowNode=this.rowsToDisplay[index];return rowNode?{rowTop:rowNode.rowTop,rowHeight:rowNode.rowHeight}:null},ClientSideRowModel2.prototype.onRowGroupOpened=function(){var animate=this.gridOptionsService.isAnimateRows();this.refreshModel({step:ClientSideRowModelSteps.MAP,keepRenderedRows:!0,animate})},ClientSideRowModel2.prototype.onFilterChanged=function(event){if(!event.afterDataChange){var animate=this.gridOptionsService.isAnimateRows(),step=0===event.columns.length||event.columns.some(function(col){return col.isPrimary()})?ClientSideRowModelSteps.FILTER:ClientSideRowModelSteps.FILTER_AGGREGATES;this.refreshModel({step,keepRenderedRows:!0,animate})}},ClientSideRowModel2.prototype.onSortChanged=function(){var animate=this.gridOptionsService.isAnimateRows();this.refreshModel({step:ClientSideRowModelSteps.SORT,keepRenderedRows:!0,animate,keepEditingRows:!0})},ClientSideRowModel2.prototype.getType=function(){return"clientSide"},ClientSideRowModel2.prototype.onValueChanged=function(){this.columnModel.isPivotActive()?this.refreshModel({step:ClientSideRowModelSteps.PIVOT}):this.refreshModel({step:ClientSideRowModelSteps.AGGREGATE})},ClientSideRowModel2.prototype.createChangePath=function(rowNodeTransactions){var noTransactions=_.missingOrEmpty(rowNodeTransactions),changedPath=new ChangedPath(!1,this.rootNode);return(noTransactions||this.gridOptionsService.isTreeData())&&changedPath.setInactive(),changedPath},ClientSideRowModel2.prototype.isSuppressModelUpdateAfterUpdateTransaction=function(params){if(!this.gridOptionsService.is("suppressModelUpdateAfterUpdateTransaction")||null==params.rowNodeTransactions)return!1;var transWithAddsOrDeletes=params.rowNodeTransactions.filter(function(tx){return null!=tx.add&&tx.add.length>0||null!=tx.remove&&tx.remove.length>0});return null==transWithAddsOrDeletes||0==transWithAddsOrDeletes.length},ClientSideRowModel2.prototype.buildRefreshModelParams=function(step){var paramsStep=ClientSideRowModelSteps.EVERYTHING,stepsMapped={everything:ClientSideRowModelSteps.EVERYTHING,group:ClientSideRowModelSteps.EVERYTHING,filter:ClientSideRowModelSteps.FILTER,map:ClientSideRowModelSteps.MAP,aggregate:ClientSideRowModelSteps.AGGREGATE,sort:ClientSideRowModelSteps.SORT,pivot:ClientSideRowModelSteps.PIVOT};if(_.exists(step)&&(paramsStep=stepsMapped[step]),!_.missing(paramsStep))return{step:paramsStep,keepRenderedRows:!0,keepEditingRows:!0,animate:!this.gridOptionsService.is("suppressAnimationFrame")};console.error("AG Grid: invalid step "+step+", available steps are "+Object.keys(stepsMapped).join(", "))},ClientSideRowModel2.prototype.refreshModel=function(paramsOrStep){var params="object"==typeof paramsOrStep&&"step"in paramsOrStep?paramsOrStep:this.buildRefreshModelParams(paramsOrStep);if(params&&!this.isSuppressModelUpdateAfterUpdateTransaction(params)){var changedPath=this.createChangePath(params.rowNodeTransactions);switch(params.step){case ClientSideRowModelSteps.EVERYTHING:this.doRowGrouping(params.groupState,params.rowNodeTransactions,params.rowNodeOrder,changedPath,!!params.afterColumnsChanged);case ClientSideRowModelSteps.FILTER:this.doFilter(changedPath);case ClientSideRowModelSteps.PIVOT:this.doPivot(changedPath);case ClientSideRowModelSteps.AGGREGATE:this.doAggregate(changedPath);case ClientSideRowModelSteps.FILTER_AGGREGATES:this.doFilterAggregates(changedPath);case ClientSideRowModelSteps.SORT:this.doSort(params.rowNodeTransactions,changedPath);case ClientSideRowModelSteps.MAP:this.doRowsToDisplay()}var displayedNodesMapped=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(changedPath,displayedNodesMapped);var event={type:Events.EVENT_MODEL_UPDATED,animate:params.animate,keepRenderedRows:params.keepRenderedRows,newData:params.newData,newPage:!1,keepUndoRedoStack:params.keepUndoRedoStack};this.eventService.dispatchEvent(event)}},ClientSideRowModel2.prototype.isEmpty=function(){var rowsMissing=_.missing(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length;return _.missing(this.rootNode)||rowsMissing||!this.columnModel.isReady()},ClientSideRowModel2.prototype.isRowsToRender=function(){return _.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0},ClientSideRowModel2.prototype.getNodesInRangeForSelection=function(firstInRange,lastInRange){var lastRow,firstRowHit=!lastInRange,lastRowHit=!1,result=[],groupsSelectChildren=this.gridOptionsService.is("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(function(rowNode){var lookingForLastRow=firstRowHit&&!lastRowHit;if(firstRowHit||(rowNode===lastInRange||rowNode===firstInRange)&&(firstRowHit=!0),!(rowNode.group&&groupsSelectChildren)){var inRange=firstRowHit&&!lastRowHit,childOfLastRow=rowNode.isParentOfNode(lastRow);(inRange||childOfLastRow)&&result.push(rowNode)}lookingForLastRow&&(rowNode===lastInRange||rowNode===firstInRange)&&(lastRowHit=!0,lastRow=rowNode===lastInRange?lastInRange:firstInRange)}),result},ClientSideRowModel2.prototype.setDatasource=function(datasource){console.error("AG Grid: should never call setDatasource on clientSideRowController")},ClientSideRowModel2.prototype.getTopLevelNodes=function(){return this.rootNode?this.rootNode.childrenAfterGroup:null},ClientSideRowModel2.prototype.getRootNode=function(){return this.rootNode},ClientSideRowModel2.prototype.getRow=function(index){return this.rowsToDisplay[index]},ClientSideRowModel2.prototype.isRowPresent=function(rowNode){return this.rowsToDisplay.indexOf(rowNode)>=0},ClientSideRowModel2.prototype.getRowIndexAtPixel=function(pixelToMatch){if(this.isEmpty()||0===this.rowsToDisplay.length)return-1;var bottomPointer=0,topPointer=this.rowsToDisplay.length-1;if(pixelToMatch<=0)return 0;if(_.last(this.rowsToDisplay).rowTop<=pixelToMatch)return this.rowsToDisplay.length-1;for(var oldBottomPointer=-1,oldTopPointer=-1;;){var midPointer=Math.floor((bottomPointer+topPointer)/2),currentRowNode=this.rowsToDisplay[midPointer];if(this.isRowInPixel(currentRowNode,pixelToMatch))return midPointer;if(currentRowNode.rowTop<pixelToMatch?bottomPointer=midPointer+1:currentRowNode.rowTop>pixelToMatch&&(topPointer=midPointer-1),oldBottomPointer===bottomPointer&&oldTopPointer===topPointer)return midPointer;oldBottomPointer=bottomPointer,oldTopPointer=topPointer}},ClientSideRowModel2.prototype.isRowInPixel=function(rowNode,pixelToMatch){var topPixel=rowNode.rowTop,bottomPixel=rowNode.rowTop+rowNode.rowHeight;return topPixel<=pixelToMatch&&bottomPixel>pixelToMatch},ClientSideRowModel2.prototype.forEachLeafNode=function(callback){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach(function(rowNode,index){return callback(rowNode,index)})},ClientSideRowModel2.prototype.forEachNode=function(callback,includeFooterNodes){void 0===includeFooterNodes&&(includeFooterNodes=!1),this.recursivelyWalkNodesAndCallback({nodes:__spread(this.rootNode.childrenAfterGroup||[]),callback,recursionType:RecursionType.Normal,index:0,includeFooterNodes})},ClientSideRowModel2.prototype.forEachNodeAfterFilter=function(callback,includeFooterNodes){void 0===includeFooterNodes&&(includeFooterNodes=!1),this.recursivelyWalkNodesAndCallback({nodes:__spread(this.rootNode.childrenAfterAggFilter||[]),callback,recursionType:RecursionType.AfterFilter,index:0,includeFooterNodes})},ClientSideRowModel2.prototype.forEachNodeAfterFilterAndSort=function(callback,includeFooterNodes){void 0===includeFooterNodes&&(includeFooterNodes=!1),this.recursivelyWalkNodesAndCallback({nodes:__spread(this.rootNode.childrenAfterSort||[]),callback,recursionType:RecursionType.AfterFilterAndSort,index:0,includeFooterNodes})},ClientSideRowModel2.prototype.forEachPivotNode=function(callback,includeFooterNodes){void 0===includeFooterNodes&&(includeFooterNodes=!1),this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback,recursionType:RecursionType.PivotNodes,index:0,includeFooterNodes})},ClientSideRowModel2.prototype.recursivelyWalkNodesAndCallback=function(params){var _a,nodes=params.nodes,callback=params.callback,recursionType=params.recursionType,includeFooterNodes=params.includeFooterNodes,index=params.index,firstNode=nodes[0];includeFooterNodes&&null!==(_a=null==firstNode?void 0:firstNode.parent)&&void 0!==_a&&_a.sibling&&nodes.push(firstNode.parent.sibling);for(var i=0;i<nodes.length;i++){var node=nodes[i];if(callback(node,index++),node.hasChildren()&&!node.footer){var nodeChildren=null;switch(recursionType){case RecursionType.Normal:nodeChildren=node.childrenAfterGroup;break;case RecursionType.AfterFilter:nodeChildren=node.childrenAfterAggFilter;break;case RecursionType.AfterFilterAndSort:nodeChildren=node.childrenAfterSort;break;case RecursionType.PivotNodes:nodeChildren=node.leafGroup?null:node.childrenAfterSort}nodeChildren&&(index=this.recursivelyWalkNodesAndCallback({nodes:__spread(nodeChildren),callback,recursionType,index,includeFooterNodes}))}}return index},ClientSideRowModel2.prototype.doAggregate=function(changedPath){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath})},ClientSideRowModel2.prototype.doFilterAggregates=function(changedPath){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter},ClientSideRowModel2.prototype.expandOrCollapseAll=function(expand){var usingTreeData=this.gridOptionsService.isTreeData(),usingPivotMode=this.columnModel.isPivotActive(),recursiveExpandOrCollapse=__name(function(rowNodes){rowNodes&&rowNodes.forEach(function(rowNode){var actionRow=__name(function(){rowNode.expanded=expand,recursiveExpandOrCollapse(rowNode.childrenAfterGroup)},"actionRow");usingTreeData?_.exists(rowNode.childrenAfterGroup)&&actionRow():usingPivotMode?!rowNode.leafGroup&&actionRow():rowNode.group&&actionRow()})},"recursiveExpandOrCollapse");this.rootNode&&recursiveExpandOrCollapse(this.rootNode.childrenAfterGroup),this.refreshModel({step:ClientSideRowModelSteps.MAP});var eventSource=expand?"expandAll":"collapseAll",event={type:Events.EVENT_EXPAND_COLLAPSE_ALL,source:eventSource};this.eventService.dispatchEvent(event)},ClientSideRowModel2.prototype.doSort=function(rowNodeTransactions,changedPath){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions,changedPath})},ClientSideRowModel2.prototype.doRowGrouping=function(groupState,rowNodeTransactions,rowNodeOrder,changedPath,afterColumnsChanged){if(this.groupStage){if(rowNodeTransactions?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions,rowNodeOrder,changedPath}):(this.groupStage.execute({rowNode:this.rootNode,changedPath,afterColumnsChanged}),this.restoreGroupState(groupState)),this.gridOptionsService.is("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",changedPath)){var event_1={type:Events.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(event_1)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren()},ClientSideRowModel2.prototype.restoreGroupState=function(groupState){groupState&&_.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(node,key){"boolean"==typeof groupState[key]&&(node.expanded=groupState[key])})},ClientSideRowModel2.prototype.doFilter=function(changedPath){this.filterStage.execute({rowNode:this.rootNode,changedPath})},ClientSideRowModel2.prototype.doPivot=function(changedPath){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath})},ClientSideRowModel2.prototype.getGroupState=function(){if(!this.rootNode.childrenAfterGroup||!this.gridOptionsService.is("rememberGroupStateWhenNewData"))return null;var result={};return _.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(node,key){return result[key]=node.expanded}),result},ClientSideRowModel2.prototype.getCopyOfNodesMap=function(){return this.nodeManager.getCopyOfNodesMap()},ClientSideRowModel2.prototype.getRowNode=function(id){if("string"==typeof id&&0==id.indexOf(RowNode.ID_PREFIX_ROW_GROUP)){var res_1=void 0;return this.forEachNode(function(node){node.id===id&&(res_1=node)}),res_1}return this.nodeManager.getRowNode(id)},ClientSideRowModel2.prototype.setRowData=function(rowData){var groupState=this.getGroupState();this.nodeManager.setRowData(rowData),this.selectionService.reset(),this.filterManager.onNewRowsLoaded("rowDataUpdated");var rowDataUpdatedEvent={type:Events.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(rowDataUpdatedEvent),this.refreshModel({step:ClientSideRowModelSteps.EVERYTHING,groupState,newData:!0})},ClientSideRowModel2.prototype.batchUpdateRowData=function(rowDataTransaction,callback){var _this=this;if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];var waitMillis=this.gridOptionsService.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(function(){_this.executeBatchUpdateRowData()},waitMillis)}this.rowDataTransactionBatch.push({rowDataTransaction,callback})},ClientSideRowModel2.prototype.flushAsyncTransactions=function(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())},ClientSideRowModel2.prototype.executeBatchUpdateRowData=function(){var _this=this;this.valueCache.onDataChanged();var callbackFuncsBound=[],rowNodeTrans=[],forceRowNodeOrder=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(function(tranItem){var rowNodeTran=_this.nodeManager.updateRowData(tranItem.rowDataTransaction,void 0);rowNodeTrans.push(rowNodeTran),tranItem.callback&&callbackFuncsBound.push(tranItem.callback.bind(null,rowNodeTran)),"number"==typeof tranItem.rowDataTransaction.addIndex&&(forceRowNodeOrder=!0)}),this.commonUpdateRowData(rowNodeTrans,void 0,forceRowNodeOrder),callbackFuncsBound.length>0&&window.setTimeout(function(){callbackFuncsBound.forEach(function(func){return func()})},0),rowNodeTrans.length>0){var event_2={type:Events.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:rowNodeTrans};this.eventService.dispatchEvent(event_2)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0},ClientSideRowModel2.prototype.updateRowData=function(rowDataTran,rowNodeOrder){this.valueCache.onDataChanged();var rowNodeTran=this.nodeManager.updateRowData(rowDataTran,rowNodeOrder),forceRowNodeOrder="number"==typeof rowDataTran.addIndex;return this.commonUpdateRowData([rowNodeTran],rowNodeOrder,forceRowNodeOrder),rowNodeTran},ClientSideRowModel2.prototype.createRowNodeOrder=function(){if(!this.gridOptionsService.is("suppressMaintainUnsortedOrder")){var orderMap={};if(this.rootNode&&this.rootNode.allLeafChildren)for(var index=0;index<this.rootNode.allLeafChildren.length;index++){orderMap[this.rootNode.allLeafChildren[index].id]=index}return orderMap}},ClientSideRowModel2.prototype.commonUpdateRowData=function(rowNodeTrans,rowNodeOrder,forceRowNodeOrder){var animate=!this.gridOptionsService.is("suppressAnimationFrame");forceRowNodeOrder&&(rowNodeOrder=this.createRowNodeOrder()),this.refreshModel({step:ClientSideRowModelSteps.EVERYTHING,rowNodeTransactions:rowNodeTrans,rowNodeOrder,keepRenderedRows:!0,keepEditingRows:!0,animate}),this.filterManager.onNewRowsLoaded("rowDataUpdated");var event={type:Events.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(event)},ClientSideRowModel2.prototype.doRowsToDisplay=function(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})},ClientSideRowModel2.prototype.onRowHeightChanged=function(){this.refreshModel({step:ClientSideRowModelSteps.MAP,keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})},ClientSideRowModel2.prototype.onRowHeightChangedDebounced=function(){this.onRowHeightChanged_debounced()},ClientSideRowModel2.prototype.resetRowHeights=function(){var atLeastOne=!1;this.forEachNode(function(rowNode){rowNode.setRowHeight(rowNode.rowHeight,!0);var detailNode=rowNode.detailNode;detailNode&&detailNode.setRowHeight(detailNode.rowHeight,!0),atLeastOne=!0}),this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),atLeastOne&&this.onRowHeightChanged()},__decorate$b([Autowired("columnModel")],ClientSideRowModel2.prototype,"columnModel",void 0),__decorate$b([Autowired("selectionService")],ClientSideRowModel2.prototype,"selectionService",void 0),__decorate$b([Autowired("filterManager")],ClientSideRowModel2.prototype,"filterManager",void 0),__decorate$b([Autowired("valueCache")],ClientSideRowModel2.prototype,"valueCache",void 0),__decorate$b([Autowired("beans")],ClientSideRowModel2.prototype,"beans",void 0),__decorate$b([Autowired("filterStage")],ClientSideRowModel2.prototype,"filterStage",void 0),__decorate$b([Autowired("sortStage")],ClientSideRowModel2.prototype,"sortStage",void 0),__decorate$b([Autowired("flattenStage")],ClientSideRowModel2.prototype,"flattenStage",void 0),__decorate$b([Optional("groupStage")],ClientSideRowModel2.prototype,"groupStage",void 0),__decorate$b([Optional("aggregationStage")],ClientSideRowModel2.prototype,"aggregationStage",void 0),__decorate$b([Optional("pivotStage")],ClientSideRowModel2.prototype,"pivotStage",void 0),__decorate$b([Optional("filterAggregatesStage")],ClientSideRowModel2.prototype,"filterAggregatesStage",void 0),__decorate$b([PostConstruct],ClientSideRowModel2.prototype,"init",null),ClientSideRowModel2=__decorate$b([Bean("rowModel")],ClientSideRowModel2)}(BeanStub),__extends$b=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$a=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FilterStage=function(_super){function FilterStage2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$b(FilterStage2,_super),__name(FilterStage2,"FilterStage"),FilterStage2.prototype.execute=function(params){var changedPath=params.changedPath;this.filterService.filter(changedPath)},__decorate$a([Autowired("filterService")],FilterStage2.prototype,"filterService",void 0),FilterStage2=__decorate$a([Bean("filterStage")],FilterStage2)}(BeanStub),__extends$a=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$9=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SortStage=function(_super){function SortStage2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$a(SortStage2,_super),__name(SortStage2,"SortStage"),SortStage2.prototype.execute=function(params){var _this=this,sortOptions=this.sortController.getSortOptions(),sortActive=_.exists(sortOptions)&&sortOptions.length>0,deltaSort=sortActive&&_.exists(params.rowNodeTransactions)&&this.gridOptionsService.is("deltaSort"),sortContainsGroupColumns=sortOptions.some(function(opt){return!!_this.columnModel.getGroupDisplayColumnForGroup(opt.column.getId())});this.sortService.sort(sortOptions,sortActive,deltaSort,params.rowNodeTransactions,params.changedPath,sortContainsGroupColumns)},__decorate$9([Autowired("sortService")],SortStage2.prototype,"sortService",void 0),__decorate$9([Autowired("sortController")],SortStage2.prototype,"sortController",void 0),__decorate$9([Autowired("columnModel")],SortStage2.prototype,"columnModel",void 0),SortStage2=__decorate$9([Bean("sortStage")],SortStage2)}(BeanStub),__extends$9=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$8=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FlattenStage=function(_super){function FlattenStage2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$9(FlattenStage2,_super),__name(FlattenStage2,"FlattenStage"),FlattenStage2.prototype.execute=function(params){var rootNode=params.rowNode,result=[],nextRowTop={value:0},skipLeafNodes=this.columnModel.isPivotMode(),showRootNode=skipLeafNodes&&rootNode.leafGroup,topList=showRootNode?[rootNode]:rootNode.childrenAfterSort;this.recursivelyAddToRowsToDisplay(topList,result,nextRowTop,skipLeafNodes,0);var atLeastOneRowPresent=result.length>0;return!showRootNode&&atLeastOneRowPresent&&this.gridOptionsService.is("groupIncludeTotalFooter")&&(rootNode.createFooter(),this.addRowNodeToRowsToDisplay(rootNode.sibling,result,nextRowTop,0)),result},FlattenStage2.prototype.recursivelyAddToRowsToDisplay=function(rowsToFlatten,result,nextRowTop,skipLeafNodes,uiLevel){if(!_.missingOrEmpty(rowsToFlatten))for(var hideOpenParents=this.gridOptionsService.is("groupHideOpenParents"),groupRemoveSingleChildren=this.gridOptionsService.is("groupRemoveSingleChildren"),groupRemoveLowestSingleChildren=!groupRemoveSingleChildren&&this.gridOptionsService.is("groupRemoveLowestSingleChildren"),i=0;i<rowsToFlatten.length;i++){var rowNode=rowsToFlatten[i],isParent=rowNode.hasChildren(),isSkippedLeafNode=skipLeafNodes&&!isParent,isRemovedSingleChildrenGroup=groupRemoveSingleChildren&&isParent&&1===rowNode.childrenAfterGroup.length,isRemovedLowestSingleChildrenGroup=groupRemoveLowestSingleChildren&&isParent&&rowNode.leafGroup&&1===rowNode.childrenAfterGroup.length,neverAllowToExpand=skipLeafNodes&&rowNode.leafGroup,isHiddenOpenParent=hideOpenParents&&rowNode.expanded&&!rowNode.master&&!neverAllowToExpand;if(!(isSkippedLeafNode||isHiddenOpenParent||isRemovedSingleChildrenGroup||isRemovedLowestSingleChildrenGroup)&&this.addRowNodeToRowsToDisplay(rowNode,result,nextRowTop,uiLevel),!skipLeafNodes||!rowNode.leafGroup)if(isParent){var excludedParent=isRemovedSingleChildrenGroup||isRemovedLowestSingleChildrenGroup;if(rowNode.expanded||excludedParent){var uiLevelForChildren=excludedParent?uiLevel:uiLevel+1;this.recursivelyAddToRowsToDisplay(rowNode.childrenAfterSort,result,nextRowTop,skipLeafNodes,uiLevelForChildren),this.gridOptionsService.is("groupIncludeFooter")&&this.addRowNodeToRowsToDisplay(rowNode.sibling,result,nextRowTop,uiLevel)}}else if(rowNode.master&&rowNode.expanded){var detailNode=this.createDetailNode(rowNode);this.addRowNodeToRowsToDisplay(detailNode,result,nextRowTop,uiLevel)}}},FlattenStage2.prototype.addRowNodeToRowsToDisplay=function(rowNode,result,nextRowTop,uiLevel){var isGroupMultiAutoColumn=this.gridOptionsService.isGroupMultiAutoColumn();result.push(rowNode),rowNode.setUiLevel(isGroupMultiAutoColumn?0:uiLevel)},FlattenStage2.prototype.createDetailNode=function(masterNode){if(_.exists(masterNode.detailNode))return masterNode.detailNode;var detailNode=new RowNode(this.beans);return detailNode.detail=!0,detailNode.selectable=!1,detailNode.parent=masterNode,_.exists(masterNode.id)&&(detailNode.id="detail_"+masterNode.id),detailNode.data=masterNode.data,detailNode.level=masterNode.level+1,masterNode.detailNode=detailNode,detailNode},__decorate$8([Autowired("columnModel")],FlattenStage2.prototype,"columnModel",void 0),__decorate$8([Autowired("beans")],FlattenStage2.prototype,"beans",void 0),FlattenStage2=__decorate$8([Bean("flattenStage")],FlattenStage2)}(BeanStub),__extends$8=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$7=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SortService=function(_super){function SortService2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$8(SortService2,_super),__name(SortService2,"SortService"),SortService2.prototype.init=function(){this.postSortFunc=this.getPostSortFunc()},SortService2.prototype.sort=function(sortOptions,sortActive,useDeltaSort,rowNodeTransactions,changedPath,sortContainsGroupColumns){var _this=this,groupMaintainOrder=this.gridOptionsService.is("groupMaintainOrder"),groupColumnsPresent=this.columnModel.getAllGridColumns().some(function(c){return c.isRowGroupActive()}),allDirtyNodes={};useDeltaSort&&rowNodeTransactions&&(allDirtyNodes=this.calculateDirtyNodes(rowNodeTransactions));var isPivotMode=this.columnModel.isPivotMode(),callback=__name(function(rowNode){_this.pullDownGroupDataForHideOpenParents(rowNode.childrenAfterAggFilter,!0);var skipSortingPivotLeafs=isPivotMode&&rowNode.leafGroup,skipSortingGroups=groupMaintainOrder&&groupColumnsPresent&&!rowNode.leafGroup&&!sortContainsGroupColumns;if(!sortActive||skipSortingGroups||skipSortingPivotLeafs){var childrenToBeSorted=rowNode.childrenAfterAggFilter.slice(0);if(groupMaintainOrder&&rowNode.childrenAfterSort){var indexedOrders_1=rowNode.childrenAfterSort.reduce(function(acc,row,idx){return acc[row.id]=idx,acc},{});childrenToBeSorted.sort(function(row1,row2){return(indexedOrders_1[row1.id]||0)-(indexedOrders_1[row2.id]||0)})}rowNode.childrenAfterSort=childrenToBeSorted}else rowNode.childrenAfterSort=useDeltaSort?_this.doDeltaSort(rowNode,allDirtyNodes,changedPath,sortOptions):_this.rowNodeSorter.doFullSort(rowNode.childrenAfterAggFilter,sortOptions);if(rowNode.sibling&&(rowNode.sibling.childrenAfterSort=rowNode.childrenAfterSort),_this.updateChildIndexes(rowNode),_this.postSortFunc){var params={nodes:rowNode.childrenAfterSort};_this.postSortFunc(params)}},"callback");changedPath&&changedPath.forEachChangedNodeDepthFirst(callback),this.updateGroupDataForHideOpenParents(changedPath)},SortService2.prototype.getPostSortFunc=function(){var postSortRows=this.gridOptionsService.getCallback("postSortRows");if(postSortRows)return postSortRows;var postSort=this.gridOptionsService.get("postSort");return postSort?function(params){return postSort(params.nodes)}:void 0},SortService2.prototype.calculateDirtyNodes=function(rowNodeTransactions){var dirtyNodes={},addNodesFunc=__name(function(rowNodes){rowNodes&&rowNodes.forEach(function(rowNode){return dirtyNodes[rowNode.id]=!0})},"addNodesFunc");return rowNodeTransactions&&rowNodeTransactions.forEach(function(tran){addNodesFunc(tran.add),addNodesFunc(tran.update),addNodesFunc(tran.remove)}),dirtyNodes},SortService2.prototype.doDeltaSort=function(rowNode,allTouchedNodes,changedPath,sortOptions){var _this=this,unsortedRows=rowNode.childrenAfterAggFilter,oldSortedRows=rowNode.childrenAfterSort;if(!oldSortedRows)return this.rowNodeSorter.doFullSort(unsortedRows,sortOptions);var untouchedRowsMap={},touchedRows=[];unsortedRows.forEach(function(row){allTouchedNodes[row.id]||!changedPath.canSkip(row)?touchedRows.push(row):untouchedRowsMap[row.id]=!0});var sortedUntouchedRows=oldSortedRows.filter(function(child){return untouchedRowsMap[child.id]}),mapNodeToSortedNode=__name(function(rowNode2,pos){return{currentPos:pos,rowNode:rowNode2}},"mapNodeToSortedNode"),sortedChangedRows=touchedRows.map(mapNodeToSortedNode).sort(function(a,b){return _this.rowNodeSorter.compareRowNodes(sortOptions,a,b)});return this.mergeSortedArrays(sortOptions,sortedChangedRows,sortedUntouchedRows.map(mapNodeToSortedNode)).map(function(_a){return _a.rowNode})},SortService2.prototype.mergeSortedArrays=function(sortOptions,arr1,arr2){for(var res=[],i=0,j=0;i<arr1.length&&j<arr2.length;){this.rowNodeSorter.compareRowNodes(sortOptions,arr1[i],arr2[j])<0?res.push(arr1[i++]):res.push(arr2[j++])}for(;i<arr1.length;)res.push(arr1[i++]);for(;j<arr2.length;)res.push(arr2[j++]);return res},SortService2.prototype.updateChildIndexes=function(rowNode){if(!_.missing(rowNode.childrenAfterSort))for(var listToSort=rowNode.childrenAfterSort,i=0;i<listToSort.length;i++){var child=listToSort[i],firstChild=0===i,lastChild=i===rowNode.childrenAfterSort.length-1;child.setFirstChild(firstChild),child.setLastChild(lastChild),child.setChildIndex(i)}},SortService2.prototype.updateGroupDataForHideOpenParents=function(changedPath){var _this=this;if(this.gridOptionsService.is("groupHideOpenParents")){if(this.gridOptionsService.isTreeData()){return _.doOnce(function(){return console.warn("AG Grid: The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them (as opposed to Row Grouping, which only has Aggregated Values at the group level).")},"sortService.hideOpenParentsWithTreeData"),!1}var callback=__name(function(rowNode){_this.pullDownGroupDataForHideOpenParents(rowNode.childrenAfterSort,!1),rowNode.childrenAfterSort.forEach(function(child){child.hasChildren()&&callback(child)})},"callback");changedPath&&changedPath.executeFromRootNode(function(rowNode){return callback(rowNode)})}},SortService2.prototype.pullDownGroupDataForHideOpenParents=function(rowNodes,clearOperation){var _this=this;!this.gridOptionsService.is("groupHideOpenParents")||_.missing(rowNodes)||rowNodes.forEach(function(childRowNode){_this.columnModel.getGroupDisplayColumns().forEach(function(groupDisplayCol){var showRowGroup=groupDisplayCol.getColDef().showRowGroup;if("string"==typeof showRowGroup){var displayingGroupKey=showRowGroup,rowGroupColumn=_this.columnModel.getPrimaryColumn(displayingGroupKey);if(!(rowGroupColumn===childRowNode.rowGroupColumn))if(clearOperation)childRowNode.setGroupValue(groupDisplayCol.getId(),void 0);else{var parentToStealFrom=childRowNode.getFirstChildOfFirstChild(rowGroupColumn);parentToStealFrom&&childRowNode.setGroupValue(groupDisplayCol.getId(),parentToStealFrom.key)}}else console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup")})})},__decorate$7([Autowired("columnModel")],SortService2.prototype,"columnModel",void 0),__decorate$7([Autowired("rowNodeSorter")],SortService2.prototype,"rowNodeSorter",void 0),__decorate$7([PostConstruct],SortService2.prototype,"init",null),SortService2=__decorate$7([Bean("sortService")],SortService2)}(BeanStub),__extends$7=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$6=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FilterService=function(_super){function FilterService2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$7(FilterService2,_super),__name(FilterService2,"FilterService"),FilterService2.prototype.filter=function(changedPath){var filterActive=this.filterManager.isColumnFilterPresent()||this.filterManager.isQuickFilterPresent()||this.filterManager.isExternalFilterPresent();this.filterNodes(filterActive,changedPath)},FilterService2.prototype.filterNodes=function(filterActive,changedPath){var _this=this,filterCallback=__name(function(rowNode,includeChildNodes){rowNode.hasChildren()&&filterActive&&!includeChildNodes?rowNode.childrenAfterFilter=rowNode.childrenAfterGroup.filter(function(childNode){var passBecauseChildren=childNode.childrenAfterFilter&&childNode.childrenAfterFilter.length>0,passBecauseDataPasses=childNode.data&&_this.filterManager.doesRowPassFilter({rowNode:childNode});return passBecauseChildren||passBecauseDataPasses}):rowNode.childrenAfterFilter=rowNode.childrenAfterGroup,rowNode.sibling&&(rowNode.sibling.childrenAfterFilter=rowNode.childrenAfterFilter)},"filterCallback");if(this.doingTreeDataFiltering()){var treeDataDepthFirstFilter_1=__name(function(rowNode,alreadyFoundInParent){if(rowNode.childrenAfterGroup)for(var i=0;i<rowNode.childrenAfterGroup.length;i++){var childNode=rowNode.childrenAfterGroup[i],foundInParent=alreadyFoundInParent||_this.filterManager.doesRowPassFilter({rowNode:childNode});childNode.childrenAfterGroup?treeDataDepthFirstFilter_1(rowNode.childrenAfterGroup[i],foundInParent):filterCallback(childNode,foundInParent)}filterCallback(rowNode,alreadyFoundInParent)},"treeDataDepthFirstFilter_1"),treeDataFilterCallback=__name(function(rowNode){return treeDataDepthFirstFilter_1(rowNode,!1)},"treeDataFilterCallback");changedPath.executeFromRootNode(treeDataFilterCallback)}else{var defaultFilterCallback=__name(function(rowNode){return filterCallback(rowNode,!1)},"defaultFilterCallback");changedPath.forEachChangedNodeDepthFirst(defaultFilterCallback,!0)}},FilterService2.prototype.doingTreeDataFiltering=function(){return this.gridOptionsService.isTreeData()&&!this.gridOptionsService.is("excludeChildrenWhenTreeDataFiltering")},__decorate$6([Autowired("filterManager")],FilterService2.prototype,"filterManager",void 0),FilterService2=__decorate$6([Bean("filterService")],FilterService2)}(BeanStub),__extends$6=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$5=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ImmutableService=function(_super){function ImmutableService2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$6(ImmutableService2,_super),__name(ImmutableService2,"ImmutableService"),ImmutableService2.prototype.postConstruct=function(){"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel)},ImmutableService2.prototype.isActive=function(){var getRowIdProvided=this.gridOptionsService.exists("getRowId"),immutableData=this.gridOptionsService.is("immutableData");return!this.gridOptionsService.is("resetRowDataOnUpdate")&&(getRowIdProvided||immutableData)},ImmutableService2.prototype.setRowData=function(rowData){var transactionAndMap=this.createTransactionForRowData(rowData);if(transactionAndMap){var _a=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}(transactionAndMap,2),transaction=_a[0],orderIdMap=_a[1],nodeTransaction=this.clientSideRowModel.updateRowData(transaction,orderIdMap);nodeTransaction&&this.rowRenderer.refreshFullWidthRows(nodeTransaction.update)}},ImmutableService2.prototype.createTransactionForRowData=function(rowData){if(_.missing(this.clientSideRowModel))console.error("AG Grid: ImmutableService only works with ClientSideRowModel");else{var getRowIdFunc=this.gridOptionsService.getRowIdFunc();if(null!=getRowIdFunc){var transaction={remove:[],update:[],add:[]},existingNodesMap=this.clientSideRowModel.getCopyOfNodesMap(),orderMap=this.gridOptionsService.is("suppressMaintainUnsortedOrder")?void 0:{};return _.exists(rowData)&&rowData.forEach(function(data,index){var id=getRowIdFunc({data,level:0}),existingNode=existingNodesMap[id];(orderMap&&(orderMap[id]=index),existingNode)?(existingNode.data!==data&&transaction.update.push(data),existingNodesMap[id]=void 0):transaction.add.push(data)}),_.iterateObject(existingNodesMap,function(id,rowNode){rowNode&&transaction.remove.push(rowNode.data)}),[transaction,orderMap]}console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!")}},__decorate$5([Autowired("rowModel")],ImmutableService2.prototype,"rowModel",void 0),__decorate$5([Autowired("rowRenderer")],ImmutableService2.prototype,"rowRenderer",void 0),__decorate$5([PostConstruct],ImmutableService2.prototype,"postConstruct",null),ImmutableService2=__decorate$5([Bean("immutableService")],ImmutableService2)}(BeanStub),ClientSideRowModelModule={version:"29.1.0",moduleName:ModuleNames.ClientSideRowModelModule,beans:[FilterStage,SortStage,FlattenStage,SortService,FilterService,ImmutableService],rowModels:{clientSide:ClientSideRowModel}},__extends$5=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$4=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},InfiniteBlock=function(_super){function InfiniteBlock2(id,parentCache,params){var _this=_super.call(this,id)||this;return _this.parentCache=parentCache,_this.params=params,_this.startRow=id*params.blockSize,_this.endRow=_this.startRow+params.blockSize,_this}return __extends$5(InfiniteBlock2,_super),__name(InfiniteBlock2,"InfiniteBlock"),InfiniteBlock2.prototype.postConstruct=function(){this.createRowNodes()},InfiniteBlock2.prototype.getBlockStateJson=function(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}},InfiniteBlock2.prototype.setDataAndId=function(rowNode,data,index){!rowNode.id&&rowNode.alreadyRendered&&(rowNode.alreadyRendered=!1),_.exists(data)?rowNode.setDataAndId(data,index.toString()):rowNode.setDataAndId(void 0,void 0)},InfiniteBlock2.prototype.loadFromDatasource=function(){var _this=this,params=this.createLoadParams();_.missing(this.params.datasource.getRows)?console.warn("AG Grid: datasource is missing getRows method"):window.setTimeout(function(){_this.params.datasource.getRows(params)},0)},InfiniteBlock2.prototype.processServerFail=function(){},InfiniteBlock2.prototype.createLoadParams=function(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gridOptionsService.context}},InfiniteBlock2.prototype.forEachNode=function(callback,sequence,rowCount){var _this=this;this.rowNodes.forEach(function(rowNode,index){_this.startRow+index<rowCount&&callback(rowNode,sequence.next())})},InfiniteBlock2.prototype.getLastAccessed=function(){return this.lastAccessed},InfiniteBlock2.prototype.getRow=function(rowIndex,dontTouchLastAccessed){void 0===dontTouchLastAccessed&&(dontTouchLastAccessed=!1),dontTouchLastAccessed||(this.lastAccessed=this.params.lastAccessedSequence.next());var localIndex=rowIndex-this.startRow;return this.rowNodes[localIndex]},InfiniteBlock2.prototype.getStartRow=function(){return this.startRow},InfiniteBlock2.prototype.getEndRow=function(){return this.endRow},InfiniteBlock2.prototype.createRowNodes=function(){this.rowNodes=[];for(var i=0;i<this.params.blockSize;i++){var rowIndex=this.startRow+i,rowNode=new RowNode(this.beans);rowNode.setRowHeight(this.params.rowHeight),rowNode.uiLevel=0,rowNode.setRowIndex(rowIndex),rowNode.setRowTop(this.params.rowHeight*rowIndex),this.rowNodes.push(rowNode)}},InfiniteBlock2.prototype.processServerResult=function(params){var _this=this;this.rowNodes.forEach(function(rowNode,index){var data=params.rowData?params.rowData[index]:void 0;_this.setDataAndId(rowNode,data,_this.startRow+index)});var finalRowCount=null!=params.rowCount&&params.rowCount>=0?params.rowCount:void 0;this.parentCache.pageLoaded(this,finalRowCount)},InfiniteBlock2.prototype.destroyRowNodes=function(){this.rowNodes.forEach(function(rowNode){rowNode.clearRowTopAndRowIndex()})},__decorate$4([Autowired("beans")],InfiniteBlock2.prototype,"beans",void 0),__decorate$4([PostConstruct],InfiniteBlock2.prototype,"postConstruct",null),__decorate$4([PreDestroy],InfiniteBlock2.prototype,"destroyRowNodes",null),InfiniteBlock2}(RowNodeBlock),__extends$4=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$3=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},InfiniteCache=function(_super){function InfiniteCache2(params){var _this=_super.call(this)||this;return _this.lastRowIndexKnown=!1,_this.blocks={},_this.blockCount=0,_this.rowCount=params.initialRowCount,_this.params=params,_this}return __extends$4(InfiniteCache2,_super),__name(InfiniteCache2,"InfiniteCache"),InfiniteCache2.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("InfiniteCache")},InfiniteCache2.prototype.getRow=function(rowIndex,dontCreatePage){void 0===dontCreatePage&&(dontCreatePage=!1);var blockId=Math.floor(rowIndex/this.params.blockSize),block=this.blocks[blockId];if(!block){if(dontCreatePage)return;block=this.createBlock(blockId)}return block.getRow(rowIndex)},InfiniteCache2.prototype.createBlock=function(blockNumber){var newBlock=this.createBean(new InfiniteBlock(blockNumber,this,this.params));return this.blocks[newBlock.getId()]=newBlock,this.blockCount++,this.purgeBlocksIfNeeded(newBlock),this.params.rowNodeBlockLoader.addBlock(newBlock),newBlock},InfiniteCache2.prototype.refreshCache=function(){0==this.blockCount?this.purgeCache():(this.getBlocksInOrder().forEach(function(block){return block.setStateWaitingToLoad()}),this.params.rowNodeBlockLoader.checkBlockToLoad())},InfiniteCache2.prototype.destroyAllBlocks=function(){var _this=this;this.getBlocksInOrder().forEach(function(block){return _this.destroyBlock(block)})},InfiniteCache2.prototype.getRowCount=function(){return this.rowCount},InfiniteCache2.prototype.isLastRowIndexKnown=function(){return this.lastRowIndexKnown},InfiniteCache2.prototype.pageLoaded=function(block,lastRow){this.isAlive()&&(this.logger.log("onPageLoaded: page = "+block.getId()+", lastRow = "+lastRow),this.checkRowCount(block,lastRow),this.onCacheUpdated())},InfiniteCache2.prototype.purgeBlocksIfNeeded=function(blockToExclude){var _this=this,blocksForPurging=this.getBlocksInOrder().filter(function(b){return b!=blockToExclude}),lastAccessedComparator=__name(function(a,b){return b.getLastAccessed()-a.getLastAccessed()},"lastAccessedComparator");blocksForPurging.sort(lastAccessedComparator);var maxBlocksProvided=this.params.maxBlocksInCache>0,blocksToKeep=maxBlocksProvided?this.params.maxBlocksInCache-1:null,emptyBlocksToKeep=InfiniteCache2.MAX_EMPTY_BLOCKS_TO_KEEP-1;blocksForPurging.forEach(function(block,index){if(block.getState()===InfiniteBlock.STATE_WAITING_TO_LOAD&&index>=emptyBlocksToKeep||!!maxBlocksProvided&&index>=blocksToKeep){if(_this.isBlockCurrentlyDisplayed(block)||_this.isBlockFocused(block))return;_this.removeBlockFromCache(block)}})},InfiniteCache2.prototype.isBlockFocused=function(block){var focusedCell=this.focusService.getFocusCellToUseAfterRefresh();if(!focusedCell||null!=focusedCell.rowPinned)return!1;var blockIndexStart=block.getStartRow(),blockIndexEnd=block.getEndRow();return focusedCell.rowIndex>=blockIndexStart&&focusedCell.rowIndex<blockIndexEnd},InfiniteCache2.prototype.isBlockCurrentlyDisplayed=function(block){var startIndex=block.getStartRow(),endIndex=block.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(startIndex,endIndex)},InfiniteCache2.prototype.removeBlockFromCache=function(blockToRemove){blockToRemove&&this.destroyBlock(blockToRemove)},InfiniteCache2.prototype.checkRowCount=function(block,lastRow){if("number"==typeof lastRow&&lastRow>=0)this.rowCount=lastRow,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){var lastRowIndexPlusOverflow=(block.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<lastRowIndexPlusOverflow&&(this.rowCount=lastRowIndexPlusOverflow)}},InfiniteCache2.prototype.setRowCount=function(rowCount,lastRowIndexKnown){this.rowCount=rowCount,_.exists(lastRowIndexKnown)&&(this.lastRowIndexKnown=lastRowIndexKnown),this.lastRowIndexKnown||this.rowCount%this.params.blockSize==0&&this.rowCount++,this.onCacheUpdated()},InfiniteCache2.prototype.forEachNodeDeep=function(callback){var _this=this,sequence=new NumberSequence;this.getBlocksInOrder().forEach(function(block){return block.forEachNode(callback,sequence,_this.rowCount)})},InfiniteCache2.prototype.getBlocksInOrder=function(){var blockComparator=__name(function(a,b){return a.getId()-b.getId()},"blockComparator");return _.getAllValuesInObject(this.blocks).sort(blockComparator)},InfiniteCache2.prototype.destroyBlock=function(block){delete this.blocks[block.getId()],this.destroyBean(block),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(block)},InfiniteCache2.prototype.onCacheUpdated=function(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();var event_1={type:Events.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(event_1)}},InfiniteCache2.prototype.destroyAllBlocksPastVirtualRowCount=function(){var _this=this,blocksToDestroy=[];this.getBlocksInOrder().forEach(function(block){block.getId()*_this.params.blockSize>=_this.rowCount&&blocksToDestroy.push(block)}),blocksToDestroy.length>0&&blocksToDestroy.forEach(function(block){return _this.destroyBlock(block)})},InfiniteCache2.prototype.purgeCache=function(){var _this=this;this.getBlocksInOrder().forEach(function(block){return _this.removeBlockFromCache(block)}),this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()},InfiniteCache2.prototype.getRowNodesInRange=function(firstInRange,lastInRange){var _this=this,result=[],lastBlockId=-1,inActiveRange=!1,numberSequence=new NumberSequence;_.missing(firstInRange)&&(inActiveRange=!0);var foundGapInSelection=!1;return this.getBlocksInOrder().forEach(function(block){if(!foundGapInSelection){if(inActiveRange&&lastBlockId+1!==block.getId())return void(foundGapInSelection=!0);lastBlockId=block.getId(),block.forEachNode(function(rowNode){var hitFirstOrLast=rowNode===firstInRange||rowNode===lastInRange;(inActiveRange||hitFirstOrLast)&&result.push(rowNode),hitFirstOrLast&&(inActiveRange=!inActiveRange)},numberSequence,_this.rowCount)}}),foundGapInSelection||inActiveRange?[]:result},InfiniteCache2.MAX_EMPTY_BLOCKS_TO_KEEP=2,__decorate$3([Autowired("rowRenderer")],InfiniteCache2.prototype,"rowRenderer",void 0),__decorate$3([Autowired("focusService")],InfiniteCache2.prototype,"focusService",void 0),__decorate$3([(paramIndex=0,decorator=Qualifier("loggerFactory"),function(target,key){decorator(target,key,paramIndex)})],InfiniteCache2.prototype,"setBeans",null),__decorate$3([PreDestroy],InfiniteCache2.prototype,"destroyAllBlocks",null),InfiniteCache2;var paramIndex,decorator}(BeanStub),__extends$3=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},InfiniteRowModel=function(_super){function InfiniteRowModel2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$3(InfiniteRowModel2,_super),__name(InfiniteRowModel2,"InfiniteRowModel"),InfiniteRowModel2.prototype.getRowBounds=function(index){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*index}},InfiniteRowModel2.prototype.ensureRowHeightsValid=function(startPixel,endPixel,startLimitIndex,endLimitIndex){return!1},InfiniteRowModel2.prototype.init=function(){var _this=this;this.gridOptionsService.isRowModelType("infinite")&&(this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(function(){return _this.destroyCache()}),this.verifyProps())},InfiniteRowModel2.prototype.verifyProps=function(){if(this.gridOptionsService.exists("initialGroupOrderComparator")||this.gridOptionsService.exists("defaultGroupOrderComparator")){_.doOnce(function(){return console.warn("AG Grid: initialGroupOrderComparator cannot be used with Infinite Row Model. If using Infinite Row Model, then sorting is done on the server side, nothing to do with the client.")},"IRM.InitialGroupOrderComparator")}},InfiniteRowModel2.prototype.start=function(){this.setDatasource(this.gridOptionsService.get("datasource"))},InfiniteRowModel2.prototype.destroyDatasource=function(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)},InfiniteRowModel2.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this))},InfiniteRowModel2.prototype.onFilterChanged=function(){this.reset()},InfiniteRowModel2.prototype.onSortChanged=function(){this.reset()},InfiniteRowModel2.prototype.onColumnEverything=function(){(!this.cacheParams||this.isSortModelDifferent())&&this.reset()},InfiniteRowModel2.prototype.isSortModelDifferent=function(){return!_.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())},InfiniteRowModel2.prototype.getType=function(){return"infinite"},InfiniteRowModel2.prototype.setDatasource=function(datasource){this.destroyDatasource(),this.datasource=datasource,datasource&&this.reset()},InfiniteRowModel2.prototype.isEmpty=function(){return!this.infiniteCache},InfiniteRowModel2.prototype.isRowsToRender=function(){return!!this.infiniteCache},InfiniteRowModel2.prototype.getNodesInRangeForSelection=function(firstInRange,lastInRange){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(firstInRange,lastInRange):[]},InfiniteRowModel2.prototype.reset=function(){if(this.datasource){null!=this.gridOptionsService.getRowIdFunc()||this.selectionService.reset(),this.resetCache();var event=this.createModelUpdatedEvent();this.eventService.dispatchEvent(event)}},InfiniteRowModel2.prototype.createModelUpdatedEvent=function(){return{type:Events.EVENT_MODEL_UPDATED,newPage:!1,newData:!1,keepRenderedRows:!0,animate:!1}},InfiniteRowModel2.prototype.resetCache=function(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.defaultIfInvalid(this.gridOptionsService.getNum("infiniteInitialRowCount"),1),maxBlocksInCache:this.gridOptionsService.getNum("maxBlocksInCache"),rowHeight:this.gridOptionsService.getRowHeightAsNumber(),overflowSize:this.defaultIfInvalid(this.gridOptionsService.getNum("cacheOverflowSize"),1),blockSize:this.defaultIfInvalid(this.gridOptionsService.getNum("cacheBlockSize"),100),lastAccessedSequence:new NumberSequence},this.infiniteCache=this.createBean(new InfiniteCache(this.cacheParams))},InfiniteRowModel2.prototype.defaultIfInvalid=function(value,defaultValue){return value>0?value:defaultValue},InfiniteRowModel2.prototype.destroyCache=function(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))},InfiniteRowModel2.prototype.onCacheUpdated=function(){var event=this.createModelUpdatedEvent();this.eventService.dispatchEvent(event)},InfiniteRowModel2.prototype.getRow=function(rowIndex){if(this.infiniteCache&&!(rowIndex>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(rowIndex)},InfiniteRowModel2.prototype.getRowNode=function(id){var result;return this.forEachNode(function(rowNode){rowNode.id===id&&(result=rowNode)}),result},InfiniteRowModel2.prototype.forEachNode=function(callback){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(callback)},InfiniteRowModel2.prototype.getTopLevelRowCount=function(){return this.getRowCount()},InfiniteRowModel2.prototype.getTopLevelRowDisplayedIndex=function(topLevelIndex){return topLevelIndex},InfiniteRowModel2.prototype.getRowIndexAtPixel=function(pixel){if(0!==this.rowHeight){var rowIndexForPixel=Math.floor(pixel/this.rowHeight),lastRowIndex=this.getRowCount()-1;return rowIndexForPixel>lastRowIndex?lastRowIndex:rowIndexForPixel}return 0},InfiniteRowModel2.prototype.getRowCount=function(){return this.infiniteCache?this.infiniteCache.getRowCount():0},InfiniteRowModel2.prototype.isRowPresent=function(rowNode){return!!this.getRowNode(rowNode.id)},InfiniteRowModel2.prototype.refreshCache=function(){this.infiniteCache&&this.infiniteCache.refreshCache()},InfiniteRowModel2.prototype.purgeCache=function(){this.infiniteCache&&this.infiniteCache.purgeCache()},InfiniteRowModel2.prototype.isLastRowIndexKnown=function(){return!!this.infiniteCache&&this.infiniteCache.isLastRowIndexKnown()},InfiniteRowModel2.prototype.setRowCount=function(rowCount,lastRowIndexKnown){this.infiniteCache&&this.infiniteCache.setRowCount(rowCount,lastRowIndexKnown)},__decorate$2([Autowired("filterManager")],InfiniteRowModel2.prototype,"filterManager",void 0),__decorate$2([Autowired("sortController")],InfiniteRowModel2.prototype,"sortController",void 0),__decorate$2([Autowired("selectionService")],InfiniteRowModel2.prototype,"selectionService",void 0),__decorate$2([Autowired("rowRenderer")],InfiniteRowModel2.prototype,"rowRenderer",void 0),__decorate$2([Autowired("rowNodeBlockLoader")],InfiniteRowModel2.prototype,"rowNodeBlockLoader",void 0),__decorate$2([PostConstruct],InfiniteRowModel2.prototype,"init",null),__decorate$2([PreDestroy],InfiniteRowModel2.prototype,"destroyDatasource",null),InfiniteRowModel2=__decorate$2([Bean("rowModel")],InfiniteRowModel2)}(BeanStub),InfiniteRowModelModule={version:"29.1.0",moduleName:ModuleNames.InfiniteRowModelModule,rowModels:{infinite:InfiniteRowModel}},BaseCreator=function(){function BaseCreator2(){}return __name(BaseCreator2,"BaseCreator"),BaseCreator2.prototype.setBeans=function(beans){this.beans=beans},BaseCreator2.prototype.getFileName=function(fileName){var extension=this.getDefaultFileExtension();return(null==fileName||!fileName.length)&&(fileName=this.getDefaultFileName()),-1===fileName.indexOf(".")?fileName+"."+extension:fileName},BaseCreator2.prototype.getData=function(params){var serializingSession=this.createSerializingSession(params);return this.beans.gridSerializer.serialize(serializingSession,params)},BaseCreator2}(),BaseGridSerializingSession=function(){function BaseGridSerializingSession2(config){this.groupColumns=[];var columnModel=config.columnModel,valueService=config.valueService,gridOptionsService=config.gridOptionsService,processCellCallback=config.processCellCallback,processHeaderCallback=config.processHeaderCallback,processGroupHeaderCallback=config.processGroupHeaderCallback,processRowGroupCallback=config.processRowGroupCallback;this.columnModel=columnModel,this.valueService=valueService,this.gridOptionsService=gridOptionsService,this.processCellCallback=processCellCallback,this.processHeaderCallback=processHeaderCallback,this.processGroupHeaderCallback=processGroupHeaderCallback,this.processRowGroupCallback=processRowGroupCallback}return __name(BaseGridSerializingSession2,"BaseGridSerializingSession"),BaseGridSerializingSession2.prototype.prepare=function(columnsToExport){this.groupColumns=columnsToExport.filter(function(col){return!!col.getColDef().showRowGroup})},BaseGridSerializingSession2.prototype.extractHeaderValue=function(column){return this.getHeaderName(this.processHeaderCallback,column)??""},BaseGridSerializingSession2.prototype.extractRowCellValue=function(column,index,accumulatedRowIndex,type,node){var value=!this.gridOptionsService.is("groupHideOpenParents")&&this.shouldRenderGroupSummaryCell(node,column,index)?this.createValueForGroupNode(node):this.valueService.getValue(column,node);return this.processCell({accumulatedRowIndex,rowNode:node,column,value,processCellCallback:this.processCellCallback,type})??""},BaseGridSerializingSession2.prototype.shouldRenderGroupSummaryCell=function(node,column,currentColumnIndex){var _a;if(!(node&&node.group))return!1;if(-1!==this.groupColumns.indexOf(column)){if(null!==(_a=node.groupData)&&void 0!==_a&&_a[column.getId()])return!0;if(node.footer&&-1===node.level){var colDef=column.getColDef();return null==colDef||!0===colDef.showRowGroup||colDef.showRowGroup===this.columnModel.getRowGroupColumns()[0].getId()}}var isGroupUseEntireRow=this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotMode());return 0===currentColumnIndex&&isGroupUseEntireRow},BaseGridSerializingSession2.prototype.getHeaderName=function(callback,column){return callback?callback({column,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}):this.columnModel.getDisplayNameForColumn(column,"csv",!0)},BaseGridSerializingSession2.prototype.createValueForGroupNode=function(node){if(this.processRowGroupCallback)return this.processRowGroupCallback({node,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context});var isFooter=node.footer,keys2=[node.key];if(!this.gridOptionsService.isGroupMultiAutoColumn())for(;node.parent;)node=node.parent,keys2.push(node.key);var groupValue=keys2.reverse().join(" -> ");return isFooter?"Total "+groupValue:groupValue},BaseGridSerializingSession2.prototype.processCell=function(params){var accumulatedRowIndex=params.accumulatedRowIndex,rowNode=params.rowNode,column=params.column,value=params.value,processCellCallback=params.processCellCallback,type=params.type;return processCellCallback?processCellCallback({accumulatedRowIndex,column,node:rowNode,value,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,type}):value??""},BaseGridSerializingSession2}(),Downloader=function(){function Downloader2(){}return __name(Downloader2,"Downloader"),Downloader2.download=function(fileName,content){var win=document.defaultView||window;if(win){var element=document.createElement("a"),url=win.URL.createObjectURL(content);element.setAttribute("href",url),element.setAttribute("download",fileName),element.style.display="none",document.body.appendChild(element),element.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:win})),document.body.removeChild(element),win.setTimeout(function(){win.URL.revokeObjectURL(url)},0)}else console.warn("AG Grid: There is no `window` associated with the current `document`")},Downloader2}(),__extends$2=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CsvSerializingSession=function(_super){function CsvSerializingSession2(config){var _this=_super.call(this,config)||this;_this.isFirstLine=!0,_this.result="";var suppressQuotes=config.suppressQuotes,columnSeparator=config.columnSeparator;return _this.suppressQuotes=suppressQuotes,_this.columnSeparator=columnSeparator,_this}return __extends$2(CsvSerializingSession2,_super),__name(CsvSerializingSession2,"CsvSerializingSession"),CsvSerializingSession2.prototype.addCustomContent=function(content){var _this=this;content&&("string"==typeof content?(/^\s*\n/.test(content)||this.beginNewLine(),content=content.replace(/\r?\n/g,"\r\n"),this.result+=content):content.forEach(function(row){_this.beginNewLine(),row.forEach(function(cell,index){0!==index&&(_this.result+=_this.columnSeparator),_this.result+=_this.putInQuotes(cell.data.value||""),cell.mergeAcross&&_this.appendEmptyCells(cell.mergeAcross)})}))},CsvSerializingSession2.prototype.onNewHeaderGroupingRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}},CsvSerializingSession2.prototype.onNewHeaderGroupingRowColumn=function(columnGroup,header,index,span){0!=index&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(header),this.appendEmptyCells(span)},CsvSerializingSession2.prototype.appendEmptyCells=function(count){for(var i=1;i<=count;i++)this.result+=this.columnSeparator+this.putInQuotes("")},CsvSerializingSession2.prototype.onNewHeaderRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}},CsvSerializingSession2.prototype.onNewHeaderRowColumn=function(column,index){0!=index&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(column))},CsvSerializingSession2.prototype.onNewBodyRow=function(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}},CsvSerializingSession2.prototype.onNewBodyRowColumn=function(column,index,node){0!=index&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractRowCellValue(column,index,index,"csv",node))},CsvSerializingSession2.prototype.putInQuotes=function(value){return this.suppressQuotes?value:null==value?'""':("string"==typeof value?stringValue=value:"function"==typeof value.toString?stringValue=value.toString():(console.warn("AG Grid: unknown value type during csv conversion"),stringValue=""),'"'+stringValue.replace(/"/g,'""')+'"');var stringValue},CsvSerializingSession2.prototype.parse=function(){return this.result},CsvSerializingSession2.prototype.beginNewLine=function(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1},CsvSerializingSession2}(BaseGridSerializingSession),__extends$1=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},CsvCreator=function(_super){function CsvCreator2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1(CsvCreator2,_super),__name(CsvCreator2,"CsvCreator"),CsvCreator2.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsService:this.gridOptionsService})},CsvCreator2.prototype.getMergedParams=function(params){var baseParams=this.gridOptionsService.get("defaultCsvExportParams");return Object.assign({},baseParams,params)},CsvCreator2.prototype.export=function(userParams){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var mergedParams=this.getMergedParams(userParams),data=this.getData(mergedParams),packagedFile=new Blob(["\ufeff",data],{type:"text/plain"});return Downloader.download(this.getFileName(mergedParams.fileName),packagedFile),data},CsvCreator2.prototype.exportDataAsCsv=function(params){return this.export(params)},CsvCreator2.prototype.getDataAsCsv=function(params,skipDefaultParams){void 0===skipDefaultParams&&(skipDefaultParams=!1);var mergedParams=skipDefaultParams?Object.assign({},params):this.getMergedParams(params);return this.getData(mergedParams)},CsvCreator2.prototype.getDefaultFileName=function(){return"export.csv"},CsvCreator2.prototype.getDefaultFileExtension=function(){return"csv"},CsvCreator2.prototype.createSerializingSession=function(params){var columnModel=this.columnModel,valueService=this.valueService,gridOptionsService=this.gridOptionsService,_b=params,processCellCallback=_b.processCellCallback,processHeaderCallback=_b.processHeaderCallback,processGroupHeaderCallback=_b.processGroupHeaderCallback,processRowGroupCallback=_b.processRowGroupCallback,suppressQuotes=_b.suppressQuotes,columnSeparator=_b.columnSeparator;return new CsvSerializingSession({columnModel,valueService,gridOptionsService,processCellCallback:processCellCallback||void 0,processHeaderCallback:processHeaderCallback||void 0,processGroupHeaderCallback:processGroupHeaderCallback||void 0,processRowGroupCallback:processRowGroupCallback||void 0,suppressQuotes:suppressQuotes||!1,columnSeparator:columnSeparator||","})},CsvCreator2.prototype.isExportSuppressed=function(){return this.gridOptionsService.is("suppressCsvExport")},__decorate$1([Autowired("columnModel")],CsvCreator2.prototype,"columnModel",void 0),__decorate$1([Autowired("valueService")],CsvCreator2.prototype,"valueService",void 0),__decorate$1([Autowired("gridSerializer")],CsvCreator2.prototype,"gridSerializer",void 0),__decorate$1([Autowired("gridOptionsService")],CsvCreator2.prototype,"gridOptionsService",void 0),__decorate$1([PostConstruct],CsvCreator2.prototype,"postConstruct",null),CsvCreator2=__decorate$1([Bean("csvCreator")],CsvCreator2)}(BaseCreator),__extends=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};!function(RowType2){RowType2[RowType2.HEADER_GROUPING=0]="HEADER_GROUPING",RowType2[RowType2.HEADER=1]="HEADER",RowType2[RowType2.BODY=2]="BODY"}(RowType||(RowType={}));var GridSerializer=function(_super){function GridSerializer2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(GridSerializer2,_super),__name(GridSerializer2,"GridSerializer"),GridSerializer2.prototype.serialize=function(gridSerializingSession,params){void 0===params&&(params={});var columnsToExport=this.getColumnsToExport(params.allColumns,params.columnKeys);return _.compose(this.prepareSession(columnsToExport),this.prependContent(params),this.exportColumnGroups(params,columnsToExport),this.exportHeaders(params,columnsToExport),this.processPinnedTopRows(params,columnsToExport),this.processRows(params,columnsToExport),this.processPinnedBottomRows(params,columnsToExport),this.appendContent(params))(gridSerializingSession).parse()},GridSerializer2.prototype.processRow=function(gridSerializingSession,params,columnsToExport,node){var rowSkipper=params.shouldRowBeSkipped||function(){return!1},context=this.gridOptionsService.context,api=this.gridOptionsService.api,columnApi=this.gridOptionsService.columnApi,skipSingleChildrenGroup=this.gridOptionsService.is("groupRemoveSingleChildren"),skipLowestSingleChildrenGroup=this.gridOptionsService.is("groupRemoveLowestSingleChildren"),isExplicitExportSelection=null!=params.rowPositions||!!params.onlySelected,hideOpenParents=this.gridOptionsService.is("groupHideOpenParents")&&!isExplicitExportSelection,isLeafNode=this.columnModel.isPivotMode()?node.leafGroup:!node.group,skipRowGroups=params.skipGroups||params.skipRowGroups,shouldSkipLowestGroup=skipLowestSingleChildrenGroup&&node.leafGroup,shouldSkipCurrentGroup=1===node.allChildrenCount&&(skipSingleChildrenGroup||shouldSkipLowestGroup);if((skipRowGroups&&params.skipGroups&&_.doOnce(function(){return console.warn("AG Grid: Since v25.2 `skipGroups` has been renamed to `skipRowGroups`.")},"gridSerializer-skipGroups"),!(!isLeafNode&&(params.skipRowGroups||shouldSkipCurrentGroup||hideOpenParents)||params.onlySelected&&!node.isSelected()||params.skipPinnedTop&&"top"===node.rowPinned||params.skipPinnedBottom&&"bottom"===node.rowPinned))&&((!(-1===node.level)||node.leafGroup||node.footer)&&!rowSkipper({node,api,columnApi,context}))){var rowAccumulator=gridSerializingSession.onNewBodyRow();if(columnsToExport.forEach(function(column,index){rowAccumulator.onColumn(column,index,node)}),params.getCustomContentBelowRow){var content=params.getCustomContentBelowRow({node,api,columnApi,context});content&&gridSerializingSession.addCustomContent(content)}}},GridSerializer2.prototype.appendContent=function(params){return function(gridSerializingSession){var appendContent=params.customFooter||params.appendContent;return appendContent&&(params.customFooter&&_.doOnce(function(){return console.warn("AG Grid: Since version 25.2.0 the `customFooter` param has been deprecated. Use `appendContent` instead.")},"gridSerializer-customFooter"),gridSerializingSession.addCustomContent(appendContent)),gridSerializingSession}},GridSerializer2.prototype.prependContent=function(params){return function(gridSerializingSession){var prependContent=params.customHeader||params.prependContent;return prependContent&&(params.customHeader&&_.doOnce(function(){return console.warn("AG Grid: Since version 25.2.0 the `customHeader` param has been deprecated. Use `prependContent` instead.")},"gridSerializer-customHeader"),gridSerializingSession.addCustomContent(prependContent)),gridSerializingSession}},GridSerializer2.prototype.prepareSession=function(columnsToExport){return function(gridSerializingSession){return gridSerializingSession.prepare(columnsToExport),gridSerializingSession}},GridSerializer2.prototype.exportColumnGroups=function(params,columnsToExport){var _this=this;return function(gridSerializingSession){if(params.skipColumnGroupHeaders)params.columnGroups&&_.doOnce(function(){return console.warn("AG Grid: Since v25.2 the `columnGroups` param has deprecated, and groups are exported by default.")},"gridSerializer-columnGroups");else{var groupInstanceIdCreator=new GroupInstanceIdCreator,displayedGroups=_this.displayedGroupCreator.createDisplayedGroups(columnsToExport,_this.columnModel.getGridBalancedTree(),groupInstanceIdCreator,null);_this.recursivelyAddHeaderGroups(displayedGroups,gridSerializingSession,params.processGroupHeaderCallback)}return gridSerializingSession}},GridSerializer2.prototype.exportHeaders=function(params,columnsToExport){return function(gridSerializingSession){if(params.skipHeader||params.skipColumnHeaders)params.skipHeader&&_.doOnce(function(){return console.warn("AG Grid: Since v25.2 the `skipHeader` param has been renamed to `skipColumnHeaders`.")},"gridSerializer-skipHeader");else{var gridRowIterator_1=gridSerializingSession.onNewHeaderRow();columnsToExport.forEach(function(column,index){gridRowIterator_1.onColumn(column,index,void 0)})}return gridSerializingSession}},GridSerializer2.prototype.processPinnedTopRows=function(params,columnsToExport){var _this=this;return function(gridSerializingSession){var processRow=_this.processRow.bind(_this,gridSerializingSession,params,columnsToExport);return params.rowPositions?params.rowPositions.filter(function(position){return"top"===position.rowPinned}).sort(function(a,b){return a.rowIndex-b.rowIndex}).map(function(position){return _this.pinnedRowModel.getPinnedTopRow(position.rowIndex)}).forEach(processRow):_this.pinnedRowModel.forEachPinnedTopRow(processRow),gridSerializingSession}},GridSerializer2.prototype.processRows=function(params,columnsToExport){var _this=this;return function(gridSerializingSession){var rowModel=_this.rowModel,rowModelType=rowModel.getType(),usingCsrm="clientSide"===rowModelType,usingSsrm="serverSide"===rowModelType,onlySelectedNonStandardModel=!usingCsrm&&params.onlySelected,processRow=_this.processRow.bind(_this,gridSerializingSession,params,columnsToExport),_a=params.exportedRows,exportedRows=void 0===_a?"filteredAndSorted":_a;if(params.rowPositions)params.rowPositions.filter(function(position){return null==position.rowPinned}).sort(function(a,b){return a.rowIndex-b.rowIndex}).map(function(position){return rowModel.getRow(position.rowIndex)}).forEach(processRow);else if(_this.columnModel.isPivotMode())usingCsrm?rowModel.forEachPivotNode(processRow,!0):rowModel.forEachNode(processRow);else if(params.onlySelectedAllPages||onlySelectedNonStandardModel){var selectedNodes=_this.selectionService.getSelectedNodes();_this.replicateSortedOrder(selectedNodes),selectedNodes.forEach(processRow)}else"all"===exportedRows?rowModel.forEachNode(processRow):usingCsrm?rowModel.forEachNodeAfterFilterAndSort(processRow,!0):usingSsrm?rowModel.forEachNodeAfterFilterAndSort(processRow):rowModel.forEachNode(processRow);return gridSerializingSession}},GridSerializer2.prototype.replicateSortedOrder=function(rows){var _this=this,sortOptions=this.sortController.getSortOptions(),compareNodes=__name(function(rowA,rowB){var _a,_b,_c,_d;return null!=rowA.rowIndex&&null!=rowB.rowIndex?rowA.rowIndex-rowB.rowIndex:rowA.level===rowB.level?(null===(_a=rowA.parent)||void 0===_a?void 0:_a.id)===(null===(_b=rowB.parent)||void 0===_b?void 0:_b.id)?_this.rowNodeSorter.compareRowNodes(sortOptions,{rowNode:rowA,currentPos:null!==(_c=rowA.rowIndex)&&void 0!==_c?_c:-1},{rowNode:rowB,currentPos:null!==(_d=rowB.rowIndex)&&void 0!==_d?_d:-1}):compareNodes(rowA.parent,rowB.parent):rowA.level>rowB.level?compareNodes(rowA.parent,rowB):compareNodes(rowA,rowB.parent)},"compareNodes");rows.sort(compareNodes)},GridSerializer2.prototype.processPinnedBottomRows=function(params,columnsToExport){var _this=this;return function(gridSerializingSession){var processRow=_this.processRow.bind(_this,gridSerializingSession,params,columnsToExport);return params.rowPositions?params.rowPositions.filter(function(position){return"bottom"===position.rowPinned}).sort(function(a,b){return a.rowIndex-b.rowIndex}).map(function(position){return _this.pinnedRowModel.getPinnedBottomRow(position.rowIndex)}).forEach(processRow):_this.pinnedRowModel.forEachPinnedBottomRow(processRow),gridSerializingSession}},GridSerializer2.prototype.getColumnsToExport=function(allColumns,columnKeys){void 0===allColumns&&(allColumns=!1);var isPivotMode=this.columnModel.isPivotMode();return columnKeys&&columnKeys.length?this.columnModel.getGridColumns(columnKeys):allColumns&&!isPivotMode?(this.gridOptionsService.isTreeData()?this.columnModel.getGridColumns(["ag-Grid-AutoColumn"]):[]).concat(this.columnModel.getAllPrimaryColumns()||[]):this.columnModel.getAllDisplayedColumns()},GridSerializer2.prototype.recursivelyAddHeaderGroups=function(displayedGroups,gridSerializingSession,processGroupHeaderCallback){var directChildrenHeaderGroups=[];displayedGroups.forEach(function(columnGroupChild){var columnGroup=columnGroupChild;columnGroup.getChildren&&columnGroup.getChildren().forEach(function(it){return directChildrenHeaderGroups.push(it)})}),displayedGroups.length>0&&displayedGroups[0]instanceof ColumnGroup&&this.doAddHeaderHeader(gridSerializingSession,displayedGroups,processGroupHeaderCallback),directChildrenHeaderGroups&&directChildrenHeaderGroups.length>0&&this.recursivelyAddHeaderGroups(directChildrenHeaderGroups,gridSerializingSession,processGroupHeaderCallback)},GridSerializer2.prototype.doAddHeaderHeader=function(gridSerializingSession,displayedGroups,processGroupHeaderCallback){var _this=this,gridRowIterator=gridSerializingSession.onNewHeaderGroupingRow(),columnIndex=0;displayedGroups.forEach(function(columnGroupChild){var name,columnGroup=columnGroupChild;name=processGroupHeaderCallback?processGroupHeaderCallback({columnGroup,api:_this.gridOptionsService.api,columnApi:_this.gridOptionsService.columnApi,context:_this.gridOptionsService.context}):_this.columnModel.getDisplayNameForColumnGroup(columnGroup,"header");var collapsibleGroupRanges=columnGroup.getLeafColumns().reduce(function(collapsibleGroups,currentColumn,currentIdx,arr){var lastGroup=_.last(collapsibleGroups);return"open"===currentColumn.getColumnGroupShow()?(!lastGroup||null!=lastGroup[1])&&(lastGroup=[currentIdx],collapsibleGroups.push(lastGroup)):lastGroup&&null==lastGroup[1]&&(lastGroup[1]=currentIdx-1),currentIdx===arr.length-1&&lastGroup&&null==lastGroup[1]&&(lastGroup[1]=currentIdx),collapsibleGroups},[]);gridRowIterator.onColumn(columnGroup,name||"",columnIndex++,columnGroup.getLeafColumns().length-1,collapsibleGroupRanges)})},__decorate([Autowired("displayedGroupCreator")],GridSerializer2.prototype,"displayedGroupCreator",void 0),__decorate([Autowired("columnModel")],GridSerializer2.prototype,"columnModel",void 0),__decorate([Autowired("rowModel")],GridSerializer2.prototype,"rowModel",void 0),__decorate([Autowired("pinnedRowModel")],GridSerializer2.prototype,"pinnedRowModel",void 0),__decorate([Autowired("selectionService")],GridSerializer2.prototype,"selectionService",void 0),__decorate([Autowired("rowPositionUtils")],GridSerializer2.prototype,"rowPositionUtils",void 0),__decorate([Autowired("rowNodeSorter")],GridSerializer2.prototype,"rowNodeSorter",void 0),__decorate([Autowired("sortController")],GridSerializer2.prototype,"sortController",void 0),GridSerializer2=__decorate([Bean("gridSerializer")],GridSerializer2)}(BeanStub),CsvExportModule={version:"29.1.0",moduleName:ModuleNames.CsvExportModule,beans:[CsvCreator,GridSerializer]},crcTable=(function(){function XmlFactory2(){}__name(XmlFactory2,"XmlFactory"),XmlFactory2.createHeader=function(headerElement){void 0===headerElement&&(headerElement={});var keys2=["version"];return headerElement.version||(headerElement.version="1.0"),headerElement.encoding&&keys2.push("encoding"),headerElement.standalone&&keys2.push("standalone"),"<?xml "+keys2.map(function(key){return key+'="'+headerElement[key]+'"'}).join(" ")+" ?>"},XmlFactory2.createXml=function(xmlElement,booleanTransformer){var _this=this,props="";xmlElement.properties&&(xmlElement.properties.prefixedAttributes&&xmlElement.properties.prefixedAttributes.forEach(function(prefixedSet){Object.keys(prefixedSet.map).forEach(function(key){props+=_this.returnAttributeIfPopulated(prefixedSet.prefix+key,prefixedSet.map[key],booleanTransformer)})}),xmlElement.properties.rawMap&&Object.keys(xmlElement.properties.rawMap).forEach(function(key){props+=_this.returnAttributeIfPopulated(key,xmlElement.properties.rawMap[key],booleanTransformer)}));var result="<"+xmlElement.name+props;return xmlElement.children||null!=xmlElement.textNode?null!=xmlElement.textNode?result+">"+xmlElement.textNode+"</"+xmlElement.name+">\r\n":(result+=">\r\n",xmlElement.children&&xmlElement.children.forEach(function(it){result+=_this.createXml(it,booleanTransformer)}),result+"</"+xmlElement.name+">\r\n"):result+"/>\r\n"},XmlFactory2.returnAttributeIfPopulated=function(key,value,booleanTransformer){if(!value&&""!==value&&0!==value)return"";var xmlValue=value;return"boolean"==typeof value&&booleanTransformer&&(xmlValue=booleanTransformer(value))," "+key+'="'+xmlValue+'"'}}(),new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117])),AllCommunityModules=(function(){function ZipContainer2(){}__name(ZipContainer2,"ZipContainer"),ZipContainer2.addFolders=function(paths){paths.forEach(this.addFolder.bind(this))},ZipContainer2.addFolder=function(path){this.folders.push({path,created:new Date,isBase64:!1})},ZipContainer2.addFile=function(path,content,isBase64){void 0===isBase64&&(isBase64=!1),this.files.push({path,created:new Date,content,isBase64})},ZipContainer2.getContent=function(mimeType){void 0===mimeType&&(mimeType="application/zip");var textOutput=this.buildFileStream(),uInt8Output=this.buildUint8Array(textOutput);return this.clearStream(),new Blob([uInt8Output],{type:mimeType})},ZipContainer2.clearStream=function(){this.folders=[],this.files=[]},ZipContainer2.buildFileStream=function(fData){var e_1,_a;void 0===fData&&(fData="");var totalFiles=this.folders.concat(this.files),len=totalFiles.length,foData="",lL=0,cL=0;try{for(var totalFiles_1=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}(totalFiles),totalFiles_1_1=totalFiles_1.next();!totalFiles_1_1.done;totalFiles_1_1=totalFiles_1.next()){var currentFile=totalFiles_1_1.value,_b=this.getHeader(currentFile,lL),fileHeader=_b.fileHeader,folderHeader=_b.folderHeader,content=_b.content;lL+=fileHeader.length+content.length,cL+=folderHeader.length,fData+=fileHeader+content,foData+=folderHeader}}catch(e_1_1){e_1={error:e_1_1}}finally{try{totalFiles_1_1&&!totalFiles_1_1.done&&(_a=totalFiles_1.return)&&_a.call(totalFiles_1)}finally{if(e_1)throw e_1.error}}return fData+foData+this.buildFolderEnd(len,cL,lL)},ZipContainer2.getHeader=function(currentFile,offset){var content=currentFile.content,path=currentFile.path,created=currentFile.created,isBase64=currentFile.isBase64,utf8_encode2=_.utf8_encode,decToHex2=_.decToHex,utfPath=utf8_encode2(path),isUTF8=utfPath!==path,time=this.convertTime(created),dt=this.convertDate(created),extraFields="";if(isUTF8){var uExtraFieldPath=decToHex2(1,1)+decToHex2(this.getFromCrc32Table(utfPath),4)+utfPath;extraFields="up"+decToHex2(uExtraFieldPath.length,2)+uExtraFieldPath}var _a=content?this.getConvertedContent(content,isBase64):{size:0,content:""},size=_a.size,convertedContent=_a.content,header="\n\0"+(isUTF8?"\0\b":"\0\0")+"\0\0"+decToHex2(time,2)+decToHex2(dt,2)+decToHex2(size?this.getFromCrc32Table(convertedContent):0,4)+decToHex2(size,4)+decToHex2(size,4)+decToHex2(utfPath.length,2)+decToHex2(extraFields.length,2);return{fileHeader:"PK\x03\x04"+header+utfPath+extraFields,folderHeader:"PK\x01\x02\x14\0"+header+"\0\0\0\0\0\0"+(content?"\0\0\0\0":"\x10\0\0\0")+decToHex2(offset,4)+utfPath+extraFields,content:convertedContent||""}},ZipContainer2.getConvertedContent=function(content,isBase64){return void 0===isBase64&&(isBase64=!1),isBase64&&(content=content.split(";base64,")[1]),{size:(content=isBase64?atob(content):content).length,content}},ZipContainer2.buildFolderEnd=function(tLen,cLen,lLen){var decToHex2=_.decToHex;return"PK\x05\x06\0\0\0\0"+decToHex2(tLen,2)+decToHex2(tLen,2)+decToHex2(cLen,4)+decToHex2(lLen,4)+"\0\0"},ZipContainer2.buildUint8Array=function(content){for(var uint8=new Uint8Array(content.length),i=0;i<uint8.length;i++)uint8[i]=content.charCodeAt(i);return uint8},ZipContainer2.getFromCrc32Table=function(content){if(!content.length)return 0;for(var size=content.length,iterable=new Uint8Array(size),i=0;i<size;i++)iterable[i]=content.charCodeAt(i);var crc=-1,j=0;for(i=0;i<size;i++)j=iterable[i],crc=crc>>>8^crcTable[255&(crc^j)];return-1^crc},ZipContainer2.convertTime=function(date){var time=date.getHours();return time<<=6,time|=date.getMinutes(),time<<=5,time|=date.getSeconds()/2},ZipContainer2.convertDate=function(date){var dt=date.getFullYear()-1980;return dt<<=4,dt|=date.getMonth()+1,dt<<=5,dt|=date.getDate()},ZipContainer2.folders=[],ZipContainer2.files=[]}(),[ClientSideRowModelModule,InfiniteRowModelModule,CsvExportModule]);ModuleRegistry.registerModules(AllCommunityModules);class AngularFrameworkOverrides extends VanillaFrameworkOverrides{constructor(_ngZone){super(),this._ngZone=_ngZone}setEmitterUsedCallback(isEmitterUsed){this.isEmitterUsed=isEmitterUsed}setTimeout(action,timeout){this._ngZone?this._ngZone.runOutsideAngular(()=>{window.setTimeout(()=>{action()},timeout)}):window.setTimeout(()=>{action()},timeout)}setInterval(action,interval){return new AgPromise(resolve=>{this._ngZone?this._ngZone.runOutsideAngular(()=>{resolve(window.setInterval(()=>{action()},interval))}):resolve(window.setInterval(()=>{action()},interval))})}addEventListener(element,eventType,listener,useCapture){this.isOutsideAngular(eventType)&&this._ngZone?this._ngZone.runOutsideAngular(()=>{element.addEventListener(eventType,listener,useCapture)}):element.addEventListener(eventType,listener,useCapture)}dispatchEvent(eventType,listener,global2=!1){this.isOutsideAngular(eventType)?this._ngZone?this._ngZone.runOutsideAngular(listener):listener():(this.isEmitterUsed(eventType)||global2)&&(!core.NgZone.isInAngularZone()&&this._ngZone?this._ngZone.run(listener):listener())}isFrameworkComponent(comp){if(!comp)return!1;const prototype=comp.prototype;return prototype&&"agInit"in prototype}}__name(AngularFrameworkOverrides,"AngularFrameworkOverrides"),AngularFrameworkOverrides.\u0275fac=__name(function(t){return new(t||AngularFrameworkOverrides)(core.\u0275\u0275inject(core.NgZone))},"AngularFrameworkOverrides_Factory"),AngularFrameworkOverrides.\u0275prov=core.\u0275\u0275defineInjectable({token:AngularFrameworkOverrides,factory:AngularFrameworkOverrides.\u0275fac});class AngularFrameworkComponentWrapper extends BaseComponentWrapper{setViewContainerRef(viewContainerRef){this.viewContainerRef=viewContainerRef}setComponentFactoryResolver(componentFactoryResolver){this.componentFactoryResolver=componentFactoryResolver}createWrapper(OriginalConstructor){let that=this;class DynamicAgNg2Component extends BaseGuiComponent{init(params){super.init(params),this._componentRef.changeDetectorRef.detectChanges()}createComponent(){return that.createComponent(OriginalConstructor)}hasMethod(name){return null!=wrapper.getFrameworkComponentInstance()[name]}callMethod(name,args){const componentRef=this.getFrameworkComponentInstance();return wrapper.getFrameworkComponentInstance()[name].apply(componentRef,args)}addMethod(name,callback){wrapper[name]=callback}}__name(DynamicAgNg2Component,"DynamicAgNg2Component");let wrapper=new DynamicAgNg2Component;return wrapper}createComponent(componentType){let factory=this.componentFactoryResolver.resolveComponentFactory(componentType);return this.viewContainerRef.createComponent(factory)}}__name(AngularFrameworkComponentWrapper,"AngularFrameworkComponentWrapper"),AngularFrameworkComponentWrapper.\u0275fac=function(){let \u0275AngularFrameworkComponentWrapper_BaseFactory;return __name(function(t){return(\u0275AngularFrameworkComponentWrapper_BaseFactory||(\u0275AngularFrameworkComponentWrapper_BaseFactory=core.\u0275\u0275getInheritedFactory(AngularFrameworkComponentWrapper)))(t||AngularFrameworkComponentWrapper)},"AngularFrameworkComponentWrapper_Factory")}(),AngularFrameworkComponentWrapper.\u0275prov=core.\u0275\u0275defineInjectable({token:AngularFrameworkComponentWrapper,factory:AngularFrameworkComponentWrapper.\u0275fac});class BaseGuiComponent{init(params){this._params=params,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}destroy(){this._frameworkComponentInstance&&"function"==typeof this._frameworkComponentInstance.destroy&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}}__name(BaseGuiComponent,"BaseGuiComponent");class AgGridAngular{constructor(elementDef,viewContainerRef,angularFrameworkOverrides,frameworkComponentWrapper,componentFactoryResolver){this.viewContainerRef=viewContainerRef,this.angularFrameworkOverrides=angularFrameworkOverrides,this.frameworkComponentWrapper=frameworkComponentWrapper,this.componentFactoryResolver=componentFactoryResolver,this._initialised=!1,this._destroyed=!1,this._fullyReady=AgPromise.resolve(!0),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.maintainColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.components=void 0,this.frameworkComponents=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterMovesDown=void 0,this.enterMovesDownAfterEdit=void 0,this.enableCellEditingOnBackspace=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.excludeHiddenColumnsFromQuickFilter=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.enableChartToolPanelsButton=void 0,this.suppressChartToolPanelsButton=void 0,this.chartToolPanelsDef=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererFramework=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererFramework=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressParentsInRowNodes=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressAsyncEvents=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentFramework=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentFramework=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.suppressAggAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.enableCellChangeFlash=void 0,this.cellFlashDelay=void 0,this.cellFadeDelay=void 0,this.allowShowChangeAfterFilter=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.rowDragText=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererFramework=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupAggFiltering=void 0,this.groupIncludeFooter=void 0,this.groupIncludeTotalFooter=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.groupAllowUnbalanced=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererFramework=void 0,this.groupRowRendererParams=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.treeData=void 0,this.rowGroupPanelSuppressSort=void 0,this.groupRowsSticky=void 0,this.rememberGroupStateWhenNewData=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.immutableData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideInitialRowCount=void 0,this.serverSideStoreType=void 0,this.suppressServerSideInfiniteScroll=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideFilterAllLevels=void 0,this.serverSideSortOnServer=void 0,this.serverSideFilterOnServer=void 0,this.serverSideSortingAlwaysResets=void 0,this.serverSideFilteringAlwaysResets=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellSelection=void 0,this.suppressCellFocus=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.functionsPassive=void 0,this.enableGroupEdit=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.localeTextFunc=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.groupRowAggNodes=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.initialGroupOrderComparator=void 0,this.defaultGroupOrderComparator=void 0,this.processSecondaryColDef=void 0,this.processSecondaryColGroupDef=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.getServerSideStoreParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowNodeId=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSort=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthCell=void 0,this.isFullWidthRow=void 0,this.toolPanelVisibleChanged=new core.EventEmitter,this.toolPanelSizeChanged=new core.EventEmitter,this.pasteStart=new core.EventEmitter,this.pasteEnd=new core.EventEmitter,this.columnVisible=new core.EventEmitter,this.columnPinned=new core.EventEmitter,this.columnResized=new core.EventEmitter,this.columnMoved=new core.EventEmitter,this.columnValueChanged=new core.EventEmitter,this.columnPivotModeChanged=new core.EventEmitter,this.columnPivotChanged=new core.EventEmitter,this.columnGroupOpened=new core.EventEmitter,this.newColumnsLoaded=new core.EventEmitter,this.gridColumnsChanged=new core.EventEmitter,this.displayedColumnsChanged=new core.EventEmitter,this.virtualColumnsChanged=new core.EventEmitter,this.columnEverythingChanged=new core.EventEmitter,this.componentStateChanged=new core.EventEmitter,this.cellValueChanged=new core.EventEmitter,this.cellEditRequest=new core.EventEmitter,this.rowValueChanged=new core.EventEmitter,this.cellEditingStarted=new core.EventEmitter,this.cellEditingStopped=new core.EventEmitter,this.rowEditingStarted=new core.EventEmitter,this.rowEditingStopped=new core.EventEmitter,this.undoStarted=new core.EventEmitter,this.undoEnded=new core.EventEmitter,this.redoStarted=new core.EventEmitter,this.redoEnded=new core.EventEmitter,this.filterOpened=new core.EventEmitter,this.filterChanged=new core.EventEmitter,this.filterModified=new core.EventEmitter,this.chartCreated=new core.EventEmitter,this.chartRangeSelectionChanged=new core.EventEmitter,this.chartOptionsChanged=new core.EventEmitter,this.chartDestroyed=new core.EventEmitter,this.cellKeyDown=new core.EventEmitter,this.cellKeyPress=new core.EventEmitter,this.gridReady=new core.EventEmitter,this.firstDataRendered=new core.EventEmitter,this.gridSizeChanged=new core.EventEmitter,this.modelUpdated=new core.EventEmitter,this.virtualRowRemoved=new core.EventEmitter,this.viewportChanged=new core.EventEmitter,this.bodyScroll=new core.EventEmitter,this.bodyScrollEnd=new core.EventEmitter,this.dragStarted=new core.EventEmitter,this.dragStopped=new core.EventEmitter,this.paginationChanged=new core.EventEmitter,this.rowDragEnter=new core.EventEmitter,this.rowDragMove=new core.EventEmitter,this.rowDragLeave=new core.EventEmitter,this.rowDragEnd=new core.EventEmitter,this.columnRowGroupChanged=new core.EventEmitter,this.rowGroupOpened=new core.EventEmitter,this.expandOrCollapseAll=new core.EventEmitter,this.pinnedRowDataChanged=new core.EventEmitter,this.rowDataChanged=new core.EventEmitter,this.rowDataUpdated=new core.EventEmitter,this.asyncTransactionsFlushed=new core.EventEmitter,this.cellClicked=new core.EventEmitter,this.cellDoubleClicked=new core.EventEmitter,this.cellFocused=new core.EventEmitter,this.cellMouseOver=new core.EventEmitter,this.cellMouseOut=new core.EventEmitter,this.cellMouseDown=new core.EventEmitter,this.rowClicked=new core.EventEmitter,this.rowDoubleClicked=new core.EventEmitter,this.rowSelected=new core.EventEmitter,this.selectionChanged=new core.EventEmitter,this.cellContextMenu=new core.EventEmitter,this.rangeSelectionChanged=new core.EventEmitter,this.sortChanged=new core.EventEmitter,this.columnRowGroupChangeRequest=new core.EventEmitter,this.columnPivotChangeRequest=new core.EventEmitter,this.columnValueChangeRequest=new core.EventEmitter,this.columnAggFuncChangeRequest=new core.EventEmitter,this._nativeElement=elementDef.nativeElement}ngAfterViewInit(){this.frameworkComponentWrapper.setViewContainerRef(this.viewContainerRef),this.frameworkComponentWrapper.setComponentFactoryResolver(this.componentFactoryResolver),this.angularFrameworkOverrides.setEmitterUsedCallback(this.isEmitterUsed.bind(this)),this.gridOptions=ComponentUtil.copyAttributesToGridOptions(this.gridOptions,this),this.gridParams={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:this.angularFrameworkOverrides,providedBeanInstances:{frameworkComponentWrapper:this.frameworkComponentWrapper},modules:this.modules||[]},new Grid(this._nativeElement,this.gridOptions,this.gridParams),this.gridOptions.api&&(this.api=this.gridOptions.api),this.gridOptions.columnApi&&(this.columnApi=this.gridOptions.columnApi),this._initialised=!0,this._fullyReady.resolveNow(null,resolve=>resolve)}ngOnChanges(changes){this._initialised&&ComponentUtil.processOnChange(changes,this.api)}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api&&this.api.destroy())}isEmitterUsed(eventType){const emitter=this[eventType],hasEmitter=!!emitter&&emitter.observers&&emitter.observers.length>0,asEventName=`on${eventType.charAt(0).toUpperCase()}${eventType.substring(1)}`,hasGridOptionListener=!!this.gridOptions&&!!this.gridOptions[asEventName];return hasEmitter||hasGridOptionListener}globalEventListener(eventType,event){if(this._destroyed)return;const emitter=this[eventType];emitter&&this.isEmitterUsed(eventType)&&("gridReady"===eventType?this._fullyReady.then(result=>{emitter.emit(event)}):emitter.emit(event))}}__name(AgGridAngular,"AgGridAngular"),AgGridAngular.\u0275fac=__name(function(t){return new(t||AgGridAngular)(core.\u0275\u0275directiveInject(core.ElementRef),core.\u0275\u0275directiveInject(core.ViewContainerRef),core.\u0275\u0275directiveInject(AngularFrameworkOverrides),core.\u0275\u0275directiveInject(AngularFrameworkComponentWrapper),core.\u0275\u0275directiveInject(core.ComponentFactoryResolver))},"AgGridAngular_Factory"),AgGridAngular.\u0275cmp=core.\u0275\u0275defineComponent({type:AgGridAngular,selectors:[["ag-grid-angular"]],inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:"suppressContextMenu",preventDefaultOnContextMenu:"preventDefaultOnContextMenu",allowContextMenuWithControlKey:"allowContextMenuWithControlKey",suppressMenuHide:"suppressMenuHide",enableBrowserTooltips:"enableBrowserTooltips",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:"tooltipMouseTrack",popupParent:"popupParent",copyHeadersToClipboard:"copyHeadersToClipboard",copyGroupHeadersToClipboard:"copyGroupHeadersToClipboard",clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:"suppressCopyRowsToClipboard",suppressCopySingleCellRanges:"suppressCopySingleCellRanges",suppressLastEmptyLineOnPaste:"suppressLastEmptyLineOnPaste",suppressClipboardPaste:"suppressClipboardPaste",suppressClipboardApi:"suppressClipboardApi",columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",maintainColumnOrder:"maintainColumnOrder",suppressFieldDotNotation:"suppressFieldDotNotation",headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:"allowDragFromColumnsToolPanel",suppressMovableColumns:"suppressMovableColumns",suppressColumnMoveAnimation:"suppressColumnMoveAnimation",suppressDragLeaveHidesColumns:"suppressDragLeaveHidesColumns",suppressRowGroupHidesColumns:"suppressRowGroupHidesColumns",colResizeDefault:"colResizeDefault",suppressAutoSize:"suppressAutoSize",autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:"skipHeaderOnAutoSize",components:"components",frameworkComponents:"frameworkComponents",editType:"editType",singleClickEdit:"singleClickEdit",suppressClickEdit:"suppressClickEdit",readOnlyEdit:"readOnlyEdit",stopEditingWhenCellsLoseFocus:"stopEditingWhenCellsLoseFocus",enterMovesDown:"enterMovesDown",enterMovesDownAfterEdit:"enterMovesDownAfterEdit",enableCellEditingOnBackspace:"enableCellEditingOnBackspace",undoRedoCellEditing:"undoRedoCellEditing",undoRedoCellEditingLimit:"undoRedoCellEditingLimit",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:"suppressCsvExport",defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:"suppressExcelExport",excelStyles:"excelStyles",quickFilterText:"quickFilterText",cacheQuickFilter:"cacheQuickFilter",excludeHiddenColumnsFromQuickFilter:"excludeHiddenColumnsFromQuickFilter",excludeChildrenWhenTreeDataFiltering:"excludeChildrenWhenTreeDataFiltering",enableCharts:"enableCharts",chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",enableChartToolPanelsButton:"enableChartToolPanelsButton",suppressChartToolPanelsButton:"suppressChartToolPanelsButton",chartToolPanelsDef:"chartToolPanelsDef",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererFramework:"loadingCellRendererFramework",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:"masterDetail",keepDetailRows:"keepDetailRows",keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererFramework:"detailCellRendererFramework",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:"detailRowAutoHeight",context:"context",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:"valueCache",valueCacheNeverExpires:"valueCacheNeverExpires",enableCellExpressions:"enableCellExpressions",suppressParentsInRowNodes:"suppressParentsInRowNodes",suppressTouch:"suppressTouch",suppressFocusAfterRefresh:"suppressFocusAfterRefresh",suppressAsyncEvents:"suppressAsyncEvents",suppressBrowserResizeObserver:"suppressBrowserResizeObserver",suppressPropertyNamesCheck:"suppressPropertyNamesCheck",suppressChangeDetection:"suppressChangeDetection",debug:"debug",overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentFramework:"loadingOverlayComponentFramework",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:"suppressLoadingOverlay",overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentFramework:"noRowsOverlayComponentFramework",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:"suppressNoRowsOverlay",pagination:"pagination",paginationPageSize:"paginationPageSize",paginationAutoPageSize:"paginationAutoPageSize",paginateChildRows:"paginateChildRows",suppressPaginationPanel:"suppressPaginationPanel",pivotMode:"pivotMode",pivotPanelShow:"pivotPanelShow",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:"pivotSuppressAutoColumn",suppressExpandablePivotGroups:"suppressExpandablePivotGroups",functionsReadOnly:"functionsReadOnly",aggFuncs:"aggFuncs",suppressAggFuncInHeader:"suppressAggFuncInHeader",suppressAggAtRootLevel:"suppressAggAtRootLevel",aggregateOnlyChangedColumns:"aggregateOnlyChangedColumns",suppressAggFilteredOnly:"suppressAggFilteredOnly",removePivotHeaderRowWhenSingleValueColumn:"removePivotHeaderRowWhenSingleValueColumn",animateRows:"animateRows",enableCellChangeFlash:"enableCellChangeFlash",cellFlashDelay:"cellFlashDelay",cellFadeDelay:"cellFadeDelay",allowShowChangeAfterFilter:"allowShowChangeAfterFilter",domLayout:"domLayout",ensureDomOrder:"ensureDomOrder",enableRtl:"enableRtl",suppressColumnVirtualisation:"suppressColumnVirtualisation",suppressMaxRenderedRowRestriction:"suppressMaxRenderedRowRestriction",suppressRowVirtualisation:"suppressRowVirtualisation",rowDragManaged:"rowDragManaged",suppressRowDrag:"suppressRowDrag",suppressMoveWhenRowDragging:"suppressMoveWhenRowDragging",rowDragEntireRow:"rowDragEntireRow",rowDragMultiRow:"rowDragMultiRow",rowDragText:"rowDragText",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererFramework:"fullWidthCellRendererFramework",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:"embedFullWidthRows",groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:"groupMaintainOrder",groupSelectsChildren:"groupSelectsChildren",groupAggFiltering:"groupAggFiltering",groupIncludeFooter:"groupIncludeFooter",groupIncludeTotalFooter:"groupIncludeTotalFooter",groupSuppressBlankHeader:"groupSuppressBlankHeader",groupSelectsFiltered:"groupSelectsFiltered",showOpenedGroup:"showOpenedGroup",groupRemoveSingleChildren:"groupRemoveSingleChildren",groupRemoveLowestSingleChildren:"groupRemoveLowestSingleChildren",groupHideOpenParents:"groupHideOpenParents",groupAllowUnbalanced:"groupAllowUnbalanced",rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererFramework:"groupRowRendererFramework",groupRowRendererParams:"groupRowRendererParams",suppressMakeColumnVisibleAfterUnGroup:"suppressMakeColumnVisibleAfterUnGroup",treeData:"treeData",rowGroupPanelSuppressSort:"rowGroupPanelSuppressSort",groupRowsSticky:"groupRowsSticky",rememberGroupStateWhenNewData:"rememberGroupStateWhenNewData",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",immutableData:"immutableData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:"suppressModelUpdateAfterUpdateTransaction",datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideInitialRowCount:"serverSideInitialRowCount",serverSideStoreType:"serverSideStoreType",suppressServerSideInfiniteScroll:"suppressServerSideInfiniteScroll",cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:"purgeClosedRowNodes",serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:"serverSideSortAllLevels",serverSideFilterAllLevels:"serverSideFilterAllLevels",serverSideSortOnServer:"serverSideSortOnServer",serverSideFilterOnServer:"serverSideFilterOnServer",serverSideSortingAlwaysResets:"serverSideSortingAlwaysResets",serverSideFilteringAlwaysResets:"serverSideFilteringAlwaysResets",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:"alwaysShowHorizontalScroll",alwaysShowVerticalScroll:"alwaysShowVerticalScroll",debounceVerticalScrollbar:"debounceVerticalScrollbar",suppressHorizontalScroll:"suppressHorizontalScroll",suppressScrollOnNewData:"suppressScrollOnNewData",suppressScrollWhenPopupsAreOpen:"suppressScrollWhenPopupsAreOpen",suppressAnimationFrame:"suppressAnimationFrame",suppressMiddleClickScrolls:"suppressMiddleClickScrolls",suppressPreventDefaultOnMouseWheel:"suppressPreventDefaultOnMouseWheel",scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",rowMultiSelectWithClick:"rowMultiSelectWithClick",suppressRowDeselection:"suppressRowDeselection",suppressRowClickSelection:"suppressRowClickSelection",suppressCellSelection:"suppressCellSelection",suppressCellFocus:"suppressCellFocus",suppressMultiRangeSelection:"suppressMultiRangeSelection",enableCellTextSelection:"enableCellTextSelection",enableRangeSelection:"enableRangeSelection",enableRangeHandle:"enableRangeHandle",enableFillHandle:"enableFillHandle",fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:"suppressClearOnFillReduction",sortingOrder:"sortingOrder",accentedSort:"accentedSort",unSortIcon:"unSortIcon",suppressMultiSort:"suppressMultiSort",alwaysMultiSort:"alwaysMultiSort",multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:"suppressMaintainUnsortedOrder",icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:"suppressRowHoverHighlight",suppressRowTransform:"suppressRowTransform",columnHoverHighlight:"columnHoverHighlight",deltaSort:"deltaSort",treeDataDisplayType:"treeDataDisplayType",functionsPassive:"functionsPassive",enableGroupEdit:"enableGroupEdit",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",localeTextFunc:"localeTextFunc",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",groupRowAggNodes:"groupRowAggNodes",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",initialGroupOrderComparator:"initialGroupOrderComparator",defaultGroupOrderComparator:"defaultGroupOrderComparator",processSecondaryColDef:"processSecondaryColDef",processSecondaryColGroupDef:"processSecondaryColGroupDef",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",getServerSideStoreParams:"getServerSideStoreParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowNodeId:"getRowNodeId",getRowId:"getRowId",resetRowDataOnUpdate:"resetRowDataOnUpdate",processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSort:"postSort",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthCell:"isFullWidthCell",isFullWidthRow:"isFullWidthRow"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",toolPanelSizeChanged:"toolPanelSizeChanged",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",undoStarted:"undoStarted",undoEnded:"undoEnded",redoStarted:"redoStarted",redoEnded:"redoEnded",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",cellKeyPress:"cellKeyPress",gridReady:"gridReady",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataChanged:"rowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",sortChanged:"sortChanged",columnRowGroupChangeRequest:"columnRowGroupChangeRequest",columnPivotChangeRequest:"columnPivotChangeRequest",columnValueChangeRequest:"columnValueChangeRequest",columnAggFuncChangeRequest:"columnAggFuncChangeRequest"},features:[core.\u0275\u0275ProvidersFeature([AngularFrameworkOverrides,AngularFrameworkComponentWrapper]),core.\u0275\u0275NgOnChangesFeature],decls:0,vars:0,template:__name(function(rf,ctx){},"AgGridAngular_Template"),encapsulation:2});class AgGridModule{}__name(AgGridModule,"AgGridModule"),AgGridModule.\u0275fac=__name(function(t){return new(t||AgGridModule)},"AgGridModule_Factory"),AgGridModule.\u0275mod=core.\u0275\u0275defineNgModule({type:AgGridModule}),AgGridModule.\u0275inj=core.\u0275\u0275defineInjector({});class AgSimpleComponent{constructor(){this.columnDefs=[{field:"make"},{field:"model"},{field:"price"}],this.rowData=[{make:"Toyota",model:"Celica",price:35e3},{make:"Ford",model:"Mondeo",price:32e3},{make:"Porsche",model:"Boxster",price:72e3}]}}__name(AgSimpleComponent,"AgSimpleComponent"),AgSimpleComponent.\u0275fac=__name(function(t){return new(t||AgSimpleComponent)},"AgSimpleComponent_Factory"),AgSimpleComponent.\u0275cmp=core.\u0275\u0275defineComponent({type:AgSimpleComponent,selectors:[["app-ag-simple"]],decls:3,vars:2,consts:[[1,"ag-theme-alpine",2,"width","500px","height","350px",3,"rowData","columnDefs"]],template:__name(function(rf,ctx){1&rf&&(core.\u0275\u0275elementStart(0,"h1"),core.\u0275\u0275text(1,"Simple Table"),core.\u0275\u0275elementEnd(),core.\u0275\u0275element(2,"ag-grid-angular",0)),2&rf&&(core.\u0275\u0275advance(2),core.\u0275\u0275property("rowData",ctx.rowData)("columnDefs",ctx.columnDefs))},"AgSimpleComponent_Template"),dependencies:[AgGridAngular],changeDetection:0});const routes=[{path:"",component:AgSimpleComponent}];class AgSimpleRoutingModule{}__name(AgSimpleRoutingModule,"AgSimpleRoutingModule"),AgSimpleRoutingModule.\u0275fac=__name(function(t){return new(t||AgSimpleRoutingModule)},"AgSimpleRoutingModule_Factory"),AgSimpleRoutingModule.\u0275mod=core.\u0275\u0275defineNgModule({type:AgSimpleRoutingModule}),AgSimpleRoutingModule.\u0275inj=core.\u0275\u0275defineInjector({imports:[router.Bz.forChild(routes),router.Bz]});class AgSimpleModule{}__name(AgSimpleModule,"AgSimpleModule"),AgSimpleModule.\u0275fac=__name(function(t){return new(t||AgSimpleModule)},"AgSimpleModule_Factory"),AgSimpleModule.\u0275mod=core.\u0275\u0275defineNgModule({type:AgSimpleModule}),AgSimpleModule.\u0275inj=core.\u0275\u0275defineInjector({imports:[common.ez,AgSimpleRoutingModule,AgGridModule]})}};