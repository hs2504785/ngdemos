"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=2089,exports.ids=[2089],exports.modules={52089:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ProductModule:()=>ProductModule});var router=__webpack_require__(14195),shared_module=__webpack_require__(9023),ngrx_store=__webpack_require__(7776);const getProductFeatureState=(0,ngrx_store.ZF)("products"),getShowProductCode=(0,ngrx_store.P1)(getProductFeatureState,state=>state.showProductCode),getCurrentProductId=(0,ngrx_store.P1)(getProductFeatureState,state=>state.currentProductId),getCurrentProduct=(0,ngrx_store.P1)(getProductFeatureState,getCurrentProductId,(state,currentProductId)=>0===currentProductId?{id:0,productName:"",productCode:"New",description:"",starRating:0}:currentProductId?state.products.find(p=>p.id===currentProductId):null),getProducts=(0,ngrx_store.P1)(getProductFeatureState,state=>state.products),getError=(0,ngrx_store.P1)(getProductFeatureState,state=>state.error),toggleProductCode=(0,ngrx_store.PH)("[Product Page] Toggle Product Code"),setCurrentProduct=(0,ngrx_store.PH)("[Product Page] Set Current Product",(0,ngrx_store.Ky)()),clearCurrentProduct=(0,ngrx_store.PH)("[Product Page] Clear Current Product"),initializeCurrentProduct=(0,ngrx_store.PH)("[Product Page] Initialize Current Product"),loadProducts=(0,ngrx_store.PH)("[Product Page] Load"),updateProduct=(0,ngrx_store.PH)("[Product Page] Update Product",(0,ngrx_store.Ky)()),createProduct=(0,ngrx_store.PH)("[Product Page] Create Product",(0,ngrx_store.Ky)()),deleteProduct=(0,ngrx_store.PH)("[Product Page] Delete Product",(0,ngrx_store.Ky)()),loadProductsSuccess=(0,ngrx_store.PH)("[Product API] Load Success",(0,ngrx_store.Ky)()),loadProductsFailure=(0,ngrx_store.PH)("[Product API] Load Fail",(0,ngrx_store.Ky)()),updateProductSuccess=(0,ngrx_store.PH)("[Product API] Update Product Success",(0,ngrx_store.Ky)()),updateProductFailure=(0,ngrx_store.PH)("[Product API] Update Product Fail",(0,ngrx_store.Ky)()),createProductSuccess=(0,ngrx_store.PH)("[Product API] Create Product Success",(0,ngrx_store.Ky)()),createProductFailure=(0,ngrx_store.PH)("[Product API] Create Product Fail",(0,ngrx_store.Ky)()),deleteProductSuccess=(0,ngrx_store.PH)("[Product API] Delete Product Success",(0,ngrx_store.Ky)()),deleteProductFailure=(0,ngrx_store.PH)("[Product API] Delete Product Fail",(0,ngrx_store.Ky)());var core=__webpack_require__(40305),common=__webpack_require__(89318);function ProductListComponent_div_3_button_2_ng_container_2_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementContainerStart(0),core.\u0275\u0275text(1),core.\u0275\u0275elementContainerEnd()),2&rf){const product_r3=core.\u0275\u0275nextContext().$implicit;core.\u0275\u0275advance(1),core.\u0275\u0275textInterpolate1(" (",product_r3.productCode,") ")}}__name(ProductListComponent_div_3_button_2_ng_container_2_Template,"ProductListComponent_div_3_button_2_ng_container_2_Template");const _c0=__name(function(a0){return{active:a0}},"_c0");function ProductListComponent_div_3_button_2_Template(rf,ctx){if(1&rf){const _r7=core.\u0275\u0275getCurrentView();core.\u0275\u0275elementStart(0,"button",13),core.\u0275\u0275listener("click",__name(function(){const product_r3=core.\u0275\u0275restoreView(_r7).$implicit,ctx_r6=core.\u0275\u0275nextContext(2);return core.\u0275\u0275resetView(ctx_r6.productSelected(product_r3))},"ProductListComponent_div_3_button_2_Template_button_click_0_listener")),core.\u0275\u0275text(1),core.\u0275\u0275template(2,ProductListComponent_div_3_button_2_ng_container_2_Template,2,1,"ng-container",14),core.\u0275\u0275elementEnd()}if(2&rf){const product_r3=ctx.$implicit,ctx_r2=core.\u0275\u0275nextContext(2);core.\u0275\u0275property("ngClass",core.\u0275\u0275pureFunction1(3,_c0,(null==product_r3?null:product_r3.id)===(null==ctx_r2.selectedProduct?null:ctx_r2.selectedProduct.id))),core.\u0275\u0275advance(1),core.\u0275\u0275textInterpolate1("",product_r3.productName," "),core.\u0275\u0275advance(1),core.\u0275\u0275property("ngIf",ctx_r2.displayCode)}}function ProductListComponent_div_3_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementStart(0,"div",10)(1,"div",11),core.\u0275\u0275template(2,ProductListComponent_div_3_button_2_Template,3,5,"button",12),core.\u0275\u0275elementEnd()()),2&rf){const ctx_r0=core.\u0275\u0275nextContext();core.\u0275\u0275advance(2),core.\u0275\u0275property("ngForOf",ctx_r0.products)}}function ProductListComponent_div_13_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementStart(0,"div",15),core.\u0275\u0275text(1),core.\u0275\u0275elementEnd()),2&rf){const ctx_r1=core.\u0275\u0275nextContext();core.\u0275\u0275advance(1),core.\u0275\u0275textInterpolate1(" Error: ",ctx_r1.errorMessage,"\n")}}__name(ProductListComponent_div_3_button_2_Template,"ProductListComponent_div_3_button_2_Template"),__name(ProductListComponent_div_3_Template,"ProductListComponent_div_3_Template"),__name(ProductListComponent_div_13_Template,"ProductListComponent_div_13_Template");class ProductListComponent{constructor(){this.pageTitle="Products",this.displayCodeChanged=new core.EventEmitter,this.initializeNewProduct=new core.EventEmitter,this.productWasSelected=new core.EventEmitter}checkChanged(){this.displayCodeChanged.emit()}newProduct(){this.initializeNewProduct.emit()}productSelected(product){this.productWasSelected.emit(product)}}__name(ProductListComponent,"ProductListComponent"),ProductListComponent.\u0275fac=__name(function(t){return new(t||ProductListComponent)},"ProductListComponent_Factory"),ProductListComponent.\u0275cmp=core.\u0275\u0275defineComponent({type:ProductListComponent,selectors:[["pm-product-list"]],inputs:{errorMessage:"errorMessage",products:"products",displayCode:"displayCode",selectedProduct:"selectedProduct"},outputs:{displayCodeChanged:"displayCodeChanged",initializeNewProduct:"initializeNewProduct",productWasSelected:"productWasSelected"},decls:14,vars:4,consts:[[1,"card"],[1,"card-header"],["class","card-body",4,"ngIf"],[1,"card-footer"],[1,"row"],[1,"form-check","col-md-7"],["type","checkbox",1,"form-check-input",3,"checked","change"],[1,"col-md-4","text-right"],[1,"btn","btn-primary",3,"click"],["class","alert alert-danger",4,"ngIf"],[1,"card-body"],[1,"list-group"],["class","list-group-item list-group-item-action rounded-0",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action","rounded-0",3,"ngClass","click"],[4,"ngIf"],[1,"alert","alert-danger"]],template:__name(function(rf,ctx){1&rf&&(core.\u0275\u0275elementStart(0,"div",0)(1,"div",1),core.\u0275\u0275text(2),core.\u0275\u0275elementEnd(),core.\u0275\u0275template(3,ProductListComponent_div_3_Template,3,1,"div",2),core.\u0275\u0275elementStart(4,"div",3)(5,"div",4)(6,"div",5)(7,"label")(8,"input",6),core.\u0275\u0275listener("change",__name(function(){return ctx.checkChanged()},"ProductListComponent_Template_input_change_8_listener")),core.\u0275\u0275elementEnd(),core.\u0275\u0275text(9," Display Product Code "),core.\u0275\u0275elementEnd()(),core.\u0275\u0275elementStart(10,"div",7)(11,"button",8),core.\u0275\u0275listener("click",__name(function(){return ctx.newProduct()},"ProductListComponent_Template_button_click_11_listener")),core.\u0275\u0275text(12," Add "),core.\u0275\u0275elementEnd()()()()(),core.\u0275\u0275template(13,ProductListComponent_div_13_Template,2,1,"div",9)),2&rf&&(core.\u0275\u0275advance(2),core.\u0275\u0275textInterpolate1(" ",ctx.pageTitle," "),core.\u0275\u0275advance(1),core.\u0275\u0275property("ngIf",ctx.products),core.\u0275\u0275advance(5),core.\u0275\u0275property("checked",ctx.displayCode),core.\u0275\u0275advance(5),core.\u0275\u0275property("ngIf",ctx.errorMessage))},"ProductListComponent_Template"),dependencies:[common.mk,common.sg,common.O5],styles:[".card-body[_ngcontent-%COMP%]{padding:0}"],changeDetection:0});var fesm2020_forms=__webpack_require__(43070);class GenericValidator{constructor(validationMessages){this.validationMessages=validationMessages}processMessages(container){const messages={};for(const controlKey in container.controls)if(container.controls.hasOwnProperty(controlKey)){const c=container.controls[controlKey];if(c instanceof fesm2020_forms.cw){const childMessages=this.processMessages(c);Object.assign(messages,childMessages)}else this.validationMessages[controlKey]&&(messages[controlKey]="",(c.dirty||c.touched)&&c.errors&&Object.keys(c.errors).map(messageKey=>{this.validationMessages[controlKey][messageKey]&&(messages[controlKey]+=this.validationMessages[controlKey][messageKey]+" ")}))}return messages}}__name(GenericValidator,"GenericValidator");class NumberValidators{static range(min,max){return c=>c.value&&(isNaN(c.value)||c.value<min||c.value>max)?{range:!0}:null}}function ProductEditComponent_div_0_span_11_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementStart(0,"span",22),core.\u0275\u0275text(1),core.\u0275\u0275elementEnd()),2&rf){const ctx_r2=core.\u0275\u0275nextContext(2);core.\u0275\u0275advance(1),core.\u0275\u0275textInterpolate1(" ",ctx_r2.displayMessage.productName," ")}}function ProductEditComponent_div_0_span_17_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementStart(0,"span",22),core.\u0275\u0275text(1),core.\u0275\u0275elementEnd()),2&rf){const ctx_r3=core.\u0275\u0275nextContext(2);core.\u0275\u0275advance(1),core.\u0275\u0275textInterpolate1(" ",ctx_r3.displayMessage.productCode," ")}}function ProductEditComponent_div_0_span_23_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementStart(0,"span",22),core.\u0275\u0275text(1),core.\u0275\u0275elementEnd()),2&rf){const ctx_r4=core.\u0275\u0275nextContext(2);core.\u0275\u0275advance(1),core.\u0275\u0275textInterpolate1(" ",ctx_r4.displayMessage.starRating," ")}}function ProductEditComponent_div_0_span_30_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementStart(0,"span",22),core.\u0275\u0275text(1),core.\u0275\u0275elementEnd()),2&rf){const ctx_r5=core.\u0275\u0275nextContext(2);core.\u0275\u0275advance(1),core.\u0275\u0275textInterpolate1(" ",ctx_r5.displayMessage.description," ")}}__name(NumberValidators,"NumberValidators"),__name(ProductEditComponent_div_0_span_11_Template,"ProductEditComponent_div_0_span_11_Template"),__name(ProductEditComponent_div_0_span_17_Template,"ProductEditComponent_div_0_span_17_Template"),__name(ProductEditComponent_div_0_span_23_Template,"ProductEditComponent_div_0_span_23_Template"),__name(ProductEditComponent_div_0_span_30_Template,"ProductEditComponent_div_0_span_30_Template");const product_edit_component_c0=__name(function(a0){return{"is-invalid":a0}},"product_edit_component_c0");function ProductEditComponent_div_0_Template(rf,ctx){if(1&rf){const _r7=core.\u0275\u0275getCurrentView();core.\u0275\u0275elementStart(0,"div",2)(1,"div",3),core.\u0275\u0275text(2),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementStart(3,"div",4)(4,"form",5),core.\u0275\u0275listener("ngSubmit",__name(function(){core.\u0275\u0275restoreView(_r7);const ctx_r6=core.\u0275\u0275nextContext();return core.\u0275\u0275resetView(ctx_r6.saveProduct())},"ProductEditComponent_div_0_Template_form_ngSubmit_4_listener")),core.\u0275\u0275elementStart(5,"fieldset")(6,"div",6)(7,"label",7),core.\u0275\u0275text(8,"Product Name"),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementStart(9,"div",8)(10,"input",9),core.\u0275\u0275listener("blur",__name(function(){core.\u0275\u0275restoreView(_r7);const ctx_r8=core.\u0275\u0275nextContext();return core.\u0275\u0275resetView(ctx_r8.blur())},"ProductEditComponent_div_0_Template_input_blur_10_listener")),core.\u0275\u0275elementEnd(),core.\u0275\u0275template(11,ProductEditComponent_div_0_span_11_Template,2,1,"span",10),core.\u0275\u0275elementEnd()(),core.\u0275\u0275elementStart(12,"div",6)(13,"label",11),core.\u0275\u0275text(14,"Product Code"),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementStart(15,"div",8)(16,"input",12),core.\u0275\u0275listener("blur",__name(function(){core.\u0275\u0275restoreView(_r7);const ctx_r9=core.\u0275\u0275nextContext();return core.\u0275\u0275resetView(ctx_r9.blur())},"ProductEditComponent_div_0_Template_input_blur_16_listener")),core.\u0275\u0275elementEnd(),core.\u0275\u0275template(17,ProductEditComponent_div_0_span_17_Template,2,1,"span",10),core.\u0275\u0275elementEnd()(),core.\u0275\u0275elementStart(18,"div",6)(19,"label",13),core.\u0275\u0275text(20,"Star Rating (1-5)"),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementStart(21,"div",8),core.\u0275\u0275element(22,"input",14),core.\u0275\u0275template(23,ProductEditComponent_div_0_span_23_Template,2,1,"span",10),core.\u0275\u0275elementEnd()(),core.\u0275\u0275elementStart(24,"div",6)(25,"label",15),core.\u0275\u0275text(26,"Description"),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementStart(27,"div",8)(28,"textarea",16),core.\u0275\u0275text(29,"            "),core.\u0275\u0275elementEnd(),core.\u0275\u0275template(30,ProductEditComponent_div_0_span_30_Template,2,1,"span",10),core.\u0275\u0275elementEnd()(),core.\u0275\u0275elementStart(31,"div",17)(32,"div",18)(33,"span")(34,"button",19),core.\u0275\u0275text(35," Save "),core.\u0275\u0275elementEnd()(),core.\u0275\u0275elementStart(36,"span")(37,"button",20),core.\u0275\u0275listener("click",__name(function(){core.\u0275\u0275restoreView(_r7);const ctx_r10=core.\u0275\u0275nextContext();return core.\u0275\u0275resetView(ctx_r10.cancelEdit())},"ProductEditComponent_div_0_Template_button_click_37_listener")),core.\u0275\u0275text(38," Cancel "),core.\u0275\u0275elementEnd()(),core.\u0275\u0275elementStart(39,"span")(40,"button",21),core.\u0275\u0275listener("click",__name(function(){core.\u0275\u0275restoreView(_r7);const ctx_r11=core.\u0275\u0275nextContext();return core.\u0275\u0275resetView(ctx_r11.deleteProduct())},"ProductEditComponent_div_0_Template_button_click_40_listener")),core.\u0275\u0275text(41," Delete "),core.\u0275\u0275elementEnd()()()()()()()()}if(2&rf){const ctx_r0=core.\u0275\u0275nextContext();core.\u0275\u0275advance(2),core.\u0275\u0275textInterpolate1(" ",ctx_r0.pageTitle," "),core.\u0275\u0275advance(2),core.\u0275\u0275property("formGroup",ctx_r0.productForm),core.\u0275\u0275advance(6),core.\u0275\u0275property("ngClass",core.\u0275\u0275pureFunction1(11,product_edit_component_c0,ctx_r0.displayMessage.productName)),core.\u0275\u0275advance(1),core.\u0275\u0275property("ngIf",ctx_r0.displayMessage.productName),core.\u0275\u0275advance(5),core.\u0275\u0275property("ngClass",core.\u0275\u0275pureFunction1(13,product_edit_component_c0,ctx_r0.displayMessage.productCode)),core.\u0275\u0275advance(1),core.\u0275\u0275property("ngIf",ctx_r0.displayMessage.productCode),core.\u0275\u0275advance(5),core.\u0275\u0275property("ngClass",core.\u0275\u0275pureFunction1(15,product_edit_component_c0,ctx_r0.displayMessage.starRating)),core.\u0275\u0275advance(1),core.\u0275\u0275property("ngIf",ctx_r0.displayMessage.starRating),core.\u0275\u0275advance(5),core.\u0275\u0275property("ngClass",core.\u0275\u0275pureFunction1(17,product_edit_component_c0,ctx_r0.displayMessage.description)),core.\u0275\u0275advance(2),core.\u0275\u0275property("ngIf",ctx_r0.displayMessage.description),core.\u0275\u0275advance(4),core.\u0275\u0275property("disabled",!ctx_r0.productForm.valid||!ctx_r0.productForm.dirty)}}function ProductEditComponent_div_1_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementStart(0,"div",23),core.\u0275\u0275text(1),core.\u0275\u0275elementEnd()),2&rf){const ctx_r1=core.\u0275\u0275nextContext();core.\u0275\u0275advance(1),core.\u0275\u0275textInterpolate1(" Error: ",ctx_r1.errorMessage,"\n")}}__name(ProductEditComponent_div_0_Template,"ProductEditComponent_div_0_Template"),__name(ProductEditComponent_div_1_Template,"ProductEditComponent_div_1_Template");class ProductEditComponent{constructor(fb){this.fb=fb,this.pageTitle="Product Edit",this.create=new core.EventEmitter,this.update=new core.EventEmitter,this.delete=new core.EventEmitter,this.clearCurrent=new core.EventEmitter,this.displayMessage={},this.validationMessages={productName:{required:"Product name is required.",minlength:"Product name must be at least three characters.",maxlength:"Product name cannot exceed 50 characters."},productCode:{required:"Product code is required."},starRating:{range:"Rate the product between 1 (lowest) and 5 (highest)."}},this.genericValidator=new GenericValidator(this.validationMessages)}ngOnInit(){this.productForm=this.fb.group({productName:["",[fesm2020_forms.kI.required,fesm2020_forms.kI.minLength(3),fesm2020_forms.kI.maxLength(50)]],productCode:["",fesm2020_forms.kI.required],starRating:["",NumberValidators.range(1,5)],description:""}),this.productForm.valueChanges.subscribe(()=>this.displayMessage=this.genericValidator.processMessages(this.productForm))}ngOnChanges(changes){if(changes.selectedProduct){const product=changes.selectedProduct.currentValue;this.displayProduct(product)}}blur(){this.displayMessage=this.genericValidator.processMessages(this.productForm)}displayProduct(product){product&&this.productForm&&(this.productForm.reset(),0===product.id?this.pageTitle="Add Product":this.pageTitle=`Edit Product: ${product.productName}`,this.productForm.patchValue({productName:product.productName,productCode:product.productCode,starRating:product.starRating,description:product.description}))}cancelEdit(){this.displayProduct(this.selectedProduct)}deleteProduct(){this.selectedProduct&&this.selectedProduct.id?confirm(`Really delete the product: ${this.selectedProduct.productName}?`)&&this.delete.emit(this.selectedProduct):this.clearCurrent.emit()}saveProduct(){if(this.productForm.valid&&this.productForm.dirty){const product={...this.selectedProduct,...this.productForm.value};0===product.id?this.create.emit(product):this.update.emit(product)}}}__name(ProductEditComponent,"ProductEditComponent"),ProductEditComponent.\u0275fac=__name(function(t){return new(t||ProductEditComponent)(core.\u0275\u0275directiveInject(fesm2020_forms.qu))},"ProductEditComponent_Factory"),ProductEditComponent.\u0275cmp=core.\u0275\u0275defineComponent({type:ProductEditComponent,selectors:[["pm-product-edit"]],inputs:{errorMessage:"errorMessage",selectedProduct:"selectedProduct"},outputs:{create:"create",update:"update",delete:"delete",clearCurrent:"clearCurrent"},features:[core.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:[["class","card",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"card-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","productNameId",1,"col-md-3","col-form-label"],[1,"col-md-9"],["id","productNameId","type","text","placeholder","Name (required)","formControlName","productName",1,"form-control",3,"ngClass","blur"],["class","invalid-feedback",4,"ngIf"],["for","productCodeId",1,"col-md-3","col-form-label"],["id","productCodeId","type","text","placeholder","Code (required)","formControlName","productCode",1,"form-control",3,"ngClass","blur"],["for","starRatingId",1,"col-md-3","col-form-label"],["id","starRatingId","type","text","placeholder","Rating","formControlName","starRating",1,"form-control",3,"ngClass"],["for","descriptionId",1,"col-md-3","col-form-label"],["id","descriptionId","placeholder","Description","rows","3","formControlName","description",1,"form-control",3,"ngClass"],[1,"form-group"],[1,"col-md-10","col-md-offset-2"],["type","submit",1,"btn","btn-primary",2,"width","80px","margin-right","10px",3,"disabled"],["type","button",1,"btn","btn-light",2,"width","80px","margin-right","10px",3,"click"],["type","button",1,"btn","btn-light",2,"width","80px",3,"click"],[1,"invalid-feedback"],[1,"alert","alert-danger"]],template:__name(function(rf,ctx){1&rf&&(core.\u0275\u0275template(0,ProductEditComponent_div_0_Template,42,19,"div",0),core.\u0275\u0275template(1,ProductEditComponent_div_1_Template,2,1,"div",1)),2&rf&&(core.\u0275\u0275property("ngIf",ctx.selectedProduct),core.\u0275\u0275advance(1),core.\u0275\u0275property("ngIf",ctx.errorMessage))},"ProductEditComponent_Template"),dependencies:[common.mk,common.O5,fesm2020_forms._Y,fesm2020_forms.Fj,fesm2020_forms.JJ,fesm2020_forms.JL,fesm2020_forms.sg,fesm2020_forms.u],encapsulation:2});class ProductShellComponent{constructor(store){this.store=store}ngOnInit(){this.products$=this.store.select(getProducts),this.errorMessage$=this.store.select(getError),this.store.dispatch(loadProducts()),this.selectedProduct$=this.store.select(getCurrentProduct),this.displayCode$=this.store.select(getShowProductCode)}checkChanged(){this.store.dispatch(toggleProductCode())}newProduct(){this.store.dispatch(initializeCurrentProduct())}productSelected(product){this.store.dispatch(setCurrentProduct({currentProductId:product.id}))}deleteProduct(product){this.store.dispatch(deleteProduct({productId:product.id}))}clearProduct(){this.store.dispatch(clearCurrentProduct())}saveProduct(product){this.store.dispatch(createProduct({product}))}updateProduct(product){this.store.dispatch(updateProduct({product}))}}__name(ProductShellComponent,"ProductShellComponent"),ProductShellComponent.\u0275fac=__name(function(t){return new(t||ProductShellComponent)(core.\u0275\u0275directiveInject(ngrx_store.yh))},"ProductShellComponent_Factory"),ProductShellComponent.\u0275cmp=core.\u0275\u0275defineComponent({type:ProductShellComponent,selectors:[["ng-component"]],decls:11,vars:18,consts:[[1,"row"],[1,"col-md-4"],[3,"displayCode","products","selectedProduct","errorMessage","displayCodeChanged","initializeNewProduct","productWasSelected"],[1,"col-md-8"],[3,"selectedProduct","errorMessage","clearCurrent","update","delete","create"]],template:__name(function(rf,ctx){1&rf&&(core.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"pm-product-list",2),core.\u0275\u0275listener("displayCodeChanged",__name(function(){return ctx.checkChanged()},"ProductShellComponent_Template_pm_product_list_displayCodeChanged_2_listener"))("initializeNewProduct",__name(function(){return ctx.newProduct()},"ProductShellComponent_Template_pm_product_list_initializeNewProduct_2_listener"))("productWasSelected",__name(function($event){return ctx.productSelected($event)},"ProductShellComponent_Template_pm_product_list_productWasSelected_2_listener")),core.\u0275\u0275pipe(3,"async"),core.\u0275\u0275pipe(4,"async"),core.\u0275\u0275pipe(5,"async"),core.\u0275\u0275pipe(6,"async"),core.\u0275\u0275elementEnd()(),core.\u0275\u0275elementStart(7,"div",3)(8,"pm-product-edit",4),core.\u0275\u0275listener("clearCurrent",__name(function(){return ctx.clearProduct()},"ProductShellComponent_Template_pm_product_edit_clearCurrent_8_listener"))("update",__name(function($event){return ctx.updateProduct($event)},"ProductShellComponent_Template_pm_product_edit_update_8_listener"))("delete",__name(function($event){return ctx.deleteProduct($event)},"ProductShellComponent_Template_pm_product_edit_delete_8_listener"))("create",__name(function($event){return ctx.saveProduct($event)},"ProductShellComponent_Template_pm_product_edit_create_8_listener")),core.\u0275\u0275pipe(9,"async"),core.\u0275\u0275pipe(10,"async"),core.\u0275\u0275elementEnd()()()),2&rf&&(core.\u0275\u0275advance(2),core.\u0275\u0275property("displayCode",core.\u0275\u0275pipeBind1(3,6,ctx.displayCode$))("products",core.\u0275\u0275pipeBind1(4,8,ctx.products$))("selectedProduct",core.\u0275\u0275pipeBind1(5,10,ctx.selectedProduct$))("errorMessage",core.\u0275\u0275pipeBind1(6,12,ctx.errorMessage$)),core.\u0275\u0275advance(6),core.\u0275\u0275property("selectedProduct",core.\u0275\u0275pipeBind1(9,14,ctx.selectedProduct$))("errorMessage",core.\u0275\u0275pipeBind1(10,16,ctx.errorMessage$)))},"ProductShellComponent_Template"),dependencies:[ProductListComponent,ProductEditComponent,common.Ov],encapsulation:2});const productReducer=(0,ngrx_store.Lq)({showProductCode:!0,currentProductId:null,products:[],error:""},(0,ngrx_store.on)(toggleProductCode,state=>({...state,showProductCode:!state.showProductCode})),(0,ngrx_store.on)(setCurrentProduct,(state,action)=>({...state,currentProductId:action.currentProductId})),(0,ngrx_store.on)(clearCurrentProduct,state=>({...state,currentProductId:null})),(0,ngrx_store.on)(initializeCurrentProduct,state=>({...state,currentProductId:0})),(0,ngrx_store.on)(loadProductsSuccess,(state,action)=>({...state,products:action.products,error:""})),(0,ngrx_store.on)(loadProductsFailure,(state,action)=>({...state,products:[],error:action.error})),(0,ngrx_store.on)(updateProductSuccess,(state,action)=>{const updatedProducts=state.products.map(item=>action.product.id===item.id?action.product:item);return{...state,products:updatedProducts,currentProductId:action.product.id,error:""}}),(0,ngrx_store.on)(updateProductFailure,(state,action)=>({...state,error:action.error})),(0,ngrx_store.on)(createProductSuccess,(state,action)=>({...state,products:[...state.products,action.product],currentProductId:action.product.id,error:""})),(0,ngrx_store.on)(createProductFailure,(state,action)=>({...state,error:action.error})),(0,ngrx_store.on)(deleteProductSuccess,(state,action)=>({...state,products:state.products.filter(product=>product.id!==action.productId),currentProductId:null,error:""})),(0,ngrx_store.on)(deleteProductFailure,(state,action)=>({...state,error:action.error})));var ngrx_effects=__webpack_require__(21334),operators=__webpack_require__(51138),cjs=__webpack_require__(25095),http=__webpack_require__(48664);class ProductService{constructor(http2){this.http=http2,this.productsUrl="api/products"}getProducts(){return this.http.get(this.productsUrl).pipe((0,operators.bw)(data=>console.log(JSON.stringify(data))),(0,operators.KQ)(this.handleError))}createProduct(product){const headers=new http.WM({"Content-Type":"application/json"}),newProduct={...product,id:null};return this.http.post(this.productsUrl,newProduct,{headers}).pipe((0,operators.bw)(data=>console.log("createProduct: "+JSON.stringify(data))),(0,operators.KQ)(this.handleError))}deleteProduct(id){const headers=new http.WM({"Content-Type":"application/json"}),url=`${this.productsUrl}/${id}`;return this.http.delete(url,{headers}).pipe((0,operators.bw)(data=>console.log("deleteProduct: "+id)),(0,operators.KQ)(this.handleError))}updateProduct(product){const headers=new http.WM({"Content-Type":"application/json"}),url=`${this.productsUrl}/${product.id}`;return this.http.put(url,product,{headers}).pipe((0,operators.bw)(()=>console.log("updateProduct: "+product.id)),(0,operators.UI)(()=>product),(0,operators.KQ)(this.handleError))}handleError(err){let errorMessage;return errorMessage=err.error instanceof ErrorEvent?`An error occurred: ${err.error.message}`:`Backend returned code ${err.status}: ${err.body.error}`,console.error(err),(0,cjs.throwError)(errorMessage)}}__name(ProductService,"ProductService"),ProductService.\u0275fac=__name(function(t){return new(t||ProductService)(core.\u0275\u0275inject(http.eN))},"ProductService_Factory"),ProductService.\u0275prov=core.\u0275\u0275defineInjectable({token:ProductService,factory:ProductService.\u0275fac,providedIn:"root"});class ProductEffects{constructor(actions$,productService){this.actions$=actions$,this.productService=productService,this.loadProducts$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(loadProducts),(0,operators.zg)(()=>this.productService.getProducts().pipe((0,operators.UI)(products=>loadProductsSuccess({products})),(0,operators.KQ)(error=>(0,cjs.of)(loadProductsFailure({error}))))))),this.updateProduct$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(updateProduct),(0,operators.bJ)(action=>this.productService.updateProduct(action.product).pipe((0,operators.UI)(product=>updateProductSuccess({product})),(0,operators.KQ)(error=>(0,cjs.of)(updateProductFailure({error}))))))),this.createProduct$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(createProduct),(0,operators.bJ)(action=>this.productService.createProduct(action.product).pipe((0,operators.UI)(product=>createProductSuccess({product})),(0,operators.KQ)(error=>(0,cjs.of)(createProductFailure({error}))))))),this.deleteProduct$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(deleteProduct),(0,operators.zg)(action=>this.productService.deleteProduct(action.productId).pipe((0,operators.UI)(()=>deleteProductSuccess({productId:action.productId})),(0,operators.KQ)(error=>(0,cjs.of)(deleteProductFailure({error})))))))}}__name(ProductEffects,"ProductEffects"),ProductEffects.\u0275fac=__name(function(t){return new(t||ProductEffects)(core.\u0275\u0275inject(ngrx_effects.eX),core.\u0275\u0275inject(ProductService))},"ProductEffects_Factory"),ProductEffects.\u0275prov=core.\u0275\u0275defineInjectable({token:ProductEffects,factory:ProductEffects.\u0275fac});const productRoutes=[{path:"",component:ProductShellComponent}];class ProductModule{}__name(ProductModule,"ProductModule"),ProductModule.\u0275fac=__name(function(t){return new(t||ProductModule)},"ProductModule_Factory"),ProductModule.\u0275mod=core.\u0275\u0275defineNgModule({type:ProductModule}),ProductModule.\u0275inj=core.\u0275\u0275defineInjector({imports:[shared_module.m,router.Bz.forChild(productRoutes),ngrx_store.Aw.forFeature("products",productReducer),ngrx_effects.sQ.forFeature([ProductEffects])]})}};