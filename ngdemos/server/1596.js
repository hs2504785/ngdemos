"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=1596,exports.ids=[1596],exports.modules={81596:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{MyVideoComponent:()=>MyVideoComponent,MyVideoModule:()=>MyVideoModule});var dialog=__webpack_require__(4734),core=__webpack_require__(40305),common=__webpack_require__(89318),cjs=__webpack_require__(25095),operators=__webpack_require__(51138);const _c0=["youtubeContainer"];class YouTubePlayer{get videoId(){return this._videoId.value}set videoId(videoId){this._videoId.next(videoId)}get height(){return this._height.value}set height(height){this._height.next(height||390)}get width(){return this._width.value}set width(width){this._width.next(width||640)}set startSeconds(startSeconds){this._startSeconds.next(startSeconds)}set endSeconds(endSeconds){this._endSeconds.next(endSeconds)}set suggestedQuality(suggestedQuality){this._suggestedQuality.next(suggestedQuality)}get playerVars(){return this._playerVars.value}set playerVars(playerVars){this._playerVars.next(playerVars)}get disableCookies(){return this._disableCookies.value}set disableCookies(value){this._disableCookies.next(!!value)}constructor(_ngZone,platformId){this._ngZone=_ngZone,this._youtubeContainer=new cjs.Subject,this._destroyed=new cjs.Subject,this._playerChanges=new cjs.BehaviorSubject(void 0),this._videoId=new cjs.BehaviorSubject(void 0),this._height=new cjs.BehaviorSubject(390),this._width=new cjs.BehaviorSubject(640),this._startSeconds=new cjs.BehaviorSubject(void 0),this._endSeconds=new cjs.BehaviorSubject(void 0),this._suggestedQuality=new cjs.BehaviorSubject(void 0),this._playerVars=new cjs.BehaviorSubject(void 0),this._disableCookies=new cjs.BehaviorSubject(!1),this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=(0,common.NF)(platformId)}ngOnInit(){if(!this._isBrowser)return;let iframeApiAvailableObs=(0,cjs.of)(!0);if(!window.YT||!window.YT.Player){this.showBeforeIframeApiLoads;const iframeApiAvailableSubject=new cjs.Subject;this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback&&this._existingApiReadyCallback(),this._ngZone.run(()=>iframeApiAvailableSubject.next(!0))},iframeApiAvailableObs=iframeApiAvailableSubject.pipe((0,operators.qn)(1),(0,operators.O4)(!1))}const hostObservable=this._disableCookies.pipe((0,operators.UI)(cookiesDisabled=>cookiesDisabled?"https://www.youtube-nocookie.com":void 0)),playerObs=createPlayerObservable(this._youtubeContainer,this._videoId,hostObservable,iframeApiAvailableObs,this._width,this._height,this._playerVars,this._ngZone).pipe((0,operators.bw)(player=>{this._playerChanges.next(player)}),waitUntilReady(player=>{playerIsReady(player)||player.destroy()}),(0,operators.Rs)(this._destroyed),(0,operators.nY)());playerObs.subscribe(player=>{this._player=player,player&&this._pendingPlayerState&&this._initializePlayer(player,this._pendingPlayerState),this._pendingPlayerState=void 0}),bindSizeToPlayer(playerObs,this._width,this._height),bindSuggestedQualityToPlayer(playerObs,this._suggestedQuality),bindCueVideoCall(playerObs,this._videoId,this._startSeconds,this._endSeconds,this._suggestedQuality,this._destroyed),playerObs.connect()}ngAfterViewInit(){this._youtubeContainer.next(this.youtubeContainer.nativeElement)}ngOnDestroy(){this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._videoId.complete(),this._height.complete(),this._width.complete(),this._startSeconds.complete(),this._endSeconds.complete(),this._suggestedQuality.complete(),this._youtubeContainer.complete(),this._playerVars.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(seconds,allowSeekAhead){this._player?this._player.seekTo(seconds,allowSeekAhead):this._getPendingState().seek={seconds,allowSeekAhead}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(volume){this._player?this._player.setVolume(volume):this._getPendingState().volume=volume}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(playbackRate){if(this._player)return this._player.setPlaybackRate(playbackRate);this._getPendingState().playbackRate=playbackRate}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_initializePlayer(player,state){const{playbackState,playbackRate,volume,muted,seek}=state;switch(playbackState){case YT.PlayerState.PLAYING:player.playVideo();break;case YT.PlayerState.PAUSED:player.pauseVideo();break;case YT.PlayerState.CUED:player.stopVideo()}null!=playbackRate&&player.setPlaybackRate(playbackRate),null!=volume&&player.setVolume(volume),null!=muted&&(muted?player.mute():player.unMute()),null!=seek&&player.seekTo(seek.seconds,seek.allowSeekAhead)}_getLazyEmitter(name){return this._playerChanges.pipe((0,operators.wt)(player=>player?(0,cjs.fromEventPattern)(listener=>{player.addEventListener(name,listener)},listener=>{try{player.removeEventListener&&player.removeEventListener(name,listener)}catch{}}):(0,cjs.of)()),source=>new cjs.Observable(observer=>source.subscribe({next:value=>this._ngZone.run(()=>observer.next(value)),error:error=>observer.error(error),complete:()=>observer.complete()})),(0,operators.Rs)(this._destroyed))}}function bindSizeToPlayer(playerObs,widthObs,heightObs){return(0,cjs.combineLatest)([playerObs,widthObs,heightObs]).subscribe(([player,width,height])=>player&&player.setSize(width,height))}function bindSuggestedQualityToPlayer(playerObs,suggestedQualityObs){return(0,cjs.combineLatest)([playerObs,suggestedQualityObs]).subscribe(([player,suggestedQuality])=>player&&suggestedQuality&&player.setPlaybackQuality(suggestedQuality))}function waitUntilReady(onAbort){return(0,operators.zg)(player=>player?playerIsReady(player)?(0,cjs.of)(player):new cjs.Observable(emitter=>{let aborted=!1,resolved=!1;const onReady=__name(event=>{resolved=!0,aborted||(event.target.removeEventListener("onReady",onReady),emitter.next(event.target))},"onReady");return player.addEventListener("onReady",onReady),()=>{aborted=!0,resolved||onAbort(player)}}).pipe((0,operators.qn)(1),(0,operators.O4)(void 0)):(0,cjs.of)(void 0))}function createPlayerObservable(youtubeContainer,videoIdObs,hostObs,iframeApiAvailableObs,widthObs,heightObs,playerVarsObs,ngZone){const playerOptions=(0,cjs.combineLatest)([videoIdObs,hostObs,playerVarsObs]).pipe((0,operators.Mm)((0,cjs.combineLatest)([widthObs,heightObs])),(0,operators.UI)(([constructorOptions,sizeOptions])=>{const[videoId,host,playerVars]=constructorOptions,[width,height]=sizeOptions;return videoId?{videoId,playerVars,width,height,host}:void 0}));return(0,cjs.combineLatest)([youtubeContainer,playerOptions,(0,cjs.of)(ngZone)]).pipe(skipUntilRememberLatest(iframeApiAvailableObs),(0,operators.Rp)(syncPlayerState,void 0),(0,operators.xb)())}function skipUntilRememberLatest(notifier){return(0,cjs.pipe)((0,operators.aj)(notifier),(0,operators.nF)(([_,doneSkipping])=>!doneSkipping),(0,operators.UI)(([value])=>value))}function syncPlayerState(player,[container,videoOptions,ngZone]){if(player&&videoOptions&&(player.playerVars!==videoOptions.playerVars||player.host!==videoOptions.host))player.destroy();else{if(!videoOptions)return void(player&&player.destroy());if(player)return player}const newPlayer=ngZone.runOutsideAngular(()=>new YT.Player(container,videoOptions));return newPlayer.videoId=videoOptions.videoId,newPlayer.playerVars=videoOptions.playerVars,newPlayer.host=videoOptions.host,newPlayer}function bindCueVideoCall(playerObs,videoIdObs,startSecondsObs,endSecondsObs,suggestedQualityObs,destroyed){const cueOptionsObs=(0,cjs.combineLatest)([startSecondsObs,endSecondsObs]).pipe((0,operators.UI)(([startSeconds,endSeconds])=>({startSeconds,endSeconds}))),filteredCueOptions=cueOptionsObs.pipe(filterOnOther(playerObs,player=>!!player&&!hasPlayerStarted(player))),changedVideoId=videoIdObs.pipe(filterOnOther(playerObs,(player,videoId)=>!!player&&player.videoId!==videoId)),changedPlayer=playerObs.pipe(filterOnOther((0,cjs.combineLatest)([videoIdObs,cueOptionsObs]),([videoId,cueOptions],player)=>!(!player||videoId==player.videoId&&!cueOptions.startSeconds&&!cueOptions.endSeconds)));(0,cjs.merge)(changedPlayer,changedVideoId,filteredCueOptions).pipe((0,operators.Mm)((0,cjs.combineLatest)([playerObs,videoIdObs,cueOptionsObs,suggestedQualityObs])),(0,operators.UI)(([_,values])=>values),(0,operators.Rs)(destroyed)).subscribe(([player,videoId,cueOptions,suggestedQuality])=>{!videoId||!player||(player.videoId=videoId,player.cueVideoById({videoId,suggestedQuality,...cueOptions}))})}function hasPlayerStarted(player){const state=player.getPlayerState();return state!==YT.PlayerState.UNSTARTED&&state!==YT.PlayerState.CUED}function playerIsReady(player){return"getPlayerStatus"in player}function filterOnOther(otherObs,filterFn){return(0,cjs.pipe)((0,operators.Mm)(otherObs),(0,operators.hX)(([value,other])=>filterFn(other,value)),(0,operators.UI)(([value])=>value))}__name(YouTubePlayer,"YouTubePlayer"),YouTubePlayer.\u0275fac=__name(function(t){return new(t||YouTubePlayer)(core.\u0275\u0275directiveInject(core.NgZone),core.\u0275\u0275directiveInject(core.PLATFORM_ID))},"YouTubePlayer_Factory"),YouTubePlayer.\u0275cmp=core.\u0275\u0275defineComponent({type:YouTubePlayer,selectors:[["youtube-player"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.\u0275\u0275viewQuery(_c0,5),2&rf){let _t;core.\u0275\u0275queryRefresh(_t=core.\u0275\u0275loadQuery())&&(ctx.youtubeContainer=_t.first)}},"YouTubePlayer_Query"),inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",disableCookies:"disableCookies",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},decls:2,vars:0,consts:[["youtubeContainer",""]],template:__name(function(rf,ctx){1&rf&&core.\u0275\u0275element(0,"div",null,0)},"YouTubePlayer_Template"),encapsulation:2,changeDetection:0}),__name(bindSizeToPlayer,"bindSizeToPlayer"),__name(bindSuggestedQualityToPlayer,"bindSuggestedQualityToPlayer"),__name(waitUntilReady,"waitUntilReady"),__name(createPlayerObservable,"createPlayerObservable"),__name(skipUntilRememberLatest,"skipUntilRememberLatest"),__name(syncPlayerState,"syncPlayerState"),__name(bindCueVideoCall,"bindCueVideoCall"),__name(hasPlayerStarted,"hasPlayerStarted"),__name(playerIsReady,"playerIsReady"),__name(filterOnOther,"filterOnOther");class YouTubePlayerModule{}__name(YouTubePlayerModule,"YouTubePlayerModule"),YouTubePlayerModule.\u0275fac=__name(function(t){return new(t||YouTubePlayerModule)},"YouTubePlayerModule_Factory"),YouTubePlayerModule.\u0275mod=core.\u0275\u0275defineNgModule({type:YouTubePlayerModule}),YouTubePlayerModule.\u0275inj=core.\u0275\u0275defineInjector({});let apiLoaded=!1;class MyVideoComponent{constructor(){}ngOnInit(){if(!apiLoaded){const tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api",document.body.appendChild(tag),apiLoaded=!0}}}__name(MyVideoComponent,"MyVideoComponent"),MyVideoComponent.\u0275fac=__name(function(t){return new(t||MyVideoComponent)},"MyVideoComponent_Factory"),MyVideoComponent.\u0275cmp=core.\u0275\u0275defineComponent({type:MyVideoComponent,selectors:[["app-my-video"]],decls:3,vars:0,consts:[["mat-dialog-title",""],["videoId","kRRspDN4Xwo"]],template:__name(function(rf,ctx){1&rf&&(core.\u0275\u0275elementStart(0,"h1",0),core.\u0275\u0275text(1,"My Video"),core.\u0275\u0275elementEnd(),core.\u0275\u0275element(2,"youtube-player",1))},"MyVideoComponent_Template"),dependencies:[YouTubePlayer,dialog.uh]});class MyVideoModule{}__name(MyVideoModule,"MyVideoModule"),MyVideoModule.\u0275fac=__name(function(t){return new(t||MyVideoModule)},"MyVideoModule_Factory"),MyVideoModule.\u0275mod=core.\u0275\u0275defineNgModule({type:MyVideoModule}),MyVideoModule.\u0275inj=core.\u0275\u0275defineInjector({imports:[YouTubePlayerModule,dialog.Is]})}};