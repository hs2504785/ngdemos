var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=4497,exports.ids=[4497],exports.modules={34497:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BasicChatModule:()=>BasicChatModule});var common=__webpack_require__(89318),router=__webpack_require__(14195),fesm2020_forms=__webpack_require__(43070),node_pusher=__webpack_require__(28024),pusher_default=__webpack_require__.n(node_pusher),core=__webpack_require__(40305),chat_service=__webpack_require__(10323);const _c0=["scrollMe"];function BasicChatComponent_div_17_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementStart(0,"div",12)(1,"div",13)(2,"strong",14),core.\u0275\u0275text(3),core.\u0275\u0275elementEnd()(),core.\u0275\u0275elementStart(4,"div",15),core.\u0275\u0275text(5),core.\u0275\u0275elementEnd()()),2&rf){const msg_r2=ctx.$implicit;core.\u0275\u0275advance(3),core.\u0275\u0275textInterpolate(msg_r2.username),core.\u0275\u0275advance(2),core.\u0275\u0275textInterpolate(msg_r2.message)}}__name(BasicChatComponent_div_17_Template,"BasicChatComponent_div_17_Template");class BasicChatComponent{constructor(chatService){this.chatService=chatService,this.username="Hemant",this.message="",this.messages=[{username:"Hemant",message:"Hey "},{username:"Vivek",message:"Yes sir"},{username:"Vivek",message:"How are you?"}]}ngOnInit(){this.form=new fesm2020_forms.cw({message:new fesm2020_forms.NI("")}),pusher_default().logToConsole=!0,new(pusher_default())("6da8b4c72ac7d3771308",{cluster:"mt1"}).subscribe("chat").bind("message",data=>{console.log("PPP",data),this.messages.push(data)}),this.scrollToBottom()}sendMessage(){this.chatService.sendMessage({username:this.username,...this.form.value}).subscribe(()=>this.form.reset())}ngAfterViewChecked(){this.scrollToBottom()}scrollToBottom(){try{this.myScrollContainer.nativeElement.scrollTop=this.myScrollContainer.nativeElement.scrollHeight}catch{}}}__name(BasicChatComponent,"BasicChatComponent"),BasicChatComponent.\u0275fac=__name(function(t){return new(t||BasicChatComponent)(core.\u0275\u0275directiveInject(chat_service.a))},"BasicChatComponent_Factory"),BasicChatComponent.\u0275cmp=core.\u0275\u0275defineComponent({type:BasicChatComponent,selectors:[["lib-basic-chat"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.\u0275\u0275viewQuery(_c0,5),2&rf){let _t;core.\u0275\u0275queryRefresh(_t=core.\u0275\u0275loadQuery())&&(ctx.myScrollContainer=_t.first)}},"BasicChatComponent_Query"),decls:18,vars:3,consts:[[1,"container"],[1,"d-flex","justify-content-between"],["type","text",1,"form-control",3,"value","input"],[1,"form-inline",3,"formGroup","ngSubmit"],[1,"form-group"],["type","text","name","message","id","message","placeholder","Message","aria-describedby","helpId","formControlName","message",1,"form-control"],["type","submit",1,"btn","btn-primary","ml-2"],[1,"card","mt-4"],[1,"card-header"],[1,"list-group","list-group-flush","border-bottom","scrollarea"],["scrollMe",""],["class","list-group-item list-group-item-action py-3 lh-tight",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action","py-3","lh-tight"],[1,"d-flex","w-100","align-items-center","justify-content-between"],[1,"mb-1"],[1,"col-10","mb-1","small"]],template:__name(function(rf,ctx){1&rf&&(core.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h1"),core.\u0275\u0275text(3,"Chat"),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementStart(4,"div"),core.\u0275\u0275text(5," Username: "),core.\u0275\u0275elementStart(6,"input",2),core.\u0275\u0275listener("input",__name(function($event){return ctx.username=$event.target.value},"BasicChatComponent_Template_input_input_6_listener")),core.\u0275\u0275elementEnd()()(),core.\u0275\u0275elementStart(7,"form",3),core.\u0275\u0275listener("ngSubmit",__name(function(){return ctx.sendMessage()},"BasicChatComponent_Template_form_ngSubmit_7_listener")),core.\u0275\u0275elementStart(8,"div",4),core.\u0275\u0275element(9,"input",5),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementStart(10,"button",6),core.\u0275\u0275text(11,"Send"),core.\u0275\u0275elementEnd()(),core.\u0275\u0275elementStart(12,"div",7)(13,"div",8),core.\u0275\u0275text(14,"Messages"),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementStart(15,"div",9,10),core.\u0275\u0275template(17,BasicChatComponent_div_17_Template,6,2,"div",11),core.\u0275\u0275elementEnd()()()),2&rf&&(core.\u0275\u0275advance(6),core.\u0275\u0275property("value",ctx.username),core.\u0275\u0275advance(1),core.\u0275\u0275property("formGroup",ctx.form),core.\u0275\u0275advance(10),core.\u0275\u0275property("ngForOf",ctx.messages))},"BasicChatComponent_Template"),dependencies:[common.sg,fesm2020_forms._Y,fesm2020_forms.Fj,fesm2020_forms.JJ,fesm2020_forms.JL,fesm2020_forms.sg,fesm2020_forms.u],styles:[".scrollarea[_ngcontent-%COMP%]{max-height:400px;overflow-y:scroll}"]});const routes=[{path:"",component:BasicChatComponent}];class BasicChatRoutingModule{}__name(BasicChatRoutingModule,"BasicChatRoutingModule"),BasicChatRoutingModule.\u0275fac=__name(function(t){return new(t||BasicChatRoutingModule)},"BasicChatRoutingModule_Factory"),BasicChatRoutingModule.\u0275mod=core.\u0275\u0275defineNgModule({type:BasicChatRoutingModule}),BasicChatRoutingModule.\u0275inj=core.\u0275\u0275defineInjector({imports:[router.Bz.forChild(routes),router.Bz]});class BasicChatModule{}__name(BasicChatModule,"BasicChatModule"),BasicChatModule.\u0275fac=__name(function(t){return new(t||BasicChatModule)},"BasicChatModule_Factory"),BasicChatModule.\u0275mod=core.\u0275\u0275defineNgModule({type:BasicChatModule}),BasicChatModule.\u0275inj=core.\u0275\u0275defineInjector({imports:[common.ez,BasicChatRoutingModule,fesm2020_forms.UX]})},28024:(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=function(modules){var installedModules={};function __nested_webpack_require_330__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module2=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module2.exports,module2,module2.exports,__nested_webpack_require_330__),module2.l=!0,module2.exports}return __name(__nested_webpack_require_330__,"__nested_webpack_require_330__"),__nested_webpack_require_330__.m=modules,__nested_webpack_require_330__.c=installedModules,__nested_webpack_require_330__.d=function(exports2,name,getter){__nested_webpack_require_330__.o(exports2,name)||Object.defineProperty(exports2,name,{enumerable:!0,get:getter})},__nested_webpack_require_330__.r=function(exports2){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(exports2,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports2,"__esModule",{value:!0})},__nested_webpack_require_330__.t=function(value,mode){if(1&mode&&(value=__nested_webpack_require_330__(value)),8&mode||4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__nested_webpack_require_330__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value}),2&mode&&"string"!=typeof value)for(var key in value)__nested_webpack_require_330__.d(ns,key,function(key2){return value[key2]}.bind(null,key));return ns},__nested_webpack_require_330__.n=function(module2){var getter=module2&&module2.__esModule?__name(function(){return module2.default},"getDefault"):__name(function(){return module2},"getModuleExports");return __nested_webpack_require_330__.d(getter,"a",getter),getter},__nested_webpack_require_330__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__nested_webpack_require_330__.p="",__nested_webpack_require_330__(__nested_webpack_require_330__.s=21)}([function(module2,exports2){module2.exports=__webpack_require__(73837)},function(module2,exports2,__nested_webpack_require_4231__){var buffer=__nested_webpack_require_4231__(22),Buffer2=buffer.Buffer;function copyProps(src,dst){for(var key in src)dst[key]=src[key]}function SafeBuffer(arg,encodingOrOffset,length){return Buffer2(arg,encodingOrOffset,length)}__name(copyProps,"copyProps"),Buffer2.from&&Buffer2.alloc&&Buffer2.allocUnsafe&&Buffer2.allocUnsafeSlow?module2.exports=buffer:(copyProps(buffer,exports2),exports2.Buffer=SafeBuffer),__name(SafeBuffer,"SafeBuffer"),copyProps(Buffer2,SafeBuffer),SafeBuffer.from=function(arg,encodingOrOffset,length){if("number"==typeof arg)throw new TypeError("Argument must not be a number");return Buffer2(arg,encodingOrOffset,length)},SafeBuffer.alloc=function(size,fill,encoding){if("number"!=typeof size)throw new TypeError("Argument must be a number");var buf=Buffer2(size);return void 0!==fill?"string"==typeof encoding?buf.fill(fill,encoding):buf.fill(fill):buf.fill(0),buf},SafeBuffer.allocUnsafe=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return Buffer2(size)},SafeBuffer.allocUnsafeSlow=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(size)}},function(module2,exports2,__nested_webpack_require_5968__){"use strict";var Buffer2=__nested_webpack_require_5968__(1).Buffer,Emitter=__nested_webpack_require_5968__(23).EventEmitter,util=__nested_webpack_require_5968__(0),streams=__nested_webpack_require_5968__(24),Headers=__nested_webpack_require_5968__(9),Reader=__nested_webpack_require_5968__(25),Base=__name(function(request,url,options){Emitter.call(this),Base.validateOptions(options||{},["maxLength","masking","requireMasking","protocols"]),this._request=request,this._reader=new Reader,this._options=options||{},this._maxLength=this._options.maxLength||this.MAX_LENGTH,this._headers=new Headers,this.__queue=[],this.readyState=0,this.url=url,this.io=new streams.IO(this),this.messages=new streams.Messages(this),this._bindEventListeners()},"Base");util.inherits(Base,Emitter),Base.isWebSocket=function(request){var connection=request.headers.connection||"",upgrade=request.headers.upgrade||"";return"GET"===request.method&&connection.toLowerCase().split(/ *, */).indexOf("upgrade")>=0&&"websocket"===upgrade.toLowerCase()},Base.validateOptions=function(options,validKeys){for(var key2 in options)if(validKeys.indexOf(key2)<0)throw new Error("Unrecognized option: "+key2)};var instance={MAX_LENGTH:67108863,STATES:["connecting","open","closing","closed"],_bindEventListeners:function(){var self2=this;this.messages.on("error",function(){}),this.on("message",function(event){var messages=self2.messages;messages.readable&&messages.emit("data",event.data)}),this.on("error",function(error){var messages=self2.messages;messages.readable&&messages.emit("error",error)}),this.on("close",function(){var messages=self2.messages;messages.readable&&(messages.readable=messages.writable=!1,messages.emit("end"))})},getState:function(){return this.STATES[this.readyState]||null},addExtension:function(extension){return!1},setHeader:function(name,value){return!(this.readyState>0)&&(this._headers.set(name,value),!0)},start:function(){if(0!==this.readyState)return!1;if(!Base.isWebSocket(this._request))return this._failHandshake(new Error("Not a WebSocket request"));var response;try{response=this._handshakeResponse()}catch(error){return this._failHandshake(error)}return this._write(response),-1!==this._stage&&this._open(),!0},_failHandshake:function(error){var headers=new Headers;return headers.set("Content-Type","text/plain"),headers.set("Content-Length",Buffer2.byteLength(error.message,"utf8")),headers=["HTTP/1.1 400 Bad Request",headers.toString(),error.message],this._write(Buffer2.from(headers.join("\r\n"),"utf8")),this._fail("protocol_error",error.message),!1},text:function(message){return this.frame(message)},binary:function(message){return!1},ping:function(){return!1},pong:function(){return!1},close:function(reason,code){return 1===this.readyState&&(this.readyState=3,this.emit("close",new Base.CloseEvent(null,null)),!0)},_open:function(){this.readyState=1,this.__queue.forEach(function(args){this.frame.apply(this,args)},this),this.__queue=[],this.emit("open",new Base.OpenEvent)},_queue:function(message){return this.__queue.push(message),!0},_write:function(chunk){var io=this.io;io.readable&&io.emit("data",chunk)},_fail:function(type,message){this.readyState=2,this.emit("error",new Error(message)),this.close()}};for(var key in instance)Base.prototype[key]=instance[key];Base.ConnectEvent=function(){},Base.OpenEvent=function(){},Base.CloseEvent=function(code,reason){this.code=code,this.reason=reason},Base.MessageEvent=function(data){this.data=data},Base.PingEvent=function(data){this.data=data},Base.PongEvent=function(data){this.data=data},module2.exports=Base},function(module2,exports2){module2.exports=__webpack_require__(6113)},function(module2,exports2,__nested_webpack_require_11018__){"use strict";var Base=__nested_webpack_require_11018__(2),Client=__nested_webpack_require_11018__(26),Server=__nested_webpack_require_11018__(37),Driver={client:function(url,options){return void 0===(options=options||{}).masking&&(options.masking=!0),new Client(url,options)},server:function(options){return void 0===(options=options||{}).requireMasking&&(options.requireMasking=!0),new Server(options)},http:function(){return Server.http.apply(Server,arguments)},isSecureRequest:function(request){return Server.isSecureRequest(request)},isWebSocket:function(request){return Base.isWebSocket(request)},validateOptions:function(options,validKeys){Base.validateOptions(options,validKeys)}};module2.exports=Driver},function(module2,exports2){module2.exports=__webpack_require__(12781)},function(module2,exports2){module2.exports=__webpack_require__(57310)},function(module2,exports2,__webpack_require__2){"use strict";var Event=__name(function(eventType,options){for(var key in this.type=eventType,options)this[key]=options[key]},"Event");Event.prototype.initEvent=function(eventType,canBubble,cancelable){this.type=eventType,this.bubbles=canBubble,this.cancelable=cancelable},Event.prototype.stopPropagation=function(){},Event.prototype.preventDefault=function(){},Event.CAPTURING_PHASE=1,Event.AT_TARGET=2,Event.BUBBLING_PHASE=3,module2.exports=Event},function(module2,exports2,__webpack_require__2){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)b2.hasOwnProperty(p)&&(d2[p]=b2[p])})(d,b)},"extendStatics"),function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports2,"__esModule",{value:!0});var Coder=function(){function Coder2(_paddingCharacter){void 0===_paddingCharacter&&(_paddingCharacter="="),this._paddingCharacter=_paddingCharacter}return __name(Coder2,"Coder"),Coder2.prototype.encodedLength=function(length){return this._paddingCharacter?(length+2)/3*4|0:(8*length+5)/6|0},Coder2.prototype.encode=function(data){for(var out="",i=0;i<data.length-2;i+=3){var c=data[i]<<16|data[i+1]<<8|data[i+2];out+=this._encodeByte(c>>>18&63),out+=this._encodeByte(c>>>12&63),out+=this._encodeByte(c>>>6&63),out+=this._encodeByte(c>>>0&63)}var left=data.length-i;if(left>0){c=data[i]<<16|(2===left?data[i+1]<<8:0);out+=this._encodeByte(c>>>18&63),out+=this._encodeByte(c>>>12&63),out+=2===left?this._encodeByte(c>>>6&63):this._paddingCharacter||"",out+=this._paddingCharacter||""}return out},Coder2.prototype.maxDecodedLength=function(length){return this._paddingCharacter?length/4*3|0:(6*length+7)/8|0},Coder2.prototype.decodedLength=function(s){return this.maxDecodedLength(s.length-this._getPaddingLength(s))},Coder2.prototype.decode=function(s){if(0===s.length)return new Uint8Array(0);for(var paddingLength=this._getPaddingLength(s),length=s.length-paddingLength,out=new Uint8Array(this.maxDecodedLength(length)),op=0,i=0,haveBad=0,v0=0,v1=0,v2=0,v3=0;i<length-4;i+=4)v0=this._decodeChar(s.charCodeAt(i+0)),v1=this._decodeChar(s.charCodeAt(i+1)),v2=this._decodeChar(s.charCodeAt(i+2)),v3=this._decodeChar(s.charCodeAt(i+3)),out[op++]=v0<<2|v1>>>4,out[op++]=v1<<4|v2>>>2,out[op++]=v2<<6|v3,haveBad|=256&v0,haveBad|=256&v1,haveBad|=256&v2,haveBad|=256&v3;if(i<length-1&&(v0=this._decodeChar(s.charCodeAt(i)),v1=this._decodeChar(s.charCodeAt(i+1)),out[op++]=v0<<2|v1>>>4,haveBad|=256&v0,haveBad|=256&v1),i<length-2&&(v2=this._decodeChar(s.charCodeAt(i+2)),out[op++]=v1<<4|v2>>>2,haveBad|=256&v2),i<length-3&&(v3=this._decodeChar(s.charCodeAt(i+3)),out[op++]=v2<<6|v3,haveBad|=256&v3),0!==haveBad)throw new Error("Base64Coder: incorrect characters for decoding");return out},Coder2.prototype._encodeByte=function(b){var result=b;return result+=65,result+=25-b>>>8&6,result+=51-b>>>8&-75,result+=61-b>>>8&-15,result+=62-b>>>8&3,String.fromCharCode(result)},Coder2.prototype._decodeChar=function(c){var result=256;return result+=(42-c&c-44)>>>8&-256+c-43+62,result+=(46-c&c-48)>>>8&-256+c-47+63,result+=(47-c&c-58)>>>8&-256+c-48+52,result+=(64-c&c-91)>>>8&-256+c-65+0,result+=(96-c&c-123)>>>8&-256+c-97+26},Coder2.prototype._getPaddingLength=function(s){var paddingLength=0;if(this._paddingCharacter){for(var i=s.length-1;i>=0&&s[i]===this._paddingCharacter;i--)paddingLength++;if(s.length<4||paddingLength>2)throw new Error("Base64Coder: incorrect padding")}return paddingLength},Coder2}();exports2.Coder=Coder;var stdCoder=new Coder;function encode(data){return stdCoder.encode(data)}function decode(s){return stdCoder.decode(s)}__name(encode,"encode"),exports2.encode=encode,__name(decode,"decode"),exports2.decode=decode;var URLSafeCoder=function(_super){function URLSafeCoder2(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(URLSafeCoder2,_super),__name(URLSafeCoder2,"URLSafeCoder"),URLSafeCoder2.prototype._encodeByte=function(b){var result=b;return result+=65,result+=25-b>>>8&6,result+=51-b>>>8&-75,result+=61-b>>>8&-13,result+=62-b>>>8&49,String.fromCharCode(result)},URLSafeCoder2.prototype._decodeChar=function(c){var result=256;return result+=(44-c&c-46)>>>8&-256+c-45+62,result+=(94-c&c-96)>>>8&-256+c-95+63,result+=(47-c&c-58)>>>8&-256+c-48+52,result+=(64-c&c-91)>>>8&-256+c-65+0,result+=(96-c&c-123)>>>8&-256+c-97+26},URLSafeCoder2}(Coder);exports2.URLSafeCoder=URLSafeCoder;var urlSafeCoder=new URLSafeCoder;function encodeURLSafe(data){return urlSafeCoder.encode(data)}function decodeURLSafe(s){return urlSafeCoder.decode(s)}__name(encodeURLSafe,"encodeURLSafe"),exports2.encodeURLSafe=encodeURLSafe,__name(decodeURLSafe,"decodeURLSafe"),exports2.decodeURLSafe=decodeURLSafe,exports2.encodedLength=function(length){return stdCoder.encodedLength(length)},exports2.maxDecodedLength=function(length){return stdCoder.maxDecodedLength(length)},exports2.decodedLength=function(s){return stdCoder.decodedLength(s)}},function(module2,exports2,__webpack_require__2){"use strict";var Headers=__name(function(){this.clear()},"Headers");Headers.prototype.ALLOWED_DUPLICATES=["set-cookie","set-cookie2","warning","www-authenticate"],Headers.prototype.clear=function(){this._sent={},this._lines=[]},Headers.prototype.set=function(name,value){if(void 0!==value){name=this._strip(name),value=this._strip(value);var key=name.toLowerCase();(!this._sent.hasOwnProperty(key)||this.ALLOWED_DUPLICATES.indexOf(key)>=0)&&(this._sent[key]=!0,this._lines.push(name+": "+value+"\r\n"))}},Headers.prototype.toString=function(){return this._lines.join("")},Headers.prototype._strip=function(string){return string.toString().replace(/^ */,"").replace(/ *$/,"")},module2.exports=Headers},function(module2,exports2,__nested_webpack_require_24431__){"use strict";var NodeHTTPParser=__nested_webpack_require_24431__(27).HTTPParser,Buffer2=__nested_webpack_require_24431__(1).Buffer,TYPES={request:NodeHTTPParser.REQUEST||"request",response:NodeHTTPParser.RESPONSE||"response"},HttpParser=__name(function(type){this._type=type,this._parser=new NodeHTTPParser(TYPES[type]),this._complete=!1,this.headers={};var current=null,self2=this;this._parser.onHeaderField=function(b,start,length){current=b.toString("utf8",start,start+length).toLowerCase()},this._parser.onHeaderValue=function(b,start,length){var value=b.toString("utf8",start,start+length);self2.headers.hasOwnProperty(current)?self2.headers[current]+=", "+value:self2.headers[current]=value},this._parser.onHeadersComplete=this._parser[NodeHTTPParser.kOnHeadersComplete]=function(majorVersion,minorVersion,headers,method,pathname,statusCode){var info=arguments[0];if("object"==typeof info&&(method=info.method,pathname=info.url,statusCode=info.statusCode,headers=info.headers),self2.method="number"==typeof method?HttpParser.METHODS[method]:method,self2.statusCode=statusCode,self2.url=pathname,headers){for(var key,value,i=0,n=headers.length;i<n;i+=2)key=headers[i].toLowerCase(),value=headers[i+1],self2.headers.hasOwnProperty(key)?self2.headers[key]+=", "+value:self2.headers[key]=value;self2._complete=!0}}},"HttpParser");HttpParser.METHODS={0:"DELETE",1:"GET",2:"HEAD",3:"POST",4:"PUT",5:"CONNECT",6:"OPTIONS",7:"TRACE",8:"COPY",9:"LOCK",10:"MKCOL",11:"MOVE",12:"PROPFIND",13:"PROPPATCH",14:"SEARCH",15:"UNLOCK",16:"BIND",17:"REBIND",18:"UNBIND",19:"ACL",20:"REPORT",21:"MKACTIVITY",22:"CHECKOUT",23:"MERGE",24:"M-SEARCH",25:"NOTIFY",26:"SUBSCRIBE",27:"UNSUBSCRIBE",28:"PATCH",29:"PURGE",30:"MKCALENDAR",31:"LINK",32:"UNLINK"};var VERSION=process.version?process.version.match(/[0-9]+/g).map(function(n){return parseInt(n,10)}):[];0===VERSION[0]&&12===VERSION[1]&&(HttpParser.METHODS[16]="REPORT",HttpParser.METHODS[17]="MKACTIVITY",HttpParser.METHODS[18]="CHECKOUT",HttpParser.METHODS[19]="MERGE",HttpParser.METHODS[20]="M-SEARCH",HttpParser.METHODS[21]="NOTIFY",HttpParser.METHODS[22]="SUBSCRIBE",HttpParser.METHODS[23]="UNSUBSCRIBE",HttpParser.METHODS[24]="PATCH",HttpParser.METHODS[25]="PURGE"),HttpParser.prototype.isComplete=function(){return this._complete},HttpParser.prototype.parse=function(chunk){var consumed=this._parser.execute(chunk,0,chunk.length);if("number"!=typeof consumed)return this.error=consumed,void(this._complete=!0);this._complete&&(this.body=consumed<chunk.length?chunk.slice(consumed):Buffer2.alloc(0))},module2.exports=HttpParser},function(module2,exports2,__nested_webpack_require_27850__){"use strict";var Stream=__nested_webpack_require_27850__(5).Stream,util=__nested_webpack_require_27850__(0),driver=__nested_webpack_require_27850__(4),EventTarget=__nested_webpack_require_27850__(16),Event=__nested_webpack_require_27850__(7),API=__name(function(options){options=options||{},driver.validateOptions(options,["headers","extensions","maxLength","ping","proxy","tls","ca"]),this.readable=this.writable=!0;var headers=options.headers;if(headers)for(var name in headers)this._driver.setHeader(name,headers[name]);var extensions=options.extensions;extensions&&[].concat(extensions).forEach(this._driver.addExtension,this._driver),this._ping=options.ping,this._pingId=0,this.readyState=API.CONNECTING,this.bufferedAmount=0,this.protocol="",this.url=this._driver.url,this.version=this._driver.version;var self2=this;this._driver.on("open",function(e){self2._open()}),this._driver.on("message",function(e){self2._receiveMessage(e.data)}),this._driver.on("close",function(e){self2._beginClose(e.reason,e.code)}),this._driver.on("error",function(error){self2._emitError(error.message)}),this.on("error",function(){}),this._driver.messages.on("drain",function(){self2.emit("drain")}),this._ping&&(this._pingTimer=setInterval(function(){self2._pingId+=1,self2.ping(self2._pingId.toString())},1e3*this._ping)),this._configureStream(),this._proxy||(this._stream.pipe(this._driver.io),this._driver.io.pipe(this._stream))},"API");util.inherits(API,Stream),API.CONNECTING=0,API.OPEN=1,API.CLOSING=2,API.CLOSED=3,API.CLOSE_TIMEOUT=3e4;var instance={write:function(data){return this.send(data)},end:function(data){void 0!==data&&this.send(data),this.close()},pause:function(){return this._driver.messages.pause()},resume:function(){return this._driver.messages.resume()},send:function(data){return!(this.readyState>API.OPEN)&&(data instanceof Buffer||(data=String(data)),this._driver.messages.write(data))},ping:function(message,callback){return!(this.readyState>API.OPEN)&&this._driver.ping(message,callback)},close:function(code,reason){if(void 0===code&&(code=1e3),void 0===reason&&(reason=""),1e3!==code&&(code<3e3||code>4999))throw new Error("Failed to execute 'close' on WebSocket: The code must be either 1000, or between 3000 and 4999. "+code+" is neither.");this.readyState!==API.CLOSED&&(this.readyState=API.CLOSING);var self2=this;this._closeTimer=setTimeout(function(){self2._beginClose("",1006)},API.CLOSE_TIMEOUT),this._driver.close(reason,code)},_configureStream:function(){var self2=this;this._stream.setTimeout(0),this._stream.setNoDelay(!0),["close","end"].forEach(function(event){this._stream.on(event,function(){self2._finalizeClose()})},this),this._stream.on("error",function(error){self2._emitError("Network error: "+self2.url+": "+error.message),self2._finalizeClose()})},_open:function(){if(this.readyState===API.CONNECTING){this.readyState=API.OPEN,this.protocol=this._driver.protocol||"";var event=new Event("open");event.initEvent("open",!1,!1),this.dispatchEvent(event)}},_receiveMessage:function(data){if(this.readyState>API.OPEN)return!1;this.readable&&this.emit("data",data);var event=new Event("message",{data});event.initEvent("message",!1,!1),this.dispatchEvent(event)},_emitError:function(message){if(!(this.readyState>=API.CLOSING)){var event=new Event("error",{message});event.initEvent("error",!1,!1),this.dispatchEvent(event)}},_beginClose:function(reason,code){this.readyState!==API.CLOSED&&(this.readyState=API.CLOSING,this._closeParams=[reason,code],this._stream&&(this._stream.destroy(),this._stream.readable||this._finalizeClose()))},_finalizeClose:function(){if(this.readyState!==API.CLOSED){this.readyState=API.CLOSED,this._closeTimer&&clearTimeout(this._closeTimer),this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end(),this.readable&&this.emit("end"),this.readable=this.writable=!1;var reason=this._closeParams?this._closeParams[0]:"",code=this._closeParams?this._closeParams[1]:1006,event=new Event("close",{code,reason});event.initEvent("close",!1,!1),this.dispatchEvent(event)}}};for(var method in instance)API.prototype[method]=instance[method];for(var key in EventTarget)API.prototype[key]=EventTarget[key];module2.exports=API},function(module2,exports2,__nested_webpack_require_33505__){"use strict";var Buffer2=__nested_webpack_require_33505__(1).Buffer,crypto=__nested_webpack_require_33505__(3),util=__nested_webpack_require_33505__(0),Extensions=__nested_webpack_require_33505__(29),Base=__nested_webpack_require_33505__(2),Frame=__nested_webpack_require_33505__(34),Message=__nested_webpack_require_33505__(35),Hybi=__name(function(request,url,options){if(Base.apply(this,arguments),this._extensions=new Extensions,this._stage=0,this._masking=this._options.masking,this._protocols=this._options.protocols||[],this._requireMasking=this._options.requireMasking,this._pingCallbacks={},"string"==typeof this._protocols&&(this._protocols=this._protocols.split(/ *, */)),this._request){var protos=this._request.headers["sec-websocket-protocol"],supported=this._protocols;void 0!==protos&&("string"==typeof protos&&(protos=protos.split(/ *, */)),this.protocol=protos.filter(function(p){return supported.indexOf(p)>=0})[0]),this.version="hybi-"+Hybi.VERSION}},"Hybi");util.inherits(Hybi,Base),Hybi.VERSION="13",Hybi.mask=function(payload,mask,offset){if(!mask||0===mask.length)return payload;offset=offset||0;for(var i=0,n=payload.length-offset;i<n;i++)payload[offset+i]=payload[offset+i]^mask[i%4];return payload},Hybi.generateAccept=function(key2){var sha1=crypto.createHash("sha1");return sha1.update(key2+Hybi.GUID),sha1.digest("base64")},Hybi.GUID="258EAFA5-E914-47DA-95CA-C5AB0DC85B11";var instance={FIN:128,MASK:128,RSV1:64,RSV2:32,RSV3:16,OPCODE:15,LENGTH:127,OPCODES:{continuation:0,text:1,binary:2,close:8,ping:9,pong:10},OPCODE_CODES:[0,1,2,8,9,10],MESSAGE_OPCODES:[0,1,2],OPENING_OPCODES:[1,2],ERRORS:{normal_closure:1e3,going_away:1001,protocol_error:1002,unacceptable:1003,encoding_error:1007,policy_violation:1008,too_large:1009,extension_error:1010,unexpected_condition:1011},ERROR_CODES:[1e3,1001,1002,1003,1007,1008,1009,1010,1011],DEFAULT_ERROR_CODE:1e3,MIN_RESERVED_ERROR:3e3,MAX_RESERVED_ERROR:4999,UTF8_MATCH:/^([\x00-\x7F]|[\xC2-\xDF][\x80-\xBF]|\xE0[\xA0-\xBF][\x80-\xBF]|[\xE1-\xEC\xEE\xEF][\x80-\xBF]{2}|\xED[\x80-\x9F][\x80-\xBF]|\xF0[\x90-\xBF][\x80-\xBF]{2}|[\xF1-\xF3][\x80-\xBF]{3}|\xF4[\x80-\x8F][\x80-\xBF]{2})*$/,addExtension:function(extension){return this._extensions.add(extension),!0},parse:function(chunk){this._reader.put(chunk);for(var buffer=!0;buffer;)switch(this._stage){case 0:(buffer=this._reader.read(1))&&this._parseOpcode(buffer[0]);break;case 1:(buffer=this._reader.read(1))&&this._parseLength(buffer[0]);break;case 2:(buffer=this._reader.read(this._frame.lengthBytes))&&this._parseExtendedLength(buffer);break;case 3:(buffer=this._reader.read(4))&&(this._stage=4,this._frame.maskingKey=buffer);break;case 4:(buffer=this._reader.read(this._frame.length))&&(this._stage=0,this._emitFrame(buffer));break;default:buffer=null}},text:function(message){return!(this.readyState>1)&&this.frame(message,"text")},binary:function(message){return!(this.readyState>1)&&this.frame(message,"binary")},ping:function(message,callback){return!(this.readyState>1)&&(message=message||"",callback&&(this._pingCallbacks[message]=callback),this.frame(message,"ping"))},pong:function(message){return!(this.readyState>1)&&(message=message||"",this.frame(message,"pong"))},close:function(reason,code){return reason=reason||"",code=code||this.ERRORS.normal_closure,this.readyState<=0?(this.readyState=3,this.emit("close",new Base.CloseEvent(code,reason)),!0):1===this.readyState&&(this.readyState=2,this._extensions.close(function(){this.frame(reason,"close",code)},this),!0)},frame:function(buffer,type,code){if(this.readyState<=0)return this._queue([buffer,type,code]);if(this.readyState>2)return!1;buffer instanceof Array&&(buffer=Buffer2.from(buffer)),"number"==typeof buffer&&(buffer=buffer.toString());var payload,copy,message=new Message,isText="string"==typeof buffer;message.rsv1=message.rsv2=message.rsv3=!1,message.opcode=this.OPCODES[type||(isText?"text":"binary")],payload=isText?Buffer2.from(buffer,"utf8"):buffer,code&&(copy=payload,(payload=Buffer2.allocUnsafe(2+copy.length)).writeUInt16BE(code,0),copy.copy(payload,2)),message.data=payload;var onMessageReady=__name(function(message2){var frame=new Frame;frame.final=!0,frame.rsv1=message2.rsv1,frame.rsv2=message2.rsv2,frame.rsv3=message2.rsv3,frame.opcode=message2.opcode,frame.masked=!!this._masking,frame.length=message2.data.length,frame.payload=message2.data,frame.masked&&(frame.maskingKey=crypto.randomBytes(4)),this._sendFrame(frame)},"onMessageReady");return this.MESSAGE_OPCODES.indexOf(message.opcode)>=0?this._extensions.processOutgoingMessage(message,function(error,message2){if(error)return this._fail("extension_error",error.message);onMessageReady.call(this,message2)},this):onMessageReady.call(this,message),!0},_sendFrame:function(frame){var length=frame.length,header=length<=125?2:length<=65535?4:10,offset=header+(frame.masked?4:0),buffer=Buffer2.allocUnsafe(offset+length),masked=frame.masked?this.MASK:0;buffer[0]=(frame.final?this.FIN:0)|(frame.rsv1?this.RSV1:0)|(frame.rsv2?this.RSV2:0)|(frame.rsv3?this.RSV3:0)|frame.opcode,length<=125?buffer[1]=masked|length:length<=65535?(buffer[1]=126|masked,buffer.writeUInt16BE(length,2)):(buffer[1]=127|masked,buffer.writeUInt32BE(Math.floor(length/4294967296),2),buffer.writeUInt32BE(length%4294967296,6)),frame.payload.copy(buffer,offset),frame.masked&&(frame.maskingKey.copy(buffer,header),Hybi.mask(buffer,frame.maskingKey,offset)),this._write(buffer)},_handshakeResponse:function(){var secKey=this._request.headers["sec-websocket-key"],version=this._request.headers["sec-websocket-version"];if(version!==Hybi.VERSION)throw new Error("Unsupported WebSocket version: "+version);if("string"!=typeof secKey)throw new Error("Missing handshake request header: Sec-WebSocket-Key");this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Accept",Hybi.generateAccept(secKey)),this.protocol&&this._headers.set("Sec-WebSocket-Protocol",this.protocol);var extensions=this._extensions.generateResponse(this._request.headers["sec-websocket-extensions"]);extensions&&this._headers.set("Sec-WebSocket-Extensions",extensions);var headers=["HTTP/1.1 101 Switching Protocols",this._headers.toString(),""];return Buffer2.from(headers.join("\r\n"),"utf8")},_shutdown:function(code,reason,error){delete this._frame,delete this._message,this._stage=5;var sendCloseFrame=1===this.readyState;this.readyState=2,this._extensions.close(function(){sendCloseFrame&&this.frame(reason,"close",code),this.readyState=3,error&&this.emit("error",new Error(reason)),this.emit("close",new Base.CloseEvent(code,reason))},this)},_fail:function(type,message){this.readyState>1||this._shutdown(this.ERRORS[type],message,!0)},_parseOpcode:function(octet){var rsvs=[this.RSV1,this.RSV2,this.RSV3].map(function(rsv){return(octet&rsv)===rsv}),frame=this._frame=new Frame;return frame.final=(octet&this.FIN)===this.FIN,frame.rsv1=rsvs[0],frame.rsv2=rsvs[1],frame.rsv3=rsvs[2],frame.opcode=octet&this.OPCODE,this._stage=1,this._extensions.validFrameRsv(frame)?this.OPCODE_CODES.indexOf(frame.opcode)<0?this._fail("protocol_error","Unrecognized frame opcode: "+frame.opcode):this.MESSAGE_OPCODES.indexOf(frame.opcode)<0&&!frame.final?this._fail("protocol_error","Received fragmented control frame: opcode = "+frame.opcode):this._message&&this.OPENING_OPCODES.indexOf(frame.opcode)>=0?this._fail("protocol_error","Received new data frame but previous continuous frame is unfinished"):void 0:this._fail("protocol_error","One or more reserved bits are on: reserved1 = "+(frame.rsv1?1:0)+", reserved2 = "+(frame.rsv2?1:0)+", reserved3 = "+(frame.rsv3?1:0))},_parseLength:function(octet){var frame=this._frame;if(frame.masked=(octet&this.MASK)===this.MASK,frame.length=octet&this.LENGTH,frame.length>=0&&frame.length<=125){if(this._stage=frame.masked?3:4,!this._checkFrameLength())return}else this._stage=2,frame.lengthBytes=126===frame.length?2:8;if(this._requireMasking&&!frame.masked)return this._fail("unacceptable","Received unmasked frame but masking is required")},_parseExtendedLength:function(buffer){var frame=this._frame;if(frame.length=this._readUInt(buffer),this._stage=frame.masked?3:4,this.MESSAGE_OPCODES.indexOf(frame.opcode)<0&&frame.length>125)return this._fail("protocol_error","Received control frame having too long payload: "+frame.length);this._checkFrameLength()},_checkFrameLength:function(){return!((this._message?this._message.length:0)+this._frame.length>this._maxLength)||(this._fail("too_large","WebSocket frame length too large"),!1)},_emitFrame:function(buffer){var message,code,reason,callbacks,callback,frame=this._frame,payload=frame.payload=Hybi.mask(buffer,frame.maskingKey),opcode=frame.opcode;if(delete this._frame,opcode===this.OPCODES.continuation){if(!this._message)return this._fail("protocol_error","Received unexpected continuation frame");this._message.pushFrame(frame)}if((opcode===this.OPCODES.text||opcode===this.OPCODES.binary)&&(this._message=new Message,this._message.pushFrame(frame)),frame.final&&this.MESSAGE_OPCODES.indexOf(opcode)>=0)return this._emitMessage(this._message);opcode===this.OPCODES.close&&(code=payload.length>=2?payload.readUInt16BE(0):null,reason=payload.length>2?this._encode(payload.slice(2)):null,0!==payload.length&&!(null!==code&&code>=this.MIN_RESERVED_ERROR&&code<=this.MAX_RESERVED_ERROR)&&this.ERROR_CODES.indexOf(code)<0&&(code=this.ERRORS.protocol_error),(payload.length>125||payload.length>2&&!reason)&&(code=this.ERRORS.protocol_error),this._shutdown(code||this.DEFAULT_ERROR_CODE,reason||"")),opcode===this.OPCODES.ping&&(this.frame(payload,"pong"),this.emit("ping",new Base.PingEvent(payload.toString()))),opcode===this.OPCODES.pong&&(callback=(callbacks=this._pingCallbacks)[message=this._encode(payload)],delete callbacks[message],callback&&callback(),this.emit("pong",new Base.PongEvent(payload.toString())))},_emitMessage:function(message){(message=this._message).read(),delete this._message,this._extensions.processIncomingMessage(message,function(error,message2){if(error)return this._fail("extension_error",error.message);var payload=message2.data;if(message2.opcode===this.OPCODES.text&&(payload=this._encode(payload)),null===payload)return this._fail("encoding_error","Could not decode a text frame as UTF-8");this.emit("message",new Base.MessageEvent(payload))},this)},_encode:function(buffer){try{var string=buffer.toString("binary",0,buffer.length);if(!this.UTF8_MATCH.test(string))return null}catch{}return buffer.toString("utf8",0,buffer.length)},_readUInt:function(buffer){return 2===buffer.length?buffer.readUInt16BE(0):4294967296*buffer.readUInt32BE(0)+buffer.readUInt32BE(4)}};for(var key in instance)Hybi.prototype[key]=instance[key];module2.exports=Hybi},function(module2,exports2,__webpack_require__2){"use strict";var RingBuffer=__name(function(bufferSize){this._bufferSize=bufferSize,this.clear()},"RingBuffer");RingBuffer.prototype.clear=function(){this._buffer=new Array(this._bufferSize),this._ringOffset=0,this._ringSize=this._bufferSize,this._head=0,this._tail=0,this.length=0},RingBuffer.prototype.push=function(value){var expandBuffer=!1,expandRing=!1;this._ringSize<this._bufferSize?expandBuffer=0===this._tail:this._ringOffset===this._ringSize&&(expandBuffer=!0,expandRing=0===this._tail),expandBuffer&&(this._tail=this._bufferSize,this._buffer=this._buffer.concat(new Array(this._bufferSize)),this._bufferSize=this._buffer.length,expandRing&&(this._ringSize=this._bufferSize)),this._buffer[this._tail]=value,this.length+=1,this._tail<this._ringSize&&(this._ringOffset+=1),this._tail=(this._tail+1)%this._bufferSize},RingBuffer.prototype.peek=function(){if(0!==this.length)return this._buffer[this._head]},RingBuffer.prototype.shift=function(){if(0!==this.length){var value=this._buffer[this._head];return this._buffer[this._head]=void 0,this.length-=1,this._ringOffset-=1,0===this._ringOffset&&this.length>0?(this._head=this._ringSize,this._ringOffset=this.length,this._ringSize=this._bufferSize):this._head=(this._head+1)%this._ringSize,value}},module2.exports=RingBuffer},function(module2,exports2,__nested_webpack_require_49983__){"use strict";var RingBuffer=__nested_webpack_require_49983__(13),Pledge=__name(function(){this._complete=!1,this._callbacks=new RingBuffer(Pledge.QUEUE_SIZE)},"Pledge");Pledge.QUEUE_SIZE=4,Pledge.all=function(list){var pledge=new Pledge,pending=list.length,n=pending;for(0===pending&&pledge.done();n--;)list[n].then(function(){0===(pending-=1)&&pledge.done()});return pledge},Pledge.prototype.then=function(callback){this._complete?callback():this._callbacks.push(callback)},Pledge.prototype.done=function(){this._complete=!0;for(var callback,callbacks=this._callbacks;callback=callbacks.shift();)callback()},module2.exports=Pledge},function(module2,exports2,__nested_webpack_require_50879__){"use strict";var Buffer2=__nested_webpack_require_50879__(1).Buffer,Base=__nested_webpack_require_50879__(2),util=__nested_webpack_require_50879__(0),Draft75=__name(function(request,url,options){Base.apply(this,arguments),this._stage=0,this.version="hixie-75",this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("WebSocket-Origin",this._request.headers.origin),this._headers.set("WebSocket-Location",this.url)},"Draft75");util.inherits(Draft75,Base);var instance={close:function(){return 3!==this.readyState&&(this.readyState=3,this.emit("close",new Base.CloseEvent(null,null)),!0)},parse:function(chunk){this.readyState>1||(this._reader.put(chunk),this._reader.eachByte(function(octet){var message;switch(this._stage){case-1:this._body.push(octet),this._sendHandshakeBody();break;case 0:this._parseLeadingByte(octet);break;case 1:if(this._length=(127&octet)+128*this._length,this._closing&&0===this._length)return this.close();128!=(128&octet)&&(0===this._length?this._stage=0:(this._skipped=0,this._stage=2));break;case 2:if(255===octet)this._stage=0,message=Buffer2.from(this._buffer).toString("utf8",0,this._buffer.length),this.emit("message",new Base.MessageEvent(message));else if(this._length)this._skipped+=1,this._skipped===this._length&&(this._stage=0);else if(this._buffer.push(octet),this._buffer.length>this._maxLength)return this.close()}},this))},frame:function(buffer){if(0===this.readyState)return this._queue([buffer]);if(this.readyState>1)return!1;"string"!=typeof buffer&&(buffer=buffer.toString());var length=Buffer2.byteLength(buffer),frame=Buffer2.allocUnsafe(length+2);return frame[0]=0,frame.write(buffer,1),frame[frame.length-1]=255,this._write(frame),!0},_handshakeResponse:function(){var headers=["HTTP/1.1 101 Web Socket Protocol Handshake",this._headers.toString(),""];return Buffer2.from(headers.join("\r\n"),"utf8")},_parseLeadingByte:function(octet){128==(128&octet)?(this._length=0,this._stage=1):(delete this._length,delete this._skipped,this._buffer=[],this._stage=2)}};for(var key in instance)Draft75.prototype[key]=instance[key];module2.exports=Draft75},function(module2,exports2,__nested_webpack_require_54179__){"use strict";var Event=__nested_webpack_require_54179__(7),EventTarget={onopen:null,onmessage:null,onerror:null,onclose:null,addEventListener:function(eventType,listener,useCapture){this.on(eventType,listener)},removeEventListener:function(eventType,listener,useCapture){this.removeListener(eventType,listener)},dispatchEvent:function(event){event.target=event.currentTarget=this,event.eventPhase=Event.AT_TARGET,this["on"+event.type]&&this["on"+event.type](event),this.emit(event.type,event)}};module2.exports=EventTarget},function(module2,exports2,__webpack_require__2){"use strict";Object.defineProperty(exports2,"__esModule",{value:!0});var INVALID_UTF16="utf8: invalid string",INVALID_UTF8="utf8: invalid source encoding";function encode(s){for(var arr=new Uint8Array(encodedLength(s)),pos=0,i=0;i<s.length;i++){var c=s.charCodeAt(i);c<128?arr[pos++]=c:c<2048?(arr[pos++]=192|c>>6,arr[pos++]=128|63&c):c<55296?(arr[pos++]=224|c>>12,arr[pos++]=128|c>>6&63,arr[pos++]=128|63&c):(i++,c=(1023&c)<<10,c|=1023&s.charCodeAt(i),c+=65536,arr[pos++]=240|c>>18,arr[pos++]=128|c>>12&63,arr[pos++]=128|c>>6&63,arr[pos++]=128|63&c)}return arr}function encodedLength(s){for(var result=0,i=0;i<s.length;i++){var c=s.charCodeAt(i);if(c<128)result+=1;else if(c<2048)result+=2;else if(c<55296)result+=3;else{if(!(c<=57343))throw new Error(INVALID_UTF16);if(i>=s.length-1)throw new Error(INVALID_UTF16);i++,result+=4}}return result}function decode(arr){for(var chars=[],i=0;i<arr.length;i++){var b=arr[i];if(128&b){var min=void 0;if(b<224){if(i>=arr.length)throw new Error(INVALID_UTF8);if(128!=(192&(n1=arr[++i])))throw new Error(INVALID_UTF8);b=(31&b)<<6|63&n1,min=128}else if(b<240){if(i>=arr.length-1)throw new Error(INVALID_UTF8);var n1=arr[++i],n2=arr[++i];if(128!=(192&n1)||128!=(192&n2))throw new Error(INVALID_UTF8);b=(15&b)<<12|(63&n1)<<6|63&n2,min=2048}else{if(!(b<248))throw new Error(INVALID_UTF8);if(i>=arr.length-2)throw new Error(INVALID_UTF8);n1=arr[++i],n2=arr[++i];var n3=arr[++i];if(128!=(192&n1)||128!=(192&n2)||128!=(192&n3))throw new Error(INVALID_UTF8);b=(15&b)<<18|(63&n1)<<12|(63&n2)<<6|63&n3,min=65536}if(b<min||b>=55296&&b<=57343)throw new Error(INVALID_UTF8);if(b>=65536){if(b>1114111)throw new Error(INVALID_UTF8);b-=65536,chars.push(String.fromCharCode(55296|b>>10)),b=56320|1023&b}}chars.push(String.fromCharCode(b))}return chars.join("")}__name(encode,"encode"),exports2.encode=encode,__name(encodedLength,"encodedLength"),exports2.encodedLength=encodedLength,__name(decode,"decode"),exports2.decode=decode},function(module2,exports2,__nested_webpack_require_59257__){"use strict";var util=__nested_webpack_require_59257__(0),driver=__nested_webpack_require_59257__(4),API=__nested_webpack_require_59257__(11),WebSocket=__name(function(request,socket,body,protocols,options){options=options||{},this._stream=socket,this._driver=driver.http(request,{maxLength:options.maxLength,protocols});var self2=this;if(this._stream&&this._stream.writable){if(!this._stream.readable)return this._stream.end();var catchup=__name(function(){self2._stream.removeListener("data",catchup)},"catchup");this._stream.on("data",catchup),API.call(this,options),process.nextTick(function(){self2._driver.start(),self2._driver.io.write(body)})}},"WebSocket");util.inherits(WebSocket,API),WebSocket.isWebSocket=function(request){return driver.isWebSocket(request)},WebSocket.validateOptions=function(options,validKeys){driver.validateOptions(options,validKeys)},WebSocket.WebSocket=WebSocket,WebSocket.Client=__nested_webpack_require_59257__(39),WebSocket.EventSource=__nested_webpack_require_59257__(42),module2.exports=WebSocket},function(module2,exports2,__nested_webpack_require_60710__){var Url=__nested_webpack_require_60710__(6),spawn=__nested_webpack_require_60710__(43).spawn,fs=__nested_webpack_require_60710__(44);exports2.XMLHttpRequest=function(){"use strict";var request,response,self2=this,http=__nested_webpack_require_60710__(45),https=__nested_webpack_require_60710__(46),settings={},disableHeaderCheck=!1,defaultHeaders={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},headers={},headersCase={},forbiddenRequestHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],forbiddenRequestMethods=["TRACE","TRACK","CONNECT"],sendFlag=!1,errorFlag=!1,listeners={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null,this.withCredentials=!1;var isAllowedHttpHeader=__name(function(header){return disableHeaderCheck||header&&-1===forbiddenRequestHeaders.indexOf(header.toLowerCase())},"isAllowedHttpHeader"),isAllowedHttpMethod=__name(function(method){return method&&-1===forbiddenRequestMethods.indexOf(method)},"isAllowedHttpMethod");this.open=function(method,url,async,user,password){if(this.abort(),errorFlag=!1,!isAllowedHttpMethod(method))throw new Error("SecurityError: Request method not allowed");settings={method,url:url.toString(),async:"boolean"!=typeof async||async,user:user||null,password:password||null},setState(this.OPENED)},this.setDisableHeaderCheck=function(state){disableHeaderCheck=state},this.setRequestHeader=function(header,value){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(isAllowedHttpHeader(header)){if(sendFlag)throw new Error("INVALID_STATE_ERR: send flag is true");header=headersCase[header.toLowerCase()]||header,headersCase[header.toLowerCase()]=header,headers[header]=headers[header]?headers[header]+", "+value:value}else console.warn('Refused to set unsafe header "'+header+'"')},this.getResponseHeader=function(header){return"string"==typeof header&&this.readyState>this.OPENED&&response&&response.headers&&response.headers[header.toLowerCase()]&&!errorFlag?response.headers[header.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||errorFlag)return"";var result="";for(var i in response.headers)"set-cookie"!==i&&"set-cookie2"!==i&&(result+=i+": "+response.headers[i]+"\r\n");return result.substr(0,result.length-2)},this.getRequestHeader=function(name){return"string"==typeof name&&headersCase[name.toLowerCase()]?headers[headersCase[name.toLowerCase()]]:""},this.send=function(data){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(sendFlag)throw new Error("INVALID_STATE_ERR: send has already been called");var host,ssl=!1,local=!1,url=Url.parse(settings.url);switch(url.protocol){case"https:":ssl=!0;case"http:":host=url.hostname;break;case"file:":local=!0;break;case void 0:case null:case"":host="localhost";break;default:throw new Error("Protocol not supported.")}if(local){if("GET"!==settings.method)throw new Error("XMLHttpRequest: Only GET method is supported");if(settings.async)fs.readFile(url.pathname,"utf8",function(error,data2){error?self2.handleError(error):(self2.status=200,self2.responseText=data2,setState(self2.DONE))});else try{this.responseText=fs.readFileSync(url.pathname,"utf8"),this.status=200,setState(self2.DONE)}catch(e){this.handleError(e)}}else{var port=url.port||(ssl?443:80),uri=url.pathname+(url.search?url.search:"");for(var name in defaultHeaders)headersCase[name.toLowerCase()]||(headers[name]=defaultHeaders[name]);if(headers.Host=host,ssl&&443===port||80===port||(headers.Host+=":"+url.port),settings.user){typeof settings.password>"u"&&(settings.password="");var authBuf=new Buffer(settings.user+":"+settings.password);headers.Authorization="Basic "+authBuf.toString("base64")}"GET"===settings.method||"HEAD"===settings.method?data=null:data?(headers["Content-Length"]=Buffer.isBuffer(data)?data.length:Buffer.byteLength(data),headers["Content-Type"]||(headers["Content-Type"]="text/plain;charset=UTF-8")):"POST"===settings.method&&(headers["Content-Length"]=0);var options={host,port,path:uri,method:settings.method,headers,agent:!1,withCredentials:self2.withCredentials};if(errorFlag=!1,settings.async){var doRequest=ssl?https.request:http.request;sendFlag=!0,self2.dispatchEvent("readystatechange");var responseHandler=__name(function responseHandler2(resp2){if(301!==(response=resp2).statusCode&&302!==response.statusCode&&303!==response.statusCode&&307!==response.statusCode)response.setEncoding("utf8"),setState(self2.HEADERS_RECEIVED),self2.status=response.statusCode,response.on("data",function(chunk){chunk&&(self2.responseText+=chunk),sendFlag&&setState(self2.LOADING)}),response.on("end",function(){sendFlag&&(setState(self2.DONE),sendFlag=!1)}),response.on("error",function(error){self2.handleError(error)});else{settings.url=response.headers.location;var url2=Url.parse(settings.url);host=url2.hostname;var newOptions={hostname:url2.hostname,port:url2.port,path:url2.path,method:303===response.statusCode?"GET":settings.method,headers,withCredentials:self2.withCredentials};(request=doRequest(newOptions,responseHandler2).on("error",errorHandler)).end()}},"responseHandler"),errorHandler=__name(function(error){self2.handleError(error)},"errorHandler");request=doRequest(options,responseHandler).on("error",errorHandler),data&&request.write(data),request.end(),self2.dispatchEvent("loadstart")}else{var contentFile=".node-xmlhttprequest-content-"+process.pid,syncFile=".node-xmlhttprequest-sync-"+process.pid;fs.writeFileSync(syncFile,"","utf8");for(var execString="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(ssl?"s":"")+".request;var options = "+JSON.stringify(options)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+contentFile+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText}}), 'utf8');fs.unlinkSync('"+syncFile+"');});response.on('error', function(error) {fs.writeFileSync('"+contentFile+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+syncFile+"');});}).on('error', function(error) {fs.writeFileSync('"+contentFile+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+syncFile+"');});"+(data?"req.write('"+JSON.stringify(data).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",syncProc=spawn(process.argv[0],["-e",execString]);fs.existsSync(syncFile););var resp=JSON.parse(fs.readFileSync(contentFile,"utf8"));syncProc.stdin.end(),fs.unlinkSync(contentFile),resp.err?self2.handleError(resp.err):(response=resp.data,self2.status=resp.data.statusCode,self2.responseText=resp.data.text,setState(self2.DONE))}}},this.handleError=function(error){this.status=0,this.statusText=error,this.responseText=error.stack,errorFlag=!0,setState(this.DONE),this.dispatchEvent("error")},this.abort=function(){request&&(request.abort(),request=null),headers=defaultHeaders,this.status=0,this.responseText="",this.responseXML="",errorFlag=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||sendFlag)&&this.readyState!==this.DONE&&(sendFlag=!1,setState(this.DONE)),this.readyState=this.UNSENT,this.dispatchEvent("abort")},this.addEventListener=function(event,callback){event in listeners||(listeners[event]=[]),listeners[event].push(callback)},this.removeEventListener=function(event,callback){event in listeners&&(listeners[event]=listeners[event].filter(function(ev){return ev!==callback}))},this.dispatchEvent=function(event){if("function"==typeof self2["on"+event]&&self2["on"+event](),event in listeners)for(var i=0,len=listeners[event].length;i<len;i++)listeners[event][i].call(self2)};var setState=__name(function(state){(state==self2.LOADING||self2.readyState!==state)&&(self2.readyState=state,(settings.async||self2.readyState<self2.OPENED||self2.readyState===self2.DONE)&&self2.dispatchEvent("readystatechange"),self2.readyState===self2.DONE&&!errorFlag&&(self2.dispatchEvent("load"),self2.dispatchEvent("loadend")))},"setState")}},function(module2,exports2,__nested_webpack_require_79051__){!function(nacl){"use strict";var gf=__name(function(init){var i,r=new Float64Array(16);if(init)for(i=0;i<init.length;i++)r[i]=init[i];return r},"gf"),randombytes=__name(function(){throw new Error("no PRNG")},"randombytes"),_0=new Uint8Array(16),_9=new Uint8Array(32);_9[0]=9;var gf0=gf(),gf1=gf([1]),_121665=gf([56129,1]),D=gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),D2=gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),X=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Y=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),I=gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ts64(x,i,h,l){x[i]=h>>24&255,x[i+1]=h>>16&255,x[i+2]=h>>8&255,x[i+3]=255&h,x[i+4]=l>>24&255,x[i+5]=l>>16&255,x[i+6]=l>>8&255,x[i+7]=255&l}function vn(x,xi,y,yi,n){var i,d=0;for(i=0;i<n;i++)d|=x[xi+i]^y[yi+i];return(1&d-1>>>8)-1}function crypto_verify_16(x,xi,y,yi){return vn(x,xi,y,yi,16)}function crypto_verify_32(x,xi,y,yi){return vn(x,xi,y,yi,32)}function core_salsa20(o,p,k,c){for(var u,j0=255&c[0]|(255&c[1])<<8|(255&c[2])<<16|(255&c[3])<<24,j1=255&k[0]|(255&k[1])<<8|(255&k[2])<<16|(255&k[3])<<24,j2=255&k[4]|(255&k[5])<<8|(255&k[6])<<16|(255&k[7])<<24,j3=255&k[8]|(255&k[9])<<8|(255&k[10])<<16|(255&k[11])<<24,j4=255&k[12]|(255&k[13])<<8|(255&k[14])<<16|(255&k[15])<<24,j5=255&c[4]|(255&c[5])<<8|(255&c[6])<<16|(255&c[7])<<24,j6=255&p[0]|(255&p[1])<<8|(255&p[2])<<16|(255&p[3])<<24,j7=255&p[4]|(255&p[5])<<8|(255&p[6])<<16|(255&p[7])<<24,j8=255&p[8]|(255&p[9])<<8|(255&p[10])<<16|(255&p[11])<<24,j9=255&p[12]|(255&p[13])<<8|(255&p[14])<<16|(255&p[15])<<24,j10=255&c[8]|(255&c[9])<<8|(255&c[10])<<16|(255&c[11])<<24,j11=255&k[16]|(255&k[17])<<8|(255&k[18])<<16|(255&k[19])<<24,j12=255&k[20]|(255&k[21])<<8|(255&k[22])<<16|(255&k[23])<<24,j13=255&k[24]|(255&k[25])<<8|(255&k[26])<<16|(255&k[27])<<24,j14=255&k[28]|(255&k[29])<<8|(255&k[30])<<16|(255&k[31])<<24,j15=255&c[12]|(255&c[13])<<8|(255&c[14])<<16|(255&c[15])<<24,x0=j0,x1=j1,x2=j2,x3=j3,x4=j4,x5=j5,x6=j6,x7=j7,x8=j8,x9=j9,x10=j10,x11=j11,x12=j12,x13=j13,x14=j14,x15=j15,i=0;i<20;i+=2)x0^=(u=(x12^=(u=(x8^=(u=(x4^=(u=x0+x12|0)<<7|u>>>25)+x0|0)<<9|u>>>23)+x4|0)<<13|u>>>19)+x8|0)<<18|u>>>14,x5^=(u=(x1^=(u=(x13^=(u=(x9^=(u=x5+x1|0)<<7|u>>>25)+x5|0)<<9|u>>>23)+x9|0)<<13|u>>>19)+x13|0)<<18|u>>>14,x10^=(u=(x6^=(u=(x2^=(u=(x14^=(u=x10+x6|0)<<7|u>>>25)+x10|0)<<9|u>>>23)+x14|0)<<13|u>>>19)+x2|0)<<18|u>>>14,x15^=(u=(x11^=(u=(x7^=(u=(x3^=(u=x15+x11|0)<<7|u>>>25)+x15|0)<<9|u>>>23)+x3|0)<<13|u>>>19)+x7|0)<<18|u>>>14,x0^=(u=(x3^=(u=(x2^=(u=(x1^=(u=x0+x3|0)<<7|u>>>25)+x0|0)<<9|u>>>23)+x1|0)<<13|u>>>19)+x2|0)<<18|u>>>14,x5^=(u=(x4^=(u=(x7^=(u=(x6^=(u=x5+x4|0)<<7|u>>>25)+x5|0)<<9|u>>>23)+x6|0)<<13|u>>>19)+x7|0)<<18|u>>>14,x10^=(u=(x9^=(u=(x8^=(u=(x11^=(u=x10+x9|0)<<7|u>>>25)+x10|0)<<9|u>>>23)+x11|0)<<13|u>>>19)+x8|0)<<18|u>>>14,x15^=(u=(x14^=(u=(x13^=(u=(x12^=(u=x15+x14|0)<<7|u>>>25)+x15|0)<<9|u>>>23)+x12|0)<<13|u>>>19)+x13|0)<<18|u>>>14;x0=x0+j0|0,x1=x1+j1|0,x2=x2+j2|0,x3=x3+j3|0,x4=x4+j4|0,x5=x5+j5|0,x6=x6+j6|0,x7=x7+j7|0,x8=x8+j8|0,x9=x9+j9|0,x10=x10+j10|0,x11=x11+j11|0,x12=x12+j12|0,x13=x13+j13|0,x14=x14+j14|0,x15=x15+j15|0,o[0]=x0>>>0&255,o[1]=x0>>>8&255,o[2]=x0>>>16&255,o[3]=x0>>>24&255,o[4]=x1>>>0&255,o[5]=x1>>>8&255,o[6]=x1>>>16&255,o[7]=x1>>>24&255,o[8]=x2>>>0&255,o[9]=x2>>>8&255,o[10]=x2>>>16&255,o[11]=x2>>>24&255,o[12]=x3>>>0&255,o[13]=x3>>>8&255,o[14]=x3>>>16&255,o[15]=x3>>>24&255,o[16]=x4>>>0&255,o[17]=x4>>>8&255,o[18]=x4>>>16&255,o[19]=x4>>>24&255,o[20]=x5>>>0&255,o[21]=x5>>>8&255,o[22]=x5>>>16&255,o[23]=x5>>>24&255,o[24]=x6>>>0&255,o[25]=x6>>>8&255,o[26]=x6>>>16&255,o[27]=x6>>>24&255,o[28]=x7>>>0&255,o[29]=x7>>>8&255,o[30]=x7>>>16&255,o[31]=x7>>>24&255,o[32]=x8>>>0&255,o[33]=x8>>>8&255,o[34]=x8>>>16&255,o[35]=x8>>>24&255,o[36]=x9>>>0&255,o[37]=x9>>>8&255,o[38]=x9>>>16&255,o[39]=x9>>>24&255,o[40]=x10>>>0&255,o[41]=x10>>>8&255,o[42]=x10>>>16&255,o[43]=x10>>>24&255,o[44]=x11>>>0&255,o[45]=x11>>>8&255,o[46]=x11>>>16&255,o[47]=x11>>>24&255,o[48]=x12>>>0&255,o[49]=x12>>>8&255,o[50]=x12>>>16&255,o[51]=x12>>>24&255,o[52]=x13>>>0&255,o[53]=x13>>>8&255,o[54]=x13>>>16&255,o[55]=x13>>>24&255,o[56]=x14>>>0&255,o[57]=x14>>>8&255,o[58]=x14>>>16&255,o[59]=x14>>>24&255,o[60]=x15>>>0&255,o[61]=x15>>>8&255,o[62]=x15>>>16&255,o[63]=x15>>>24&255}function core_hsalsa20(o,p,k,c){for(var u,x0=255&c[0]|(255&c[1])<<8|(255&c[2])<<16|(255&c[3])<<24,x1=255&k[0]|(255&k[1])<<8|(255&k[2])<<16|(255&k[3])<<24,x2=255&k[4]|(255&k[5])<<8|(255&k[6])<<16|(255&k[7])<<24,x3=255&k[8]|(255&k[9])<<8|(255&k[10])<<16|(255&k[11])<<24,x4=255&k[12]|(255&k[13])<<8|(255&k[14])<<16|(255&k[15])<<24,x5=255&c[4]|(255&c[5])<<8|(255&c[6])<<16|(255&c[7])<<24,x6=255&p[0]|(255&p[1])<<8|(255&p[2])<<16|(255&p[3])<<24,x7=255&p[4]|(255&p[5])<<8|(255&p[6])<<16|(255&p[7])<<24,x8=255&p[8]|(255&p[9])<<8|(255&p[10])<<16|(255&p[11])<<24,x9=255&p[12]|(255&p[13])<<8|(255&p[14])<<16|(255&p[15])<<24,x10=255&c[8]|(255&c[9])<<8|(255&c[10])<<16|(255&c[11])<<24,x11=255&k[16]|(255&k[17])<<8|(255&k[18])<<16|(255&k[19])<<24,x12=255&k[20]|(255&k[21])<<8|(255&k[22])<<16|(255&k[23])<<24,x13=255&k[24]|(255&k[25])<<8|(255&k[26])<<16|(255&k[27])<<24,x14=255&k[28]|(255&k[29])<<8|(255&k[30])<<16|(255&k[31])<<24,x15=255&c[12]|(255&c[13])<<8|(255&c[14])<<16|(255&c[15])<<24,i=0;i<20;i+=2)x0^=(u=(x12^=(u=(x8^=(u=(x4^=(u=x0+x12|0)<<7|u>>>25)+x0|0)<<9|u>>>23)+x4|0)<<13|u>>>19)+x8|0)<<18|u>>>14,x5^=(u=(x1^=(u=(x13^=(u=(x9^=(u=x5+x1|0)<<7|u>>>25)+x5|0)<<9|u>>>23)+x9|0)<<13|u>>>19)+x13|0)<<18|u>>>14,x10^=(u=(x6^=(u=(x2^=(u=(x14^=(u=x10+x6|0)<<7|u>>>25)+x10|0)<<9|u>>>23)+x14|0)<<13|u>>>19)+x2|0)<<18|u>>>14,x15^=(u=(x11^=(u=(x7^=(u=(x3^=(u=x15+x11|0)<<7|u>>>25)+x15|0)<<9|u>>>23)+x3|0)<<13|u>>>19)+x7|0)<<18|u>>>14,x0^=(u=(x3^=(u=(x2^=(u=(x1^=(u=x0+x3|0)<<7|u>>>25)+x0|0)<<9|u>>>23)+x1|0)<<13|u>>>19)+x2|0)<<18|u>>>14,x5^=(u=(x4^=(u=(x7^=(u=(x6^=(u=x5+x4|0)<<7|u>>>25)+x5|0)<<9|u>>>23)+x6|0)<<13|u>>>19)+x7|0)<<18|u>>>14,x10^=(u=(x9^=(u=(x8^=(u=(x11^=(u=x10+x9|0)<<7|u>>>25)+x10|0)<<9|u>>>23)+x11|0)<<13|u>>>19)+x8|0)<<18|u>>>14,x15^=(u=(x14^=(u=(x13^=(u=(x12^=(u=x15+x14|0)<<7|u>>>25)+x15|0)<<9|u>>>23)+x12|0)<<13|u>>>19)+x13|0)<<18|u>>>14;o[0]=x0>>>0&255,o[1]=x0>>>8&255,o[2]=x0>>>16&255,o[3]=x0>>>24&255,o[4]=x5>>>0&255,o[5]=x5>>>8&255,o[6]=x5>>>16&255,o[7]=x5>>>24&255,o[8]=x10>>>0&255,o[9]=x10>>>8&255,o[10]=x10>>>16&255,o[11]=x10>>>24&255,o[12]=x15>>>0&255,o[13]=x15>>>8&255,o[14]=x15>>>16&255,o[15]=x15>>>24&255,o[16]=x6>>>0&255,o[17]=x6>>>8&255,o[18]=x6>>>16&255,o[19]=x6>>>24&255,o[20]=x7>>>0&255,o[21]=x7>>>8&255,o[22]=x7>>>16&255,o[23]=x7>>>24&255,o[24]=x8>>>0&255,o[25]=x8>>>8&255,o[26]=x8>>>16&255,o[27]=x8>>>24&255,o[28]=x9>>>0&255,o[29]=x9>>>8&255,o[30]=x9>>>16&255,o[31]=x9>>>24&255}function crypto_core_salsa20(out,inp,k,c){core_salsa20(out,inp,k,c)}function crypto_core_hsalsa20(out,inp,k,c){core_hsalsa20(out,inp,k,c)}__name(ts64,"ts64"),__name(vn,"vn"),__name(crypto_verify_16,"crypto_verify_16"),__name(crypto_verify_32,"crypto_verify_32"),__name(core_salsa20,"core_salsa20"),__name(core_hsalsa20,"core_hsalsa20"),__name(crypto_core_salsa20,"crypto_core_salsa20"),__name(crypto_core_hsalsa20,"crypto_core_hsalsa20");var sigma=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function crypto_stream_salsa20_xor(c,cpos,m,mpos,b,n,k){var u,i,z=new Uint8Array(16),x=new Uint8Array(64);for(i=0;i<16;i++)z[i]=0;for(i=0;i<8;i++)z[i]=n[i];for(;b>=64;){for(crypto_core_salsa20(x,z,k,sigma),i=0;i<64;i++)c[cpos+i]=m[mpos+i]^x[i];for(u=1,i=8;i<16;i++)u=u+(255&z[i])|0,z[i]=255&u,u>>>=8;b-=64,cpos+=64,mpos+=64}if(b>0)for(crypto_core_salsa20(x,z,k,sigma),i=0;i<b;i++)c[cpos+i]=m[mpos+i]^x[i];return 0}function crypto_stream_salsa20(c,cpos,b,n,k){var u,i,z=new Uint8Array(16),x=new Uint8Array(64);for(i=0;i<16;i++)z[i]=0;for(i=0;i<8;i++)z[i]=n[i];for(;b>=64;){for(crypto_core_salsa20(x,z,k,sigma),i=0;i<64;i++)c[cpos+i]=x[i];for(u=1,i=8;i<16;i++)u=u+(255&z[i])|0,z[i]=255&u,u>>>=8;b-=64,cpos+=64}if(b>0)for(crypto_core_salsa20(x,z,k,sigma),i=0;i<b;i++)c[cpos+i]=x[i];return 0}function crypto_stream(c,cpos,d,n,k){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,k,sigma);for(var sn=new Uint8Array(8),i=0;i<8;i++)sn[i]=n[i+16];return crypto_stream_salsa20(c,cpos,d,sn,s)}function crypto_stream_xor(c,cpos,m,mpos,d,n,k){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,k,sigma);for(var sn=new Uint8Array(8),i=0;i<8;i++)sn[i]=n[i+16];return crypto_stream_salsa20_xor(c,cpos,m,mpos,d,sn,s)}__name(crypto_stream_salsa20_xor,"crypto_stream_salsa20_xor"),__name(crypto_stream_salsa20,"crypto_stream_salsa20"),__name(crypto_stream,"crypto_stream"),__name(crypto_stream_xor,"crypto_stream_xor");var poly1305=__name(function(key){var t0,t1,t2,t3,t4,t5,t6,t7;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t0=255&key[0]|(255&key[1])<<8,this.r[0]=8191&t0,t1=255&key[2]|(255&key[3])<<8,this.r[1]=8191&(t0>>>13|t1<<3),t2=255&key[4]|(255&key[5])<<8,this.r[2]=7939&(t1>>>10|t2<<6),t3=255&key[6]|(255&key[7])<<8,this.r[3]=8191&(t2>>>7|t3<<9),t4=255&key[8]|(255&key[9])<<8,this.r[4]=255&(t3>>>4|t4<<12),this.r[5]=t4>>>1&8190,t5=255&key[10]|(255&key[11])<<8,this.r[6]=8191&(t4>>>14|t5<<2),t6=255&key[12]|(255&key[13])<<8,this.r[7]=8065&(t5>>>11|t6<<5),t7=255&key[14]|(255&key[15])<<8,this.r[8]=8191&(t6>>>8|t7<<8),this.r[9]=t7>>>5&127,this.pad[0]=255&key[16]|(255&key[17])<<8,this.pad[1]=255&key[18]|(255&key[19])<<8,this.pad[2]=255&key[20]|(255&key[21])<<8,this.pad[3]=255&key[22]|(255&key[23])<<8,this.pad[4]=255&key[24]|(255&key[25])<<8,this.pad[5]=255&key[26]|(255&key[27])<<8,this.pad[6]=255&key[28]|(255&key[29])<<8,this.pad[7]=255&key[30]|(255&key[31])<<8},"poly1305");function crypto_onetimeauth(out,outpos,m,mpos,n,k){var s=new poly1305(k);return s.update(m,mpos,n),s.finish(out,outpos),0}function crypto_onetimeauth_verify(h,hpos,m,mpos,n,k){var x=new Uint8Array(16);return crypto_onetimeauth(x,0,m,mpos,n,k),crypto_verify_16(h,hpos,x,0)}function crypto_secretbox(c,m,d,n,k){var i;if(d<32)return-1;for(crypto_stream_xor(c,0,m,0,d,n,k),crypto_onetimeauth(c,16,c,32,d-32,c),i=0;i<16;i++)c[i]=0;return 0}function crypto_secretbox_open(m,c,d,n,k){var i,x=new Uint8Array(32);if(d<32||(crypto_stream(x,0,32,n,k),0!==crypto_onetimeauth_verify(c,16,c,32,d-32,x)))return-1;for(crypto_stream_xor(m,0,c,0,d,n,k),i=0;i<32;i++)m[i]=0;return 0}function set25519(r,a){var i;for(i=0;i<16;i++)r[i]=0|a[i]}function car25519(o){var i,v,c=1;for(i=0;i<16;i++)v=o[i]+c+65535,c=Math.floor(v/65536),o[i]=v-65536*c;o[0]+=c-1+37*(c-1)}function sel25519(p,q,b){for(var t,c=~(b-1),i=0;i<16;i++)t=c&(p[i]^q[i]),p[i]^=t,q[i]^=t}function pack25519(o,n){var i,j,b,m=gf(),t=gf();for(i=0;i<16;i++)t[i]=n[i];for(car25519(t),car25519(t),car25519(t),j=0;j<2;j++){for(m[0]=t[0]-65517,i=1;i<15;i++)m[i]=t[i]-65535-(m[i-1]>>16&1),m[i-1]&=65535;m[15]=t[15]-32767-(m[14]>>16&1),b=m[15]>>16&1,m[14]&=65535,sel25519(t,m,1-b)}for(i=0;i<16;i++)o[2*i]=255&t[i],o[2*i+1]=t[i]>>8}function neq25519(a,b){var c=new Uint8Array(32),d=new Uint8Array(32);return pack25519(c,a),pack25519(d,b),crypto_verify_32(c,0,d,0)}function par25519(a){var d=new Uint8Array(32);return pack25519(d,a),1&d[0]}function unpack25519(o,n){var i;for(i=0;i<16;i++)o[i]=n[2*i]+(n[2*i+1]<<8);o[15]&=32767}function A(o,a,b){for(var i=0;i<16;i++)o[i]=a[i]+b[i]}function Z(o,a,b){for(var i=0;i<16;i++)o[i]=a[i]-b[i]}function M(o,a,b){var v,c,t0=0,t1=0,t2=0,t3=0,t4=0,t5=0,t6=0,t7=0,t8=0,t9=0,t10=0,t11=0,t12=0,t13=0,t14=0,t15=0,t16=0,t17=0,t18=0,t19=0,t20=0,t21=0,t22=0,t23=0,t24=0,t25=0,t26=0,t27=0,t28=0,t29=0,t30=0,b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];t0+=(v=a[0])*b0,t1+=v*b1,t2+=v*b2,t3+=v*b3,t4+=v*b4,t5+=v*b5,t6+=v*b6,t7+=v*b7,t8+=v*b8,t9+=v*b9,t10+=v*b10,t11+=v*b11,t12+=v*b12,t13+=v*b13,t14+=v*b14,t15+=v*b15,t1+=(v=a[1])*b0,t2+=v*b1,t3+=v*b2,t4+=v*b3,t5+=v*b4,t6+=v*b5,t7+=v*b6,t8+=v*b7,t9+=v*b8,t10+=v*b9,t11+=v*b10,t12+=v*b11,t13+=v*b12,t14+=v*b13,t15+=v*b14,t16+=v*b15,t2+=(v=a[2])*b0,t3+=v*b1,t4+=v*b2,t5+=v*b3,t6+=v*b4,t7+=v*b5,t8+=v*b6,t9+=v*b7,t10+=v*b8,t11+=v*b9,t12+=v*b10,t13+=v*b11,t14+=v*b12,t15+=v*b13,t16+=v*b14,t17+=v*b15,t3+=(v=a[3])*b0,t4+=v*b1,t5+=v*b2,t6+=v*b3,t7+=v*b4,t8+=v*b5,t9+=v*b6,t10+=v*b7,t11+=v*b8,t12+=v*b9,t13+=v*b10,t14+=v*b11,t15+=v*b12,t16+=v*b13,t17+=v*b14,t18+=v*b15,t4+=(v=a[4])*b0,t5+=v*b1,t6+=v*b2,t7+=v*b3,t8+=v*b4,t9+=v*b5,t10+=v*b6,t11+=v*b7,t12+=v*b8,t13+=v*b9,t14+=v*b10,t15+=v*b11,t16+=v*b12,t17+=v*b13,t18+=v*b14,t19+=v*b15,t5+=(v=a[5])*b0,t6+=v*b1,t7+=v*b2,t8+=v*b3,t9+=v*b4,t10+=v*b5,t11+=v*b6,t12+=v*b7,t13+=v*b8,t14+=v*b9,t15+=v*b10,t16+=v*b11,t17+=v*b12,t18+=v*b13,t19+=v*b14,t20+=v*b15,t6+=(v=a[6])*b0,t7+=v*b1,t8+=v*b2,t9+=v*b3,t10+=v*b4,t11+=v*b5,t12+=v*b6,t13+=v*b7,t14+=v*b8,t15+=v*b9,t16+=v*b10,t17+=v*b11,t18+=v*b12,t19+=v*b13,t20+=v*b14,t21+=v*b15,t7+=(v=a[7])*b0,t8+=v*b1,t9+=v*b2,t10+=v*b3,t11+=v*b4,t12+=v*b5,t13+=v*b6,t14+=v*b7,t15+=v*b8,t16+=v*b9,t17+=v*b10,t18+=v*b11,t19+=v*b12,t20+=v*b13,t21+=v*b14,t22+=v*b15,t8+=(v=a[8])*b0,t9+=v*b1,t10+=v*b2,t11+=v*b3,t12+=v*b4,t13+=v*b5,t14+=v*b6,t15+=v*b7,t16+=v*b8,t17+=v*b9,t18+=v*b10,t19+=v*b11,t20+=v*b12,t21+=v*b13,t22+=v*b14,t23+=v*b15,t9+=(v=a[9])*b0,t10+=v*b1,t11+=v*b2,t12+=v*b3,t13+=v*b4,t14+=v*b5,t15+=v*b6,t16+=v*b7,t17+=v*b8,t18+=v*b9,t19+=v*b10,t20+=v*b11,t21+=v*b12,t22+=v*b13,t23+=v*b14,t24+=v*b15,t10+=(v=a[10])*b0,t11+=v*b1,t12+=v*b2,t13+=v*b3,t14+=v*b4,t15+=v*b5,t16+=v*b6,t17+=v*b7,t18+=v*b8,t19+=v*b9,t20+=v*b10,t21+=v*b11,t22+=v*b12,t23+=v*b13,t24+=v*b14,t25+=v*b15,t11+=(v=a[11])*b0,t12+=v*b1,t13+=v*b2,t14+=v*b3,t15+=v*b4,t16+=v*b5,t17+=v*b6,t18+=v*b7,t19+=v*b8,t20+=v*b9,t21+=v*b10,t22+=v*b11,t23+=v*b12,t24+=v*b13,t25+=v*b14,t26+=v*b15,t12+=(v=a[12])*b0,t13+=v*b1,t14+=v*b2,t15+=v*b3,t16+=v*b4,t17+=v*b5,t18+=v*b6,t19+=v*b7,t20+=v*b8,t21+=v*b9,t22+=v*b10,t23+=v*b11,t24+=v*b12,t25+=v*b13,t26+=v*b14,t27+=v*b15,t13+=(v=a[13])*b0,t14+=v*b1,t15+=v*b2,t16+=v*b3,t17+=v*b4,t18+=v*b5,t19+=v*b6,t20+=v*b7,t21+=v*b8,t22+=v*b9,t23+=v*b10,t24+=v*b11,t25+=v*b12,t26+=v*b13,t27+=v*b14,t28+=v*b15,t14+=(v=a[14])*b0,t15+=v*b1,t16+=v*b2,t17+=v*b3,t18+=v*b4,t19+=v*b5,t20+=v*b6,t21+=v*b7,t22+=v*b8,t23+=v*b9,t24+=v*b10,t25+=v*b11,t26+=v*b12,t27+=v*b13,t28+=v*b14,t29+=v*b15,t15+=(v=a[15])*b0,t1+=38*(t17+=v*b2),t2+=38*(t18+=v*b3),t3+=38*(t19+=v*b4),t4+=38*(t20+=v*b5),t5+=38*(t21+=v*b6),t6+=38*(t22+=v*b7),t7+=38*(t23+=v*b8),t8+=38*(t24+=v*b9),t9+=38*(t25+=v*b10),t10+=38*(t26+=v*b11),t11+=38*(t27+=v*b12),t12+=38*(t28+=v*b13),t13+=38*(t29+=v*b14),t14+=38*(t30+=v*b15),t0=(v=(t0+=38*(t16+=v*b1))+(c=1)+65535)-65536*(c=Math.floor(v/65536)),t1=(v=t1+c+65535)-65536*(c=Math.floor(v/65536)),t2=(v=t2+c+65535)-65536*(c=Math.floor(v/65536)),t3=(v=t3+c+65535)-65536*(c=Math.floor(v/65536)),t4=(v=t4+c+65535)-65536*(c=Math.floor(v/65536)),t5=(v=t5+c+65535)-65536*(c=Math.floor(v/65536)),t6=(v=t6+c+65535)-65536*(c=Math.floor(v/65536)),t7=(v=t7+c+65535)-65536*(c=Math.floor(v/65536)),t8=(v=t8+c+65535)-65536*(c=Math.floor(v/65536)),t9=(v=t9+c+65535)-65536*(c=Math.floor(v/65536)),t10=(v=t10+c+65535)-65536*(c=Math.floor(v/65536)),t11=(v=t11+c+65535)-65536*(c=Math.floor(v/65536)),t12=(v=t12+c+65535)-65536*(c=Math.floor(v/65536)),t13=(v=t13+c+65535)-65536*(c=Math.floor(v/65536)),t14=(v=t14+c+65535)-65536*(c=Math.floor(v/65536)),t15=(v=t15+c+65535)-65536*(c=Math.floor(v/65536)),t0=(v=(t0+=c-1+37*(c-1))+(c=1)+65535)-65536*(c=Math.floor(v/65536)),t1=(v=t1+c+65535)-65536*(c=Math.floor(v/65536)),t2=(v=t2+c+65535)-65536*(c=Math.floor(v/65536)),t3=(v=t3+c+65535)-65536*(c=Math.floor(v/65536)),t4=(v=t4+c+65535)-65536*(c=Math.floor(v/65536)),t5=(v=t5+c+65535)-65536*(c=Math.floor(v/65536)),t6=(v=t6+c+65535)-65536*(c=Math.floor(v/65536)),t7=(v=t7+c+65535)-65536*(c=Math.floor(v/65536)),t8=(v=t8+c+65535)-65536*(c=Math.floor(v/65536)),t9=(v=t9+c+65535)-65536*(c=Math.floor(v/65536)),t10=(v=t10+c+65535)-65536*(c=Math.floor(v/65536)),t11=(v=t11+c+65535)-65536*(c=Math.floor(v/65536)),t12=(v=t12+c+65535)-65536*(c=Math.floor(v/65536)),t13=(v=t13+c+65535)-65536*(c=Math.floor(v/65536)),t14=(v=t14+c+65535)-65536*(c=Math.floor(v/65536)),t15=(v=t15+c+65535)-65536*(c=Math.floor(v/65536)),t0+=c-1+37*(c-1),o[0]=t0,o[1]=t1,o[2]=t2,o[3]=t3,o[4]=t4,o[5]=t5,o[6]=t6,o[7]=t7,o[8]=t8,o[9]=t9,o[10]=t10,o[11]=t11,o[12]=t12,o[13]=t13,o[14]=t14,o[15]=t15}function S(o,a){M(o,a,a)}function inv25519(o,i){var a,c=gf();for(a=0;a<16;a++)c[a]=i[a];for(a=253;a>=0;a--)S(c,c),2!==a&&4!==a&&M(c,c,i);for(a=0;a<16;a++)o[a]=c[a]}function pow2523(o,i){var a,c=gf();for(a=0;a<16;a++)c[a]=i[a];for(a=250;a>=0;a--)S(c,c),1!==a&&M(c,c,i);for(a=0;a<16;a++)o[a]=c[a]}function crypto_scalarmult(q,n,p){var r,i,z=new Uint8Array(32),x=new Float64Array(80),a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf();for(i=0;i<31;i++)z[i]=n[i];for(z[31]=127&n[31]|64,z[0]&=248,unpack25519(x,p),i=0;i<16;i++)b[i]=x[i],d[i]=a[i]=c[i]=0;for(a[0]=d[0]=1,i=254;i>=0;--i)sel25519(a,b,r=z[i>>>3]>>>(7&i)&1),sel25519(c,d,r),A(e,a,c),Z(a,a,c),A(c,b,d),Z(b,b,d),S(d,e),S(f,a),M(a,c,a),M(c,b,e),A(e,a,c),Z(a,a,c),S(b,a),Z(c,d,f),M(a,c,_121665),A(a,a,d),M(c,c,a),M(a,d,f),M(d,b,x),S(b,e),sel25519(a,b,r),sel25519(c,d,r);for(i=0;i<16;i++)x[i+16]=a[i],x[i+32]=c[i],x[i+48]=b[i],x[i+64]=d[i];var x32=x.subarray(32),x16=x.subarray(16);return inv25519(x32,x32),M(x16,x16,x32),pack25519(q,x16),0}function crypto_scalarmult_base(q,n){return crypto_scalarmult(q,n,_9)}function crypto_box_keypair(y,x){return randombytes(x,32),crypto_scalarmult_base(y,x)}function crypto_box_beforenm(k,y,x){var s=new Uint8Array(32);return crypto_scalarmult(s,x,y),crypto_core_hsalsa20(k,_0,s,sigma)}poly1305.prototype.blocks=function(m,mpos,bytes){for(var t0,t1,t2,t3,t4,t5,t6,t7,c,d0,d1,d2,d3,d4,d5,d6,d7,d8,d9,hibit=this.fin?0:2048,h0=this.h[0],h1=this.h[1],h2=this.h[2],h3=this.h[3],h4=this.h[4],h5=this.h[5],h6=this.h[6],h7=this.h[7],h8=this.h[8],h9=this.h[9],r0=this.r[0],r1=this.r[1],r2=this.r[2],r3=this.r[3],r4=this.r[4],r5=this.r[5],r6=this.r[6],r7=this.r[7],r8=this.r[8],r9=this.r[9];bytes>=16;)d0=c=0,d0+=(h0+=8191&(t0=255&m[mpos+0]|(255&m[mpos+1])<<8))*r0,d0+=(h1+=8191&(t0>>>13|(t1=255&m[mpos+2]|(255&m[mpos+3])<<8)<<3))*(5*r9),d0+=(h2+=8191&(t1>>>10|(t2=255&m[mpos+4]|(255&m[mpos+5])<<8)<<6))*(5*r8),d0+=(h3+=8191&(t2>>>7|(t3=255&m[mpos+6]|(255&m[mpos+7])<<8)<<9))*(5*r7),c=(d0+=(h4+=8191&(t3>>>4|(t4=255&m[mpos+8]|(255&m[mpos+9])<<8)<<12))*(5*r6))>>>13,d0&=8191,d0+=(h5+=t4>>>1&8191)*(5*r5),d0+=(h6+=8191&(t4>>>14|(t5=255&m[mpos+10]|(255&m[mpos+11])<<8)<<2))*(5*r4),d0+=(h7+=8191&(t5>>>11|(t6=255&m[mpos+12]|(255&m[mpos+13])<<8)<<5))*(5*r3),d0+=(h8+=8191&(t6>>>8|(t7=255&m[mpos+14]|(255&m[mpos+15])<<8)<<8))*(5*r2),d1=c+=(d0+=(h9+=t7>>>5|hibit)*(5*r1))>>>13,d1+=h0*r1,d1+=h1*r0,d1+=h2*(5*r9),d1+=h3*(5*r8),c=(d1+=h4*(5*r7))>>>13,d1&=8191,d1+=h5*(5*r6),d1+=h6*(5*r5),d1+=h7*(5*r4),d1+=h8*(5*r3),c+=(d1+=h9*(5*r2))>>>13,d1&=8191,d2=c,d2+=h0*r2,d2+=h1*r1,d2+=h2*r0,d2+=h3*(5*r9),c=(d2+=h4*(5*r8))>>>13,d2&=8191,d2+=h5*(5*r7),d2+=h6*(5*r6),d2+=h7*(5*r5),d2+=h8*(5*r4),d3=c+=(d2+=h9*(5*r3))>>>13,d3+=h0*r3,d3+=h1*r2,d3+=h2*r1,d3+=h3*r0,c=(d3+=h4*(5*r9))>>>13,d3&=8191,d3+=h5*(5*r8),d3+=h6*(5*r7),d3+=h7*(5*r6),d3+=h8*(5*r5),d4=c+=(d3+=h9*(5*r4))>>>13,d4+=h0*r4,d4+=h1*r3,d4+=h2*r2,d4+=h3*r1,c=(d4+=h4*r0)>>>13,d4&=8191,d4+=h5*(5*r9),d4+=h6*(5*r8),d4+=h7*(5*r7),d4+=h8*(5*r6),d5=c+=(d4+=h9*(5*r5))>>>13,d5+=h0*r5,d5+=h1*r4,d5+=h2*r3,d5+=h3*r2,c=(d5+=h4*r1)>>>13,d5&=8191,d5+=h5*r0,d5+=h6*(5*r9),d5+=h7*(5*r8),d5+=h8*(5*r7),d6=c+=(d5+=h9*(5*r6))>>>13,d6+=h0*r6,d6+=h1*r5,d6+=h2*r4,d6+=h3*r3,c=(d6+=h4*r2)>>>13,d6&=8191,d6+=h5*r1,d6+=h6*r0,d6+=h7*(5*r9),d6+=h8*(5*r8),d7=c+=(d6+=h9*(5*r7))>>>13,d7+=h0*r7,d7+=h1*r6,d7+=h2*r5,d7+=h3*r4,c=(d7+=h4*r3)>>>13,d7&=8191,d7+=h5*r2,d7+=h6*r1,d7+=h7*r0,d7+=h8*(5*r9),d8=c+=(d7+=h9*(5*r8))>>>13,d8+=h0*r8,d8+=h1*r7,d8+=h2*r6,d8+=h3*r5,c=(d8+=h4*r4)>>>13,d8&=8191,d8+=h5*r3,d8+=h6*r2,d8+=h7*r1,d8+=h8*r0,d9=c+=(d8+=h9*(5*r9))>>>13,d9+=h0*r9,d9+=h1*r8,d9+=h2*r7,d9+=h3*r6,c=(d9+=h4*r5)>>>13,d9&=8191,d9+=h5*r4,d9+=h6*r3,d9+=h7*r2,d9+=h8*r1,h0=d0=8191&(c=(c=((c+=(d9+=h9*r0)>>>13)<<2)+c|0)+(d0&=8191)|0),h1=d1+=c>>>=13,h2=d2&=8191,h3=d3&=8191,h4=d4&=8191,h5=d5&=8191,h6=d6&=8191,h7=d7&=8191,h8=d8&=8191,h9=d9&=8191,mpos+=16,bytes-=16;this.h[0]=h0,this.h[1]=h1,this.h[2]=h2,this.h[3]=h3,this.h[4]=h4,this.h[5]=h5,this.h[6]=h6,this.h[7]=h7,this.h[8]=h8,this.h[9]=h9},poly1305.prototype.finish=function(mac,macpos){var c,mask,f,i,g=new Uint16Array(10);if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(c=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=c,c=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=5*c,c=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=c,c=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=c,g[0]=this.h[0]+5,c=g[0]>>>13,g[0]&=8191,i=1;i<10;i++)g[i]=this.h[i]+c,c=g[i]>>>13,g[i]&=8191;for(g[9]-=8192,mask=(1^c)-1,i=0;i<10;i++)g[i]&=mask;for(mask=~mask,i=0;i<10;i++)this.h[i]=this.h[i]&mask|g[i];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),f=this.h[0]+this.pad[0],this.h[0]=65535&f,i=1;i<8;i++)f=(this.h[i]+this.pad[i]|0)+(f>>>16)|0,this.h[i]=65535&f;mac[macpos+0]=this.h[0]>>>0&255,mac[macpos+1]=this.h[0]>>>8&255,mac[macpos+2]=this.h[1]>>>0&255,mac[macpos+3]=this.h[1]>>>8&255,mac[macpos+4]=this.h[2]>>>0&255,mac[macpos+5]=this.h[2]>>>8&255,mac[macpos+6]=this.h[3]>>>0&255,mac[macpos+7]=this.h[3]>>>8&255,mac[macpos+8]=this.h[4]>>>0&255,mac[macpos+9]=this.h[4]>>>8&255,mac[macpos+10]=this.h[5]>>>0&255,mac[macpos+11]=this.h[5]>>>8&255,mac[macpos+12]=this.h[6]>>>0&255,mac[macpos+13]=this.h[6]>>>8&255,mac[macpos+14]=this.h[7]>>>0&255,mac[macpos+15]=this.h[7]>>>8&255},poly1305.prototype.update=function(m,mpos,bytes){var i,want;if(this.leftover){for((want=16-this.leftover)>bytes&&(want=bytes),i=0;i<want;i++)this.buffer[this.leftover+i]=m[mpos+i];if(bytes-=want,mpos+=want,this.leftover+=want,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(bytes>=16&&(want=bytes-bytes%16,this.blocks(m,mpos,want),mpos+=want,bytes-=want),bytes){for(i=0;i<bytes;i++)this.buffer[this.leftover+i]=m[mpos+i];this.leftover+=bytes}},__name(crypto_onetimeauth,"crypto_onetimeauth"),__name(crypto_onetimeauth_verify,"crypto_onetimeauth_verify"),__name(crypto_secretbox,"crypto_secretbox"),__name(crypto_secretbox_open,"crypto_secretbox_open"),__name(set25519,"set25519"),__name(car25519,"car25519"),__name(sel25519,"sel25519"),__name(pack25519,"pack25519"),__name(neq25519,"neq25519"),__name(par25519,"par25519"),__name(unpack25519,"unpack25519"),__name(A,"A"),__name(Z,"Z"),__name(M,"M"),__name(S,"S"),__name(inv25519,"inv25519"),__name(pow2523,"pow2523"),__name(crypto_scalarmult,"crypto_scalarmult"),__name(crypto_scalarmult_base,"crypto_scalarmult_base"),__name(crypto_box_keypair,"crypto_box_keypair"),__name(crypto_box_beforenm,"crypto_box_beforenm");var crypto_box_afternm=crypto_secretbox,crypto_box_open_afternm=crypto_secretbox_open;function crypto_box(c,m,d,n,y,x){var k=new Uint8Array(32);return crypto_box_beforenm(k,y,x),crypto_box_afternm(c,m,d,n,k)}function crypto_box_open(m,c,d,n,y,x){var k=new Uint8Array(32);return crypto_box_beforenm(k,y,x),crypto_box_open_afternm(m,c,d,n,k)}__name(crypto_box,"crypto_box"),__name(crypto_box_open,"crypto_box_open");var K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function crypto_hashblocks_hl(hh,hl,m,n){for(var bh0,bh1,bh2,bh3,bh4,bh5,bh6,bh7,bl0,bl1,bl2,bl3,bl4,bl5,bl6,bl7,th,tl,i,j,h,l,a,b,c,d,wh=new Int32Array(16),wl=new Int32Array(16),ah0=hh[0],ah1=hh[1],ah2=hh[2],ah3=hh[3],ah4=hh[4],ah5=hh[5],ah6=hh[6],ah7=hh[7],al0=hl[0],al1=hl[1],al2=hl[2],al3=hl[3],al4=hl[4],al5=hl[5],al6=hl[6],al7=hl[7],pos=0;n>=128;){for(i=0;i<16;i++)j=8*i+pos,wh[i]=m[j+0]<<24|m[j+1]<<16|m[j+2]<<8|m[j+3],wl[i]=m[j+4]<<24|m[j+5]<<16|m[j+6]<<8|m[j+7];for(i=0;i<80;i++)if(bh0=ah0,bh1=ah1,bh2=ah2,bh3=ah3,bh4=ah4,bh5=ah5,bh6=ah6,ah7,bl0=al0,bl1=al1,bl2=al2,bl3=al3,bl4=al4,bl5=al5,bl6=al6,al7,a=65535&(l=al7),b=l>>>16,c=65535&(h=ah7),d=h>>>16,a+=65535&(l=(al4>>>14|ah4<<18)^(al4>>>18|ah4<<14)^(ah4>>>9|al4<<23)),b+=l>>>16,c+=65535&(h=(ah4>>>14|al4<<18)^(ah4>>>18|al4<<14)^(al4>>>9|ah4<<23)),d+=h>>>16,a+=65535&(l=al4&al5^~al4&al6),b+=l>>>16,c+=65535&(h=ah4&ah5^~ah4&ah6),d+=h>>>16,h=K[2*i],a+=65535&(l=K[2*i+1]),b+=l>>>16,c+=65535&h,d+=h>>>16,h=wh[i%16],b+=(l=wl[i%16])>>>16,c+=65535&h,d+=h>>>16,c+=(b+=(a+=65535&l)>>>16)>>>16,a=65535&(l=tl=65535&a|b<<16),b=l>>>16,c=65535&(h=th=65535&c|(d+=c>>>16)<<16),d=h>>>16,a+=65535&(l=(al0>>>28|ah0<<4)^(ah0>>>2|al0<<30)^(ah0>>>7|al0<<25)),b+=l>>>16,c+=65535&(h=(ah0>>>28|al0<<4)^(al0>>>2|ah0<<30)^(al0>>>7|ah0<<25)),d+=h>>>16,b+=(l=al0&al1^al0&al2^al1&al2)>>>16,c+=65535&(h=ah0&ah1^ah0&ah2^ah1&ah2),d+=h>>>16,bh7=65535&(c+=(b+=(a+=65535&l)>>>16)>>>16)|(d+=c>>>16)<<16,bl7=65535&a|b<<16,a=65535&(l=bl3),b=l>>>16,c=65535&(h=bh3),d=h>>>16,b+=(l=tl)>>>16,c+=65535&(h=th),d+=h>>>16,ah1=bh0,ah2=bh1,ah3=bh2,ah4=bh3=65535&(c+=(b+=(a+=65535&l)>>>16)>>>16)|(d+=c>>>16)<<16,ah5=bh4,ah6=bh5,ah7=bh6,ah0=bh7,al1=bl0,al2=bl1,al3=bl2,al4=bl3=65535&a|b<<16,al5=bl4,al6=bl5,al7=bl6,al0=bl7,i%16==15)for(j=0;j<16;j++)h=wh[j],a=65535&(l=wl[j]),b=l>>>16,c=65535&h,d=h>>>16,h=wh[(j+9)%16],a+=65535&(l=wl[(j+9)%16]),b+=l>>>16,c+=65535&h,d+=h>>>16,th=wh[(j+1)%16],a+=65535&(l=((tl=wl[(j+1)%16])>>>1|th<<31)^(tl>>>8|th<<24)^(tl>>>7|th<<25)),b+=l>>>16,c+=65535&(h=(th>>>1|tl<<31)^(th>>>8|tl<<24)^th>>>7),d+=h>>>16,th=wh[(j+14)%16],b+=(l=((tl=wl[(j+14)%16])>>>19|th<<13)^(th>>>29|tl<<3)^(tl>>>6|th<<26))>>>16,c+=65535&(h=(th>>>19|tl<<13)^(tl>>>29|th<<3)^th>>>6),d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,wh[j]=65535&c|d<<16,wl[j]=65535&a|b<<16;a=65535&(l=al0),b=l>>>16,c=65535&(h=ah0),d=h>>>16,h=hh[0],b+=(l=hl[0])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[0]=ah0=65535&c|d<<16,hl[0]=al0=65535&a|b<<16,a=65535&(l=al1),b=l>>>16,c=65535&(h=ah1),d=h>>>16,h=hh[1],b+=(l=hl[1])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[1]=ah1=65535&c|d<<16,hl[1]=al1=65535&a|b<<16,a=65535&(l=al2),b=l>>>16,c=65535&(h=ah2),d=h>>>16,h=hh[2],b+=(l=hl[2])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[2]=ah2=65535&c|d<<16,hl[2]=al2=65535&a|b<<16,a=65535&(l=al3),b=l>>>16,c=65535&(h=ah3),d=h>>>16,h=hh[3],b+=(l=hl[3])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[3]=ah3=65535&c|d<<16,hl[3]=al3=65535&a|b<<16,a=65535&(l=al4),b=l>>>16,c=65535&(h=ah4),d=h>>>16,h=hh[4],b+=(l=hl[4])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[4]=ah4=65535&c|d<<16,hl[4]=al4=65535&a|b<<16,a=65535&(l=al5),b=l>>>16,c=65535&(h=ah5),d=h>>>16,h=hh[5],b+=(l=hl[5])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[5]=ah5=65535&c|d<<16,hl[5]=al5=65535&a|b<<16,a=65535&(l=al6),b=l>>>16,c=65535&(h=ah6),d=h>>>16,h=hh[6],b+=(l=hl[6])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[6]=ah6=65535&c|d<<16,hl[6]=al6=65535&a|b<<16,a=65535&(l=al7),b=l>>>16,c=65535&(h=ah7),d=h>>>16,h=hh[7],b+=(l=hl[7])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[7]=ah7=65535&c|d<<16,hl[7]=al7=65535&a|b<<16,pos+=128,n-=128}return n}function crypto_hash(out,m,n){var i,hh=new Int32Array(8),hl=new Int32Array(8),x=new Uint8Array(256),b=n;for(hh[0]=1779033703,hh[1]=3144134277,hh[2]=1013904242,hh[3]=2773480762,hh[4]=1359893119,hh[5]=2600822924,hh[6]=528734635,hh[7]=1541459225,hl[0]=4089235720,hl[1]=2227873595,hl[2]=4271175723,hl[3]=1595750129,hl[4]=2917565137,hl[5]=725511199,hl[6]=4215389547,hl[7]=327033209,crypto_hashblocks_hl(hh,hl,m,n),n%=128,i=0;i<n;i++)x[i]=m[b-n+i];for(x[n]=128,x[(n=256-128*(n<112?1:0))-9]=0,ts64(x,n-8,b/536870912|0,b<<3),crypto_hashblocks_hl(hh,hl,x,n),i=0;i<8;i++)ts64(out,8*i,hh[i],hl[i]);return 0}function add(p,q){var a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf(),g=gf(),h=gf(),t=gf();Z(a,p[1],p[0]),Z(t,q[1],q[0]),M(a,a,t),A(b,p[0],p[1]),A(t,q[0],q[1]),M(b,b,t),M(c,p[3],q[3]),M(c,c,D2),M(d,p[2],q[2]),A(d,d,d),Z(e,b,a),Z(f,d,c),A(g,d,c),A(h,b,a),M(p[0],e,f),M(p[1],h,g),M(p[2],g,f),M(p[3],e,h)}function cswap(p,q,b){var i;for(i=0;i<4;i++)sel25519(p[i],q[i],b)}function pack(r,p){var tx=gf(),ty=gf(),zi=gf();inv25519(zi,p[2]),M(tx,p[0],zi),M(ty,p[1],zi),pack25519(r,ty),r[31]^=par25519(tx)<<7}function scalarmult(p,q,s){var b,i;for(set25519(p[0],gf0),set25519(p[1],gf1),set25519(p[2],gf1),set25519(p[3],gf0),i=255;i>=0;--i)cswap(p,q,b=s[i/8|0]>>(7&i)&1),add(q,p),add(p,p),cswap(p,q,b)}function scalarbase(p,s){var q=[gf(),gf(),gf(),gf()];set25519(q[0],X),set25519(q[1],Y),set25519(q[2],gf1),M(q[3],X,Y),scalarmult(p,q,s)}function crypto_sign_keypair(pk,sk,seeded){var i,d=new Uint8Array(64),p=[gf(),gf(),gf(),gf()];for(seeded||randombytes(sk,32),crypto_hash(d,sk,32),d[0]&=248,d[31]&=127,d[31]|=64,scalarbase(p,d),pack(pk,p),i=0;i<32;i++)sk[i+32]=pk[i];return 0}__name(crypto_hashblocks_hl,"crypto_hashblocks_hl"),__name(crypto_hash,"crypto_hash"),__name(add,"add"),__name(cswap,"cswap"),__name(pack,"pack"),__name(scalarmult,"scalarmult"),__name(scalarbase,"scalarbase"),__name(crypto_sign_keypair,"crypto_sign_keypair");var L=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function modL(r,x){var carry,i,j,k;for(i=63;i>=32;--i){for(carry=0,j=i-32,k=i-12;j<k;++j)x[j]+=carry-16*x[i]*L[j-(i-32)],carry=Math.floor((x[j]+128)/256),x[j]-=256*carry;x[j]+=carry,x[i]=0}for(carry=0,j=0;j<32;j++)x[j]+=carry-(x[31]>>4)*L[j],carry=x[j]>>8,x[j]&=255;for(j=0;j<32;j++)x[j]-=carry*L[j];for(i=0;i<32;i++)x[i+1]+=x[i]>>8,r[i]=255&x[i]}function reduce(r){var i,x=new Float64Array(64);for(i=0;i<64;i++)x[i]=r[i];for(i=0;i<64;i++)r[i]=0;modL(r,x)}function crypto_sign(sm,m,n,sk){var i,j,d=new Uint8Array(64),h=new Uint8Array(64),r=new Uint8Array(64),x=new Float64Array(64),p=[gf(),gf(),gf(),gf()];crypto_hash(d,sk,32),d[0]&=248,d[31]&=127,d[31]|=64;var smlen=n+64;for(i=0;i<n;i++)sm[64+i]=m[i];for(i=0;i<32;i++)sm[32+i]=d[32+i];for(crypto_hash(r,sm.subarray(32),n+32),reduce(r),scalarbase(p,r),pack(sm,p),i=32;i<64;i++)sm[i]=sk[i];for(crypto_hash(h,sm,n+64),reduce(h),i=0;i<64;i++)x[i]=0;for(i=0;i<32;i++)x[i]=r[i];for(i=0;i<32;i++)for(j=0;j<32;j++)x[i+j]+=h[i]*d[j];return modL(sm.subarray(32),x),smlen}function unpackneg(r,p){var t=gf(),chk=gf(),num=gf(),den=gf(),den2=gf(),den4=gf(),den6=gf();return set25519(r[2],gf1),unpack25519(r[1],p),S(num,r[1]),M(den,num,D),Z(num,num,r[2]),A(den,r[2],den),S(den2,den),S(den4,den2),M(den6,den4,den2),M(t,den6,num),M(t,t,den),pow2523(t,t),M(t,t,num),M(t,t,den),M(t,t,den),M(r[0],t,den),S(chk,r[0]),M(chk,chk,den),neq25519(chk,num)&&M(r[0],r[0],I),S(chk,r[0]),M(chk,chk,den),neq25519(chk,num)?-1:(par25519(r[0])===p[31]>>7&&Z(r[0],gf0,r[0]),M(r[3],r[0],r[1]),0)}function crypto_sign_open(m,sm,n,pk){var i,t=new Uint8Array(32),h=new Uint8Array(64),p=[gf(),gf(),gf(),gf()],q=[gf(),gf(),gf(),gf()];if(n<64||unpackneg(q,pk))return-1;for(i=0;i<n;i++)m[i]=sm[i];for(i=0;i<32;i++)m[i+32]=pk[i];if(crypto_hash(h,m,n),reduce(h),scalarmult(p,q,h),scalarbase(q,sm.subarray(32)),add(p,q),pack(t,p),n-=64,crypto_verify_32(sm,0,t,0)){for(i=0;i<n;i++)m[i]=0;return-1}for(i=0;i<n;i++)m[i]=sm[i+64];return n}__name(modL,"modL"),__name(reduce,"reduce"),__name(crypto_sign,"crypto_sign"),__name(unpackneg,"unpackneg"),__name(crypto_sign_open,"crypto_sign_open");var crypto_secretbox_KEYBYTES=32,crypto_secretbox_NONCEBYTES=24,crypto_box_PUBLICKEYBYTES=32,crypto_box_SECRETKEYBYTES=32,crypto_box_NONCEBYTES=crypto_secretbox_NONCEBYTES;function checkLengths(k,n){if(k.length!==crypto_secretbox_KEYBYTES)throw new Error("bad key size");if(n.length!==crypto_secretbox_NONCEBYTES)throw new Error("bad nonce size")}function checkBoxLengths(pk,sk){if(pk.length!==crypto_box_PUBLICKEYBYTES)throw new Error("bad public key size");if(sk.length!==crypto_box_SECRETKEYBYTES)throw new Error("bad secret key size")}function checkArrayTypes(){for(var i=0;i<arguments.length;i++)if(!(arguments[i]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function cleanup(arr){for(var i=0;i<arr.length;i++)arr[i]=0}nacl.lowlevel={crypto_core_hsalsa20,crypto_stream_xor,crypto_stream,crypto_stream_salsa20_xor,crypto_stream_salsa20,crypto_onetimeauth,crypto_onetimeauth_verify,crypto_verify_16,crypto_verify_32,crypto_secretbox,crypto_secretbox_open,crypto_scalarmult,crypto_scalarmult_base,crypto_box_beforenm,crypto_box_afternm,crypto_box,crypto_box_open,crypto_box_keypair,crypto_hash,crypto_sign,crypto_sign_keypair,crypto_sign_open,crypto_secretbox_KEYBYTES,crypto_secretbox_NONCEBYTES,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES,crypto_box_SECRETKEYBYTES,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf,D,L,pack25519,unpack25519,M,A,S,Z,pow2523,add,set25519,modL,scalarmult,scalarbase},__name(checkLengths,"checkLengths"),__name(checkBoxLengths,"checkBoxLengths"),__name(checkArrayTypes,"checkArrayTypes"),__name(cleanup,"cleanup"),nacl.randomBytes=function(n){var b=new Uint8Array(n);return randombytes(b,n),b},nacl.secretbox=function(msg,nonce,key){checkArrayTypes(msg,nonce,key),checkLengths(key,nonce);for(var m=new Uint8Array(32+msg.length),c=new Uint8Array(m.length),i=0;i<msg.length;i++)m[i+32]=msg[i];return crypto_secretbox(c,m,m.length,nonce,key),c.subarray(16)},nacl.secretbox.open=function(box,nonce,key){checkArrayTypes(box,nonce,key),checkLengths(key,nonce);for(var c=new Uint8Array(16+box.length),m=new Uint8Array(c.length),i=0;i<box.length;i++)c[i+16]=box[i];return c.length<32||0!==crypto_secretbox_open(m,c,c.length,nonce,key)?null:m.subarray(32)},nacl.secretbox.keyLength=crypto_secretbox_KEYBYTES,nacl.secretbox.nonceLength=crypto_secretbox_NONCEBYTES,nacl.secretbox.overheadLength=16,nacl.scalarMult=function(n,p){if(checkArrayTypes(n,p),32!==n.length)throw new Error("bad n size");if(32!==p.length)throw new Error("bad p size");var q=new Uint8Array(32);return crypto_scalarmult(q,n,p),q},nacl.scalarMult.base=function(n){if(checkArrayTypes(n),32!==n.length)throw new Error("bad n size");var q=new Uint8Array(32);return crypto_scalarmult_base(q,n),q},nacl.scalarMult.scalarLength=32,nacl.scalarMult.groupElementLength=32,nacl.box=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox(msg,nonce,k)},nacl.box.before=function(publicKey,secretKey){checkArrayTypes(publicKey,secretKey),checkBoxLengths(publicKey,secretKey);var k=new Uint8Array(32);return crypto_box_beforenm(k,publicKey,secretKey),k},nacl.box.after=nacl.secretbox,nacl.box.open=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox.open(msg,nonce,k)},nacl.box.open.after=nacl.secretbox.open,nacl.box.keyPair=function(){var pk=new Uint8Array(crypto_box_PUBLICKEYBYTES),sk=new Uint8Array(crypto_box_SECRETKEYBYTES);return crypto_box_keypair(pk,sk),{publicKey:pk,secretKey:sk}},nacl.box.keyPair.fromSecretKey=function(secretKey){if(checkArrayTypes(secretKey),secretKey.length!==crypto_box_SECRETKEYBYTES)throw new Error("bad secret key size");var pk=new Uint8Array(crypto_box_PUBLICKEYBYTES);return crypto_scalarmult_base(pk,secretKey),{publicKey:pk,secretKey:new Uint8Array(secretKey)}},nacl.box.publicKeyLength=crypto_box_PUBLICKEYBYTES,nacl.box.secretKeyLength=crypto_box_SECRETKEYBYTES,nacl.box.sharedKeyLength=32,nacl.box.nonceLength=crypto_box_NONCEBYTES,nacl.box.overheadLength=nacl.secretbox.overheadLength,nacl.sign=function(msg,secretKey){if(checkArrayTypes(msg,secretKey),64!==secretKey.length)throw new Error("bad secret key size");var signedMsg=new Uint8Array(64+msg.length);return crypto_sign(signedMsg,msg,msg.length,secretKey),signedMsg},nacl.sign.open=function(signedMsg,publicKey){if(checkArrayTypes(signedMsg,publicKey),32!==publicKey.length)throw new Error("bad public key size");var tmp=new Uint8Array(signedMsg.length),mlen=crypto_sign_open(tmp,signedMsg,signedMsg.length,publicKey);if(mlen<0)return null;for(var m=new Uint8Array(mlen),i=0;i<m.length;i++)m[i]=tmp[i];return m},nacl.sign.detached=function(msg,secretKey){for(var signedMsg=nacl.sign(msg,secretKey),sig=new Uint8Array(64),i=0;i<sig.length;i++)sig[i]=signedMsg[i];return sig},nacl.sign.detached.verify=function(msg,sig,publicKey){if(checkArrayTypes(msg,sig,publicKey),64!==sig.length)throw new Error("bad signature size");if(32!==publicKey.length)throw new Error("bad public key size");var i,sm=new Uint8Array(64+msg.length),m=new Uint8Array(64+msg.length);for(i=0;i<64;i++)sm[i]=sig[i];for(i=0;i<msg.length;i++)sm[i+64]=msg[i];return crypto_sign_open(m,sm,sm.length,publicKey)>=0},nacl.sign.keyPair=function(){var pk=new Uint8Array(32),sk=new Uint8Array(64);return crypto_sign_keypair(pk,sk),{publicKey:pk,secretKey:sk}},nacl.sign.keyPair.fromSecretKey=function(secretKey){if(checkArrayTypes(secretKey),64!==secretKey.length)throw new Error("bad secret key size");for(var pk=new Uint8Array(32),i=0;i<pk.length;i++)pk[i]=secretKey[32+i];return{publicKey:pk,secretKey:new Uint8Array(secretKey)}},nacl.sign.keyPair.fromSeed=function(seed){if(checkArrayTypes(seed),32!==seed.length)throw new Error("bad seed size");for(var pk=new Uint8Array(32),sk=new Uint8Array(64),i=0;i<32;i++)sk[i]=seed[i];return crypto_sign_keypair(pk,sk,!0),{publicKey:pk,secretKey:sk}},nacl.sign.publicKeyLength=32,nacl.sign.secretKeyLength=64,nacl.sign.seedLength=32,nacl.sign.signatureLength=64,nacl.hash=function(msg){checkArrayTypes(msg);var h=new Uint8Array(64);return crypto_hash(h,msg,msg.length),h},nacl.hash.hashLength=64,nacl.verify=function(x,y){return checkArrayTypes(x,y),0!==x.length&&0!==y.length&&x.length===y.length&&0===vn(x,0,y,0,x.length)},nacl.setPRNG=function(fn){randombytes=fn},function(){var crypto=typeof self<"u"?self.crypto||self.msCrypto:null;if(crypto&&crypto.getRandomValues){nacl.setPRNG(function(x,n){var i,v=new Uint8Array(n);for(i=0;i<n;i+=65536)crypto.getRandomValues(v.subarray(i,i+Math.min(n-i,65536)));for(i=0;i<n;i++)x[i]=v[i];cleanup(v)})}else(crypto=__nested_webpack_require_79051__(3))&&crypto.randomBytes&&nacl.setPRNG(function(x,n){var i,v=crypto.randomBytes(n);for(i=0;i<n;i++)x[i]=v[i];cleanup(v)})}()}(module2.exports?module2.exports:self.nacl=self.nacl||{})},function(module2,exports2,__nested_webpack_require_150828__){module2.exports=__nested_webpack_require_150828__(47).default},function(module2,exports2){module2.exports=__webpack_require__(14300)},function(module2,exports2){module2.exports=__webpack_require__(82361)},function(module2,exports2,__nested_webpack_require_151142__){"use strict";var Stream=__nested_webpack_require_151142__(5).Stream,util=__nested_webpack_require_151142__(0),IO=__name(function(driver){this.readable=this.writable=!0,this._paused=!1,this._driver=driver},"IO");util.inherits(IO,Stream),IO.prototype.pause=function(){this._paused=!0,this._driver.messages._paused=!0},IO.prototype.resume=function(){this._paused=!1,this.emit("drain");var messages=this._driver.messages;messages._paused=!1,messages.emit("drain")},IO.prototype.write=function(chunk){return!!this.writable&&(this._driver.parse(chunk),!this._paused)},IO.prototype.end=function(chunk){if(this.writable){void 0!==chunk&&this.write(chunk),this.writable=!1;var messages=this._driver.messages;messages.readable&&(messages.readable=messages.writable=!1,messages.emit("end"))}},IO.prototype.destroy=function(){this.end()};var Messages=__name(function(driver){this.readable=this.writable=!0,this._paused=!1,this._driver=driver},"Messages");util.inherits(Messages,Stream),Messages.prototype.pause=function(){this._driver.io._paused=!0},Messages.prototype.resume=function(){this._driver.io._paused=!1,this._driver.io.emit("drain")},Messages.prototype.write=function(message){return!!this.writable&&("string"==typeof message?this._driver.text(message):this._driver.binary(message),!this._paused)},Messages.prototype.end=function(message){void 0!==message&&this.write(message)},Messages.prototype.destroy=function(){},exports2.IO=IO,exports2.Messages=Messages},function(module2,exports2,__nested_webpack_require_156368__){"use strict";var Buffer2=__nested_webpack_require_156368__(1).Buffer,StreamReader=__name(function(){this._queue=[],this._queueSize=0,this._offset=0},"StreamReader");StreamReader.prototype.put=function(buffer){!buffer||0===buffer.length||(Buffer2.isBuffer(buffer)||(buffer=Buffer2.from(buffer)),this._queue.push(buffer),this._queueSize+=buffer.length)},StreamReader.prototype.read=function(length){if(length>this._queueSize)return null;if(0===length)return Buffer2.alloc(0);this._queueSize-=length;var buffers,buffer,queue=this._queue,remain=length,first=queue[0];if(first.length>=length)return first.length===length?queue.shift():(buffer=first.slice(0,length),queue[0]=first.slice(length),buffer);for(var i=0,n=queue.length;i<n&&!(remain<queue[i].length);i++)remain-=queue[i].length;return buffers=queue.splice(0,i),remain>0&&queue.length>0&&(buffers.push(queue[0].slice(0,remain)),queue[0]=queue[0].slice(remain)),Buffer2.concat(buffers,length)},StreamReader.prototype.eachByte=function(callback,context){for(var buffer,n,index;this._queue.length>0;){for(n=(buffer=this._queue[0]).length;this._offset<n;)index=this._offset,this._offset+=1,callback.call(context,buffer[index]);this._offset=0,this._queue.shift()}},module2.exports=StreamReader},function(module2,exports2,__nested_webpack_require_158145__){"use strict";var Buffer2=__nested_webpack_require_158145__(1).Buffer,crypto=__nested_webpack_require_158145__(3),url=__nested_webpack_require_158145__(6),util=__nested_webpack_require_158145__(0),HttpParser=__nested_webpack_require_158145__(10),Base=__nested_webpack_require_158145__(2),Hybi=__nested_webpack_require_158145__(12),Proxy2=__nested_webpack_require_158145__(36),Client=__name(function(_url,options){this.version="hybi-"+Hybi.VERSION,Hybi.call(this,null,_url,options),this.readyState=-1,this._key=Client.generateKey(),this._accept=Hybi.generateAccept(this._key),this._http=new HttpParser("response");var uri=url.parse(this.url),auth=uri.auth&&Buffer2.from(uri.auth,"utf8").toString("base64");if(this.VALID_PROTOCOLS.indexOf(uri.protocol)<0)throw new Error(this.url+" is not a valid WebSocket URL");this._pathname=(uri.pathname||"/")+(uri.search||""),this._headers.set("Host",uri.host),this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Key",this._key),this._headers.set("Sec-WebSocket-Version",Hybi.VERSION),this._protocols.length>0&&this._headers.set("Sec-WebSocket-Protocol",this._protocols.join(", ")),auth&&this._headers.set("Authorization","Basic "+auth)},"Client");util.inherits(Client,Hybi),Client.generateKey=function(){return crypto.randomBytes(16).toString("base64")};var instance={VALID_PROTOCOLS:["ws:","wss:"],proxy:function(origin,options){return new Proxy2(this,origin,options)},start:function(){return-1===this.readyState&&(this._write(this._handshakeRequest()),this.readyState=0,!0)},parse:function(chunk){if(3!==this.readyState){if(this.readyState>0)return Hybi.prototype.parse.call(this,chunk);this._http.parse(chunk),this._http.isComplete()&&(this._validateHandshake(),3!==this.readyState&&(this._open(),this.parse(this._http.body)))}},_handshakeRequest:function(){var extensions=this._extensions.generateOffer();extensions&&this._headers.set("Sec-WebSocket-Extensions",extensions);var headers=["GET "+this._pathname+" HTTP/1.1",this._headers.toString(),""];return Buffer2.from(headers.join("\r\n"),"utf8")},_failHandshake:function(message){message="Error during WebSocket handshake: "+message,this.readyState=3,this.emit("error",new Error(message)),this.emit("close",new Base.CloseEvent(this.ERRORS.protocol_error,message))},_validateHandshake:function(){if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,this._http.error)return this._failHandshake(this._http.error.message);if(101!==this._http.statusCode)return this._failHandshake("Unexpected response code: "+this._http.statusCode);var headers=this._http.headers,upgrade=headers.upgrade||"",connection=headers.connection||"",accept=headers["sec-websocket-accept"]||"",protocol=headers["sec-websocket-protocol"]||"";if(""===upgrade)return this._failHandshake("'Upgrade' header is missing");if("websocket"!==upgrade.toLowerCase())return this._failHandshake("'Upgrade' header value is not 'WebSocket'");if(""===connection)return this._failHandshake("'Connection' header is missing");if("upgrade"!==connection.toLowerCase())return this._failHandshake("'Connection' header value is not 'Upgrade'");if(accept!==this._accept)return this._failHandshake("Sec-WebSocket-Accept mismatch");if(this.protocol=null,""!==protocol){if(this._protocols.indexOf(protocol)<0)return this._failHandshake("Sec-WebSocket-Protocol mismatch");this.protocol=protocol}try{this._extensions.activate(this.headers["sec-websocket-extensions"])}catch(e){return this._failHandshake(e.message)}}};for(var key in instance)Client.prototype[key]=instance[key];module2.exports=Client},function(module2,exports2,__nested_webpack_require_162560__){var assert=__nested_webpack_require_162560__(28);function HTTPParser(type){assert.ok(type===HTTPParser.REQUEST||type===HTTPParser.RESPONSE||void 0===type),void 0===type||this.initialize(type),this.maxHeaderSize=HTTPParser.maxHeaderSize}exports2.HTTPParser=HTTPParser,__name(HTTPParser,"HTTPParser"),HTTPParser.prototype.initialize=function(type,async_resource){assert.ok(type===HTTPParser.REQUEST||type===HTTPParser.RESPONSE),this.type=type,this.state=type+"_LINE",this.info={headers:[],upgrade:!1},this.trailers=[],this.line="",this.isChunked=!1,this.connection="",this.headerSize=0,this.body_bytes=null,this.isUserCall=!1,this.hadError=!1},HTTPParser.encoding="ascii",HTTPParser.maxHeaderSize=81920,HTTPParser.REQUEST="REQUEST",HTTPParser.RESPONSE="RESPONSE";var kOnHeaders=HTTPParser.kOnHeaders=1,kOnHeadersComplete=HTTPParser.kOnHeadersComplete=2,kOnBody=HTTPParser.kOnBody=3,kOnMessageComplete=HTTPParser.kOnMessageComplete=4;HTTPParser.prototype[kOnHeaders]=HTTPParser.prototype[kOnHeadersComplete]=HTTPParser.prototype[kOnBody]=HTTPParser.prototype[kOnMessageComplete]=function(){};var compatMode0_12=!0;Object.defineProperty(HTTPParser,"kOnExecute",{get:function(){return compatMode0_12=!1,99}});var methods=exports2.methods=HTTPParser.methods=["DELETE","GET","HEAD","POST","PUT","CONNECT","OPTIONS","TRACE","COPY","LOCK","MKCOL","MOVE","PROPFIND","PROPPATCH","SEARCH","UNLOCK","BIND","REBIND","UNBIND","ACL","REPORT","MKACTIVITY","CHECKOUT","MERGE","M-SEARCH","NOTIFY","SUBSCRIBE","UNSUBSCRIBE","PATCH","PURGE","MKCALENDAR","LINK","UNLINK","SOURCE"],method_connect=methods.indexOf("CONNECT");HTTPParser.prototype.reinitialize=HTTPParser,HTTPParser.prototype.close=HTTPParser.prototype.pause=HTTPParser.prototype.resume=HTTPParser.prototype.free=function(){},HTTPParser.prototype._compatMode0_11=!1,HTTPParser.prototype.getAsyncId=function(){return 0};var headerState={REQUEST_LINE:!0,RESPONSE_LINE:!0,HEADER:!0};HTTPParser.prototype.execute=function(chunk,start,length){if(!(this instanceof HTTPParser))throw new TypeError("not a HTTPParser");start=start||0,length="number"==typeof length?length:chunk.length,this.chunk=chunk,this.offset=start;var end=this.end=start+length;try{for(;this.offset<end&&!this[this.state](););}catch(err){if(this.isUserCall)throw err;return this.hadError=!0,err}return this.chunk=null,length=this.offset-start,headerState[this.state]&&(this.headerSize+=length,this.headerSize>(this.maxHeaderSize||HTTPParser.maxHeaderSize))?new Error("max header size exceeded"):length};var stateFinishAllowed={REQUEST_LINE:!0,RESPONSE_LINE:!0,BODY_RAW:!0};HTTPParser.prototype.finish=function(){if(!this.hadError){if(!stateFinishAllowed[this.state])return new Error("invalid state for EOF");"BODY_RAW"===this.state&&this.userCall()(this[kOnMessageComplete]())}},HTTPParser.prototype.consume=HTTPParser.prototype.unconsume=HTTPParser.prototype.getCurrentBuffer=function(){},HTTPParser.prototype.userCall=function(){this.isUserCall=!0;var self2=this;return function(ret){return self2.isUserCall=!1,ret}},HTTPParser.prototype.nextRequest=function(){this.userCall()(this[kOnMessageComplete]()),this.reinitialize(this.type)},HTTPParser.prototype.consumeLine=function(){for(var end=this.end,chunk=this.chunk,i=this.offset;i<end;i++)if(10===chunk[i]){var line=this.line+chunk.toString(HTTPParser.encoding,this.offset,i);return"\r"===line.charAt(line.length-1)&&(line=line.substr(0,line.length-1)),this.line="",this.offset=i+1,line}this.line+=chunk.toString(HTTPParser.encoding,this.offset,this.end),this.offset=this.end};var headerExp=/^([^: \t]+):[ \t]*((?:.*[^ \t])|)/,headerContinueExp=/^[ \t]+(.*[^ \t])/;HTTPParser.prototype.parseHeader=function(line,headers){if(-1!==line.indexOf("\r"))throw parseErrorCode("HPE_LF_EXPECTED");var match=headerExp.exec(line),k=match&&match[1];if(k)headers.push(k),headers.push(match[2]);else{var matchContinue=headerContinueExp.exec(line);matchContinue&&headers.length&&(headers[headers.length-1]&&(headers[headers.length-1]+=" "),headers[headers.length-1]+=matchContinue[1])}};var requestExp=/^([A-Z-]+) ([^ ]+) HTTP\/(\d)\.(\d)$/;HTTPParser.prototype.REQUEST_LINE=function(){var line=this.consumeLine();if(line){var match=requestExp.exec(line);if(null===match)throw parseErrorCode("HPE_INVALID_CONSTANT");if(this.info.method=this._compatMode0_11?match[1]:methods.indexOf(match[1]),-1===this.info.method)throw new Error("invalid request method");this.info.url=match[2],this.info.versionMajor=+match[3],this.info.versionMinor=+match[4],this.body_bytes=0,this.state="HEADER"}};var responseExp=/^HTTP\/(\d)\.(\d) (\d{3}) ?(.*)$/;function parseErrorCode(code){var err=new Error("Parse Error");return err.code=code,err}HTTPParser.prototype.RESPONSE_LINE=function(){var line=this.consumeLine();if(line){var match=responseExp.exec(line);if(null===match)throw parseErrorCode("HPE_INVALID_CONSTANT");this.info.versionMajor=+match[1],this.info.versionMinor=+match[2];var statusCode=this.info.statusCode=+match[3];this.info.statusMessage=match[4],(1==(statusCode/100|0)||204===statusCode||304===statusCode)&&(this.body_bytes=0),this.state="HEADER"}},HTTPParser.prototype.shouldKeepAlive=function(){if(this.info.versionMajor>0&&this.info.versionMinor>0){if(-1!==this.connection.indexOf("close"))return!1}else if(-1===this.connection.indexOf("keep-alive"))return!1;return!(null===this.body_bytes&&!this.isChunked)},HTTPParser.prototype.HEADER=function(){var line=this.consumeLine();if(void 0!==line){var info=this.info;if(line)this.parseHeader(line,info.headers);else{for(var currentContentLengthValue,headers=info.headers,hasContentLength=!1,hasUpgradeHeader=!1,i=0;i<headers.length;i+=2)switch(headers[i].toLowerCase()){case"transfer-encoding":this.isChunked="chunked"===headers[i+1].toLowerCase();break;case"content-length":if(currentContentLengthValue=+headers[i+1],hasContentLength){if(currentContentLengthValue!==this.body_bytes)throw parseErrorCode("HPE_UNEXPECTED_CONTENT_LENGTH")}else hasContentLength=!0,this.body_bytes=currentContentLengthValue;break;case"connection":this.connection+=headers[i+1].toLowerCase();break;case"upgrade":hasUpgradeHeader=!0}var skipBody;if(this.isChunked&&hasContentLength&&(hasContentLength=!1,this.body_bytes=null),hasUpgradeHeader&&-1!=this.connection.indexOf("upgrade")?info.upgrade=this.type===HTTPParser.REQUEST||101===info.statusCode:info.upgrade=info.method===method_connect,this.isChunked&&info.upgrade&&(this.isChunked=!1),info.shouldKeepAlive=this.shouldKeepAlive(),2===(skipBody=compatMode0_12?this.userCall()(this[kOnHeadersComplete](info)):this.userCall()(this[kOnHeadersComplete](info.versionMajor,info.versionMinor,info.headers,info.method,info.url,info.statusCode,info.statusMessage,info.upgrade,info.shouldKeepAlive))))return this.nextRequest(),!0;if(this.isChunked&&!skipBody)this.state="BODY_CHUNKHEAD";else{if(skipBody||0===this.body_bytes)return this.nextRequest(),info.upgrade;null===this.body_bytes?this.state="BODY_RAW":this.state="BODY_SIZED"}}}},HTTPParser.prototype.BODY_CHUNKHEAD=function(){var line=this.consumeLine();void 0!==line&&(this.body_bytes=parseInt(line,16),this.body_bytes?this.state="BODY_CHUNK":this.state="BODY_CHUNKTRAILERS")},HTTPParser.prototype.BODY_CHUNK=function(){var length=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[kOnBody](this.chunk,this.offset,length)),this.offset+=length,this.body_bytes-=length,this.body_bytes||(this.state="BODY_CHUNKEMPTYLINE")},HTTPParser.prototype.BODY_CHUNKEMPTYLINE=function(){var line=this.consumeLine();void 0!==line&&(assert.equal(line,""),this.state="BODY_CHUNKHEAD")},HTTPParser.prototype.BODY_CHUNKTRAILERS=function(){var line=this.consumeLine();void 0!==line&&(line?this.parseHeader(line,this.trailers):(this.trailers.length&&this.userCall()(this[kOnHeaders](this.trailers,"")),this.nextRequest()))},HTTPParser.prototype.BODY_RAW=function(){var length=this.end-this.offset;this.userCall()(this[kOnBody](this.chunk,this.offset,length)),this.offset=this.end},HTTPParser.prototype.BODY_SIZED=function(){var length=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[kOnBody](this.chunk,this.offset,length)),this.offset+=length,this.body_bytes-=length,this.body_bytes||this.nextRequest()},["Headers","HeadersComplete","Body","MessageComplete"].forEach(function(name){var k=HTTPParser["kOn"+name];Object.defineProperty(HTTPParser.prototype,"on"+name,{get:function(){return this[k]},set:function(to){return this._compatMode0_11=!0,method_connect="CONNECT",this[k]=to}})}),__name(parseErrorCode,"parseErrorCode")},function(module2,exports2){module2.exports=__webpack_require__(39491)},function(module2,exports2,__nested_webpack_require_176777__){"use strict";var Parser=__nested_webpack_require_176777__(30),Pipeline=__nested_webpack_require_176777__(31),Extensions=__name(function(){this._rsv1=this._rsv2=this._rsv3=null,this._byName={},this._inOrder=[],this._sessions=[],this._index={}},"Extensions");Extensions.MESSAGE_OPCODES=[1,2];var instance={add:function(ext){if("string"!=typeof ext.name)throw new TypeError("extension.name must be a string");if("permessage"!==ext.type)throw new TypeError('extension.type must be "permessage"');if("boolean"!=typeof ext.rsv1)throw new TypeError("extension.rsv1 must be true or false");if("boolean"!=typeof ext.rsv2)throw new TypeError("extension.rsv2 must be true or false");if("boolean"!=typeof ext.rsv3)throw new TypeError("extension.rsv3 must be true or false");if(this._byName.hasOwnProperty(ext.name))throw new TypeError('An extension with name "'+ext.name+'" is already registered');this._byName[ext.name]=ext,this._inOrder.push(ext)},generateOffer:function(){var sessions=[],offer=[],index={};return this._inOrder.forEach(function(ext){var session=ext.createClientSession();if(session){var record=[ext,session];sessions.push(record),index[ext.name]=record;var offers=session.generateOffer();(offers=offers?[].concat(offers):[]).forEach(function(off){offer.push(Parser.serializeParams(ext.name,off))},this)}},this),this._sessions=sessions,this._index=index,offer.length>0?offer.join(", "):null},activate:function(header){var responses=Parser.parseHeader(header),sessions=[];responses.eachOffer(function(name,params){var record=this._index[name];if(!record)throw new Error('Server sent an extension response for unknown extension "'+name+'"');var ext=record[0],session=record[1],reserved=this._reserved(ext);if(reserved)throw new Error("Server sent two extension responses that use the RSV"+reserved[0]+' bit: "'+reserved[1]+'" and "'+ext.name+'"');if(!0!==session.activate(params))throw new Error("Server sent unacceptable extension parameters: "+Parser.serializeParams(name,params));this._reserve(ext),sessions.push(record)},this),this._sessions=sessions,this._pipeline=new Pipeline(sessions)},generateResponse:function(header){var sessions=[],response=[],offers=Parser.parseHeader(header);return this._inOrder.forEach(function(ext){var offer=offers.byName(ext.name);if(0!==offer.length&&!this._reserved(ext)){var session=ext.createServerSession(offer);session&&(this._reserve(ext),sessions.push([ext,session]),response.push(Parser.serializeParams(ext.name,session.generateResponse())))}},this),this._sessions=sessions,this._pipeline=new Pipeline(sessions),response.length>0?response.join(", "):null},validFrameRsv:function(frame){var ext,allowed={rsv1:!1,rsv2:!1,rsv3:!1};if(Extensions.MESSAGE_OPCODES.indexOf(frame.opcode)>=0)for(var i=0,n=this._sessions.length;i<n;i++)ext=this._sessions[i][0],allowed.rsv1=allowed.rsv1||ext.rsv1,allowed.rsv2=allowed.rsv2||ext.rsv2,allowed.rsv3=allowed.rsv3||ext.rsv3;return(allowed.rsv1||!frame.rsv1)&&(allowed.rsv2||!frame.rsv2)&&(allowed.rsv3||!frame.rsv3)},processIncomingMessage:function(message,callback,context){this._pipeline.processIncomingMessage(message,callback,context)},processOutgoingMessage:function(message,callback,context){this._pipeline.processOutgoingMessage(message,callback,context)},close:function(callback,context){if(!this._pipeline)return callback.call(context);this._pipeline.close(callback,context)},_reserve:function(ext){this._rsv1=this._rsv1||ext.rsv1&&ext.name,this._rsv2=this._rsv2||ext.rsv2&&ext.name,this._rsv3=this._rsv3||ext.rsv3&&ext.name},_reserved:function(ext){return this._rsv1&&ext.rsv1?[1,this._rsv1]:this._rsv2&&ext.rsv2?[2,this._rsv2]:!(!this._rsv3||!ext.rsv3)&&[3,this._rsv3]}};for(var key in instance)Extensions.prototype[key]=instance[key];module2.exports=Extensions},function(module2,exports2,__webpack_require__2){"use strict";var TOKEN=/([!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+)/,NOTOKEN=/([^!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z])/g,PARAM=new RegExp(TOKEN.source+"(?:=(?:"+TOKEN.source+"|"+/"((?:\\[\x00-\x7f]|[^\x00-\x08\x0a-\x1f\x7f"\\])*)"/.source+"))?"),EXT=new RegExp(TOKEN.source+"(?: *; *"+PARAM.source+")*","g"),EXT_LIST=new RegExp("^"+EXT.source+"(?: *, *"+EXT.source+")*$"),NUMBER=/^-?(0|[1-9][0-9]*)(\.[0-9]+)?$/,hasOwnProperty=Object.prototype.hasOwnProperty,Parser={parseHeader:function(header){var offers=new Offers;if(""===header||void 0===header)return offers;if(!EXT_LIST.test(header))throw new SyntaxError("Invalid Sec-WebSocket-Extensions header: "+header);return header.match(EXT).forEach(function(value){var params=value.match(new RegExp(PARAM.source,"g")),name=params.shift(),offer={};params.forEach(function(param){var data,args=param.match(PARAM),key=args[1];data=void 0!==args[2]?args[2]:void 0===args[3]||args[3].replace(/\\/g,""),NUMBER.test(data)&&(data=parseFloat(data)),hasOwnProperty.call(offer,key)?(offer[key]=[].concat(offer[key]),offer[key].push(data)):offer[key]=data},this),offers.push(name,offer)},this),offers},serializeParams:function(name,params){var values=[],print=__name(function(key2,value){value instanceof Array?value.forEach(function(v){print(key2,v)}):!0===value?values.push(key2):"number"==typeof value?values.push(key2+"="+value):NOTOKEN.test(value)?values.push(key2+'="'+value.replace(/"/g,'\\"')+'"'):values.push(key2+"="+value)},"print");for(var key in params)print(key,params[key]);return[name].concat(values).join("; ")}},Offers=__name(function(){this._byName={},this._inOrder=[]},"Offers");Offers.prototype.push=function(name,params){hasOwnProperty.call(this._byName,name)||(this._byName[name]=[]),this._byName[name].push(params),this._inOrder.push({name,params})},Offers.prototype.eachOffer=function(callback,context){for(var list=this._inOrder,i=0,n=list.length;i<n;i++)callback.call(context,list[i].name,list[i].params)},Offers.prototype.byName=function(name){return this._byName[name]||[]},Offers.prototype.toArray=function(){return this._inOrder.slice()},module2.exports=Parser},function(module2,exports2,__nested_webpack_require_184971__){"use strict";var Cell=__nested_webpack_require_184971__(32),Pledge=__nested_webpack_require_184971__(14),Pipeline=__name(function(sessions){this._cells=sessions.map(function(session){return new Cell(session)}),this._stopped={incoming:!1,outgoing:!1}},"Pipeline");Pipeline.prototype.processIncomingMessage=function(message,callback,context){this._stopped.incoming||this._loop("incoming",this._cells.length-1,-1,-1,message,callback,context)},Pipeline.prototype.processOutgoingMessage=function(message,callback,context){this._stopped.outgoing||this._loop("outgoing",0,this._cells.length,1,message,callback,context)},Pipeline.prototype.close=function(callback,context){this._stopped={incoming:!0,outgoing:!0};var closed=this._cells.map(function(a){return a.close()});callback&&Pledge.all(closed).then(function(){callback.call(context)})},Pipeline.prototype._loop=function(direction,start,end,step,message,callback,context){for(var cells=this._cells,n=cells.length,self2=this;n--;)cells[n].pending(direction);var pipe=__name(function(index,error,msg){if(index===end)return callback.call(context,error,msg);cells[index][direction](error,msg,function(err,m){err&&(self2._stopped[direction]=!0),pipe(index+step,err,m)})},"pipe");pipe(start,null,message)},module2.exports=Pipeline},function(module2,exports2,__nested_webpack_require_186653__){"use strict";var Functor=__nested_webpack_require_186653__(33),Pledge=__nested_webpack_require_186653__(14),Cell=__name(function(tuple){this._ext=tuple[0],this._session=tuple[1],this._functors={incoming:new Functor(this._session,"processIncomingMessage"),outgoing:new Functor(this._session,"processOutgoingMessage")}},"Cell");Cell.prototype.pending=function(direction){var functor=this._functors[direction];functor._stopped||(functor.pending+=1)},Cell.prototype.incoming=function(error,message,callback,context){this._exec("incoming",error,message,callback,context)},Cell.prototype.outgoing=function(error,message,callback,context){this._exec("outgoing",error,message,callback,context)},Cell.prototype.close=function(){return this._closed=this._closed||new Pledge,this._doClose(),this._closed},Cell.prototype._exec=function(direction,error,message,callback,context){this._functors[direction].call(error,message,function(err,msg){err&&(err.message=this._ext.name+": "+err.message),callback.call(context,err,msg),this._doClose()},this)},Cell.prototype._doClose=function(){var fin=this._functors.incoming,fout=this._functors.outgoing;!this._closed||fin.pending+fout.pending!==0||(this._session&&this._session.close(),this._session=null,this._closed.done())},module2.exports=Cell},function(module2,exports2,__nested_webpack_require_188278__){"use strict";var RingBuffer=__nested_webpack_require_188278__(13),Functor=__name(function(session,method){this._session=session,this._method=method,this._queue=new RingBuffer(Functor.QUEUE_SIZE),this._stopped=!1,this.pending=0},"Functor");Functor.QUEUE_SIZE=8,Functor.prototype.call=function(error,message,callback,context){if(!this._stopped){var record={error,message,callback,context,done:!1},called=!1,self2=this;if(this._queue.push(record),record.error)return record.done=!0,this._stop(),this._flushQueue();var handler=__name(function(err,msg){called^(called=!0)&&(err?(self2._stop(),record.error=err,record.message=null):record.message=msg,record.done=!0,self2._flushQueue())},"handler");try{this._session[this._method](message,handler)}catch(err){handler(err)}}},Functor.prototype._stop=function(){this.pending=this._queue.length,this._stopped=!0},Functor.prototype._flushQueue=function(){for(var record,queue=this._queue;queue.length>0&&queue.peek().done;)(record=queue.shift()).error?(this.pending=0,queue.clear()):this.pending-=1,record.callback.call(record.context,record.error,record.message)},module2.exports=Functor},function(module2,exports2,__webpack_require__2){"use strict";var Frame=__name(function(){},"Frame"),instance={final:!1,rsv1:!1,rsv2:!1,rsv3:!1,opcode:null,masked:!1,maskingKey:null,lengthBytes:1,length:0,payload:null};for(var key in instance)Frame.prototype[key]=instance[key];module2.exports=Frame},function(module2,exports2,__nested_webpack_require_190439__){"use strict";var Buffer2=__nested_webpack_require_190439__(1).Buffer,Message=__name(function(){this.rsv1=!1,this.rsv2=!1,this.rsv3=!1,this.opcode=null,this.length=0,this._chunks=[]},"Message"),instance={read:function(){return this.data=this.data||Buffer2.concat(this._chunks,this.length)},pushFrame:function(frame){this.rsv1=this.rsv1||frame.rsv1,this.rsv2=this.rsv2||frame.rsv2,this.rsv3=this.rsv3||frame.rsv3,null===this.opcode&&(this.opcode=frame.opcode),this._chunks.push(frame.payload),this.length+=frame.length}};for(var key in instance)Message.prototype[key]=instance[key];module2.exports=Message},function(module2,exports2,__nested_webpack_require_191285__){"use strict";var Buffer2=__nested_webpack_require_191285__(1).Buffer,Stream=__nested_webpack_require_191285__(5).Stream,url=__nested_webpack_require_191285__(6),util=__nested_webpack_require_191285__(0),Base=__nested_webpack_require_191285__(2),Headers=__nested_webpack_require_191285__(9),HttpParser=__nested_webpack_require_191285__(10),PORTS={"ws:":80,"wss:":443},Proxy2=__name(function(client,origin,options){this._client=client,this._http=new HttpParser("response"),this._origin="object"==typeof client.url?client.url:url.parse(client.url),this._url="object"==typeof origin?origin:url.parse(origin),this._options=options||{},this._state=0,this.readable=this.writable=!0,this._paused=!1,this._headers=new Headers,this._headers.set("Host",this._origin.host),this._headers.set("Connection","keep-alive"),this._headers.set("Proxy-Connection","keep-alive");var auth=this._url.auth&&Buffer2.from(this._url.auth,"utf8").toString("base64");auth&&this._headers.set("Proxy-Authorization","Basic "+auth)},"Proxy");util.inherits(Proxy2,Stream);var instance={setHeader:function(name,value){return 0===this._state&&(this._headers.set(name,value),!0)},start:function(){if(0!==this._state)return!1;this._state=1;var origin=this._origin,port=origin.port||PORTS[origin.protocol],headers=["CONNECT "+origin.hostname+":"+port+" HTTP/1.1",this._headers.toString(),""];return this.emit("data",Buffer2.from(headers.join("\r\n"),"utf8")),!0},pause:function(){this._paused=!0},resume:function(){this._paused=!1,this.emit("drain")},write:function(chunk){if(!this.writable)return!1;if(this._http.parse(chunk),!this._http.isComplete())return!this._paused;if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,200===this.statusCode)this.emit("connect",new Base.ConnectEvent);else{var message="Can't establish a connection to the server at "+this._origin.href;this.emit("error",new Error(message))}return this.end(),!this._paused},end:function(chunk){this.writable&&(void 0!==chunk&&this.write(chunk),this.readable=this.writable=!1,this.emit("close"),this.emit("end"))},destroy:function(){this.end()}};for(var key in instance)Proxy2.prototype[key]=instance[key];module2.exports=Proxy2},function(module2,exports2,__nested_webpack_require_194137__){"use strict";var util=__nested_webpack_require_194137__(0),HttpParser=__nested_webpack_require_194137__(10),Base=__nested_webpack_require_194137__(2),Draft75=__nested_webpack_require_194137__(15),Draft76=__nested_webpack_require_194137__(38),Hybi=__nested_webpack_require_194137__(12),Server=__name(function(options){Base.call(this,null,null,options),this._http=new HttpParser("request")},"Server");util.inherits(Server,Base);var instance={EVENTS:["open","message","error","close","ping","pong"],_bindEventListeners:function(){this.messages.on("error",function(){}),this.on("error",function(){})},parse:function(chunk){if(this._delegate)return this._delegate.parse(chunk);if(this._http.parse(chunk),this._http.isComplete()){this.method=this._http.method,this.url=this._http.url,this.headers=this._http.headers,this.body=this._http.body;var self2=this;this._delegate=Server.http(this,this._options),this._delegate.messages=this.messages,this._delegate.io=this.io,this._open(),this.EVENTS.forEach(function(event){this._delegate.on(event,function(e){self2.emit(event,e)})},this),this.protocol=this._delegate.protocol,this.version=this._delegate.version,this.parse(this._http.body),this.emit("connect",new Base.ConnectEvent)}},_open:function(){this.__queue.forEach(function(msg){this._delegate[msg[0]].apply(this._delegate,msg[1])},this),this.__queue=[]}};for(var key in["addExtension","setHeader","start","frame","text","binary","ping","close"].forEach(function(method){instance[method]=function(){return this._delegate?this._delegate[method].apply(this._delegate,arguments):(this.__queue.push([method,arguments]),!0)}}),instance)Server.prototype[key]=instance[key];Server.isSecureRequest=function(request){if(request.connection&&void 0!==request.connection.authorized||request.socket&&request.socket.secure)return!0;var headers=request.headers;return!!headers&&("on"===headers.https||"on"===headers["x-forwarded-ssl"]||"https"===headers["x-forwarded-scheme"]||"https"===headers["x-forwarded-proto"])},Server.determineUrl=function(request){return(this.isSecureRequest(request)?"wss:":"ws:")+"//"+request.headers.host+request.url},Server.http=function(request,options){void 0===(options=options||{}).requireMasking&&(options.requireMasking=!0);var headers=request.headers,version=headers["sec-websocket-version"],key2=headers["sec-websocket-key"],key1=headers["sec-websocket-key1"],key22=headers["sec-websocket-key2"],url=this.determineUrl(request);return version||key2?new Hybi(request,url,options):key1||key22?new Draft76(request,url,options):new Draft75(request,url,options)},module2.exports=Server},function(module2,exports2,__nested_webpack_require_197592__){"use strict";var Buffer2=__nested_webpack_require_197592__(1).Buffer,Base=__nested_webpack_require_197592__(2),Draft75=__nested_webpack_require_197592__(15),crypto=__nested_webpack_require_197592__(3),util=__nested_webpack_require_197592__(0),numberFromKey=__name(function(key2){return parseInt((key2.match(/[0-9]/g)||[]).join(""),10)},"numberFromKey"),spacesInKey=__name(function(key2){return(key2.match(/ /g)||[]).length},"spacesInKey"),Draft76=__name(function(request,url,options){Draft75.apply(this,arguments),this._stage=-1,this._body=[],this.version="hixie-76",this._headers.clear(),this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Origin",this._request.headers.origin),this._headers.set("Sec-WebSocket-Location",this.url)},"Draft76");util.inherits(Draft76,Draft75);var instance={BODY_SIZE:8,start:function(){return!!Draft75.prototype.start.call(this)&&(this._started=!0,this._sendHandshakeBody(),!0)},close:function(){return 3!==this.readyState&&(1===this.readyState&&this._write(Buffer2.from([255,0])),this.readyState=3,this.emit("close",new Base.CloseEvent(null,null)),!0)},_handshakeResponse:function(){var key1=(headers=this._request.headers)["sec-websocket-key1"],key2=headers["sec-websocket-key2"];if(!key1)throw new Error("Missing required header: Sec-WebSocket-Key1");if(!key2)throw new Error("Missing required header: Sec-WebSocket-Key2");var number1=numberFromKey(key1),spaces1=spacesInKey(key1),number2=numberFromKey(key2),spaces2=spacesInKey(key2);if(number1%spaces1!=0||number2%spaces2!=0)throw new Error("Client sent invalid Sec-WebSocket-Key headers");this._keyValues=[number1/spaces1,number2/spaces2];var headers=["HTTP/1.1 101 WebSocket Protocol Handshake",this._headers.toString(),""];return Buffer2.from(headers.join("\r\n"),"binary")},_handshakeSignature:function(){if(this._body.length<this.BODY_SIZE)return null;var md5=crypto.createHash("md5"),buffer=Buffer2.allocUnsafe(8+this.BODY_SIZE);return buffer.writeUInt32BE(this._keyValues[0],0),buffer.writeUInt32BE(this._keyValues[1],4),Buffer2.from(this._body).copy(buffer,8,0,this.BODY_SIZE),md5.update(buffer),Buffer2.from(md5.digest("binary"),"binary")},_sendHandshakeBody:function(){if(this._started){var signature=this._handshakeSignature();signature&&(this._write(signature),this._stage=0,this._open(),this._body.length>this.BODY_SIZE&&this.parse(this._body.slice(this.BODY_SIZE)))}},_parseLeadingByte:function(octet){if(255!==octet)return Draft75.prototype._parseLeadingByte.call(this,octet);this._closing=!0,this._length=0,this._stage=1}};for(var key in instance)Draft76.prototype[key]=instance[key];module2.exports=Draft76},function(module2,exports2,__nested_webpack_require_200953__){"use strict";var util=__nested_webpack_require_200953__(0),net=__nested_webpack_require_200953__(40),tls=__nested_webpack_require_200953__(41),url=__nested_webpack_require_200953__(6),driver=__nested_webpack_require_200953__(4),API=__nested_webpack_require_200953__(11),DEFAULT_PORTS=(__nested_webpack_require_200953__(7),{"http:":80,"https:":443,"ws:":80,"wss:":443}),SECURE_PROTOCOLS=["https:","wss:"],Client=__name(function(_url,protocols,options){options=options||{},this.url=_url,this._driver=driver.client(this.url,{maxLength:options.maxLength,protocols}),["open","error"].forEach(function(event){this._driver.on(event,function(){self2.headers=self2._driver.headers,self2.statusCode=self2._driver.statusCode})},this);var proxy=options.proxy||{},endpoint=url.parse(proxy.origin||this.url),port=endpoint.port||DEFAULT_PORTS[endpoint.protocol],secure=SECURE_PROTOCOLS.indexOf(endpoint.protocol)>=0,onConnect=__name(function(){self2._onConnect()},"onConnect"),netOptions=options.net||{},originTLS=options.tls||{},socketTLS=proxy.origin?proxy.tls||{}:originTLS,self2=this;netOptions.host=socketTLS.host=endpoint.hostname,netOptions.port=socketTLS.port=port,originTLS.ca=originTLS.ca||options.ca,socketTLS.servername=socketTLS.servername||endpoint.hostname,this._stream=secure?tls.connect(socketTLS,onConnect):net.connect(netOptions,onConnect),proxy.origin&&this._configureProxy(proxy,originTLS),API.call(this,options)},"Client");util.inherits(Client,API),Client.prototype._onConnect=function(){(this._proxy||this._driver).start()},Client.prototype._configureProxy=function(proxy,originTLS){var name,uri=url.parse(this.url),secure=SECURE_PROTOCOLS.indexOf(uri.protocol)>=0,self2=this;if(this._proxy=this._driver.proxy(proxy.origin),proxy.headers)for(name in proxy.headers)this._proxy.setHeader(name,proxy.headers[name]);this._proxy.pipe(this._stream,{end:!1}),this._stream.pipe(this._proxy),this._proxy.on("connect",function(){if(secure){var options={socket:self2._stream,servername:uri.hostname};for(name in originTLS)options[name]=originTLS[name];self2._stream=tls.connect(options),self2._configureStream()}self2._driver.io.pipe(self2._stream),self2._stream.pipe(self2._driver.io),self2._driver.start()}),this._proxy.on("error",function(error){self2._driver.emit("error",error)})},module2.exports=Client},function(module2,exports2){module2.exports=__webpack_require__(41808)},function(module2,exports2){module2.exports=__webpack_require__(24404)},function(module2,exports2,__nested_webpack_require_204085__){"use strict";var Stream=__nested_webpack_require_204085__(5).Stream,util=__nested_webpack_require_204085__(0),driver=__nested_webpack_require_204085__(4),Headers=__nested_webpack_require_204085__(9),API=__nested_webpack_require_204085__(11),EventTarget=__nested_webpack_require_204085__(16),Event=__nested_webpack_require_204085__(7),EventSource=__name(function(request,response,options){this.writable=!0,options=options||{},this._stream=response.socket,this._ping=options.ping||this.DEFAULT_PING,this._retry=options.retry||this.DEFAULT_RETRY;var scheme=driver.isSecureRequest(request)?"https:":"http:";this.url=scheme+"//"+request.headers.host+request.url,this.lastEventId=request.headers["last-event-id"]||"",this.readyState=API.CONNECTING;var headers=new Headers,self2=this;if(options.headers)for(var key2 in options.headers)headers.set(key2,options.headers[key2]);if(this._stream&&this._stream.writable){process.nextTick(function(){self2._open()}),this._stream.setTimeout(0),this._stream.setNoDelay(!0);var handshake="HTTP/1.1 200 OK\r\nContent-Type: text/event-stream\r\nCache-Control: no-cache, no-store\r\nConnection: close\r\n"+headers.toString()+"\r\nretry: "+Math.floor(1e3*this._retry)+"\r\n\r\n";this._write(handshake),this._stream.on("drain",function(){self2.emit("drain")}),this._ping&&(this._pingTimer=setInterval(function(){self2.ping()},1e3*this._ping)),["error","end"].forEach(function(event){self2._stream.on(event,function(){self2.close()})})}},"EventSource");util.inherits(EventSource,Stream),EventSource.isEventSource=function(request){return"GET"===request.method&&(request.headers.accept||"").split(/\s*,\s*/).indexOf("text/event-stream")>=0};var instance={DEFAULT_PING:10,DEFAULT_RETRY:5,_write:function(chunk){if(!this.writable)return!1;try{return this._stream.write(chunk,"utf8")}catch{return!1}},_open:function(){if(this.readyState===API.CONNECTING){this.readyState=API.OPEN;var event=new Event("open");event.initEvent("open",!1,!1),this.dispatchEvent(event)}},write:function(message){return this.send(message)},end:function(message){void 0!==message&&this.write(message),this.close()},send:function(message,options){if(this.readyState>API.OPEN)return!1;message=String(message).replace(/(\r\n|\r|\n)/g,"$1data: ");var frame="";return(options=options||{}).event&&(frame+="event: "+options.event+"\r\n"),options.id&&(frame+="id: "+options.id+"\r\n"),frame+="data: "+message+"\r\n\r\n",this._write(frame)},ping:function(){return this._write(":\r\n\r\n")},close:function(){if(this.readyState>API.OPEN)return!1;this.readyState=API.CLOSED,this.writable=!1,this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end();var event=new Event("close");return event.initEvent("close",!1,!1),this.dispatchEvent(event),!0}};for(var method in instance)EventSource.prototype[method]=instance[method];for(var key in EventTarget)EventSource.prototype[key]=EventTarget[key];module2.exports=EventSource},function(module2,exports2){module2.exports=__webpack_require__(32081)},function(module2,exports2){module2.exports=__webpack_require__(57147)},function(module2,exports2){module2.exports=__webpack_require__(13685)},function(module2,exports2){module2.exports=__webpack_require__(95687)},function(module2,__webpack_exports__,__nested_webpack_require_208289__){"use strict";function encode(s){return btoa(utob(s))}__nested_webpack_require_208289__.r(__webpack_exports__),__name(encode,"encode");for(var fromCharCode=String.fromCharCode,b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab={},base64_i=0,l=b64chars.length;base64_i<l;base64_i++)b64tab[b64chars.charAt(base64_i)]=base64_i;var extendStatics,cb_utob=__name(function(c){var cc=c.charCodeAt(0);return cc<128?c:cc<2048?fromCharCode(192|cc>>>6)+fromCharCode(128|63&cc):fromCharCode(224|cc>>>12&15)+fromCharCode(128|cc>>>6&63)+fromCharCode(128|63&cc)},"cb_utob"),utob=__name(function(u){return u.replace(/[^\x00-\x7F]/g,cb_utob)},"utob"),cb_encode=__name(function(ccc){var padlen=[0,2,1][ccc.length%3],ord=ccc.charCodeAt(0)<<16|(ccc.length>1?ccc.charCodeAt(1):0)<<8|(ccc.length>2?ccc.charCodeAt(2):0);return[b64chars.charAt(ord>>>18),b64chars.charAt(ord>>>12&63),padlen>=2?"=":b64chars.charAt(ord>>>6&63),padlen>=1?"=":b64chars.charAt(63&ord)].join("")},"cb_encode"),btoa=global.btoa||function(b){return b.replace(/[\s\S]{1,3}/g,cb_encode)},abstract_timer=function(){function Timer2(set,clear,delay,callback){var _this=this;this.clear=clear,this.timer=set(function(){_this.timer&&(_this.timer=callback(_this.timer))},delay)}return __name(Timer2,"Timer"),Timer2.prototype.isRunning=function(){return null!==this.timer},Timer2.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},Timer2}(),__extends=(extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)b2.hasOwnProperty(p)&&(d2[p]=b2[p])})(d,b)},"extendStatics"),function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});function timers_clearTimeout(timer){global.clearTimeout(timer)}function timers_clearInterval(timer){global.clearInterval(timer)}__name(timers_clearTimeout,"timers_clearTimeout"),__name(timers_clearInterval,"timers_clearInterval");var OneOffTimer=function(_super){function OneOffTimer2(delay,callback){return _super.call(this,setTimeout,timers_clearTimeout,delay,function(timer){return callback(),null})||this}return __extends(OneOffTimer2,_super),__name(OneOffTimer2,"OneOffTimer"),OneOffTimer2}(abstract_timer),PeriodicTimer=function(_super){function PeriodicTimer2(delay,callback){return _super.call(this,setInterval,timers_clearInterval,delay,function(timer){return callback(),timer})||this}return __extends(PeriodicTimer2,_super),__name(PeriodicTimer2,"PeriodicTimer"),PeriodicTimer2}(abstract_timer),Util={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(callback){return new OneOffTimer(0,callback)},method:function(name){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];var boundArguments=Array.prototype.slice.call(arguments,1);return function(object){return object[name].apply(object,boundArguments.concat(arguments))}}},util=Util;function extend(target){for(var sources=[],_i=1;_i<arguments.length;_i++)sources[_i-1]=arguments[_i];for(var i=0;i<sources.length;i++){var extensions=sources[i];for(var property in extensions)extensions[property]&&extensions[property].constructor&&extensions[property].constructor===Object?target[property]=extend(target[property]||{},extensions[property]):target[property]=extensions[property]}return target}function stringify(){for(var m=["Pusher"],i=0;i<arguments.length;i++)"string"==typeof arguments[i]?m.push(arguments[i]):m.push(safeJSONStringify(arguments[i]));return m.join(" : ")}function arrayIndexOf(array,item){var nativeIndexOf=Array.prototype.indexOf;if(null===array)return-1;if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item);for(var i=0,l2=array.length;i<l2;i++)if(array[i]===item)return i;return-1}function objectApply(object,f){for(var key in object)Object.prototype.hasOwnProperty.call(object,key)&&f(object[key],key,object)}function keys(object){var keys2=[];return objectApply(object,function(_,key){keys2.push(key)}),keys2}function values(object){var values2=[];return objectApply(object,function(value){values2.push(value)}),values2}function apply(array,f,context){for(var i=0;i<array.length;i++)f.call(context||global,array[i],i,array)}function map(array,f){for(var result=[],i=0;i<array.length;i++)result.push(f(array[i],i,array,result));return result}function mapObject(object,f){var result={};return objectApply(object,function(value,key){result[key]=f(value)}),result}function filter(array,test){test=test||function(value){return!!value};for(var result=[],i=0;i<array.length;i++)test(array[i],i,array,result)&&result.push(array[i]);return result}function filterObject(object,test){var result={};return objectApply(object,function(value,key){(test&&test(value,key,object,result)||Boolean(value))&&(result[key]=value)}),result}function flatten(object){var result=[];return objectApply(object,function(value,key){result.push([key,value])}),result}function any(array,test){for(var i=0;i<array.length;i++)if(test(array[i],i,array))return!0;return!1}function collections_all(array,test){for(var i=0;i<array.length;i++)if(!test(array[i],i,array))return!1;return!0}function encodeParamsObject(data){return mapObject(data,function(value){return"object"==typeof value&&(value=safeJSONStringify(value)),encodeURIComponent(encode(value.toString()))})}function buildQueryString(data){return map(flatten(encodeParamsObject(filterObject(data,function(value){return void 0!==value}))),util.method("join","=")).join("&")}function decycleObject(object){var objects=[],paths=[];return __name(function derez(value,path){var i,name,nu;switch(typeof value){case"object":if(!value)return null;for(i=0;i<objects.length;i+=1)if(objects[i]===value)return{$ref:paths[i]};if(objects.push(value),paths.push(path),"[object Array]"===Object.prototype.toString.apply(value))for(nu=[],i=0;i<value.length;i+=1)nu[i]=derez(value[i],path+"["+i+"]");else for(name in nu={},value)Object.prototype.hasOwnProperty.call(value,name)&&(nu[name]=derez(value[name],path+"["+JSON.stringify(name)+"]"));return nu;case"number":case"string":case"boolean":return value}},"derez")(object,"$")}function safeJSONStringify(source){try{return JSON.stringify(source)}catch{return JSON.stringify(decycleObject(source))}}__name(extend,"extend"),__name(stringify,"stringify"),__name(arrayIndexOf,"arrayIndexOf"),__name(objectApply,"objectApply"),__name(keys,"keys"),__name(values,"values"),__name(apply,"apply"),__name(map,"map"),__name(mapObject,"mapObject"),__name(filter,"filter"),__name(filterObject,"filterObject"),__name(flatten,"flatten"),__name(any,"any"),__name(collections_all,"collections_all"),__name(encodeParamsObject,"encodeParamsObject"),__name(buildQueryString,"buildQueryString"),__name(decycleObject,"decycleObject"),__name(safeJSONStringify,"safeJSONStringify");var defaults={VERSION:"8.0.1",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""};function getGenericURL(baseScheme,params,path){return baseScheme+(params.useTLS?"s":"")+"://"+(params.useTLS?params.hostTLS:params.hostNonTLS)+path}function getGenericPath(key,queryString){return"/app/"+key+("?protocol="+defaults.PROTOCOL+"&client=js&version="+defaults.VERSION+(queryString?"&"+queryString:""))}__name(getGenericURL,"getGenericURL"),__name(getGenericPath,"getGenericPath");var ws={getInitial:function(key,params){return getGenericURL("ws",params,(params.httpPath||"")+getGenericPath(key,"flash=false"))}},http={getInitial:function(key,params){return getGenericURL("http",params,(params.httpPath||"/pusher")+getGenericPath(key))}},callback_registry=function(){function CallbackRegistry(){this._callbacks={}}return __name(CallbackRegistry,"CallbackRegistry"),CallbackRegistry.prototype.get=function(name){return this._callbacks[prefix(name)]},CallbackRegistry.prototype.add=function(name,callback,context){var prefixedEventName=prefix(name);this._callbacks[prefixedEventName]=this._callbacks[prefixedEventName]||[],this._callbacks[prefixedEventName].push({fn:callback,context})},CallbackRegistry.prototype.remove=function(name,callback,context){if(name||callback||context){var names=name?[prefix(name)]:keys(this._callbacks);callback||context?this.removeCallback(names,callback,context):this.removeAllCallbacks(names)}else this._callbacks={}},CallbackRegistry.prototype.removeCallback=function(names,callback,context){apply(names,function(name){this._callbacks[name]=filter(this._callbacks[name]||[],function(binding){return callback&&callback!==binding.fn||context&&context!==binding.context}),0===this._callbacks[name].length&&delete this._callbacks[name]},this)},CallbackRegistry.prototype.removeAllCallbacks=function(names){apply(names,function(name){delete this._callbacks[name]},this)},CallbackRegistry}();function prefix(name){return"_"+name}__name(prefix,"prefix");var dispatcher=function(){function Dispatcher(failThrough){this.callbacks=new callback_registry,this.global_callbacks=[],this.failThrough=failThrough}return __name(Dispatcher,"Dispatcher"),Dispatcher.prototype.bind=function(eventName,callback,context){return this.callbacks.add(eventName,callback,context),this},Dispatcher.prototype.bind_global=function(callback){return this.global_callbacks.push(callback),this},Dispatcher.prototype.unbind=function(eventName,callback,context){return this.callbacks.remove(eventName,callback,context),this},Dispatcher.prototype.unbind_global=function(callback){return callback?(this.global_callbacks=filter(this.global_callbacks||[],function(c){return c!==callback}),this):(this.global_callbacks=[],this)},Dispatcher.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},Dispatcher.prototype.emit=function(eventName,data,metadata){for(var i=0;i<this.global_callbacks.length;i++)this.global_callbacks[i](eventName,data);var callbacks=this.callbacks.get(eventName),args=[];if(metadata?args.push(data,metadata):data&&args.push(data),callbacks&&callbacks.length>0)for(i=0;i<callbacks.length;i++)callbacks[i].fn.apply(callbacks[i].context||global,args);else this.failThrough&&this.failThrough(eventName,data);return this},Dispatcher}(),logger_Logger=function(){function Logger(){this.globalLog=function(message){global.console&&global.console.log&&global.console.log(message)}}return __name(Logger,"Logger"),Logger.prototype.debug=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];this.log(this.globalLog,args)},Logger.prototype.warn=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];this.log(this.globalLogWarn,args)},Logger.prototype.error=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];this.log(this.globalLogError,args)},Logger.prototype.globalLogWarn=function(message){global.console&&global.console.warn?global.console.warn(message):this.globalLog(message)},Logger.prototype.globalLogError=function(message){global.console&&global.console.error?global.console.error(message):this.globalLogWarn(message)},Logger.prototype.log=function(defaultLoggingFunction){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];var message=stringify.apply(this,arguments);if(core_pusher.log)core_pusher.log(message);else if(core_pusher.logToConsole){defaultLoggingFunction.bind(this)(message)}},Logger}(),logger=new logger_Logger,transport_connection_extends=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)b2.hasOwnProperty(p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),transport_connection=function(_super){function TransportConnection(hooks,name,priority,key,options){var _this=_super.call(this)||this;return _this.initialize=node_runtime.transportConnectionInitializer,_this.hooks=hooks,_this.name=name,_this.priority=priority,_this.key=key,_this.options=options,_this.state="new",_this.timeline=options.timeline,_this.activityTimeout=options.activityTimeout,_this.id=_this.timeline.generateUniqueID(),_this}return transport_connection_extends(TransportConnection,_super),__name(TransportConnection,"TransportConnection"),TransportConnection.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},TransportConnection.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},TransportConnection.prototype.connect=function(){var _this=this;if(this.socket||"initialized"!==this.state)return!1;var url=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(url,this.options)}catch(e){return util.defer(function(){_this.onError(e),_this.changeState("closed")}),!1}return this.bindListeners(),logger.debug("Connecting",{transport:this.name,url}),this.changeState("connecting"),!0},TransportConnection.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},TransportConnection.prototype.send=function(data){var _this=this;return"open"===this.state&&(util.defer(function(){_this.socket&&_this.socket.send(data)}),!0)},TransportConnection.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},TransportConnection.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},TransportConnection.prototype.onError=function(error){this.emit("error",{type:"WebSocketError",error}),this.timeline.error(this.buildTimelineMessage({error:error.toString()}))},TransportConnection.prototype.onClose=function(closeEvent){closeEvent?this.changeState("closed",{code:closeEvent.code,reason:closeEvent.reason,wasClean:closeEvent.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},TransportConnection.prototype.onMessage=function(message){this.emit("message",message)},TransportConnection.prototype.onActivity=function(){this.emit("activity")},TransportConnection.prototype.bindListeners=function(){var _this=this;this.socket.onopen=function(){_this.onOpen()},this.socket.onerror=function(error){_this.onError(error)},this.socket.onclose=function(closeEvent){_this.onClose(closeEvent)},this.socket.onmessage=function(message){_this.onMessage(message)},this.supportsPing()&&(this.socket.onactivity=function(){_this.onActivity()})},TransportConnection.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},TransportConnection.prototype.changeState=function(state2,params){this.state=state2,this.timeline.info(this.buildTimelineMessage({state:state2,params})),this.emit(state2,params)},TransportConnection.prototype.buildTimelineMessage=function(message){return extend({cid:this.id},message)},TransportConnection}(dispatcher),transports_transport=function(){function Transport(hooks){this.hooks=hooks}return __name(Transport,"Transport"),Transport.prototype.isSupported=function(environment){return this.hooks.isSupported(environment)},Transport.prototype.createConnection=function(name,priority,key,options){return new transport_connection(this.hooks,name,priority,key,options)},Transport}(),WSTransport=new transports_transport({urls:ws,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(node_runtime.getWebSocketAPI())},isSupported:function(){return Boolean(node_runtime.getWebSocketAPI())},getSocket:function(url){return node_runtime.createWebSocket(url)}}),httpConfiguration={urls:http,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},streamingConfiguration=extend({getSocket:function(url){return node_runtime.HTTPFactory.createStreamingSocket(url)}},httpConfiguration),pollingConfiguration=extend({getSocket:function(url){return node_runtime.HTTPFactory.createPollingSocket(url)}},httpConfiguration),xhrConfiguration={isSupported:function(){return node_runtime.isXHRSupported()}},transports={ws:WSTransport,xhr_streaming:new transports_transport(extend({},streamingConfiguration,xhrConfiguration)),xhr_polling:new transports_transport(extend({},pollingConfiguration,xhrConfiguration))},assistant_to_the_transport_manager=function(){function AssistantToTheTransportManager(manager,transport,options){this.manager=manager,this.transport=transport,this.minPingDelay=options.minPingDelay,this.maxPingDelay=options.maxPingDelay,this.pingDelay=void 0}return __name(AssistantToTheTransportManager,"AssistantToTheTransportManager"),AssistantToTheTransportManager.prototype.createConnection=function(name,priority,key,options){var _this=this;options=extend({},options,{activityTimeout:this.pingDelay});var connection=this.transport.createConnection(name,priority,key,options),openTimestamp=null,onOpen=__name(function(){connection.unbind("open",onOpen),connection.bind("closed",onClosed),openTimestamp=util.now()},"onOpen"),onClosed=__name(function(closeEvent){if(connection.unbind("closed",onClosed),1002===closeEvent.code||1003===closeEvent.code)_this.manager.reportDeath();else if(!closeEvent.wasClean&&openTimestamp){var lifespan=util.now()-openTimestamp;lifespan<2*_this.maxPingDelay&&(_this.manager.reportDeath(),_this.pingDelay=Math.max(lifespan/2,_this.minPingDelay))}},"onClosed");return connection.bind("open",onOpen),connection},AssistantToTheTransportManager.prototype.isSupported=function(environment){return this.manager.isAlive()&&this.transport.isSupported(environment)},AssistantToTheTransportManager}(),Protocol={decodeMessage:function(messageEvent){try{var messageData=JSON.parse(messageEvent.data),pusherEventData=messageData.data;if("string"==typeof pusherEventData)try{pusherEventData=JSON.parse(messageData.data)}catch{}var pusherEvent={event:messageData.event,channel:messageData.channel,data:pusherEventData};return messageData.user_id&&(pusherEvent.user_id=messageData.user_id),pusherEvent}catch(e){throw{type:"MessageParseError",error:e,data:messageEvent.data}}},encodeMessage:function(event){return JSON.stringify(event)},processHandshake:function(messageEvent){var message=Protocol.decodeMessage(messageEvent);if("pusher:connection_established"===message.event){if(!message.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:message.data.socket_id,activityTimeout:1e3*message.data.activity_timeout}}if("pusher:error"===message.event)return{action:this.getCloseAction(message.data),error:this.getCloseError(message.data)};throw"Invalid handshake"},getCloseAction:function(closeEvent){return closeEvent.code<4e3?closeEvent.code>=1002&&closeEvent.code<=1004?"backoff":null:4e3===closeEvent.code?"tls_only":closeEvent.code<4100?"refused":closeEvent.code<4200?"backoff":closeEvent.code<4300?"retry":"refused"},getCloseError:function(closeEvent){return 1e3!==closeEvent.code&&1001!==closeEvent.code?{type:"PusherError",data:{code:closeEvent.code,message:closeEvent.reason||closeEvent.message}}:null}},protocol=Protocol,connection_extends=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)b2.hasOwnProperty(p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),connection_connection=function(_super){function Connection(id,transport){var _this=_super.call(this)||this;return _this.id=id,_this.transport=transport,_this.activityTimeout=transport.activityTimeout,_this.bindListeners(),_this}return connection_extends(Connection,_super),__name(Connection,"Connection"),Connection.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},Connection.prototype.send=function(data){return this.transport.send(data)},Connection.prototype.send_event=function(name,data,channel){var event={event:name,data};return channel&&(event.channel=channel),logger.debug("Event sent",event),this.send(protocol.encodeMessage(event))},Connection.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},Connection.prototype.close=function(){this.transport.close()},Connection.prototype.bindListeners=function(){var _this=this,listeners={message:function(messageEvent){var pusherEvent;try{pusherEvent=protocol.decodeMessage(messageEvent)}catch(e){_this.emit("error",{type:"MessageParseError",error:e,data:messageEvent.data})}if(void 0!==pusherEvent){switch(logger.debug("Event recd",pusherEvent),pusherEvent.event){case"pusher:error":_this.emit("error",{type:"PusherError",data:pusherEvent.data});break;case"pusher:ping":_this.emit("ping");break;case"pusher:pong":_this.emit("pong")}_this.emit("message",pusherEvent)}},activity:function(){_this.emit("activity")},error:function(error){_this.emit("error",error)},closed:function(closeEvent){unbindListeners(),closeEvent&&closeEvent.code&&_this.handleCloseEvent(closeEvent),_this.transport=null,_this.emit("closed")}},unbindListeners=__name(function(){objectApply(listeners,function(listener,event){_this.transport.unbind(event,listener)})},"unbindListeners");objectApply(listeners,function(listener,event){_this.transport.bind(event,listener)})},Connection.prototype.handleCloseEvent=function(closeEvent){var action=protocol.getCloseAction(closeEvent),error=protocol.getCloseError(closeEvent);error&&this.emit("error",error),action&&this.emit(action,{action,error})},Connection}(dispatcher),connection_handshake=function(){function Handshake(transport,callback){this.transport=transport,this.callback=callback,this.bindListeners()}return __name(Handshake,"Handshake"),Handshake.prototype.close=function(){this.unbindListeners(),this.transport.close()},Handshake.prototype.bindListeners=function(){var _this=this;this.onMessage=function(m){var result;_this.unbindListeners();try{result=protocol.processHandshake(m)}catch(e){return _this.finish("error",{error:e}),void _this.transport.close()}"connected"===result.action?_this.finish("connected",{connection:new connection_connection(result.id,_this.transport),activityTimeout:result.activityTimeout}):(_this.finish(result.action,{error:result.error}),_this.transport.close())},this.onClosed=function(closeEvent){_this.unbindListeners();var action=protocol.getCloseAction(closeEvent)||"backoff",error=protocol.getCloseError(closeEvent);_this.finish(action,{error})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},Handshake.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},Handshake.prototype.finish=function(action,params){this.callback(extend({transport:this.transport,action},params))},Handshake}(),timeline_sender=function(){function TimelineSender(timeline,options){this.timeline=timeline,this.options=options||{}}return __name(TimelineSender,"TimelineSender"),TimelineSender.prototype.send=function(useTLS,callback){this.timeline.isEmpty()||this.timeline.send(node_runtime.TimelineTransport.getAgent(this,useTLS),callback)},TimelineSender}(),errors_extends=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)b2.hasOwnProperty(p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),BadEventName=function(_super){function BadEventName2(msg){var _newTarget=this.constructor,_this=_super.call(this,msg)||this;return Object.setPrototypeOf(_this,_newTarget.prototype),_this}return errors_extends(BadEventName2,_super),__name(BadEventName2,"BadEventName"),BadEventName2}(Error),BadChannelName=function(_super){function BadChannelName2(msg){var _newTarget=this.constructor,_this=_super.call(this,msg)||this;return Object.setPrototypeOf(_this,_newTarget.prototype),_this}return errors_extends(BadChannelName2,_super),__name(BadChannelName2,"BadChannelName"),BadChannelName2}(Error),TransportPriorityTooLow=(function(_super){function RequestTimedOut2(msg){var _newTarget=this.constructor,_this=_super.call(this,msg)||this;return Object.setPrototypeOf(_this,_newTarget.prototype),_this}errors_extends(RequestTimedOut2,_super),__name(RequestTimedOut2,"RequestTimedOut")}(Error),function(_super){function TransportPriorityTooLow2(msg){var _newTarget=this.constructor,_this=_super.call(this,msg)||this;return Object.setPrototypeOf(_this,_newTarget.prototype),_this}return errors_extends(TransportPriorityTooLow2,_super),__name(TransportPriorityTooLow2,"TransportPriorityTooLow"),TransportPriorityTooLow2}(Error)),TransportClosed=function(_super){function TransportClosed2(msg){var _newTarget=this.constructor,_this=_super.call(this,msg)||this;return Object.setPrototypeOf(_this,_newTarget.prototype),_this}return errors_extends(TransportClosed2,_super),__name(TransportClosed2,"TransportClosed"),TransportClosed2}(Error),UnsupportedFeature=function(_super){function UnsupportedFeature2(msg){var _newTarget=this.constructor,_this=_super.call(this,msg)||this;return Object.setPrototypeOf(_this,_newTarget.prototype),_this}return errors_extends(UnsupportedFeature2,_super),__name(UnsupportedFeature2,"UnsupportedFeature"),UnsupportedFeature2}(Error),UnsupportedTransport=function(_super){function UnsupportedTransport2(msg){var _newTarget=this.constructor,_this=_super.call(this,msg)||this;return Object.setPrototypeOf(_this,_newTarget.prototype),_this}return errors_extends(UnsupportedTransport2,_super),__name(UnsupportedTransport2,"UnsupportedTransport"),UnsupportedTransport2}(Error),UnsupportedStrategy=function(_super){function UnsupportedStrategy2(msg){var _newTarget=this.constructor,_this=_super.call(this,msg)||this;return Object.setPrototypeOf(_this,_newTarget.prototype),_this}return errors_extends(UnsupportedStrategy2,_super),__name(UnsupportedStrategy2,"UnsupportedStrategy"),UnsupportedStrategy2}(Error),HTTPAuthError=function(_super){function HTTPAuthError2(status,msg){var _newTarget=this.constructor,_this=_super.call(this,msg)||this;return _this.status=status,Object.setPrototypeOf(_this,_newTarget.prototype),_this}return errors_extends(HTTPAuthError2,_super),__name(HTTPAuthError2,"HTTPAuthError"),HTTPAuthError2}(Error),urlStore={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}},url_store={buildLogSuffix:__name(function(key){var url,urlObj=urlStore.urls[key];return urlObj?(urlObj.fullUrl?url=urlObj.fullUrl:urlObj.path&&(url=urlStore.baseUrl+urlObj.path),url?"See: "+url:""):""},"buildLogSuffix")},channel_extends=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)b2.hasOwnProperty(p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),channels_channel=function(_super){function Channel(name,pusher){var _this=_super.call(this,function(event,data){logger.debug("No callbacks on "+name+" for "+event)})||this;return _this.name=name,_this.pusher=pusher,_this.subscribed=!1,_this.subscriptionPending=!1,_this.subscriptionCancelled=!1,_this}return channel_extends(Channel,_super),__name(Channel,"Channel"),Channel.prototype.authorize=function(socketId,callback){return callback(null,{auth:""})},Channel.prototype.trigger=function(event,data){if(0!==event.indexOf("client-"))throw new BadEventName("Event '"+event+"' does not start with 'client-'");if(!this.subscribed){var suffix=url_store.buildLogSuffix("triggeringClientEvents");logger.warn("Client event triggered before channel 'subscription_succeeded' event . "+suffix)}return this.pusher.send_event(event,data,this.name)},Channel.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},Channel.prototype.handleEvent=function(event){var eventName=event.event,data=event.data;if("pusher_internal:subscription_succeeded"===eventName)this.handleSubscriptionSucceededEvent(event);else if("pusher_internal:subscription_count"===eventName)this.handleSubscriptionCountEvent(event);else if(0!==eventName.indexOf("pusher_internal:")){this.emit(eventName,data,{})}},Channel.prototype.handleSubscriptionSucceededEvent=function(event){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",event.data)},Channel.prototype.handleSubscriptionCountEvent=function(event){event.data.subscription_count&&(this.subscriptionCount=event.data.subscription_count),this.emit("pusher:subscription_count",event.data)},Channel.prototype.subscribe=function(){var _this=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(error,data){error?(_this.subscriptionPending=!1,logger.error(error.toString()),_this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:error.message},error instanceof HTTPAuthError?{status:error.status}:{}))):_this.pusher.send_event("pusher:subscribe",{auth:data.auth,channel_data:data.channel_data,channel:_this.name})}))},Channel.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},Channel.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},Channel.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},Channel}(dispatcher),private_channel_extends=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)b2.hasOwnProperty(p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),PrivateChannel=function(_super){function PrivateChannel2(){return null!==_super&&_super.apply(this,arguments)||this}return private_channel_extends(PrivateChannel2,_super),__name(PrivateChannel2,"PrivateChannel"),PrivateChannel2.prototype.authorize=function(socketId,callback){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId},callback)},PrivateChannel2}(channels_channel),private_channel=PrivateChannel,members=function(){function Members(){this.reset()}return __name(Members,"Members"),Members.prototype.get=function(id){return Object.prototype.hasOwnProperty.call(this.members,id)?{id,info:this.members[id]}:null},Members.prototype.each=function(callback){var _this=this;objectApply(this.members,function(member,id){callback(_this.get(id))})},Members.prototype.setMyID=function(id){this.myID=id},Members.prototype.onSubscription=function(subscriptionData){this.members=subscriptionData.presence.hash,this.count=subscriptionData.presence.count,this.me=this.get(this.myID)},Members.prototype.addMember=function(memberData){return null===this.get(memberData.user_id)&&this.count++,this.members[memberData.user_id]=memberData.user_info,this.get(memberData.user_id)},Members.prototype.removeMember=function(memberData){var member=this.get(memberData.user_id);return member&&(delete this.members[memberData.user_id],this.count--),member},Members.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},Members}(),presence_channel_extends=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)b2.hasOwnProperty(p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},presence_channel=function(_super){function PresenceChannel(name,pusher){var _this=_super.call(this,name,pusher)||this;return _this.members=new members,_this}return presence_channel_extends(PresenceChannel,_super),__name(PresenceChannel,"PresenceChannel"),PresenceChannel.prototype.authorize=function(socketId,callback){var _this=this;_super.prototype.authorize.call(this,socketId,function(error,authData){return function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return __name(adopt,"adopt"),new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}__name(fulfilled,"fulfilled"),__name(rejected,"rejected"),__name(step,"step"),step((generator=generator.apply(thisArg,_arguments||[])).next())})}(_this,void 0,void 0,function(){var channelData,suffix;return __generator(this,function(_a){switch(_a.label){case 0:return error?[3,3]:null==authData.channel_data?[3,1]:(channelData=JSON.parse(authData.channel_data),this.members.setMyID(channelData.user_id),[3,3]);case 1:return[4,this.pusher.user.signinDonePromise];case 2:if(_a.sent(),null==this.pusher.user.user_data)return suffix=url_store.buildLogSuffix("authorizationEndpoint"),logger.error("Invalid auth response for channel '"+this.name+"', expected 'channel_data' field. "+suffix+", or the user should be signed in."),callback("Invalid auth response"),[2];this.members.setMyID(this.pusher.user.user_data.id),_a.label=3;case 3:return callback(error,authData),[2]}})})})},PresenceChannel.prototype.handleEvent=function(event){var eventName=event.event;if(0===eventName.indexOf("pusher_internal:"))this.handleInternalEvent(event);else{var data=event.data,metadata={};event.user_id&&(metadata.user_id=event.user_id),this.emit(eventName,data,metadata)}},PresenceChannel.prototype.handleInternalEvent=function(event){var eventName=event.event,data=event.data;switch(eventName){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(event);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(event);break;case"pusher_internal:member_added":var addedMember=this.members.addMember(data);this.emit("pusher:member_added",addedMember);break;case"pusher_internal:member_removed":var removedMember=this.members.removeMember(data);removedMember&&this.emit("pusher:member_removed",removedMember)}},PresenceChannel.prototype.handleSubscriptionSucceededEvent=function(event){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(event.data),this.emit("pusher:subscription_succeeded",this.members))},PresenceChannel.prototype.disconnect=function(){this.members.reset(),_super.prototype.disconnect.call(this)},PresenceChannel}(private_channel),utf8=__nested_webpack_require_208289__(17),base64=__nested_webpack_require_208289__(8),encrypted_channel_extends=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)b2.hasOwnProperty(p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),encrypted_channel=function(_super){function EncryptedChannel(name,pusher,nacl){var _this=_super.call(this,name,pusher)||this;return _this.key=null,_this.nacl=nacl,_this}return encrypted_channel_extends(EncryptedChannel,_super),__name(EncryptedChannel,"EncryptedChannel"),EncryptedChannel.prototype.authorize=function(socketId,callback){var _this=this;_super.prototype.authorize.call(this,socketId,function(error,authData){if(error)callback(error,authData);else{var sharedSecret=authData.shared_secret;sharedSecret?(_this.key=Object(base64.decode)(sharedSecret),delete authData.shared_secret,callback(null,authData)):callback(new Error("No shared_secret key in auth payload for encrypted channel: "+_this.name),null)}})},EncryptedChannel.prototype.trigger=function(event,data){throw new UnsupportedFeature("Client events are not currently supported for encrypted channels")},EncryptedChannel.prototype.handleEvent=function(event){var eventName=event.event,data=event.data;0!==eventName.indexOf("pusher_internal:")&&0!==eventName.indexOf("pusher:")?this.handleEncryptedEvent(eventName,data):_super.prototype.handleEvent.call(this,event)},EncryptedChannel.prototype.handleEncryptedEvent=function(event,data){var _this=this;if(this.key)if(data.ciphertext&&data.nonce){var cipherText=Object(base64.decode)(data.ciphertext);if(cipherText.length<this.nacl.secretbox.overheadLength)logger.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+cipherText.length);else{var nonce=Object(base64.decode)(data.nonce);if(nonce.length<this.nacl.secretbox.nonceLength)logger.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+nonce.length);else{var bytes=this.nacl.secretbox.open(cipherText,nonce,this.key);if(null===bytes)return logger.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),void this.authorize(this.pusher.connection.socket_id,function(error,authData){error?logger.error("Failed to make a request to the authEndpoint: "+authData+". Unable to fetch new key, so dropping encrypted event"):null!==(bytes=_this.nacl.secretbox.open(cipherText,nonce,_this.key))?_this.emit(event,_this.getDataToEmit(bytes)):logger.error("Failed to decrypt event with new key. Dropping encrypted event")});this.emit(event,this.getDataToEmit(bytes))}}}else logger.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+data);else logger.debug("Received encrypted event before key has been retrieved from the authEndpoint")},EncryptedChannel.prototype.getDataToEmit=function(bytes){var raw=Object(utf8.decode)(bytes);try{return JSON.parse(raw)}catch{return raw}},EncryptedChannel}(private_channel),connection_manager_extends=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)b2.hasOwnProperty(p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),connection_manager=function(_super){function ConnectionManager(key,options){var _this=_super.call(this)||this;_this.state="initialized",_this.connection=null,_this.key=key,_this.options=options,_this.timeline=_this.options.timeline,_this.usingTLS=_this.options.useTLS,_this.errorCallbacks=_this.buildErrorCallbacks(),_this.connectionCallbacks=_this.buildConnectionCallbacks(_this.errorCallbacks),_this.handshakeCallbacks=_this.buildHandshakeCallbacks(_this.errorCallbacks);var Network=node_runtime.getNetwork();return Network.bind("online",function(){_this.timeline.info({netinfo:"online"}),("connecting"===_this.state||"unavailable"===_this.state)&&_this.retryIn(0)}),Network.bind("offline",function(){_this.timeline.info({netinfo:"offline"}),_this.connection&&_this.sendActivityCheck()}),_this.updateStrategy(),_this}return connection_manager_extends(ConnectionManager,_super),__name(ConnectionManager,"ConnectionManager"),ConnectionManager.prototype.connect=function(){if(!this.connection&&!this.runner){if(!this.strategy.isSupported())return void this.updateState("failed");this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},ConnectionManager.prototype.send=function(data){return!!this.connection&&this.connection.send(data)},ConnectionManager.prototype.send_event=function(name,data,channel){return!!this.connection&&this.connection.send_event(name,data,channel)},ConnectionManager.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},ConnectionManager.prototype.isUsingTLS=function(){return this.usingTLS},ConnectionManager.prototype.startConnecting=function(){var _this=this,callback=__name(function(error,handshake){error?_this.runner=_this.strategy.connect(0,callback):"error"===handshake.action?(_this.emit("error",{type:"HandshakeError",error:handshake.error}),_this.timeline.error({handshakeError:handshake.error})):(_this.abortConnecting(),_this.handshakeCallbacks[handshake.action](handshake))},"callback");this.runner=this.strategy.connect(0,callback)},ConnectionManager.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},ConnectionManager.prototype.disconnectInternally=function(){(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection)&&this.abandonConnection().close()},ConnectionManager.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},ConnectionManager.prototype.retryIn=function(delay){var _this=this;this.timeline.info({action:"retry",delay}),delay>0&&this.emit("connecting_in",Math.round(delay/1e3)),this.retryTimer=new OneOffTimer(delay||0,function(){_this.disconnectInternally(),_this.connect()})},ConnectionManager.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},ConnectionManager.prototype.setUnavailableTimer=function(){var _this=this;this.unavailableTimer=new OneOffTimer(this.options.unavailableTimeout,function(){_this.updateState("unavailable")})},ConnectionManager.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},ConnectionManager.prototype.sendActivityCheck=function(){var _this=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new OneOffTimer(this.options.pongTimeout,function(){_this.timeline.error({pong_timed_out:_this.options.pongTimeout}),_this.retryIn(0)})},ConnectionManager.prototype.resetActivityCheck=function(){var _this=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new OneOffTimer(this.activityTimeout,function(){_this.sendActivityCheck()}))},ConnectionManager.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},ConnectionManager.prototype.buildConnectionCallbacks=function(errorCallbacks){var _this=this;return extend({},errorCallbacks,{message:function(message){_this.resetActivityCheck(),_this.emit("message",message)},ping:function(){_this.send_event("pusher:pong",{})},activity:function(){_this.resetActivityCheck()},error:function(error){_this.emit("error",error)},closed:function(){_this.abandonConnection(),_this.shouldRetry()&&_this.retryIn(1e3)}})},ConnectionManager.prototype.buildHandshakeCallbacks=function(errorCallbacks){var _this=this;return extend({},errorCallbacks,{connected:function(handshake){_this.activityTimeout=Math.min(_this.options.activityTimeout,handshake.activityTimeout,handshake.connection.activityTimeout||1/0),_this.clearUnavailableTimer(),_this.setConnection(handshake.connection),_this.socket_id=_this.connection.id,_this.updateState("connected",{socket_id:_this.socket_id})}})},ConnectionManager.prototype.buildErrorCallbacks=function(){var _this=this,withErrorEmitted=__name(function(callback){return function(result){result.error&&_this.emit("error",{type:"WebSocketError",error:result.error}),callback(result)}},"withErrorEmitted");return{tls_only:withErrorEmitted(function(){_this.usingTLS=!0,_this.updateStrategy(),_this.retryIn(0)}),refused:withErrorEmitted(function(){_this.disconnect()}),backoff:withErrorEmitted(function(){_this.retryIn(1e3)}),retry:withErrorEmitted(function(){_this.retryIn(0)})}},ConnectionManager.prototype.setConnection=function(connection){for(var event in this.connection=connection,this.connectionCallbacks)this.connection.bind(event,this.connectionCallbacks[event]);this.resetActivityCheck()},ConnectionManager.prototype.abandonConnection=function(){if(this.connection){for(var event in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(event,this.connectionCallbacks[event]);var connection=this.connection;return this.connection=null,connection}},ConnectionManager.prototype.updateState=function(newState,data){var previousState=this.state;if(this.state=newState,previousState!==newState){var newStateDescription=newState;"connected"===newStateDescription&&(newStateDescription+=" with new socket ID "+data.socket_id),logger.debug("State changed",previousState+" -> "+newStateDescription),this.timeline.info({state:newState,params:data}),this.emit("state_change",{previous:previousState,current:newState}),this.emit(newState,data)}},ConnectionManager.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},ConnectionManager}(dispatcher),channels=function(){function Channels(){this.channels={}}return __name(Channels,"Channels"),Channels.prototype.add=function(name,pusher){return this.channels[name]||(this.channels[name]=createChannel(name,pusher)),this.channels[name]},Channels.prototype.all=function(){return values(this.channels)},Channels.prototype.find=function(name){return this.channels[name]},Channels.prototype.remove=function(name){var channel=this.channels[name];return delete this.channels[name],channel},Channels.prototype.disconnect=function(){objectApply(this.channels,function(channel){channel.disconnect()})},Channels}();function createChannel(name,pusher){if(0===name.indexOf("private-encrypted-")){if(pusher.config.nacl)return factory.createEncryptedChannel(name,pusher,pusher.config.nacl);var suffix=url_store.buildLogSuffix("encryptedChannelSupport");throw new UnsupportedFeature("Tried to subscribe to a private-encrypted- channel but no nacl implementation available. "+suffix)}if(0===name.indexOf("private-"))return factory.createPrivateChannel(name,pusher);if(0===name.indexOf("presence-"))return factory.createPresenceChannel(name,pusher);if(0===name.indexOf("#"))throw new BadChannelName('Cannot create a channel with name "'+name+'".');return factory.createChannel(name,pusher)}__name(createChannel,"createChannel");var factory={createChannels:function(){return new channels},createConnectionManager:function(key,options){return new connection_manager(key,options)},createChannel:function(name,pusher){return new channels_channel(name,pusher)},createPrivateChannel:function(name,pusher){return new private_channel(name,pusher)},createPresenceChannel:function(name,pusher){return new presence_channel(name,pusher)},createEncryptedChannel:function(name,pusher,nacl){return new encrypted_channel(name,pusher,nacl)},createTimelineSender:function(timeline,options){return new timeline_sender(timeline,options)},createHandshake:function(transport,callback){return new connection_handshake(transport,callback)},createAssistantToTheTransportManager:function(manager,transport,options){return new assistant_to_the_transport_manager(manager,transport,options)}},transport_manager=function(){function TransportManager(options){this.options=options||{},this.livesLeft=this.options.lives||1/0}return __name(TransportManager,"TransportManager"),TransportManager.prototype.getAssistant=function(transport){return factory.createAssistantToTheTransportManager(this,transport,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},TransportManager.prototype.isAlive=function(){return this.livesLeft>0},TransportManager.prototype.reportDeath=function(){this.livesLeft-=1},TransportManager}(),sequential_strategy=function(){function SequentialStrategy(strategies,options){this.strategies=strategies,this.loop=Boolean(options.loop),this.failFast=Boolean(options.failFast),this.timeout=options.timeout,this.timeoutLimit=options.timeoutLimit}return __name(SequentialStrategy,"SequentialStrategy"),SequentialStrategy.prototype.isSupported=function(){return any(this.strategies,util.method("isSupported"))},SequentialStrategy.prototype.connect=function(minPriority,callback){var _this=this,strategies=this.strategies,current=0,timeout=this.timeout,runner=null,tryNextStrategy=__name(function(error,handshake){handshake?callback(null,handshake):(current+=1,_this.loop&&(current%=strategies.length),current<strategies.length?(timeout&&(timeout*=2,_this.timeoutLimit&&(timeout=Math.min(timeout,_this.timeoutLimit))),runner=_this.tryStrategy(strategies[current],minPriority,{timeout,failFast:_this.failFast},tryNextStrategy)):callback(!0))},"tryNextStrategy");return runner=this.tryStrategy(strategies[current],minPriority,{timeout,failFast:this.failFast},tryNextStrategy),{abort:function(){runner.abort()},forceMinPriority:function(p){minPriority=p,runner&&runner.forceMinPriority(p)}}},SequentialStrategy.prototype.tryStrategy=function(strategy,minPriority,options,callback){var timer=null,runner=null;return options.timeout>0&&(timer=new OneOffTimer(options.timeout,function(){runner.abort(),callback(!0)})),runner=strategy.connect(minPriority,function(error,handshake){error&&timer&&timer.isRunning()&&!options.failFast||(timer&&timer.ensureAborted(),callback(error,handshake))}),{abort:function(){timer&&timer.ensureAborted(),runner.abort()},forceMinPriority:function(p){runner.forceMinPriority(p)}}},SequentialStrategy}(),best_connected_ever_strategy=function(){function BestConnectedEverStrategy(strategies){this.strategies=strategies}return __name(BestConnectedEverStrategy,"BestConnectedEverStrategy"),BestConnectedEverStrategy.prototype.isSupported=function(){return any(this.strategies,util.method("isSupported"))},BestConnectedEverStrategy.prototype.connect=function(minPriority,callback){return connect(this.strategies,minPriority,function(i,runners){return function(error,handshake){runners[i].error=error,error?allRunnersFailed(runners)&&callback(!0):(apply(runners,function(runner){runner.forceMinPriority(handshake.transport.priority)}),callback(null,handshake))}})},BestConnectedEverStrategy}();function connect(strategies,minPriority,callbackBuilder){var runners=map(strategies,function(strategy,i,_,rs){return strategy.connect(minPriority,callbackBuilder(i,rs))});return{abort:function(){apply(runners,abortRunner)},forceMinPriority:function(p){apply(runners,function(runner){runner.forceMinPriority(p)})}}}function allRunnersFailed(runners){return collections_all(runners,function(runner){return Boolean(runner.error)})}function abortRunner(runner){!runner.error&&!runner.aborted&&(runner.abort(),runner.aborted=!0)}__name(connect,"connect"),__name(allRunnersFailed,"allRunnersFailed"),__name(abortRunner,"abortRunner");var cached_strategy=function(){function CachedStrategy(strategy,transports2,options){this.strategy=strategy,this.transports=transports2,this.ttl=options.ttl||18e5,this.usingTLS=options.useTLS,this.timeline=options.timeline}return __name(CachedStrategy,"CachedStrategy"),CachedStrategy.prototype.isSupported=function(){return this.strategy.isSupported()},CachedStrategy.prototype.connect=function(minPriority,callback){var usingTLS=this.usingTLS,info=fetchTransportCache(usingTLS),strategies=[this.strategy];if(info&&info.timestamp+this.ttl>=util.now()){var transport=this.transports[info.transport];transport&&(this.timeline.info({cached:!0,transport:info.transport,latency:info.latency}),strategies.push(new sequential_strategy([transport],{timeout:2*info.latency+1e3,failFast:!0})))}var startTimestamp=util.now(),runner=strategies.pop().connect(minPriority,__name(function cb(error,handshake){error?(flushTransportCache(usingTLS),strategies.length>0?(startTimestamp=util.now(),runner=strategies.pop().connect(minPriority,cb)):callback(error)):(storeTransportCache(usingTLS,handshake.transport.name,util.now()-startTimestamp),callback(null,handshake))},"cb"));return{abort:function(){runner.abort()},forceMinPriority:function(p){minPriority=p,runner&&runner.forceMinPriority(p)}}},CachedStrategy}();function getTransportCacheKey(usingTLS){return"pusherTransport"+(usingTLS?"TLS":"NonTLS")}function fetchTransportCache(usingTLS){var storage=node_runtime.getLocalStorage();if(storage)try{var serializedCache=storage[getTransportCacheKey(usingTLS)];if(serializedCache)return JSON.parse(serializedCache)}catch{flushTransportCache(usingTLS)}return null}function storeTransportCache(usingTLS,transport,latency){var storage=node_runtime.getLocalStorage();if(storage)try{storage[getTransportCacheKey(usingTLS)]=safeJSONStringify({timestamp:util.now(),transport,latency})}catch{}}function flushTransportCache(usingTLS){var storage=node_runtime.getLocalStorage();if(storage)try{delete storage[getTransportCacheKey(usingTLS)]}catch{}}__name(getTransportCacheKey,"getTransportCacheKey"),__name(fetchTransportCache,"fetchTransportCache"),__name(storeTransportCache,"storeTransportCache"),__name(flushTransportCache,"flushTransportCache");var delayed_strategy=function(){function DelayedStrategy(strategy,_a){var number=_a.delay;this.strategy=strategy,this.options={delay:number}}return __name(DelayedStrategy,"DelayedStrategy"),DelayedStrategy.prototype.isSupported=function(){return this.strategy.isSupported()},DelayedStrategy.prototype.connect=function(minPriority,callback){var runner,strategy=this.strategy,timer=new OneOffTimer(this.options.delay,function(){runner=strategy.connect(minPriority,callback)});return{abort:function(){timer.ensureAborted(),runner&&runner.abort()},forceMinPriority:function(p){minPriority=p,runner&&runner.forceMinPriority(p)}}},DelayedStrategy}(),if_strategy=function(){function IfStrategy2(test,trueBranch,falseBranch){this.test=test,this.trueBranch=trueBranch,this.falseBranch=falseBranch}return __name(IfStrategy2,"IfStrategy"),IfStrategy2.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},IfStrategy2.prototype.connect=function(minPriority,callback){return(this.test()?this.trueBranch:this.falseBranch).connect(minPriority,callback)},IfStrategy2}(),first_connected_strategy=function(){function FirstConnectedStrategy2(strategy){this.strategy=strategy}return __name(FirstConnectedStrategy2,"FirstConnectedStrategy"),FirstConnectedStrategy2.prototype.isSupported=function(){return this.strategy.isSupported()},FirstConnectedStrategy2.prototype.connect=function(minPriority,callback){var runner=this.strategy.connect(minPriority,function(error,handshake){handshake&&runner.abort(),callback(error,handshake)});return runner},FirstConnectedStrategy2}();function testSupportsStrategy(strategy){return function(){return strategy.isSupported()}}__name(testSupportsStrategy,"testSupportsStrategy");var State,State2,default_strategy=__name(function(config,baseOptions,defineTransport){var definedTransports={};function defineTransportStrategy(name,type,priority,options,manager){var transport=defineTransport(config,name,type,priority,options,manager);return definedTransports[name]=transport,transport}__name(defineTransportStrategy,"defineTransportStrategy");var wsStrategy,ws_options=Object.assign({},baseOptions,{hostNonTLS:config.wsHost+":"+config.wsPort,hostTLS:config.wsHost+":"+config.wssPort,httpPath:config.wsPath}),wss_options=extend({},ws_options,{useTLS:!0}),http_options=Object.assign({},baseOptions,{hostNonTLS:config.httpHost+":"+config.httpPort,hostTLS:config.httpHost+":"+config.httpsPort,httpPath:config.httpPath}),timeouts={loop:!0,timeout:15e3,timeoutLimit:6e4},ws_manager=new transport_manager({lives:2,minPingDelay:1e4,maxPingDelay:config.activityTimeout}),streaming_manager=new transport_manager({lives:2,minPingDelay:1e4,maxPingDelay:config.activityTimeout}),ws_transport=defineTransportStrategy("ws","ws",3,ws_options,ws_manager),wss_transport=defineTransportStrategy("wss","ws",3,wss_options,ws_manager),xhr_streaming_transport=defineTransportStrategy("xhr_streaming","xhr_streaming",1,http_options,streaming_manager),xhr_polling_transport=defineTransportStrategy("xhr_polling","xhr_polling",1,http_options),ws_loop=new sequential_strategy([ws_transport],timeouts),wss_loop=new sequential_strategy([wss_transport],timeouts),streaming_loop=new sequential_strategy([xhr_streaming_transport],timeouts),polling_loop=new sequential_strategy([xhr_polling_transport],timeouts),http_loop=new sequential_strategy([new if_strategy(testSupportsStrategy(streaming_loop),new best_connected_ever_strategy([streaming_loop,new delayed_strategy(polling_loop,{delay:4e3})]),polling_loop)],timeouts);return wsStrategy=baseOptions.useTLS?new best_connected_ever_strategy([ws_loop,new delayed_strategy(http_loop,{delay:2e3})]):new best_connected_ever_strategy([ws_loop,new delayed_strategy(wss_loop,{delay:2e3}),new delayed_strategy(http_loop,{delay:5e3})]),new cached_strategy(new first_connected_strategy(new if_strategy(testSupportsStrategy(ws_transport),wsStrategy,http_loop)),definedTransports,{ttl:18e5,timeline:baseOptions.timeline,useTLS:baseOptions.useTLS})},"getDefaultStrategy"),transport_connection_initializer=__name(function(){this.timeline.info(this.buildTimelineMessage({transport:this.name+(this.options.useTLS?"s":"")})),this.hooks.isInitialized()?this.changeState("initialized"):this.onClose()},"transport_connection_initializer"),http_request_extends=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)b2.hasOwnProperty(p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),http_request=function(_super){function HTTPRequest(hooks,method,url){var _this=_super.call(this)||this;return _this.hooks=hooks,_this.method=method,_this.url=url,_this}return http_request_extends(HTTPRequest,_super),__name(HTTPRequest,"HTTPRequest"),HTTPRequest.prototype.start=function(payload){var _this=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){_this.close()},node_runtime.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(payload)},HTTPRequest.prototype.close=function(){this.unloader&&(node_runtime.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},HTTPRequest.prototype.onChunk=function(status,data){for(;;){var chunk=this.advanceBuffer(data);if(!chunk)break;this.emit("chunk",{status,data:chunk})}this.isBufferTooLong(data)&&this.emit("buffer_too_long")},HTTPRequest.prototype.advanceBuffer=function(buffer){var unreadData=buffer.slice(this.position),endOfLinePosition=unreadData.indexOf("\n");return-1!==endOfLinePosition?(this.position+=endOfLinePosition+1,unreadData.slice(0,endOfLinePosition)):null},HTTPRequest.prototype.isBufferTooLong=function(buffer){return this.position===buffer.length&&buffer.length>262144},HTTPRequest}(dispatcher);(State2=State||(State={}))[State2.CONNECTING=0]="CONNECTING",State2[State2.OPEN=1]="OPEN",State2[State2.CLOSED=3]="CLOSED";var state=State,autoIncrement=1,http_socket_HTTPSocket=function(){function HTTPSocket(hooks,url){this.hooks=hooks,this.session=randomNumber(1e3)+"/"+randomString(8),this.location=getLocation(url),this.readyState=state.CONNECTING,this.openStream()}return __name(HTTPSocket,"HTTPSocket"),HTTPSocket.prototype.send=function(payload){return this.sendRaw(JSON.stringify([payload]))},HTTPSocket.prototype.ping=function(){this.hooks.sendHeartbeat(this)},HTTPSocket.prototype.close=function(code,reason){this.onClose(code,reason,!0)},HTTPSocket.prototype.sendRaw=function(payload){if(this.readyState!==state.OPEN)return!1;try{return node_runtime.createSocketRequest("POST",getUniqueURL(getSendURL(this.location,this.session))).start(payload),!0}catch{return!1}},HTTPSocket.prototype.reconnect=function(){this.closeStream(),this.openStream()},HTTPSocket.prototype.onClose=function(code,reason,wasClean){this.closeStream(),this.readyState=state.CLOSED,this.onclose&&this.onclose({code,reason,wasClean})},HTTPSocket.prototype.onChunk=function(chunk){var payload;if(200===chunk.status)switch(this.readyState===state.OPEN&&this.onActivity(),chunk.data.slice(0,1)){case"o":payload=JSON.parse(chunk.data.slice(1)||"{}"),this.onOpen(payload);break;case"a":payload=JSON.parse(chunk.data.slice(1)||"[]");for(var i=0;i<payload.length;i++)this.onEvent(payload[i]);break;case"m":payload=JSON.parse(chunk.data.slice(1)||"null"),this.onEvent(payload);break;case"h":this.hooks.onHeartbeat(this);break;case"c":payload=JSON.parse(chunk.data.slice(1)||"[]"),this.onClose(payload[0],payload[1],!0)}},HTTPSocket.prototype.onOpen=function(options){this.readyState===state.CONNECTING?(options&&options.hostname&&(this.location.base=replaceHost(this.location.base,options.hostname)),this.readyState=state.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},HTTPSocket.prototype.onEvent=function(event){this.readyState===state.OPEN&&this.onmessage&&this.onmessage({data:event})},HTTPSocket.prototype.onActivity=function(){this.onactivity&&this.onactivity()},HTTPSocket.prototype.onError=function(error){this.onerror&&this.onerror(error)},HTTPSocket.prototype.openStream=function(){var _this=this;this.stream=node_runtime.createSocketRequest("POST",getUniqueURL(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(chunk){_this.onChunk(chunk)}),this.stream.bind("finished",function(status){_this.hooks.onFinished(_this,status)}),this.stream.bind("buffer_too_long",function(){_this.reconnect()});try{this.stream.start()}catch(error){util.defer(function(){_this.onError(error),_this.onClose(1006,"Could not start streaming",!1)})}},HTTPSocket.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},HTTPSocket}();function getLocation(url){var parts=/([^\?]*)\/*(\??.*)/.exec(url);return{base:parts[1],queryString:parts[2]}}function getSendURL(url,session){return url.base+"/"+session+"/xhr_send"}function getUniqueURL(url){var separator=-1===url.indexOf("?")?"?":"&";return url+separator+"t="+ +new Date+"&n="+autoIncrement++}function replaceHost(url,hostname){var urlParts=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(url);return urlParts[1]+hostname+urlParts[3]}function randomNumber(max){return node_runtime.randomInt(max)}function randomString(length){for(var result=[],i=0;i<length;i++)result.push(randomNumber(32).toString(32));return result.join("")}__name(getLocation,"getLocation"),__name(getSendURL,"getSendURL"),__name(getUniqueURL,"getUniqueURL"),__name(replaceHost,"replaceHost"),__name(randomNumber,"randomNumber"),__name(randomString,"randomString");var AuthRequestType,AuthRequestType2,http_socket=http_socket_HTTPSocket,http_streaming_socket={getReceiveURL:function(url,session){return url.base+"/"+session+"/xhr_streaming"+url.queryString},onHeartbeat:function(socket){socket.sendRaw("[]")},sendHeartbeat:function(socket){socket.sendRaw("[]")},onFinished:function(socket,status){socket.onClose(1006,"Connection interrupted ("+status+")",!1)}},http_polling_socket={getReceiveURL:function(url,session){return url.base+"/"+session+"/xhr"+url.queryString},onHeartbeat:function(){},sendHeartbeat:function(socket){socket.sendRaw("[]")},onFinished:function(socket,status){200===status?socket.reconnect():socket.onClose(1006,"Connection interrupted ("+status+")",!1)}},http_xhr_request={getRequest:function(socket){var xhr=new(node_runtime.getXHRAPI());return xhr.onreadystatechange=xhr.onprogress=function(){switch(xhr.readyState){case 3:xhr.responseText&&xhr.responseText.length>0&&socket.onChunk(xhr.status,xhr.responseText);break;case 4:xhr.responseText&&xhr.responseText.length>0&&socket.onChunk(xhr.status,xhr.responseText),socket.emit("finished",xhr.status),socket.close()}},xhr},abortRequest:function(xhr){xhr.onreadystatechange=null,xhr.abort()}},runtime={getDefaultStrategy:default_strategy,Transports:transports,transportConnectionInitializer:transport_connection_initializer,HTTPFactory:{createStreamingSocket:function(url){return this.createSocket(http_streaming_socket,url)},createPollingSocket:function(url){return this.createSocket(http_polling_socket,url)},createSocket:function(hooks,url){return new http_socket(hooks,url)},createXHR:function(method,url){return this.createRequest(http_xhr_request,method,url)},createRequest:function(hooks,method,url){return new http_request(hooks,method,url)}},setup:function(PusherClass){PusherClass.ready()},getLocalStorage:function(){},getClientFeatures:function(){return keys(filterObject({ws:transports.ws},function(t){return t.isSupported({})}))},getProtocol:function(){return"http:"},isXHRSupported:function(){return!0},createSocketRequest:function(method,url){if(this.isXHRSupported())return this.HTTPFactory.createXHR(method,url);throw"Cross-origin HTTP requests are not supported"},createXHR:function(){return new(this.getXHRAPI())},createWebSocket:function(url){return new(this.getWebSocketAPI())(url)},addUnloadListener:function(listener){},removeUnloadListener:function(listener){}},websocket=__nested_webpack_require_208289__(18),XMLHttpRequest=__nested_webpack_require_208289__(19),net_info_extends=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)b2.hasOwnProperty(p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),NetInfo=function(_super){function NetInfo2(){return null!==_super&&_super.apply(this,arguments)||this}return net_info_extends(NetInfo2,_super),__name(NetInfo2,"NetInfo"),NetInfo2.prototype.isOnline=function(){return!0},NetInfo2}(dispatcher),net_info_Network=new NetInfo;(AuthRequestType2=AuthRequestType||(AuthRequestType={})).UserAuthentication="user-authentication",AuthRequestType2.ChannelAuthorization="channel-authorization";var TimelineLevel,TimelineLevel2,xhr_auth=__name(function(context,query,authOptions,authRequestType,callback){var xhr=node_runtime.createXHR();for(var headerName in xhr.open("POST",authOptions.endpoint,!0),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),authOptions.headers)xhr.setRequestHeader(headerName,authOptions.headers[headerName]);if(null!=authOptions.headersProvider){var dynamicHeaders=authOptions.headersProvider();for(var headerName in dynamicHeaders)xhr.setRequestHeader(headerName,dynamicHeaders[headerName])}return xhr.onreadystatechange=function(){if(4===xhr.readyState)if(200===xhr.status){var data=void 0,parsed=!1;try{data=JSON.parse(xhr.responseText),parsed=!0}catch{callback(new HTTPAuthError(200,"JSON returned from "+authRequestType.toString()+" endpoint was invalid, yet status code was 200. Data was: "+xhr.responseText),null)}parsed&&callback(null,data)}else{var suffix="";switch(authRequestType){case AuthRequestType.UserAuthentication:suffix=url_store.buildLogSuffix("authenticationEndpoint");break;case AuthRequestType.ChannelAuthorization:suffix="Clients must be authorized to join private or presence channels. "+url_store.buildLogSuffix("authorizationEndpoint")}callback(new HTTPAuthError(xhr.status,"Unable to retrieve auth string from "+authRequestType.toString()+" endpoint - received status: "+xhr.status+" from "+authOptions.endpoint+". "+suffix),null)}},xhr.send(query),xhr},"ajax"),xhr_timeline={name:"xhr",getAgent:__name(function(sender,useTLS){return function(data,callback){var url="http"+(useTLS?"s":"")+"://"+(sender.host||sender.options.host)+sender.options.path;url+="/2?"+buildQueryString(data);var xhr=node_runtime.createXHR();xhr.open("GET",url,!0),xhr.onreadystatechange=function(){if(4===xhr.readyState){var status_1=xhr.status,responseText=xhr.responseText;if(200!==status_1)return void logger.debug("TimelineSender Error: received "+status_1+" from stats.pusher.com");try{var host=JSON.parse(responseText).host}catch{logger.debug("TimelineSenderError: invalid response "+responseText)}host&&(sender.host=host)}},xhr.send()}},"getAgent")},external_crypto_=__nested_webpack_require_208289__(3),runtime_getDefaultStrategy=runtime.getDefaultStrategy,runtime_Transports=runtime.Transports,setup=runtime.setup,getProtocol=runtime.getProtocol,isXHRSupported=runtime.isXHRSupported,getLocalStorage=runtime.getLocalStorage,createXHR=runtime.createXHR,createWebSocket=runtime.createWebSocket,addUnloadListener=runtime.addUnloadListener,removeUnloadListener=runtime.removeUnloadListener,transportConnectionInitializer=runtime.transportConnectionInitializer,node_runtime={getDefaultStrategy:runtime_getDefaultStrategy,Transports:runtime_Transports,setup,getProtocol,isXHRSupported,createSocketRequest:runtime.createSocketRequest,getLocalStorage,createXHR,createWebSocket,addUnloadListener,removeUnloadListener,transportConnectionInitializer,HTTPFactory:runtime.HTTPFactory,TimelineTransport:xhr_timeline,getAuthorizers:function(){return{ajax:xhr_auth}},getWebSocketAPI:function(){return websocket.Client},getXHRAPI:function(){return XMLHttpRequest.XMLHttpRequest},getNetwork:function(){return net_info_Network},randomInt:function(max){return Object(external_crypto_.randomInt)(max)}};(TimelineLevel2=TimelineLevel||(TimelineLevel={}))[TimelineLevel2.ERROR=3]="ERROR",TimelineLevel2[TimelineLevel2.INFO=6]="INFO",TimelineLevel2[TimelineLevel2.DEBUG=7]="DEBUG";var timeline_level=TimelineLevel,timeline_timeline=function(){function Timeline(key,session,options){this.key=key,this.session=session,this.events=[],this.options=options||{},this.sent=0,this.uniqueID=0}return __name(Timeline,"Timeline"),Timeline.prototype.log=function(level,event){level<=this.options.level&&(this.events.push(extend({},event,{timestamp:util.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},Timeline.prototype.error=function(event){this.log(timeline_level.ERROR,event)},Timeline.prototype.info=function(event){this.log(timeline_level.INFO,event)},Timeline.prototype.debug=function(event){this.log(timeline_level.DEBUG,event)},Timeline.prototype.isEmpty=function(){return 0===this.events.length},Timeline.prototype.send=function(sendfn,callback){var _this=this,data=extend({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],sendfn(data,function(error,result){error||_this.sent++,callback&&callback(error,result)}),!0},Timeline.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},Timeline}(),transport_strategy=function(){function TransportStrategy(name,priority,transport,options){this.name=name,this.priority=priority,this.transport=transport,this.options=options||{}}return __name(TransportStrategy,"TransportStrategy"),TransportStrategy.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},TransportStrategy.prototype.connect=function(minPriority,callback){var _this=this;if(!this.isSupported())return failAttempt(new UnsupportedStrategy,callback);if(this.priority<minPriority)return failAttempt(new TransportPriorityTooLow,callback);var connected=!1,transport=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),handshake=null,onInitialized=__name(function(){transport.unbind("initialized",onInitialized),transport.connect()},"onInitialized"),onOpen=__name(function(){handshake=factory.createHandshake(transport,function(result){connected=!0,unbindListeners(),callback(null,result)})},"onOpen"),onError=__name(function(error){unbindListeners(),callback(error)},"onError"),onClosed=__name(function(){var serializedTransport;unbindListeners(),serializedTransport=safeJSONStringify(transport),callback(new TransportClosed(serializedTransport))},"onClosed"),unbindListeners=__name(function(){transport.unbind("initialized",onInitialized),transport.unbind("open",onOpen),transport.unbind("error",onError),transport.unbind("closed",onClosed)},"unbindListeners");return transport.bind("initialized",onInitialized),transport.bind("open",onOpen),transport.bind("error",onError),transport.bind("closed",onClosed),transport.initialize(),{abort:function(){connected||(unbindListeners(),handshake?handshake.close():transport.close())},forceMinPriority:function(p){connected||_this.priority<p&&(handshake?handshake.close():transport.close())}}},TransportStrategy}();function failAttempt(error,callback){return util.defer(function(){callback(error)}),{abort:function(){},forceMinPriority:function(){}}}__name(failAttempt,"failAttempt");var strategy_builder_Transports=node_runtime.Transports,strategy_builder_defineTransport=__name(function(config,name,type,priority,options,manager){var transport,transportClass=strategy_builder_Transports[type];if(!transportClass)throw new UnsupportedTransport(type);return!(config.enabledTransports&&-1===arrayIndexOf(config.enabledTransports,name)||config.disabledTransports&&-1!==arrayIndexOf(config.disabledTransports,name))?(options=Object.assign({ignoreNullOrigin:config.ignoreNullOrigin},options),transport=new transport_strategy(name,priority,manager?manager.getAssistant(transportClass):transportClass,options)):transport=strategy_builder_UnsupportedStrategy,transport},"strategy_builder_defineTransport"),strategy_builder_UnsupportedStrategy={isSupported:function(){return!1},connect:function(_,callback){var deferred=util.defer(function(){callback(new UnsupportedStrategy)});return{abort:function(){deferred.ensureAborted()},forceMinPriority:function(){}}}};function validateOptions(options){if(null==options)throw"You must pass an options object";if(null==options.cluster)throw"Options object must provide a cluster";"disableStats"in options&&logger.warn("The disableStats option is deprecated in favor of enableStats")}__name(validateOptions,"validateOptions");var composeChannelQuery=__name(function(params,authOptions){var query="socket_id="+encodeURIComponent(params.socketId);for(var key in authOptions.params)query+="&"+encodeURIComponent(key)+"="+encodeURIComponent(authOptions.params[key]);if(null!=authOptions.paramsProvider){var dynamicParams=authOptions.paramsProvider();for(var key in dynamicParams)query+="&"+encodeURIComponent(key)+"="+encodeURIComponent(dynamicParams[key])}return query},"composeChannelQuery"),user_authenticator=__name(function(authOptions){if(typeof node_runtime.getAuthorizers()[authOptions.transport]>"u")throw"'"+authOptions.transport+"' is not a recognized auth transport";return function(params,callback){var query=composeChannelQuery(params,authOptions);node_runtime.getAuthorizers()[authOptions.transport](node_runtime,query,authOptions,AuthRequestType.UserAuthentication,callback)}},"UserAuthenticator"),channel_authorizer_composeChannelQuery=__name(function(params,authOptions){var query="socket_id="+encodeURIComponent(params.socketId);for(var key in query+="&channel_name="+encodeURIComponent(params.channelName),authOptions.params)query+="&"+encodeURIComponent(key)+"="+encodeURIComponent(authOptions.params[key]);if(null!=authOptions.paramsProvider){var dynamicParams=authOptions.paramsProvider();for(var key in dynamicParams)query+="&"+encodeURIComponent(key)+"="+encodeURIComponent(dynamicParams[key])}return query},"channel_authorizer_composeChannelQuery"),channel_authorizer=__name(function(authOptions){if(typeof node_runtime.getAuthorizers()[authOptions.transport]>"u")throw"'"+authOptions.transport+"' is not a recognized auth transport";return function(params,callback){var query=channel_authorizer_composeChannelQuery(params,authOptions);node_runtime.getAuthorizers()[authOptions.transport](node_runtime,query,authOptions,AuthRequestType.ChannelAuthorization,callback)}},"ChannelAuthorizer"),ChannelAuthorizerProxy=__name(function(pusher,authOptions,channelAuthorizerGenerator){var deprecatedAuthorizerOptions={authTransport:authOptions.transport,authEndpoint:authOptions.endpoint,auth:{params:authOptions.params,headers:authOptions.headers}};return function(params,callback){var channel=pusher.channel(params.channelName);channelAuthorizerGenerator(channel,deprecatedAuthorizerOptions).authorize(params.socketId,callback)}},"ChannelAuthorizerProxy"),__assign=function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)};function getConfig(opts,pusher){var config={activityTimeout:opts.activityTimeout||defaults.activityTimeout,cluster:opts.cluster,httpPath:opts.httpPath||defaults.httpPath,httpPort:opts.httpPort||defaults.httpPort,httpsPort:opts.httpsPort||defaults.httpsPort,pongTimeout:opts.pongTimeout||defaults.pongTimeout,statsHost:opts.statsHost||defaults.stats_host,unavailableTimeout:opts.unavailableTimeout||defaults.unavailableTimeout,wsPath:opts.wsPath||defaults.wsPath,wsPort:opts.wsPort||defaults.wsPort,wssPort:opts.wssPort||defaults.wssPort,enableStats:getEnableStatsConfig(opts),httpHost:getHttpHost(opts),useTLS:shouldUseTLS(opts),wsHost:getWebsocketHost(opts),userAuthenticator:buildUserAuthenticator(opts),channelAuthorizer:buildChannelAuthorizer(opts,pusher)};return"disabledTransports"in opts&&(config.disabledTransports=opts.disabledTransports),"enabledTransports"in opts&&(config.enabledTransports=opts.enabledTransports),"ignoreNullOrigin"in opts&&(config.ignoreNullOrigin=opts.ignoreNullOrigin),"timelineParams"in opts&&(config.timelineParams=opts.timelineParams),"nacl"in opts&&(config.nacl=opts.nacl),config}function getHttpHost(opts){return opts.httpHost?opts.httpHost:opts.cluster?"sockjs-"+opts.cluster+".pusher.com":defaults.httpHost}function getWebsocketHost(opts){return opts.wsHost?opts.wsHost:getWebsocketHostFromCluster(opts.cluster)}function getWebsocketHostFromCluster(cluster){return"ws-"+cluster+".pusher.com"}function shouldUseTLS(opts){return"https:"===node_runtime.getProtocol()||!1!==opts.forceTLS}function getEnableStatsConfig(opts){return"enableStats"in opts?opts.enableStats:"disableStats"in opts&&!opts.disableStats}function buildUserAuthenticator(opts){var userAuthentication=__assign(__assign({},defaults.userAuthentication),opts.userAuthentication);return"customHandler"in userAuthentication&&null!=userAuthentication.customHandler?userAuthentication.customHandler:user_authenticator(userAuthentication)}function buildChannelAuth(opts,pusher){var channelAuthorization;return"channelAuthorization"in opts?channelAuthorization=__assign(__assign({},defaults.channelAuthorization),opts.channelAuthorization):(channelAuthorization={transport:opts.authTransport||defaults.authTransport,endpoint:opts.authEndpoint||defaults.authEndpoint},"auth"in opts&&("params"in opts.auth&&(channelAuthorization.params=opts.auth.params),"headers"in opts.auth&&(channelAuthorization.headers=opts.auth.headers)),"authorizer"in opts&&(channelAuthorization.customHandler=ChannelAuthorizerProxy(pusher,channelAuthorization,opts.authorizer))),channelAuthorization}function buildChannelAuthorizer(opts,pusher){var channelAuthorization=buildChannelAuth(opts,pusher);return"customHandler"in channelAuthorization&&null!=channelAuthorization.customHandler?channelAuthorization.customHandler:channel_authorizer(channelAuthorization)}__name(getConfig,"getConfig"),__name(getHttpHost,"getHttpHost"),__name(getWebsocketHost,"getWebsocketHost"),__name(getWebsocketHostFromCluster,"getWebsocketHostFromCluster"),__name(shouldUseTLS,"shouldUseTLS"),__name(getEnableStatsConfig,"getEnableStatsConfig"),__name(buildUserAuthenticator,"buildUserAuthenticator"),__name(buildChannelAuth,"buildChannelAuth"),__name(buildChannelAuthorizer,"buildChannelAuthorizer");var watchlist_extends=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)b2.hasOwnProperty(p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),watchlist=function(_super){function WatchlistFacade(pusher){var _this=_super.call(this,function(eventName,data){logger.debug("No callbacks on watchlist events for "+eventName)})||this;return _this.pusher=pusher,_this.bindWatchlistInternalEvent(),_this}return watchlist_extends(WatchlistFacade,_super),__name(WatchlistFacade,"WatchlistFacade"),WatchlistFacade.prototype.handleEvent=function(pusherEvent){var _this=this;pusherEvent.data.events.forEach(function(watchlistEvent){_this.emit(watchlistEvent.name,watchlistEvent)})},WatchlistFacade.prototype.bindWatchlistInternalEvent=function(){var _this=this;this.pusher.connection.bind("message",function(pusherEvent){"pusher_internal:watchlist_events"===pusherEvent.event&&_this.handleEvent(pusherEvent)})},WatchlistFacade}(dispatcher);function flatPromise(){var resolve,reject;return{promise:new Promise(function(res,rej){resolve=res,reject=rej}),resolve,reject}}__name(flatPromise,"flatPromise");var flat_promise=flatPromise,user_extends=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)b2.hasOwnProperty(p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),user=function(_super){function UserFacade(pusher){var _this=_super.call(this,function(eventName,data){logger.debug("No callbacks on user for "+eventName)})||this;return _this.signin_requested=!1,_this.user_data=null,_this.serverToUserChannel=null,_this.signinDonePromise=null,_this._signinDoneResolve=null,_this._onAuthorize=function(err,authData){if(err)return logger.warn("Error during signin: "+err),void _this._cleanup();_this.pusher.send_event("pusher:signin",{auth:authData.auth,user_data:authData.user_data})},_this.pusher=pusher,_this.pusher.connection.bind("state_change",function(_a){var previous=_a.previous,current=_a.current;"connected"!==previous&&"connected"===current&&_this._signin(),"connected"===previous&&"connected"!==current&&(_this._cleanup(),_this._newSigninPromiseIfNeeded())}),_this.watchlist=new watchlist(pusher),_this.pusher.connection.bind("message",function(event){"pusher:signin_success"===event.event&&_this._onSigninSuccess(event.data),_this.serverToUserChannel&&_this.serverToUserChannel.name===event.channel&&_this.serverToUserChannel.handleEvent(event)}),_this}return user_extends(UserFacade,_super),__name(UserFacade,"UserFacade"),UserFacade.prototype.signin=function(){this.signin_requested||(this.signin_requested=!0,this._signin())},UserFacade.prototype._signin=function(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),"connected"===this.pusher.connection.state&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))},UserFacade.prototype._onSigninSuccess=function(data){try{this.user_data=JSON.parse(data.user_data)}catch{return logger.error("Failed parsing user data after signin: "+data.user_data),void this._cleanup()}if("string"!=typeof this.user_data.id||""===this.user_data.id)return logger.error("user_data doesn't contain an id. user_data: "+this.user_data),void this._cleanup();this._signinDoneResolve(),this._subscribeChannels()},UserFacade.prototype._subscribeChannels=function(){var _this=this,ensure_subscribed=__name(function(channel){channel.subscriptionPending&&channel.subscriptionCancelled?channel.reinstateSubscription():!channel.subscriptionPending&&"connected"===_this.pusher.connection.state&&channel.subscribe()},"ensure_subscribed");this.serverToUserChannel=new channels_channel("#server-to-user-"+this.user_data.id,this.pusher),this.serverToUserChannel.bind_global(function(eventName,data){0===eventName.indexOf("pusher_internal:")||0===eventName.indexOf("pusher:")||_this.emit(eventName,data)}),ensure_subscribed(this.serverToUserChannel)},UserFacade.prototype._cleanup=function(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()},UserFacade.prototype._newSigninPromiseIfNeeded=function(){if(this.signin_requested&&(!this.signinDonePromise||this.signinDonePromise.done)){var _a=flat_promise(),promise=_a.promise,resolve=_a.resolve;_a.reject;promise.done=!1;var setDone=__name(function(){promise.done=!0},"setDone");promise.then(setDone).catch(setDone),this.signinDonePromise=promise,this._signinDoneResolve=resolve}},UserFacade}(dispatcher),pusher_Pusher=function(){function Pusher(app_key,options){var _this=this;checkAppKey(app_key),validateOptions(options),this.key=app_key,this.config=getConfig(options,this),this.channels=factory.createChannels(),this.global_emitter=new dispatcher,this.sessionID=node_runtime.randomInt(1e9),this.timeline=new timeline_timeline(this.key,this.sessionID,{cluster:this.config.cluster,features:Pusher.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:timeline_level.INFO,version:defaults.VERSION}),this.config.enableStats&&(this.timelineSender=factory.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+node_runtime.TimelineTransport.name}));var getStrategy=__name(function(options2){return node_runtime.getDefaultStrategy(_this.config,options2,strategy_builder_defineTransport)},"getStrategy");this.connection=factory.createConnectionManager(this.key,{getStrategy,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:Boolean(this.config.useTLS)}),this.connection.bind("connected",function(){_this.subscribeAll(),_this.timelineSender&&_this.timelineSender.send(_this.connection.isUsingTLS())}),this.connection.bind("message",function(event){var internal=0===event.event.indexOf("pusher_internal:");if(event.channel){var channel=_this.channel(event.channel);channel&&channel.handleEvent(event)}internal||_this.global_emitter.emit(event.event,event.data)}),this.connection.bind("connecting",function(){_this.channels.disconnect()}),this.connection.bind("disconnected",function(){_this.channels.disconnect()}),this.connection.bind("error",function(err){logger.warn(err)}),Pusher.instances.push(this),this.timeline.info({instances:Pusher.instances.length}),this.user=new user(this),Pusher.isReady&&this.connect()}return __name(Pusher,"Pusher"),Pusher.ready=function(){Pusher.isReady=!0;for(var i=0,l2=Pusher.instances.length;i<l2;i++)Pusher.instances[i].connect()},Pusher.getClientFeatures=function(){return keys(filterObject({ws:node_runtime.Transports.ws},function(t){return t.isSupported({})}))},Pusher.prototype.channel=function(name){return this.channels.find(name)},Pusher.prototype.allChannels=function(){return this.channels.all()},Pusher.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var usingTLS=this.connection.isUsingTLS(),timelineSender=this.timelineSender;this.timelineSenderTimer=new PeriodicTimer(6e4,function(){timelineSender.send(usingTLS)})}},Pusher.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},Pusher.prototype.bind=function(event_name,callback,context){return this.global_emitter.bind(event_name,callback,context),this},Pusher.prototype.unbind=function(event_name,callback,context){return this.global_emitter.unbind(event_name,callback,context),this},Pusher.prototype.bind_global=function(callback){return this.global_emitter.bind_global(callback),this},Pusher.prototype.unbind_global=function(callback){return this.global_emitter.unbind_global(callback),this},Pusher.prototype.unbind_all=function(callback){return this.global_emitter.unbind_all(),this},Pusher.prototype.subscribeAll=function(){var channelName;for(channelName in this.channels.channels)this.channels.channels.hasOwnProperty(channelName)&&this.subscribe(channelName)},Pusher.prototype.subscribe=function(channel_name){var channel=this.channels.add(channel_name,this);return channel.subscriptionPending&&channel.subscriptionCancelled?channel.reinstateSubscription():!channel.subscriptionPending&&"connected"===this.connection.state&&channel.subscribe(),channel},Pusher.prototype.unsubscribe=function(channel_name){var channel=this.channels.find(channel_name);channel&&channel.subscriptionPending?channel.cancelSubscription():(channel=this.channels.remove(channel_name))&&channel.subscribed&&channel.unsubscribe()},Pusher.prototype.send_event=function(event_name,data,channel){return this.connection.send_event(event_name,data,channel)},Pusher.prototype.shouldUseTLS=function(){return this.config.useTLS},Pusher.prototype.signin=function(){this.user.signin()},Pusher.instances=[],Pusher.isReady=!1,Pusher.logToConsole=!1,Pusher.Runtime=node_runtime,Pusher.ScriptReceivers=node_runtime.ScriptReceivers,Pusher.DependenciesReceivers=node_runtime.DependenciesReceivers,Pusher.auth_callbacks=node_runtime.auth_callbacks,Pusher}(),core_pusher=pusher_Pusher;function checkAppKey(key){if(null==key)throw"You must pass your app key when you instantiate Pusher."}__name(checkAppKey,"checkAppKey"),node_runtime.setup(pusher_Pusher);var nacl_fast=__nested_webpack_require_208289__(20),pusher_with_encryption_extends=function(){var extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)b2.hasOwnProperty(p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");return function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),pusher_with_encryption_PusherWithEncryption=function(_super){function PusherWithEncryption(app_key,options){return core_pusher.logToConsole=PusherWithEncryption.logToConsole,core_pusher.log=PusherWithEncryption.log,validateOptions(options),options.nacl=nacl_fast,_super.call(this,app_key,options)||this}return pusher_with_encryption_extends(PusherWithEncryption,_super),__name(PusherWithEncryption,"PusherWithEncryption"),PusherWithEncryption}(core_pusher);__webpack_exports__.default=pusher_with_encryption_PusherWithEncryption}])},43070:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Cf:()=>NG_VALIDATORS,F:()=>NgForm,Fj:()=>DefaultValueAccessor,JJ:()=>NgControlStatus,JL:()=>NgControlStatusGroup,JU:()=>NG_VALUE_ACCESSOR,NI:()=>FormControl,On:()=>NgModel,Q7:()=>RequiredValidator,UX:()=>ReactiveFormsModule,Wl:()=>CheckboxControlValueAccessor,Zs:()=>CheckboxRequiredValidator,_:()=>RadioControlValueAccessor,_Y:()=>\u0275NgNoValidate,a5:()=>NgControl,cw:()=>FormGroup,gN:()=>ControlContainer,kI:()=>Validators,oH:()=>FormControlDirective,qu:()=>FormBuilder,sg:()=>FormGroupDirective,u:()=>FormControlName,u5:()=>FormsModule,wV:()=>NumberValueAccessor,x0:()=>FormGroupName});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(40305),_angular_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(89318),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(25095),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(51138);class BaseControlValueAccessor{constructor(_renderer,_elementRef){this._renderer=_renderer,this._elementRef=_elementRef,this.onChange=_=>{},this.onTouched=()=>{}}setProperty(key,value){this._renderer.setProperty(this._elementRef.nativeElement,key,value)}registerOnTouched(fn){this.onTouched=fn}registerOnChange(fn){this.onChange=fn}setDisabledState(isDisabled){this.setProperty("disabled",isDisabled)}}__name(BaseControlValueAccessor,"BaseControlValueAccessor"),BaseControlValueAccessor.\u0275fac=__name(function(t){return new(t||BaseControlValueAccessor)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Renderer2),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(_angular_core__WEBPACK_IMPORTED_MODULE_0__.ElementRef))},"BaseControlValueAccessor_Factory"),BaseControlValueAccessor.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:BaseControlValueAccessor});class BuiltInControlValueAccessor extends BaseControlValueAccessor{}__name(BuiltInControlValueAccessor,"BuiltInControlValueAccessor"),BuiltInControlValueAccessor.\u0275fac=function(){let \u0275BuiltInControlValueAccessor_BaseFactory;return __name(function(t){return(\u0275BuiltInControlValueAccessor_BaseFactory||(\u0275BuiltInControlValueAccessor_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275getInheritedFactory(BuiltInControlValueAccessor)))(t||BuiltInControlValueAccessor)},"BuiltInControlValueAccessor_Factory")}(),BuiltInControlValueAccessor.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:BuiltInControlValueAccessor,features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]});const NG_VALUE_ACCESSOR=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("NgValueAccessor"),CHECKBOX_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>CheckboxControlValueAccessor),multi:!0};class CheckboxControlValueAccessor extends BuiltInControlValueAccessor{writeValue(value){this.setProperty("checked",value)}}__name(CheckboxControlValueAccessor,"CheckboxControlValueAccessor"),CheckboxControlValueAccessor.\u0275fac=function(){let \u0275CheckboxControlValueAccessor_BaseFactory;return __name(function(t){return(\u0275CheckboxControlValueAccessor_BaseFactory||(\u0275CheckboxControlValueAccessor_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275getInheritedFactory(CheckboxControlValueAccessor)))(t||CheckboxControlValueAccessor)},"CheckboxControlValueAccessor_Factory")}(),CheckboxControlValueAccessor.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:CheckboxControlValueAccessor,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:__name(function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275listener("change",__name(function($event){return ctx.onChange($event.target.checked)},"CheckboxControlValueAccessor_change_HostBindingHandler"))("blur",__name(function(){return ctx.onTouched()},"CheckboxControlValueAccessor_blur_HostBindingHandler"))},"CheckboxControlValueAccessor_HostBindings"),features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([CHECKBOX_VALUE_ACCESSOR]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]});const DEFAULT_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>DefaultValueAccessor),multi:!0};function _isAndroid(){const userAgent=(0,_angular_common__WEBPACK_IMPORTED_MODULE_1__.q)()?(0,_angular_common__WEBPACK_IMPORTED_MODULE_1__.q)().getUserAgent():"";return/android (\d+)/.test(userAgent.toLowerCase())}__name(_isAndroid,"_isAndroid");const COMPOSITION_BUFFER_MODE=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("CompositionEventMode");class DefaultValueAccessor extends BaseControlValueAccessor{constructor(renderer,elementRef,_compositionMode){super(renderer,elementRef),this._compositionMode=_compositionMode,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!_isAndroid())}writeValue(value){const normalizedValue=value??"";this.setProperty("value",normalizedValue)}_handleInput(value){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(value)}_compositionStart(){this._composing=!0}_compositionEnd(value){this._composing=!1,this._compositionMode&&this.onChange(value)}}__name(DefaultValueAccessor,"DefaultValueAccessor"),DefaultValueAccessor.\u0275fac=__name(function(t){return new(t||DefaultValueAccessor)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Renderer2),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(_angular_core__WEBPACK_IMPORTED_MODULE_0__.ElementRef),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(COMPOSITION_BUFFER_MODE,8))},"DefaultValueAccessor_Factory"),DefaultValueAccessor.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:DefaultValueAccessor,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:__name(function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275listener("input",__name(function($event){return ctx._handleInput($event.target.value)},"DefaultValueAccessor_input_HostBindingHandler"))("blur",__name(function(){return ctx.onTouched()},"DefaultValueAccessor_blur_HostBindingHandler"))("compositionstart",__name(function(){return ctx._compositionStart()},"DefaultValueAccessor_compositionstart_HostBindingHandler"))("compositionend",__name(function($event){return ctx._compositionEnd($event.target.value)},"DefaultValueAccessor_compositionend_HostBindingHandler"))},"DefaultValueAccessor_HostBindings"),features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([DEFAULT_VALUE_ACCESSOR]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]});const NG_DEV_MODE$1=!1;function isEmptyInputValue(value){return null==value||("string"==typeof value||Array.isArray(value))&&0===value.length}function hasValidLength(value){return null!=value&&"number"==typeof value.length}__name(isEmptyInputValue,"isEmptyInputValue"),__name(hasValidLength,"hasValidLength");const NG_VALIDATORS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("NgValidators"),NG_ASYNC_VALIDATORS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("NgAsyncValidators"),EMAIL_REGEXP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Validators{static min(min){return minValidator(min)}static max(max){return maxValidator(max)}static required(control){return requiredValidator(control)}static requiredTrue(control){return requiredTrueValidator(control)}static email(control){return emailValidator(control)}static minLength(minLength){return minLengthValidator(minLength)}static maxLength(maxLength){return maxLengthValidator(maxLength)}static pattern(pattern){return patternValidator(pattern)}static nullValidator(control){return null}static compose(validators){return compose(validators)}static composeAsync(validators){return composeAsync(validators)}}function minValidator(min){return control=>{if(isEmptyInputValue(control.value)||isEmptyInputValue(min))return null;const value=parseFloat(control.value);return!isNaN(value)&&value<min?{min:{min,actual:control.value}}:null}}function maxValidator(max){return control=>{if(isEmptyInputValue(control.value)||isEmptyInputValue(max))return null;const value=parseFloat(control.value);return!isNaN(value)&&value>max?{max:{max,actual:control.value}}:null}}function requiredValidator(control){return isEmptyInputValue(control.value)?{required:!0}:null}function requiredTrueValidator(control){return!0===control.value?null:{required:!0}}function emailValidator(control){return isEmptyInputValue(control.value)||EMAIL_REGEXP.test(control.value)?null:{email:!0}}function minLengthValidator(minLength){return control=>isEmptyInputValue(control.value)||!hasValidLength(control.value)?null:control.value.length<minLength?{minlength:{requiredLength:minLength,actualLength:control.value.length}}:null}function maxLengthValidator(maxLength){return control=>hasValidLength(control.value)&&control.value.length>maxLength?{maxlength:{requiredLength:maxLength,actualLength:control.value.length}}:null}function patternValidator(pattern){if(!pattern)return nullValidator;let regex,regexStr;return"string"==typeof pattern?(regexStr="","^"!==pattern.charAt(0)&&(regexStr+="^"),regexStr+=pattern,"$"!==pattern.charAt(pattern.length-1)&&(regexStr+="$"),regex=new RegExp(regexStr)):(regexStr=pattern.toString(),regex=pattern),control=>{if(isEmptyInputValue(control.value))return null;const value=control.value;return regex.test(value)?null:{pattern:{requiredPattern:regexStr,actualValue:value}}}}function nullValidator(control){return null}function isPresent(o){return null!=o}function toObservable(value){const obs=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275isPromise)(value)?(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.from)(value):value;if(NG_DEV_MODE$1&&!(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275isObservable)(obs)){let errorMessage="Expected async validator to return Promise or Observable.";throw"object"==typeof value&&(errorMessage+=" Are you using a synchronous validator where an async validator is expected?"),new _angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275RuntimeError(-1101,errorMessage)}return obs}function mergeErrors(arrayOfErrors){let res={};return arrayOfErrors.forEach(errors=>{res=null!=errors?{...res,...errors}:res}),0===Object.keys(res).length?null:res}function executeValidators(control,validators){return validators.map(validator=>validator(control))}function isValidatorFn(validator){return!validator.validate}function normalizeValidators(validators){return validators.map(validator=>isValidatorFn(validator)?validator:c=>validator.validate(c))}function compose(validators){if(!validators)return null;const presentValidators=validators.filter(isPresent);return 0==presentValidators.length?null:function(control){return mergeErrors(executeValidators(control,presentValidators))}}function composeValidators(validators){return null!=validators?compose(normalizeValidators(validators)):null}function composeAsync(validators){if(!validators)return null;const presentValidators=validators.filter(isPresent);return 0==presentValidators.length?null:function(control){const observables=executeValidators(control,presentValidators).map(toObservable);return(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.forkJoin)(observables).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.UI)(mergeErrors))}}function composeAsyncValidators(validators){return null!=validators?composeAsync(normalizeValidators(validators)):null}function mergeValidators(controlValidators,dirValidator){return null===controlValidators?[dirValidator]:Array.isArray(controlValidators)?[...controlValidators,dirValidator]:[controlValidators,dirValidator]}function getControlValidators(control){return control._rawValidators}function getControlAsyncValidators(control){return control._rawAsyncValidators}function makeValidatorsArray(validators){return validators?Array.isArray(validators)?validators:[validators]:[]}function hasValidator(validators,validator){return Array.isArray(validators)?validators.includes(validator):validators===validator}function addValidators(validators,currentValidators){const current=makeValidatorsArray(currentValidators);return makeValidatorsArray(validators).forEach(v=>{hasValidator(current,v)||current.push(v)}),current}function removeValidators(validators,currentValidators){return makeValidatorsArray(currentValidators).filter(v=>!hasValidator(validators,v))}__name(Validators,"Validators"),__name(minValidator,"minValidator"),__name(maxValidator,"maxValidator"),__name(requiredValidator,"requiredValidator"),__name(requiredTrueValidator,"requiredTrueValidator"),__name(emailValidator,"emailValidator"),__name(minLengthValidator,"minLengthValidator"),__name(maxLengthValidator,"maxLengthValidator"),__name(patternValidator,"patternValidator"),__name(nullValidator,"nullValidator"),__name(isPresent,"isPresent"),__name(toObservable,"toObservable"),__name(mergeErrors,"mergeErrors"),__name(executeValidators,"executeValidators"),__name(isValidatorFn,"isValidatorFn"),__name(normalizeValidators,"normalizeValidators"),__name(compose,"compose"),__name(composeValidators,"composeValidators"),__name(composeAsync,"composeAsync"),__name(composeAsyncValidators,"composeAsyncValidators"),__name(mergeValidators,"mergeValidators"),__name(getControlValidators,"getControlValidators"),__name(getControlAsyncValidators,"getControlAsyncValidators"),__name(makeValidatorsArray,"makeValidatorsArray"),__name(hasValidator,"hasValidator"),__name(addValidators,"addValidators"),__name(removeValidators,"removeValidators");class AbstractControlDirective{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(validators){this._rawValidators=validators||[],this._composedValidatorFn=composeValidators(this._rawValidators)}_setAsyncValidators(validators){this._rawAsyncValidators=validators||[],this._composedAsyncValidatorFn=composeAsyncValidators(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(fn){this._onDestroyCallbacks.push(fn)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(fn=>fn()),this._onDestroyCallbacks=[]}reset(value){this.control&&this.control.reset(value)}hasError(errorCode,path){return!!this.control&&this.control.hasError(errorCode,path)}getError(errorCode,path){return this.control?this.control.getError(errorCode,path):null}}__name(AbstractControlDirective,"AbstractControlDirective");class ControlContainer extends AbstractControlDirective{get formDirective(){return null}get path(){return null}}__name(ControlContainer,"ControlContainer");class NgControl extends AbstractControlDirective{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}__name(NgControl,"NgControl");class AbstractControlStatus{constructor(cd){this._cd=cd}get isTouched(){var _a,_b;return!(null==(_b=null==(_a=this._cd)?void 0:_a.control)||!_b.touched)}get isUntouched(){var _a,_b;return!(null==(_b=null==(_a=this._cd)?void 0:_a.control)||!_b.untouched)}get isPristine(){var _a,_b;return!(null==(_b=null==(_a=this._cd)?void 0:_a.control)||!_b.pristine)}get isDirty(){var _a,_b;return!(null==(_b=null==(_a=this._cd)?void 0:_a.control)||!_b.dirty)}get isValid(){var _a,_b;return!(null==(_b=null==(_a=this._cd)?void 0:_a.control)||!_b.valid)}get isInvalid(){var _a,_b;return!(null==(_b=null==(_a=this._cd)?void 0:_a.control)||!_b.invalid)}get isPending(){var _a,_b;return!(null==(_b=null==(_a=this._cd)?void 0:_a.control)||!_b.pending)}get isSubmitted(){var _a;return!(null==(_a=this._cd)||!_a.submitted)}}__name(AbstractControlStatus,"AbstractControlStatus");class NgControlStatus extends AbstractControlStatus{constructor(cd){super(cd)}}__name(NgControlStatus,"NgControlStatus"),NgControlStatus.\u0275fac=__name(function(t){return new(t||NgControlStatus)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NgControl,2))},"NgControlStatus_Factory"),NgControlStatus.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:NgControlStatus,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:__name(function(rf,ctx){2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275classProp("ng-untouched",ctx.isUntouched)("ng-touched",ctx.isTouched)("ng-pristine",ctx.isPristine)("ng-dirty",ctx.isDirty)("ng-valid",ctx.isValid)("ng-invalid",ctx.isInvalid)("ng-pending",ctx.isPending)},"NgControlStatus_HostBindings"),features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]});class NgControlStatusGroup extends AbstractControlStatus{constructor(cd){super(cd)}}__name(NgControlStatusGroup,"NgControlStatusGroup"),NgControlStatusGroup.\u0275fac=__name(function(t){return new(t||NgControlStatusGroup)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(ControlContainer,10))},"NgControlStatusGroup_Factory"),NgControlStatusGroup.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:NgControlStatusGroup,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:__name(function(rf,ctx){2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275classProp("ng-untouched",ctx.isUntouched)("ng-touched",ctx.isTouched)("ng-pristine",ctx.isPristine)("ng-dirty",ctx.isDirty)("ng-valid",ctx.isValid)("ng-invalid",ctx.isInvalid)("ng-pending",ctx.isPending)("ng-submitted",ctx.isSubmitted)},"NgControlStatusGroup_HostBindings"),features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]});const formControlNameExample='\n  <div [formGroup]="myGroup">\n    <input formControlName="firstName">\n  </div>\n\n  In your class:\n\n  this.myGroup = new FormGroup({\n      firstName: new FormControl()\n  });',formGroupNameExample='\n  <div [formGroup]="myGroup">\n      <div formGroupName="person">\n        <input formControlName="firstName">\n      </div>\n  </div>\n\n  In your class:\n\n  this.myGroup = new FormGroup({\n      person: new FormGroup({ firstName: new FormControl() })\n  });',formArrayNameExample='\n  <div [formGroup]="myGroup">\n    <div formArrayName="cities">\n      <div *ngFor="let city of cityArray.controls; index as i">\n        <input [formControlName]="i">\n      </div>\n    </div>\n  </div>\n\n  In your class:\n\n  this.cityArray = new FormArray([new FormControl(\'SF\')]);\n  this.myGroup = new FormGroup({\n    cities: this.cityArray\n  });',ngModelGroupExample='\n  <form>\n      <div ngModelGroup="person">\n        <input [(ngModel)]="person.name" name="firstName">\n      </div>\n  </form>',ngModelWithFormGroupExample='\n  <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n      <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n  </div>\n';__name(function controlParentException(){return new _angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275RuntimeError(1050,`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n    Example:\n\n    ${formControlNameExample}`)},"controlParentException"),__name(function ngModelGroupException(){return new _angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275RuntimeError(1051,`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n      that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n      Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n      ${formGroupNameExample}\n\n      Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n      ${ngModelGroupExample}`)},"ngModelGroupException"),__name(function missingFormException(){return new _angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275RuntimeError(1052,`formGroup expects a FormGroup instance. Please pass one in.\n\n      Example:\n\n      ${formControlNameExample}`)},"missingFormException"),__name(function groupParentException(){return new _angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275RuntimeError(1053,`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n    directive and pass it an existing FormGroup instance (you can create one in your class).\n\n    Example:\n\n    ${formGroupNameExample}`)},"groupParentException"),__name(function arrayParentException(){return new _angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275RuntimeError(1054,`formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${formArrayNameExample}`)},"arrayParentException");function ngModelWarning(directiveName){return`\n  It looks like you're using ngModel on the same form field as ${directiveName}.\n  Support for using the ngModel input property and ngModelChange event with\n  reactive form directives has been deprecated in Angular v6 and will be removed\n  in a future version of Angular.\n\n  For more information on this, see our API docs here:\n  https://angular.io/api/forms/${"formControl"===directiveName?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n  `}function describeKey(isFormGroup2,key){return isFormGroup2?`with name: '${key}'`:`at index: ${key}`}function noControlsError(isFormGroup2){return`\n    There are no form controls registered with this ${isFormGroup2?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}function missingControlError(isFormGroup2,key){return`Cannot find form control ${describeKey(isFormGroup2,key)}`}function missingControlValueError(isFormGroup2,key){return`Must supply a value for form control ${describeKey(isFormGroup2,key)}`}__name(ngModelWarning,"ngModelWarning"),__name(describeKey,"describeKey"),__name(noControlsError,"noControlsError"),__name(missingControlError,"missingControlError"),__name(missingControlValueError,"missingControlValueError");const NG_DEV_MODE=!1;function pickValidators(validatorOrOpts){return(isOptionsObj(validatorOrOpts)?validatorOrOpts.validators:validatorOrOpts)||null}function coerceToValidator(validator){return Array.isArray(validator)?composeValidators(validator):validator||null}function pickAsyncValidators(asyncValidator,validatorOrOpts){return(isOptionsObj(validatorOrOpts)?validatorOrOpts.asyncValidators:asyncValidator)||null}function coerceToAsyncValidator(asyncValidator){return Array.isArray(asyncValidator)?composeAsyncValidators(asyncValidator):asyncValidator||null}function isOptionsObj(validatorOrOpts){return null!=validatorOrOpts&&!Array.isArray(validatorOrOpts)&&"object"==typeof validatorOrOpts}function assertControlPresent(parent,isGroup,key){const controls=parent.controls;if(!(isGroup?Object.keys(controls):controls).length)throw new _angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275RuntimeError(1e3,NG_DEV_MODE?noControlsError(isGroup):"");if(!controls[key])throw new _angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275RuntimeError(1001,NG_DEV_MODE?missingControlError(isGroup,key):"")}function assertAllValuesPresent(control,isGroup,value){control._forEachChild((_,key)=>{if(void 0===value[key])throw new _angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275RuntimeError(1002,NG_DEV_MODE?missingControlValueError(isGroup,key):"")})}__name(pickValidators,"pickValidators"),__name(coerceToValidator,"coerceToValidator"),__name(pickAsyncValidators,"pickAsyncValidators"),__name(coerceToAsyncValidator,"coerceToAsyncValidator"),__name(isOptionsObj,"isOptionsObj"),__name(assertControlPresent,"assertControlPresent"),__name(assertAllValuesPresent,"assertAllValuesPresent");class AbstractControl{constructor(validators,asyncValidators){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(validators),this._assignAsyncValidators(asyncValidators)}get validator(){return this._composedValidatorFn}set validator(validatorFn){this._rawValidators=this._composedValidatorFn=validatorFn}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(asyncValidatorFn){this._rawAsyncValidators=this._composedAsyncValidatorFn=asyncValidatorFn}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(validators){this._assignValidators(validators)}setAsyncValidators(validators){this._assignAsyncValidators(validators)}addValidators(validators){this.setValidators(addValidators(validators,this._rawValidators))}addAsyncValidators(validators){this.setAsyncValidators(addValidators(validators,this._rawAsyncValidators))}removeValidators(validators){this.setValidators(removeValidators(validators,this._rawValidators))}removeAsyncValidators(validators){this.setAsyncValidators(removeValidators(validators,this._rawAsyncValidators))}hasValidator(validator){return hasValidator(this._rawValidators,validator)}hasAsyncValidator(validator){return hasValidator(this._rawAsyncValidators,validator)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(opts={}){this.touched=!0,this._parent&&!opts.onlySelf&&this._parent.markAsTouched(opts)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(control=>control.markAllAsTouched())}markAsUntouched(opts={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(control=>{control.markAsUntouched({onlySelf:!0})}),this._parent&&!opts.onlySelf&&this._parent._updateTouched(opts)}markAsDirty(opts={}){this.pristine=!1,this._parent&&!opts.onlySelf&&this._parent.markAsDirty(opts)}markAsPristine(opts={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(control=>{control.markAsPristine({onlySelf:!0})}),this._parent&&!opts.onlySelf&&this._parent._updatePristine(opts)}markAsPending(opts={}){this.status="PENDING",!1!==opts.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!opts.onlySelf&&this._parent.markAsPending(opts)}disable(opts={}){const skipPristineCheck=this._parentMarkedDirty(opts.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(control=>{control.disable({...opts,onlySelf:!0})}),this._updateValue(),!1!==opts.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...opts,skipPristineCheck}),this._onDisabledChange.forEach(changeFn=>changeFn(!0))}enable(opts={}){const skipPristineCheck=this._parentMarkedDirty(opts.onlySelf);this.status="VALID",this._forEachChild(control=>{control.enable({...opts,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:opts.emitEvent}),this._updateAncestors({...opts,skipPristineCheck}),this._onDisabledChange.forEach(changeFn=>changeFn(!1))}_updateAncestors(opts){this._parent&&!opts.onlySelf&&(this._parent.updateValueAndValidity(opts),opts.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(parent){this._parent=parent}getRawValue(){return this.value}updateValueAndValidity(opts={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),("VALID"===this.status||"PENDING"===this.status)&&this._runAsyncValidator(opts.emitEvent)),!1!==opts.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!opts.onlySelf&&this._parent.updateValueAndValidity(opts)}_updateTreeValidity(opts={emitEvent:!0}){this._forEachChild(ctrl=>ctrl._updateTreeValidity(opts)),this.updateValueAndValidity({onlySelf:!0,emitEvent:opts.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(emitEvent){if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;const obs=toObservable(this.asyncValidator(this));this._asyncValidationSubscription=obs.subscribe(errors=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(errors,{emitEvent})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(errors,opts={}){this.errors=errors,this._updateControlsErrors(!1!==opts.emitEvent)}get(path){let currPath=path;return null==currPath||(Array.isArray(currPath)||(currPath=currPath.split(".")),0===currPath.length)?null:currPath.reduce((control,name)=>control&&control._find(name),this)}getError(errorCode,path){const control=path?this.get(path):this;return control&&control.errors?control.errors[errorCode]:null}hasError(errorCode,path){return!!this.getError(errorCode,path)}get root(){let x=this;for(;x._parent;)x=x._parent;return x}_updateControlsErrors(emitEvent){this.status=this._calculateStatus(),emitEvent&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(emitEvent)}_initObservables(){this.valueChanges=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.statusChanges=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(status){return this._anyControls(control=>control.status===status)}_anyControlsDirty(){return this._anyControls(control=>control.dirty)}_anyControlsTouched(){return this._anyControls(control=>control.touched)}_updatePristine(opts={}){this.pristine=!this._anyControlsDirty(),this._parent&&!opts.onlySelf&&this._parent._updatePristine(opts)}_updateTouched(opts={}){this.touched=this._anyControlsTouched(),this._parent&&!opts.onlySelf&&this._parent._updateTouched(opts)}_registerOnCollectionChange(fn){this._onCollectionChange=fn}_setUpdateStrategy(opts){isOptionsObj(opts)&&null!=opts.updateOn&&(this._updateOn=opts.updateOn)}_parentMarkedDirty(onlySelf){const parentDirty=this._parent&&this._parent.dirty;return!onlySelf&&!!parentDirty&&!this._parent._anyControlsDirty()}_find(name){return null}_assignValidators(validators){this._rawValidators=Array.isArray(validators)?validators.slice():validators,this._composedValidatorFn=coerceToValidator(this._rawValidators)}_assignAsyncValidators(validators){this._rawAsyncValidators=Array.isArray(validators)?validators.slice():validators,this._composedAsyncValidatorFn=coerceToAsyncValidator(this._rawAsyncValidators)}}__name(AbstractControl,"AbstractControl");class FormGroup extends AbstractControl{constructor(controls,validatorOrOpts,asyncValidator){super(pickValidators(validatorOrOpts),pickAsyncValidators(asyncValidator,validatorOrOpts)),this.controls=controls,this._initObservables(),this._setUpdateStrategy(validatorOrOpts),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(name,control){return this.controls[name]?this.controls[name]:(this.controls[name]=control,control.setParent(this),control._registerOnCollectionChange(this._onCollectionChange),control)}addControl(name,control,options={}){this.registerControl(name,control),this.updateValueAndValidity({emitEvent:options.emitEvent}),this._onCollectionChange()}removeControl(name,options={}){this.controls[name]&&this.controls[name]._registerOnCollectionChange(()=>{}),delete this.controls[name],this.updateValueAndValidity({emitEvent:options.emitEvent}),this._onCollectionChange()}setControl(name,control,options={}){this.controls[name]&&this.controls[name]._registerOnCollectionChange(()=>{}),delete this.controls[name],control&&this.registerControl(name,control),this.updateValueAndValidity({emitEvent:options.emitEvent}),this._onCollectionChange()}contains(controlName){return this.controls.hasOwnProperty(controlName)&&this.controls[controlName].enabled}setValue(value,options={}){assertAllValuesPresent(this,!0,value),Object.keys(value).forEach(name=>{assertControlPresent(this,!0,name),this.controls[name].setValue(value[name],{onlySelf:!0,emitEvent:options.emitEvent})}),this.updateValueAndValidity(options)}patchValue(value,options={}){null!=value&&(Object.keys(value).forEach(name=>{const control=this.controls[name];control&&control.patchValue(value[name],{onlySelf:!0,emitEvent:options.emitEvent})}),this.updateValueAndValidity(options))}reset(value={},options={}){this._forEachChild((control,name)=>{control.reset(value[name],{onlySelf:!0,emitEvent:options.emitEvent})}),this._updatePristine(options),this._updateTouched(options),this.updateValueAndValidity(options)}getRawValue(){return this._reduceChildren({},(acc,control,name)=>(acc[name]=control.getRawValue(),acc))}_syncPendingControls(){let subtreeUpdated=this._reduceChildren(!1,(updated,child)=>!!child._syncPendingControls()||updated);return subtreeUpdated&&this.updateValueAndValidity({onlySelf:!0}),subtreeUpdated}_forEachChild(cb){Object.keys(this.controls).forEach(key=>{const control=this.controls[key];control&&cb(control,key)})}_setUpControls(){this._forEachChild(control=>{control.setParent(this),control._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(condition){for(const[controlName,control]of Object.entries(this.controls))if(this.contains(controlName)&&condition(control))return!0;return!1}_reduceValue(){return this._reduceChildren({},(acc2,control,name)=>((control.enabled||this.disabled)&&(acc2[name]=control.value),acc2))}_reduceChildren(initValue,fn){let res=initValue;return this._forEachChild((control,name)=>{res=fn(res,control,name)}),res}_allControlsDisabled(){for(const controlName of Object.keys(this.controls))if(this.controls[controlName].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(name){return this.controls.hasOwnProperty(name)?this.controls[name]:null}}__name(FormGroup,"FormGroup");class FormRecord extends FormGroup{}__name(FormRecord,"FormRecord");const CALL_SET_DISABLED_STATE=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("CallSetDisabledState",{providedIn:"root",factory:()=>setDisabledStateDefault}),setDisabledStateDefault="always";function controlPath(name,parent){return[...parent.path,name]}function setUpControl(control,dir,callSetDisabledState=setDisabledStateDefault){var _a,_b;setUpValidators(control,dir),dir.valueAccessor.writeValue(control.value),(control.disabled||"always"===callSetDisabledState)&&(null==(_b=(_a=dir.valueAccessor).setDisabledState)||_b.call(_a,control.disabled)),setUpViewChangePipeline(control,dir),setUpModelChangePipeline(control,dir),setUpBlurPipeline(control,dir),setUpDisabledChangeHandler(control,dir)}function cleanUpControl(control,dir,validateControlPresenceOnChange=!0){const noop=__name(()=>{},"noop");dir.valueAccessor&&(dir.valueAccessor.registerOnChange(noop),dir.valueAccessor.registerOnTouched(noop)),cleanUpValidators(control,dir),control&&(dir._invokeOnDestroyCallbacks(),control._registerOnCollectionChange(()=>{}))}function registerOnValidatorChange(validators,onChange){validators.forEach(validator=>{validator.registerOnValidatorChange&&validator.registerOnValidatorChange(onChange)})}function setUpDisabledChangeHandler(control,dir){if(dir.valueAccessor.setDisabledState){const onDisabledChange=__name(isDisabled=>{dir.valueAccessor.setDisabledState(isDisabled)},"onDisabledChange");control.registerOnDisabledChange(onDisabledChange),dir._registerOnDestroy(()=>{control._unregisterOnDisabledChange(onDisabledChange)})}}function setUpValidators(control,dir){const validators=getControlValidators(control);null!==dir.validator?control.setValidators(mergeValidators(validators,dir.validator)):"function"==typeof validators&&control.setValidators([validators]);const asyncValidators=getControlAsyncValidators(control);null!==dir.asyncValidator?control.setAsyncValidators(mergeValidators(asyncValidators,dir.asyncValidator)):"function"==typeof asyncValidators&&control.setAsyncValidators([asyncValidators]);const onValidatorChange=__name(()=>control.updateValueAndValidity(),"onValidatorChange");registerOnValidatorChange(dir._rawValidators,onValidatorChange),registerOnValidatorChange(dir._rawAsyncValidators,onValidatorChange)}function cleanUpValidators(control,dir){let isControlUpdated=!1;if(null!==control){if(null!==dir.validator){const validators=getControlValidators(control);if(Array.isArray(validators)&&validators.length>0){const updatedValidators=validators.filter(validator=>validator!==dir.validator);updatedValidators.length!==validators.length&&(isControlUpdated=!0,control.setValidators(updatedValidators))}}if(null!==dir.asyncValidator){const asyncValidators=getControlAsyncValidators(control);if(Array.isArray(asyncValidators)&&asyncValidators.length>0){const updatedAsyncValidators=asyncValidators.filter(asyncValidator=>asyncValidator!==dir.asyncValidator);updatedAsyncValidators.length!==asyncValidators.length&&(isControlUpdated=!0,control.setAsyncValidators(updatedAsyncValidators))}}}const noop=__name(()=>{},"noop");return registerOnValidatorChange(dir._rawValidators,noop),registerOnValidatorChange(dir._rawAsyncValidators,noop),isControlUpdated}function setUpViewChangePipeline(control,dir){dir.valueAccessor.registerOnChange(newValue=>{control._pendingValue=newValue,control._pendingChange=!0,control._pendingDirty=!0,"change"===control.updateOn&&updateControl(control,dir)})}function setUpBlurPipeline(control,dir){dir.valueAccessor.registerOnTouched(()=>{control._pendingTouched=!0,"blur"===control.updateOn&&control._pendingChange&&updateControl(control,dir),"submit"!==control.updateOn&&control.markAsTouched()})}function updateControl(control,dir){control._pendingDirty&&control.markAsDirty(),control.setValue(control._pendingValue,{emitModelToViewChange:!1}),dir.viewToModelUpdate(control._pendingValue),control._pendingChange=!1}function setUpModelChangePipeline(control,dir){const onChange=__name((newValue,emitModelEvent)=>{dir.valueAccessor.writeValue(newValue),emitModelEvent&&dir.viewToModelUpdate(newValue)},"onChange");control.registerOnChange(onChange),dir._registerOnDestroy(()=>{control._unregisterOnChange(onChange)})}function setUpFormContainer(control,dir){setUpValidators(control,dir)}function cleanUpFormContainer(control,dir){return cleanUpValidators(control,dir)}function _throwError(dir,message){const messageEnd=_describeControlLocation(dir);throw new Error(`${message} ${messageEnd}`)}function _describeControlLocation(dir){const path=dir.path;return path&&path.length>1?`path: '${path.join(" -> ")}'`:null!=path&&path[0]?`name: '${path}'`:"unspecified name attribute"}function isPropertyUpdated(changes,viewModel){if(!changes.hasOwnProperty("model"))return!1;const change=changes.model;return!!change.isFirstChange()||!Object.is(viewModel,change.currentValue)}function isBuiltInAccessor(valueAccessor){return Object.getPrototypeOf(valueAccessor.constructor)===BuiltInControlValueAccessor}function syncPendingControls(form,directives){form._syncPendingControls(),directives.forEach(dir=>{const control=dir.control;"submit"===control.updateOn&&control._pendingChange&&(dir.viewToModelUpdate(control._pendingValue),control._pendingChange=!1)})}function selectValueAccessor(dir,valueAccessors){if(!valueAccessors)return null;let defaultAccessor,builtinAccessor,customAccessor;return Array.isArray(valueAccessors),valueAccessors.forEach(v=>{v.constructor===DefaultValueAccessor?defaultAccessor=v:isBuiltInAccessor(v)?builtinAccessor=v:customAccessor=v}),customAccessor||builtinAccessor||defaultAccessor||null}function removeListItem$1(list,el){const index=list.indexOf(el);index>-1&&list.splice(index,1)}__name(controlPath,"controlPath"),__name(setUpControl,"setUpControl"),__name(cleanUpControl,"cleanUpControl"),__name(registerOnValidatorChange,"registerOnValidatorChange"),__name(setUpDisabledChangeHandler,"setUpDisabledChangeHandler"),__name(setUpValidators,"setUpValidators"),__name(cleanUpValidators,"cleanUpValidators"),__name(setUpViewChangePipeline,"setUpViewChangePipeline"),__name(setUpBlurPipeline,"setUpBlurPipeline"),__name(updateControl,"updateControl"),__name(setUpModelChangePipeline,"setUpModelChangePipeline"),__name(setUpFormContainer,"setUpFormContainer"),__name(cleanUpFormContainer,"cleanUpFormContainer"),__name(function _noControlError(dir){return _throwError(dir,"There is no FormControl instance attached to form control element with")},"_noControlError"),__name(_throwError,"_throwError"),__name(_describeControlLocation,"_describeControlLocation"),__name(function _throwMissingValueAccessorError(dir){const loc=_describeControlLocation(dir);throw new _angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275RuntimeError(-1203,`No value accessor for form control ${loc}.`)},"_throwMissingValueAccessorError"),__name(function _throwInvalidValueAccessorError(dir){const loc=_describeControlLocation(dir);throw new _angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275RuntimeError(1200,`Value accessor was not provided as an array for form control with ${loc}. Check that the \`NG_VALUE_ACCESSOR\` token is configured as a \`multi: true\` provider.`)},"_throwInvalidValueAccessorError"),__name(isPropertyUpdated,"isPropertyUpdated"),__name(isBuiltInAccessor,"isBuiltInAccessor"),__name(syncPendingControls,"syncPendingControls"),__name(selectValueAccessor,"selectValueAccessor"),__name(removeListItem$1,"removeListItem$1"),__name(function _ngModelWarning(name,type,instance,warningConfig){"never"!==warningConfig&&((null===warningConfig||"once"===warningConfig)&&!type._ngModelWarningSentOnce||"always"===warningConfig&&!instance._ngModelWarningSent)&&(console.warn(ngModelWarning(name)),type._ngModelWarningSentOnce=!0,instance._ngModelWarningSent=!0)},"_ngModelWarning");const formDirectiveProvider$1={provide:ControlContainer,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>NgForm)},resolvedPromise$1=Promise.resolve();class NgForm extends ControlContainer{constructor(validators,asyncValidators,callSetDisabledState){super(),this.callSetDisabledState=callSetDisabledState,this.submitted=!1,this._directives=new Set,this.ngSubmit=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.form=new FormGroup({},composeValidators(validators),composeAsyncValidators(asyncValidators))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(dir){resolvedPromise$1.then(()=>{const container=this._findContainer(dir.path);dir.control=container.registerControl(dir.name,dir.control),setUpControl(dir.control,dir,this.callSetDisabledState),dir.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(dir)})}getControl(dir){return this.form.get(dir.path)}removeControl(dir){resolvedPromise$1.then(()=>{const container=this._findContainer(dir.path);container&&container.removeControl(dir.name),this._directives.delete(dir)})}addFormGroup(dir){resolvedPromise$1.then(()=>{const container=this._findContainer(dir.path),group=new FormGroup({});setUpFormContainer(group,dir),container.registerControl(dir.name,group),group.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(dir){resolvedPromise$1.then(()=>{const container=this._findContainer(dir.path);container&&container.removeControl(dir.name)})}getFormGroup(dir){return this.form.get(dir.path)}updateModel(dir,value){resolvedPromise$1.then(()=>{this.form.get(dir.path).setValue(value)})}setValue(value){this.control.setValue(value)}onSubmit($event){var _a;return this.submitted=!0,syncPendingControls(this.form,this._directives),this.ngSubmit.emit($event),"dialog"===(null==(_a=null==$event?void 0:$event.target)?void 0:_a.method)}onReset(){this.resetForm()}resetForm(value){this.form.reset(value),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(path){return path.pop(),path.length?this.form.get(path):this.form}}function removeListItem(list,el){const index=list.indexOf(el);index>-1&&list.splice(index,1)}function isFormControlState(formState){return"object"==typeof formState&&null!==formState&&2===Object.keys(formState).length&&"value"in formState&&"disabled"in formState}__name(NgForm,"NgForm"),NgForm.\u0275fac=__name(function(t){return new(t||NgForm)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NG_VALIDATORS,10),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NG_ASYNC_VALIDATORS,10),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(CALL_SET_DISABLED_STATE,8))},"NgForm_Factory"),NgForm.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:NgForm,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:__name(function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275listener("submit",__name(function($event){return ctx.onSubmit($event)},"NgForm_submit_HostBindingHandler"))("reset",__name(function(){return ctx.onReset()},"NgForm_reset_HostBindingHandler"))},"NgForm_HostBindings"),inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([formDirectiveProvider$1]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]}),__name(removeListItem,"removeListItem"),__name(isFormControlState,"isFormControlState");const FormControl=__name(class extends AbstractControl{constructor(formState=null,validatorOrOpts,asyncValidator){super(pickValidators(validatorOrOpts),pickAsyncValidators(asyncValidator,validatorOrOpts)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(formState),this._setUpdateStrategy(validatorOrOpts),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),isOptionsObj(validatorOrOpts)&&(validatorOrOpts.nonNullable||validatorOrOpts.initialValueIsDefault)&&(isFormControlState(formState)?this.defaultValue=formState.value:this.defaultValue=formState)}setValue(value,options={}){this.value=this._pendingValue=value,this._onChange.length&&!1!==options.emitModelToViewChange&&this._onChange.forEach(changeFn=>changeFn(this.value,!1!==options.emitViewToModelChange)),this.updateValueAndValidity(options)}patchValue(value,options={}){this.setValue(value,options)}reset(formState=this.defaultValue,options={}){this._applyFormState(formState),this.markAsPristine(options),this.markAsUntouched(options),this.setValue(this.value,options),this._pendingChange=!1}_updateValue(){}_anyControls(condition){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(fn){this._onChange.push(fn)}_unregisterOnChange(fn){removeListItem(this._onChange,fn)}registerOnDisabledChange(fn){this._onDisabledChange.push(fn)}_unregisterOnDisabledChange(fn){removeListItem(this._onDisabledChange,fn)}_forEachChild(cb){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange))&&(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0)}_applyFormState(formState){isFormControlState(formState)?(this.value=this._pendingValue=formState.value,formState.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=formState}},"FormControl"),isFormControl=__name(control=>control instanceof FormControl,"isFormControl");class AbstractFormGroupDirective extends ControlContainer{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return controlPath(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}__name(AbstractFormGroupDirective,"AbstractFormGroupDirective"),AbstractFormGroupDirective.\u0275fac=function(){let \u0275AbstractFormGroupDirective_BaseFactory;return __name(function(t){return(\u0275AbstractFormGroupDirective_BaseFactory||(\u0275AbstractFormGroupDirective_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275getInheritedFactory(AbstractFormGroupDirective)))(t||AbstractFormGroupDirective)},"AbstractFormGroupDirective_Factory")}(),AbstractFormGroupDirective.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:AbstractFormGroupDirective,features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]}),__name(function modelParentException(){return new _angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275RuntimeError(1350,`\n    ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n    formGroup's partner directive "formControlName" instead.  Example:\n\n    ${formControlNameExample}\n\n    Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n    Example:\n\n    ${ngModelWithFormGroupExample}`)},"modelParentException"),__name(function formGroupNameException(){return new _angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275RuntimeError(1351,`\n    ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n    Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n    ${formGroupNameExample}\n\n    Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n    ${ngModelGroupExample}`)},"formGroupNameException"),__name(function missingNameException(){return new _angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275RuntimeError(1352,'If ngModel is used within a form tag, either the name attribute must be set or the form\n    control must be defined as \'standalone\' in ngModelOptions.\n\n    Example 1: <input [(ngModel)]="person.firstName" name="first">\n    Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},"missingNameException"),__name(function modelGroupParentException(){return new _angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275RuntimeError(1353,`\n    ngModelGroup cannot be used with a parent formGroup directive.\n\n    Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n    ${formGroupNameExample}\n\n    Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n    ${ngModelGroupExample}`)},"modelGroupParentException");const modelGroupProvider={provide:ControlContainer,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>NgModelGroup)};class NgModelGroup extends AbstractFormGroupDirective{constructor(parent,validators,asyncValidators){super(),this._parent=parent,this._setValidators(validators),this._setAsyncValidators(asyncValidators)}_checkParentType(){!(this._parent instanceof NgModelGroup)&&this._parent}}__name(NgModelGroup,"NgModelGroup"),NgModelGroup.\u0275fac=__name(function(t){return new(t||NgModelGroup)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(ControlContainer,5),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NG_VALIDATORS,10),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NG_ASYNC_VALIDATORS,10))},"NgModelGroup_Factory"),NgModelGroup.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:NgModelGroup,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([modelGroupProvider]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]});const formControlBinding$1={provide:NgControl,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>NgModel)},resolvedPromise=Promise.resolve();class NgModel extends NgControl{constructor(parent,validators,asyncValidators,valueAccessors,_changeDetectorRef,callSetDisabledState){super(),this._changeDetectorRef=_changeDetectorRef,this.callSetDisabledState=callSetDisabledState,this.control=new FormControl,this._registered=!1,this.update=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this._parent=parent,this._setValidators(validators),this._setAsyncValidators(asyncValidators),this.valueAccessor=selectValueAccessor(0,valueAccessors)}ngOnChanges(changes){if(this._checkForErrors(),!this._registered||"name"in changes){if(this._registered&&(this._checkName(),this.formDirective)){const oldName=changes.name.previousValue;this.formDirective.removeControl({name:oldName,path:this._getPath(oldName)})}this._setUpControl()}"isDisabled"in changes&&this._updateDisabled(changes),isPropertyUpdated(changes,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(newValue){this.viewModel=newValue,this.update.emit(newValue)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){setUpControl(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(value){resolvedPromise.then(()=>{var _a;this.control.setValue(value,{emitViewToModelChange:!1}),null==(_a=this._changeDetectorRef)||_a.markForCheck()})}_updateDisabled(changes){const disabledValue=changes.isDisabled.currentValue,isDisabled=0!==disabledValue&&(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275coerceToBoolean)(disabledValue);resolvedPromise.then(()=>{var _a;isDisabled&&!this.control.disabled?this.control.disable():!isDisabled&&this.control.disabled&&this.control.enable(),null==(_a=this._changeDetectorRef)||_a.markForCheck()})}_getPath(controlName){return this._parent?controlPath(controlName,this._parent):[controlName]}}__name(NgModel,"NgModel"),NgModel.\u0275fac=__name(function(t){return new(t||NgModel)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(ControlContainer,9),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NG_VALIDATORS,10),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NG_ASYNC_VALIDATORS,10),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NG_VALUE_ACCESSOR,10),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(_angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectorRef,8),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(CALL_SET_DISABLED_STATE,8))},"NgModel_Factory"),NgModel.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:NgModel,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([formControlBinding$1]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature,_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275NgOnChangesFeature]});class \u0275NgNoValidate{}__name(\u0275NgNoValidate,"\u0275NgNoValidate"),\u0275NgNoValidate.\u0275fac=__name(function(t){return new(t||\u0275NgNoValidate)},"\u0275NgNoValidate_Factory"),\u0275NgNoValidate.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:\u0275NgNoValidate,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});const NUMBER_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>NumberValueAccessor),multi:!0};class NumberValueAccessor extends BuiltInControlValueAccessor{writeValue(value){const normalizedValue=value??"";this.setProperty("value",normalizedValue)}registerOnChange(fn){this.onChange=value=>{fn(""==value?null:parseFloat(value))}}}__name(NumberValueAccessor,"NumberValueAccessor"),NumberValueAccessor.\u0275fac=function(){let \u0275NumberValueAccessor_BaseFactory;return __name(function(t){return(\u0275NumberValueAccessor_BaseFactory||(\u0275NumberValueAccessor_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275getInheritedFactory(NumberValueAccessor)))(t||NumberValueAccessor)},"NumberValueAccessor_Factory")}(),NumberValueAccessor.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:NumberValueAccessor,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:__name(function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275listener("input",__name(function($event){return ctx.onChange($event.target.value)},"NumberValueAccessor_input_HostBindingHandler"))("blur",__name(function(){return ctx.onTouched()},"NumberValueAccessor_blur_HostBindingHandler"))},"NumberValueAccessor_HostBindings"),features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([NUMBER_VALUE_ACCESSOR]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]});const RADIO_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>RadioControlValueAccessor),multi:!0};__name(function throwNameError(){throw new _angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275RuntimeError(1202,'\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},"throwNameError");class RadioControlRegistryModule{}__name(RadioControlRegistryModule,"RadioControlRegistryModule"),RadioControlRegistryModule.\u0275fac=__name(function(t){return new(t||RadioControlRegistryModule)},"RadioControlRegistryModule_Factory"),RadioControlRegistryModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineNgModule({type:RadioControlRegistryModule}),RadioControlRegistryModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjector({});class RadioControlRegistry{constructor(){this._accessors=[]}add(control,accessor){this._accessors.push([control,accessor])}remove(accessor){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===accessor)return void this._accessors.splice(i,1)}select(accessor){this._accessors.forEach(c=>{this._isSameGroup(c,accessor)&&c[1]!==accessor&&c[1].fireUncheck(accessor.value)})}_isSameGroup(controlPair,accessor){return!!controlPair[0].control&&(controlPair[0]._parent===accessor._control._parent&&controlPair[1].name===accessor.name)}}__name(RadioControlRegistry,"RadioControlRegistry"),RadioControlRegistry.\u0275fac=__name(function(t){return new(t||RadioControlRegistry)},"RadioControlRegistry_Factory"),RadioControlRegistry.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjectable({token:RadioControlRegistry,factory:RadioControlRegistry.\u0275fac,providedIn:RadioControlRegistryModule});class RadioControlValueAccessor extends BuiltInControlValueAccessor{constructor(renderer,elementRef,_registry,_injector){super(renderer,elementRef),this._registry=_registry,this._injector=_injector,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(CALL_SET_DISABLED_STATE,{optional:!0})??setDisabledStateDefault}ngOnInit(){this._control=this._injector.get(NgControl),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(value){this._state=value===this.value,this.setProperty("checked",this._state)}registerOnChange(fn){this._fn=fn,this.onChange=()=>{fn(this.value),this._registry.select(this)}}setDisabledState(isDisabled){(this.setDisabledStateFired||isDisabled||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",isDisabled),this.setDisabledStateFired=!0}fireUncheck(value){this.writeValue(value)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}}__name(RadioControlValueAccessor,"RadioControlValueAccessor"),RadioControlValueAccessor.\u0275fac=__name(function(t){return new(t||RadioControlValueAccessor)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Renderer2),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(_angular_core__WEBPACK_IMPORTED_MODULE_0__.ElementRef),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(RadioControlRegistry),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Injector))},"RadioControlValueAccessor_Factory"),RadioControlValueAccessor.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:RadioControlValueAccessor,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:__name(function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275listener("change",__name(function(){return ctx.onChange()},"RadioControlValueAccessor_change_HostBindingHandler"))("blur",__name(function(){return ctx.onTouched()},"RadioControlValueAccessor_blur_HostBindingHandler"))},"RadioControlValueAccessor_HostBindings"),inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([RADIO_VALUE_ACCESSOR]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]});const RANGE_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>RangeValueAccessor),multi:!0};class RangeValueAccessor extends BuiltInControlValueAccessor{writeValue(value){this.setProperty("value",parseFloat(value))}registerOnChange(fn){this.onChange=value=>{fn(""==value?null:parseFloat(value))}}}__name(RangeValueAccessor,"RangeValueAccessor"),RangeValueAccessor.\u0275fac=function(){let \u0275RangeValueAccessor_BaseFactory;return __name(function(t){return(\u0275RangeValueAccessor_BaseFactory||(\u0275RangeValueAccessor_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275getInheritedFactory(RangeValueAccessor)))(t||RangeValueAccessor)},"RangeValueAccessor_Factory")}(),RangeValueAccessor.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:RangeValueAccessor,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:__name(function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275listener("change",__name(function($event){return ctx.onChange($event.target.value)},"RangeValueAccessor_change_HostBindingHandler"))("input",__name(function($event){return ctx.onChange($event.target.value)},"RangeValueAccessor_input_HostBindingHandler"))("blur",__name(function(){return ctx.onTouched()},"RangeValueAccessor_blur_HostBindingHandler"))},"RangeValueAccessor_HostBindings"),features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([RANGE_VALUE_ACCESSOR]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]});const NG_MODEL_WITH_FORM_CONTROL_WARNING=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("NgModelWithFormControlWarning"),formControlBinding={provide:NgControl,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>FormControlDirective)};class FormControlDirective extends NgControl{set isDisabled(isDisabled){}constructor(validators,asyncValidators,valueAccessors,_ngModelWarningConfig,callSetDisabledState){super(),this._ngModelWarningConfig=_ngModelWarningConfig,this.callSetDisabledState=callSetDisabledState,this.update=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this._ngModelWarningSent=!1,this._setValidators(validators),this._setAsyncValidators(asyncValidators),this.valueAccessor=selectValueAccessor(0,valueAccessors)}ngOnChanges(changes){if(this._isControlChanged(changes)){const previousForm=changes.form.previousValue;previousForm&&cleanUpControl(previousForm,this,!1),setUpControl(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}isPropertyUpdated(changes,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&cleanUpControl(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(newValue){this.viewModel=newValue,this.update.emit(newValue)}_isControlChanged(changes){return changes.hasOwnProperty("form")}}__name(FormControlDirective,"FormControlDirective"),FormControlDirective._ngModelWarningSentOnce=!1,FormControlDirective.\u0275fac=__name(function(t){return new(t||FormControlDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NG_VALIDATORS,10),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NG_ASYNC_VALIDATORS,10),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NG_VALUE_ACCESSOR,10),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NG_MODEL_WITH_FORM_CONTROL_WARNING,8),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(CALL_SET_DISABLED_STATE,8))},"FormControlDirective_Factory"),FormControlDirective.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:FormControlDirective,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([formControlBinding]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature,_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275NgOnChangesFeature]});const formDirectiveProvider={provide:ControlContainer,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>FormGroupDirective)};class FormGroupDirective extends ControlContainer{constructor(validators,asyncValidators,callSetDisabledState){super(),this.callSetDisabledState=callSetDisabledState,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this._setValidators(validators),this._setAsyncValidators(asyncValidators)}ngOnChanges(changes){this._checkFormPresent(),changes.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(cleanUpValidators(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(dir){const ctrl=this.form.get(dir.path);return setUpControl(ctrl,dir,this.callSetDisabledState),ctrl.updateValueAndValidity({emitEvent:!1}),this.directives.push(dir),ctrl}getControl(dir){return this.form.get(dir.path)}removeControl(dir){cleanUpControl(dir.control||null,dir,!1),removeListItem$1(this.directives,dir)}addFormGroup(dir){this._setUpFormContainer(dir)}removeFormGroup(dir){this._cleanUpFormContainer(dir)}getFormGroup(dir){return this.form.get(dir.path)}addFormArray(dir){this._setUpFormContainer(dir)}removeFormArray(dir){this._cleanUpFormContainer(dir)}getFormArray(dir){return this.form.get(dir.path)}updateModel(dir,value){this.form.get(dir.path).setValue(value)}onSubmit($event){var _a;return this.submitted=!0,syncPendingControls(this.form,this.directives),this.ngSubmit.emit($event),"dialog"===(null==(_a=null==$event?void 0:$event.target)?void 0:_a.method)}onReset(){this.resetForm()}resetForm(value){this.form.reset(value),this.submitted=!1}_updateDomValue(){this.directives.forEach(dir=>{const oldCtrl=dir.control,newCtrl=this.form.get(dir.path);oldCtrl!==newCtrl&&(cleanUpControl(oldCtrl||null,dir),isFormControl(newCtrl)&&(setUpControl(newCtrl,dir,this.callSetDisabledState),dir.control=newCtrl))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(dir){const ctrl=this.form.get(dir.path);setUpFormContainer(ctrl,dir),ctrl.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(dir){if(this.form){const ctrl=this.form.get(dir.path);ctrl&&cleanUpFormContainer(ctrl,dir)&&ctrl.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){setUpValidators(this.form,this),this._oldForm&&cleanUpValidators(this._oldForm,this)}_checkFormPresent(){this.form}}__name(FormGroupDirective,"FormGroupDirective"),FormGroupDirective.\u0275fac=__name(function(t){return new(t||FormGroupDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NG_VALIDATORS,10),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NG_ASYNC_VALIDATORS,10),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(CALL_SET_DISABLED_STATE,8))},"FormGroupDirective_Factory"),FormGroupDirective.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:FormGroupDirective,selectors:[["","formGroup",""]],hostBindings:__name(function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275listener("submit",__name(function($event){return ctx.onSubmit($event)},"FormGroupDirective_submit_HostBindingHandler"))("reset",__name(function(){return ctx.onReset()},"FormGroupDirective_reset_HostBindingHandler"))},"FormGroupDirective_HostBindings"),inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([formDirectiveProvider]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature,_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275NgOnChangesFeature]});const formGroupNameProvider={provide:ControlContainer,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>FormGroupName)};class FormGroupName extends AbstractFormGroupDirective{constructor(parent,validators,asyncValidators){super(),this._parent=parent,this._setValidators(validators),this._setAsyncValidators(asyncValidators)}_checkParentType(){_hasInvalidParent(this._parent)}}__name(FormGroupName,"FormGroupName"),FormGroupName.\u0275fac=__name(function(t){return new(t||FormGroupName)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(ControlContainer,13),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NG_VALIDATORS,10),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NG_ASYNC_VALIDATORS,10))},"FormGroupName_Factory"),FormGroupName.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:FormGroupName,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([formGroupNameProvider]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]});const formArrayNameProvider={provide:ControlContainer,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>FormArrayName)};class FormArrayName extends ControlContainer{constructor(parent,validators,asyncValidators){super(),this._parent=parent,this._setValidators(validators),this._setAsyncValidators(asyncValidators)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return controlPath(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){_hasInvalidParent(this._parent)}}function _hasInvalidParent(parent){return!(parent instanceof FormGroupName||parent instanceof FormGroupDirective||parent instanceof FormArrayName)}__name(FormArrayName,"FormArrayName"),FormArrayName.\u0275fac=__name(function(t){return new(t||FormArrayName)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(ControlContainer,13),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NG_VALIDATORS,10),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NG_ASYNC_VALIDATORS,10))},"FormArrayName_Factory"),FormArrayName.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:FormArrayName,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([formArrayNameProvider]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]}),__name(_hasInvalidParent,"_hasInvalidParent");const controlNameBinding={provide:NgControl,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>FormControlName)};class FormControlName extends NgControl{set isDisabled(isDisabled){}constructor(parent,validators,asyncValidators,valueAccessors,_ngModelWarningConfig){super(),this._ngModelWarningConfig=_ngModelWarningConfig,this._added=!1,this.update=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this._ngModelWarningSent=!1,this._parent=parent,this._setValidators(validators),this._setAsyncValidators(asyncValidators),this.valueAccessor=selectValueAccessor(0,valueAccessors)}ngOnChanges(changes){this._added||this._setUpControl(),isPropertyUpdated(changes,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(newValue){this.viewModel=newValue,this.update.emit(newValue)}get path(){return controlPath(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}__name(FormControlName,"FormControlName"),FormControlName._ngModelWarningSentOnce=!1,FormControlName.\u0275fac=__name(function(t){return new(t||FormControlName)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(ControlContainer,13),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NG_VALIDATORS,10),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NG_ASYNC_VALIDATORS,10),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NG_VALUE_ACCESSOR,10),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(NG_MODEL_WITH_FORM_CONTROL_WARNING,8))},"FormControlName_Factory"),FormControlName.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:FormControlName,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([controlNameBinding]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature,_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275NgOnChangesFeature]});const SELECT_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>SelectControlValueAccessor),multi:!0};function _buildValueString$1(id,value){return null==id?`${value}`:(value&&"object"==typeof value&&(value="Object"),`${id}: ${value}`.slice(0,50))}function _extractId$1(valueString){return valueString.split(":")[0]}__name(_buildValueString$1,"_buildValueString$1"),__name(_extractId$1,"_extractId$1");class SelectControlValueAccessor extends BuiltInControlValueAccessor{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(fn){this._compareWith=fn}writeValue(value){this.value=value;const valueString=_buildValueString$1(this._getOptionId(value),value);this.setProperty("value",valueString)}registerOnChange(fn){this.onChange=valueString=>{this.value=this._getOptionValue(valueString),fn(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(value){for(const id of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(id),value))return id;return null}_getOptionValue(valueString){const id=_extractId$1(valueString);return this._optionMap.has(id)?this._optionMap.get(id):valueString}}__name(SelectControlValueAccessor,"SelectControlValueAccessor"),SelectControlValueAccessor.\u0275fac=function(){let \u0275SelectControlValueAccessor_BaseFactory;return __name(function(t){return(\u0275SelectControlValueAccessor_BaseFactory||(\u0275SelectControlValueAccessor_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275getInheritedFactory(SelectControlValueAccessor)))(t||SelectControlValueAccessor)},"SelectControlValueAccessor_Factory")}(),SelectControlValueAccessor.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:SelectControlValueAccessor,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:__name(function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275listener("change",__name(function($event){return ctx.onChange($event.target.value)},"SelectControlValueAccessor_change_HostBindingHandler"))("blur",__name(function(){return ctx.onTouched()},"SelectControlValueAccessor_blur_HostBindingHandler"))},"SelectControlValueAccessor_HostBindings"),inputs:{compareWith:"compareWith"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([SELECT_VALUE_ACCESSOR]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]});class NgSelectOption{constructor(_element,_renderer,_select){this._element=_element,this._renderer=_renderer,this._select=_select,this._select&&(this.id=this._select._registerOption())}set ngValue(value){null!=this._select&&(this._select._optionMap.set(this.id,value),this._setElementValue(_buildValueString$1(this.id,value)),this._select.writeValue(this._select.value))}set value(value){this._setElementValue(value),this._select&&this._select.writeValue(this._select.value)}_setElementValue(value){this._renderer.setProperty(this._element.nativeElement,"value",value)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}__name(NgSelectOption,"NgSelectOption"),NgSelectOption.\u0275fac=__name(function(t){return new(t||NgSelectOption)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(_angular_core__WEBPACK_IMPORTED_MODULE_0__.ElementRef),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Renderer2),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(SelectControlValueAccessor,9))},"NgSelectOption_Factory"),NgSelectOption.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:NgSelectOption,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});const SELECT_MULTIPLE_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>SelectMultipleControlValueAccessor),multi:!0};function _buildValueString(id,value){return null==id?`${value}`:("string"==typeof value&&(value=`'${value}'`),value&&"object"==typeof value&&(value="Object"),`${id}: ${value}`.slice(0,50))}function _extractId(valueString){return valueString.split(":")[0]}__name(_buildValueString,"_buildValueString"),__name(_extractId,"_extractId");__name(class HTMLCollection{},"HTMLCollection");class SelectMultipleControlValueAccessor extends BuiltInControlValueAccessor{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(fn){this._compareWith=fn}writeValue(value){let optionSelectedStateSetter;if(this.value=value,Array.isArray(value)){const ids=value.map(v=>this._getOptionId(v));optionSelectedStateSetter=__name((opt,o)=>{opt._setSelected(ids.indexOf(o.toString())>-1)},"optionSelectedStateSetter")}else optionSelectedStateSetter=__name((opt,o)=>{opt._setSelected(!1)},"optionSelectedStateSetter");this._optionMap.forEach(optionSelectedStateSetter)}registerOnChange(fn){this.onChange=element=>{const selected=[],selectedOptions=element.selectedOptions;if(void 0!==selectedOptions){const options=selectedOptions;for(let i=0;i<options.length;i++){const opt=options[i],val=this._getOptionValue(opt.value);selected.push(val)}}else{const options=element.options;for(let i=0;i<options.length;i++){const opt=options[i];if(opt.selected){const val=this._getOptionValue(opt.value);selected.push(val)}}}this.value=selected,fn(selected)}}_registerOption(value){const id=(this._idCounter++).toString();return this._optionMap.set(id,value),id}_getOptionId(value){for(const id of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(id)._value,value))return id;return null}_getOptionValue(valueString){const id=_extractId(valueString);return this._optionMap.has(id)?this._optionMap.get(id)._value:valueString}}__name(SelectMultipleControlValueAccessor,"SelectMultipleControlValueAccessor"),SelectMultipleControlValueAccessor.\u0275fac=function(){let \u0275SelectMultipleControlValueAccessor_BaseFactory;return __name(function(t){return(\u0275SelectMultipleControlValueAccessor_BaseFactory||(\u0275SelectMultipleControlValueAccessor_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275getInheritedFactory(SelectMultipleControlValueAccessor)))(t||SelectMultipleControlValueAccessor)},"SelectMultipleControlValueAccessor_Factory")}(),SelectMultipleControlValueAccessor.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:SelectMultipleControlValueAccessor,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:__name(function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275listener("change",__name(function($event){return ctx.onChange($event.target)},"SelectMultipleControlValueAccessor_change_HostBindingHandler"))("blur",__name(function(){return ctx.onTouched()},"SelectMultipleControlValueAccessor_blur_HostBindingHandler"))},"SelectMultipleControlValueAccessor_HostBindings"),inputs:{compareWith:"compareWith"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([SELECT_MULTIPLE_VALUE_ACCESSOR]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]});class \u0275NgSelectMultipleOption{constructor(_element,_renderer,_select){this._element=_element,this._renderer=_renderer,this._select=_select,this._select&&(this.id=this._select._registerOption(this))}set ngValue(value){null!=this._select&&(this._value=value,this._setElementValue(_buildValueString(this.id,value)),this._select.writeValue(this._select.value))}set value(value){this._select?(this._value=value,this._setElementValue(_buildValueString(this.id,value)),this._select.writeValue(this._select.value)):this._setElementValue(value)}_setElementValue(value){this._renderer.setProperty(this._element.nativeElement,"value",value)}_setSelected(selected){this._renderer.setProperty(this._element.nativeElement,"selected",selected)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}function toInteger(value){return"number"==typeof value?value:parseInt(value,10)}function toFloat(value){return"number"==typeof value?value:parseFloat(value)}__name(\u0275NgSelectMultipleOption,"\u0275NgSelectMultipleOption"),\u0275NgSelectMultipleOption.\u0275fac=__name(function(t){return new(t||\u0275NgSelectMultipleOption)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(_angular_core__WEBPACK_IMPORTED_MODULE_0__.ElementRef),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Renderer2),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(SelectMultipleControlValueAccessor,9))},"\u0275NgSelectMultipleOption_Factory"),\u0275NgSelectMultipleOption.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:\u0275NgSelectMultipleOption,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),__name(toInteger,"toInteger"),__name(toFloat,"toFloat");class AbstractValidatorDirective{constructor(){this._validator=nullValidator}ngOnChanges(changes){if(this.inputName in changes){const input=this.normalizeInput(changes[this.inputName].currentValue);this._enabled=this.enabled(input),this._validator=this._enabled?this.createValidator(input):nullValidator,this._onChange&&this._onChange()}}validate(control){return this._validator(control)}registerOnValidatorChange(fn){this._onChange=fn}enabled(input){return null!=input}}__name(AbstractValidatorDirective,"AbstractValidatorDirective"),AbstractValidatorDirective.\u0275fac=__name(function(t){return new(t||AbstractValidatorDirective)},"AbstractValidatorDirective_Factory"),AbstractValidatorDirective.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:AbstractValidatorDirective,features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275NgOnChangesFeature]});const MAX_VALIDATOR={provide:NG_VALIDATORS,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>MaxValidator),multi:!0};class MaxValidator extends AbstractValidatorDirective{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=input=>toFloat(input),this.createValidator=max=>maxValidator(max)}}__name(MaxValidator,"MaxValidator"),MaxValidator.\u0275fac=function(){let \u0275MaxValidator_BaseFactory;return __name(function(t){return(\u0275MaxValidator_BaseFactory||(\u0275MaxValidator_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275getInheritedFactory(MaxValidator)))(t||MaxValidator)},"MaxValidator_Factory")}(),MaxValidator.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:MaxValidator,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:__name(function(rf,ctx){2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275attribute("max",ctx._enabled?ctx.max:null)},"MaxValidator_HostBindings"),inputs:{max:"max"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([MAX_VALIDATOR]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]});const MIN_VALIDATOR={provide:NG_VALIDATORS,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>MinValidator),multi:!0};class MinValidator extends AbstractValidatorDirective{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=input=>toFloat(input),this.createValidator=min=>minValidator(min)}}__name(MinValidator,"MinValidator"),MinValidator.\u0275fac=function(){let \u0275MinValidator_BaseFactory;return __name(function(t){return(\u0275MinValidator_BaseFactory||(\u0275MinValidator_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275getInheritedFactory(MinValidator)))(t||MinValidator)},"MinValidator_Factory")}(),MinValidator.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:MinValidator,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:__name(function(rf,ctx){2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275attribute("min",ctx._enabled?ctx.min:null)},"MinValidator_HostBindings"),inputs:{min:"min"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([MIN_VALIDATOR]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]});const REQUIRED_VALIDATOR={provide:NG_VALIDATORS,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>RequiredValidator),multi:!0},CHECKBOX_REQUIRED_VALIDATOR={provide:NG_VALIDATORS,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>CheckboxRequiredValidator),multi:!0};class RequiredValidator extends AbstractValidatorDirective{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275coerceToBoolean,this.createValidator=input=>requiredValidator}enabled(input){return input}}__name(RequiredValidator,"RequiredValidator"),RequiredValidator.\u0275fac=function(){let \u0275RequiredValidator_BaseFactory;return __name(function(t){return(\u0275RequiredValidator_BaseFactory||(\u0275RequiredValidator_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275getInheritedFactory(RequiredValidator)))(t||RequiredValidator)},"RequiredValidator_Factory")}(),RequiredValidator.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:RequiredValidator,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:__name(function(rf,ctx){2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275attribute("required",ctx._enabled?"":null)},"RequiredValidator_HostBindings"),inputs:{required:"required"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([REQUIRED_VALIDATOR]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]});class CheckboxRequiredValidator extends RequiredValidator{constructor(){super(...arguments),this.createValidator=input=>requiredTrueValidator}}__name(CheckboxRequiredValidator,"CheckboxRequiredValidator"),CheckboxRequiredValidator.\u0275fac=function(){let \u0275CheckboxRequiredValidator_BaseFactory;return __name(function(t){return(\u0275CheckboxRequiredValidator_BaseFactory||(\u0275CheckboxRequiredValidator_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275getInheritedFactory(CheckboxRequiredValidator)))(t||CheckboxRequiredValidator)},"CheckboxRequiredValidator_Factory")}(),CheckboxRequiredValidator.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:CheckboxRequiredValidator,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:__name(function(rf,ctx){2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275attribute("required",ctx._enabled?"":null)},"CheckboxRequiredValidator_HostBindings"),features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([CHECKBOX_REQUIRED_VALIDATOR]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]});const EMAIL_VALIDATOR={provide:NG_VALIDATORS,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>EmailValidator),multi:!0};class EmailValidator extends AbstractValidatorDirective{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275coerceToBoolean,this.createValidator=input=>emailValidator}enabled(input){return input}}__name(EmailValidator,"EmailValidator"),EmailValidator.\u0275fac=function(){let \u0275EmailValidator_BaseFactory;return __name(function(t){return(\u0275EmailValidator_BaseFactory||(\u0275EmailValidator_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275getInheritedFactory(EmailValidator)))(t||EmailValidator)},"EmailValidator_Factory")}(),EmailValidator.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:EmailValidator,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([EMAIL_VALIDATOR]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]});const MIN_LENGTH_VALIDATOR={provide:NG_VALIDATORS,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>MinLengthValidator),multi:!0};class MinLengthValidator extends AbstractValidatorDirective{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=input=>toInteger(input),this.createValidator=minlength=>minLengthValidator(minlength)}}__name(MinLengthValidator,"MinLengthValidator"),MinLengthValidator.\u0275fac=function(){let \u0275MinLengthValidator_BaseFactory;return __name(function(t){return(\u0275MinLengthValidator_BaseFactory||(\u0275MinLengthValidator_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275getInheritedFactory(MinLengthValidator)))(t||MinLengthValidator)},"MinLengthValidator_Factory")}(),MinLengthValidator.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:MinLengthValidator,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:__name(function(rf,ctx){2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275attribute("minlength",ctx._enabled?ctx.minlength:null)},"MinLengthValidator_HostBindings"),inputs:{minlength:"minlength"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([MIN_LENGTH_VALIDATOR]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]});const MAX_LENGTH_VALIDATOR={provide:NG_VALIDATORS,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>MaxLengthValidator),multi:!0};class MaxLengthValidator extends AbstractValidatorDirective{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=input=>toInteger(input),this.createValidator=maxlength=>maxLengthValidator(maxlength)}}__name(MaxLengthValidator,"MaxLengthValidator"),MaxLengthValidator.\u0275fac=function(){let \u0275MaxLengthValidator_BaseFactory;return __name(function(t){return(\u0275MaxLengthValidator_BaseFactory||(\u0275MaxLengthValidator_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275getInheritedFactory(MaxLengthValidator)))(t||MaxLengthValidator)},"MaxLengthValidator_Factory")}(),MaxLengthValidator.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:MaxLengthValidator,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:__name(function(rf,ctx){2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275attribute("maxlength",ctx._enabled?ctx.maxlength:null)},"MaxLengthValidator_HostBindings"),inputs:{maxlength:"maxlength"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([MAX_LENGTH_VALIDATOR]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]});const PATTERN_VALIDATOR={provide:NG_VALIDATORS,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(()=>PatternValidator),multi:!0};class PatternValidator extends AbstractValidatorDirective{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=input=>input,this.createValidator=input=>patternValidator(input)}}__name(PatternValidator,"PatternValidator"),PatternValidator.\u0275fac=function(){let \u0275PatternValidator_BaseFactory;return __name(function(t){return(\u0275PatternValidator_BaseFactory||(\u0275PatternValidator_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275getInheritedFactory(PatternValidator)))(t||PatternValidator)},"PatternValidator_Factory")}(),PatternValidator.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineDirective({type:PatternValidator,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:__name(function(rf,ctx){2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275attribute("pattern",ctx._enabled?ctx.pattern:null)},"PatternValidator_HostBindings"),inputs:{pattern:"pattern"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([PATTERN_VALIDATOR]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275InheritDefinitionFeature]});class \u0275InternalFormsSharedModule{}__name(\u0275InternalFormsSharedModule,"\u0275InternalFormsSharedModule"),\u0275InternalFormsSharedModule.\u0275fac=__name(function(t){return new(t||\u0275InternalFormsSharedModule)},"\u0275InternalFormsSharedModule_Factory"),\u0275InternalFormsSharedModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineNgModule({type:\u0275InternalFormsSharedModule}),\u0275InternalFormsSharedModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjector({imports:[RadioControlRegistryModule]});class FormArray extends AbstractControl{constructor(controls,validatorOrOpts,asyncValidator){super(pickValidators(validatorOrOpts),pickAsyncValidators(asyncValidator,validatorOrOpts)),this.controls=controls,this._initObservables(),this._setUpdateStrategy(validatorOrOpts),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(index){return this.controls[this._adjustIndex(index)]}push(control,options={}){this.controls.push(control),this._registerControl(control),this.updateValueAndValidity({emitEvent:options.emitEvent}),this._onCollectionChange()}insert(index,control,options={}){this.controls.splice(index,0,control),this._registerControl(control),this.updateValueAndValidity({emitEvent:options.emitEvent})}removeAt(index,options={}){let adjustedIndex=this._adjustIndex(index);adjustedIndex<0&&(adjustedIndex=0),this.controls[adjustedIndex]&&this.controls[adjustedIndex]._registerOnCollectionChange(()=>{}),this.controls.splice(adjustedIndex,1),this.updateValueAndValidity({emitEvent:options.emitEvent})}setControl(index,control,options={}){let adjustedIndex=this._adjustIndex(index);adjustedIndex<0&&(adjustedIndex=0),this.controls[adjustedIndex]&&this.controls[adjustedIndex]._registerOnCollectionChange(()=>{}),this.controls.splice(adjustedIndex,1),control&&(this.controls.splice(adjustedIndex,0,control),this._registerControl(control)),this.updateValueAndValidity({emitEvent:options.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(value,options={}){assertAllValuesPresent(this,!1,value),value.forEach((newValue,index)=>{assertControlPresent(this,!1,index),this.at(index).setValue(newValue,{onlySelf:!0,emitEvent:options.emitEvent})}),this.updateValueAndValidity(options)}patchValue(value,options={}){null!=value&&(value.forEach((newValue,index)=>{this.at(index)&&this.at(index).patchValue(newValue,{onlySelf:!0,emitEvent:options.emitEvent})}),this.updateValueAndValidity(options))}reset(value=[],options={}){this._forEachChild((control,index)=>{control.reset(value[index],{onlySelf:!0,emitEvent:options.emitEvent})}),this._updatePristine(options),this._updateTouched(options),this.updateValueAndValidity(options)}getRawValue(){return this.controls.map(control=>control.getRawValue())}clear(options={}){this.controls.length<1||(this._forEachChild(control=>control._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:options.emitEvent}))}_adjustIndex(index){return index<0?index+this.length:index}_syncPendingControls(){let subtreeUpdated=this.controls.reduce((updated,child)=>!!child._syncPendingControls()||updated,!1);return subtreeUpdated&&this.updateValueAndValidity({onlySelf:!0}),subtreeUpdated}_forEachChild(cb){this.controls.forEach((control,index)=>{cb(control,index)})}_updateValue(){this.value=this.controls.filter(control=>control.enabled||this.disabled).map(control=>control.value)}_anyControls(condition){return this.controls.some(control=>control.enabled&&condition(control))}_setUpControls(){this._forEachChild(control=>this._registerControl(control))}_allControlsDisabled(){for(const control of this.controls)if(control.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(control){control.setParent(this),control._registerOnCollectionChange(this._onCollectionChange)}_find(name){return this.at(name)??null}}__name(FormArray,"FormArray");function isAbstractControlOptions(options){return!!options&&(void 0!==options.asyncValidators||void 0!==options.validators||void 0!==options.updateOn)}__name(isAbstractControlOptions,"isAbstractControlOptions");class FormBuilder{constructor(){this.useNonNullable=!1}get nonNullable(){const nnfb=new FormBuilder;return nnfb.useNonNullable=!0,nnfb}group(controls,options=null){const reducedControls=this._reduceControls(controls);let newOptions={};return isAbstractControlOptions(options)?newOptions=options:null!==options&&(newOptions.validators=options.validator,newOptions.asyncValidators=options.asyncValidator),new FormGroup(reducedControls,newOptions)}record(controls,options=null){const reducedControls=this._reduceControls(controls);return new FormRecord(reducedControls,options)}control(formState,validatorOrOpts,asyncValidator){let newOptions={};return this.useNonNullable?(isAbstractControlOptions(validatorOrOpts)?newOptions=validatorOrOpts:(newOptions.validators=validatorOrOpts,newOptions.asyncValidators=asyncValidator),new FormControl(formState,{...newOptions,nonNullable:!0})):new FormControl(formState,validatorOrOpts,asyncValidator)}array(controls,validatorOrOpts,asyncValidator){const createdControls=controls.map(c=>this._createControl(c));return new FormArray(createdControls,validatorOrOpts,asyncValidator)}_reduceControls(controls){const createdControls={};return Object.keys(controls).forEach(controlName=>{createdControls[controlName]=this._createControl(controls[controlName])}),createdControls}_createControl(controls){if(controls instanceof FormControl)return controls;if(controls instanceof AbstractControl)return controls;if(Array.isArray(controls)){const value=controls[0],validator=controls.length>1?controls[1]:null,asyncValidator=controls.length>2?controls[2]:null;return this.control(value,validator,asyncValidator)}return this.control(controls)}}__name(FormBuilder,"FormBuilder"),FormBuilder.\u0275fac=__name(function(t){return new(t||FormBuilder)},"FormBuilder_Factory"),FormBuilder.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjectable({token:FormBuilder,factory:FormBuilder.\u0275fac,providedIn:"root"});class NonNullableFormBuilder{}__name(NonNullableFormBuilder,"NonNullableFormBuilder"),NonNullableFormBuilder.\u0275fac=__name(function(t){return new(t||NonNullableFormBuilder)},"NonNullableFormBuilder_Factory"),NonNullableFormBuilder.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjectable({token:NonNullableFormBuilder,factory:function(){return(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(FormBuilder).nonNullable},providedIn:"root"});class UntypedFormBuilder extends FormBuilder{group(controlsConfig,options=null){return super.group(controlsConfig,options)}control(formState,validatorOrOpts,asyncValidator){return super.control(formState,validatorOrOpts,asyncValidator)}array(controlsConfig,validatorOrOpts,asyncValidator){return super.array(controlsConfig,validatorOrOpts,asyncValidator)}}__name(UntypedFormBuilder,"UntypedFormBuilder"),UntypedFormBuilder.\u0275fac=function(){let \u0275UntypedFormBuilder_BaseFactory;return __name(function(t){return(\u0275UntypedFormBuilder_BaseFactory||(\u0275UntypedFormBuilder_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275getInheritedFactory(UntypedFormBuilder)))(t||UntypedFormBuilder)},"UntypedFormBuilder_Factory")}(),UntypedFormBuilder.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjectable({token:UntypedFormBuilder,factory:UntypedFormBuilder.\u0275fac,providedIn:"root"});new _angular_core__WEBPACK_IMPORTED_MODULE_0__.Version("15.2.1");class FormsModule{static withConfig(opts){return{ngModule:FormsModule,providers:[{provide:CALL_SET_DISABLED_STATE,useValue:opts.callSetDisabledState??setDisabledStateDefault}]}}}__name(FormsModule,"FormsModule"),FormsModule.\u0275fac=__name(function(t){return new(t||FormsModule)},"FormsModule_Factory"),FormsModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineNgModule({type:FormsModule}),FormsModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjector({imports:[\u0275InternalFormsSharedModule]});class ReactiveFormsModule{static withConfig(opts){return{ngModule:ReactiveFormsModule,providers:[{provide:NG_MODEL_WITH_FORM_CONTROL_WARNING,useValue:opts.warnOnNgModelWithFormControl??"always"},{provide:CALL_SET_DISABLED_STATE,useValue:opts.callSetDisabledState??setDisabledStateDefault}]}}}__name(ReactiveFormsModule,"ReactiveFormsModule"),ReactiveFormsModule.\u0275fac=__name(function(t){return new(t||ReactiveFormsModule)},"ReactiveFormsModule_Factory"),ReactiveFormsModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineNgModule({type:ReactiveFormsModule}),ReactiveFormsModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjector({imports:[\u0275InternalFormsSharedModule]})}};