"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=4631,exports.ids=[4631],exports.modules={54631:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{UserSearchCachedModule:()=>UserSearchCachedModule});var common=__webpack_require__(89318),router=__webpack_require__(14195),core=__webpack_require__(40305),cjs=__webpack_require__(25095),operators=__webpack_require__(51138),search_util=__webpack_require__(39581),http=__webpack_require__(48664),cache_service=__webpack_require__(91234);class UserCachedService{constructor(http2,cacheService){this.http=http2,this.cacheService=cacheService,this.API_URL="https://jsonplaceholder.typicode.com/users",this.userQuerySubject=new cjs.Subject,this.users$=this.userQuerySubject.pipe((0,search_util.y)(query=>this.loadUsers(query)))}searchUser(query){this.userQuerySubject.next(query)}loadUsers(query){return this.cacheService.getData(`${this.API_URL}?q=${query}`).pipe((0,operators.UI)(users=>users.filter(user=>null==user?void 0:user.name.toLowerCase().startsWith(query.toLowerCase()))))}}function UserSearchCachedComponent_li_8_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementStart(0,"li",6),core.\u0275\u0275text(1),core.\u0275\u0275elementStart(2,"small"),core.\u0275\u0275text(3),core.\u0275\u0275elementEnd()()),2&rf){const user_r1=ctx.$implicit;core.\u0275\u0275advance(1),core.\u0275\u0275textInterpolate1(" ",user_r1.name," - "),core.\u0275\u0275advance(2),core.\u0275\u0275textInterpolate(user_r1.email)}}__name(UserCachedService,"UserCachedService"),UserCachedService.\u0275fac=__name(function(t){return new(t||UserCachedService)(core.\u0275\u0275inject(http.eN),core.\u0275\u0275inject(cache_service.Q))},"UserCachedService_Factory"),UserCachedService.\u0275prov=core.\u0275\u0275defineInjectable({token:UserCachedService,factory:UserCachedService.\u0275fac,providedIn:"root"}),__name(UserSearchCachedComponent_li_8_Template,"UserSearchCachedComponent_li_8_Template");class UserSearchCachedComponent{constructor(userService){this.userService=userService}ngOnInit(){this.users$=this.userService.users$}searchUser(query){this.userService.searchUser(query)}}__name(UserSearchCachedComponent,"UserSearchCachedComponent"),UserSearchCachedComponent.\u0275fac=__name(function(t){return new(t||UserSearchCachedComponent)(core.\u0275\u0275directiveInject(UserCachedService))},"UserSearchCachedComponent_Factory"),UserSearchCachedComponent.\u0275cmp=core.\u0275\u0275defineComponent({type:UserSearchCachedComponent,selectors:[["app-user-search-cached"]],decls:10,vars:3,consts:[[1,"p-2"],[1,"text-muted"],[1,"container-fluid"],["placeholder","Type car name",1,"form-control",3,"input"],[1,"list-group","mt-2","w-50"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"]],template:__name(function(rf,ctx){1&rf&&(core.\u0275\u0275elementStart(0,"div",0)(1,"h1"),core.\u0275\u0275text(2," Search User "),core.\u0275\u0275elementStart(3,"small",1),core.\u0275\u0275text(4,"(cached initial response)"),core.\u0275\u0275elementEnd()()(),core.\u0275\u0275elementStart(5,"div",2)(6,"input",3),core.\u0275\u0275listener("input",__name(function($event){return ctx.searchUser($event.target.value)},"UserSearchCachedComponent_Template_input_input_6_listener")),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementStart(7,"ul",4),core.\u0275\u0275template(8,UserSearchCachedComponent_li_8_Template,4,2,"li",5),core.\u0275\u0275pipe(9,"async"),core.\u0275\u0275elementEnd()()),2&rf&&(core.\u0275\u0275advance(8),core.\u0275\u0275property("ngForOf",core.\u0275\u0275pipeBind1(9,1,ctx.users$)))},"UserSearchCachedComponent_Template"),dependencies:[common.sg,common.Ov],changeDetection:0});const routes=[{path:"",component:UserSearchCachedComponent}];class UserSearchCachedRoutingModule{}__name(UserSearchCachedRoutingModule,"UserSearchCachedRoutingModule"),UserSearchCachedRoutingModule.\u0275fac=__name(function(t){return new(t||UserSearchCachedRoutingModule)},"UserSearchCachedRoutingModule_Factory"),UserSearchCachedRoutingModule.\u0275mod=core.\u0275\u0275defineNgModule({type:UserSearchCachedRoutingModule}),UserSearchCachedRoutingModule.\u0275inj=core.\u0275\u0275defineInjector({imports:[router.Bz.forChild(routes),router.Bz]});class UserSearchCachedModule{}__name(UserSearchCachedModule,"UserSearchCachedModule"),UserSearchCachedModule.\u0275fac=__name(function(t){return new(t||UserSearchCachedModule)},"UserSearchCachedModule_Factory"),UserSearchCachedModule.\u0275mod=core.\u0275\u0275defineNgModule({type:UserSearchCachedModule}),UserSearchCachedModule.\u0275inj=core.\u0275\u0275defineInjector({imports:[common.ez,UserSearchCachedRoutingModule]})},91234:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>CacheService});var rxjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(25095),rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(51138),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(40305),_angular_common_http__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(48664);class CacheService{constructor(http){this.http=http,this.responseCache=new Map}getData(url){const cachedResponse=this.responseCache.get(url);return cachedResponse?(0,rxjs__WEBPACK_IMPORTED_MODULE_0__.of)(cachedResponse):this.http.get(url).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__._g)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.Gz)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.bw)(resp=>{this.responseCache.set(url,resp)}))}clearCache(){this.responseCache.clear()}}__name(CacheService,"CacheService"),CacheService.\u0275fac=__name(function(t){return new(t||CacheService)(_angular_core__WEBPACK_IMPORTED_MODULE_2__.\u0275\u0275inject(_angular_common_http__WEBPACK_IMPORTED_MODULE_3__.eN))},"CacheService_Factory"),CacheService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_2__.\u0275\u0275defineInjectable({token:CacheService,factory:CacheService.\u0275fac,providedIn:"root"})},39581:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>search});var rxjs_operators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(51138);function search(dataCb,delay=250){return source$=>source$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_0__.hX)(q=>!q||(null==q?void 0:q.length)>2),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_0__.bw)(res=>console.log("ppp",res)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_0__.bh)(delay),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_0__.xb)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_0__.wt)(dataCb))}__name(search,"search")}};