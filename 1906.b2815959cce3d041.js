"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[1906],{1906:(y,u,r)=>{r.r(u),r.d(u,{UserSearchCachedModule:()=>o});var l=r(9808),p=r(5357),e=r(5e3),m=r(7579),f=r(4004),C=r(6393),S=r(520),v=r(915);let U=(()=>{class t{constructor(n,i){this.http=n,this.cacheService=i,this.API_URL="https://jsonplaceholder.typicode.com/users",this.userQuerySubject=new m.x,this.users$=this.userQuerySubject.pipe((0,C.y)(h=>this.loadUsers(h)))}searchUser(n){this.userQuerySubject.next(n)}loadUsers(n){return this.cacheService.getData(`${this.API_URL}?q=${n}`).pipe((0,f.U)(i=>i.filter(h=>null==h?void 0:h.name.toLowerCase().startsWith(n.toLowerCase()))))}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275inject(S.eN),e.\u0275\u0275inject(v.Q))},t.\u0275prov=e.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function g(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"li",6),e.\u0275\u0275text(1),e.\u0275\u0275elementStart(2,"small"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.name," - "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.email)}}const d=[{path:"",component:(()=>{class t{constructor(n){this.userService=n}ngOnInit(){this.users$=this.userService.users$}searchUser(n){this.userService.searchUser(n)}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(U))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-user-search-cached"]],decls:10,vars:3,consts:[[1,"p-2"],[1,"text-muted"],[1,"container-fluid"],["placeholder","Type car name",1,"form-control",3,"input"],[1,"list-group","mt-2","w-50"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"]],template:function(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"h1"),e.\u0275\u0275text(2," Search User "),e.\u0275\u0275elementStart(3,"small",1),e.\u0275\u0275text(4,"(cached initial response)"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(5,"div",2)(6,"input",3),e.\u0275\u0275listener("input",function(j){return i.searchUser(j.target.value)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"ul",4),e.\u0275\u0275template(8,g,4,2,"li",5),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(9,1,i.users$)))},dependencies:[l.sg,l.Ov],changeDetection:0}),t})()}];let s=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[p.Bz.forChild(d),p.Bz]}),t})(),o=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[l.ez,s]}),t})()},915:(y,u,r)=>{r.d(u,{Q:()=>g});var l=r(9646),p=r(4707),e=r(249),m=r(576),C=r(8343),S=r(8505),v=r(5e3),U=r(520);let g=(()=>{class c{constructor(s){this.http=s,this.responseCache=new Map}getData(s){const o=this.responseCache.get(s);return o?(0,l.of)(o):this.http.get(s).pipe(function f(c,d,s,o){s&&!(0,m.m)(s)&&(o=s);const t=(0,m.m)(s)?s:void 0;return a=>(0,e.O)(new p.t(c,d,o),t)(a)}(1),(0,C.x)(),(0,S.b)(t=>{this.responseCache.set(s,t)}))}clearCache(){this.responseCache.clear()}}return c.\u0275fac=function(s){return new(s||c)(v.\u0275\u0275inject(U.eN))},c.\u0275prov=v.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);