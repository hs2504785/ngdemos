(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[757],{6757:(t,n,i)=>{"use strict";i.r(n),i.d(n,{IntersectionObserverModule:()=>R});var e=i(1116),o=i(766);function s(t,n,i,e){return new(i||(i=Promise))(function(o,s){function c(t){try{a(e.next(t))}catch(n){s(n)}}function r(t){try{a(e.throw(t))}catch(n){s(n)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof i?n:new i(function(t){t(n)})).then(c,r)}a((e=e.apply(t,n||[])).next())})}var c=i(9129),r=i(5959),a=i(7701),u=i(3835),l=function(t){return t.Visible="Visible",t.Pending="Pending",t.NotVisible="NotVisible",t}({});const g=(t,n,i=0)=>new c.y(e=>{const o=new r.xQ,c=new IntersectionObserver((t,n)=>{t.forEach(t=>{(function(t){return t.isIntersecting||t.intersectionRatio>0})(t)&&o.next({entry:t,observer:n})})},n);return o.subscribe(()=>{e.next(l.Pending)}),o.pipe((0,a.b)(i),(0,u.h)(Boolean)).subscribe(({entry:t,observer:n})=>s(void 0,void 0,void 0,function*(){(yield function(t){return s(this,void 0,void 0,function*(){return new Promise(n=>{const i=new IntersectionObserver(([t])=>{n(t.isIntersecting),i.disconnect()});i.observe(t)})})}(t.target))?(e.next(l.Visible),n.unobserve(t.target)):e.next(l.NotVisible)})),c.observe(t),{unsubscribe(){c.disconnect(),o.unsubscribe()}}});var p=i(5366),d=i(3556),h=i(5416);let f=(()=>{class t{constructor(t){this.element=t,this.intersectionDebounce=0,this.intersectionRootMargin="0px",this.visibilityChange=new p.vpe,this.destroy$=new r.xQ}ngOnInit(){g(this.element.nativeElement,{root:this.intersectionRoot,rootMargin:this.intersectionRootMargin,threshold:this.intersectionThreshold},this.intersectionDebounce).pipe((0,h.R)(this.destroy$)).subscribe(t=>{this.visibilityChange.emit(t)})}ngOnDestroy(){this.destroy$.next()}}return t.\u0275fac=function(n){return new(n||t)(p.Y36(p.SBq))},t.\u0275dir=p.lG2({type:t,selectors:[["","intersectionObserver",""]],inputs:{intersectionDebounce:"intersectionDebounce",intersectionRootMargin:"intersectionRootMargin",intersectionRoot:"intersectionRoot",intersectionThreshold:"intersectionThreshold"},outputs:{visibilityChange:"visibilityChange"}}),t})();var Z=i(371);function x(t,n){if(1&t&&(p.ynx(0),p.TgZ(1,"div",6),p._uU(2,"Section 1 - Get list of todos \u2705"),p.qZA(),p.TgZ(3,"div",7),p.TgZ(4,"pre"),p._uU(5),p.ALo(6,"json"),p.ALo(7,"async"),p.qZA(),p.qZA(),p.BQk()),2&t){const t=p.oxw();p.xp6(5),p.Oqu(p.lcZ(6,1,p.lcZ(7,3,t.todos$)))}}function b(t,n){if(1&t&&(p.ynx(0),p.GkF(1,8),p.BQk()),2&t){p.oxw();const t=p.MAs(28);p.xp6(1),p.Q6J("ngTemplateOutlet",t)}}function v(t,n){1&t&&(p.ynx(0),p._uU(1," \u274c "),p.BQk())}function m(t,n){if(1&t&&(p.ynx(0),p.TgZ(1,"div",6),p._uU(2,"Section 2 - Posts \u2705"),p.qZA(),p.TgZ(3,"div",7),p.TgZ(4,"pre"),p._uU(5),p.ALo(6,"json"),p.ALo(7,"async"),p.qZA(),p.qZA(),p.BQk()),2&t){const t=p.oxw();p.xp6(5),p.Oqu(p.lcZ(6,1,p.lcZ(7,3,t.posts$)))}}function y(t,n){if(1&t&&(p.ynx(0),p.GkF(1,8),p.BQk()),2&t){p.oxw();const t=p.MAs(28);p.xp6(1),p.Q6J("ngTemplateOutlet",t)}}function w(t,n){1&t&&(p.ynx(0),p._uU(1," \u274c "),p.BQk())}function S(t,n){if(1&t&&(p.ynx(0),p.TgZ(1,"div",6),p._uU(2,"Section 3 - Comments \u2705"),p.qZA(),p.TgZ(3,"div",7),p.TgZ(4,"pre"),p._uU(5),p.ALo(6,"json"),p.ALo(7,"async"),p.qZA(),p.qZA(),p.BQk()),2&t){const t=p.oxw();p.xp6(5),p.Oqu(p.lcZ(6,1,p.lcZ(7,3,t.comments$)))}}function A(t,n){if(1&t&&(p.ynx(0),p.GkF(1,8),p.BQk()),2&t){p.oxw();const t=p.MAs(28);p.xp6(1),p.Q6J("ngTemplateOutlet",t)}}function T(t,n){1&t&&(p.ynx(0),p._uU(1," \u274c "),p.BQk())}function C(t,n){if(1&t&&(p.ynx(0),p.TgZ(1,"div",6),p._uU(2,"Section 4 - Albums \u2705"),p.qZA(),p.TgZ(3,"div",7),p.TgZ(4,"pre"),p._uU(5),p.ALo(6,"json"),p.ALo(7,"async"),p.qZA(),p.qZA(),p.BQk()),2&t){const t=p.oxw();p.xp6(5),p.Oqu(p.lcZ(6,1,p.lcZ(7,3,t.albums$)))}}function Q(t,n){if(1&t&&(p.ynx(0),p.GkF(1,8),p.BQk()),2&t){p.oxw();const t=p.MAs(28);p.xp6(1),p.Q6J("ngTemplateOutlet",t)}}function q(t,n){1&t&&(p.ynx(0),p._uU(1," \u274c "),p.BQk())}function k(t,n){if(1&t&&(p.TgZ(0,"li",13),p.TgZ(1,"h2"),p._uU(2),p.qZA(),p.TgZ(3,"pre"),p._uU(4),p.ALo(5,"json"),p.qZA(),p.qZA()),2&t){const t=n.$implicit;p.xp6(2),p.Oqu(t.title),p.xp6(2),p.Oqu(p.lcZ(5,2,t))}}function N(t,n){if(1&t&&(p.ynx(0),p.TgZ(1,"div",6),p._uU(2),p.qZA(),p.TgZ(3,"div",7),p.TgZ(4,"cdk-virtual-scroll-viewport",10),p.TgZ(5,"ul",11),p.YNc(6,k,6,4,"li",12),p.qZA(),p.qZA(),p.qZA(),p.BQk()),2&t){const t=n.ngIf;p.xp6(2),p.hij(" Section 5 - Photos (",t.length," records) \u2705 "),p.xp6(4),p.Q6J("cdkVirtualForOf",t)}}function J(t,n){if(1&t&&(p.ynx(0),p.YNc(1,N,7,2,"ng-container",9),p.ALo(2,"async"),p.BQk()),2&t){const t=p.oxw();p.xp6(1),p.Q6J("ngIf",p.lcZ(2,1,t.photos$))}}function U(t,n){if(1&t&&(p.ynx(0),p.GkF(1,8),p.BQk()),2&t){p.oxw();const t=p.MAs(28);p.xp6(1),p.Q6J("ngTemplateOutlet",t)}}function _(t,n){1&t&&(p.ynx(0),p._uU(1," \u274c "),p.BQk())}function O(t,n){if(1&t&&(p.ynx(0),p.TgZ(1,"div",6),p._uU(2,"Section 6 - Users \u2705"),p.qZA(),p.TgZ(3,"div",7),p.TgZ(4,"pre"),p._uU(5),p.ALo(6,"json"),p.ALo(7,"async"),p.qZA(),p.qZA(),p.BQk()),2&t){const t=p.oxw();p.xp6(5),p.Oqu(p.lcZ(6,1,p.lcZ(7,3,t.users$)))}}function B(t,n){if(1&t&&(p.ynx(0),p.GkF(1,8),p.BQk()),2&t){p.oxw();const t=p.MAs(28);p.xp6(1),p.Q6J("ngTemplateOutlet",t)}}function Y(t,n){1&t&&(p.ynx(0),p._uU(1," \u274c "),p.BQk())}function M(t,n){1&t&&(p.O4$(),p.TgZ(0,"svg",14),p.TgZ(1,"circle",15),p._UZ(2,"animate",16),p._UZ(3,"animate",17),p.qZA(),p.TgZ(4,"circle",18),p._UZ(5,"animate",19),p._UZ(6,"animate",20),p.qZA(),p.TgZ(7,"circle",21),p._UZ(8,"animate",16),p._UZ(9,"animate",17),p.qZA(),p.qZA())}let V=(()=>{class t{constructor(t){this.dataService=t,this.visibilityStatus={},this.intersectionStatus=l}ngOnInit(){this.todos$=this.dataService.getTodos(),this.posts$=this.dataService.getPosts(),this.comments$=this.dataService.getComments(),this.albums$=this.dataService.getAlbums(),this.photos$=this.dataService.getPhotos(),this.users$=this.dataService.getUsers()}onVisibilityChanged(t,n){this.visibilityStatus[t]=n}}return t.\u0275fac=function(n){return new(n||t)(p.Y36(d.D))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-demo"]],decls:29,vars:24,consts:[[1,"container-fluid"],["intersectionObserver","",1,"card","border-primary","mb-3",3,"intersectionDebounce","ngSwitch","visibilityChange"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["intersectionObserver","",1,"card","border-success","mb-3",3,"intersectionDebounce","ngSwitch","visibilityChange"],["loading",""],[1,"card-header"],[1,"card-body","text-primary"],[3,"ngTemplateOutlet"],[4,"ngIf"],["itemSize","231",1,"photos-viewport"],[1,"list-group"],["class","list-group-item photo",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"list-group-item","photo"],["width","120","height","30","viewBox","0 0 120 30","xmlns","http://www.w3.org/2000/svg","fill","#2196F3"],["cx","15","cy","15","r","15"],["attributeName","r","from","15","to","15","begin","0s","dur","0.8s","values","15;9;15","calcMode","linear","repeatCount","indefinite"],["attributeName","fill-opacity","from","1","to","1","begin","0s","dur","0.8s","values","1;.5;1","calcMode","linear","repeatCount","indefinite"],["cx","60","cy","15","r","9","fill-opacity","0.3"],["attributeName","r","from","9","to","9","begin","0s","dur","0.8s","values","9;15;9","calcMode","linear","repeatCount","indefinite"],["attributeName","fill-opacity","from","0.5","to","0.5","begin","0s","dur","0.8s","values",".5;1;.5","calcMode","linear","repeatCount","indefinite"],["cx","105","cy","15","r","15"]],template:function(t,n){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"h1"),p._uU(2,"Load Component on scroll"),p.qZA(),p.TgZ(3,"div",1),p.NdJ("visibilityChange",function(t){return n.onVisibilityChanged("todos",t)}),p.YNc(4,x,8,5,"ng-container",2),p.YNc(5,b,2,1,"ng-container",2),p.YNc(6,v,2,0,"ng-container",3),p.qZA(),p.TgZ(7,"div",4),p.NdJ("visibilityChange",function(t){return n.onVisibilityChanged("posts",t)}),p.YNc(8,m,8,5,"ng-container",2),p.YNc(9,y,2,1,"ng-container",2),p.YNc(10,w,2,0,"ng-container",3),p.qZA(),p.TgZ(11,"div",4),p.NdJ("visibilityChange",function(t){return n.onVisibilityChanged("comments",t)}),p.YNc(12,S,8,5,"ng-container",2),p.YNc(13,A,2,1,"ng-container",2),p.YNc(14,T,2,0,"ng-container",3),p.qZA(),p.TgZ(15,"div",4),p.NdJ("visibilityChange",function(t){return n.onVisibilityChanged("albums",t)}),p.YNc(16,C,8,5,"ng-container",2),p.YNc(17,Q,2,1,"ng-container",2),p.YNc(18,q,2,0,"ng-container",3),p.qZA(),p.TgZ(19,"div",4),p.NdJ("visibilityChange",function(t){return n.onVisibilityChanged("photos",t)}),p.YNc(20,J,3,3,"ng-container",2),p.YNc(21,U,2,1,"ng-container",2),p.YNc(22,_,2,0,"ng-container",3),p.qZA(),p.TgZ(23,"div",4),p.NdJ("visibilityChange",function(t){return n.onVisibilityChanged("users",t)}),p.YNc(24,O,8,5,"ng-container",2),p.YNc(25,B,2,1,"ng-container",2),p.YNc(26,Y,2,0,"ng-container",3),p.qZA(),p.qZA(),p.YNc(27,M,10,0,"ng-template",null,5,p.W1O)),2&t&&(p.xp6(3),p.Q6J("intersectionDebounce",0)("ngSwitch",n.visibilityStatus.todos),p.xp6(1),p.Q6J("ngSwitchCase",n.intersectionStatus.Visible),p.xp6(1),p.Q6J("ngSwitchCase",n.intersectionStatus.Pending),p.xp6(2),p.Q6J("intersectionDebounce",0)("ngSwitch",n.visibilityStatus.posts),p.xp6(1),p.Q6J("ngSwitchCase",n.intersectionStatus.Visible),p.xp6(1),p.Q6J("ngSwitchCase",n.intersectionStatus.Pending),p.xp6(2),p.Q6J("intersectionDebounce",0)("ngSwitch",n.visibilityStatus.comments),p.xp6(1),p.Q6J("ngSwitchCase",n.intersectionStatus.Visible),p.xp6(1),p.Q6J("ngSwitchCase",n.intersectionStatus.Pending),p.xp6(2),p.Q6J("intersectionDebounce",0)("ngSwitch",n.visibilityStatus.albums),p.xp6(1),p.Q6J("ngSwitchCase",n.intersectionStatus.Visible),p.xp6(1),p.Q6J("ngSwitchCase",n.intersectionStatus.Pending),p.xp6(2),p.Q6J("intersectionDebounce",500)("ngSwitch",n.visibilityStatus.photos),p.xp6(1),p.Q6J("ngSwitchCase",n.intersectionStatus.Visible),p.xp6(1),p.Q6J("ngSwitchCase",n.intersectionStatus.Pending),p.xp6(2),p.Q6J("intersectionDebounce",0)("ngSwitch",n.visibilityStatus.users),p.xp6(1),p.Q6J("ngSwitchCase",n.intersectionStatus.Visible),p.xp6(1),p.Q6J("ngSwitchCase",n.intersectionStatus.Pending))},directives:[f,e.RF,e.n9,e.ED,e.tP,e.O5,Z.N7,Z.xd,Z.x0],pipes:[e.Ts,e.Ov],styles:[".card[_ngcontent-%COMP%]{height:100vh;overflow-y:auto}.photos-viewport[_ngcontent-%COMP%]{height:300px;overflow-y:auto;outline:4px solid #ff0}"],changeDetection:0}),t})();function D(t,n){1&t&&(p.ynx(0),p._uU(1," \u2705 "),p.BQk())}function F(t,n){if(1&t&&(p.ynx(0),p.GkF(1,10),p.BQk()),2&t){p.oxw(2);const t=p.MAs(5);p.xp6(1),p.Q6J("ngTemplateOutlet",t)}}function P(t,n){1&t&&(p.ynx(0),p._uU(1," \u274c "),p.BQk())}function $(t,n){if(1&t){const t=p.EpF();p.ynx(0),p.TgZ(1,"div",3),p.NdJ("visibilityChange",function(n){const i=p.CHM(t).$implicit;return p.oxw().onVisibilityChanged(i,n)}),p.TgZ(2,"div",4),p.TgZ(3,"div",5),p.TgZ(4,"div",6),p._uU(5),p.qZA(),p.TgZ(6,"div",7),p.YNc(7,D,2,0,"ng-container",8),p.YNc(8,F,2,1,"ng-container",8),p.YNc(9,P,2,0,"ng-container",9),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.BQk()}if(2&t){const t=n.$implicit,i=p.oxw();p.xp6(1),p.Q6J("intersectionDebounce",0),p.xp6(4),p.hij(" ",t," "),p.xp6(1),p.Q6J("ngSwitch",i.visibilityStatus[t]),p.xp6(1),p.Q6J("ngSwitchCase",i.intersectionStatus.Visible),p.xp6(1),p.Q6J("ngSwitchCase",i.intersectionStatus.Pending)}}function L(t,n){1&t&&(p.O4$(),p.TgZ(0,"svg",11),p.TgZ(1,"circle",12),p._UZ(2,"animate",13),p._UZ(3,"animate",14),p.qZA(),p.TgZ(4,"circle",15),p._UZ(5,"animate",16),p._UZ(6,"animate",17),p.qZA(),p.TgZ(7,"circle",18),p._UZ(8,"animate",13),p._UZ(9,"animate",14),p.qZA(),p.qZA())}const I=[{path:"",component:(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-intersection-observer"]],decls:6,vars:0,consts:[[1,"m-2","d-flex","justify-content-center"],["routerLink","sample","routerLinkActive","active",1,"btn","btn-outline-success","mr-2"],["routerLink","demo","routerLinkActive","active",1,"btn","btn-outline-warning"]],template:function(t,n){1&t&&(p.TgZ(0,"header",0),p.TgZ(1,"a",1),p._uU(2,"Sample"),p.qZA(),p.TgZ(3,"a",2),p._uU(4,"Demo"),p.qZA(),p.qZA(),p._UZ(5,"router-outlet"))},directives:[o.yS,o.Od,o.lC],styles:[""]}),t})(),children:[{path:"sample",component:(()=>{class t{constructor(){this.list=[],this.visibilityStatus={},this.intersectionStatus=l}ngOnInit(){const t=[];for(let n=0;n<1e3;n++)t.push(n);this.list=t}onVisibilityChanged(t,n){this.visibilityStatus[t]=n}trackByIndex(t){return t}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-sample"]],decls:6,vars:2,consts:[[1,"p-2"],[4,"ngFor","ngForOf","ngForTrackBy"],["loading",""],["intersectionObserver","",1,"max-w-sm","rounded","overflow-hidden","shadow-lg","px-5","py-5","m-2",3,"intersectionDebounce","visibilityChange"],[1,"px-3","py-1","text-sm","font-semibold","text-gray-700","mr-2"],[1,"flex"],[1,"flex-grow","content-center","text-6xl","font-sans"],[1,"flex-grow","flex-end","content-center","self-center","text-6xl","font-sans",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"ngTemplateOutlet"],["width","120","height","30","viewBox","0 0 120 30","xmlns","http://www.w3.org/2000/svg","fill","#2196F3"],["cx","15","cy","15","r","15"],["attributeName","r","from","15","to","15","begin","0s","dur","0.8s","values","15;9;15","calcMode","linear","repeatCount","indefinite"],["attributeName","fill-opacity","from","1","to","1","begin","0s","dur","0.8s","values","1;.5;1","calcMode","linear","repeatCount","indefinite"],["cx","60","cy","15","r","9","fill-opacity","0.3"],["attributeName","r","from","9","to","9","begin","0s","dur","0.8s","values","9;15;9","calcMode","linear","repeatCount","indefinite"],["attributeName","fill-opacity","from","0.5","to","0.5","begin","0s","dur","0.8s","values",".5;1;.5","calcMode","linear","repeatCount","indefinite"],["cx","105","cy","15","r","15"]],template:function(t,n){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"h1"),p._uU(2,"Sample with 1000 records"),p.qZA(),p.YNc(3,$,10,5,"ng-container",1),p.qZA(),p.YNc(4,L,10,0,"ng-template",null,2,p.W1O)),2&t&&(p.xp6(3),p.Q6J("ngForOf",n.list)("ngForTrackBy",n.trackByIndex))},directives:[e.sg,f,e.RF,e.n9,e.ED,e.tP],styles:[""]}),t})(),pathMatch:"full"},{path:"demo",component:V,pathMatch:"full"},{path:"",redirectTo:"sample"}]}];let j=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[o.Bz.forChild(I)],o.Bz]}),t})(),R=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[e.ez,Z.Cl,j]]}),t})()}}]);