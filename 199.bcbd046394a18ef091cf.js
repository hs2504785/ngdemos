(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[199],{1705:(t,e,i)=>{"use strict";i.r(e),i.d(e,{BlogModule:()=>tt,entityMetadata:()=>W,postFeatureKey:()=>X,userFeatureKey:()=>V});var s=i(1116),r=i(766),n=i(1041),o=i(5366),c=i(1126),a=i(7112),l=i(3070),u=i(3841),p=i(7064);function d(t,e){if(1&t&&(o.TgZ(0,"mat-option",5),o._uU(1),o.qZA()),2&t){const t=e.$implicit;o.Q6J("value",t.id),o.xp6(1),o.Oqu(t.name)}}function g(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"mat-toolbar",1),o.TgZ(1,"div",2),o.TgZ(2,"mat-form-field"),o.TgZ(3,"mat-label"),o._uU(4,"User"),o.qZA(),o.TgZ(5,"mat-select",3),o.NdJ("selectionChange",function(e){return o.CHM(t),o.oxw().selectUser(e.value)}),o.YNc(6,d,2,2,"mat-option",4),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&t){const t=e.ngIf,i=o.oxw();o.xp6(5),o.Q6J("formControl",i.selectedUser),o.xp6(1),o.Q6J("ngForOf",t)}}let h=(()=>{class t{constructor(t,e,i){this.userService=t,this.route=e,this.router=i,this.selectedUser=new n.NI,this.users$=this.userService.entities$,this.users$.subscribe(t=>{if(t&&t.length){const e=+t[0].id;this.selectedUser.setValue(e),this.selectUser(e,"preserve")}})}selectUser(t,e="merge"){setTimeout(()=>{this.router.navigate([+t],{relativeTo:this.route,queryParamsHandling:e})})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(c.K),o.Y36(r.gz),o.Y36(r.F0))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-admin"]],decls:3,vars:3,consts:[["color","primary",4,"ngIf"],["color","primary"],[1,"d-flex","justify-content-end","w-100","mt-4"],["id","user",3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(o.YNc(0,g,7,2,"mat-toolbar",0),o.ALo(1,"async"),o._UZ(2,"router-outlet")),2&t&&o.Q6J("ngIf",o.lcZ(1,1,e.users$))},directives:[s.O5,r.lC,a.Ye,l.KE,l.hX,u.gD,n.JJ,n.oH,s.sg,p.ey],pipes:[s.Ov],styles:['[_nghost-%COMP%]{display:grid;height:100vh;grid-template:" mat-toolbar     " auto " router-outlet     " 0 " routed-component  " minmax(0,1fr)}router-outlet[_ngcontent-%COMP%]{grid-area:router-outlet}router-outlet[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{grid-area:routed-component}']}),t})();var m=i(1671),f=i(1305),v=i(9996),Z=i(3884);const y=(0,m.ZF)("router"),{selectRouteParam:A,selectQueryParam:I}=Z.Ug(y),b=A("userId"),x=(0,m.P1)(b,t=>t?+t:void 0),U=I("postId"),T=(0,m.P1)(U,t=>+t);var P=i(8302),q=i(2797),w=i(9550),_=i(5959),O=i(4019),C=i(4689),Y=i(5416),J=i(4369),F=i(667);function M(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"mat-list-item",4),o.NdJ("click",function(){const e=o.CHM(t).$implicit;return o.oxw().selectPost(e.id)}),o._uU(1),o.qZA()}if(2&t){const t=e.$implicit,i=o.oxw();o.ekj("mat-list-item-active",t.id===i.selectedPostId),o.xp6(1),o.Oqu(t.title)}}let S=(()=>{class t{constructor(t,e,i,s){this.userService=t,this.postService=e,this.router=i,this.store=s,this.unsubscribe=new _.xQ}ngOnInit(){this.currentUserId$=this.store.pipe((0,m.Ys)(x)),this.initializevalues()}initializevalues(){this.posts=this.currentUserId$.pipe((0,O.b)(t=>this.userId=t),(0,C.w)(t=>this.postService.getPostsByUser(t))),this.store.pipe((0,m.Ys)(T)).pipe((0,Y.R)(this.unsubscribe)).subscribe(t=>this.selectedPostId=t?+t:void 0)}selectPost(t){this.router.navigate([],{queryParams:{postId:t},queryParamsHandling:"merge"}),this.selectedPostId=t}createPost(){this.postService.add({body:"placeholder body",title:"placeholder title",userId:this.userId||0})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(c.K),o.Y36(P.L),o.Y36(r.F0),o.Y36(m.yh))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-post-list"]],decls:10,vars:3,consts:[["mat-icon-button","",3,"click"],[1,"ti-plus"],["role","list"],["role","listitem",3,"mat-list-item-active","click",4,"ngFor","ngForOf"],["role","listitem",3,"click"]],template:function(t,e){1&t&&(o.TgZ(0,"mat-card"),o.TgZ(1,"mat-card-header"),o.TgZ(2,"mat-card-title"),o._uU(3,"Posts on your blog"),o.qZA(),o.TgZ(4,"button",0),o.NdJ("click",function(){return e.createPost()}),o._UZ(5,"i",1),o.qZA(),o.qZA(),o.TgZ(6,"mat-card-content"),o.TgZ(7,"mat-action-list",2),o.YNc(8,M,2,3,"mat-list-item",3),o.ALo(9,"async"),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.xp6(8),o.Q6J("ngForOf",o.lcZ(9,1,e.posts)))},directives:[q.a8,q.dk,q.n5,J.lW,q.dn,F.i$,s.sg,F.Tg],pipes:[s.Ov],styles:["mat-list-item[_ngcontent-%COMP%]{height:auto!important}mat-list-item[_ngcontent-%COMP%]     .mat-list-item-content{padding:10px!important}.mat-list-item-active[_ngcontent-%COMP%]{background-color:#d3d3d3}.mat-card-header[_ngcontent-%COMP%]{align-items:baseline}"]}),t})();var L=i(3835);function N(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"mat-form-field"),o.TgZ(1,"input",2),o.NdJ("blur",function(){o.CHM(t);const e=o.oxw().ngIf;return o.oxw().setTitle(e)}),o.qZA(),o.qZA()}if(2&t){const t=o.oxw(2);o.xp6(1),o.Q6J("formControl",t.title)}}function $(t,e){if(1&t){const t=o.EpF();o.ynx(0),o.TgZ(1,"mat-card-title"),o._uU(2),o.qZA(),o.TgZ(3,"button",3),o.NdJ("click",function(){o.CHM(t);const e=o.oxw().ngIf;return o.oxw().delete(e)}),o._UZ(4,"i",4),o.qZA(),o.TgZ(5,"button",3),o.NdJ("click",function(){return o.CHM(t),o.oxw(2).editingTitle=!0}),o._UZ(6,"i",5),o.qZA(),o.BQk()}if(2&t){const t=o.oxw().ngIf;o.xp6(2),o.Oqu(t.title)}}function k(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"mat-form-field"),o.TgZ(1,"input",2),o.NdJ("blur",function(){o.CHM(t);const e=o.oxw().ngIf;return o.oxw().setBody(e)}),o.qZA(),o.qZA()}if(2&t){const t=o.oxw(2);o.xp6(1),o.Q6J("formControl",t.body)}}function Q(t,e){if(1&t){const t=o.EpF();o.ynx(0),o.TgZ(1,"button",3),o.NdJ("click",function(){return o.CHM(t),o.oxw(2).editingBody=!0}),o._UZ(2,"i",6),o._uU(3," Edit Body "),o.qZA(),o.TgZ(4,"mat-card-title"),o._uU(5),o.qZA(),o.BQk()}if(2&t){const t=o.oxw().ngIf;o.xp6(5),o.Oqu(t.body)}}function B(t,e){if(1&t&&(o.TgZ(0,"mat-card"),o.TgZ(1,"mat-card-header",1),o.YNc(2,N,2,1,"mat-form-field",0),o.YNc(3,$,7,1,"ng-container",0),o.qZA(),o.TgZ(4,"mat-card-content"),o.YNc(5,k,2,1,"mat-form-field",0),o.YNc(6,Q,6,1,"ng-container",0),o.qZA(),o.qZA()),2&t){const t=o.oxw();o.xp6(2),o.Q6J("ngIf",t.editingTitle),o.xp6(1),o.Q6J("ngIf",!t.editingTitle),o.xp6(2),o.Q6J("ngIf",t.editingBody),o.xp6(1),o.Q6J("ngIf",!t.editingBody)}}let z=(()=>{class t{constructor(t,e,i,s){this.router=t,this.postService=e,this.userService=i,this.store=s,this.editingTitle=!1,this.editingBody=!1,this.title=new n.NI,this.body=new n.NI}ngOnInit(){this.currentUserId$=this.store.pipe((0,m.Ys)(x)),this.initializeValues()}initializeValues(){const t=this.postService.entities$,e=this.store.pipe((0,m.Ys)(T)),i=(0,f.aj)([t,e.pipe((0,L.h)(t=>!isNaN(t)))]).pipe((0,v.U)(([t,e])=>t.find(t=>t.id===e)));this.post$=(0,f.aj)([i,this.currentUserId$]).pipe((0,v.U)(([t,e])=>e===(null==t?void 0:t.userId)?t:void 0),(0,O.b)(t=>{t?(this.title.setValue(t.title),this.body.setValue(t.body)):setTimeout(()=>{this.router.navigate([],{queryParams:{postId:void 0},queryParamsHandling:"merge"})})}))}delete(t){window.confirm("Are you sure you want to delete this post?")&&this.postService.delete(t)}setTitle(t){this.editingTitle=!1,this.postService.update(Object.assign(Object.assign({},t),{title:this.title.value}))}setBody(t){this.editingBody=!1,this.postService.update(Object.assign(Object.assign({},t),{body:this.body.value}))}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(r.F0),o.Y36(P.L),o.Y36(c.K),o.Y36(m.yh))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-post"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"bg-light"],["matInput","",3,"formControl","blur"],["mat-icon-button","",3,"click"],[1,"ti-trash"],["title","Edit Title",1,"ti-pencil"],[1,"ti-pencil"]],template:function(t,e){1&t&&(o.YNc(0,B,7,4,"mat-card",0),o.ALo(1,"async")),2&t&&o.Q6J("ngIf",o.lcZ(1,1,e.post$))},directives:[s.O5,q.a8,q.dk,q.dn,l.KE,w.Nt,n.Fj,n.JJ,n.oH,q.n5,J.lW],pipes:[s.Ov],styles:[".mat-card-header[_ngcontent-%COMP%]{align-items:baseline}"]}),t})();function j(t,e){1&t&&(o.ynx(0),o._UZ(1,"app-post-list"),o._UZ(2,"app-post"),o.BQk())}function E(t,e){if(1&t&&(o.ynx(0),o.TgZ(1,"mat-card"),o.TgZ(2,"mat-card-header"),o.TgZ(3,"mat-card-title"),o._uU(4),o.qZA(),o.qZA(),o.TgZ(5,"mat-card-content",1),o.TgZ(6,"div"),o.TgZ(7,"mat-form-field"),o._UZ(8,"input",2),o.qZA(),o.qZA(),o.TgZ(9,"div"),o.TgZ(10,"mat-form-field"),o._UZ(11,"input",3),o.qZA(),o.qZA(),o.TgZ(12,"div"),o.TgZ(13,"mat-form-field"),o._UZ(14,"input",4),o.qZA(),o.qZA(),o.TgZ(15,"div"),o.TgZ(16,"mat-form-field"),o._UZ(17,"input",5),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(18,j,3,0,"ng-container",0),o.ALo(19,"async"),o.BQk()),2&t){const t=e.ngIf,i=o.oxw();let s;o.xp6(4),o.Oqu(t.name),o.xp6(4),o.Q6J("value",t.username),o.xp6(3),o.Q6J("value",t.name),o.xp6(3),o.Q6J("value",t.email),o.xp6(3),o.Q6J("value",t.phone),o.xp6(1),o.Q6J("ngIf",null==(s=o.lcZ(19,6,i.posts$))?null:s.length)}}let K=(()=>{class t{constructor(t,e,i){this.userService=t,this.postService=e,this.store=i}ngOnInit(){const t=this.userService.entities$,e=this.store.pipe((0,m.Ys)(x));this.user$=(0,f.aj)([t,e]).pipe((0,v.U)(([t,e])=>t.find(t=>t.id===e))),this.posts$=this.postService.entities$}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(c.K),o.Y36(P.L),o.Y36(m.yh))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-user"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"user"],["matInput","","placeholder","Username","readonly","",3,"value"],["matInput","","placeholder","Name","readonly","",3,"value"],["matInput","","placeholder","Email","readonly","",3,"value"],["matInput","","placeholder","Phone Number","readonly","",3,"value"]],template:function(t,e){1&t&&(o.YNc(0,E,20,8,"ng-container",0),o.ALo(1,"async")),2&t&&o.Q6J("ngIf",o.lcZ(1,1,e.user$))},directives:[s.O5,q.a8,q.dk,q.n5,q.dn,l.KE,w.Nt,S,z],pipes:[s.Ov],styles:['[_nghost-%COMP%]{display:grid;grid-template-areas:"user user" "list post";grid-template-columns:1fr 1fr;grid-template-rows:auto 1fr;grid-gap:10px;margin:10px}mat-card[_ngcontent-%COMP%]{grid-area:user}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr}app-post-list[_ngcontent-%COMP%]{grid-area:list;overflow:auto}app-post[_ngcontent-%COMP%]{grid-area:post}.user[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-underline{background-color:none!important;height:auto}']}),t})();var D=i(6141),G=i(5564),H=i(4053);const R=[{path:"",component:h,children:[{path:":userId",component:K}]}],V="User",X="Post",W={[V]:{entityDispatcherOptions:{optimisticUpdate:!0}},[X]:{entityDispatcherOptions:{optimisticUpdate:!0}}};let tt=(()=>{class t{constructor(t,e,i,s){this.eds=t,this.entityDataService=e,this.userDataService=i,this.postDataService=s,this.eds.registerMetadataMap(W),this.entityDataService.registerService(V,this.userDataService),this.entityDataService.registerService(X,this.postDataService)}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(D.f0),o.LFG(D.sP),o.LFG(G.M),o.LFG(H.V))},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[s.ez,n.UX,w.c,l.lN,a.g0,u.LD,q.QW,J.ot,F.ie,r.Bz.forChild(R)]]}),t})()},4053:(t,e,i)=>{"use strict";i.d(e,{V:()=>c});var s=i(6141),r=i(1705),n=i(5366),o=i(2693);let c=(()=>{class t extends s.EJ{constructor(t,e){super(r.postFeatureKey,t,e),this.API_URL="https://jsonplaceholder.typicode.com/posts"}getAll(){return this.http.get(`${this.API_URL}`)}add(t){return this.http.post(`${this.API_URL}`,t)}update(t){return this.http.put(`${this.API_URL}/${t.id}`,t.changes)}delete(t){return this.http.delete(`${this.API_URL}/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(o.eN),n.LFG(s.hR))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac}),t})()},8302:(t,e,i)=>{"use strict";i.d(e,{L:()=>o});var s=i(6141),r=i(9996),n=i(5366);let o=(()=>{class t extends s.c8{constructor(t){super("Post",t),this.posts=this.entities$}getPostsByUser(t){return this.posts.pipe((0,r.U)(e=>e.filter(e=>e.userId===+t)))}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(s.yV))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},5564:(t,e,i)=>{"use strict";i.d(e,{M:()=>c});var s=i(6141),r=i(1705),n=i(5366),o=i(2693);let c=(()=>{class t extends s.EJ{constructor(t,e){super(r.userFeatureKey,t,e),this.API_URL="https://jsonplaceholder.typicode.com/users",this.getAll()}getAll(){return this.http.get(`${this.API_URL}`)}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(o.eN),n.LFG(s.hR))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac}),t})()},1126:(t,e,i)=>{"use strict";i.d(e,{K:()=>n});var s=i(6141),r=i(5366);let n=(()=>{class t extends s.c8{constructor(t){super("User",t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s.yV))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},7199:(t,e,i)=>{"use strict";i.r(e),i.d(e,{BlogdemoComponent:()=>o,BlogdemoModule:()=>Z,BlogdemoService:()=>r});var s=i(5366);let r=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var n=i(766);let o=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["lib-blogdemo"]],decls:1,vars:0,template:function(t,e){1&t&&s._UZ(0,"router-outlet")},directives:[n.lC],styles:["[_nghost-%COMP%]{height:100vh}"]}),t})();var c=i(1116),a=i(4369),l=i(7112),u=i(4019),p=i(3530),d=i(1126),g=i(8302);let h=(()=>{class t{constructor(t,e){this.userService=t,this.postService=e}resolve(t,e){return this.postService.loaded$.pipe((0,u.b)(t=>{t||(this.userService.getAll(),this.postService.getAll())}),(0,p.P)())}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(d.K),s.LFG(g.L))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();var m=i(4053),f=i(5564);const v=[{path:"",component:o,children:[{path:"blog",loadChildren:()=>Promise.resolve().then(i.bind(i,1705)).then(t=>t.BlogModule),resolve:[h]},{path:"",redirectTo:"blog"}]}];let Z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[f.M,m.V,h],imports:[[c.ez,l.g0,a.ot,n.Bz.forChild(v)]]}),t})()}}]);