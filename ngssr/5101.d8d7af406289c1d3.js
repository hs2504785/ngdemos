"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[5101],{5101:(Q,A,r)=>{r.d(A,{xA:()=>k,zj:()=>v});var t=r(5879),M=r(2096),T=r(2664),E=r(3019),D=r(8645),f=r(2438),P=r(5619),g=r(2181),z=r(3572),S=r(1374),_=r(7398),$=r(4664),u=r(9773),p=r(6814);const L=["backdrop"],B=["dialog"];function H(n,s){if(1&n&&t.\u0275\u0275element(0,"div",6),2&n){const e=t.\u0275\u0275nextContext(),i=t.\u0275\u0275reference(3);t.\u0275\u0275property("dialogDragEnabled",!0)("dialogDragTarget",i)("dragConstraint",e.config.dragConstraint)}}function V(n,s){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",7),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(o.closeDialog())}),t.\u0275\u0275namespaceSVG(),t.\u0275\u0275elementStart(1,"svg",8),t.\u0275\u0275element(2,"path",9),t.\u0275\u0275elementEnd()()}}class v{}class b extends v{constructor(s={}){super(),this.beforeCloseGuards=[],this.mutate(s)}close(s){this.canClose(s).pipe((0,g.h)(Boolean)).subscribe({next:()=>this.onClose(s)})}beforeClose(s){this.beforeCloseGuards.push(s)}resetDrag(s){this.onReset(s)}canClose(s){const e=this.beforeCloseGuards.map(i=>i(s)).filter(i=>void 0!==i&&!0!==i).map(i=>"boolean"==typeof i?(0,M.of)(i):(0,T.D)(i).pipe((0,g.h)(o=>!o)));return(0,E.T)(...e).pipe((0,z.d)(!0),(0,S.P)())}mutate(s){Object.assign(this,s)}asDialogRef(){return this}}function m(n){return function U(n){return null==n}(n)?"":function K(n){return"string"==typeof n}(n)?n:`${n}px`}let w=(()=>{class n{constructor(){this.dialogDragEnabled=!1,this.host=(0,t.inject)(t.ElementRef),this.zone=(0,t.inject)(t.NgZone),this.delta={x:0,y:0},this.offset={x:0,y:0},this.enabled=!0,this.destroy$=new D.x}set dialogDragOffset(e){this.reset(e)}ngAfterViewInit(){this.enabled&&this.init()}ngOnChanges(){!this.enabled&&this.dialogDragEnabled&&this.dialogDragTarget&&(this.enabled=!0,this.handle?this.handle.style.setProperty("cursor","move"):this.enabled&&this.init()),this.dialogDragEnabled||(this.enabled=!1,this.handle&&this.handle.style.setProperty("cursor",""))}ngOnDestroy(){this.destroy$.next()}reset(e){const i={x:0,y:0};this.offset={...i,...e},this.delta={...i},this.translate()}setupEvents(){this.zone.runOutsideAngular(()=>{const e=(0,f.R)(this.handle,"mousedown"),i=(0,f.R)(document,"mousemove"),o=(0,f.R)(document,"mouseup");e.pipe((0,g.h)(()=>this.enabled),(0,_.U)(l=>({startX:l.clientX,startY:l.clientY})),(0,$.w)(({startX:l,startY:d})=>i.pipe((0,_.U)(c=>{c.preventDefault(),this.delta={x:c.clientX-l,y:c.clientY-d},"constrain"===this.dragConstraint&&this.checkConstraint()}),(0,u.R)(o))),(0,u.R)(this.destroy$)).subscribe(()=>{0===this.delta.x&&0===this.delta.y||this.translate()}),o.pipe((0,g.h)(()=>this.enabled),(0,g.h)(()=>0!==this.delta.x||0!==this.delta.y),(0,u.R)(this.destroy$)).subscribe(()=>{"bounce"===this.dragConstraint&&(this.checkConstraint(),this.translate()),this.offset.x+=this.delta.x,this.offset.y+=this.delta.y,this.delta={x:0,y:0}})})}translate(){this.target&&this.zone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this.target.style.setProperty("transform",`translate(${this.translateX}px, ${this.translateY}px)`)})})}get translateX(){return this.offset.x+this.delta.x}get translateY(){return this.offset.y+this.delta.y}init(){if(!this.dialogDragTarget)throw new Error("You need to specify the drag target");this.handle=this.dialogDragHandle instanceof Element?this.dialogDragHandle:"string"==typeof this.dialogDragHandle&&this.dialogDragHandle?document.querySelector(this.dialogDragHandle):this.host.nativeElement,this.handle&&this.enabled&&this.handle.style.setProperty("cursor","move"),this.target=this.dialogDragTarget instanceof HTMLElement?this.dialogDragTarget:document.querySelector(this.dialogDragTarget),this.setupEvents(),this.translate()}checkConstraint(){const{width:e,height:i}=this.target.getBoundingClientRect(),{innerWidth:o,innerHeight:a}=window,l=this.translateY>0?this.translateY+i/2:this.translateY-i/2,d=a/2,c=this.translateX>0?this.translateX+e/2:this.translateX-e/2,h=o/2;-d>l&&(this.delta.y=i/2-d-this.offset.y),d<l&&(this.delta.y=d-i/2-this.offset.y),-h>c&&(this.delta.x=e/2-h-this.offset.x),h<c&&(this.delta.x=h-e/2-this.offset.x)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.\u0275\u0275defineDirective({type:n,selectors:[["","dialogDraggable",""]],inputs:{dialogDragHandle:"dialogDragHandle",dialogDragTarget:"dialogDragTarget",dialogDragEnabled:"dialogDragEnabled",dialogDragOffset:"dialogDragOffset",dragConstraint:"dragConstraint"},standalone:!0,features:[t.\u0275\u0275NgOnChangesFeature]}),n})();const C=new t.InjectionToken("A reference to the document. Useful for iframes that want appends to parent window",{providedIn:"root",factory:()=>(0,t.inject)(p.K0)}),y=new t.InjectionToken("config",{providedIn:"root",factory:()=>({})});const I=new t.InjectionToken("Global dialog config token",{providedIn:"root",factory:()=>function O(){return{id:void 0,container:(0,t.inject)(C).body,backdrop:!0,closeButton:!0,enableClose:!0,draggable:!1,dragConstraint:"none",resizable:!1,size:"md",windowClass:void 0,width:void 0,height:void 0,minHeight:void 0,maxHeight:void 0,data:void 0,vcr:void 0,sizes:{sm:{height:"auto",width:"400px"},md:{height:"auto",width:"560px"},lg:{height:"auto",width:"800px"},fullScreen:{height:"100%",width:"100%"}},onClose:void 0,onOpen:void 0}}()}),j=new t.InjectionToken("Nodes inserted into the dialog");let W=(()=>{class n{constructor(){this.config=(0,t.inject)(y),this.dialogRef=(0,t.inject)(b),this.size=this.config.sizes?.[this.config.size||"md"],this.styles={width:m(this.config.width||this.size?.width),height:m(this.config.height||this.size?.height),minHeight:m(this.config.minHeight||this.size?.minHeight),maxHeight:m(this.config.maxHeight||this.size?.maxHeight)},this.destroy$=new D.x,this.nodes=(0,t.inject)(j),this.document=(0,t.inject)(p.K0),this.host=(0,t.inject)(t.ElementRef).nativeElement,this.dialogService=(0,t.inject)(k),this.host.id=this.config.id,this.nodes.forEach(e=>this.host.appendChild(e)),this.config.windowClass&&this.config.windowClass.split(/\s/).filter(i=>i).forEach(i=>this.host.classList.add(i))}ngOnInit(){const e=this.config.backdrop?this.backdrop.nativeElement:this.document.body,i=this.dialogElement.nativeElement,o=(0,f.R)(e,"click",{capture:!0}).pipe((0,g.h)(({target:a})=>!i.contains(a)));if(o.pipe((0,u.R)(this.destroy$)).subscribe(this.dialogRef.backdropClick$),this.config.enableClose&&(0,E.T)((0,f.R)(this.document.body,"keyup").pipe((0,g.h)(({key:a})=>"Escape"===a)),o).pipe((0,u.R)(this.destroy$),(0,g.h)(()=>"onlyLastStrategy"!==this.config.enableClose||this.dialogService.isLastOpened(this.config.id))).subscribe(()=>this.closeDialog()),this.nodes.forEach(a=>i.appendChild(a)),this.config.zIndexGetter){const a=this.config.zIndexGetter().toString();e.style.setProperty("--dialog-backdrop-z-index",a)}}reset(e){this.config.draggable&&this.draggable.reset(e)}closeDialog(){this.dialogRef.close()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.dialogRef=null,this.nodes=null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ngneat-dialog"]],viewQuery:function(e,i){if(1&e&&(t.\u0275\u0275viewQuery(L,7),t.\u0275\u0275viewQuery(B,7),t.\u0275\u0275viewQuery(w,5)),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(i.backdrop=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(i.dialogElement=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(i.draggable=o.first)}},standalone:!0,features:[t.\u0275\u0275StandaloneFeature],decls:6,vars:8,consts:[[1,"ngneat-dialog-backdrop",3,"hidden"],["backdrop",""],["role","dialog",1,"ngneat-dialog-content",3,"ngStyle"],["dialog",""],["class","ngneat-drag-marker","dialogDraggable","",3,"dialogDragEnabled","dialogDragTarget","dragConstraint",4,"ngIf"],["class","ngneat-close-dialog",3,"click",4,"ngIf"],["dialogDraggable","",1,"ngneat-drag-marker",3,"dialogDragEnabled","dialogDragTarget","dragConstraint"],[1,"ngneat-close-dialog",3,"click"],["viewBox","0 0 329.26933 329","xmlns","http://www.w3.org/2000/svg"],["fill","currentColor","d","m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0"]],template:function(e,i){1&e&&(t.\u0275\u0275elementStart(0,"div",0,1)(2,"div",2,3),t.\u0275\u0275template(4,H,1,3,"div",4),t.\u0275\u0275template(5,V,3,0,"div",5),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275classProp("ngneat-dialog-backdrop-visible",i.config.backdrop),t.\u0275\u0275property("hidden",!i.config.backdrop),t.\u0275\u0275advance(2),t.\u0275\u0275classProp("ngneat-dialog-resizable",i.config.resizable),t.\u0275\u0275property("ngStyle",i.styles),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",i.config.draggable),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.config.closeButton))},dependencies:[w,p.ez,p.O5,p.PC],styles:[".ngneat-dialog-content{display:flex;flex-direction:column;overflow:hidden;position:relative;animation:dialog-open .4s cubic-bezier(.25,.8,.25,1);border-radius:var(--dialog-content-border-radius, 4px);box-sizing:border-box;box-shadow:var(--dialog-content-box-shadow, 0px 11px 19px rgba(15, 20, 58, .14));background:var(--dialog-content-bg, #fff);width:auto;max-width:100%;height:auto;max-height:100%}@keyframes dialog-open{0%{transform:translate(50px)}to{transform:none}}.ngneat-dialog-content.ngneat-dialog-resizable{resize:both}.ngneat-dialog-backdrop{position:fixed;display:flex;align-items:center;justify-content:center;inset:0;height:100%;width:100%;padding:30px;z-index:var(--dialog-backdrop-z-index, 1050);background-color:transparent;animation:dialog-open-backdrop .3s}.ngneat-dialog-backdrop.ngneat-dialog-backdrop-visible{background:var(--dialog-backdrop-bg, rgba(0, 0, 0, .32))}@keyframes dialog-open-backdrop{0%{opacity:0}to{opacity:1}}.ngneat-drag-marker{position:absolute;left:0;top:0;cursor:move;width:100%;height:10px}.ngneat-close-dialog{display:flex;align-items:center;justify-content:center;position:absolute;cursor:pointer;top:var(--dialog-close-btn-top, 6px);right:var(--dialog-close-btn-right, 10px);width:var(--dialog-close-btn-size, 30px);height:var(--dialog-close-btn-size, 30px);color:var(--dialog-close-btn-color, #5f6368);transition:all .2s ease-in-out;border-radius:50%}.ngneat-close-dialog svg{width:var(--dialog-close-svg-size, 12px);height:var(--dialog-close-svg-size, 12px)}.ngneat-close-dialog:hover{color:var(--dialog-close-btn-color-hover, #5f6368);background-color:var(--dialog-close-btn-bg-hover, #eee)}body.ngneat-dialog-hidden{overflow:hidden}\n"],encapsulation:2}),n})();const R="ngneat-dialog-hidden";let k=(()=>{class n{constructor(){this.appRef=(0,t.inject)(t.ApplicationRef),this.injector=(0,t.inject)(t.EnvironmentInjector),this.document=(0,t.inject)(C),this.globalConfig=(0,t.inject)(I),this.dialogs=[],this.hasOpenDialogSub=new P.X(!1),this.hasOpenDialogs$=this.hasOpenDialogSub.asObservable()}hasOpenDialogs(){return this.dialogs.length>0}isOpen(e){return this.dialogs.some(i=>i.id===e)}isLastOpened(e){const i=e instanceof v?e.id:e;return this.dialogs.at(-1)?.id===i}closeAll(){this.dialogs.forEach(e=>e.close())}open(e,i={}){const o=this.mergeConfig(i);o.onOpen?.();const a=new b({id:o.id,data:o.data,backdropClick$:new D.x});this.throwIfIDAlreadyExists(o.id);const l={config:o,dialogRef:a};return this.dialogs.push(a),this.hasOpenDialogSub.next(!0),1===this.dialogs.length&&this.document.body.classList.add(R),e instanceof t.TemplateRef?this.openTemplate(e,l):"function"==typeof e?this.openComponent(e,l):function F(n){throw new TypeError(`Dialog must receive a Component or a TemplateRef, but this has been passed instead: ${n}`)}(e)}openTemplate(e,{config:i,dialogRef:o}){const a={$implicit:o,config:i},l=i.vcr?.createEmbeddedView(e,a)||e.createEmbeddedView(a);return this.attach({dialogRef:o,config:i,ref:e,view:l,attachToApp:!i.vcr})}openComponent(e,{config:i,dialogRef:o}){const a=(0,t.createComponent)(e,{elementInjector:t.Injector.create({providers:[{provide:v,useValue:o},{provide:y,useValue:i}],parent:i.vcr?.injector||this.injector}),environmentInjector:this.injector});return this.attach({dialogRef:o,config:i,ref:a,view:a.hostView,attachToApp:!0})}attach({dialogRef:e,config:i,ref:o,view:a,attachToApp:l}){const d=this.createDialog(i,e,a),c=i.container instanceof t.ElementRef?i.container.nativeElement:i.container,h={after:new D.x};return e.mutate({id:i.id,data:i.data,ref:o,onClose:x=>{this.globalConfig.onClose?.(),this.dialogs=this.dialogs.filter(({id:Y})=>e.id!==Y),this.hasOpenDialogSub.next(this.hasOpenDialogs()),c.removeChild(d.location.nativeElement),this.appRef.detachView(d.hostView),this.appRef.detachView(a),d.destroy(),a.destroy(),e.backdropClick$.complete(),e.mutate({ref:null,onClose:null,afterClosed$:null,backdropClick$:null,beforeCloseGuards:null,onReset:null}),h.after.next(x),h.after.complete(),0===this.dialogs.length&&this.document.body.classList.remove(R)},afterClosed$:h.after.asObservable(),onReset:x=>{d.instance.reset(x)}}),c.appendChild(d.location.nativeElement),this.appRef.attachView(d.hostView),l&&this.appRef.attachView(a),e.asDialogRef()}createDialog(e,i,o){return(0,t.createComponent)(W,{elementInjector:t.Injector.create({providers:[{provide:b,useValue:i},{provide:j,useValue:o.rootNodes},{provide:y,useValue:e}],parent:this.injector}),environmentInjector:this.injector})}mergeConfig(e){return{...this.globalConfig,id:`dialog-${Math.random().toString(36).substring(7)}`,...e,sizes:this.globalConfig?.sizes}}throwIfIDAlreadyExists(e){if(this.dialogs.find(i=>i.id===e))throw new Error(`Please, ID must be unique, but there is already a dialog created with this ID: ${e}`)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}]);