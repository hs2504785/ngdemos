"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[5604],{6822:(y,M,t)=>{t.d(M,{K:()=>D});var S=t(6286),s=t(2223),p=t(9401),v=t(8097),U=t(9114),m=t(1728);let D=(()=>{class C{constructor(f,u,E){this.fb=f,this.dialogRef=u,this.dialogTitle=E.dialogTitle,this.user=E.user,this.mode=E.mode;const r={email:[""],first_name:[""],last_name:[""]};"update"==this.mode?(this.form=this.fb.group(r),this.form.patchValue({...this.user})):"create"==this.mode&&(this.form=this.fb.group({...r}))}onClose(){this.dialogRef.close()}onSave(){const f={...this.user,...this.form.value};"update"==this.mode?(console.log("Update User",f),this.dialogRef.close(f)):"create"==this.mode&&(console.log("Add User",f),f.avatar="https://reqres.in/img/faces/10-image.jpg",this.dialogRef.close(f))}}return C.\u0275fac=function(f){return new(f||C)(s.\u0275\u0275directiveInject(p.qu),s.\u0275\u0275directiveInject(S.so),s.\u0275\u0275directiveInject(S.WI))},C.\u0275cmp=s.\u0275\u0275defineComponent({type:C,selectors:[["app-user-cs-dialog"]],decls:16,vars:2,consts:[["mat-dialog-title",""],[3,"formGroup"],["matInput","","placeholder","Email","formControlName","email"],["matInput","","placeholder","First Name","formControlName","first_name"],["matInput","","placeholder","Last Name","formControlName","last_name"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(f,u){1&f&&(s.\u0275\u0275elementStart(0,"h2",0),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(2,"mat-dialog-content"),s.\u0275\u0275elementContainerStart(3)(4,1),s.\u0275\u0275elementStart(5,"mat-form-field"),s.\u0275\u0275element(6,"input",2),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(7,"mat-form-field"),s.\u0275\u0275element(8,"input",3),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(9,"mat-form-field"),s.\u0275\u0275element(10,"input",4),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementContainerEnd()(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(11,"mat-dialog-actions")(12,"button",5),s.\u0275\u0275listener("click",function(){return u.onClose()}),s.\u0275\u0275text(13,"Close"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(14,"button",6),s.\u0275\u0275listener("click",function(){return u.onSave()}),s.\u0275\u0275text(15,"Save"),s.\u0275\u0275elementEnd()()),2&f&&(s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate(u.dialogTitle),s.\u0275\u0275advance(3),s.\u0275\u0275property("formGroup",u.form))},dependencies:[S.uh,S.xY,S.H8,v.Nt,U.KE,m.lW,p.Fj,p.JJ,p.JL,p.sg,p.u],changeDetection:0}),C})()},7695:(y,M,t)=>{t.d(M,{O:()=>E});var S=t(4280),s=t(515),p=t(3900),v=t(8505),U=t(262),m=t(2223),D=t(4004),C=t(3144),P=t(915);let f=(()=>{class r{constructor(c,O){this.http=c,this.cacheService=O,this.API_URL="https://reqres.in/api/users"}getUsers(){return this.cacheService.getData(`${this.API_URL}`).pipe((0,D.U)(c=>c.data))}addUser(c){return this.http.post(`${this.API_URL}`,c)}updateUser(c){return this.http.put(`${this.API_URL}/${c.id}`,c)}removeUser(c){return this.http.delete(`${this.API_URL}/${c}`)}}return r.\u0275fac=function(c){return new(c||r)(m.\u0275\u0275inject(C.eN),m.\u0275\u0275inject(P.Q))},r.\u0275prov=m.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var u=t(9085);let E=(()=>{class r extends S.m1{constructor(c,O){super({users:[],selectdUserId:1}),this.userCsService=c,this.route=O,this.users$=this.select(n=>n.users),this.selectedUserId$=this.select(n=>n.selectdUserId),this.usersCount$=this.select(this.users$,n=>n.length),this.top3users$=this.select(this.users$,n=>n.slice(0,3)),this.userById$=this.select(this.users$,this.selectedUserId$,(n,i)=>n.find(d=>d.id===i)),this.getUsers=this.effect(n=>n.pipe((0,p.w)(()=>this.userCsService.getUsers().pipe((0,v.b)({next:i=>this.setUsers(i),error:i=>this.logError(i)}),(0,U.K)(()=>s.E))))),this.addUser=this.effect(n=>n.pipe((0,p.w)(i=>this.userCsService.addUser(i).pipe((0,v.b)({next:d=>this.addUserInStore(d),error:d=>this.logError(d)}),(0,U.K)(()=>s.E))))),this.updateUser=this.effect(n=>n.pipe((0,p.w)(i=>this.userCsService.updateUser(i).pipe((0,v.b)({next:d=>this.updateUserInStore(d),error:d=>this.logError(d)}),(0,U.K)(()=>s.E))))),this.removeUser=this.effect(n=>n.pipe((0,p.w)(i=>this.userCsService.removeUser(+i).pipe((0,v.b)({next:d=>this.removeUserFromStore(i),error:d=>this.logError(d)}),(0,U.K)(()=>s.E))))),this.setUsers=this.updater((n,i)=>({...n,users:[...n.users,...i]})),this.addUserInStore=this.updater((n,i)=>({...n,users:[i,...n.users]})),this.removeUserFromStore=this.updater((n,i)=>({...n,users:n.users.filter(d=>d.id!==+i)})),this.updateUserInStore=this.updater((n,i)=>({...n,users:n.users.map(d=>d.id===i.id?i:d)}))}logError(c){console.log("Errr",c)}}return r.\u0275fac=function(c){return new(c||r)(m.\u0275\u0275inject(f),m.\u0275\u0275inject(u.gz))},r.\u0275prov=m.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac}),r})()},915:(y,M,t)=>{t.d(M,{Q:()=>f});var S=t(9646),s=t(4707),p=t(249),v=t(576),m=t(8343),D=t(8505),C=t(2223),P=t(3144);let f=(()=>{class u{constructor(r){this.http=r,this.responseCache=new Map}getData(r){const I=this.responseCache.get(r);return I?(0,S.of)(I):this.http.get(r).pipe(function U(u,E,r,I){r&&!(0,v.m)(r)&&(I=r);const c=(0,v.m)(r)?r:void 0;return O=>(0,p.O)(new s.t(u,E,I),c)(O)}(1),(0,m.x)(),(0,D.b)(c=>{this.responseCache.set(r,c)}))}clearCache(){this.responseCache.clear()}}return u.\u0275fac=function(r){return new(r||u)(C.\u0275\u0275inject(P.eN))},u.\u0275prov=C.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},4280:(y,M,t)=>{t.d(M,{m1:()=>B});var S=t(9751),s=t(727),p=t(3101),v=t(4707),U=t(5191),m=t(9646),D=t(233),C=t(515),P=t(2843),f=t(7159),u=t(9841),E=t(7579),r=t(5363),I=t(8505),c=t(1365),O=t(4004),n=t(262),i=t(2722),d=t(5698),K=t(1884),L=t(4782),_=t(2223);function R(a){return"function"==typeof a.ngrxOnStoreInit}function $(a){return"function"==typeof a.ngrxOnStateInit}const b=new _.InjectionToken("@ngrx/component-store Initial State");let B=(()=>{class a{constructor(e){this.destroySubject$=new v.t(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new v.t(1),this.isInitialized=!1,this.state$=this.select(o=>o),this.\u0275hasProvider=!1,e&&this.initState(e),this.checkProviderForHooks()}ngOnDestroy(){this.stateSubject$.complete(),this.destroySubject$.next()}updater(e){return o=>{let g,l=!0;const x=((0,U.b)(o)?o:(0,m.of)(o)).pipe((0,r.Q)(D.N),(0,I.b)(()=>this.assertStateIsInitialized()),(0,c.M)(this.stateSubject$),(0,O.U)(([j,H])=>e(H,j)),(0,I.b)(j=>this.stateSubject$.next(j)),(0,n.K)(j=>l?(g=j,C.E):(0,P._)(j)),(0,i.R)(this.destroy$)).subscribe();if(g)throw g;return l=!1,x}}initState(e){(0,f.x)([e],D.N).subscribe(o=>{this.isInitialized=!0,this.stateSubject$.next(o)})}setState(e){"function"!=typeof e?this.initState(e):this.updater(e)()}patchState(e){const o="function"==typeof e?e(this.get()):e;this.updater((l,g)=>({...l,...g}))(o)}get(e){let o;return this.assertStateIsInitialized(),this.stateSubject$.pipe((0,d.q)(1)).subscribe(l=>{o=e?e(l):l}),o}select(...e){const{observablesOrSelectorsObject:o,projector:l,config:g}=function N(a){const h=Array.from(a);let e={debounce:!1};if(function z(a){return typeof a.debounce<"u"}(h[h.length-1])&&(e={...e,...h.pop()}),1===h.length&&"function"!=typeof h[0])return{observablesOrSelectorsObject:h[0],projector:void 0,config:e};const o=h.pop();return{observablesOrSelectorsObject:h,projector:o,config:e}}(e);return(function F(a,h){return Array.isArray(a)&&0===a.length&&h}(o,l)?this.stateSubject$:(0,u.a)(o)).pipe(g.debounce?function W(){return a=>new S.y(h=>{let e,o;const l=new s.w0;return l.add(a.subscribe({complete:()=>{e&&h.next(o),h.complete()},error:g=>{h.error(g)},next:g=>{o=g,e||(e=p.E.schedule(()=>{h.next(o),e=void 0}),l.add(e))}})),l})}():a=>a,l?(0,O.U)(x=>o.length>0&&Array.isArray(x)?l(...x):l(x)):a=>a,(0,K.x)(),(0,L.d)({refCount:!0,bufferSize:1}),(0,i.R)(this.destroy$))}effect(e){const o=new E.x;return e(o).pipe((0,i.R)(this.destroy$)).subscribe(),l=>((0,U.b)(l)?l:(0,m.of)(l)).pipe((0,i.R)(this.destroy$)).subscribe(T=>{o.next(T)})}checkProviderForHooks(){p.E.schedule(()=>{if((0,_.isDevMode)()&&(R(this)||$(this))&&!this.\u0275hasProvider){const e=[R(this)?"OnStoreInit":"",$(this)?"OnStateInit":""].filter(o=>o);console.warn(`@ngrx/component-store: ${this.constructor.name} has the ${e.join(" and ")} lifecycle hook(s) implemented without being provided using the provideComponentStore(${this.constructor.name}) function. To resolve this, provide the component store via provideComponentStore(${this.constructor.name})`)}})}assertStateIsInitialized(){if(!this.isInitialized)throw new Error(`${this.constructor.name} has not been initialized yet. Please make sure it is initialized before updating/getting.`)}}return a.\u0275fac=function(e){return new(e||a)(_.\u0275\u0275inject(b,8))},a.\u0275prov=_.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a})()}}]);