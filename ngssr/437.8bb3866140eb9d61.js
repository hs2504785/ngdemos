"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[437],{437:(B,$,r)=>{r.r($),r.d($,{LongRunningModule:()=>j});var b=r(6814),x=r(4190),W=r(967),t=r(5879);const A=["output"],k=1e6,F=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){console.log("here"),function E(n={}){const{frames:o=50,speed:e=.0017,size:a=300,inset:u=3,parent:z=document.getElementById("longTask")}=n,P=document.createTextNode("\n    .lagRadar-sweep > * {\n      shape-rendering: crispEdges;\n    }\n    .lagRadar-face {\n      fill: transparent;\n    }\n    .lagRadar-hand {\n      stroke-width: 4px;\n      stroke-linecap: round;\n    }\n  ");function m(c,d={},h=[]){const l=document.createElementNS("http://www.w3.org/2000/svg",c);return Object.keys(d).forEach(i=>l.setAttribute(i,d[i])),h.forEach(i=>l.appendChild(i)),l}const v=2*Math.PI,s=a/2,g=s-u,w=m("path",{class:"lagRadar-hand"}),p=new Array(o).fill("path").map(c=>m(c)),L=m("svg",{class:"lagRadar",height:a,width:a},[m("style",{type:"text/css"},[P]),m("g",{class:"lagRadar-sweep"},p),w,m("circle",{class:"lagRadar-face",cx:s,cy:s,r:g})]);z.appendChild(L);let M,R=0,f={rotation:0,now:Date.now(),tx:s+g,ty:s};const S=(()=>{const l=120/Math.log(100);return function(i){return 120-Math.max(0,Math.min(l*Math.log(i/10),120))}})();(function C(){const c=Date.now(),d=Math.min(v-e,e*(c-f.now)),h=(f.rotation+d)%v,l=s+g*Math.cos(h),i=s+g*Math.sin(h),D=d<Math.PI?"0":"1",Q=`M${l} ${i}A${g} ${g} 0 ${D} 0 ${f.tx} ${f.ty}L${s} ${s}`,T=S(d/e);p[R%o].setAttribute("d",Q),p[R%o].setAttribute("fill",`hsl(${T}, 80%, 40%)`),w.setAttribute("d",`M${s} ${s}L${l} ${i}`),w.setAttribute("stroke",`hsl(${T}, 80%, 60%)`);for(let y=0;y<o;y++)p[(o+R-y)%o].style.fillOpacity=""+(1-y/o);R++,f={now:c,rotation:h,tx:l,ty:i},M=window.requestAnimationFrame(C)})()}(),this.initWorker()}initWorker(){typeof Worker<"u"&&(this.worker=new Worker(r.tu(new URL(r.p+r.u(7287),r.b))),this.worker.onmessage=({data:e})=>{this.setResult("Worker",e,performance.now()-this.start)})}setResult(e,a,u){this.output.nativeElement.textContent=`\n    From ${e}.\n    Result: ${a}.\n    Time: ${u}`.trim()}runMainThread(){this.output.nativeElement.textContent="Wait...",this.start=performance.now();const e=(0,W.P)(k);this.setResult("Main thread",e,performance.now()-this.start)}runWorkerThread(){this.output.nativeElement.textContent="Wait...",this.start=performance.now(),this.worker.postMessage(k)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-long-running"]],viewQuery:function(e,a){if(1&e&&t.\u0275\u0275viewQuery(A,5),2&e){let u;t.\u0275\u0275queryRefresh(u=t.\u0275\u0275loadQuery())&&(a.output=u.first)}},decls:14,vars:0,consts:[[1,"container"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-warning","me-2",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[1,"main","text-center"],[1,"text-muted"],["output",""],["id","longTask"]],template:function(e,a){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h1"),t.\u0275\u0275text(3,"Long Running Task Demo"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div")(5,"button",2),t.\u0275\u0275listener("click",function(){return a.runMainThread()}),t.\u0275\u0275text(6," Main Thread Task "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"button",3),t.\u0275\u0275listener("click",function(){return a.runWorkerThread()}),t.\u0275\u0275text(8," Web Worker Task "),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(9,"div",4)(10,"div",5,6),t.\u0275\u0275text(12,"Nothing to display... yet"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(13,"div",7),t.\u0275\u0275elementEnd()())},changeDetection:0}),n})()}];let I=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[x.Bz.forChild(F),x.Bz]}),n})(),j=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[b.ez,I]}),n})()}}]);