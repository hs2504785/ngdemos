(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{Sgyi:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r};Object.defineProperty(t,"__esModule",{value:!0});var a=n("bOoB");function s(e,t,n,i){if(void 0!==e){var o=function(e){if(!a.isObject(e))return e;var o=r({},e);return Object.keys(o).forEach(function(e){var c;(a.isObject(o[e])||Array.isArray(o[e]))&&(o=r(r({},o),((c={})[e]=s(o[e],t,n,i),c)))}),o};return!Array.isArray(e)&&!a.isObject(e)||a.isEmpty(t)||a.isEmpty(n)?e:Array.isArray(e)?function(e){var r=[],s=e.map(function(e,n){var i=o(e);return a.checkAgainstPredicate(i,t)&&r.push(n),i});if(r.length>0)for(var c=0;c<r.length;c+=1)s.splice(r[c]+c+(i?0:1),0,n);return s}(e):o(e)}}t.appendProps=function e(t,n,i){if(void 0!==t){var s=function(t){if(!a.isObject(t))return t;var s=r({},t);return a.checkAgainstPredicate(s,n)&&(s=r(r({},s),i)),Object.keys(s).forEach(function(t){var o;(a.isObject(s[t])||Array.isArray(s[t]))&&(s=r(r({},s),((o={})[t]=e(s[t],n,i),o)))}),s};return!Array.isArray(t)&&!a.isObject(t)||a.isEmpty(n)||a.isEmpty(i)?t:Array.isArray(t)?t.map(function(e){return s(e)}):s(t)}},t.replaceObject=function e(t,n,i){if(void 0!==t){var s=function(t){if(!a.isObject(t))return t;var s=r({},t);return a.checkAgainstPredicate(s,n)&&(s=r({},i)),Object.keys(s).forEach(function(t){var o;(a.isObject(s[t])||Array.isArray(s[t]))&&(s=r(r({},s),((o={})[t]=e(s[t],n,i),o)))}),s};return!Array.isArray(t)&&!a.isObject(t)||a.isEmpty(n)||a.isEmpty(i)?t:Array.isArray(t)?t.map(function(e){return s(e)}):s(t)}},t.changeProps=function e(t,n,i){if(void 0!==t){var s=function(t){if(!a.isObject(t))return t;var s=r({},t);return a.checkAgainstPredicate(s,n)&&Object.keys(i).forEach(function(e){var t;Object.prototype.hasOwnProperty.call(s,e)&&(s=r(r({},s),((t={})[e]=i[e],t)))}),Object.keys(s).forEach(function(t){var o;(a.isObject(s[t])||Array.isArray(s[t]))&&(s=r(r({},s),((o={})[t]=e(s[t],n,i),o)))}),s};return!Array.isArray(t)&&!a.isObject(t)||a.isEmpty(n)||a.isEmpty(i)?t:Array.isArray(t)?t.map(function(e){return s(e)}):s(t)}},t.removeObject=function e(t,n){if(void 0!==t){var i=function(t){if(!a.isObject(t))return t;var i=r({},t);return Object.keys(i).forEach(function(t){var s;(a.isObject(i[t])||Array.isArray(i[t]))&&(i=r(r({},i),((s={})[t]=e(i[t],n),s)))}),i};return!Array.isArray(t)&&!a.isObject(t)||a.isEmpty(n)?t:Array.isArray(t)?t.filter(function(e){return!a.checkAgainstPredicate(e,n)}).map(function(e){return i(e)}):a.checkAgainstPredicate(t,n)?void 0:i(t)}},t.returnFound=function e(t,n){if(void 0!==t){var s=void 0,o=function(e){e&&!a.isEmpty(e)&&(s=s?Array.isArray(s)?i(s,[r({},e)]):[s,r({},e)]:e)},c=function(t){a.checkAgainstPredicate(t,n)&&o(t),Object.keys(t).forEach(function(r){(a.isObject(t[r])||Array.isArray(t[r]))&&o(e(t[r],n))})};return!Array.isArray(t)&&!a.isObject(t)||a.isEmpty(n)?t:(Array.isArray(t)?t.map(function(e){return c(e)}):c(t),s)}},t.insertObjectBefore=function(e,t,n){return s(e,t,n,!0)},t.insertObjectAfter=function(e,t,n){return s(e,t,n,!1)}},bOoB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=function(e){return!!e&&"[object Object]"===Object.prototype.toString.call(e)},t.isEmpty=function(e){return t.isObject(e)&&0===Object.keys(e).length},t.checkAgainstPredicate=function(e,n){return t.isObject(e)&&t.isObject(n)&&Object.keys(n).every(function(t){return Object.prototype.hasOwnProperty.call(e,t)&&n[t]===e[t]})}},nW25:function(e,t,n){"use strict";n.r(t),n.d(t,"TreeModule",function(){return oe});var r=n("ofXK"),i=n("tyNb"),a=n("fXoL"),s=n("hlQ1"),o=n("tk/3");let c=(()=>{class e extends s.a{constructor(e,t){super("DataSource",e,t)}}return e.\u0275fac=function(t){return new(t||e)(a.Yb(o.a),a.Yb(s.g))},e.\u0275prov=a.Kb({token:e,factory:e.\u0275fac}),e})();var d=n("lJxs"),l=n("IzEk");let u=(()=>{class e extends s.b{constructor(e){super("DataSource",e)}addOne(e){this.addOneToCache(e)}addMany(e){this.addManyToCache(e)}updateOne(e){this.updateOneInCache(e)}updateMany(e){this.updateManyInCache(e)}removeOne(e){this.removeOneFromCache(e)}removeMany(e){this.removeManyFromCache(e)}upsertOne(e){this.upsertOneInCache(e)}getAll(){return this.selectors$.entities$}getOne(e){const t="string"==typeof e?e:e.id;return this.selectors$.entities$.pipe(Object(d.a)(e=>e.filter(e=>e.id===t)[0]),Object(l.a)(1))}patchOne(e,t){const n={children:[...e.children,t]},r=Object.assign(Object.assign({},e),n);this.upsertOne(r)}}return e.\u0275fac=function(t){return new(t||e)(a.Yb(s.c))},e.\u0275prov=a.Kb({token:e,factory:e.\u0275fac}),e})();var h=n("Sgyi");function p(e){if("object"!=typeof e||null===e)return e;if(Array.isArray(e))return function(e,t){const n=Object.keys(e),r=new Array(n.length);for(const i of n){const n=e[i];r[i]="object"!=typeof n||null===n?n:t(n)}return r}(e,p);const t={};for(const n in e){if(!1===Object.hasOwnProperty.call(e,n))continue;const r=e[n];t[n]="object"!=typeof r||null===r?r:p(r)}return t}let f=(()=>{class e{constructor(e){this.dataSourceService=e,this.expandedNodes=new Set,this.flatNodeMap=new Map}toggleExpandedNodes(e,t,n=!1){let r=t.id||t.name;n?this.expandedNodes.delete(r):this.expandedNodes.add(r)}restoreExpandedNodes(e){this.expandedNodes.forEach(t=>{const n=e.dataNodes.find(e=>(e.id||e.name)===t);e.expand(n)})}getParent(e){const{treeControl:t}=this;if(t.getLevel(e)<1)return null;for(let n=t.dataNodes.indexOf(e)-1;n>=0;n--){const e=t.dataNodes[n];if(0===t.getLevel(e))return e}}updateNode(e,t){const n=this.getParent(e),r=this.flatNodeMap.get(n);this.dataSourceService.getOne(r.id).subscribe(n=>{const r=Object(h.changeProps)(n,{name:e.name},t);this.dataSourceService.updateOne(r)})}addNodeToParent(e,t){e.children=[...e.children,t],this.dataSourceService.updateOne(e)}addNode(e,t){if(e.level){const n=this.flatNodeMap.get(e),r=this.getParent(e),i=this.flatNodeMap.get(r);this.dataSourceService.getOne(i.id).subscribe(r=>{const i=Object.assign(Object.assign({},n),{children:[...n.children,t]}),a=Object(h.replaceObject)(r,{name:e.name},i);this.dataSourceService.updateOne(a)})}else{const n=p(this.flatNodeMap.get(e));this.addNodeToParent(n,t)}}}return e.\u0275fac=function(t){return new(t||e)(a.Yb(u))},e.\u0275prov=a.Kb({token:e,factory:e.\u0275fac}),e})();var b=n("0EQZ"),m=n("7+OI"),y=n("XNiG"),g=n("2Vo4"),v=n("LRne"),_=(n("pLZG"),n("1G5W")),O=n("8LU1"),N=n("cH1L");class S extends class{constructor(){this.expansionModel=new b.c(!0)}toggle(e){this.expansionModel.toggle(this._trackByValue(e))}expand(e){this.expansionModel.select(this._trackByValue(e))}collapse(e){this.expansionModel.deselect(this._trackByValue(e))}isExpanded(e){return this.expansionModel.isSelected(this._trackByValue(e))}toggleDescendants(e){this.expansionModel.isSelected(this._trackByValue(e))?this.collapseDescendants(e):this.expandDescendants(e)}collapseAll(){this.expansionModel.clear()}expandDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.select(...t.map(e=>this._trackByValue(e)))}collapseDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.deselect(...t.map(e=>this._trackByValue(e)))}_trackByValue(e){return this.trackBy?this.trackBy(e):e}}{constructor(e,t,n){super(),this.getLevel=e,this.isExpandable=t,this.options=n,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(e){const t=[];for(let n=this.dataNodes.indexOf(e)+1;n<this.dataNodes.length&&this.getLevel(e)<this.getLevel(this.dataNodes[n]);n++)t.push(this.dataNodes[n]);return t}expandAll(){this.expansionModel.select(...this.dataNodes.map(e=>this._trackByValue(e)))}}const T=new a.s("CDK_TREE_NODE_OUTLET_NODE");let k=(()=>{class e{constructor(e,t){this.viewContainer=e,this._node=t}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(a.S),a.Ob(T,8))},e.\u0275dir=a.Jb({type:e,selectors:[["","cdkTreeNodeOutlet",""]]}),e})();class D{constructor(e){this.$implicit=e}}let x=(()=>{class e{constructor(e){this.template=e}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(a.O))},e.\u0275dir=a.Jb({type:e,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),e})(),C=(()=>{class e{constructor(e,t){this._differs=e,this._changeDetectorRef=t,this._onDestroy=new y.a,this._levels=new Map,this.viewChange=new g.a({start:0,end:Number.MAX_VALUE})}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy)}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const e=this._nodeDefs.filter(e=>!e.when);this._defaultNodeDef=e[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(e){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let e;Object(b.g)(this._dataSource)?e=this._dataSource.connect(this):Object(m.a)(this._dataSource)?e=this._dataSource:Array.isArray(this._dataSource)&&(e=Object(v.a)(this._dataSource)),e&&(this._dataSubscription=e.pipe(Object(_.a)(this._onDestroy)).subscribe(e=>this.renderNodeChanges(e)))}renderNodeChanges(e,t=this._dataDiffer,n=this._nodeOutlet.viewContainer,r){const i=t.diff(e);i&&(i.forEachOperation((t,i,a)=>{if(null==t.previousIndex)this.insertNode(e[a],a,n,r);else if(null==a)n.remove(i),this._levels.delete(t.item);else{const e=n.get(i);n.move(e,a)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(e,t){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find(n=>n.when&&n.when(t,e))||this._defaultNodeDef}insertNode(e,t,n,r){const i=this._getNodeDef(e,t),a=new D(e);a.level=this.treeControl.getLevel?this.treeControl.getLevel(e):void 0!==r&&this._levels.has(r)?this._levels.get(r)+1:0,this._levels.set(e,a.level),(n||this._nodeOutlet.viewContainer).createEmbeddedView(i.template,a,t),j.mostRecentTreeNode&&(j.mostRecentTreeNode.data=e)}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(a.u),a.Ob(a.h))},e.\u0275cmp=a.Ib({type:e,selectors:[["cdk-tree"]],contentQueries:function(e,t,n){if(1&e&&a.Hb(n,x,1),2&e){let e;a.nc(e=a.cc())&&(t._nodeDefs=e)}},viewQuery:function(e,t){if(1&e&&a.Cc(k,3),2&e){let e;a.nc(e=a.cc())&&(t._nodeOutlet=e.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(e,t){1&e&&a.Qb(0,0)},directives:[k],encapsulation:2}),e})(),j=(()=>{class e{constructor(t,n){this._elementRef=t,this._tree=n,this._destroyed=new y.a,this._dataChanges=new y.a,e.mostRecentTreeNode=this,this._elementRef.nativeElement.classList.add("cdk-tree-node"),this.role="treeitem"}get role(){return"treeitem"}set role(e){this._elementRef.nativeElement.setAttribute("role",e)}get data(){return this._data}set data(e){e!==this._data&&(this._data=e,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}_setExpanded(e){this._isAriaExpanded=e,this._elementRef.nativeElement.setAttribute("aria-expanded",`${e}`)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}ngOnInit(){this._parentNodeAriaLevel=function(e){let t=e.parentElement;for(;t&&!E(t);)t=t.parentElement;return t?t.classList.contains("cdk-nested-tree-node")?Object(O.f)(t.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`)}ngDoCheck(){this.isExpanded!=this._isAriaExpanded&&this._setExpanded(this.isExpanded)}ngOnDestroy(){e.mostRecentTreeNode===this&&(e.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){this.role="treeitem"}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(a.l),a.Ob(C))},e.\u0275dir=a.Jb({type:e,selectors:[["cdk-tree-node"]],inputs:{role:"role"},exportAs:["cdkTreeNode"]}),e.mostRecentTreeNode=null,e})();function E(e){const t=e.classList;return!(!(null==t?void 0:t.contains("cdk-nested-tree-node"))&&!(null==t?void 0:t.contains("cdk-tree")))}const A=/([A-Za-z%]+)$/;let w=(()=>{class e{constructor(e,t,n,r){this._treeNode=e,this._tree=t,this._element=n,this._dir=r,this._destroyed=new y.a,this.indentUnits="px",this._indent=40,this._setPadding(),r&&r.change.pipe(Object(_.a)(this._destroyed)).subscribe(()=>this._setPadding(!0)),e._dataChanges.subscribe(()=>this._setPadding())}get level(){return this._level}set level(e){this._setLevelInput(e)}get indent(){return this._indent}set indent(e){this._setIndentInput(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const e=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,t=null==this._level?e:this._level;return"number"==typeof t?`${t*this._indent}${this.indentUnits}`:null}_setPadding(e=!1){const t=this._paddingIndent();if(t!==this._currentPadding||e){const e=this._element.nativeElement,n=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",r="paddingLeft"===n?"paddingRight":"paddingLeft";e.style[n]=t||"",e.style[r]="",this._currentPadding=t}}_setLevelInput(e){this._level=Object(O.f)(e,null),this._setPadding()}_setIndentInput(e){let t=e,n="px";if("string"==typeof e){const r=e.split(A);t=r[0],n=r[1]||n}this.indentUnits=n,this._indent=Object(O.f)(t),this._setPadding()}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(j),a.Ob(C),a.Ob(a.l),a.Ob(N.c,8))},e.\u0275dir=a.Jb({type:e,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),e})(),M=(()=>{class e{constructor(e,t){this._tree=e,this._treeNode=t,this._recursive=!1}get recursive(){return this._recursive}set recursive(e){this._recursive=Object(O.c)(e)}_toggle(e){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),e.stopPropagation()}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(C),a.Ob(j))},e.\u0275dir=a.Jb({type:e,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(e,t){1&e&&a.bc("click",function(e){return t._toggle(e)})},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),e})(),I=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({}),e})();var P=n("FKr1"),L=n("VRyK");const U=Object(P.v)(Object(P.s)(j));let R=(()=>{class e extends U{constructor(e,t,n){super(e,t),this._elementRef=e,this._tree=t,this.tabIndex=Number(n)||0,this._elementRef.nativeElement.classList.add("mat-tree-node")}ngOnInit(){super.ngOnInit()}ngDoCheck(){super.ngDoCheck()}ngOnDestroy(){super.ngOnDestroy()}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(a.l),a.Ob(C),a.Zb("tabindex"))},e.\u0275dir=a.Jb({type:e,selectors:[["mat-tree-node"]],inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex"},exportAs:["matTreeNode"],features:[a.Cb([{provide:j,useExisting:e}]),a.Ab]}),e})(),B=(()=>{class e extends x{}return e.\u0275fac=function(t){return F(t||e)},e.\u0275dir=a.Jb({type:e,selectors:[["","matTreeNodeDef",""]],inputs:{when:["matTreeNodeDefWhen","when"],data:["matTreeNode","data"]},features:[a.Cb([{provide:x,useExisting:e}]),a.Ab]}),e})();const F=a.Wb(B);let H=(()=>{class e extends w{get level(){return this._level}set level(e){this._setLevelInput(e)}get indent(){return this._indent}set indent(e){this._setIndentInput(e)}}return e.\u0275fac=function(t){return $(t||e)},e.\u0275dir=a.Jb({type:e,selectors:[["","matTreeNodePadding",""]],inputs:{level:["matTreeNodePadding","level"],indent:["matTreeNodePaddingIndent","indent"]},features:[a.Cb([{provide:w,useExisting:e}]),a.Ab]}),e})();const $=a.Wb(H);let V=(()=>{class e{constructor(e,t){this.viewContainer=e,this._node=t}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(a.S),a.Ob(T,8))},e.\u0275dir=a.Jb({type:e,selectors:[["","matTreeNodeOutlet",""]],features:[a.Cb([{provide:k,useExisting:e}])]}),e})(),z=(()=>{class e extends C{}return e.\u0275fac=function(t){return W(t||e)},e.\u0275cmp=a.Ib({type:e,selectors:[["mat-tree"]],viewQuery:function(e,t){if(1&e&&a.Cc(V,3),2&e){let e;a.nc(e=a.cc())&&(t._nodeOutlet=e.first)}},hostAttrs:["role","tree",1,"mat-tree","cdk-tree"],exportAs:["matTree"],features:[a.Cb([{provide:C,useExisting:e}]),a.Ab],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(e,t){1&e&&a.Qb(0,0)},directives:[V],styles:[".mat-tree{display:block}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word}.mat-nested-tree-node{border-bottom-width:0}\n"],encapsulation:2}),e})();const W=a.Wb(z);let J=(()=>{class e extends M{get recursive(){return this._recursive}set recursive(e){this._recursive=Object(O.c)(e)}}return e.\u0275fac=function(t){return Y(t||e)},e.\u0275dir=a.Jb({type:e,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:["matTreeNodeToggleRecursive","recursive"]},features:[a.Cb([{provide:M,useExisting:e}]),a.Ab]}),e})();const Y=a.Wb(J);let K=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({imports:[[I,P.f],P.f]}),e})();class Q{constructor(e,t,n,r){this.transformFunction=e,this.getLevel=t,this.isExpandable=n,this.getChildren=r}_flattenNode(e,t,n,r){const i=this.transformFunction(e,t);if(n.push(i),this.isExpandable(i)){const i=this.getChildren(e);i&&(Array.isArray(i)?this._flattenChildren(i,t,n,r):i.pipe(Object(l.a)(1)).subscribe(e=>{this._flattenChildren(e,t,n,r)}))}return n}_flattenChildren(e,t,n,r){e.forEach((i,a)=>{let s=r.slice();s.push(a!=e.length-1),this._flattenNode(i,t+1,n,s)})}flattenNodes(e){let t=[];return e.forEach(e=>this._flattenNode(e,0,t,[])),t}expandFlattenedNodes(e,t){let n=[],r=[];return r[0]=!0,e.forEach(e=>{let i=!0;for(let t=0;t<=this.getLevel(e);t++)i=i&&r[t];i&&n.push(e),this.isExpandable(e)&&(r[this.getLevel(e)+1]=t.isExpanded(e))}),n}}class G extends b.b{constructor(e,t,n=[]){super(),this._treeControl=e,this._treeFlattener=t,this._flattenedData=new g.a([]),this._expandedData=new g.a([]),this._data=new g.a(n)}get data(){return this._data.value}set data(e){this._data.next(e),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}connect(e){const t=[e.viewChange,this._treeControl.expansionModel.changed,this._flattenedData];return Object(L.a)(...t).pipe(Object(d.a)(()=>(this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value,this._treeControl)),this._expandedData.value)))}disconnect(){}}const q=[{id:"componentsID",name:"components",type:"folder",children:[{name:"src",type:"folder",children:[{name:"cdk",type:"folder",children:[{name:"package.json",type:"file"},{name:"BUILD.bazel",type:"file"}]},{name:"material",type:"folder"}]}]},{id:"angularID",name:"angular",type:"folder",children:[{name:"packages",type:"folder",children:[{name:".travis.yml",type:"file"},{name:"firebase.json",type:"file"},{name:"firebase1.json",type:"file",work:"None"},{name:"firebase2.json",type:"file"}]},{name:"package.json",type:"file"}]},{id:"angularjsID",name:"angularjs",type:"folder",children:[{name:"gulpfile.js",type:"file"},{name:"README.md",type:"file"}]}];var X=n("bTqV"),Z=n("NFeN");function ee(e,t){if(1&e){const e=a.Vb();a.Ub(0,"mat-tree-node",3),a.Pb(1,"button",4),a.Ub(2,"mat-icon",5),a.yc(3),a.Tb(),a.yc(4),a.Ub(5,"button",6),a.bc("click",function(){a.qc(e);const n=t.$implicit;return a.fc().editNode(n)}),a.Ub(6,"mat-icon"),a.yc(7,"mode_edit"),a.Tb(),a.Tb(),a.Ub(8,"button",7),a.bc("click",function(){a.qc(e);const n=t.$implicit;return a.fc().deleteNode(n)}),a.Ub(9,"mat-icon"),a.yc(10,"delete"),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=t.$implicit;a.Db(2),a.Eb("aria-label",e.type+"icon"),a.Db(1),a.Ac(" ","file"===e.type?"description":"folder"," "),a.Db(1),a.Ac(" ",e.name," ")}}function te(e,t){if(1&e){const e=a.Vb();a.Ub(0,"mat-tree-node",8),a.Ub(1,"button",9),a.Ub(2,"mat-icon",10),a.yc(3),a.Tb(),a.Tb(),a.Ub(4,"mat-icon",5),a.yc(5),a.Tb(),a.yc(6),a.Ub(7,"button",11),a.bc("click",function(){a.qc(e);const n=t.$implicit;return a.fc().addNode(n)}),a.Ub(8,"mat-icon"),a.yc(9,"add"),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=t.$implicit,n=a.fc();a.Db(1),a.Eb("aria-label","Toggle "+e.name),a.Db(2),a.Ac(" ",n.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),a.Db(1),a.Eb("aria-label",e.type+"icon"),a.Db(1),a.Ac(" ","file"===e.type?"description":"folder"," "),a.Db(1),a.Ac(" ",e.name," ")}}let ne=(()=>{class e{constructor(e,t){this.dataSourceService=e,this.dsHelperService=t,this.editNodeChange=new a.o,this.addNodeChange=new a.o,this.activeNode=null,this.transformer=(e,t)=>{const n=Object.assign(Object.assign({},e.id&&{id:e.id}),{name:e.name,type:e.type,level:t,expandable:!!e.children});return this.dsHelperService.flatNodeMap.set(n,e),n},this.treeFlattener=new Q(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new S(this.getLevel,this.isExpandable),this.dataSource=new G(this.treeControl,this.treeFlattener),this.dsHelperService.treeFlattener=this.treeFlattener,this.dsHelperService.treeControl=this.treeControl}ngOnInit(){this.initializeData(),this.handleExpandedNodes()}editNode(e){this.editNodeChange.emit(e)}initializeData(){this.dataSourceService.addManyToCache(q),this.dataSources$=this.dataSourceService.entities$,this.dataSources$.subscribe(e=>{this.dataSource.data=e,this.dsHelperService.restoreExpandedNodes(this.treeControl)})}getLevel(e){return e.level}isExpandable(e){return e.expandable}hasChild(e,t){return t.expandable}getChildren(e){return e.children}handleExpandedNodes(){this.treeControl.expansionModel.changed.subscribe(e=>{e.added[0]&&e.added.length?this.dsHelperService.toggleExpandedNodes(this.treeControl,e.added[0]):e.removed.length&&e.removed.forEach(e=>{this.dsHelperService.toggleExpandedNodes(this.treeControl,e,!0)})})}deleteNode(e){const t=this.dsHelperService.getParent(e),n=this.dsHelperService.flatNodeMap.get(t);this.dataSourceService.getOne(n.id).subscribe(t=>{const n=Object(h.removeObject)(t,{name:e.name});this.dataSourceService.updateOne(n)})}addNode(e){this.addNodeChange.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(u),a.Ob(f))},e.\u0275cmp=a.Ib({type:e,selectors:[["lib-data-source-list"]],outputs:{editNodeChange:"editNodeChange",addNodeChange:"addNodeChange"},decls:3,vars:3,consts:[[3,"dataSource","treeControl"],["matTreeNodeToggle","","matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodeToggle","","matTreeNodePadding",""],["mat-icon-button","","disabled",""],[1,"type-icon"],["mat-icon-button","","color","accent",1,"icon-btn","edit",3,"click"],["mat-icon-button","","color","warn",1,"icon-btn","delete",3,"click"],["matTreeNodePadding",""],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],["mat-icon-button","","color","accent",1,"icon-btn",3,"click"]],template:function(e,t){1&e&&(a.Ub(0,"mat-tree",0),a.wc(1,ee,11,3,"mat-tree-node",1),a.wc(2,te,10,5,"mat-tree-node",2),a.Tb()),2&e&&(a.kc("dataSource",t.dataSource)("treeControl",t.treeControl),a.Db(2),a.kc("matTreeNodeDefWhen",t.hasChild))},directives:[z,B,R,J,H,X.a,Z.a],styles:[".type-icon[_ngcontent-%COMP%]{color:#757575;margin-right:5px}.icon-btn[_ngcontent-%COMP%]{margin-left:10px}.delete[_ngcontent-%COMP%]     .mat-icon, .edit[_ngcontent-%COMP%]     .mat-icon{font-size:18px}"]}),e})();const re={DataSource:{selectId(e){if(null!==e)return e.id||e.name?`${e.id||e.name}`:e._id},entityDispatcherOptions:{optimisticUpdate:!0}}};let ie=(()=>{class e{constructor(e,t,n){this.eds=e,this.entityDataService=t,this.dataSourceService=n,this.eds.registerMetadataMap(re),this.entityDataService.registerService("DataSource",this.dataSourceService)}}return e.\u0275fac=function(t){return new(t||e)(a.Yb(s.f),a.Yb(s.e),a.Yb(c))},e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({providers:[c,u,f],imports:[[K,Z.b,X.b]]}),e})();const ae=[{path:"",component:(()=>{class e{constructor(e,t){this.dataSourceService=e,this.dsHelperService=t}ngOnInit(){}addOne(){this.dataSourceService.addOne({id:"TESTID",name:"Test",type:"folder",children:[{name:"src",type:"folder",children:[{name:"cdk",type:"folder",children:[{name:"package.json",type:"file"},{name:"BUILD.bazel",type:"file"}]},{name:"material",type:"folder"}]}]})}addMany(){this.dataSourceService.addMany([{id:"TESTIDMANY",name:"Test add many",type:"folder",children:[{name:"src many",type:"folder",children:[{name:"cdk",type:"folder",children:[{name:"package.json",type:"file"},{name:"BUILD.bazel",type:"file"}]},{name:"material",type:"folder"}]}]},{id:"componentsIDMANY",name:"components many 2",type:"folder",children:[{name:"components 2",type:"folder",children:[{name:"cdk",type:"folder",children:[{name:"package.json",type:"file"},{name:"BUILD.bazel",type:"file"}]},{name:"material",type:"folder"}]}]}])}upsertOne(){this.dataSourceService.upsertOne({id:"TESTID",name:"Test",type:"folder",children:[{name:"src",type:"folder",children:[{name:"cdk",type:"folder",children:[{name:"package.json",type:"file"},{name:"BUILD.bazel",type:"file"}]},{name:"material",type:"folder"}]}]})}removeOne(){this.dataSourceService.removeOne("TESTID")}removeMany(){this.dataSourceService.removeMany(["TESTID","componentsID"])}updateOne(){this.dataSourceService.updateOne({id:"TESTID",name:"Test 1",type:"folder",children:[{name:"src 1",type:"folder",children:[{name:"cdk",type:"folder",children:[{name:"package.json",type:"file"},{name:"BUILD.bazel",type:"file"}]},{name:"material",type:"folder"}]}]})}updateMany(){this.dataSourceService.updateMany([{id:"TESTID",name:"Test 2",type:"folder",children:[{name:"src 2",type:"folder",children:[{name:"cdk",type:"folder",children:[{name:"package.json",type:"file"},{name:"BUILD.bazel",type:"file"}]},{name:"material",type:"folder"}]}]},{id:"componentsID",name:"components 2",type:"folder",children:[{name:"components 2",type:"folder",children:[{name:"cdk",type:"folder",children:[{name:"package.json",type:"file"},{name:"BUILD.bazel",type:"file"}]},{name:"material",type:"folder"}]}]}])}getOne(){this.dataSourceService.getOne("TESTID").subscribe(console.log)}patchOne(){this.dataSourceService.patchOne({id:"TESTID",name:"Test",type:"folder",children:[{name:"src",type:"folder",children:[{name:"cdk",type:"folder",children:[{name:"package.json",type:"file"},{name:"BUILD.bazel",type:"file"}]},{name:"material",type:"folder"}]}]},{id:"TESTIDWOrker",name:"Worker",type:"folder",children:[{id:"TESTIDWOrker2",name:"Worker 2",type:"file"}]})}getFlattenNodes(){console.log("HERREE ",this.dsHelperService.treeFlattener),console.log("Flatten nodes with treeControl ",this.dsHelperService.treeControl.dataNodes),this.dataSourceService.getAll().subscribe(e=>{console.log("Node matrix ",e),console.log("Flatten Nodes ",this.dsHelperService.treeFlattener.flattenNodes(e))})}onNodeEdit(e){const t=this.dsHelperService.flatNodeMap.get(e);this.dsHelperService.updateNode(e,Object.assign(Object.assign({},t),{name:t.name+" UPDATED!"}))}onNodeAdd(e){this.dsHelperService.flatNodeMap.get(e),this.dsHelperService.addNode(e,{id:"addNodeID",name:"My New node",type:"file"})}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(u),a.Ob(f))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-tree"]],decls:27,vars:0,consts:[[1,"container"],[1,"col"],[3,"editNodeChange","addNodeChange"],[1,"col","action"],["mat-button","","mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(a.Ub(0,"header"),a.Ub(1,"h1"),a.yc(2,"Tree Demo"),a.Tb(),a.Tb(),a.Ub(3,"div",0),a.Ub(4,"div",1),a.Ub(5,"lib-data-source-list",2),a.bc("editNodeChange",function(e){return t.onNodeEdit(e)})("addNodeChange",function(e){return t.onNodeAdd(e)}),a.Tb(),a.Tb(),a.Ub(6,"div",3),a.Ub(7,"button",4),a.bc("click",function(){return t.addOne()}),a.yc(8," Add DS "),a.Tb(),a.Ub(9,"button",4),a.bc("click",function(){return t.addMany()}),a.yc(10," Add Many "),a.Tb(),a.Ub(11,"button",4),a.bc("click",function(){return t.upsertOne()}),a.yc(12," Upsert One "),a.Tb(),a.Ub(13,"button",4),a.bc("click",function(){return t.removeOne()}),a.yc(14," Remove One "),a.Tb(),a.Ub(15,"button",4),a.bc("click",function(){return t.removeMany()}),a.yc(16," Remove Many "),a.Tb(),a.Ub(17,"button",4),a.bc("click",function(){return t.updateOne()}),a.yc(18," Update One "),a.Tb(),a.Ub(19,"button",4),a.bc("click",function(){return t.updateMany()}),a.yc(20," Update Many "),a.Tb(),a.Ub(21,"button",4),a.bc("click",function(){return t.getOne()}),a.yc(22," Get One "),a.Tb(),a.Ub(23,"button",4),a.bc("click",function(){return t.patchOne()}),a.yc(24," Patch One "),a.Tb(),a.Ub(25,"button",4),a.bc("click",function(){return t.getFlattenNodes()}),a.yc(26," Get Flatten Nodes "),a.Tb(),a.Tb(),a.Tb())},directives:[ne,X.a],styles:[".container[_ngcontent-%COMP%], header[_ngcontent-%COMP%]{margin:20px}.container[_ngcontent-%COMP%]{grid-gap:20px;display:grid;grid-template-columns:3fr 1fr}.action[_ngcontent-%COMP%]{display:flex;flex-direction:column}.action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:4px}"]}),e})()}];let se=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({imports:[[i.d.forChild(ae)],i.d]}),e})(),oe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({providers:[],imports:[[r.c,se,X.b,ie]]}),e})()}}]);