"use strict";(self.webpackChunkdemoapp=self.webpackChunkdemoapp||[]).push([[585],{7585:(L,f,c)=>{c.r(f),c.d(f,{SongsModule:()=>F});var g=c(9808),v=c(4426),t=c(1223),m=c(9300),u=c(4004),h=c(1135),C=c(1884);const y={playlist:void 0};class a{constructor(){this.subject=new h.X(y),this.store=this.subject.asObservable().pipe((0,C.x)())}get value(){return this.subject.value}select(o){return this.store.pipe(function S(...s){const o=s.length;if(0===o)throw new Error("list of properties cannot be empty.");return(0,u.U)(n=>{let e=n;for(let i=0;i<o;i++){const l=null==e?void 0:e[s[i]];if(void 0===l)return;e=l}return e})}(o))}set(o,n){this.subject.next(Object.assign(Object.assign({},this.value),{[o]:n}))}}var _=c(8505),x=c(520);let p=(()=>{class s{constructor(n,e){this.http=n,this.store=e,this.API_URL="http://localhost:3000/playlist",this.getPlaylist$=this.http.get(this.API_URL).pipe((0,_.b)(i=>this.store.set("playlist",i)))}toggle(n){this.http.put(`${this.API_URL}/${n.track._id}`,n.track).subscribe(e=>{const l=this.store.value.playlist.map(r=>n.track._id===r._id?Object.assign(Object.assign({},r),n.track):r);this.store.set("playlist",l)})}}return s.\u0275fac=function(n){return new(n||s)(t.LFG(x.eN),t.LFG(a))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac}),s})();function O(s,o){if(1&s){const n=t.EpF();t.TgZ(0,"li")(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"div",2),t.NdJ("click",function(){const l=t.CHM(n).index,r=t.oxw();return t.KtG(r.toggleItem(l,"favourite"))}),t.qZA(),t.TgZ(6,"div",3),t.NdJ("click",function(){const l=t.CHM(n).index,r=t.oxw();return t.KtG(r.toggleItem(l,"listened"))}),t.qZA()()}if(2&s){const n=o.$implicit;t.xp6(2),t.Oqu(n.artist),t.xp6(2),t.Oqu(n.track),t.xp6(1),t.ekj("active",n.favourite),t.xp6(1),t.ekj("active",n.listened)}}const P=["*"];let d=(()=>{class s{constructor(){this.toggle=new t.vpe}toggleItem(n,e){const i=this.list[n];this.toggle.emit({track:Object.assign(Object.assign({},i),{[e]:!i[e]})})}}return s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["songs-list"]],inputs:{list:"list"},outputs:{toggle:"toggle"},ngContentSelectors:P,decls:5,vars:1,consts:[[1,"songs-list"],[4,"ngFor","ngForOf"],[1,"songs-list__favourite",3,"click"],[1,"songs-list__listened",3,"click"]],template:function(n,e){1&n&&(t.F$t(),t.TgZ(0,"div",0)(1,"h3"),t.Hsn(2),t.qZA(),t.TgZ(3,"ul"),t.YNc(4,O,7,6,"li",1),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngForOf",e.list))},dependencies:[g.sg],styles:[".songs-list[_ngcontent-%COMP%]{background:#fff;box-shadow:0 16px 24px #0000001a;border-radius:4px;overflow:hidden}.songs-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{background:#552075;color:#fff;padding:10px;text-align:center}.songs-list__favourite[_ngcontent-%COMP%]{width:22px;height:20px;position:absolute;top:27px;right:20px;background:url(favourite.d4c1b3781f7a3c2e.svg) no-repeat 0 0;background-size:20px 20px;cursor:pointer}.songs-list__favourite.active[_ngcontent-%COMP%]{background:url(favourite-active.a19504ef2d30c039.svg) no-repeat 0 0;background-size:20px 20px}.songs-list__listened[_ngcontent-%COMP%]{width:22px;height:20px;position:absolute;top:27px;right:50px;cursor:pointer;background:url(played.6fa7f3e956a1e81e.svg) no-repeat 0 0;background-size:20px 20px}.songs-list__listened.active[_ngcontent-%COMP%]{background:url(played-active.bb01c92a79f78404.svg) no-repeat 0 0;background-size:20px 20px}.songs-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;padding:10px 20px}.songs-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2n){background:#f5f4f5}.songs-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;font-margin:0;font-weight:500}.songs-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#807d82}"],changeDetection:0}),s})(),b=(()=>{class s{constructor(n,e){this.store=n,this.songsService=e}ngOnInit(){this.favourites$=this.store.select("playlist").pipe((0,m.h)(Boolean),(0,u.U)(n=>n.filter(e=>e.favourite)))}onToggle(n){this.songsService.toggle(n)}}return s.\u0275fac=function(n){return new(n||s)(t.Y36(a),t.Y36(p))},s.\u0275cmp=t.Xpm({type:s,selectors:[["songs-favourites"]],decls:4,vars:3,consts:[[1,"songs"],[3,"list","toggle"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"songs-list",1),t.NdJ("toggle",function(l){return e.onToggle(l)}),t.ALo(2,"async"),t._uU(3," Favourites "),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("list",t.lcZ(2,1,e.favourites$)))},dependencies:[d,g.Ov],encapsulation:2}),s})(),M=(()=>{class s{constructor(n,e){this.store=n,this.songsService=e}ngOnInit(){this.listened$=this.store.select("playlist").pipe((0,m.h)(Boolean),(0,u.U)(n=>n.filter(e=>e.listened)))}onToggle(n){this.songsService.toggle(n)}}return s.\u0275fac=function(n){return new(n||s)(t.Y36(a),t.Y36(p))},s.\u0275cmp=t.Xpm({type:s,selectors:[["songs-listened"]],decls:4,vars:3,consts:[[1,"songs"],[3,"list","toggle"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"songs-list",1),t.NdJ("toggle",function(l){return e.onToggle(l)}),t.ALo(2,"async"),t._uU(3," Played "),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("list",t.lcZ(2,1,e.listened$)))},dependencies:[d,g.Ov],encapsulation:2}),s})(),T=(()=>{class s{constructor(n,e){this.store=n,this.songsService=e}ngOnInit(){this.playlist$=this.store.select("playlist"),this.subscription=this.songsService.getPlaylist$.subscribe()}onToggle(n){this.songsService.toggle(n)}ngOnDestroy(){this.subscription.unsubscribe()}}return s.\u0275fac=function(n){return new(n||s)(t.Y36(a),t.Y36(p))},s.\u0275cmp=t.Xpm({type:s,selectors:[["songs-playlist"]],decls:4,vars:3,consts:[[1,"songs"],[3,"list","toggle"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"songs-list",1),t.NdJ("toggle",function(l){return e.onToggle(l)}),t.ALo(2,"async"),t._uU(3," Playlist "),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("list",t.lcZ(2,1,e.playlist$)))},dependencies:[d,g.Ov],encapsulation:2}),s})();const Z=[{path:"",component:(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-songs"]],decls:4,vars:0,consts:[[1,"songs"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"songs-playlist")(2,"songs-listened")(3,"songs-favourites"),t.qZA())},dependencies:[b,M,T],styles:["div[_ngcontent-%COMP%]{display:flex;justify-content:center}songs-playlist[_ngcontent-%COMP%], songs-favourites[_ngcontent-%COMP%], songs-listened[_ngcontent-%COMP%]{flex:0 0 33%;margin:0 10px}"]}),s})()}];let k=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[v.Bz.forChild(Z),v.Bz]}),s})(),F=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({providers:[a,p],imports:[g.ez,k]}),s})()}}]);