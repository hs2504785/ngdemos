"use strict";(self.webpackChunkdemoapp=self.webpackChunkdemoapp||[]).push([[585],{7585:(L,_,l)=>{l.r(_),l.d(_,{SongsModule:()=>p});var u=l(6895),x=l(5808),t=l(8256),S=l(9300),C=l(4004),O=l(1135),P=l(1884);const b={playlist:void 0};class d{constructor(){this.subject=new O.X(b),this.store=this.subject.asObservable().pipe((0,P.x)())}get value(){return this.subject.value}select(n){return this.store.pipe(function M(...e){const n=e.length;if(0===n)throw new Error("list of properties cannot be empty.");return(0,C.U)(s=>{let o=s;for(let i=0;i<n;i++){const c=o?.[e[i]];if(!(typeof c<"u"))return;o=c}return o})}(n))}set(n,s){this.subject.next({...this.value,[n]:s})}}var T=l(8505),Z=l(529);class r{constructor(n,s){this.http=n,this.store=s,this.API_URL="http://localhost:3000/playlist",this.getPlaylist$=this.http.get(this.API_URL).pipe((0,T.b)(o=>this.store.set("playlist",o)))}toggle(n){this.http.put(`${this.API_URL}/${n.track._id}`,n.track).subscribe(s=>{const i=this.store.value.playlist.map(c=>n.track._id===c._id?{...c,...n.track}:c);this.store.set("playlist",i)})}}function k(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"li")(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"div",2),t.NdJ("click",function(){const c=t.CHM(s).index,y=t.oxw();return t.KtG(y.toggleItem(c,"favourite"))}),t.qZA(),t.TgZ(6,"div",3),t.NdJ("click",function(){const c=t.CHM(s).index,y=t.oxw();return t.KtG(y.toggleItem(c,"listened"))}),t.qZA()()}if(2&e){const s=n.$implicit;t.xp6(2),t.Oqu(s.artist),t.xp6(2),t.Oqu(s.track),t.xp6(1),t.ekj("active",s.favourite),t.xp6(1),t.ekj("active",s.listened)}}r.\u0275fac=function(n){return new(n||r)(t.LFG(Z.eN),t.LFG(d))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac});class g{constructor(){this.toggle=new t.vpe}toggleItem(n,s){const o=this.list[n];this.toggle.emit({track:{...o,[s]:!o[s]}})}}g.\u0275fac=function(n){return new(n||g)},g.\u0275cmp=t.Xpm({type:g,selectors:[["songs-list"]],inputs:{list:"list"},outputs:{toggle:"toggle"},ngContentSelectors:["*"],decls:5,vars:1,consts:[[1,"songs-list"],[4,"ngFor","ngForOf"],[1,"songs-list__favourite",3,"click"],[1,"songs-list__listened",3,"click"]],template:function(n,s){1&n&&(t.F$t(),t.TgZ(0,"div",0)(1,"h3"),t.Hsn(2),t.qZA(),t.TgZ(3,"ul"),t.YNc(4,k,7,6,"li",1),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngForOf",s.list))},dependencies:[u.sg],styles:[".songs-list[_ngcontent-%COMP%]{background:#fff;box-shadow:0 16px 24px #0000001a;border-radius:4px;overflow:hidden}.songs-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{background:#552075;color:#fff;padding:10px;text-align:center}.songs-list__favourite[_ngcontent-%COMP%]{width:22px;height:20px;position:absolute;top:27px;right:20px;background:url(favourite.d4c1b3781f7a3c2e.svg) no-repeat 0 0;background-size:20px 20px;cursor:pointer}.songs-list__favourite.active[_ngcontent-%COMP%]{background:url(favourite-active.a19504ef2d30c039.svg) no-repeat 0 0;background-size:20px 20px}.songs-list__listened[_ngcontent-%COMP%]{width:22px;height:20px;position:absolute;top:27px;right:50px;cursor:pointer;background:url(played.6fa7f3e956a1e81e.svg) no-repeat 0 0;background-size:20px 20px}.songs-list__listened.active[_ngcontent-%COMP%]{background:url(played-active.bb01c92a79f78404.svg) no-repeat 0 0;background-size:20px 20px}.songs-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;padding:10px 20px}.songs-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2n){background:#f5f4f5}.songs-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;font-margin:0;font-weight:500}.songs-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#807d82}"],changeDetection:0});class f{constructor(n,s){this.store=n,this.songsService=s}ngOnInit(){this.favourites$=this.store.select("playlist").pipe((0,S.h)(Boolean),(0,C.U)(n=>n.filter(s=>s.favourite)))}onToggle(n){this.songsService.toggle(n)}}f.\u0275fac=function(n){return new(n||f)(t.Y36(d),t.Y36(r))},f.\u0275cmp=t.Xpm({type:f,selectors:[["songs-favourites"]],decls:4,vars:3,consts:[[1,"songs"],[3,"list","toggle"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0)(1,"songs-list",1),t.NdJ("toggle",function(i){return s.onToggle(i)}),t.ALo(2,"async"),t._uU(3," Favourites "),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("list",t.lcZ(2,1,s.favourites$)))},dependencies:[g,u.Ov],encapsulation:2});class v{constructor(n,s){this.store=n,this.songsService=s}ngOnInit(){this.listened$=this.store.select("playlist").pipe((0,S.h)(Boolean),(0,C.U)(n=>n.filter(s=>s.listened)))}onToggle(n){this.songsService.toggle(n)}}v.\u0275fac=function(n){return new(n||v)(t.Y36(d),t.Y36(r))},v.\u0275cmp=t.Xpm({type:v,selectors:[["songs-listened"]],decls:4,vars:3,consts:[[1,"songs"],[3,"list","toggle"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0)(1,"songs-list",1),t.NdJ("toggle",function(i){return s.onToggle(i)}),t.ALo(2,"async"),t._uU(3," Played "),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("list",t.lcZ(2,1,s.listened$)))},dependencies:[g,u.Ov],encapsulation:2});class h{constructor(n,s){this.store=n,this.songsService=s}ngOnInit(){this.playlist$=this.store.select("playlist"),this.subscription=this.songsService.getPlaylist$.subscribe()}onToggle(n){this.songsService.toggle(n)}ngOnDestroy(){this.subscription.unsubscribe()}}h.\u0275fac=function(n){return new(n||h)(t.Y36(d),t.Y36(r))},h.\u0275cmp=t.Xpm({type:h,selectors:[["songs-playlist"]],decls:4,vars:3,consts:[[1,"songs"],[3,"list","toggle"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0)(1,"songs-list",1),t.NdJ("toggle",function(i){return s.onToggle(i)}),t.ALo(2,"async"),t._uU(3," Playlist "),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("list",t.lcZ(2,1,s.playlist$)))},dependencies:[g,u.Ov],encapsulation:2});class m{constructor(){}ngOnInit(){}}m.\u0275fac=function(n){return new(n||m)},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-songs"]],decls:4,vars:0,consts:[[1,"songs"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"songs-playlist")(2,"songs-listened")(3,"songs-favourites"),t.qZA())},dependencies:[f,v,h],styles:["div[_ngcontent-%COMP%]{display:flex;justify-content:center}songs-playlist[_ngcontent-%COMP%], songs-favourites[_ngcontent-%COMP%], songs-listened[_ngcontent-%COMP%]{flex:0 0 33%;margin:0 10px}"]});const A=[{path:"",component:m}];class a{}a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[x.Bz.forChild(A),x.Bz]});class p{}p.\u0275fac=function(n){return new(n||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({providers:[d,r],imports:[u.ez,a]})}}]);