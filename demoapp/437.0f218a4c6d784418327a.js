(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[437],{1437:(t,s,e)=>{"use strict";e.r(s),e.d(s,{SongsModule:()=>m});var n=e(1116),o=e(8147),i=e(8619),c=e(8512),r=e(8720),l=e(9996);const g={playlist:void 0};class a{constructor(){this.subject=new c.X(g),this.store=this.subject.asObservable().pipe((0,r.x)())}get value(){return this.subject.value}select(t){return this.store.pipe(function(...t){const s=t.length;if(0===s)throw new Error("list of properties cannot be empty.");return e=>(0,l.U)(function(t,s){return e=>{let n=e;for(let o=0;o<s;o++){const s=null!=n?n[t[o]]:void 0;if(void 0===s)return;n=s}return n}}(t,s))(e)}(t))}set(t,s){this.subject.next(Object.assign(Object.assign({},this.value),{[t]:s}))}}var p=e(6599),u=e(2693);let d=(()=>{class t{constructor(t,s){this.http=t,this.store=s,this.API_URL="http://localhost:3000/playlist",this.getPlaylist$=this.http.get(this.API_URL).pipe((0,p.b)(t=>this.store.set("playlist",t)))}toggle(t){this.http.put(`${this.API_URL}/${t.track._id}`,t.track).subscribe(s=>{const e=this.store.value.playlist.map(s=>t.track._id===s._id?Object.assign(Object.assign({},s),t.track):s);this.store.set("playlist",e)})}}return t.\u0275fac=function(s){return new(s||t)(i.LFG(u.eN),i.LFG(a))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();function f(t,s){if(1&t){const t=i.EpF();i.TgZ(0,"li"),i.TgZ(1,"p"),i._uU(2),i.qZA(),i.TgZ(3,"span"),i._uU(4),i.qZA(),i.TgZ(5,"div",2),i.NdJ("click",function(){const s=i.CHM(t).index;return i.oxw().toggleItem(s,"favourite")}),i.qZA(),i.TgZ(6,"div",3),i.NdJ("click",function(){const s=i.CHM(t).index;return i.oxw().toggleItem(s,"listened")}),i.qZA(),i.qZA()}if(2&t){const t=s.$implicit;i.xp6(2),i.Oqu(t.artist),i.xp6(2),i.Oqu(t.track),i.xp6(1),i.ekj("active",t.favourite),i.xp6(1),i.ekj("active",t.listened)}}const h=["*"];let v=(()=>{class t{constructor(){this.toggle=new i.vpe}toggleItem(t,s){const e=this.list[t];this.toggle.emit({track:Object.assign(Object.assign({},e),{[s]:!e[s]})})}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["songs-list"]],inputs:{list:"list"},outputs:{toggle:"toggle"},ngContentSelectors:h,decls:5,vars:1,consts:[[1,"songs-list"],[4,"ngFor","ngForOf"],[1,"songs-list__favourite",3,"click"],[1,"songs-list__listened",3,"click"]],template:function(t,s){1&t&&(i.F$t(),i.TgZ(0,"div",0),i.TgZ(1,"h3"),i.Hsn(2),i.qZA(),i.TgZ(3,"ul"),i.YNc(4,f,7,6,"li",1),i.qZA(),i.qZA()),2&t&&(i.xp6(4),i.Q6J("ngForOf",s.list))},directives:[n.sg],styles:[".songs-list[_ngcontent-%COMP%]{background:#fff;box-shadow:0 16px 24px 0 rgba(0,0,0,.1);border-radius:4px;overflow:hidden}.songs-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{background:#552075;color:#fff;padding:10px;text-align:center}.songs-list__favourite[_ngcontent-%COMP%]{width:22px;height:20px;position:absolute;top:27px;right:20px;background:url(favourite.0e75be6a3cd56f59c318.svg) no-repeat 0 0;background-size:20px 20px;cursor:pointer}.songs-list__favourite.active[_ngcontent-%COMP%]{background:url(favourite-active.a747d42f7c30dfda5c3d.svg) no-repeat 0 0;background-size:20px 20px}.songs-list__listened[_ngcontent-%COMP%]{width:22px;height:20px;position:absolute;top:27px;right:50px;cursor:pointer;background:url(played.03791bd7ed4807c04e61.svg) no-repeat 0 0;background-size:20px 20px}.songs-list__listened.active[_ngcontent-%COMP%]{background:url(played-active.6faab79e2f25bd3c1908.svg) no-repeat 0 0;background-size:20px 20px}.songs-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;padding:10px 20px}.songs-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2n){background:#f5f4f5}.songs-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;font-margin:0;font-weight:500}.songs-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#807d82}"],changeDetection:0}),t})(),_=(()=>{class t{constructor(t,s){this.store=t,this.songsService=s}ngOnInit(){this.playlist$=this.store.select("playlist"),this.subscription=this.songsService.getPlaylist$.subscribe()}onToggle(t){this.songsService.toggle(t)}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(s){return new(s||t)(i.Y36(a),i.Y36(d))},t.\u0275cmp=i.Xpm({type:t,selectors:[["songs-playlist"]],decls:4,vars:3,consts:[[1,"songs"],[3,"list","toggle"]],template:function(t,s){1&t&&(i.TgZ(0,"div",0),i.TgZ(1,"songs-list",1),i.NdJ("toggle",function(t){return s.onToggle(t)}),i.ALo(2,"async"),i._uU(3," Playlist "),i.qZA(),i.qZA()),2&t&&(i.xp6(1),i.Q6J("list",i.lcZ(2,1,s.playlist$)))},directives:[v],pipes:[n.Ov],encapsulation:2}),t})();var b=e(3835);let x=(()=>{class t{constructor(t,s){this.store=t,this.songsService=s}ngOnInit(){this.listened$=this.store.select("playlist").pipe((0,b.h)(Boolean),(0,l.U)(t=>t.filter(t=>t.listened)))}onToggle(t){this.songsService.toggle(t)}}return t.\u0275fac=function(s){return new(s||t)(i.Y36(a),i.Y36(d))},t.\u0275cmp=i.Xpm({type:t,selectors:[["songs-listened"]],decls:4,vars:3,consts:[[1,"songs"],[3,"list","toggle"]],template:function(t,s){1&t&&(i.TgZ(0,"div",0),i.TgZ(1,"songs-list",1),i.NdJ("toggle",function(t){return s.onToggle(t)}),i.ALo(2,"async"),i._uU(3," Played "),i.qZA(),i.qZA()),2&t&&(i.xp6(1),i.Q6J("list",i.lcZ(2,1,s.listened$)))},directives:[v],pipes:[n.Ov],encapsulation:2}),t})(),O=(()=>{class t{constructor(t,s){this.store=t,this.songsService=s}ngOnInit(){this.favourites$=this.store.select("playlist").pipe((0,b.h)(Boolean),(0,l.U)(t=>t.filter(t=>t.favourite)))}onToggle(t){this.songsService.toggle(t)}}return t.\u0275fac=function(s){return new(s||t)(i.Y36(a),i.Y36(d))},t.\u0275cmp=i.Xpm({type:t,selectors:[["songs-favourites"]],decls:4,vars:3,consts:[[1,"songs"],[3,"list","toggle"]],template:function(t,s){1&t&&(i.TgZ(0,"div",0),i.TgZ(1,"songs-list",1),i.NdJ("toggle",function(t){return s.onToggle(t)}),i.ALo(2,"async"),i._uU(3," Favourites "),i.qZA(),i.qZA()),2&t&&(i.xp6(1),i.Q6J("list",i.lcZ(2,1,s.favourites$)))},directives:[v],pipes:[n.Ov],encapsulation:2}),t})();const y=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-songs"]],decls:4,vars:0,consts:[[1,"songs"]],template:function(t,s){1&t&&(i.TgZ(0,"div",0),i._UZ(1,"songs-playlist"),i._UZ(2,"songs-listened"),i._UZ(3,"songs-favourites"),i.qZA())},directives:[_,x,O],styles:["div[_ngcontent-%COMP%]{display:flex;justify-content:center}songs-favourites[_ngcontent-%COMP%], songs-listened[_ngcontent-%COMP%], songs-playlist[_ngcontent-%COMP%]{flex:0 0 33%;margin:0 10px}"]}),t})()}];let Z=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[o.Bz.forChild(y)],o.Bz]}),t})(),m=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({providers:[a,d],imports:[[n.ez,Z]]}),t})()}}]);