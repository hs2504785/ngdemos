"use strict";(self.webpackChunkngdemos=self.webpackChunkngdemos||[]).push([[5604],{6822:(_,P,t)=>{t.d(P,{K:()=>C});var S=t(6325),s=t(4650),p=t(4006),I=t(4144),D=t(9549),E=t(4859);class C{constructor(f,l,v){this.fb=f,this.dialogRef=l,this.dialogTitle=v.dialogTitle,this.user=v.user,this.mode=v.mode;const d={email:[""],first_name:[""],last_name:[""]};"update"==this.mode?(this.form=this.fb.group(d),this.form.patchValue({...this.user})):"create"==this.mode&&(this.form=this.fb.group({...d}))}onClose(){this.dialogRef.close()}onSave(){const f={...this.user,...this.form.value};"update"==this.mode?(console.log("Update User",f),this.dialogRef.close(f)):"create"==this.mode&&(console.log("Add User",f),f.avatar="https://reqres.in/img/faces/10-image.jpg",this.dialogRef.close(f))}}C.\u0275fac=function(f){return new(f||C)(s.\u0275\u0275directiveInject(p.qu),s.\u0275\u0275directiveInject(S.so),s.\u0275\u0275directiveInject(S.WI))},C.\u0275cmp=s.\u0275\u0275defineComponent({type:C,selectors:[["app-user-cs-dialog"]],decls:16,vars:2,consts:[["mat-dialog-title",""],[3,"formGroup"],["matInput","","placeholder","Email","formControlName","email"],["matInput","","placeholder","First Name","formControlName","first_name"],["matInput","","placeholder","Last Name","formControlName","last_name"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(f,l){1&f&&(s.\u0275\u0275elementStart(0,"h2",0),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(2,"mat-dialog-content"),s.\u0275\u0275elementContainerStart(3)(4,1),s.\u0275\u0275elementStart(5,"mat-form-field"),s.\u0275\u0275element(6,"input",2),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(7,"mat-form-field"),s.\u0275\u0275element(8,"input",3),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(9,"mat-form-field"),s.\u0275\u0275element(10,"input",4),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementContainerEnd()(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(11,"mat-dialog-actions")(12,"button",5),s.\u0275\u0275listener("click",function(){return l.onClose()}),s.\u0275\u0275text(13,"Close"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(14,"button",6),s.\u0275\u0275listener("click",function(){return l.onSave()}),s.\u0275\u0275text(15,"Save"),s.\u0275\u0275elementEnd()()),2&f&&(s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate(l.dialogTitle),s.\u0275\u0275advance(3),s.\u0275\u0275property("formGroup",l.form))},dependencies:[S.uh,S.xY,S.H8,I.Nt,D.KE,E.lW,p.Fj,p.JJ,p.JL,p.sg,p.u],changeDetection:0})},7695:(_,P,t)=>{t.d(P,{O:()=>d});var S=t(4280),s=t(515),p=t(3900),I=t(8505),D=t(262),E=t(4650),C=t(4004),U=t(529),f=t(915);class l{constructor(o,O){this.http=o,this.cacheService=O,this.API_URL="https://reqres.in/api/users"}getUsers(){return this.cacheService.getData(`${this.API_URL}`).pipe((0,C.U)(o=>o.data))}addUser(o){return this.http.post(`${this.API_URL}`,o)}updateUser(o){return this.http.put(`${this.API_URL}/${o.id}`,o)}removeUser(o){return this.http.delete(`${this.API_URL}/${o}`)}}l.\u0275fac=function(o){return new(o||l)(E.\u0275\u0275inject(U.eN),E.\u0275\u0275inject(f.Q))},l.\u0275prov=E.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"});var v=t(9116);class d extends S.m1{constructor(o,O){super({users:[],selectdUserId:1}),this.userCsService=o,this.route=O,this.users$=this.select(r=>r.users),this.selectedUserId$=this.select(r=>r.selectdUserId),this.usersCount$=this.select(this.users$,r=>r.length),this.top3users$=this.select(this.users$,r=>r.slice(0,3)),this.userById$=this.select(this.users$,this.selectedUserId$,(r,a)=>r.find(h=>h.id===a)),this.getUsers=this.effect(r=>r.pipe((0,p.w)(()=>this.userCsService.getUsers().pipe((0,I.b)({next:a=>this.setUsers(a),error:a=>this.logError(a)}),(0,D.K)(()=>s.E))))),this.addUser=this.effect(r=>r.pipe((0,p.w)(a=>this.userCsService.addUser(a).pipe((0,I.b)({next:h=>this.addUserInStore(h),error:h=>this.logError(h)}),(0,D.K)(()=>s.E))))),this.updateUser=this.effect(r=>r.pipe((0,p.w)(a=>this.userCsService.updateUser(a).pipe((0,I.b)({next:h=>this.updateUserInStore(h),error:h=>this.logError(h)}),(0,D.K)(()=>s.E))))),this.removeUser=this.effect(r=>r.pipe((0,p.w)(a=>this.userCsService.removeUser(+a).pipe((0,I.b)({next:h=>this.removeUserFromStore(a),error:h=>this.logError(h)}),(0,D.K)(()=>s.E))))),this.setUsers=this.updater((r,a)=>({...r,users:[...r.users,...a]})),this.addUserInStore=this.updater((r,a)=>({...r,users:[a,...r.users]})),this.removeUserFromStore=this.updater((r,a)=>({...r,users:r.users.filter(h=>h.id!==+a)})),this.updateUserInStore=this.updater((r,a)=>({...r,users:r.users.map(h=>h.id===a.id?a:h)}))}logError(o){console.log("Errr",o)}}d.\u0275fac=function(o){return new(o||d)(E.\u0275\u0275inject(l),E.\u0275\u0275inject(v.gz))},d.\u0275prov=E.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac})},915:(_,P,t)=>{t.d(P,{Q:()=>l});var S=t(9646),s=t(4707),p=t(249),I=t(576),E=t(8343),C=t(8505),U=t(4650),f=t(529);class l{constructor(d){this.http=d,this.responseCache=new Map}getData(d){const m=this.responseCache.get(d);return m?(0,S.of)(m):this.http.get(d).pipe(function D(v,d,m,o){m&&!(0,I.m)(m)&&(o=m);const O=(0,I.m)(m)?m:void 0;return r=>(0,p.O)(new s.t(v,d,o),O)(r)}(1),(0,E.x)(),(0,C.b)(o=>{this.responseCache.set(d,o)}))}clearCache(){this.responseCache.clear()}}l.\u0275fac=function(d){return new(d||l)(U.\u0275\u0275inject(f.eN))},l.\u0275prov=U.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"})},4280:(_,P,t)=>{t.d(P,{m1:()=>B});var S=t(9751),s=t(727),p=t(3101),I=t(4707),D=t(5191),E=t(9646),C=t(233),U=t(515),f=t(2843),l=t(7159),v=t(9841),d=t(7579),m=t(5363),o=t(8505),O=t(1365),r=t(4004),a=t(262),h=t(2722),A=t(5698),K=t(1884),L=t(4782),x=t(4650);function y(i){return"function"==typeof i.ngrxOnStoreInit}function R(i){return"function"==typeof i.ngrxOnStateInit}const b=new x.InjectionToken("@ngrx/component-store Initial State");let B=(()=>{class i{constructor(e){this.destroySubject$=new I.t(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new I.t(1),this.isInitialized=!1,this.state$=this.select(n=>n),this.\u0275hasProvider=!1,e&&this.initState(e),this.checkProviderForHooks()}ngOnDestroy(){this.stateSubject$.complete(),this.destroySubject$.next()}updater(e){return n=>{let g,c=!0;const j=((0,D.b)(n)?n:(0,E.of)(n)).pipe((0,m.Q)(C.N),(0,o.b)(()=>this.assertStateIsInitialized()),(0,O.M)(this.stateSubject$),(0,r.U)(([M,H])=>e(H,M)),(0,o.b)(M=>this.stateSubject$.next(M)),(0,a.K)(M=>c?(g=M,U.E):(0,f._)(()=>M)),(0,h.R)(this.destroy$)).subscribe();if(g)throw g;return c=!1,j}}initState(e){(0,l.x)([e],C.N).subscribe(n=>{this.isInitialized=!0,this.stateSubject$.next(n)})}setState(e){"function"!=typeof e?this.initState(e):this.updater(e)()}patchState(e){const n="function"==typeof e?e(this.get()):e;this.updater((c,g)=>({...c,...g}))(n)}get(e){let n;return this.assertStateIsInitialized(),this.stateSubject$.pipe((0,A.q)(1)).subscribe(c=>{n=e?e(c):c}),n}select(...e){const{observablesOrSelectorsObject:n,projector:c,config:g}=function N(i){const u=Array.from(i);let e={debounce:!1};if(function z(i){return typeof i.debounce<"u"}(u[u.length-1])&&(e={...e,...u.pop()}),1===u.length&&"function"!=typeof u[0])return{observablesOrSelectorsObject:u[0],projector:void 0,config:e};const n=u.pop();return{observablesOrSelectorsObject:u,projector:n,config:e}}(e);return(function F(i,u){return Array.isArray(i)&&0===i.length&&u}(n,c)?this.stateSubject$:(0,v.a)(n)).pipe(g.debounce?function W(){return i=>new S.y(u=>{let e,n;const c=new s.w0;return c.add(i.subscribe({complete:()=>{e&&u.next(n),u.complete()},error:g=>{u.error(g)},next:g=>{n=g,e||(e=p.E.schedule(()=>{u.next(n),e=void 0}),c.add(e))}})),c})}():i=>i,c?(0,r.U)(j=>n.length>0&&Array.isArray(j)?c(...j):c(j)):i=>i,(0,K.x)(),(0,L.d)({refCount:!0,bufferSize:1}),(0,h.R)(this.destroy$))}effect(e){const n=new d.x;return e(n).pipe((0,h.R)(this.destroy$)).subscribe(),c=>((0,D.b)(c)?c:(0,E.of)(c)).pipe((0,h.R)(this.destroy$)).subscribe($=>{n.next($)})}checkProviderForHooks(){p.E.schedule(()=>{if((0,x.isDevMode)()&&(y(this)||R(this))&&!this.\u0275hasProvider){const e=[y(this)?"OnStoreInit":"",R(this)?"OnStateInit":""].filter(n=>n);console.warn(`@ngrx/component-store: ${this.constructor.name} has the ${e.join(" and ")} lifecycle hook(s) implemented without being provided using the provideComponentStore(${this.constructor.name}) function. To resolve this, provide the component store via provideComponentStore(${this.constructor.name})`)}})}assertStateIsInitialized(){if(!this.isInitialized)throw new Error(`${this.constructor.name} has not been initialized yet. Please make sure it is initialized before updating/getting.`)}}return i.\u0275fac=function(e){return new(e||i)(x.\u0275\u0275inject(b,8))},i.\u0275prov=x.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac}),i})()}}]);